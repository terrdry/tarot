<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>pytest API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="index.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;
                Module Index
            </a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#__version__">__version__</a>
            </li>
            <li>
                    <a class="function" href="#approx">approx</a>
            </li>
            <li>
                    <a class="class" href="#Cache">Cache</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Cache.__init__">Cache</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.for_config">for_config</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.clear_cache">clear_cache</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.cache_dir_from_config">cache_dir_from_config</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.warn">warn</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.mkdir">mkdir</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.get">get</a>
                        </li>
                        <li>
                                <a class="function" href="#Cache.set">set</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CallInfo">CallInfo</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CallInfo.__init__">CallInfo</a>
                        </li>
                        <li>
                                <a class="variable" href="#CallInfo.excinfo">excinfo</a>
                        </li>
                        <li>
                                <a class="variable" href="#CallInfo.start">start</a>
                        </li>
                        <li>
                                <a class="variable" href="#CallInfo.stop">stop</a>
                        </li>
                        <li>
                                <a class="variable" href="#CallInfo.duration">duration</a>
                        </li>
                        <li>
                                <a class="variable" href="#CallInfo.when">when</a>
                        </li>
                        <li>
                                <a class="variable" href="#CallInfo.result">result</a>
                        </li>
                        <li>
                                <a class="function" href="#CallInfo.from_call">from_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CaptureFixture">CaptureFixture</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CaptureFixture.__init__">CaptureFixture</a>
                        </li>
                        <li>
                                <a class="variable" href="#CaptureFixture.captureclass">captureclass</a>
                        </li>
                        <li>
                                <a class="variable" href="#CaptureFixture.request">request</a>
                        </li>
                        <li>
                                <a class="function" href="#CaptureFixture.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#CaptureFixture.readouterr">readouterr</a>
                        </li>
                        <li>
                                <a class="function" href="#CaptureFixture.disabled">disabled</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Class">Class</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Class.from_parent">from_parent</a>
                        </li>
                        <li>
                                <a class="function" href="#Class.newinstance">newinstance</a>
                        </li>
                        <li>
                                <a class="function" href="#Class.collect">collect</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#cmdline">cmdline</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#cmdline.main">main</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Collector">Collector</a>
                            <ul class="memberlist">
                        <li>
                                <a class="class" href="#Collector.CollectError">Collector.CollectError</a>
                                        <ul class="memberlist">
                            </ul>

                        </li>
                        <li>
                                <a class="function" href="#Collector.collect">collect</a>
                        </li>
                        <li>
                                <a class="function" href="#Collector.repr_failure">repr_failure</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CollectReport">CollectReport</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CollectReport.__init__">CollectReport</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.when">when</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.nodeid">nodeid</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.outcome">outcome</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.longrepr">longrepr</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.result">result</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.sections">sections</a>
                        </li>
                        <li>
                                <a class="variable" href="#CollectReport.location">location</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Config">Config</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Config.__init__">Config</a>
                        </li>
                        <li>
                                <a class="class" href="#Config.InvocationParams">Config.InvocationParams</a>
                                        <ul class="memberlist">
                                    <li>
                                            <a class="function" href="#Config.InvocationParams.__init__">InvocationParams</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Config.InvocationParams.args">args</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Config.InvocationParams.plugins">plugins</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Config.InvocationParams.dir">dir</a>
                                    </li>
                            </ul>

                        </li>
                        <li>
                                <a class="class" href="#Config.ArgsSource">Config.ArgsSource</a>
                                        <ul class="memberlist">
                                    <li>
                                            <a class="variable" href="#Config.ArgsSource.ARGS">ARGS</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Config.ArgsSource.INVOCATION_DIR">INVOCATION_DIR</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Config.ArgsSource.INCOVATION_DIR">INCOVATION_DIR</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Config.ArgsSource.TESTPATHS">TESTPATHS</a>
                                    </li>
                            </ul>

                        </li>
                        <li>
                                <a class="variable" href="#Config.cache">cache</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.option">option</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.invocation_params">invocation_params</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.pluginmanager">pluginmanager</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.stash">stash</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.trace">trace</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.hook">hook</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.args_source">args_source</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.args">args</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.rootpath">rootpath</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.inipath">inipath</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.add_cleanup">add_cleanup</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.get_terminal_writer">get_terminal_writer</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.pytest_cmdline_parse">pytest_cmdline_parse</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.notify_exception">notify_exception</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.cwd_relative_nodeid">cwd_relative_nodeid</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.fromdictargs">fromdictargs</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.pytest_load_initial_conftests">pytest_load_initial_conftests</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.pytest_collection">pytest_collection</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.parse">parse</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.issue_config_time_warning">issue_config_time_warning</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.addinivalue_line">addinivalue_line</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.getini">getini</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.getoption">getoption</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.getvalue">getvalue</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.getvalueorskip">getvalueorskip</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.VERBOSITY_ASSERTIONS">VERBOSITY_ASSERTIONS</a>
                        </li>
                        <li>
                                <a class="variable" href="#Config.VERBOSITY_TEST_CASES">VERBOSITY_TEST_CASES</a>
                        </li>
                        <li>
                                <a class="function" href="#Config.get_verbosity">get_verbosity</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#console_main">console_main</a>
            </li>
            <li>
                    <a class="function" href="#deprecated_call">deprecated_call</a>
            </li>
            <li>
                    <a class="class" href="#Dir">Dir</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Dir.from_parent">from_parent</a>
                        </li>
                        <li>
                                <a class="function" href="#Dir.collect">collect</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Directory">Directory</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#DoctestItem">DoctestItem</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DoctestItem.__init__">DoctestItem</a>
                        </li>
                        <li>
                                <a class="variable" href="#DoctestItem.runner">runner</a>
                        </li>
                        <li>
                                <a class="variable" href="#DoctestItem.dtest">dtest</a>
                        </li>
                        <li>
                                <a class="variable" href="#DoctestItem.obj">obj</a>
                        </li>
                        <li>
                                <a class="variable" href="#DoctestItem.fixturenames">fixturenames</a>
                        </li>
                        <li>
                                <a class="function" href="#DoctestItem.from_parent">from_parent</a>
                        </li>
                        <li>
                                <a class="function" href="#DoctestItem.setup">setup</a>
                        </li>
                        <li>
                                <a class="function" href="#DoctestItem.runtest">runtest</a>
                        </li>
                        <li>
                                <a class="function" href="#DoctestItem.repr_failure">repr_failure</a>
                        </li>
                        <li>
                                <a class="function" href="#DoctestItem.reportinfo">reportinfo</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#exit">exit</a>
            </li>
            <li>
                    <a class="class" href="#ExceptionInfo">ExceptionInfo</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ExceptionInfo.__init__">ExceptionInfo</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.from_exception">from_exception</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.from_exc_info">from_exc_info</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.from_current">from_current</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.for_later">for_later</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.fill_unfilled">fill_unfilled</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExceptionInfo.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExceptionInfo.value">value</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExceptionInfo.tb">tb</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExceptionInfo.typename">typename</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExceptionInfo.traceback">traceback</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.exconly">exconly</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.errisinstance">errisinstance</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.getrepr">getrepr</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.match">match</a>
                        </li>
                        <li>
                                <a class="function" href="#ExceptionInfo.group_contains">group_contains</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ExitCode">ExitCode</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#ExitCode.OK">OK</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExitCode.TESTS_FAILED">TESTS_FAILED</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExitCode.INTERRUPTED">INTERRUPTED</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExitCode.INTERNAL_ERROR">INTERNAL_ERROR</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExitCode.USAGE_ERROR">USAGE_ERROR</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExitCode.NO_TESTS_COLLECTED">NO_TESTS_COLLECTED</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#fail">fail</a>
            </li>
            <li>
                    <a class="class" href="#File">File</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="function" href="#fixture">fixture</a>
            </li>
            <li>
                    <a class="class" href="#FixtureDef">FixtureDef</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FixtureDef.__init__">FixtureDef</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.baseid">baseid</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.has_location">has_location</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.func">func</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.argname">argname</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.params">params</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.ids">ids</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.argnames">argnames</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.cached_result">cached_result</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureDef.scope">scope</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureDef.addfinalizer">addfinalizer</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureDef.finish">finish</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureDef.execute">execute</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureDef.cache_key">cache_key</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FixtureLookupError">FixtureLookupError</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FixtureLookupError.__init__">FixtureLookupError</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureLookupError.argname">argname</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureLookupError.request">request</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureLookupError.fixturestack">fixturestack</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureLookupError.msg">msg</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureLookupError.formatrepr">formatrepr</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FixtureRequest">FixtureRequest</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#FixtureRequest.fixturename">fixturename</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.param">param</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.scope">scope</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.fixturenames">fixturenames</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.node">node</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.config">config</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.function">function</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.cls">cls</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.instance">instance</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.module">module</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.path">path</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.keywords">keywords</a>
                        </li>
                        <li>
                                <a class="variable" href="#FixtureRequest.session">session</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureRequest.addfinalizer">addfinalizer</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureRequest.applymarker">applymarker</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureRequest.raiseerror">raiseerror</a>
                        </li>
                        <li>
                                <a class="function" href="#FixtureRequest.getfixturevalue">getfixturevalue</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#freeze_includes">freeze_includes</a>
            </li>
            <li>
                    <a class="class" href="#Function">Function</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Function.__init__">Function</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.originalname">originalname</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.fixturenames">fixturenames</a>
                        </li>
                        <li>
                                <a class="function" href="#Function.from_parent">from_parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.function">function</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.instance">instance</a>
                        </li>
                        <li>
                                <a class="function" href="#Function.runtest">runtest</a>
                        </li>
                        <li>
                                <a class="function" href="#Function.setup">setup</a>
                        </li>
                        <li>
                                <a class="function" href="#Function.repr_failure">repr_failure</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#hookimpl">hookimpl</a>
            </li>
            <li>
                    <a class="class" href="#HookRecorder">HookRecorder</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#HookRecorder.__init__">HookRecorder</a>
                        </li>
                        <li>
                                <a class="variable" href="#HookRecorder.calls">calls</a>
                        </li>
                        <li>
                                <a class="variable" href="#HookRecorder.ret">ret</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.finish_recording">finish_recording</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.getcalls">getcalls</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.assert_contains">assert_contains</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.popcall">popcall</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.getcall">getcall</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.getreports">getreports</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.matchreport">matchreport</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.getfailures">getfailures</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.getfailedcollections">getfailedcollections</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.listoutcomes">listoutcomes</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.countoutcomes">countoutcomes</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.assertoutcome">assertoutcome</a>
                        </li>
                        <li>
                                <a class="function" href="#HookRecorder.clear">clear</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#hookspec">hookspec</a>
            </li>
            <li>
                    <a class="function" href="#importorskip">importorskip</a>
            </li>
            <li>
                    <a class="class" href="#Item">Item</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Item.nextitem">nextitem</a>
                        </li>
                        <li>
                                <a class="variable" href="#Item.user_properties">user_properties</a>
                        </li>
                        <li>
                                <a class="function" href="#Item.runtest">runtest</a>
                        </li>
                        <li>
                                <a class="function" href="#Item.add_report_section">add_report_section</a>
                        </li>
                        <li>
                                <a class="function" href="#Item.reportinfo">reportinfo</a>
                        </li>
                        <li>
                                <a class="variable" href="#Item.location">location</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LineMatcher">LineMatcher</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LineMatcher.__init__">LineMatcher</a>
                        </li>
                        <li>
                                <a class="variable" href="#LineMatcher.lines">lines</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.fnmatch_lines_random">fnmatch_lines_random</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.re_match_lines_random">re_match_lines_random</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.get_lines_after">get_lines_after</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.fnmatch_lines">fnmatch_lines</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.re_match_lines">re_match_lines</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.no_fnmatch_line">no_fnmatch_line</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.no_re_match_line">no_re_match_line</a>
                        </li>
                        <li>
                                <a class="function" href="#LineMatcher.str">str</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LogCaptureFixture">LogCaptureFixture</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LogCaptureFixture.__init__">LogCaptureFixture</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogCaptureFixture.handler">handler</a>
                        </li>
                        <li>
                                <a class="function" href="#LogCaptureFixture.get_records">get_records</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogCaptureFixture.text">text</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogCaptureFixture.records">records</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogCaptureFixture.record_tuples">record_tuples</a>
                        </li>
                        <li>
                                <a class="variable" href="#LogCaptureFixture.messages">messages</a>
                        </li>
                        <li>
                                <a class="function" href="#LogCaptureFixture.clear">clear</a>
                        </li>
                        <li>
                                <a class="function" href="#LogCaptureFixture.set_level">set_level</a>
                        </li>
                        <li>
                                <a class="function" href="#LogCaptureFixture.at_level">at_level</a>
                        </li>
                        <li>
                                <a class="function" href="#LogCaptureFixture.filtering">filtering</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#main">main</a>
            </li>
            <li>
                    <a class="variable" href="#mark">mark</a>
            </li>
            <li>
                    <a class="class" href="#Mark">Mark</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Mark.__init__">Mark</a>
                        </li>
                        <li>
                                <a class="variable" href="#Mark.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Mark.args">args</a>
                        </li>
                        <li>
                                <a class="variable" href="#Mark.kwargs">kwargs</a>
                        </li>
                        <li>
                                <a class="function" href="#Mark.combined_with">combined_with</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MarkDecorator">MarkDecorator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MarkDecorator.__init__">MarkDecorator</a>
                        </li>
                        <li>
                                <a class="variable" href="#MarkDecorator.mark">mark</a>
                        </li>
                        <li>
                                <a class="variable" href="#MarkDecorator.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#MarkDecorator.args">args</a>
                        </li>
                        <li>
                                <a class="variable" href="#MarkDecorator.kwargs">kwargs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MarkDecorator.markname">markname</a>
                        </li>
                        <li>
                                <a class="function" href="#MarkDecorator.with_args">with_args</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MarkGenerator">MarkGenerator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MarkGenerator.__init__">MarkGenerator</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Metafunc">Metafunc</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Metafunc.__init__">Metafunc</a>
                        </li>
                        <li>
                                <a class="variable" href="#Metafunc.definition">definition</a>
                        </li>
                        <li>
                                <a class="variable" href="#Metafunc.config">config</a>
                        </li>
                        <li>
                                <a class="variable" href="#Metafunc.module">module</a>
                        </li>
                        <li>
                                <a class="variable" href="#Metafunc.function">function</a>
                        </li>
                        <li>
                                <a class="variable" href="#Metafunc.fixturenames">fixturenames</a>
                        </li>
                        <li>
                                <a class="variable" href="#Metafunc.cls">cls</a>
                        </li>
                        <li>
                                <a class="function" href="#Metafunc.parametrize">parametrize</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Module">Module</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Module.collect">collect</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MonkeyPatch">MonkeyPatch</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MonkeyPatch.context">context</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.setattr">setattr</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.delattr">delattr</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.setitem">setitem</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.delitem">delitem</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.setenv">setenv</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.delenv">delenv</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.syspath_prepend">syspath_prepend</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.chdir">chdir</a>
                        </li>
                        <li>
                                <a class="function" href="#MonkeyPatch.undo">undo</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#OptionGroup">OptionGroup</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OptionGroup.__init__">OptionGroup</a>
                        </li>
                        <li>
                                <a class="variable" href="#OptionGroup.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#OptionGroup.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#OptionGroup.options">options</a>
                        </li>
                        <li>
                                <a class="variable" href="#OptionGroup.parser">parser</a>
                        </li>
                        <li>
                                <a class="function" href="#OptionGroup.addoption">addoption</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Package">Package</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Package.__init__">Package</a>
                        </li>
                        <li>
                                <a class="function" href="#Package.setup">setup</a>
                        </li>
                        <li>
                                <a class="function" href="#Package.collect">collect</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#param">param</a>
            </li>
            <li>
                    <a class="class" href="#Parser">Parser</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Parser.__init__">Parser</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parser.prog">prog</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parser.extra_info">extra_info</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.processoption">processoption</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.getgroup">getgroup</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.addoption">addoption</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.parse">parse</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.parse_setoption">parse_setoption</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.parse_known_args">parse_known_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.parse_known_and_unknown_args">parse_known_and_unknown_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.addini">addini</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestAssertRewriteWarning">PytestAssertRewriteWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestCacheWarning">PytestCacheWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestCollectionWarning">PytestCollectionWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestConfigWarning">PytestConfigWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestDeprecationWarning">PytestDeprecationWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestExperimentalApiWarning">PytestExperimentalApiWarning</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#PytestExperimentalApiWarning.simple">simple</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestRemovedIn9Warning">PytestRemovedIn9Warning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestReturnNotNoneWarning">PytestReturnNotNoneWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#Pytester">Pytester</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Pytester.__init__">Pytester</a>
                        </li>
                        <li>
                                <a class="variable" href="#Pytester.CLOSE_STDIN">CLOSE_STDIN</a>
                        </li>
                        <li>
                                <a class="class" href="#Pytester.TimeoutExpired">Pytester.TimeoutExpired</a>
                                        <ul class="memberlist">
                            </ul>

                        </li>
                        <li>
                                <a class="variable" href="#Pytester.plugins">plugins</a>
                        </li>
                        <li>
                                <a class="variable" href="#Pytester.path">path</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.make_hook_recorder">make_hook_recorder</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.chdir">chdir</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.makefile">makefile</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.makeconftest">makeconftest</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.makeini">makeini</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.getinicfg">getinicfg</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.makepyprojecttoml">makepyprojecttoml</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.makepyfile">makepyfile</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.maketxtfile">maketxtfile</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.syspathinsert">syspathinsert</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.mkdir">mkdir</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.mkpydir">mkpydir</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.copy_example">copy_example</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.getnode">getnode</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.getpathnode">getpathnode</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.genitems">genitems</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.runitem">runitem</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.inline_runsource">inline_runsource</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.inline_genitems">inline_genitems</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.inline_run">inline_run</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.runpytest_inprocess">runpytest_inprocess</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.runpytest">runpytest</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.parseconfig">parseconfig</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.parseconfigure">parseconfigure</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.getitem">getitem</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.getitems">getitems</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.getmodulecol">getmodulecol</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.collect_by_name">collect_by_name</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.popen">popen</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.runpython">runpython</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.runpython_c">runpython_c</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.runpytest_subprocess">runpytest_subprocess</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.spawn_pytest">spawn_pytest</a>
                        </li>
                        <li>
                                <a class="function" href="#Pytester.spawn">spawn</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestPluginManager">PytestPluginManager</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#PytestPluginManager.skipped_plugins">skipped_plugins</a>
                        </li>
                        <li>
                                <a class="variable" href="#PytestPluginManager.rewrite_hook">rewrite_hook</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.parse_hookimpl_opts">parse_hookimpl_opts</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.parse_hookspec_opts">parse_hookspec_opts</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.register">register</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.getplugin">getplugin</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.hasplugin">hasplugin</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.pytest_configure">pytest_configure</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.consider_preparse">consider_preparse</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.consider_pluginarg">consider_pluginarg</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.consider_conftest">consider_conftest</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.consider_env">consider_env</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.consider_module">consider_module</a>
                        </li>
                        <li>
                                <a class="function" href="#PytestPluginManager.import_plugin">import_plugin</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestUnhandledCoroutineWarning">PytestUnhandledCoroutineWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestUnhandledThreadExceptionWarning">PytestUnhandledThreadExceptionWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestUnknownMarkWarning">PytestUnknownMarkWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestUnraisableExceptionWarning">PytestUnraisableExceptionWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#PytestWarning">PytestWarning</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="function" href="#raises">raises</a>
            </li>
            <li>
                    <a class="class" href="#RecordedHookCall">RecordedHookCall</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RecordedHookCall.__init__">RecordedHookCall</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#register_assert_rewrite">register_assert_rewrite</a>
            </li>
            <li>
                    <a class="class" href="#RunResult">RunResult</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RunResult.__init__">RunResult</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunResult.outlines">outlines</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunResult.errlines">errlines</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunResult.stdout">stdout</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunResult.stderr">stderr</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunResult.duration">duration</a>
                        </li>
                        <li>
                                <a class="function" href="#RunResult.parseoutcomes">parseoutcomes</a>
                        </li>
                        <li>
                                <a class="function" href="#RunResult.parse_summary_nouns">parse_summary_nouns</a>
                        </li>
                        <li>
                                <a class="function" href="#RunResult.assert_outcomes">assert_outcomes</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Session">Session</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Session.__init__">Session</a>
                        </li>
                        <li>
                                <a class="class" href="#Session.Interrupted">Session.Interrupted</a>
                        </li>
                        <li>
                                <a class="class" href="#Session.Failed">Session.Failed</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.exitstatus">exitstatus</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.testsfailed">testsfailed</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.testscollected">testscollected</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.trace">trace</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.items">items</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.from_config">from_config</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.shouldstop">shouldstop</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.shouldfail">shouldfail</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.startpath">startpath</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.pytest_collectstart">pytest_collectstart</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.pytest_runtest_logreport">pytest_runtest_logreport</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.pytest_collectreport">pytest_collectreport</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.isinitpath">isinitpath</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.gethookproxy">gethookproxy</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.perform_collect">perform_collect</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.collect">collect</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.genitems">genitems</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#set_trace">set_trace</a>
            </li>
            <li>
                    <a class="function" href="#skip">skip</a>
            </li>
            <li>
                    <a class="class" href="#Stash">Stash</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Stash.get">get</a>
                        </li>
                        <li>
                                <a class="function" href="#Stash.setdefault">setdefault</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#StashKey">StashKey</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="variable" href="#version_tuple">version_tuple</a>
            </li>
            <li>
                    <a class="class" href="#TempdirFactory">TempdirFactory</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TempdirFactory.__init__">TempdirFactory</a>
                        </li>
                        <li>
                                <a class="function" href="#TempdirFactory.mktemp">mktemp</a>
                        </li>
                        <li>
                                <a class="function" href="#TempdirFactory.getbasetemp">getbasetemp</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TempPathFactory">TempPathFactory</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TempPathFactory.__init__">TempPathFactory</a>
                        </li>
                        <li>
                                <a class="function" href="#TempPathFactory.from_config">from_config</a>
                        </li>
                        <li>
                                <a class="function" href="#TempPathFactory.mktemp">mktemp</a>
                        </li>
                        <li>
                                <a class="function" href="#TempPathFactory.getbasetemp">getbasetemp</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Testdir">Testdir</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Testdir.__init__">Testdir</a>
                        </li>
                        <li>
                                <a class="variable" href="#Testdir.CLOSE_STDIN">CLOSE_STDIN</a>
                        </li>
                        <li>
                                <a class="class" href="#Testdir.TimeoutExpired">Testdir.TimeoutExpired</a>
                        </li>
                        <li>
                                <a class="variable" href="#Testdir.tmpdir">tmpdir</a>
                        </li>
                        <li>
                                <a class="variable" href="#Testdir.test_tmproot">test_tmproot</a>
                        </li>
                        <li>
                                <a class="variable" href="#Testdir.request">request</a>
                        </li>
                        <li>
                                <a class="variable" href="#Testdir.plugins">plugins</a>
                        </li>
                        <li>
                                <a class="variable" href="#Testdir.monkeypatch">monkeypatch</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.make_hook_recorder">make_hook_recorder</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.chdir">chdir</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.finalize">finalize</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.makefile">makefile</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.makeconftest">makeconftest</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.makeini">makeini</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.getinicfg">getinicfg</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.makepyprojecttoml">makepyprojecttoml</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.makepyfile">makepyfile</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.maketxtfile">maketxtfile</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.syspathinsert">syspathinsert</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.mkdir">mkdir</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.mkpydir">mkpydir</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.copy_example">copy_example</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.getnode">getnode</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.getpathnode">getpathnode</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.genitems">genitems</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.runitem">runitem</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.inline_runsource">inline_runsource</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.inline_genitems">inline_genitems</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.inline_run">inline_run</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.runpytest_inprocess">runpytest_inprocess</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.runpytest">runpytest</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.parseconfig">parseconfig</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.parseconfigure">parseconfigure</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.getitem">getitem</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.getitems">getitems</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.getmodulecol">getmodulecol</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.collect_by_name">collect_by_name</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.popen">popen</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.runpython">runpython</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.runpython_c">runpython_c</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.runpytest_subprocess">runpytest_subprocess</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.spawn_pytest">spawn_pytest</a>
                        </li>
                        <li>
                                <a class="function" href="#Testdir.spawn">spawn</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TestReport">TestReport</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TestReport.__init__">TestReport</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.wasxfail">wasxfail</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.nodeid">nodeid</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.location">location</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.keywords">keywords</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.outcome">outcome</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.longrepr">longrepr</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.when">when</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.user_properties">user_properties</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.sections">sections</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.duration">duration</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.start">start</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestReport.stop">stop</a>
                        </li>
                        <li>
                                <a class="function" href="#TestReport.from_item_and_call">from_item_and_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TestShortLogReport">TestShortLogReport</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TestShortLogReport.__init__">TestShortLogReport</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestShortLogReport.category">category</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestShortLogReport.letter">letter</a>
                        </li>
                        <li>
                                <a class="variable" href="#TestShortLogReport.word">word</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UsageError">UsageError</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#WarningsRecorder">WarningsRecorder</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#WarningsRecorder.__init__">WarningsRecorder</a>
                        </li>
                        <li>
                                <a class="variable" href="#WarningsRecorder.list">list</a>
                        </li>
                        <li>
                                <a class="function" href="#WarningsRecorder.pop">pop</a>
                        </li>
                        <li>
                                <a class="function" href="#WarningsRecorder.clear">clear</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#warns">warns</a>
            </li>
            <li>
                    <a class="function" href="#xfail">xfail</a>
            </li>
            <li>
                    <a class="function" href="#yield_fixture">yield_fixture</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
pytest    </h1>

                        <div class="docstring"><p>pytest: unit and functional testing with Python.</p>
</div>

                        <input id="mod-pytest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-pytest-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># PYTHON_ARGCOMPLETE_OK</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">&quot;&quot;&quot;pytest: unit and functional testing with Python.&quot;&quot;&quot;</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest</span><span class="w"> </span><span class="kn">import</span> <span class="n">__version__</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest</span><span class="w"> </span><span class="kn">import</span> <span class="n">version_tuple</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest._code</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExceptionInfo</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.assertion</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_assert_rewrite</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.cacheprovider</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cache</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.capture</span><span class="w"> </span><span class="kn">import</span> <span class="n">CaptureFixture</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">cmdline</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">Config</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">console_main</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExitCode</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">hookimpl</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">hookspec</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">main</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestPluginManager</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">UsageError</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config.argparsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">OptionGroup</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config.argparsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.debugging</span><span class="w"> </span><span class="kn">import</span> <span class="n">pytestPDB</span> <span class="k">as</span> <span class="n">__pytestPDB</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.doctest</span><span class="w"> </span><span class="kn">import</span> <span class="n">DoctestItem</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.fixtures</span><span class="w"> </span><span class="kn">import</span> <span class="n">fixture</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.fixtures</span><span class="w"> </span><span class="kn">import</span> <span class="n">FixtureDef</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.fixtures</span><span class="w"> </span><span class="kn">import</span> <span class="n">FixtureLookupError</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.fixtures</span><span class="w"> </span><span class="kn">import</span> <span class="n">FixtureRequest</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.fixtures</span><span class="w"> </span><span class="kn">import</span> <span class="n">yield_fixture</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.freeze_support</span><span class="w"> </span><span class="kn">import</span> <span class="n">freeze_includes</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.legacypath</span><span class="w"> </span><span class="kn">import</span> <span class="n">TempdirFactory</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.legacypath</span><span class="w"> </span><span class="kn">import</span> <span class="n">Testdir</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogCaptureFixture</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.main</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dir</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.main</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.mark</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mark</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.mark</span><span class="w"> </span><span class="kn">import</span> <span class="n">MARK_GEN</span> <span class="k">as</span> <span class="n">mark</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.mark</span><span class="w"> </span><span class="kn">import</span> <span class="n">MarkDecorator</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.mark</span><span class="w"> </span><span class="kn">import</span> <span class="n">MarkGenerator</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.mark</span><span class="w"> </span><span class="kn">import</span> <span class="n">param</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.monkeypatch</span><span class="w"> </span><span class="kn">import</span> <span class="n">MonkeyPatch</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">Collector</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">Directory</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">Item</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.outcomes</span><span class="w"> </span><span class="kn">import</span> <span class="n">exit</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.outcomes</span><span class="w"> </span><span class="kn">import</span> <span class="n">fail</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.outcomes</span><span class="w"> </span><span class="kn">import</span> <span class="n">importorskip</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.outcomes</span><span class="w"> </span><span class="kn">import</span> <span class="n">skip</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.outcomes</span><span class="w"> </span><span class="kn">import</span> <span class="n">xfail</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester</span><span class="w"> </span><span class="kn">import</span> <span class="n">HookRecorder</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester</span><span class="w"> </span><span class="kn">import</span> <span class="n">LineMatcher</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pytester</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester</span><span class="w"> </span><span class="kn">import</span> <span class="n">RecordedHookCall</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester</span><span class="w"> </span><span class="kn">import</span> <span class="n">RunResult</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python</span><span class="w"> </span><span class="kn">import</span> <span class="n">Class</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python</span><span class="w"> </span><span class="kn">import</span> <span class="n">Function</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python</span><span class="w"> </span><span class="kn">import</span> <span class="n">Metafunc</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python</span><span class="w"> </span><span class="kn">import</span> <span class="n">Module</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python</span><span class="w"> </span><span class="kn">import</span> <span class="n">Package</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python_api</span><span class="w"> </span><span class="kn">import</span> <span class="n">approx</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python_api</span><span class="w"> </span><span class="kn">import</span> <span class="n">raises</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.recwarn</span><span class="w"> </span><span class="kn">import</span> <span class="n">deprecated_call</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.recwarn</span><span class="w"> </span><span class="kn">import</span> <span class="n">WarningsRecorder</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.recwarn</span><span class="w"> </span><span class="kn">import</span> <span class="n">warns</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.reports</span><span class="w"> </span><span class="kn">import</span> <span class="n">CollectReport</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.reports</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestReport</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.runner</span><span class="w"> </span><span class="kn">import</span> <span class="n">CallInfo</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.stash</span><span class="w"> </span><span class="kn">import</span> <span class="n">Stash</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.stash</span><span class="w"> </span><span class="kn">import</span> <span class="n">StashKey</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.terminal</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestShortLogReport</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.tmpdir</span><span class="w"> </span><span class="kn">import</span> <span class="n">TempPathFactory</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestAssertRewriteWarning</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestCacheWarning</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestCollectionWarning</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestConfigWarning</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestDeprecationWarning</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestExperimentalApiWarning</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestRemovedIn9Warning</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestReturnNotNoneWarning</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestUnhandledCoroutineWarning</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestUnhandledThreadExceptionWarning</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestUnknownMarkWarning</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestUnraisableExceptionWarning</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestWarning</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="n">set_trace</span> <span class="o">=</span> <span class="n">__pytestPDB</span><span class="o">.</span><span class="n">set_trace</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="s2">&quot;__version__&quot;</span><span class="p">,</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>    <span class="s2">&quot;approx&quot;</span><span class="p">,</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>    <span class="s2">&quot;Cache&quot;</span><span class="p">,</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>    <span class="s2">&quot;CallInfo&quot;</span><span class="p">,</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>    <span class="s2">&quot;CaptureFixture&quot;</span><span class="p">,</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>    <span class="s2">&quot;Class&quot;</span><span class="p">,</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>    <span class="s2">&quot;cmdline&quot;</span><span class="p">,</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>    <span class="s2">&quot;Collector&quot;</span><span class="p">,</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>    <span class="s2">&quot;CollectReport&quot;</span><span class="p">,</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>    <span class="s2">&quot;Config&quot;</span><span class="p">,</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>    <span class="s2">&quot;console_main&quot;</span><span class="p">,</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>    <span class="s2">&quot;deprecated_call&quot;</span><span class="p">,</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="s2">&quot;Dir&quot;</span><span class="p">,</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>    <span class="s2">&quot;Directory&quot;</span><span class="p">,</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>    <span class="s2">&quot;DoctestItem&quot;</span><span class="p">,</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>    <span class="s2">&quot;exit&quot;</span><span class="p">,</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>    <span class="s2">&quot;ExceptionInfo&quot;</span><span class="p">,</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>    <span class="s2">&quot;ExitCode&quot;</span><span class="p">,</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>    <span class="s2">&quot;fail&quot;</span><span class="p">,</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>    <span class="s2">&quot;File&quot;</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>    <span class="s2">&quot;fixture&quot;</span><span class="p">,</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>    <span class="s2">&quot;FixtureDef&quot;</span><span class="p">,</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>    <span class="s2">&quot;FixtureLookupError&quot;</span><span class="p">,</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>    <span class="s2">&quot;FixtureRequest&quot;</span><span class="p">,</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>    <span class="s2">&quot;freeze_includes&quot;</span><span class="p">,</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>    <span class="s2">&quot;Function&quot;</span><span class="p">,</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>    <span class="s2">&quot;hookimpl&quot;</span><span class="p">,</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>    <span class="s2">&quot;HookRecorder&quot;</span><span class="p">,</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>    <span class="s2">&quot;hookspec&quot;</span><span class="p">,</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>    <span class="s2">&quot;importorskip&quot;</span><span class="p">,</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>    <span class="s2">&quot;Item&quot;</span><span class="p">,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>    <span class="s2">&quot;LineMatcher&quot;</span><span class="p">,</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>    <span class="s2">&quot;LogCaptureFixture&quot;</span><span class="p">,</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>    <span class="s2">&quot;main&quot;</span><span class="p">,</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>    <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>    <span class="s2">&quot;Mark&quot;</span><span class="p">,</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>    <span class="s2">&quot;MarkDecorator&quot;</span><span class="p">,</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>    <span class="s2">&quot;MarkGenerator&quot;</span><span class="p">,</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>    <span class="s2">&quot;Metafunc&quot;</span><span class="p">,</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>    <span class="s2">&quot;Module&quot;</span><span class="p">,</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>    <span class="s2">&quot;MonkeyPatch&quot;</span><span class="p">,</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>    <span class="s2">&quot;OptionGroup&quot;</span><span class="p">,</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>    <span class="s2">&quot;Package&quot;</span><span class="p">,</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>    <span class="s2">&quot;param&quot;</span><span class="p">,</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>    <span class="s2">&quot;Parser&quot;</span><span class="p">,</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>    <span class="s2">&quot;PytestAssertRewriteWarning&quot;</span><span class="p">,</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>    <span class="s2">&quot;PytestCacheWarning&quot;</span><span class="p">,</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>    <span class="s2">&quot;PytestCollectionWarning&quot;</span><span class="p">,</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>    <span class="s2">&quot;PytestConfigWarning&quot;</span><span class="p">,</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>    <span class="s2">&quot;PytestDeprecationWarning&quot;</span><span class="p">,</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>    <span class="s2">&quot;PytestExperimentalApiWarning&quot;</span><span class="p">,</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>    <span class="s2">&quot;PytestRemovedIn9Warning&quot;</span><span class="p">,</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>    <span class="s2">&quot;PytestReturnNotNoneWarning&quot;</span><span class="p">,</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>    <span class="s2">&quot;Pytester&quot;</span><span class="p">,</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>    <span class="s2">&quot;PytestPluginManager&quot;</span><span class="p">,</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>    <span class="s2">&quot;PytestUnhandledCoroutineWarning&quot;</span><span class="p">,</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>    <span class="s2">&quot;PytestUnhandledThreadExceptionWarning&quot;</span><span class="p">,</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>    <span class="s2">&quot;PytestUnknownMarkWarning&quot;</span><span class="p">,</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>    <span class="s2">&quot;PytestUnraisableExceptionWarning&quot;</span><span class="p">,</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>    <span class="s2">&quot;PytestWarning&quot;</span><span class="p">,</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>    <span class="s2">&quot;raises&quot;</span><span class="p">,</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>    <span class="s2">&quot;RecordedHookCall&quot;</span><span class="p">,</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>    <span class="s2">&quot;register_assert_rewrite&quot;</span><span class="p">,</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>    <span class="s2">&quot;RunResult&quot;</span><span class="p">,</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>    <span class="s2">&quot;Session&quot;</span><span class="p">,</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>    <span class="s2">&quot;set_trace&quot;</span><span class="p">,</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>    <span class="s2">&quot;skip&quot;</span><span class="p">,</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>    <span class="s2">&quot;Stash&quot;</span><span class="p">,</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>    <span class="s2">&quot;StashKey&quot;</span><span class="p">,</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>    <span class="s2">&quot;version_tuple&quot;</span><span class="p">,</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>    <span class="s2">&quot;TempdirFactory&quot;</span><span class="p">,</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>    <span class="s2">&quot;TempPathFactory&quot;</span><span class="p">,</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>    <span class="s2">&quot;Testdir&quot;</span><span class="p">,</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>    <span class="s2">&quot;TestReport&quot;</span><span class="p">,</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>    <span class="s2">&quot;TestShortLogReport&quot;</span><span class="p">,</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>    <span class="s2">&quot;UsageError&quot;</span><span class="p">,</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>    <span class="s2">&quot;WarningsRecorder&quot;</span><span class="p">,</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="s2">&quot;warns&quot;</span><span class="p">,</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>    <span class="s2">&quot;xfail&quot;</span><span class="p">,</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>    <span class="s2">&quot;yield_fixture&quot;</span><span class="p">,</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="__version__">
                    <div class="attr variable">
            <span class="name">__version__</span>        =
<span class="default_value">&#39;8.3.5&#39;</span>

        
    </div>
    <a class="headerlink" href="#__version__"></a>
    
    

                </section>
                <section id="approx">
                            <input id="approx-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">approx</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">expected</span>,</span><span class="param">	<span class="n">rel</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="nb">abs</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">nan_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">python_api</span><span class="o">.</span><span class="n">ApproxBase</span>:</span></span>

                <label class="view-source-button" for="approx-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#approx"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="approx-529"><a href="#approx-529"><span class="linenos">529</span></a><span class="k">def</span><span class="w"> </span><span class="nf">approx</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">rel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nan_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ApproxBase</span><span class="p">:</span>
</span><span id="approx-530"><a href="#approx-530"><span class="linenos">530</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert that two numbers (or two ordered sequences of numbers) are equal to each other</span>
</span><span id="approx-531"><a href="#approx-531"><span class="linenos">531</span></a><span class="sd">    within some tolerance.</span>
</span><span id="approx-532"><a href="#approx-532"><span class="linenos">532</span></a>
</span><span id="approx-533"><a href="#approx-533"><span class="linenos">533</span></a><span class="sd">    Due to the :doc:`python:tutorial/floatingpoint`, numbers that we</span>
</span><span id="approx-534"><a href="#approx-534"><span class="linenos">534</span></a><span class="sd">    would intuitively expect to be equal are not always so::</span>
</span><span id="approx-535"><a href="#approx-535"><span class="linenos">535</span></a>
</span><span id="approx-536"><a href="#approx-536"><span class="linenos">536</span></a><span class="sd">        &gt;&gt;&gt; 0.1 + 0.2 == 0.3</span>
</span><span id="approx-537"><a href="#approx-537"><span class="linenos">537</span></a><span class="sd">        False</span>
</span><span id="approx-538"><a href="#approx-538"><span class="linenos">538</span></a>
</span><span id="approx-539"><a href="#approx-539"><span class="linenos">539</span></a><span class="sd">    This problem is commonly encountered when writing tests, e.g. when making</span>
</span><span id="approx-540"><a href="#approx-540"><span class="linenos">540</span></a><span class="sd">    sure that floating-point values are what you expect them to be.  One way to</span>
</span><span id="approx-541"><a href="#approx-541"><span class="linenos">541</span></a><span class="sd">    deal with this problem is to assert that two floating-point numbers are</span>
</span><span id="approx-542"><a href="#approx-542"><span class="linenos">542</span></a><span class="sd">    equal to within some appropriate tolerance::</span>
</span><span id="approx-543"><a href="#approx-543"><span class="linenos">543</span></a>
</span><span id="approx-544"><a href="#approx-544"><span class="linenos">544</span></a><span class="sd">        &gt;&gt;&gt; abs((0.1 + 0.2) - 0.3) &lt; 1e-6</span>
</span><span id="approx-545"><a href="#approx-545"><span class="linenos">545</span></a><span class="sd">        True</span>
</span><span id="approx-546"><a href="#approx-546"><span class="linenos">546</span></a>
</span><span id="approx-547"><a href="#approx-547"><span class="linenos">547</span></a><span class="sd">    However, comparisons like this are tedious to write and difficult to</span>
</span><span id="approx-548"><a href="#approx-548"><span class="linenos">548</span></a><span class="sd">    understand.  Furthermore, absolute comparisons like the one above are</span>
</span><span id="approx-549"><a href="#approx-549"><span class="linenos">549</span></a><span class="sd">    usually discouraged because there&#39;s no tolerance that works well for all</span>
</span><span id="approx-550"><a href="#approx-550"><span class="linenos">550</span></a><span class="sd">    situations.  ``1e-6`` is good for numbers around ``1``, but too small for</span>
</span><span id="approx-551"><a href="#approx-551"><span class="linenos">551</span></a><span class="sd">    very big numbers and too big for very small ones.  It&#39;s better to express</span>
</span><span id="approx-552"><a href="#approx-552"><span class="linenos">552</span></a><span class="sd">    the tolerance as a fraction of the expected value, but relative comparisons</span>
</span><span id="approx-553"><a href="#approx-553"><span class="linenos">553</span></a><span class="sd">    like that are even more difficult to write correctly and concisely.</span>
</span><span id="approx-554"><a href="#approx-554"><span class="linenos">554</span></a>
</span><span id="approx-555"><a href="#approx-555"><span class="linenos">555</span></a><span class="sd">    The ``approx`` class performs floating-point comparisons using a syntax</span>
</span><span id="approx-556"><a href="#approx-556"><span class="linenos">556</span></a><span class="sd">    that&#39;s as intuitive as possible::</span>
</span><span id="approx-557"><a href="#approx-557"><span class="linenos">557</span></a>
</span><span id="approx-558"><a href="#approx-558"><span class="linenos">558</span></a><span class="sd">        &gt;&gt;&gt; from pytest import approx</span>
</span><span id="approx-559"><a href="#approx-559"><span class="linenos">559</span></a><span class="sd">        &gt;&gt;&gt; 0.1 + 0.2 == approx(0.3)</span>
</span><span id="approx-560"><a href="#approx-560"><span class="linenos">560</span></a><span class="sd">        True</span>
</span><span id="approx-561"><a href="#approx-561"><span class="linenos">561</span></a>
</span><span id="approx-562"><a href="#approx-562"><span class="linenos">562</span></a><span class="sd">    The same syntax also works for ordered sequences of numbers::</span>
</span><span id="approx-563"><a href="#approx-563"><span class="linenos">563</span></a>
</span><span id="approx-564"><a href="#approx-564"><span class="linenos">564</span></a><span class="sd">        &gt;&gt;&gt; (0.1 + 0.2, 0.2 + 0.4) == approx((0.3, 0.6))</span>
</span><span id="approx-565"><a href="#approx-565"><span class="linenos">565</span></a><span class="sd">        True</span>
</span><span id="approx-566"><a href="#approx-566"><span class="linenos">566</span></a>
</span><span id="approx-567"><a href="#approx-567"><span class="linenos">567</span></a><span class="sd">    ``numpy`` arrays::</span>
</span><span id="approx-568"><a href="#approx-568"><span class="linenos">568</span></a>
</span><span id="approx-569"><a href="#approx-569"><span class="linenos">569</span></a><span class="sd">        &gt;&gt;&gt; import numpy as np                                                          # doctest: +SKIP</span>
</span><span id="approx-570"><a href="#approx-570"><span class="linenos">570</span></a><span class="sd">        &gt;&gt;&gt; np.array([0.1, 0.2]) + np.array([0.2, 0.4]) == approx(np.array([0.3, 0.6])) # doctest: +SKIP</span>
</span><span id="approx-571"><a href="#approx-571"><span class="linenos">571</span></a><span class="sd">        True</span>
</span><span id="approx-572"><a href="#approx-572"><span class="linenos">572</span></a>
</span><span id="approx-573"><a href="#approx-573"><span class="linenos">573</span></a><span class="sd">    And for a ``numpy`` array against a scalar::</span>
</span><span id="approx-574"><a href="#approx-574"><span class="linenos">574</span></a>
</span><span id="approx-575"><a href="#approx-575"><span class="linenos">575</span></a><span class="sd">        &gt;&gt;&gt; import numpy as np                                         # doctest: +SKIP</span>
</span><span id="approx-576"><a href="#approx-576"><span class="linenos">576</span></a><span class="sd">        &gt;&gt;&gt; np.array([0.1, 0.2]) + np.array([0.2, 0.1]) == approx(0.3) # doctest: +SKIP</span>
</span><span id="approx-577"><a href="#approx-577"><span class="linenos">577</span></a><span class="sd">        True</span>
</span><span id="approx-578"><a href="#approx-578"><span class="linenos">578</span></a>
</span><span id="approx-579"><a href="#approx-579"><span class="linenos">579</span></a><span class="sd">    Only ordered sequences are supported, because ``approx`` needs</span>
</span><span id="approx-580"><a href="#approx-580"><span class="linenos">580</span></a><span class="sd">    to infer the relative position of the sequences without ambiguity. This means</span>
</span><span id="approx-581"><a href="#approx-581"><span class="linenos">581</span></a><span class="sd">    ``sets`` and other unordered sequences are not supported.</span>
</span><span id="approx-582"><a href="#approx-582"><span class="linenos">582</span></a>
</span><span id="approx-583"><a href="#approx-583"><span class="linenos">583</span></a><span class="sd">    Finally, dictionary *values* can also be compared::</span>
</span><span id="approx-584"><a href="#approx-584"><span class="linenos">584</span></a>
</span><span id="approx-585"><a href="#approx-585"><span class="linenos">585</span></a><span class="sd">        &gt;&gt;&gt; {&#39;a&#39;: 0.1 + 0.2, &#39;b&#39;: 0.2 + 0.4} == approx({&#39;a&#39;: 0.3, &#39;b&#39;: 0.6})</span>
</span><span id="approx-586"><a href="#approx-586"><span class="linenos">586</span></a><span class="sd">        True</span>
</span><span id="approx-587"><a href="#approx-587"><span class="linenos">587</span></a>
</span><span id="approx-588"><a href="#approx-588"><span class="linenos">588</span></a><span class="sd">    The comparison will be true if both mappings have the same keys and their</span>
</span><span id="approx-589"><a href="#approx-589"><span class="linenos">589</span></a><span class="sd">    respective values match the expected tolerances.</span>
</span><span id="approx-590"><a href="#approx-590"><span class="linenos">590</span></a>
</span><span id="approx-591"><a href="#approx-591"><span class="linenos">591</span></a><span class="sd">    **Tolerances**</span>
</span><span id="approx-592"><a href="#approx-592"><span class="linenos">592</span></a>
</span><span id="approx-593"><a href="#approx-593"><span class="linenos">593</span></a><span class="sd">    By default, ``approx`` considers numbers within a relative tolerance of</span>
</span><span id="approx-594"><a href="#approx-594"><span class="linenos">594</span></a><span class="sd">    ``1e-6`` (i.e. one part in a million) of its expected value to be equal.</span>
</span><span id="approx-595"><a href="#approx-595"><span class="linenos">595</span></a><span class="sd">    This treatment would lead to surprising results if the expected value was</span>
</span><span id="approx-596"><a href="#approx-596"><span class="linenos">596</span></a><span class="sd">    ``0.0``, because nothing but ``0.0`` itself is relatively close to ``0.0``.</span>
</span><span id="approx-597"><a href="#approx-597"><span class="linenos">597</span></a><span class="sd">    To handle this case less surprisingly, ``approx`` also considers numbers</span>
</span><span id="approx-598"><a href="#approx-598"><span class="linenos">598</span></a><span class="sd">    within an absolute tolerance of ``1e-12`` of its expected value to be</span>
</span><span id="approx-599"><a href="#approx-599"><span class="linenos">599</span></a><span class="sd">    equal.  Infinity and NaN are special cases.  Infinity is only considered</span>
</span><span id="approx-600"><a href="#approx-600"><span class="linenos">600</span></a><span class="sd">    equal to itself, regardless of the relative tolerance.  NaN is not</span>
</span><span id="approx-601"><a href="#approx-601"><span class="linenos">601</span></a><span class="sd">    considered equal to anything by default, but you can make it be equal to</span>
</span><span id="approx-602"><a href="#approx-602"><span class="linenos">602</span></a><span class="sd">    itself by setting the ``nan_ok`` argument to True.  (This is meant to</span>
</span><span id="approx-603"><a href="#approx-603"><span class="linenos">603</span></a><span class="sd">    facilitate comparing arrays that use NaN to mean &quot;no data&quot;.)</span>
</span><span id="approx-604"><a href="#approx-604"><span class="linenos">604</span></a>
</span><span id="approx-605"><a href="#approx-605"><span class="linenos">605</span></a><span class="sd">    Both the relative and absolute tolerances can be changed by passing</span>
</span><span id="approx-606"><a href="#approx-606"><span class="linenos">606</span></a><span class="sd">    arguments to the ``approx`` constructor::</span>
</span><span id="approx-607"><a href="#approx-607"><span class="linenos">607</span></a>
</span><span id="approx-608"><a href="#approx-608"><span class="linenos">608</span></a><span class="sd">        &gt;&gt;&gt; 1.0001 == approx(1)</span>
</span><span id="approx-609"><a href="#approx-609"><span class="linenos">609</span></a><span class="sd">        False</span>
</span><span id="approx-610"><a href="#approx-610"><span class="linenos">610</span></a><span class="sd">        &gt;&gt;&gt; 1.0001 == approx(1, rel=1e-3)</span>
</span><span id="approx-611"><a href="#approx-611"><span class="linenos">611</span></a><span class="sd">        True</span>
</span><span id="approx-612"><a href="#approx-612"><span class="linenos">612</span></a><span class="sd">        &gt;&gt;&gt; 1.0001 == approx(1, abs=1e-3)</span>
</span><span id="approx-613"><a href="#approx-613"><span class="linenos">613</span></a><span class="sd">        True</span>
</span><span id="approx-614"><a href="#approx-614"><span class="linenos">614</span></a>
</span><span id="approx-615"><a href="#approx-615"><span class="linenos">615</span></a><span class="sd">    If you specify ``abs`` but not ``rel``, the comparison will not consider</span>
</span><span id="approx-616"><a href="#approx-616"><span class="linenos">616</span></a><span class="sd">    the relative tolerance at all.  In other words, two numbers that are within</span>
</span><span id="approx-617"><a href="#approx-617"><span class="linenos">617</span></a><span class="sd">    the default relative tolerance of ``1e-6`` will still be considered unequal</span>
</span><span id="approx-618"><a href="#approx-618"><span class="linenos">618</span></a><span class="sd">    if they exceed the specified absolute tolerance.  If you specify both</span>
</span><span id="approx-619"><a href="#approx-619"><span class="linenos">619</span></a><span class="sd">    ``abs`` and ``rel``, the numbers will be considered equal if either</span>
</span><span id="approx-620"><a href="#approx-620"><span class="linenos">620</span></a><span class="sd">    tolerance is met::</span>
</span><span id="approx-621"><a href="#approx-621"><span class="linenos">621</span></a>
</span><span id="approx-622"><a href="#approx-622"><span class="linenos">622</span></a><span class="sd">        &gt;&gt;&gt; 1 + 1e-8 == approx(1)</span>
</span><span id="approx-623"><a href="#approx-623"><span class="linenos">623</span></a><span class="sd">        True</span>
</span><span id="approx-624"><a href="#approx-624"><span class="linenos">624</span></a><span class="sd">        &gt;&gt;&gt; 1 + 1e-8 == approx(1, abs=1e-12)</span>
</span><span id="approx-625"><a href="#approx-625"><span class="linenos">625</span></a><span class="sd">        False</span>
</span><span id="approx-626"><a href="#approx-626"><span class="linenos">626</span></a><span class="sd">        &gt;&gt;&gt; 1 + 1e-8 == approx(1, rel=1e-6, abs=1e-12)</span>
</span><span id="approx-627"><a href="#approx-627"><span class="linenos">627</span></a><span class="sd">        True</span>
</span><span id="approx-628"><a href="#approx-628"><span class="linenos">628</span></a>
</span><span id="approx-629"><a href="#approx-629"><span class="linenos">629</span></a><span class="sd">    You can also use ``approx`` to compare nonnumeric types, or dicts and</span>
</span><span id="approx-630"><a href="#approx-630"><span class="linenos">630</span></a><span class="sd">    sequences containing nonnumeric types, in which case it falls back to</span>
</span><span id="approx-631"><a href="#approx-631"><span class="linenos">631</span></a><span class="sd">    strict equality. This can be useful for comparing dicts and sequences that</span>
</span><span id="approx-632"><a href="#approx-632"><span class="linenos">632</span></a><span class="sd">    can contain optional values::</span>
</span><span id="approx-633"><a href="#approx-633"><span class="linenos">633</span></a>
</span><span id="approx-634"><a href="#approx-634"><span class="linenos">634</span></a><span class="sd">        &gt;&gt;&gt; {&quot;required&quot;: 1.0000005, &quot;optional&quot;: None} == approx({&quot;required&quot;: 1, &quot;optional&quot;: None})</span>
</span><span id="approx-635"><a href="#approx-635"><span class="linenos">635</span></a><span class="sd">        True</span>
</span><span id="approx-636"><a href="#approx-636"><span class="linenos">636</span></a><span class="sd">        &gt;&gt;&gt; [None, 1.0000005] == approx([None,1])</span>
</span><span id="approx-637"><a href="#approx-637"><span class="linenos">637</span></a><span class="sd">        True</span>
</span><span id="approx-638"><a href="#approx-638"><span class="linenos">638</span></a><span class="sd">        &gt;&gt;&gt; [&quot;foo&quot;, 1.0000005] == approx([None,1])</span>
</span><span id="approx-639"><a href="#approx-639"><span class="linenos">639</span></a><span class="sd">        False</span>
</span><span id="approx-640"><a href="#approx-640"><span class="linenos">640</span></a>
</span><span id="approx-641"><a href="#approx-641"><span class="linenos">641</span></a><span class="sd">    If you&#39;re thinking about using ``approx``, then you might want to know how</span>
</span><span id="approx-642"><a href="#approx-642"><span class="linenos">642</span></a><span class="sd">    it compares to other good ways of comparing floating-point numbers.  All of</span>
</span><span id="approx-643"><a href="#approx-643"><span class="linenos">643</span></a><span class="sd">    these algorithms are based on relative and absolute tolerances and should</span>
</span><span id="approx-644"><a href="#approx-644"><span class="linenos">644</span></a><span class="sd">    agree for the most part, but they do have meaningful differences:</span>
</span><span id="approx-645"><a href="#approx-645"><span class="linenos">645</span></a>
</span><span id="approx-646"><a href="#approx-646"><span class="linenos">646</span></a><span class="sd">    - ``math.isclose(a, b, rel_tol=1e-9, abs_tol=0.0)``:  True if the relative</span>
</span><span id="approx-647"><a href="#approx-647"><span class="linenos">647</span></a><span class="sd">      tolerance is met w.r.t. either ``a`` or ``b`` or if the absolute</span>
</span><span id="approx-648"><a href="#approx-648"><span class="linenos">648</span></a><span class="sd">      tolerance is met.  Because the relative tolerance is calculated w.r.t.</span>
</span><span id="approx-649"><a href="#approx-649"><span class="linenos">649</span></a><span class="sd">      both ``a`` and ``b``, this test is symmetric (i.e.  neither ``a`` nor</span>
</span><span id="approx-650"><a href="#approx-650"><span class="linenos">650</span></a><span class="sd">      ``b`` is a &quot;reference value&quot;).  You have to specify an absolute tolerance</span>
</span><span id="approx-651"><a href="#approx-651"><span class="linenos">651</span></a><span class="sd">      if you want to compare to ``0.0`` because there is no tolerance by</span>
</span><span id="approx-652"><a href="#approx-652"><span class="linenos">652</span></a><span class="sd">      default.  More information: :py:func:`math.isclose`.</span>
</span><span id="approx-653"><a href="#approx-653"><span class="linenos">653</span></a>
</span><span id="approx-654"><a href="#approx-654"><span class="linenos">654</span></a><span class="sd">    - ``numpy.isclose(a, b, rtol=1e-5, atol=1e-8)``: True if the difference</span>
</span><span id="approx-655"><a href="#approx-655"><span class="linenos">655</span></a><span class="sd">      between ``a`` and ``b`` is less that the sum of the relative tolerance</span>
</span><span id="approx-656"><a href="#approx-656"><span class="linenos">656</span></a><span class="sd">      w.r.t. ``b`` and the absolute tolerance.  Because the relative tolerance</span>
</span><span id="approx-657"><a href="#approx-657"><span class="linenos">657</span></a><span class="sd">      is only calculated w.r.t. ``b``, this test is asymmetric and you can</span>
</span><span id="approx-658"><a href="#approx-658"><span class="linenos">658</span></a><span class="sd">      think of ``b`` as the reference value.  Support for comparing sequences</span>
</span><span id="approx-659"><a href="#approx-659"><span class="linenos">659</span></a><span class="sd">      is provided by :py:func:`numpy.allclose`.  More information:</span>
</span><span id="approx-660"><a href="#approx-660"><span class="linenos">660</span></a><span class="sd">      :std:doc:`numpy:reference/generated/numpy.isclose`.</span>
</span><span id="approx-661"><a href="#approx-661"><span class="linenos">661</span></a>
</span><span id="approx-662"><a href="#approx-662"><span class="linenos">662</span></a><span class="sd">    - ``unittest.TestCase.assertAlmostEqual(a, b)``: True if ``a`` and ``b``</span>
</span><span id="approx-663"><a href="#approx-663"><span class="linenos">663</span></a><span class="sd">      are within an absolute tolerance of ``1e-7``.  No relative tolerance is</span>
</span><span id="approx-664"><a href="#approx-664"><span class="linenos">664</span></a><span class="sd">      considered , so this function is not appropriate for very large or very</span>
</span><span id="approx-665"><a href="#approx-665"><span class="linenos">665</span></a><span class="sd">      small numbers.  Also, it&#39;s only available in subclasses of ``unittest.TestCase``</span>
</span><span id="approx-666"><a href="#approx-666"><span class="linenos">666</span></a><span class="sd">      and it&#39;s ugly because it doesn&#39;t follow PEP8.  More information:</span>
</span><span id="approx-667"><a href="#approx-667"><span class="linenos">667</span></a><span class="sd">      :py:meth:`unittest.TestCase.assertAlmostEqual`.</span>
</span><span id="approx-668"><a href="#approx-668"><span class="linenos">668</span></a>
</span><span id="approx-669"><a href="#approx-669"><span class="linenos">669</span></a><span class="sd">    - ``a == pytest.approx(b, rel=1e-6, abs=1e-12)``: True if the relative</span>
</span><span id="approx-670"><a href="#approx-670"><span class="linenos">670</span></a><span class="sd">      tolerance is met w.r.t. ``b`` or if the absolute tolerance is met.</span>
</span><span id="approx-671"><a href="#approx-671"><span class="linenos">671</span></a><span class="sd">      Because the relative tolerance is only calculated w.r.t. ``b``, this test</span>
</span><span id="approx-672"><a href="#approx-672"><span class="linenos">672</span></a><span class="sd">      is asymmetric and you can think of ``b`` as the reference value.  In the</span>
</span><span id="approx-673"><a href="#approx-673"><span class="linenos">673</span></a><span class="sd">      special case that you explicitly specify an absolute tolerance but not a</span>
</span><span id="approx-674"><a href="#approx-674"><span class="linenos">674</span></a><span class="sd">      relative tolerance, only the absolute tolerance is considered.</span>
</span><span id="approx-675"><a href="#approx-675"><span class="linenos">675</span></a>
</span><span id="approx-676"><a href="#approx-676"><span class="linenos">676</span></a><span class="sd">    .. note::</span>
</span><span id="approx-677"><a href="#approx-677"><span class="linenos">677</span></a>
</span><span id="approx-678"><a href="#approx-678"><span class="linenos">678</span></a><span class="sd">        ``approx`` can handle numpy arrays, but we recommend the</span>
</span><span id="approx-679"><a href="#approx-679"><span class="linenos">679</span></a><span class="sd">        specialised test helpers in :std:doc:`numpy:reference/routines.testing`</span>
</span><span id="approx-680"><a href="#approx-680"><span class="linenos">680</span></a><span class="sd">        if you need support for comparisons, NaNs, or ULP-based tolerances.</span>
</span><span id="approx-681"><a href="#approx-681"><span class="linenos">681</span></a>
</span><span id="approx-682"><a href="#approx-682"><span class="linenos">682</span></a><span class="sd">        To match strings using regex, you can use</span>
</span><span id="approx-683"><a href="#approx-683"><span class="linenos">683</span></a><span class="sd">        `Matches &lt;https://github.com/asottile/re-assert#re_assertmatchespattern-str-args-kwargs&gt;`_</span>
</span><span id="approx-684"><a href="#approx-684"><span class="linenos">684</span></a><span class="sd">        from the</span>
</span><span id="approx-685"><a href="#approx-685"><span class="linenos">685</span></a><span class="sd">        `re_assert package &lt;https://github.com/asottile/re-assert&gt;`_.</span>
</span><span id="approx-686"><a href="#approx-686"><span class="linenos">686</span></a>
</span><span id="approx-687"><a href="#approx-687"><span class="linenos">687</span></a><span class="sd">    .. warning::</span>
</span><span id="approx-688"><a href="#approx-688"><span class="linenos">688</span></a>
</span><span id="approx-689"><a href="#approx-689"><span class="linenos">689</span></a><span class="sd">       .. versionchanged:: 3.2</span>
</span><span id="approx-690"><a href="#approx-690"><span class="linenos">690</span></a>
</span><span id="approx-691"><a href="#approx-691"><span class="linenos">691</span></a><span class="sd">       In order to avoid inconsistent behavior, :py:exc:`TypeError` is</span>
</span><span id="approx-692"><a href="#approx-692"><span class="linenos">692</span></a><span class="sd">       raised for ``&gt;``, ``&gt;=``, ``&lt;`` and ``&lt;=`` comparisons.</span>
</span><span id="approx-693"><a href="#approx-693"><span class="linenos">693</span></a><span class="sd">       The example below illustrates the problem::</span>
</span><span id="approx-694"><a href="#approx-694"><span class="linenos">694</span></a>
</span><span id="approx-695"><a href="#approx-695"><span class="linenos">695</span></a><span class="sd">           assert approx(0.1) &gt; 0.1 + 1e-10  # calls approx(0.1).__gt__(0.1 + 1e-10)</span>
</span><span id="approx-696"><a href="#approx-696"><span class="linenos">696</span></a><span class="sd">           assert 0.1 + 1e-10 &gt; approx(0.1)  # calls approx(0.1).__lt__(0.1 + 1e-10)</span>
</span><span id="approx-697"><a href="#approx-697"><span class="linenos">697</span></a>
</span><span id="approx-698"><a href="#approx-698"><span class="linenos">698</span></a><span class="sd">       In the second example one expects ``approx(0.1).__le__(0.1 + 1e-10)``</span>
</span><span id="approx-699"><a href="#approx-699"><span class="linenos">699</span></a><span class="sd">       to be called. But instead, ``approx(0.1).__lt__(0.1 + 1e-10)`` is used to</span>
</span><span id="approx-700"><a href="#approx-700"><span class="linenos">700</span></a><span class="sd">       comparison. This is because the call hierarchy of rich comparisons</span>
</span><span id="approx-701"><a href="#approx-701"><span class="linenos">701</span></a><span class="sd">       follows a fixed behavior. More information: :py:meth:`object.__ge__`</span>
</span><span id="approx-702"><a href="#approx-702"><span class="linenos">702</span></a>
</span><span id="approx-703"><a href="#approx-703"><span class="linenos">703</span></a><span class="sd">    .. versionchanged:: 3.7.1</span>
</span><span id="approx-704"><a href="#approx-704"><span class="linenos">704</span></a><span class="sd">       ``approx`` raises ``TypeError`` when it encounters a dict value or</span>
</span><span id="approx-705"><a href="#approx-705"><span class="linenos">705</span></a><span class="sd">       sequence element of nonnumeric type.</span>
</span><span id="approx-706"><a href="#approx-706"><span class="linenos">706</span></a>
</span><span id="approx-707"><a href="#approx-707"><span class="linenos">707</span></a><span class="sd">    .. versionchanged:: 6.1.0</span>
</span><span id="approx-708"><a href="#approx-708"><span class="linenos">708</span></a><span class="sd">       ``approx`` falls back to strict equality for nonnumeric types instead</span>
</span><span id="approx-709"><a href="#approx-709"><span class="linenos">709</span></a><span class="sd">       of raising ``TypeError``.</span>
</span><span id="approx-710"><a href="#approx-710"><span class="linenos">710</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="approx-711"><a href="#approx-711"><span class="linenos">711</span></a>    <span class="c1"># Delegate the comparison to a class that knows how to deal with the type</span>
</span><span id="approx-712"><a href="#approx-712"><span class="linenos">712</span></a>    <span class="c1"># of the expected value (e.g. int, float, list, dict, numpy.array, etc).</span>
</span><span id="approx-713"><a href="#approx-713"><span class="linenos">713</span></a>    <span class="c1">#</span>
</span><span id="approx-714"><a href="#approx-714"><span class="linenos">714</span></a>    <span class="c1"># The primary responsibility of these classes is to implement ``__eq__()``</span>
</span><span id="approx-715"><a href="#approx-715"><span class="linenos">715</span></a>    <span class="c1"># and ``__repr__()``.  The former is used to actually check if some</span>
</span><span id="approx-716"><a href="#approx-716"><span class="linenos">716</span></a>    <span class="c1"># &quot;actual&quot; value is equivalent to the given expected value within the</span>
</span><span id="approx-717"><a href="#approx-717"><span class="linenos">717</span></a>    <span class="c1"># allowed tolerance.  The latter is used to show the user the expected</span>
</span><span id="approx-718"><a href="#approx-718"><span class="linenos">718</span></a>    <span class="c1"># value and tolerance, in the case that a test failed.</span>
</span><span id="approx-719"><a href="#approx-719"><span class="linenos">719</span></a>    <span class="c1">#</span>
</span><span id="approx-720"><a href="#approx-720"><span class="linenos">720</span></a>    <span class="c1"># The actual logic for making approximate comparisons can be found in</span>
</span><span id="approx-721"><a href="#approx-721"><span class="linenos">721</span></a>    <span class="c1"># ApproxScalar, which is used to compare individual numbers.  All of the</span>
</span><span id="approx-722"><a href="#approx-722"><span class="linenos">722</span></a>    <span class="c1"># other Approx classes eventually delegate to this class.  The ApproxBase</span>
</span><span id="approx-723"><a href="#approx-723"><span class="linenos">723</span></a>    <span class="c1"># class provides some convenient methods and overloads, but isn&#39;t really</span>
</span><span id="approx-724"><a href="#approx-724"><span class="linenos">724</span></a>    <span class="c1"># essential.</span>
</span><span id="approx-725"><a href="#approx-725"><span class="linenos">725</span></a>
</span><span id="approx-726"><a href="#approx-726"><span class="linenos">726</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="approx-727"><a href="#approx-727"><span class="linenos">727</span></a>
</span><span id="approx-728"><a href="#approx-728"><span class="linenos">728</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">Decimal</span><span class="p">):</span>
</span><span id="approx-729"><a href="#approx-729"><span class="linenos">729</span></a>        <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">ApproxBase</span><span class="p">]</span> <span class="o">=</span> <span class="n">ApproxDecimal</span>
</span><span id="approx-730"><a href="#approx-730"><span class="linenos">730</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
</span><span id="approx-731"><a href="#approx-731"><span class="linenos">731</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="n">ApproxMapping</span>
</span><span id="approx-732"><a href="#approx-732"><span class="linenos">732</span></a>    <span class="k">elif</span> <span class="n">_is_numpy_array</span><span class="p">(</span><span class="n">expected</span><span class="p">):</span>
</span><span id="approx-733"><a href="#approx-733"><span class="linenos">733</span></a>        <span class="n">expected</span> <span class="o">=</span> <span class="n">_as_numpy_array</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
</span><span id="approx-734"><a href="#approx-734"><span class="linenos">734</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="n">ApproxNumpy</span>
</span><span id="approx-735"><a href="#approx-735"><span class="linenos">735</span></a>    <span class="k">elif</span> <span class="n">_is_sequence_like</span><span class="p">(</span><span class="n">expected</span><span class="p">):</span>
</span><span id="approx-736"><a href="#approx-736"><span class="linenos">736</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="n">ApproxSequenceLike</span>
</span><span id="approx-737"><a href="#approx-737"><span class="linenos">737</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">Collection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
</span><span id="approx-738"><a href="#approx-738"><span class="linenos">738</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pytest.approx() only supports ordered sequences, but got: </span><span class="si">{</span><span class="n">expected</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="approx-739"><a href="#approx-739"><span class="linenos">739</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="approx-740"><a href="#approx-740"><span class="linenos">740</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="approx-741"><a href="#approx-741"><span class="linenos">741</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="n">ApproxScalar</span>
</span><span id="approx-742"><a href="#approx-742"><span class="linenos">742</span></a>
</span><span id="approx-743"><a href="#approx-743"><span class="linenos">743</span></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">rel</span><span class="p">,</span> <span class="nb">abs</span><span class="p">,</span> <span class="n">nan_ok</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Assert that two numbers (or two ordered sequences of numbers) are equal to each other
within some tolerance.</p>

<p>Due to the :doc:<code>python:tutorial/floatingpoint</code>, numbers that we
would intuitively expect to be equal are not always so::</p>

<pre><code>&gt;&gt;&gt; 0.1 + 0.2 == 0.3
False
</code></pre>

<p>This problem is commonly encountered when writing tests, e.g. when making
sure that floating-point values are what you expect them to be.  One way to
deal with this problem is to assert that two floating-point numbers are
equal to within some appropriate tolerance::</p>

<pre><code>&gt;&gt;&gt; abs((0.1 + 0.2) - 0.3) &lt; 1e-6
True
</code></pre>

<p>However, comparisons like this are tedious to write and difficult to
understand.  Furthermore, absolute comparisons like the one above are
usually discouraged because there's no tolerance that works well for all
situations.  <code>1e-6</code> is good for numbers around <code>1</code>, but too small for
very big numbers and too big for very small ones.  It's better to express
the tolerance as a fraction of the expected value, but relative comparisons
like that are even more difficult to write correctly and concisely.</p>

<p>The <code><a href="#approx">approx</a></code> class performs floating-point comparisons using a syntax
that's as intuitive as possible::</p>

<pre><code>&gt;&gt;&gt; from pytest import approx
&gt;&gt;&gt; 0.1 + 0.2 == approx(0.3)
True
</code></pre>

<p>The same syntax also works for ordered sequences of numbers::</p>

<pre><code>&gt;&gt;&gt; (0.1 + 0.2, 0.2 + 0.4) == approx((0.3, 0.6))
True
</code></pre>

<p><code>numpy</code> arrays::</p>

<pre><code>&gt;&gt;&gt; import numpy as np                                                          # doctest: +SKIP
&gt;&gt;&gt; np.array([0.1, 0.2]) + np.array([0.2, 0.4]) == approx(np.array([0.3, 0.6])) # doctest: +SKIP
True
</code></pre>

<p>And for a <code>numpy</code> array against a scalar::</p>

<pre><code>&gt;&gt;&gt; import numpy as np                                         # doctest: +SKIP
&gt;&gt;&gt; np.array([0.1, 0.2]) + np.array([0.2, 0.1]) == approx(0.3) # doctest: +SKIP
True
</code></pre>

<p>Only ordered sequences are supported, because <code><a href="#approx">approx</a></code> needs
to infer the relative position of the sequences without ambiguity. This means
<code>sets</code> and other unordered sequences are not supported.</p>

<p>Finally, dictionary <em>values</em> can also be compared::</p>

<pre><code>&gt;&gt;&gt; {'a': 0.1 + 0.2, 'b': 0.2 + 0.4} == approx({'a': 0.3, 'b': 0.6})
True
</code></pre>

<p>The comparison will be true if both mappings have the same keys and their
respective values match the expected tolerances.</p>

<p><strong>Tolerances</strong></p>

<p>By default, <code><a href="#approx">approx</a></code> considers numbers within a relative tolerance of
<code>1e-6</code> (i.e. one part in a million) of its expected value to be equal.
This treatment would lead to surprising results if the expected value was
<code>0.0</code>, because nothing but <code>0.0</code> itself is relatively close to <code>0.0</code>.
To handle this case less surprisingly, <code><a href="#approx">approx</a></code> also considers numbers
within an absolute tolerance of <code>1e-12</code> of its expected value to be
equal.  Infinity and NaN are special cases.  Infinity is only considered
equal to itself, regardless of the relative tolerance.  NaN is not
considered equal to anything by default, but you can make it be equal to
itself by setting the <code>nan_ok</code> argument to True.  (This is meant to
facilitate comparing arrays that use NaN to mean "no data".)</p>

<p>Both the relative and absolute tolerances can be changed by passing
arguments to the <code><a href="#approx">approx</a></code> constructor::</p>

<pre><code>&gt;&gt;&gt; 1.0001 == approx(1)
False
&gt;&gt;&gt; 1.0001 == approx(1, rel=1e-3)
True
&gt;&gt;&gt; 1.0001 == approx(1, abs=1e-3)
True
</code></pre>

<p>If you specify <code>abs</code> but not <code>rel</code>, the comparison will not consider
the relative tolerance at all.  In other words, two numbers that are within
the default relative tolerance of <code>1e-6</code> will still be considered unequal
if they exceed the specified absolute tolerance.  If you specify both
<code>abs</code> and <code>rel</code>, the numbers will be considered equal if either
tolerance is met::</p>

<pre><code>&gt;&gt;&gt; 1 + 1e-8 == approx(1)
True
&gt;&gt;&gt; 1 + 1e-8 == approx(1, abs=1e-12)
False
&gt;&gt;&gt; 1 + 1e-8 == approx(1, rel=1e-6, abs=1e-12)
True
</code></pre>

<p>You can also use <code><a href="#approx">approx</a></code> to compare nonnumeric types, or dicts and
sequences containing nonnumeric types, in which case it falls back to
strict equality. This can be useful for comparing dicts and sequences that
can contain optional values::</p>

<pre><code>&gt;&gt;&gt; {"required": 1.0000005, "optional": None} == approx({"required": 1, "optional": None})
True
&gt;&gt;&gt; [None, 1.0000005] == approx([None,1])
True
&gt;&gt;&gt; ["foo", 1.0000005] == approx([None,1])
False
</code></pre>

<p>If you're thinking about using <code><a href="#approx">approx</a></code>, then you might want to know how
it compares to other good ways of comparing floating-point numbers.  All of
these algorithms are based on relative and absolute tolerances and should
agree for the most part, but they do have meaningful differences:</p>

<ul>
<li><p><code>math.isclose(a, b, rel_tol=1e-9, abs_tol=0.0)</code>:  True if the relative
tolerance is met w.r.t. either <code>a</code> or <code>b</code> or if the absolute
tolerance is met.  Because the relative tolerance is calculated w.r.t.
both <code>a</code> and <code>b</code>, this test is symmetric (i.e.  neither <code>a</code> nor
<code>b</code> is a "reference value").  You have to specify an absolute tolerance
if you want to compare to <code>0.0</code> because there is no tolerance by
default.  More information: <code>math.isclose()</code>.</p></li>
<li><p><code>numpy.isclose(a, b, rtol=1e-5, atol=1e-8)</code>: True if the difference
between <code>a</code> and <code>b</code> is less that the sum of the relative tolerance
w.r.t. <code>b</code> and the absolute tolerance.  Because the relative tolerance
is only calculated w.r.t. <code>b</code>, this test is asymmetric and you can
think of <code>b</code> as the reference value.  Support for comparing sequences
is provided by <code>numpy.allclose()</code>.  More information:
:std:doc:<code>numpy:reference/generated/numpy.isclose</code>.</p></li>
<li><p><code>unittest.TestCase.assertAlmostEqual(a, b)</code>: True if <code>a</code> and <code>b</code>
are within an absolute tolerance of <code>1e-7</code>.  No relative tolerance is
considered , so this function is not appropriate for very large or very
small numbers.  Also, it's only available in subclasses of <code>unittest.TestCase</code>
and it's ugly because it doesn't follow PEP8.  More information:
<code>unittest.TestCase.assertAlmostEqual()</code>.</p></li>
<li><p><code>a == <a href="#approx">pytest.approx</a>(b, rel=1e-6, abs=1e-12)</code>: True if the relative
tolerance is met w.r.t. <code>b</code> or if the absolute tolerance is met.
Because the relative tolerance is only calculated w.r.t. <code>b</code>, this test
is asymmetric and you can think of <code>b</code> as the reference value.  In the
special case that you explicitly specify an absolute tolerance but not a
relative tolerance, only the absolute tolerance is considered.</p></li>
</ul>

<div class="alert note">

<p><code><a href="#approx">approx</a></code> can handle numpy arrays, but we recommend the
specialised test helpers in :std:doc:<code>numpy:reference/routines.testing</code>
if you need support for comparisons, NaNs, or ULP-based tolerances.</p>

<p>To match strings using regex, you can use
<a href="https://github.com/asottile/re-assert#re_assertmatchespattern-str-args-kwargs">Matches </a>
from the
<a href="https://github.com/asottile/re-assert">re_assert package </a>.</p>

</div>

<div class="alert warning">

<p>.. versionchanged:: 3.2</p>

<p>In order to avoid inconsistent behavior, <code>TypeError</code> is
raised for <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code> and <code>&lt;=</code> comparisons.
The example below illustrates the problem::</p>

<pre><code>assert approx(0.1) &gt; 0.1 + 1e-10  # calls approx(0.1).__gt__(0.1 + 1e-10)
assert 0.1 + 1e-10 &gt; approx(0.1)  # calls approx(0.1).__lt__(0.1 + 1e-10)
</code></pre>

<p>In the second example one expects <code>approx(0.1).__le__(0.1 + 1e-10)</code>
to be called. But instead, <code>approx(0.1).__lt__(0.1 + 1e-10)</code> is used to
comparison. This is because the call hierarchy of rich comparisons
follows a fixed behavior. More information: <code>object.__ge__()</code></p>

</div>

<p><em>Changed in version 3.7.1:</em>
<code><a href="#approx">approx</a></code> raises <code>TypeError</code> when it encounters a dict value or
sequence element of nonnumeric type.</p>

<p><em>Changed in version 6.1.0:</em>
<code><a href="#approx">approx</a></code> falls back to strict equality for nonnumeric types instead
of raising <code>TypeError</code>.</p>
</div>


                </section>
                <section id="Cache">
                            <input id="Cache-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">Cache</span>:

                <label class="view-source-button" for="Cache-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache-56"><a href="#Cache-56"><span class="linenos"> 56</span></a><span class="nd">@final</span>
</span><span id="Cache-57"><a href="#Cache-57"><span class="linenos"> 57</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="Cache-58"><a href="#Cache-58"><span class="linenos"> 58</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Cache</span><span class="p">:</span>
</span><span id="Cache-59"><a href="#Cache-59"><span class="linenos"> 59</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Instance of the `cache` fixture.&quot;&quot;&quot;</span>
</span><span id="Cache-60"><a href="#Cache-60"><span class="linenos"> 60</span></a>
</span><span id="Cache-61"><a href="#Cache-61"><span class="linenos"> 61</span></a>    <span class="n">_cachedir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Cache-62"><a href="#Cache-62"><span class="linenos"> 62</span></a>    <span class="n">_config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Cache-63"><a href="#Cache-63"><span class="linenos"> 63</span></a>
</span><span id="Cache-64"><a href="#Cache-64"><span class="linenos"> 64</span></a>    <span class="c1"># Sub-directory under cache-dir for directories created by `mkdir()`.</span>
</span><span id="Cache-65"><a href="#Cache-65"><span class="linenos"> 65</span></a>    <span class="n">_CACHE_PREFIX_DIRS</span> <span class="o">=</span> <span class="s2">&quot;d&quot;</span>
</span><span id="Cache-66"><a href="#Cache-66"><span class="linenos"> 66</span></a>
</span><span id="Cache-67"><a href="#Cache-67"><span class="linenos"> 67</span></a>    <span class="c1"># Sub-directory under cache-dir for values created by `set()`.</span>
</span><span id="Cache-68"><a href="#Cache-68"><span class="linenos"> 68</span></a>    <span class="n">_CACHE_PREFIX_VALUES</span> <span class="o">=</span> <span class="s2">&quot;v&quot;</span>
</span><span id="Cache-69"><a href="#Cache-69"><span class="linenos"> 69</span></a>
</span><span id="Cache-70"><a href="#Cache-70"><span class="linenos"> 70</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Cache-71"><a href="#Cache-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">cachedir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Cache-72"><a href="#Cache-72"><span class="linenos"> 72</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache-73"><a href="#Cache-73"><span class="linenos"> 73</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache-74"><a href="#Cache-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span> <span class="o">=</span> <span class="n">cachedir</span>
</span><span id="Cache-75"><a href="#Cache-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="Cache-76"><a href="#Cache-76"><span class="linenos"> 76</span></a>
</span><span id="Cache-77"><a href="#Cache-77"><span class="linenos"> 77</span></a>    <span class="nd">@classmethod</span>
</span><span id="Cache-78"><a href="#Cache-78"><span class="linenos"> 78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">for_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Cache</span><span class="p">:</span>
</span><span id="Cache-79"><a href="#Cache-79"><span class="linenos"> 79</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the Cache instance for a Config.</span>
</span><span id="Cache-80"><a href="#Cache-80"><span class="linenos"> 80</span></a>
</span><span id="Cache-81"><a href="#Cache-81"><span class="linenos"> 81</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache-82"><a href="#Cache-82"><span class="linenos"> 82</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-83"><a href="#Cache-83"><span class="linenos"> 83</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache-84"><a href="#Cache-84"><span class="linenos"> 84</span></a>        <span class="n">cachedir</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">cache_dir_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache-85"><a href="#Cache-85"><span class="linenos"> 85</span></a>        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;cacheclear&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cachedir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Cache-86"><a href="#Cache-86"><span class="linenos"> 86</span></a>            <span class="bp">cls</span><span class="o">.</span><span class="n">clear_cache</span><span class="p">(</span><span class="n">cachedir</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache-87"><a href="#Cache-87"><span class="linenos"> 87</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">cachedir</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache-88"><a href="#Cache-88"><span class="linenos"> 88</span></a>
</span><span id="Cache-89"><a href="#Cache-89"><span class="linenos"> 89</span></a>    <span class="nd">@classmethod</span>
</span><span id="Cache-90"><a href="#Cache-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cachedir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache-91"><a href="#Cache-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the sub-directories used to hold cached directories and values.</span>
</span><span id="Cache-92"><a href="#Cache-92"><span class="linenos"> 92</span></a>
</span><span id="Cache-93"><a href="#Cache-93"><span class="linenos"> 93</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache-94"><a href="#Cache-94"><span class="linenos"> 94</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-95"><a href="#Cache-95"><span class="linenos"> 95</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache-96"><a href="#Cache-96"><span class="linenos"> 96</span></a>        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_CACHE_PREFIX_DIRS</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_CACHE_PREFIX_VALUES</span><span class="p">):</span>
</span><span id="Cache-97"><a href="#Cache-97"><span class="linenos"> 97</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">cachedir</span> <span class="o">/</span> <span class="n">prefix</span>
</span><span id="Cache-98"><a href="#Cache-98"><span class="linenos"> 98</span></a>            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Cache-99"><a href="#Cache-99"><span class="linenos"> 99</span></a>                <span class="n">rm_rf</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span id="Cache-100"><a href="#Cache-100"><span class="linenos">100</span></a>
</span><span id="Cache-101"><a href="#Cache-101"><span class="linenos">101</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Cache-102"><a href="#Cache-102"><span class="linenos">102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cache_dir_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Cache-103"><a href="#Cache-103"><span class="linenos">103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the path to the cache directory for a Config.</span>
</span><span id="Cache-104"><a href="#Cache-104"><span class="linenos">104</span></a>
</span><span id="Cache-105"><a href="#Cache-105"><span class="linenos">105</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache-106"><a href="#Cache-106"><span class="linenos">106</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-107"><a href="#Cache-107"><span class="linenos">107</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache-108"><a href="#Cache-108"><span class="linenos">108</span></a>        <span class="k">return</span> <span class="n">resolve_from_str</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">),</span> <span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span><span id="Cache-109"><a href="#Cache-109"><span class="linenos">109</span></a>
</span><span id="Cache-110"><a href="#Cache-110"><span class="linenos">110</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache-111"><a href="#Cache-111"><span class="linenos">111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Issue a cache warning.</span>
</span><span id="Cache-112"><a href="#Cache-112"><span class="linenos">112</span></a>
</span><span id="Cache-113"><a href="#Cache-113"><span class="linenos">113</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache-114"><a href="#Cache-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-115"><a href="#Cache-115"><span class="linenos">115</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache-116"><a href="#Cache-116"><span class="linenos">116</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
</span><span id="Cache-117"><a href="#Cache-117"><span class="linenos">117</span></a>
</span><span id="Cache-118"><a href="#Cache-118"><span class="linenos">118</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestCacheWarning</span>
</span><span id="Cache-119"><a href="#Cache-119"><span class="linenos">119</span></a>
</span><span id="Cache-120"><a href="#Cache-120"><span class="linenos">120</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Cache-121"><a href="#Cache-121"><span class="linenos">121</span></a>            <span class="n">PytestCacheWarning</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span> <span class="k">if</span> <span class="n">args</span> <span class="k">else</span> <span class="n">fmt</span><span class="p">),</span>
</span><span id="Cache-122"><a href="#Cache-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">hook</span><span class="p">,</span>
</span><span id="Cache-123"><a href="#Cache-123"><span class="linenos">123</span></a>            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="Cache-124"><a href="#Cache-124"><span class="linenos">124</span></a>        <span class="p">)</span>
</span><span id="Cache-125"><a href="#Cache-125"><span class="linenos">125</span></a>
</span><span id="Cache-126"><a href="#Cache-126"><span class="linenos">126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache-127"><a href="#Cache-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_cache_dir_and_supporting_files</span><span class="p">()</span>
</span><span id="Cache-128"><a href="#Cache-128"><span class="linenos">128</span></a>        <span class="n">path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache-129"><a href="#Cache-129"><span class="linenos">129</span></a>
</span><span id="Cache-130"><a href="#Cache-130"><span class="linenos">130</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Cache-131"><a href="#Cache-131"><span class="linenos">131</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a directory path object with the given name.</span>
</span><span id="Cache-132"><a href="#Cache-132"><span class="linenos">132</span></a>
</span><span id="Cache-133"><a href="#Cache-133"><span class="linenos">133</span></a><span class="sd">        If the directory does not yet exist, it will be created. You can use</span>
</span><span id="Cache-134"><a href="#Cache-134"><span class="linenos">134</span></a><span class="sd">        it to manage files to e.g. store/retrieve database dumps across test</span>
</span><span id="Cache-135"><a href="#Cache-135"><span class="linenos">135</span></a><span class="sd">        sessions.</span>
</span><span id="Cache-136"><a href="#Cache-136"><span class="linenos">136</span></a>
</span><span id="Cache-137"><a href="#Cache-137"><span class="linenos">137</span></a><span class="sd">        .. versionadded:: 7.0</span>
</span><span id="Cache-138"><a href="#Cache-138"><span class="linenos">138</span></a>
</span><span id="Cache-139"><a href="#Cache-139"><span class="linenos">139</span></a><span class="sd">        :param name:</span>
</span><span id="Cache-140"><a href="#Cache-140"><span class="linenos">140</span></a><span class="sd">            Must be a string not containing a ``/`` separator.</span>
</span><span id="Cache-141"><a href="#Cache-141"><span class="linenos">141</span></a><span class="sd">            Make sure the name contains your plugin or application</span>
</span><span id="Cache-142"><a href="#Cache-142"><span class="linenos">142</span></a><span class="sd">            identifiers to prevent clashes with other cache users.</span>
</span><span id="Cache-143"><a href="#Cache-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-144"><a href="#Cache-144"><span class="linenos">144</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Cache-145"><a href="#Cache-145"><span class="linenos">145</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Cache-146"><a href="#Cache-146"><span class="linenos">146</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;name is not allowed to contain path separators&quot;</span><span class="p">)</span>
</span><span id="Cache-147"><a href="#Cache-147"><span class="linenos">147</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_CACHE_PREFIX_DIRS</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Cache-148"><a href="#Cache-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mkdir</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span><span id="Cache-149"><a href="#Cache-149"><span class="linenos">149</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Cache-150"><a href="#Cache-150"><span class="linenos">150</span></a>
</span><span id="Cache-151"><a href="#Cache-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getvaluepath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Cache-152"><a href="#Cache-152"><span class="linenos">152</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_CACHE_PREFIX_VALUES</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</span><span id="Cache-153"><a href="#Cache-153"><span class="linenos">153</span></a>
</span><span id="Cache-154"><a href="#Cache-154"><span class="linenos">154</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">):</span>
</span><span id="Cache-155"><a href="#Cache-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the cached value for the given key.</span>
</span><span id="Cache-156"><a href="#Cache-156"><span class="linenos">156</span></a>
</span><span id="Cache-157"><a href="#Cache-157"><span class="linenos">157</span></a><span class="sd">        If no value was yet cached or the value cannot be read, the specified</span>
</span><span id="Cache-158"><a href="#Cache-158"><span class="linenos">158</span></a><span class="sd">        default is returned.</span>
</span><span id="Cache-159"><a href="#Cache-159"><span class="linenos">159</span></a>
</span><span id="Cache-160"><a href="#Cache-160"><span class="linenos">160</span></a><span class="sd">        :param key:</span>
</span><span id="Cache-161"><a href="#Cache-161"><span class="linenos">161</span></a><span class="sd">            Must be a ``/`` separated value. Usually the first</span>
</span><span id="Cache-162"><a href="#Cache-162"><span class="linenos">162</span></a><span class="sd">            name is the name of your plugin or your application.</span>
</span><span id="Cache-163"><a href="#Cache-163"><span class="linenos">163</span></a><span class="sd">        :param default:</span>
</span><span id="Cache-164"><a href="#Cache-164"><span class="linenos">164</span></a><span class="sd">            The value to return in case of a cache-miss or invalid cache value.</span>
</span><span id="Cache-165"><a href="#Cache-165"><span class="linenos">165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-166"><a href="#Cache-166"><span class="linenos">166</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getvaluepath</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="Cache-167"><a href="#Cache-167"><span class="linenos">167</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Cache-168"><a href="#Cache-168"><span class="linenos">168</span></a>            <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache-169"><a href="#Cache-169"><span class="linenos">169</span></a>                <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="Cache-170"><a href="#Cache-170"><span class="linenos">170</span></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
</span><span id="Cache-171"><a href="#Cache-171"><span class="linenos">171</span></a>            <span class="k">return</span> <span class="n">default</span>
</span><span id="Cache-172"><a href="#Cache-172"><span class="linenos">172</span></a>
</span><span id="Cache-173"><a href="#Cache-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache-174"><a href="#Cache-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save value for the given key.</span>
</span><span id="Cache-175"><a href="#Cache-175"><span class="linenos">175</span></a>
</span><span id="Cache-176"><a href="#Cache-176"><span class="linenos">176</span></a><span class="sd">        :param key:</span>
</span><span id="Cache-177"><a href="#Cache-177"><span class="linenos">177</span></a><span class="sd">            Must be a ``/`` separated value. Usually the first</span>
</span><span id="Cache-178"><a href="#Cache-178"><span class="linenos">178</span></a><span class="sd">            name is the name of your plugin or your application.</span>
</span><span id="Cache-179"><a href="#Cache-179"><span class="linenos">179</span></a><span class="sd">        :param value:</span>
</span><span id="Cache-180"><a href="#Cache-180"><span class="linenos">180</span></a><span class="sd">            Must be of any combination of basic python types,</span>
</span><span id="Cache-181"><a href="#Cache-181"><span class="linenos">181</span></a><span class="sd">            including nested types like lists of dictionaries.</span>
</span><span id="Cache-182"><a href="#Cache-182"><span class="linenos">182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache-183"><a href="#Cache-183"><span class="linenos">183</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getvaluepath</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="Cache-184"><a href="#Cache-184"><span class="linenos">184</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Cache-185"><a href="#Cache-185"><span class="linenos">185</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mkdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</span><span id="Cache-186"><a href="#Cache-186"><span class="linenos">186</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="Cache-187"><a href="#Cache-187"><span class="linenos">187</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Cache-188"><a href="#Cache-188"><span class="linenos">188</span></a>                <span class="sa">f</span><span class="s2">&quot;could not create cache path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Cache-189"><a href="#Cache-189"><span class="linenos">189</span></a>                <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Cache-190"><a href="#Cache-190"><span class="linenos">190</span></a>            <span class="p">)</span>
</span><span id="Cache-191"><a href="#Cache-191"><span class="linenos">191</span></a>            <span class="k">return</span>
</span><span id="Cache-192"><a href="#Cache-192"><span class="linenos">192</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="Cache-193"><a href="#Cache-193"><span class="linenos">193</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Cache-194"><a href="#Cache-194"><span class="linenos">194</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
</span><span id="Cache-195"><a href="#Cache-195"><span class="linenos">195</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="Cache-196"><a href="#Cache-196"><span class="linenos">196</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Cache-197"><a href="#Cache-197"><span class="linenos">197</span></a>                <span class="sa">f</span><span class="s2">&quot;cache could not write path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Cache-198"><a href="#Cache-198"><span class="linenos">198</span></a>                <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Cache-199"><a href="#Cache-199"><span class="linenos">199</span></a>            <span class="p">)</span>
</span><span id="Cache-200"><a href="#Cache-200"><span class="linenos">200</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Cache-201"><a href="#Cache-201"><span class="linenos">201</span></a>            <span class="k">with</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache-202"><a href="#Cache-202"><span class="linenos">202</span></a>                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="Cache-203"><a href="#Cache-203"><span class="linenos">203</span></a>
</span><span id="Cache-204"><a href="#Cache-204"><span class="linenos">204</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_cache_dir_and_supporting_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache-205"><a href="#Cache-205"><span class="linenos">205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the cache dir and its supporting files.&quot;&quot;&quot;</span>
</span><span id="Cache-206"><a href="#Cache-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Cache-207"><a href="#Cache-207"><span class="linenos">207</span></a>            <span class="k">return</span>
</span><span id="Cache-208"><a href="#Cache-208"><span class="linenos">208</span></a>
</span><span id="Cache-209"><a href="#Cache-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache-210"><a href="#Cache-210"><span class="linenos">210</span></a>        <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span>
</span><span id="Cache-211"><a href="#Cache-211"><span class="linenos">211</span></a>            <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;pytest-cache-files-&quot;</span><span class="p">,</span>
</span><span id="Cache-212"><a href="#Cache-212"><span class="linenos">212</span></a>            <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
</span><span id="Cache-213"><a href="#Cache-213"><span class="linenos">213</span></a>        <span class="p">)</span> <span class="k">as</span> <span class="n">newpath</span><span class="p">:</span>
</span><span id="Cache-214"><a href="#Cache-214"><span class="linenos">214</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">newpath</span><span class="p">)</span>
</span><span id="Cache-215"><a href="#Cache-215"><span class="linenos">215</span></a>
</span><span id="Cache-216"><a href="#Cache-216"><span class="linenos">216</span></a>            <span class="c1"># Reset permissions to the default, see #12308.</span>
</span><span id="Cache-217"><a href="#Cache-217"><span class="linenos">217</span></a>            <span class="c1"># Note: there&#39;s no way to get the current umask atomically, eek.</span>
</span><span id="Cache-218"><a href="#Cache-218"><span class="linenos">218</span></a>            <span class="n">umask</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="mo">0o022</span><span class="p">)</span>
</span><span id="Cache-219"><a href="#Cache-219"><span class="linenos">219</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="n">umask</span><span class="p">)</span>
</span><span id="Cache-220"><a href="#Cache-220"><span class="linenos">220</span></a>            <span class="n">path</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="mo">0o777</span> <span class="o">-</span> <span class="n">umask</span><span class="p">)</span>
</span><span id="Cache-221"><a href="#Cache-221"><span class="linenos">221</span></a>
</span><span id="Cache-222"><a href="#Cache-222"><span class="linenos">222</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;README.md&quot;</span><span class="p">),</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache-223"><a href="#Cache-223"><span class="linenos">223</span></a>                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">README_CONTENT</span><span class="p">)</span>
</span><span id="Cache-224"><a href="#Cache-224"><span class="linenos">224</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;.gitignore&quot;</span><span class="p">),</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache-225"><a href="#Cache-225"><span class="linenos">225</span></a>                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# Created by pytest automatically.</span><span class="se">\n</span><span class="s2">*</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Cache-226"><a href="#Cache-226"><span class="linenos">226</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;CACHEDIR.TAG&quot;</span><span class="p">),</span> <span class="s2">&quot;xb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache-227"><a href="#Cache-227"><span class="linenos">227</span></a>                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">CACHEDIR_TAG_CONTENT</span><span class="p">)</span>
</span><span id="Cache-228"><a href="#Cache-228"><span class="linenos">228</span></a>
</span><span id="Cache-229"><a href="#Cache-229"><span class="linenos">229</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Cache-230"><a href="#Cache-230"><span class="linenos">230</span></a>                <span class="n">path</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="p">)</span>
</span><span id="Cache-231"><a href="#Cache-231"><span class="linenos">231</span></a>            <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Cache-232"><a href="#Cache-232"><span class="linenos">232</span></a>                <span class="c1"># If 2 concurrent pytests both race to the rename, the loser</span>
</span><span id="Cache-233"><a href="#Cache-233"><span class="linenos">233</span></a>                <span class="c1"># gets &quot;Directory not empty&quot; from the rename. In this case,</span>
</span><span id="Cache-234"><a href="#Cache-234"><span class="linenos">234</span></a>                <span class="c1"># everything is handled so just continue (while letting the</span>
</span><span id="Cache-235"><a href="#Cache-235"><span class="linenos">235</span></a>                <span class="c1"># temporary directory be cleaned up).</span>
</span><span id="Cache-236"><a href="#Cache-236"><span class="linenos">236</span></a>                <span class="c1"># On Windows, the error is a FileExistsError which translates to EEXIST.</span>
</span><span id="Cache-237"><a href="#Cache-237"><span class="linenos">237</span></a>                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">errno</span><span class="o">.</span><span class="n">ENOTEMPTY</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EEXIST</span><span class="p">):</span>
</span><span id="Cache-238"><a href="#Cache-238"><span class="linenos">238</span></a>                    <span class="k">raise</span>
</span><span id="Cache-239"><a href="#Cache-239"><span class="linenos">239</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Cache-240"><a href="#Cache-240"><span class="linenos">240</span></a>                <span class="c1"># Create a directory in place of the one we just moved so that</span>
</span><span id="Cache-241"><a href="#Cache-241"><span class="linenos">241</span></a>                <span class="c1"># `TemporaryDirectory`&#39;s cleanup doesn&#39;t complain.</span>
</span><span id="Cache-242"><a href="#Cache-242"><span class="linenos">242</span></a>                <span class="c1">#</span>
</span><span id="Cache-243"><a href="#Cache-243"><span class="linenos">243</span></a>                <span class="c1"># TODO: pass ignore_cleanup_errors=True when we no longer support python &lt; 3.10.</span>
</span><span id="Cache-244"><a href="#Cache-244"><span class="linenos">244</span></a>                <span class="c1"># See https://github.com/python/cpython/issues/74168. Note that passing</span>
</span><span id="Cache-245"><a href="#Cache-245"><span class="linenos">245</span></a>                <span class="c1"># delete=False would do the wrong thing in case of errors and isn&#39;t supported</span>
</span><span id="Cache-246"><a href="#Cache-246"><span class="linenos">246</span></a>                <span class="c1"># until python 3.12.</span>
</span><span id="Cache-247"><a href="#Cache-247"><span class="linenos">247</span></a>                <span class="n">path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Instance of the <code>cache</code> fixture.</p>
</div>


                            <div id="Cache.__init__" class="classattr">
                                        <input id="Cache.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Cache</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">cachedir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Cache.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.__init__-70"><a href="#Cache.__init__-70"><span class="linenos">70</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Cache.__init__-71"><a href="#Cache.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">cachedir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Cache.__init__-72"><a href="#Cache.__init__-72"><span class="linenos">72</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache.__init__-73"><a href="#Cache.__init__-73"><span class="linenos">73</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache.__init__-74"><a href="#Cache.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span> <span class="o">=</span> <span class="n">cachedir</span>
</span><span id="Cache.__init__-75"><a href="#Cache.__init__-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
</span></pre></div>


    

                            </div>
                            <div id="Cache.for_config" class="classattr">
                                        <input id="Cache.for_config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">for_config</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">cacheprovider</span><span class="o">.</span><span class="n">Cache</span>:</span></span>

                <label class="view-source-button" for="Cache.for_config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.for_config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.for_config-77"><a href="#Cache.for_config-77"><span class="linenos">77</span></a>    <span class="nd">@classmethod</span>
</span><span id="Cache.for_config-78"><a href="#Cache.for_config-78"><span class="linenos">78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">for_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Cache</span><span class="p">:</span>
</span><span id="Cache.for_config-79"><a href="#Cache.for_config-79"><span class="linenos">79</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the Cache instance for a Config.</span>
</span><span id="Cache.for_config-80"><a href="#Cache.for_config-80"><span class="linenos">80</span></a>
</span><span id="Cache.for_config-81"><a href="#Cache.for_config-81"><span class="linenos">81</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache.for_config-82"><a href="#Cache.for_config-82"><span class="linenos">82</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.for_config-83"><a href="#Cache.for_config-83"><span class="linenos">83</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache.for_config-84"><a href="#Cache.for_config-84"><span class="linenos">84</span></a>        <span class="n">cachedir</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">cache_dir_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache.for_config-85"><a href="#Cache.for_config-85"><span class="linenos">85</span></a>        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;cacheclear&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cachedir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Cache.for_config-86"><a href="#Cache.for_config-86"><span class="linenos">86</span></a>            <span class="bp">cls</span><span class="o">.</span><span class="n">clear_cache</span><span class="p">(</span><span class="n">cachedir</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Cache.for_config-87"><a href="#Cache.for_config-87"><span class="linenos">87</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">cachedir</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create the Cache instance for a Config.</p>

<p>:meta private:</p>
</div>


                            </div>
                            <div id="Cache.clear_cache" class="classattr">
                                        <input id="Cache.clear_cache-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">clear_cache</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">cachedir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Cache.clear_cache-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.clear_cache"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.clear_cache-89"><a href="#Cache.clear_cache-89"><span class="linenos">89</span></a>    <span class="nd">@classmethod</span>
</span><span id="Cache.clear_cache-90"><a href="#Cache.clear_cache-90"><span class="linenos">90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cachedir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache.clear_cache-91"><a href="#Cache.clear_cache-91"><span class="linenos">91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the sub-directories used to hold cached directories and values.</span>
</span><span id="Cache.clear_cache-92"><a href="#Cache.clear_cache-92"><span class="linenos">92</span></a>
</span><span id="Cache.clear_cache-93"><a href="#Cache.clear_cache-93"><span class="linenos">93</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache.clear_cache-94"><a href="#Cache.clear_cache-94"><span class="linenos">94</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.clear_cache-95"><a href="#Cache.clear_cache-95"><span class="linenos">95</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache.clear_cache-96"><a href="#Cache.clear_cache-96"><span class="linenos">96</span></a>        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_CACHE_PREFIX_DIRS</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_CACHE_PREFIX_VALUES</span><span class="p">):</span>
</span><span id="Cache.clear_cache-97"><a href="#Cache.clear_cache-97"><span class="linenos">97</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">cachedir</span> <span class="o">/</span> <span class="n">prefix</span>
</span><span id="Cache.clear_cache-98"><a href="#Cache.clear_cache-98"><span class="linenos">98</span></a>            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Cache.clear_cache-99"><a href="#Cache.clear_cache-99"><span class="linenos">99</span></a>                <span class="n">rm_rf</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Clear the sub-directories used to hold cached directories and values.</p>

<p>:meta private:</p>
</div>


                            </div>
                            <div id="Cache.cache_dir_from_config" class="classattr">
                                        <input id="Cache.cache_dir_from_config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">cache_dir_from_config</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Cache.cache_dir_from_config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.cache_dir_from_config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.cache_dir_from_config-101"><a href="#Cache.cache_dir_from_config-101"><span class="linenos">101</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Cache.cache_dir_from_config-102"><a href="#Cache.cache_dir_from_config-102"><span class="linenos">102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cache_dir_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Cache.cache_dir_from_config-103"><a href="#Cache.cache_dir_from_config-103"><span class="linenos">103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the path to the cache directory for a Config.</span>
</span><span id="Cache.cache_dir_from_config-104"><a href="#Cache.cache_dir_from_config-104"><span class="linenos">104</span></a>
</span><span id="Cache.cache_dir_from_config-105"><a href="#Cache.cache_dir_from_config-105"><span class="linenos">105</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache.cache_dir_from_config-106"><a href="#Cache.cache_dir_from_config-106"><span class="linenos">106</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.cache_dir_from_config-107"><a href="#Cache.cache_dir_from_config-107"><span class="linenos">107</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache.cache_dir_from_config-108"><a href="#Cache.cache_dir_from_config-108"><span class="linenos">108</span></a>        <span class="k">return</span> <span class="n">resolve_from_str</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">),</span> <span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the path to the cache directory for a Config.</p>

<p>:meta private:</p>
</div>


                            </div>
                            <div id="Cache.warn" class="classattr">
                                        <input id="Cache.warn-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">warn</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="o">**</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Cache.warn-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.warn"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.warn-110"><a href="#Cache.warn-110"><span class="linenos">110</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache.warn-111"><a href="#Cache.warn-111"><span class="linenos">111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Issue a cache warning.</span>
</span><span id="Cache.warn-112"><a href="#Cache.warn-112"><span class="linenos">112</span></a>
</span><span id="Cache.warn-113"><a href="#Cache.warn-113"><span class="linenos">113</span></a><span class="sd">        :meta private:</span>
</span><span id="Cache.warn-114"><a href="#Cache.warn-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.warn-115"><a href="#Cache.warn-115"><span class="linenos">115</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Cache.warn-116"><a href="#Cache.warn-116"><span class="linenos">116</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
</span><span id="Cache.warn-117"><a href="#Cache.warn-117"><span class="linenos">117</span></a>
</span><span id="Cache.warn-118"><a href="#Cache.warn-118"><span class="linenos">118</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestCacheWarning</span>
</span><span id="Cache.warn-119"><a href="#Cache.warn-119"><span class="linenos">119</span></a>
</span><span id="Cache.warn-120"><a href="#Cache.warn-120"><span class="linenos">120</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Cache.warn-121"><a href="#Cache.warn-121"><span class="linenos">121</span></a>            <span class="n">PytestCacheWarning</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span> <span class="k">if</span> <span class="n">args</span> <span class="k">else</span> <span class="n">fmt</span><span class="p">),</span>
</span><span id="Cache.warn-122"><a href="#Cache.warn-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">hook</span><span class="p">,</span>
</span><span id="Cache.warn-123"><a href="#Cache.warn-123"><span class="linenos">123</span></a>            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="Cache.warn-124"><a href="#Cache.warn-124"><span class="linenos">124</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Issue a cache warning.</p>

<p>:meta private:</p>
</div>


                            </div>
                            <div id="Cache.mkdir" class="classattr">
                                        <input id="Cache.mkdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mkdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Cache.mkdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.mkdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.mkdir-130"><a href="#Cache.mkdir-130"><span class="linenos">130</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Cache.mkdir-131"><a href="#Cache.mkdir-131"><span class="linenos">131</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a directory path object with the given name.</span>
</span><span id="Cache.mkdir-132"><a href="#Cache.mkdir-132"><span class="linenos">132</span></a>
</span><span id="Cache.mkdir-133"><a href="#Cache.mkdir-133"><span class="linenos">133</span></a><span class="sd">        If the directory does not yet exist, it will be created. You can use</span>
</span><span id="Cache.mkdir-134"><a href="#Cache.mkdir-134"><span class="linenos">134</span></a><span class="sd">        it to manage files to e.g. store/retrieve database dumps across test</span>
</span><span id="Cache.mkdir-135"><a href="#Cache.mkdir-135"><span class="linenos">135</span></a><span class="sd">        sessions.</span>
</span><span id="Cache.mkdir-136"><a href="#Cache.mkdir-136"><span class="linenos">136</span></a>
</span><span id="Cache.mkdir-137"><a href="#Cache.mkdir-137"><span class="linenos">137</span></a><span class="sd">        .. versionadded:: 7.0</span>
</span><span id="Cache.mkdir-138"><a href="#Cache.mkdir-138"><span class="linenos">138</span></a>
</span><span id="Cache.mkdir-139"><a href="#Cache.mkdir-139"><span class="linenos">139</span></a><span class="sd">        :param name:</span>
</span><span id="Cache.mkdir-140"><a href="#Cache.mkdir-140"><span class="linenos">140</span></a><span class="sd">            Must be a string not containing a ``/`` separator.</span>
</span><span id="Cache.mkdir-141"><a href="#Cache.mkdir-141"><span class="linenos">141</span></a><span class="sd">            Make sure the name contains your plugin or application</span>
</span><span id="Cache.mkdir-142"><a href="#Cache.mkdir-142"><span class="linenos">142</span></a><span class="sd">            identifiers to prevent clashes with other cache users.</span>
</span><span id="Cache.mkdir-143"><a href="#Cache.mkdir-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.mkdir-144"><a href="#Cache.mkdir-144"><span class="linenos">144</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Cache.mkdir-145"><a href="#Cache.mkdir-145"><span class="linenos">145</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Cache.mkdir-146"><a href="#Cache.mkdir-146"><span class="linenos">146</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;name is not allowed to contain path separators&quot;</span><span class="p">)</span>
</span><span id="Cache.mkdir-147"><a href="#Cache.mkdir-147"><span class="linenos">147</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_CACHE_PREFIX_DIRS</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Cache.mkdir-148"><a href="#Cache.mkdir-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mkdir</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span><span id="Cache.mkdir-149"><a href="#Cache.mkdir-149"><span class="linenos">149</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Return a directory path object with the given name.</p>

<p>If the directory does not yet exist, it will be created. You can use
it to manage files to e.g. store/retrieve database dumps across test
sessions.</p>

<p><em>New in version 7.0.</em></p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>: 
Must be a string not containing a <code>/</code> separator.
Make sure the name contains your plugin or application
identifiers to prevent clashes with other cache users.</li>
</ul>
</div>


                            </div>
                            <div id="Cache.get" class="classattr">
                                        <input id="Cache.get-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">default</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Cache.get-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.get"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.get-154"><a href="#Cache.get-154"><span class="linenos">154</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">):</span>
</span><span id="Cache.get-155"><a href="#Cache.get-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the cached value for the given key.</span>
</span><span id="Cache.get-156"><a href="#Cache.get-156"><span class="linenos">156</span></a>
</span><span id="Cache.get-157"><a href="#Cache.get-157"><span class="linenos">157</span></a><span class="sd">        If no value was yet cached or the value cannot be read, the specified</span>
</span><span id="Cache.get-158"><a href="#Cache.get-158"><span class="linenos">158</span></a><span class="sd">        default is returned.</span>
</span><span id="Cache.get-159"><a href="#Cache.get-159"><span class="linenos">159</span></a>
</span><span id="Cache.get-160"><a href="#Cache.get-160"><span class="linenos">160</span></a><span class="sd">        :param key:</span>
</span><span id="Cache.get-161"><a href="#Cache.get-161"><span class="linenos">161</span></a><span class="sd">            Must be a ``/`` separated value. Usually the first</span>
</span><span id="Cache.get-162"><a href="#Cache.get-162"><span class="linenos">162</span></a><span class="sd">            name is the name of your plugin or your application.</span>
</span><span id="Cache.get-163"><a href="#Cache.get-163"><span class="linenos">163</span></a><span class="sd">        :param default:</span>
</span><span id="Cache.get-164"><a href="#Cache.get-164"><span class="linenos">164</span></a><span class="sd">            The value to return in case of a cache-miss or invalid cache value.</span>
</span><span id="Cache.get-165"><a href="#Cache.get-165"><span class="linenos">165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.get-166"><a href="#Cache.get-166"><span class="linenos">166</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getvaluepath</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="Cache.get-167"><a href="#Cache.get-167"><span class="linenos">167</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Cache.get-168"><a href="#Cache.get-168"><span class="linenos">168</span></a>            <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache.get-169"><a href="#Cache.get-169"><span class="linenos">169</span></a>                <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="Cache.get-170"><a href="#Cache.get-170"><span class="linenos">170</span></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
</span><span id="Cache.get-171"><a href="#Cache.get-171"><span class="linenos">171</span></a>            <span class="k">return</span> <span class="n">default</span>
</span></pre></div>


            <div class="docstring"><p>Return the cached value for the given key.</p>

<p>If no value was yet cached or the value cannot be read, the specified
default is returned.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>key</strong>: 
Must be a <code>/</code> separated value. Usually the first
name is the name of your plugin or your application.</li>
<li><strong>default</strong>: 
The value to return in case of a cache-miss or invalid cache value.</li>
</ul>
</div>


                            </div>
                            <div id="Cache.set" class="classattr">
                                        <input id="Cache.set-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">object</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Cache.set-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Cache.set"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Cache.set-173"><a href="#Cache.set-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Cache.set-174"><a href="#Cache.set-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save value for the given key.</span>
</span><span id="Cache.set-175"><a href="#Cache.set-175"><span class="linenos">175</span></a>
</span><span id="Cache.set-176"><a href="#Cache.set-176"><span class="linenos">176</span></a><span class="sd">        :param key:</span>
</span><span id="Cache.set-177"><a href="#Cache.set-177"><span class="linenos">177</span></a><span class="sd">            Must be a ``/`` separated value. Usually the first</span>
</span><span id="Cache.set-178"><a href="#Cache.set-178"><span class="linenos">178</span></a><span class="sd">            name is the name of your plugin or your application.</span>
</span><span id="Cache.set-179"><a href="#Cache.set-179"><span class="linenos">179</span></a><span class="sd">        :param value:</span>
</span><span id="Cache.set-180"><a href="#Cache.set-180"><span class="linenos">180</span></a><span class="sd">            Must be of any combination of basic python types,</span>
</span><span id="Cache.set-181"><a href="#Cache.set-181"><span class="linenos">181</span></a><span class="sd">            including nested types like lists of dictionaries.</span>
</span><span id="Cache.set-182"><a href="#Cache.set-182"><span class="linenos">182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Cache.set-183"><a href="#Cache.set-183"><span class="linenos">183</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getvaluepath</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="Cache.set-184"><a href="#Cache.set-184"><span class="linenos">184</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Cache.set-185"><a href="#Cache.set-185"><span class="linenos">185</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mkdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</span><span id="Cache.set-186"><a href="#Cache.set-186"><span class="linenos">186</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="Cache.set-187"><a href="#Cache.set-187"><span class="linenos">187</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Cache.set-188"><a href="#Cache.set-188"><span class="linenos">188</span></a>                <span class="sa">f</span><span class="s2">&quot;could not create cache path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Cache.set-189"><a href="#Cache.set-189"><span class="linenos">189</span></a>                <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Cache.set-190"><a href="#Cache.set-190"><span class="linenos">190</span></a>            <span class="p">)</span>
</span><span id="Cache.set-191"><a href="#Cache.set-191"><span class="linenos">191</span></a>            <span class="k">return</span>
</span><span id="Cache.set-192"><a href="#Cache.set-192"><span class="linenos">192</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="Cache.set-193"><a href="#Cache.set-193"><span class="linenos">193</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Cache.set-194"><a href="#Cache.set-194"><span class="linenos">194</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
</span><span id="Cache.set-195"><a href="#Cache.set-195"><span class="linenos">195</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="Cache.set-196"><a href="#Cache.set-196"><span class="linenos">196</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Cache.set-197"><a href="#Cache.set-197"><span class="linenos">197</span></a>                <span class="sa">f</span><span class="s2">&quot;cache could not write path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Cache.set-198"><a href="#Cache.set-198"><span class="linenos">198</span></a>                <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Cache.set-199"><a href="#Cache.set-199"><span class="linenos">199</span></a>            <span class="p">)</span>
</span><span id="Cache.set-200"><a href="#Cache.set-200"><span class="linenos">200</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Cache.set-201"><a href="#Cache.set-201"><span class="linenos">201</span></a>            <span class="k">with</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Cache.set-202"><a href="#Cache.set-202"><span class="linenos">202</span></a>                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save value for the given key.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>key</strong>: 
Must be a <code>/</code> separated value. Usually the first
name is the name of your plugin or your application.</li>
<li><strong>value</strong>: 
Must be of any combination of basic python types,
including nested types like lists of dictionaries.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="CallInfo">
                            <input id="CallInfo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">CallInfo</span><wbr>(<span class="base">typing.Generic[+TResult]</span>):

                <label class="view-source-button" for="CallInfo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CallInfo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CallInfo-271"><a href="#CallInfo-271"><span class="linenos">271</span></a><span class="nd">@final</span>
</span><span id="CallInfo-272"><a href="#CallInfo-272"><span class="linenos">272</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="CallInfo-273"><a href="#CallInfo-273"><span class="linenos">273</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CallInfo</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">TResult</span><span class="p">]):</span>
</span><span id="CallInfo-274"><a href="#CallInfo-274"><span class="linenos">274</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Result/Exception info of a function invocation.&quot;&quot;&quot;</span>
</span><span id="CallInfo-275"><a href="#CallInfo-275"><span class="linenos">275</span></a>
</span><span id="CallInfo-276"><a href="#CallInfo-276"><span class="linenos">276</span></a>    <span class="n">_result</span><span class="p">:</span> <span class="n">TResult</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="CallInfo-277"><a href="#CallInfo-277"><span class="linenos">277</span></a>    <span class="c1">#: The captured exception of the call, if it raised.</span>
</span><span id="CallInfo-278"><a href="#CallInfo-278"><span class="linenos">278</span></a>    <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="CallInfo-279"><a href="#CallInfo-279"><span class="linenos">279</span></a>    <span class="c1">#: The system time when the call started, in seconds since the epoch.</span>
</span><span id="CallInfo-280"><a href="#CallInfo-280"><span class="linenos">280</span></a>    <span class="n">start</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="CallInfo-281"><a href="#CallInfo-281"><span class="linenos">281</span></a>    <span class="c1">#: The system time when the call ended, in seconds since the epoch.</span>
</span><span id="CallInfo-282"><a href="#CallInfo-282"><span class="linenos">282</span></a>    <span class="n">stop</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="CallInfo-283"><a href="#CallInfo-283"><span class="linenos">283</span></a>    <span class="c1">#: The call duration, in seconds.</span>
</span><span id="CallInfo-284"><a href="#CallInfo-284"><span class="linenos">284</span></a>    <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="CallInfo-285"><a href="#CallInfo-285"><span class="linenos">285</span></a>    <span class="c1">#: The context of invocation: &quot;collect&quot;, &quot;setup&quot;, &quot;call&quot; or &quot;teardown&quot;.</span>
</span><span id="CallInfo-286"><a href="#CallInfo-286"><span class="linenos">286</span></a>    <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;collect&quot;</span><span class="p">,</span> <span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">]</span>
</span><span id="CallInfo-287"><a href="#CallInfo-287"><span class="linenos">287</span></a>
</span><span id="CallInfo-288"><a href="#CallInfo-288"><span class="linenos">288</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="CallInfo-289"><a href="#CallInfo-289"><span class="linenos">289</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CallInfo-290"><a href="#CallInfo-290"><span class="linenos">290</span></a>        <span class="n">result</span><span class="p">:</span> <span class="n">TResult</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CallInfo-291"><a href="#CallInfo-291"><span class="linenos">291</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CallInfo-292"><a href="#CallInfo-292"><span class="linenos">292</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CallInfo-293"><a href="#CallInfo-293"><span class="linenos">293</span></a>        <span class="n">stop</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CallInfo-294"><a href="#CallInfo-294"><span class="linenos">294</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CallInfo-295"><a href="#CallInfo-295"><span class="linenos">295</span></a>        <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;collect&quot;</span><span class="p">,</span> <span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">],</span>
</span><span id="CallInfo-296"><a href="#CallInfo-296"><span class="linenos">296</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="CallInfo-297"><a href="#CallInfo-297"><span class="linenos">297</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CallInfo-298"><a href="#CallInfo-298"><span class="linenos">298</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CallInfo-299"><a href="#CallInfo-299"><span class="linenos">299</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="CallInfo-300"><a href="#CallInfo-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_result</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="CallInfo-301"><a href="#CallInfo-301"><span class="linenos">301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">excinfo</span> <span class="o">=</span> <span class="n">excinfo</span>
</span><span id="CallInfo-302"><a href="#CallInfo-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="CallInfo-303"><a href="#CallInfo-303"><span class="linenos">303</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span>
</span><span id="CallInfo-304"><a href="#CallInfo-304"><span class="linenos">304</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>
</span><span id="CallInfo-305"><a href="#CallInfo-305"><span class="linenos">305</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">when</span> <span class="o">=</span> <span class="n">when</span>
</span><span id="CallInfo-306"><a href="#CallInfo-306"><span class="linenos">306</span></a>
</span><span id="CallInfo-307"><a href="#CallInfo-307"><span class="linenos">307</span></a>    <span class="nd">@property</span>
</span><span id="CallInfo-308"><a href="#CallInfo-308"><span class="linenos">308</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TResult</span><span class="p">:</span>
</span><span id="CallInfo-309"><a href="#CallInfo-309"><span class="linenos">309</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The return value of the call, if it didn&#39;t raise.</span>
</span><span id="CallInfo-310"><a href="#CallInfo-310"><span class="linenos">310</span></a>
</span><span id="CallInfo-311"><a href="#CallInfo-311"><span class="linenos">311</span></a><span class="sd">        Can only be accessed if excinfo is None.</span>
</span><span id="CallInfo-312"><a href="#CallInfo-312"><span class="linenos">312</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CallInfo-313"><a href="#CallInfo-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CallInfo-314"><a href="#CallInfo-314"><span class="linenos">314</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s2"> has no valid result&quot;</span><span class="p">)</span>
</span><span id="CallInfo-315"><a href="#CallInfo-315"><span class="linenos">315</span></a>        <span class="c1"># The cast is safe because an exception wasn&#39;t raised, hence</span>
</span><span id="CallInfo-316"><a href="#CallInfo-316"><span class="linenos">316</span></a>        <span class="c1"># _result has the expected function return type (which may be</span>
</span><span id="CallInfo-317"><a href="#CallInfo-317"><span class="linenos">317</span></a>        <span class="c1">#  None, that&#39;s why a cast and not an assert).</span>
</span><span id="CallInfo-318"><a href="#CallInfo-318"><span class="linenos">318</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">TResult</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result</span><span class="p">)</span>
</span><span id="CallInfo-319"><a href="#CallInfo-319"><span class="linenos">319</span></a>
</span><span id="CallInfo-320"><a href="#CallInfo-320"><span class="linenos">320</span></a>    <span class="nd">@classmethod</span>
</span><span id="CallInfo-321"><a href="#CallInfo-321"><span class="linenos">321</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_call</span><span class="p">(</span>
</span><span id="CallInfo-322"><a href="#CallInfo-322"><span class="linenos">322</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="CallInfo-323"><a href="#CallInfo-323"><span class="linenos">323</span></a>        <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">TResult</span><span class="p">],</span>
</span><span id="CallInfo-324"><a href="#CallInfo-324"><span class="linenos">324</span></a>        <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;collect&quot;</span><span class="p">,</span> <span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">],</span>
</span><span id="CallInfo-325"><a href="#CallInfo-325"><span class="linenos">325</span></a>        <span class="n">reraise</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CallInfo-326"><a href="#CallInfo-326"><span class="linenos">326</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CallInfo</span><span class="p">[</span><span class="n">TResult</span><span class="p">]:</span>
</span><span id="CallInfo-327"><a href="#CallInfo-327"><span class="linenos">327</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call func, wrapping the result in a CallInfo.</span>
</span><span id="CallInfo-328"><a href="#CallInfo-328"><span class="linenos">328</span></a>
</span><span id="CallInfo-329"><a href="#CallInfo-329"><span class="linenos">329</span></a><span class="sd">        :param func:</span>
</span><span id="CallInfo-330"><a href="#CallInfo-330"><span class="linenos">330</span></a><span class="sd">            The function to call. Called without arguments.</span>
</span><span id="CallInfo-331"><a href="#CallInfo-331"><span class="linenos">331</span></a><span class="sd">        :type func: Callable[[], _pytest.runner.TResult]</span>
</span><span id="CallInfo-332"><a href="#CallInfo-332"><span class="linenos">332</span></a><span class="sd">        :param when:</span>
</span><span id="CallInfo-333"><a href="#CallInfo-333"><span class="linenos">333</span></a><span class="sd">            The phase in which the function is called.</span>
</span><span id="CallInfo-334"><a href="#CallInfo-334"><span class="linenos">334</span></a><span class="sd">        :param reraise:</span>
</span><span id="CallInfo-335"><a href="#CallInfo-335"><span class="linenos">335</span></a><span class="sd">            Exception or exceptions that shall propagate if raised by the</span>
</span><span id="CallInfo-336"><a href="#CallInfo-336"><span class="linenos">336</span></a><span class="sd">            function, instead of being wrapped in the CallInfo.</span>
</span><span id="CallInfo-337"><a href="#CallInfo-337"><span class="linenos">337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CallInfo-338"><a href="#CallInfo-338"><span class="linenos">338</span></a>        <span class="n">excinfo</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CallInfo-339"><a href="#CallInfo-339"><span class="linenos">339</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="CallInfo-340"><a href="#CallInfo-340"><span class="linenos">340</span></a>        <span class="n">precise_start</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
</span><span id="CallInfo-341"><a href="#CallInfo-341"><span class="linenos">341</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CallInfo-342"><a href="#CallInfo-342"><span class="linenos">342</span></a>            <span class="n">result</span><span class="p">:</span> <span class="n">TResult</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
</span><span id="CallInfo-343"><a href="#CallInfo-343"><span class="linenos">343</span></a>        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
</span><span id="CallInfo-344"><a href="#CallInfo-344"><span class="linenos">344</span></a>            <span class="n">excinfo</span> <span class="o">=</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_current</span><span class="p">()</span>
</span><span id="CallInfo-345"><a href="#CallInfo-345"><span class="linenos">345</span></a>            <span class="k">if</span> <span class="n">reraise</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">reraise</span><span class="p">):</span>
</span><span id="CallInfo-346"><a href="#CallInfo-346"><span class="linenos">346</span></a>                <span class="k">raise</span>
</span><span id="CallInfo-347"><a href="#CallInfo-347"><span class="linenos">347</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CallInfo-348"><a href="#CallInfo-348"><span class="linenos">348</span></a>        <span class="c1"># use the perf counter</span>
</span><span id="CallInfo-349"><a href="#CallInfo-349"><span class="linenos">349</span></a>        <span class="n">precise_stop</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
</span><span id="CallInfo-350"><a href="#CallInfo-350"><span class="linenos">350</span></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">precise_stop</span> <span class="o">-</span> <span class="n">precise_start</span>
</span><span id="CallInfo-351"><a href="#CallInfo-351"><span class="linenos">351</span></a>        <span class="n">stop</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="CallInfo-352"><a href="#CallInfo-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
</span><span id="CallInfo-353"><a href="#CallInfo-353"><span class="linenos">353</span></a>            <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
</span><span id="CallInfo-354"><a href="#CallInfo-354"><span class="linenos">354</span></a>            <span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span>
</span><span id="CallInfo-355"><a href="#CallInfo-355"><span class="linenos">355</span></a>            <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
</span><span id="CallInfo-356"><a href="#CallInfo-356"><span class="linenos">356</span></a>            <span class="n">when</span><span class="o">=</span><span class="n">when</span><span class="p">,</span>
</span><span id="CallInfo-357"><a href="#CallInfo-357"><span class="linenos">357</span></a>            <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
</span><span id="CallInfo-358"><a href="#CallInfo-358"><span class="linenos">358</span></a>            <span class="n">excinfo</span><span class="o">=</span><span class="n">excinfo</span><span class="p">,</span>
</span><span id="CallInfo-359"><a href="#CallInfo-359"><span class="linenos">359</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="CallInfo-360"><a href="#CallInfo-360"><span class="linenos">360</span></a>        <span class="p">)</span>
</span><span id="CallInfo-361"><a href="#CallInfo-361"><span class="linenos">361</span></a>
</span><span id="CallInfo-362"><a href="#CallInfo-362"><span class="linenos">362</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CallInfo-363"><a href="#CallInfo-363"><span class="linenos">363</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CallInfo-364"><a href="#CallInfo-364"><span class="linenos">364</span></a>            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;CallInfo when=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">when</span><span class="si">!r}</span><span class="s2"> result: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_result</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="CallInfo-365"><a href="#CallInfo-365"><span class="linenos">365</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;CallInfo when=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">when</span><span class="si">!r}</span><span class="s2"> excinfo=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">excinfo</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Result/Exception info of a function invocation.</p>
</div>


                            <div id="CallInfo.__init__" class="classattr">
                                        <input id="CallInfo.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CallInfo</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="o">+</span><span class="n">TResult</span><span class="p">]</span>,</span><span class="param">	<span class="n">excinfo</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]]</span>,</span><span class="param">	<span class="n">start</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">stop</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">duration</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;collect&#39;</span><span class="p">,</span> <span class="s1">&#39;setup&#39;</span><span class="p">,</span> <span class="s1">&#39;call&#39;</span><span class="p">,</span> <span class="s1">&#39;teardown&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="CallInfo.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CallInfo.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CallInfo.__init__-288"><a href="#CallInfo.__init__-288"><span class="linenos">288</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="CallInfo.__init__-289"><a href="#CallInfo.__init__-289"><span class="linenos">289</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CallInfo.__init__-290"><a href="#CallInfo.__init__-290"><span class="linenos">290</span></a>        <span class="n">result</span><span class="p">:</span> <span class="n">TResult</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CallInfo.__init__-291"><a href="#CallInfo.__init__-291"><span class="linenos">291</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CallInfo.__init__-292"><a href="#CallInfo.__init__-292"><span class="linenos">292</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CallInfo.__init__-293"><a href="#CallInfo.__init__-293"><span class="linenos">293</span></a>        <span class="n">stop</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CallInfo.__init__-294"><a href="#CallInfo.__init__-294"><span class="linenos">294</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CallInfo.__init__-295"><a href="#CallInfo.__init__-295"><span class="linenos">295</span></a>        <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;collect&quot;</span><span class="p">,</span> <span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">],</span>
</span><span id="CallInfo.__init__-296"><a href="#CallInfo.__init__-296"><span class="linenos">296</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="CallInfo.__init__-297"><a href="#CallInfo.__init__-297"><span class="linenos">297</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CallInfo.__init__-298"><a href="#CallInfo.__init__-298"><span class="linenos">298</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CallInfo.__init__-299"><a href="#CallInfo.__init__-299"><span class="linenos">299</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="CallInfo.__init__-300"><a href="#CallInfo.__init__-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_result</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="CallInfo.__init__-301"><a href="#CallInfo.__init__-301"><span class="linenos">301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">excinfo</span> <span class="o">=</span> <span class="n">excinfo</span>
</span><span id="CallInfo.__init__-302"><a href="#CallInfo.__init__-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="CallInfo.__init__-303"><a href="#CallInfo.__init__-303"><span class="linenos">303</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span>
</span><span id="CallInfo.__init__-304"><a href="#CallInfo.__init__-304"><span class="linenos">304</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>
</span><span id="CallInfo.__init__-305"><a href="#CallInfo.__init__-305"><span class="linenos">305</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">when</span> <span class="o">=</span> <span class="n">when</span>
</span></pre></div>


    

                            </div>
                            <div id="CallInfo.excinfo" class="classattr">
                                <div class="attr variable">
            <span class="name">excinfo</span><span class="annotation">: Optional[_pytest._code.code.ExceptionInfo[BaseException]]</span>

        
    </div>
    <a class="headerlink" href="#CallInfo.excinfo"></a>
    
    

                            </div>
                            <div id="CallInfo.start" class="classattr">
                                <div class="attr variable">
            <span class="name">start</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#CallInfo.start"></a>
    
    

                            </div>
                            <div id="CallInfo.stop" class="classattr">
                                <div class="attr variable">
            <span class="name">stop</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#CallInfo.stop"></a>
    
    

                            </div>
                            <div id="CallInfo.duration" class="classattr">
                                <div class="attr variable">
            <span class="name">duration</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#CallInfo.duration"></a>
    
    

                            </div>
                            <div id="CallInfo.when" class="classattr">
                                <div class="attr variable">
            <span class="name">when</span><span class="annotation">: Literal[&#39;collect&#39;, &#39;setup&#39;, &#39;call&#39;, &#39;teardown&#39;]</span>

        
    </div>
    <a class="headerlink" href="#CallInfo.when"></a>
    
    

                            </div>
                            <div id="CallInfo.result" class="classattr">
                                        <input id="CallInfo.result-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">result</span><span class="annotation">: +TResult</span>

                <label class="view-source-button" for="CallInfo.result-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CallInfo.result"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CallInfo.result-307"><a href="#CallInfo.result-307"><span class="linenos">307</span></a>    <span class="nd">@property</span>
</span><span id="CallInfo.result-308"><a href="#CallInfo.result-308"><span class="linenos">308</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TResult</span><span class="p">:</span>
</span><span id="CallInfo.result-309"><a href="#CallInfo.result-309"><span class="linenos">309</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The return value of the call, if it didn&#39;t raise.</span>
</span><span id="CallInfo.result-310"><a href="#CallInfo.result-310"><span class="linenos">310</span></a>
</span><span id="CallInfo.result-311"><a href="#CallInfo.result-311"><span class="linenos">311</span></a><span class="sd">        Can only be accessed if excinfo is None.</span>
</span><span id="CallInfo.result-312"><a href="#CallInfo.result-312"><span class="linenos">312</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CallInfo.result-313"><a href="#CallInfo.result-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CallInfo.result-314"><a href="#CallInfo.result-314"><span class="linenos">314</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s2"> has no valid result&quot;</span><span class="p">)</span>
</span><span id="CallInfo.result-315"><a href="#CallInfo.result-315"><span class="linenos">315</span></a>        <span class="c1"># The cast is safe because an exception wasn&#39;t raised, hence</span>
</span><span id="CallInfo.result-316"><a href="#CallInfo.result-316"><span class="linenos">316</span></a>        <span class="c1"># _result has the expected function return type (which may be</span>
</span><span id="CallInfo.result-317"><a href="#CallInfo.result-317"><span class="linenos">317</span></a>        <span class="c1">#  None, that&#39;s why a cast and not an assert).</span>
</span><span id="CallInfo.result-318"><a href="#CallInfo.result-318"><span class="linenos">318</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">TResult</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The return value of the call, if it didn't raise.</p>

<p>Can only be accessed if excinfo is None.</p>
</div>


                            </div>
                            <div id="CallInfo.from_call" class="classattr">
                                        <input id="CallInfo.from_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="o">+</span><span class="n">TResult</span><span class="p">]</span>,</span><span class="param">	<span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;collect&#39;</span><span class="p">,</span> <span class="s1">&#39;setup&#39;</span><span class="p">,</span> <span class="s1">&#39;call&#39;</span><span class="p">,</span> <span class="s1">&#39;teardown&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">reraise</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">CallInfo</span><span class="p">[</span><span class="o">+</span><span class="n">TResult</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="CallInfo.from_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CallInfo.from_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CallInfo.from_call-320"><a href="#CallInfo.from_call-320"><span class="linenos">320</span></a>    <span class="nd">@classmethod</span>
</span><span id="CallInfo.from_call-321"><a href="#CallInfo.from_call-321"><span class="linenos">321</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_call</span><span class="p">(</span>
</span><span id="CallInfo.from_call-322"><a href="#CallInfo.from_call-322"><span class="linenos">322</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="CallInfo.from_call-323"><a href="#CallInfo.from_call-323"><span class="linenos">323</span></a>        <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">TResult</span><span class="p">],</span>
</span><span id="CallInfo.from_call-324"><a href="#CallInfo.from_call-324"><span class="linenos">324</span></a>        <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;collect&quot;</span><span class="p">,</span> <span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">],</span>
</span><span id="CallInfo.from_call-325"><a href="#CallInfo.from_call-325"><span class="linenos">325</span></a>        <span class="n">reraise</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CallInfo.from_call-326"><a href="#CallInfo.from_call-326"><span class="linenos">326</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CallInfo</span><span class="p">[</span><span class="n">TResult</span><span class="p">]:</span>
</span><span id="CallInfo.from_call-327"><a href="#CallInfo.from_call-327"><span class="linenos">327</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call func, wrapping the result in a CallInfo.</span>
</span><span id="CallInfo.from_call-328"><a href="#CallInfo.from_call-328"><span class="linenos">328</span></a>
</span><span id="CallInfo.from_call-329"><a href="#CallInfo.from_call-329"><span class="linenos">329</span></a><span class="sd">        :param func:</span>
</span><span id="CallInfo.from_call-330"><a href="#CallInfo.from_call-330"><span class="linenos">330</span></a><span class="sd">            The function to call. Called without arguments.</span>
</span><span id="CallInfo.from_call-331"><a href="#CallInfo.from_call-331"><span class="linenos">331</span></a><span class="sd">        :type func: Callable[[], _pytest.runner.TResult]</span>
</span><span id="CallInfo.from_call-332"><a href="#CallInfo.from_call-332"><span class="linenos">332</span></a><span class="sd">        :param when:</span>
</span><span id="CallInfo.from_call-333"><a href="#CallInfo.from_call-333"><span class="linenos">333</span></a><span class="sd">            The phase in which the function is called.</span>
</span><span id="CallInfo.from_call-334"><a href="#CallInfo.from_call-334"><span class="linenos">334</span></a><span class="sd">        :param reraise:</span>
</span><span id="CallInfo.from_call-335"><a href="#CallInfo.from_call-335"><span class="linenos">335</span></a><span class="sd">            Exception or exceptions that shall propagate if raised by the</span>
</span><span id="CallInfo.from_call-336"><a href="#CallInfo.from_call-336"><span class="linenos">336</span></a><span class="sd">            function, instead of being wrapped in the CallInfo.</span>
</span><span id="CallInfo.from_call-337"><a href="#CallInfo.from_call-337"><span class="linenos">337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CallInfo.from_call-338"><a href="#CallInfo.from_call-338"><span class="linenos">338</span></a>        <span class="n">excinfo</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CallInfo.from_call-339"><a href="#CallInfo.from_call-339"><span class="linenos">339</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="CallInfo.from_call-340"><a href="#CallInfo.from_call-340"><span class="linenos">340</span></a>        <span class="n">precise_start</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
</span><span id="CallInfo.from_call-341"><a href="#CallInfo.from_call-341"><span class="linenos">341</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CallInfo.from_call-342"><a href="#CallInfo.from_call-342"><span class="linenos">342</span></a>            <span class="n">result</span><span class="p">:</span> <span class="n">TResult</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
</span><span id="CallInfo.from_call-343"><a href="#CallInfo.from_call-343"><span class="linenos">343</span></a>        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
</span><span id="CallInfo.from_call-344"><a href="#CallInfo.from_call-344"><span class="linenos">344</span></a>            <span class="n">excinfo</span> <span class="o">=</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_current</span><span class="p">()</span>
</span><span id="CallInfo.from_call-345"><a href="#CallInfo.from_call-345"><span class="linenos">345</span></a>            <span class="k">if</span> <span class="n">reraise</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">reraise</span><span class="p">):</span>
</span><span id="CallInfo.from_call-346"><a href="#CallInfo.from_call-346"><span class="linenos">346</span></a>                <span class="k">raise</span>
</span><span id="CallInfo.from_call-347"><a href="#CallInfo.from_call-347"><span class="linenos">347</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CallInfo.from_call-348"><a href="#CallInfo.from_call-348"><span class="linenos">348</span></a>        <span class="c1"># use the perf counter</span>
</span><span id="CallInfo.from_call-349"><a href="#CallInfo.from_call-349"><span class="linenos">349</span></a>        <span class="n">precise_stop</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
</span><span id="CallInfo.from_call-350"><a href="#CallInfo.from_call-350"><span class="linenos">350</span></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">precise_stop</span> <span class="o">-</span> <span class="n">precise_start</span>
</span><span id="CallInfo.from_call-351"><a href="#CallInfo.from_call-351"><span class="linenos">351</span></a>        <span class="n">stop</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="CallInfo.from_call-352"><a href="#CallInfo.from_call-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
</span><span id="CallInfo.from_call-353"><a href="#CallInfo.from_call-353"><span class="linenos">353</span></a>            <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
</span><span id="CallInfo.from_call-354"><a href="#CallInfo.from_call-354"><span class="linenos">354</span></a>            <span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span>
</span><span id="CallInfo.from_call-355"><a href="#CallInfo.from_call-355"><span class="linenos">355</span></a>            <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
</span><span id="CallInfo.from_call-356"><a href="#CallInfo.from_call-356"><span class="linenos">356</span></a>            <span class="n">when</span><span class="o">=</span><span class="n">when</span><span class="p">,</span>
</span><span id="CallInfo.from_call-357"><a href="#CallInfo.from_call-357"><span class="linenos">357</span></a>            <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
</span><span id="CallInfo.from_call-358"><a href="#CallInfo.from_call-358"><span class="linenos">358</span></a>            <span class="n">excinfo</span><span class="o">=</span><span class="n">excinfo</span><span class="p">,</span>
</span><span id="CallInfo.from_call-359"><a href="#CallInfo.from_call-359"><span class="linenos">359</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="CallInfo.from_call-360"><a href="#CallInfo.from_call-360"><span class="linenos">360</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Call func, wrapping the result in a CallInfo.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>func</strong>: 
The function to call. Called without arguments.</li>
<li><strong>when</strong>: 
The phase in which the function is called.</li>
<li><strong>reraise</strong>: 
Exception or exceptions that shall propagate if raised by the
function, instead of being wrapped in the CallInfo.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="CaptureFixture">
                            <input id="CaptureFixture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CaptureFixture</span><wbr>(<span class="base">typing.Generic[~AnyStr]</span>):

                <label class="view-source-button" for="CaptureFixture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CaptureFixture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CaptureFixture-915"><a href="#CaptureFixture-915"><span class="linenos">915</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CaptureFixture</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]):</span>
</span><span id="CaptureFixture-916"><a href="#CaptureFixture-916"><span class="linenos">916</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Object returned by the :fixture:`capsys`, :fixture:`capsysbinary`,</span>
</span><span id="CaptureFixture-917"><a href="#CaptureFixture-917"><span class="linenos">917</span></a><span class="sd">    :fixture:`capfd` and :fixture:`capfdbinary` fixtures.&quot;&quot;&quot;</span>
</span><span id="CaptureFixture-918"><a href="#CaptureFixture-918"><span class="linenos">918</span></a>
</span><span id="CaptureFixture-919"><a href="#CaptureFixture-919"><span class="linenos">919</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="CaptureFixture-920"><a href="#CaptureFixture-920"><span class="linenos">920</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CaptureFixture-921"><a href="#CaptureFixture-921"><span class="linenos">921</span></a>        <span class="n">captureclass</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">CaptureBase</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]],</span>
</span><span id="CaptureFixture-922"><a href="#CaptureFixture-922"><span class="linenos">922</span></a>        <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">,</span>
</span><span id="CaptureFixture-923"><a href="#CaptureFixture-923"><span class="linenos">923</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="CaptureFixture-924"><a href="#CaptureFixture-924"><span class="linenos">924</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CaptureFixture-925"><a href="#CaptureFixture-925"><span class="linenos">925</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-926"><a href="#CaptureFixture-926"><span class="linenos">926</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="CaptureFixture-927"><a href="#CaptureFixture-927"><span class="linenos">927</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">CaptureBase</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]]</span> <span class="o">=</span> <span class="n">captureclass</span>
</span><span id="CaptureFixture-928"><a href="#CaptureFixture-928"><span class="linenos">928</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
</span><span id="CaptureFixture-929"><a href="#CaptureFixture-929"><span class="linenos">929</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="p">:</span> <span class="n">MultiCapture</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CaptureFixture-930"><a href="#CaptureFixture-930"><span class="linenos">930</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span><span class="p">:</span> <span class="n">AnyStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture-931"><a href="#CaptureFixture-931"><span class="linenos">931</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span><span class="p">:</span> <span class="n">AnyStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture-932"><a href="#CaptureFixture-932"><span class="linenos">932</span></a>
</span><span id="CaptureFixture-933"><a href="#CaptureFixture-933"><span class="linenos">933</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-934"><a href="#CaptureFixture-934"><span class="linenos">934</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-935"><a href="#CaptureFixture-935"><span class="linenos">935</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="o">=</span> <span class="n">MultiCapture</span><span class="p">(</span>
</span><span id="CaptureFixture-936"><a href="#CaptureFixture-936"><span class="linenos">936</span></a>                <span class="n">in_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="CaptureFixture-937"><a href="#CaptureFixture-937"><span class="linenos">937</span></a>                <span class="n">out</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
</span><span id="CaptureFixture-938"><a href="#CaptureFixture-938"><span class="linenos">938</span></a>                <span class="n">err</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span id="CaptureFixture-939"><a href="#CaptureFixture-939"><span class="linenos">939</span></a>            <span class="p">)</span>
</span><span id="CaptureFixture-940"><a href="#CaptureFixture-940"><span class="linenos">940</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">start_capturing</span><span class="p">()</span>
</span><span id="CaptureFixture-941"><a href="#CaptureFixture-941"><span class="linenos">941</span></a>
</span><span id="CaptureFixture-942"><a href="#CaptureFixture-942"><span class="linenos">942</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-943"><a href="#CaptureFixture-943"><span class="linenos">943</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-944"><a href="#CaptureFixture-944"><span class="linenos">944</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">pop_outerr_to_orig</span><span class="p">()</span>
</span><span id="CaptureFixture-945"><a href="#CaptureFixture-945"><span class="linenos">945</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span> <span class="o">+=</span> <span class="n">out</span>
</span><span id="CaptureFixture-946"><a href="#CaptureFixture-946"><span class="linenos">946</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span> <span class="o">+=</span> <span class="n">err</span>
</span><span id="CaptureFixture-947"><a href="#CaptureFixture-947"><span class="linenos">947</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">stop_capturing</span><span class="p">()</span>
</span><span id="CaptureFixture-948"><a href="#CaptureFixture-948"><span class="linenos">948</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CaptureFixture-949"><a href="#CaptureFixture-949"><span class="linenos">949</span></a>
</span><span id="CaptureFixture-950"><a href="#CaptureFixture-950"><span class="linenos">950</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">readouterr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CaptureResult</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]:</span>
</span><span id="CaptureFixture-951"><a href="#CaptureFixture-951"><span class="linenos">951</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Read and return the captured output so far, resetting the internal</span>
</span><span id="CaptureFixture-952"><a href="#CaptureFixture-952"><span class="linenos">952</span></a><span class="sd">        buffer.</span>
</span><span id="CaptureFixture-953"><a href="#CaptureFixture-953"><span class="linenos">953</span></a>
</span><span id="CaptureFixture-954"><a href="#CaptureFixture-954"><span class="linenos">954</span></a><span class="sd">        :returns:</span>
</span><span id="CaptureFixture-955"><a href="#CaptureFixture-955"><span class="linenos">955</span></a><span class="sd">            The captured content as a namedtuple with ``out`` and ``err``</span>
</span><span id="CaptureFixture-956"><a href="#CaptureFixture-956"><span class="linenos">956</span></a><span class="sd">            string attributes.</span>
</span><span id="CaptureFixture-957"><a href="#CaptureFixture-957"><span class="linenos">957</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CaptureFixture-958"><a href="#CaptureFixture-958"><span class="linenos">958</span></a>        <span class="n">captured_out</span><span class="p">,</span> <span class="n">captured_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span>
</span><span id="CaptureFixture-959"><a href="#CaptureFixture-959"><span class="linenos">959</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-960"><a href="#CaptureFixture-960"><span class="linenos">960</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
</span><span id="CaptureFixture-961"><a href="#CaptureFixture-961"><span class="linenos">961</span></a>            <span class="n">captured_out</span> <span class="o">+=</span> <span class="n">out</span>
</span><span id="CaptureFixture-962"><a href="#CaptureFixture-962"><span class="linenos">962</span></a>            <span class="n">captured_err</span> <span class="o">+=</span> <span class="n">err</span>
</span><span id="CaptureFixture-963"><a href="#CaptureFixture-963"><span class="linenos">963</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture-964"><a href="#CaptureFixture-964"><span class="linenos">964</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture-965"><a href="#CaptureFixture-965"><span class="linenos">965</span></a>        <span class="k">return</span> <span class="n">CaptureResult</span><span class="p">(</span><span class="n">captured_out</span><span class="p">,</span> <span class="n">captured_err</span><span class="p">)</span>
</span><span id="CaptureFixture-966"><a href="#CaptureFixture-966"><span class="linenos">966</span></a>
</span><span id="CaptureFixture-967"><a href="#CaptureFixture-967"><span class="linenos">967</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_suspend</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-968"><a href="#CaptureFixture-968"><span class="linenos">968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Suspend this fixture&#39;s own capturing temporarily.&quot;&quot;&quot;</span>
</span><span id="CaptureFixture-969"><a href="#CaptureFixture-969"><span class="linenos">969</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-970"><a href="#CaptureFixture-970"><span class="linenos">970</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">suspend_capturing</span><span class="p">()</span>
</span><span id="CaptureFixture-971"><a href="#CaptureFixture-971"><span class="linenos">971</span></a>
</span><span id="CaptureFixture-972"><a href="#CaptureFixture-972"><span class="linenos">972</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_resume</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-973"><a href="#CaptureFixture-973"><span class="linenos">973</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Resume this fixture&#39;s own capturing temporarily.&quot;&quot;&quot;</span>
</span><span id="CaptureFixture-974"><a href="#CaptureFixture-974"><span class="linenos">974</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-975"><a href="#CaptureFixture-975"><span class="linenos">975</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">resume_capturing</span><span class="p">()</span>
</span><span id="CaptureFixture-976"><a href="#CaptureFixture-976"><span class="linenos">976</span></a>
</span><span id="CaptureFixture-977"><a href="#CaptureFixture-977"><span class="linenos">977</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_is_started</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CaptureFixture-978"><a href="#CaptureFixture-978"><span class="linenos">978</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether actively capturing -- not disabled or closed.&quot;&quot;&quot;</span>
</span><span id="CaptureFixture-979"><a href="#CaptureFixture-979"><span class="linenos">979</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture-980"><a href="#CaptureFixture-980"><span class="linenos">980</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">is_started</span><span class="p">()</span>
</span><span id="CaptureFixture-981"><a href="#CaptureFixture-981"><span class="linenos">981</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="CaptureFixture-982"><a href="#CaptureFixture-982"><span class="linenos">982</span></a>
</span><span id="CaptureFixture-983"><a href="#CaptureFixture-983"><span class="linenos">983</span></a>    <span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
</span><span id="CaptureFixture-984"><a href="#CaptureFixture-984"><span class="linenos">984</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">disabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="CaptureFixture-985"><a href="#CaptureFixture-985"><span class="linenos">985</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporarily disable capturing while inside the ``with`` block.&quot;&quot;&quot;</span>
</span><span id="CaptureFixture-986"><a href="#CaptureFixture-986"><span class="linenos">986</span></a>        <span class="n">capmanager</span><span class="p">:</span> <span class="n">CaptureManager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">getplugin</span><span class="p">(</span>
</span><span id="CaptureFixture-987"><a href="#CaptureFixture-987"><span class="linenos">987</span></a>            <span class="s2">&quot;capturemanager&quot;</span>
</span><span id="CaptureFixture-988"><a href="#CaptureFixture-988"><span class="linenos">988</span></a>        <span class="p">)</span>
</span><span id="CaptureFixture-989"><a href="#CaptureFixture-989"><span class="linenos">989</span></a>        <span class="k">with</span> <span class="n">capmanager</span><span class="o">.</span><span class="n">global_and_fixture_disabled</span><span class="p">():</span>
</span><span id="CaptureFixture-990"><a href="#CaptureFixture-990"><span class="linenos">990</span></a>            <span class="k">yield</span>
</span></pre></div>


            <div class="docstring"><p>Object returned by the :fixture:<code>capsys</code>, :fixture:<code>capsysbinary</code>,
:fixture:<code>capfd</code> and :fixture:<code>capfdbinary</code> fixtures.</p>
</div>


                            <div id="CaptureFixture.__init__" class="classattr">
                                        <input id="CaptureFixture.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CaptureFixture</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">captureclass</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">capture</span><span class="o">.</span><span class="n">CaptureBase</span><span class="p">[</span><span class="o">~</span><span class="n">AnyStr</span><span class="p">]]</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">SubRequest</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="CaptureFixture.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CaptureFixture.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CaptureFixture.__init__-919"><a href="#CaptureFixture.__init__-919"><span class="linenos">919</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="CaptureFixture.__init__-920"><a href="#CaptureFixture.__init__-920"><span class="linenos">920</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CaptureFixture.__init__-921"><a href="#CaptureFixture.__init__-921"><span class="linenos">921</span></a>        <span class="n">captureclass</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">CaptureBase</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]],</span>
</span><span id="CaptureFixture.__init__-922"><a href="#CaptureFixture.__init__-922"><span class="linenos">922</span></a>        <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">,</span>
</span><span id="CaptureFixture.__init__-923"><a href="#CaptureFixture.__init__-923"><span class="linenos">923</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="CaptureFixture.__init__-924"><a href="#CaptureFixture.__init__-924"><span class="linenos">924</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CaptureFixture.__init__-925"><a href="#CaptureFixture.__init__-925"><span class="linenos">925</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture.__init__-926"><a href="#CaptureFixture.__init__-926"><span class="linenos">926</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="CaptureFixture.__init__-927"><a href="#CaptureFixture.__init__-927"><span class="linenos">927</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">CaptureBase</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]]</span> <span class="o">=</span> <span class="n">captureclass</span>
</span><span id="CaptureFixture.__init__-928"><a href="#CaptureFixture.__init__-928"><span class="linenos">928</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
</span><span id="CaptureFixture.__init__-929"><a href="#CaptureFixture.__init__-929"><span class="linenos">929</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="p">:</span> <span class="n">MultiCapture</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CaptureFixture.__init__-930"><a href="#CaptureFixture.__init__-930"><span class="linenos">930</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span><span class="p">:</span> <span class="n">AnyStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture.__init__-931"><a href="#CaptureFixture.__init__-931"><span class="linenos">931</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span><span class="p">:</span> <span class="n">AnyStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span></pre></div>


    

                            </div>
                            <div id="CaptureFixture.captureclass" class="classattr">
                                <div class="attr variable">
            <span class="name">captureclass</span><span class="annotation">: type[_pytest.capture.CaptureBase[~AnyStr]]</span>

        
    </div>
    <a class="headerlink" href="#CaptureFixture.captureclass"></a>
    
    

                            </div>
                            <div id="CaptureFixture.request" class="classattr">
                                <div class="attr variable">
            <span class="name">request</span>

        
    </div>
    <a class="headerlink" href="#CaptureFixture.request"></a>
    
    

                            </div>
                            <div id="CaptureFixture.close" class="classattr">
                                        <input id="CaptureFixture.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CaptureFixture.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CaptureFixture.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CaptureFixture.close-942"><a href="#CaptureFixture.close-942"><span class="linenos">942</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture.close-943"><a href="#CaptureFixture.close-943"><span class="linenos">943</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture.close-944"><a href="#CaptureFixture.close-944"><span class="linenos">944</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">pop_outerr_to_orig</span><span class="p">()</span>
</span><span id="CaptureFixture.close-945"><a href="#CaptureFixture.close-945"><span class="linenos">945</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span> <span class="o">+=</span> <span class="n">out</span>
</span><span id="CaptureFixture.close-946"><a href="#CaptureFixture.close-946"><span class="linenos">946</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span> <span class="o">+=</span> <span class="n">err</span>
</span><span id="CaptureFixture.close-947"><a href="#CaptureFixture.close-947"><span class="linenos">947</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">stop_capturing</span><span class="p">()</span>
</span><span id="CaptureFixture.close-948"><a href="#CaptureFixture.close-948"><span class="linenos">948</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


    

                            </div>
                            <div id="CaptureFixture.readouterr" class="classattr">
                                        <input id="CaptureFixture.readouterr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">readouterr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">capture</span><span class="o">.</span><span class="n">CaptureResult</span><span class="p">[</span><span class="o">~</span><span class="n">AnyStr</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="CaptureFixture.readouterr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CaptureFixture.readouterr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CaptureFixture.readouterr-950"><a href="#CaptureFixture.readouterr-950"><span class="linenos">950</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">readouterr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CaptureResult</span><span class="p">[</span><span class="n">AnyStr</span><span class="p">]:</span>
</span><span id="CaptureFixture.readouterr-951"><a href="#CaptureFixture.readouterr-951"><span class="linenos">951</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Read and return the captured output so far, resetting the internal</span>
</span><span id="CaptureFixture.readouterr-952"><a href="#CaptureFixture.readouterr-952"><span class="linenos">952</span></a><span class="sd">        buffer.</span>
</span><span id="CaptureFixture.readouterr-953"><a href="#CaptureFixture.readouterr-953"><span class="linenos">953</span></a>
</span><span id="CaptureFixture.readouterr-954"><a href="#CaptureFixture.readouterr-954"><span class="linenos">954</span></a><span class="sd">        :returns:</span>
</span><span id="CaptureFixture.readouterr-955"><a href="#CaptureFixture.readouterr-955"><span class="linenos">955</span></a><span class="sd">            The captured content as a namedtuple with ``out`` and ``err``</span>
</span><span id="CaptureFixture.readouterr-956"><a href="#CaptureFixture.readouterr-956"><span class="linenos">956</span></a><span class="sd">            string attributes.</span>
</span><span id="CaptureFixture.readouterr-957"><a href="#CaptureFixture.readouterr-957"><span class="linenos">957</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CaptureFixture.readouterr-958"><a href="#CaptureFixture.readouterr-958"><span class="linenos">958</span></a>        <span class="n">captured_out</span><span class="p">,</span> <span class="n">captured_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span>
</span><span id="CaptureFixture.readouterr-959"><a href="#CaptureFixture.readouterr-959"><span class="linenos">959</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CaptureFixture.readouterr-960"><a href="#CaptureFixture.readouterr-960"><span class="linenos">960</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capture</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
</span><span id="CaptureFixture.readouterr-961"><a href="#CaptureFixture.readouterr-961"><span class="linenos">961</span></a>            <span class="n">captured_out</span> <span class="o">+=</span> <span class="n">out</span>
</span><span id="CaptureFixture.readouterr-962"><a href="#CaptureFixture.readouterr-962"><span class="linenos">962</span></a>            <span class="n">captured_err</span> <span class="o">+=</span> <span class="n">err</span>
</span><span id="CaptureFixture.readouterr-963"><a href="#CaptureFixture.readouterr-963"><span class="linenos">963</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture.readouterr-964"><a href="#CaptureFixture.readouterr-964"><span class="linenos">964</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_captured_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">captureclass</span><span class="o">.</span><span class="n">EMPTY_BUFFER</span>
</span><span id="CaptureFixture.readouterr-965"><a href="#CaptureFixture.readouterr-965"><span class="linenos">965</span></a>        <span class="k">return</span> <span class="n">CaptureResult</span><span class="p">(</span><span class="n">captured_out</span><span class="p">,</span> <span class="n">captured_err</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Read and return the captured output so far, resetting the internal
buffer.</p>

<p>:returns:
    The captured content as a namedtuple with <code>out</code> and <code>err</code>
    string attributes.</p>
</div>


                            </div>
                            <div id="CaptureFixture.disabled" class="classattr">
                                        <input id="CaptureFixture.disabled-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-contextlib.contextmanager">@contextlib.contextmanager</div>

        <span class="def">def</span>
        <span class="name">disabled</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Generator</span><span class="p">[</span><span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="CaptureFixture.disabled-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CaptureFixture.disabled"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CaptureFixture.disabled-983"><a href="#CaptureFixture.disabled-983"><span class="linenos">983</span></a>    <span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
</span><span id="CaptureFixture.disabled-984"><a href="#CaptureFixture.disabled-984"><span class="linenos">984</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">disabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="CaptureFixture.disabled-985"><a href="#CaptureFixture.disabled-985"><span class="linenos">985</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporarily disable capturing while inside the ``with`` block.&quot;&quot;&quot;</span>
</span><span id="CaptureFixture.disabled-986"><a href="#CaptureFixture.disabled-986"><span class="linenos">986</span></a>        <span class="n">capmanager</span><span class="p">:</span> <span class="n">CaptureManager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">getplugin</span><span class="p">(</span>
</span><span id="CaptureFixture.disabled-987"><a href="#CaptureFixture.disabled-987"><span class="linenos">987</span></a>            <span class="s2">&quot;capturemanager&quot;</span>
</span><span id="CaptureFixture.disabled-988"><a href="#CaptureFixture.disabled-988"><span class="linenos">988</span></a>        <span class="p">)</span>
</span><span id="CaptureFixture.disabled-989"><a href="#CaptureFixture.disabled-989"><span class="linenos">989</span></a>        <span class="k">with</span> <span class="n">capmanager</span><span class="o">.</span><span class="n">global_and_fixture_disabled</span><span class="p">():</span>
</span><span id="CaptureFixture.disabled-990"><a href="#CaptureFixture.disabled-990"><span class="linenos">990</span></a>            <span class="k">yield</span>
</span></pre></div>


            <div class="docstring"><p>Temporarily disable capturing while inside the <code>with</code> block.</p>
</div>


                            </div>
                </section>
                <section id="Class">
                            <input id="Class-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Class</span><wbr>(<span class="base">_pytest.python.PyCollector</span>):

                <label class="view-source-button" for="Class-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Class"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Class-732"><a href="#Class-732"><span class="linenos">732</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Class</span><span class="p">(</span><span class="n">PyCollector</span><span class="p">):</span>
</span><span id="Class-733"><a href="#Class-733"><span class="linenos">733</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Collector for test methods (and nested classes) in a Python class.&quot;&quot;&quot;</span>
</span><span id="Class-734"><a href="#Class-734"><span class="linenos">734</span></a>
</span><span id="Class-735"><a href="#Class-735"><span class="linenos">735</span></a>    <span class="nd">@classmethod</span>
</span><span id="Class-736"><a href="#Class-736"><span class="linenos">736</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Class-737"><a href="#Class-737"><span class="linenos">737</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public constructor.&quot;&quot;&quot;</span>
</span><span id="Class-738"><a href="#Class-738"><span class="linenos">738</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Class-739"><a href="#Class-739"><span class="linenos">739</span></a>
</span><span id="Class-740"><a href="#Class-740"><span class="linenos">740</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">newinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Class-741"><a href="#Class-741"><span class="linenos">741</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">()</span>
</span><span id="Class-742"><a href="#Class-742"><span class="linenos">742</span></a>
</span><span id="Class-743"><a href="#Class-743"><span class="linenos">743</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Class-744"><a href="#Class-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__test__&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="Class-745"><a href="#Class-745"><span class="linenos">745</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Class-746"><a href="#Class-746"><span class="linenos">746</span></a>        <span class="k">if</span> <span class="n">hasinit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Class-747"><a href="#Class-747"><span class="linenos">747</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Class-748"><a href="#Class-748"><span class="linenos">748</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Class-749"><a href="#Class-749"><span class="linenos">749</span></a>                <span class="n">PytestCollectionWarning</span><span class="p">(</span>
</span><span id="Class-750"><a href="#Class-750"><span class="linenos">750</span></a>                    <span class="sa">f</span><span class="s2">&quot;cannot collect test class </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2"> because it has a &quot;</span>
</span><span id="Class-751"><a href="#Class-751"><span class="linenos">751</span></a>                    <span class="sa">f</span><span class="s2">&quot;__init__ constructor (from: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">nodeid</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Class-752"><a href="#Class-752"><span class="linenos">752</span></a>                <span class="p">)</span>
</span><span id="Class-753"><a href="#Class-753"><span class="linenos">753</span></a>            <span class="p">)</span>
</span><span id="Class-754"><a href="#Class-754"><span class="linenos">754</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Class-755"><a href="#Class-755"><span class="linenos">755</span></a>        <span class="k">elif</span> <span class="n">hasnew</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Class-756"><a href="#Class-756"><span class="linenos">756</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Class-757"><a href="#Class-757"><span class="linenos">757</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Class-758"><a href="#Class-758"><span class="linenos">758</span></a>                <span class="n">PytestCollectionWarning</span><span class="p">(</span>
</span><span id="Class-759"><a href="#Class-759"><span class="linenos">759</span></a>                    <span class="sa">f</span><span class="s2">&quot;cannot collect test class </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2"> because it has a &quot;</span>
</span><span id="Class-760"><a href="#Class-760"><span class="linenos">760</span></a>                    <span class="sa">f</span><span class="s2">&quot;__new__ constructor (from: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">nodeid</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Class-761"><a href="#Class-761"><span class="linenos">761</span></a>                <span class="p">)</span>
</span><span id="Class-762"><a href="#Class-762"><span class="linenos">762</span></a>            <span class="p">)</span>
</span><span id="Class-763"><a href="#Class-763"><span class="linenos">763</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Class-764"><a href="#Class-764"><span class="linenos">764</span></a>
</span><span id="Class-765"><a href="#Class-765"><span class="linenos">765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_class_fixture</span><span class="p">()</span>
</span><span id="Class-766"><a href="#Class-766"><span class="linenos">766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_method_fixture</span><span class="p">()</span>
</span><span id="Class-767"><a href="#Class-767"><span class="linenos">767</span></a>
</span><span id="Class-768"><a href="#Class-768"><span class="linenos">768</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">parsefactories</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newinstance</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="p">)</span>
</span><span id="Class-769"><a href="#Class-769"><span class="linenos">769</span></a>
</span><span id="Class-770"><a href="#Class-770"><span class="linenos">770</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span><span id="Class-771"><a href="#Class-771"><span class="linenos">771</span></a>
</span><span id="Class-772"><a href="#Class-772"><span class="linenos">772</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_register_setup_class_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-773"><a href="#Class-773"><span class="linenos">773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an autouse, class scoped fixture into the collected class object</span>
</span><span id="Class-774"><a href="#Class-774"><span class="linenos">774</span></a><span class="sd">        that invokes setup_class/teardown_class if either or both are available.</span>
</span><span id="Class-775"><a href="#Class-775"><span class="linenos">775</span></a>
</span><span id="Class-776"><a href="#Class-776"><span class="linenos">776</span></a><span class="sd">        Using a fixture to invoke this methods ensures we play nicely and unsurprisingly with</span>
</span><span id="Class-777"><a href="#Class-777"><span class="linenos">777</span></a><span class="sd">        other fixtures (#517).</span>
</span><span id="Class-778"><a href="#Class-778"><span class="linenos">778</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Class-779"><a href="#Class-779"><span class="linenos">779</span></a>        <span class="n">setup_class</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;setup_class&quot;</span><span class="p">,))</span>
</span><span id="Class-780"><a href="#Class-780"><span class="linenos">780</span></a>        <span class="n">teardown_class</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;teardown_class&quot;</span><span class="p">,))</span>
</span><span id="Class-781"><a href="#Class-781"><span class="linenos">781</span></a>        <span class="k">if</span> <span class="n">setup_class</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">teardown_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-782"><a href="#Class-782"><span class="linenos">782</span></a>            <span class="k">return</span>
</span><span id="Class-783"><a href="#Class-783"><span class="linenos">783</span></a>
</span><span id="Class-784"><a href="#Class-784"><span class="linenos">784</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">xunit_setup_class_fixture</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="Class-785"><a href="#Class-785"><span class="linenos">785</span></a>            <span class="bp">cls</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">cls</span>
</span><span id="Class-786"><a href="#Class-786"><span class="linenos">786</span></a>            <span class="k">if</span> <span class="n">setup_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-787"><a href="#Class-787"><span class="linenos">787</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="n">getimfunc</span><span class="p">(</span><span class="n">setup_class</span><span class="p">)</span>
</span><span id="Class-788"><a href="#Class-788"><span class="linenos">788</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>
</span><span id="Class-789"><a href="#Class-789"><span class="linenos">789</span></a>            <span class="k">yield</span>
</span><span id="Class-790"><a href="#Class-790"><span class="linenos">790</span></a>            <span class="k">if</span> <span class="n">teardown_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-791"><a href="#Class-791"><span class="linenos">791</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="n">getimfunc</span><span class="p">(</span><span class="n">teardown_class</span><span class="p">)</span>
</span><span id="Class-792"><a href="#Class-792"><span class="linenos">792</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>
</span><span id="Class-793"><a href="#Class-793"><span class="linenos">793</span></a>
</span><span id="Class-794"><a href="#Class-794"><span class="linenos">794</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">_register_fixture</span><span class="p">(</span>
</span><span id="Class-795"><a href="#Class-795"><span class="linenos">795</span></a>            <span class="c1"># Use a unique name to speed up lookup.</span>
</span><span id="Class-796"><a href="#Class-796"><span class="linenos">796</span></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;_xunit_setup_class_fixture_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Class-797"><a href="#Class-797"><span class="linenos">797</span></a>            <span class="n">func</span><span class="o">=</span><span class="n">xunit_setup_class_fixture</span><span class="p">,</span>
</span><span id="Class-798"><a href="#Class-798"><span class="linenos">798</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Class-799"><a href="#Class-799"><span class="linenos">799</span></a>            <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">,</span>
</span><span id="Class-800"><a href="#Class-800"><span class="linenos">800</span></a>            <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Class-801"><a href="#Class-801"><span class="linenos">801</span></a>        <span class="p">)</span>
</span><span id="Class-802"><a href="#Class-802"><span class="linenos">802</span></a>
</span><span id="Class-803"><a href="#Class-803"><span class="linenos">803</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_register_setup_method_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-804"><a href="#Class-804"><span class="linenos">804</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an autouse, function scoped fixture into the collected class object</span>
</span><span id="Class-805"><a href="#Class-805"><span class="linenos">805</span></a><span class="sd">        that invokes setup_method/teardown_method if either or both are available.</span>
</span><span id="Class-806"><a href="#Class-806"><span class="linenos">806</span></a>
</span><span id="Class-807"><a href="#Class-807"><span class="linenos">807</span></a><span class="sd">        Using a fixture to invoke these methods ensures we play nicely and unsurprisingly with</span>
</span><span id="Class-808"><a href="#Class-808"><span class="linenos">808</span></a><span class="sd">        other fixtures (#517).</span>
</span><span id="Class-809"><a href="#Class-809"><span class="linenos">809</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Class-810"><a href="#Class-810"><span class="linenos">810</span></a>        <span class="n">setup_name</span> <span class="o">=</span> <span class="s2">&quot;setup_method&quot;</span>
</span><span id="Class-811"><a href="#Class-811"><span class="linenos">811</span></a>        <span class="n">setup_method</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">setup_name</span><span class="p">,))</span>
</span><span id="Class-812"><a href="#Class-812"><span class="linenos">812</span></a>        <span class="n">teardown_name</span> <span class="o">=</span> <span class="s2">&quot;teardown_method&quot;</span>
</span><span id="Class-813"><a href="#Class-813"><span class="linenos">813</span></a>        <span class="n">teardown_method</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">teardown_name</span><span class="p">,))</span>
</span><span id="Class-814"><a href="#Class-814"><span class="linenos">814</span></a>        <span class="k">if</span> <span class="n">setup_method</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">teardown_method</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-815"><a href="#Class-815"><span class="linenos">815</span></a>            <span class="k">return</span>
</span><span id="Class-816"><a href="#Class-816"><span class="linenos">816</span></a>
</span><span id="Class-817"><a href="#Class-817"><span class="linenos">817</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">xunit_setup_method_fixture</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="Class-818"><a href="#Class-818"><span class="linenos">818</span></a>            <span class="n">instance</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">instance</span>
</span><span id="Class-819"><a href="#Class-819"><span class="linenos">819</span></a>            <span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">function</span>
</span><span id="Class-820"><a href="#Class-820"><span class="linenos">820</span></a>            <span class="k">if</span> <span class="n">setup_method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-821"><a href="#Class-821"><span class="linenos">821</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">setup_name</span><span class="p">)</span>
</span><span id="Class-822"><a href="#Class-822"><span class="linenos">822</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
</span><span id="Class-823"><a href="#Class-823"><span class="linenos">823</span></a>            <span class="k">yield</span>
</span><span id="Class-824"><a href="#Class-824"><span class="linenos">824</span></a>            <span class="k">if</span> <span class="n">teardown_method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Class-825"><a href="#Class-825"><span class="linenos">825</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">teardown_name</span><span class="p">)</span>
</span><span id="Class-826"><a href="#Class-826"><span class="linenos">826</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
</span><span id="Class-827"><a href="#Class-827"><span class="linenos">827</span></a>
</span><span id="Class-828"><a href="#Class-828"><span class="linenos">828</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">_register_fixture</span><span class="p">(</span>
</span><span id="Class-829"><a href="#Class-829"><span class="linenos">829</span></a>            <span class="c1"># Use a unique name to speed up lookup.</span>
</span><span id="Class-830"><a href="#Class-830"><span class="linenos">830</span></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;_xunit_setup_method_fixture_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Class-831"><a href="#Class-831"><span class="linenos">831</span></a>            <span class="n">func</span><span class="o">=</span><span class="n">xunit_setup_method_fixture</span><span class="p">,</span>
</span><span id="Class-832"><a href="#Class-832"><span class="linenos">832</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Class-833"><a href="#Class-833"><span class="linenos">833</span></a>            <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="Class-834"><a href="#Class-834"><span class="linenos">834</span></a>            <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Class-835"><a href="#Class-835"><span class="linenos">835</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Collector for test methods (and nested classes) in a Python class.</p>
</div>


                            <div id="Class.from_parent" class="classattr">
                                        <input id="Class.from_parent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_parent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">parent</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">obj</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kw</span></span><span class="return-annotation">) -> <span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Class.from_parent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Class.from_parent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Class.from_parent-735"><a href="#Class.from_parent-735"><span class="linenos">735</span></a>    <span class="nd">@classmethod</span>
</span><span id="Class.from_parent-736"><a href="#Class.from_parent-736"><span class="linenos">736</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Class.from_parent-737"><a href="#Class.from_parent-737"><span class="linenos">737</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public constructor.&quot;&quot;&quot;</span>
</span><span id="Class.from_parent-738"><a href="#Class.from_parent-738"><span class="linenos">738</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The public constructor.</p>
</div>


                            </div>
                            <div id="Class.newinstance" class="classattr">
                                        <input id="Class.newinstance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">newinstance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Class.newinstance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Class.newinstance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Class.newinstance-740"><a href="#Class.newinstance-740"><span class="linenos">740</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">newinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Class.newinstance-741"><a href="#Class.newinstance-741"><span class="linenos">741</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Class.collect" class="classattr">
                                        <input id="Class.collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Class.collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Class.collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Class.collect-743"><a href="#Class.collect-743"><span class="linenos">743</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Class.collect-744"><a href="#Class.collect-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__test__&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="Class.collect-745"><a href="#Class.collect-745"><span class="linenos">745</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Class.collect-746"><a href="#Class.collect-746"><span class="linenos">746</span></a>        <span class="k">if</span> <span class="n">hasinit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Class.collect-747"><a href="#Class.collect-747"><span class="linenos">747</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Class.collect-748"><a href="#Class.collect-748"><span class="linenos">748</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Class.collect-749"><a href="#Class.collect-749"><span class="linenos">749</span></a>                <span class="n">PytestCollectionWarning</span><span class="p">(</span>
</span><span id="Class.collect-750"><a href="#Class.collect-750"><span class="linenos">750</span></a>                    <span class="sa">f</span><span class="s2">&quot;cannot collect test class </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2"> because it has a &quot;</span>
</span><span id="Class.collect-751"><a href="#Class.collect-751"><span class="linenos">751</span></a>                    <span class="sa">f</span><span class="s2">&quot;__init__ constructor (from: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">nodeid</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Class.collect-752"><a href="#Class.collect-752"><span class="linenos">752</span></a>                <span class="p">)</span>
</span><span id="Class.collect-753"><a href="#Class.collect-753"><span class="linenos">753</span></a>            <span class="p">)</span>
</span><span id="Class.collect-754"><a href="#Class.collect-754"><span class="linenos">754</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Class.collect-755"><a href="#Class.collect-755"><span class="linenos">755</span></a>        <span class="k">elif</span> <span class="n">hasnew</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Class.collect-756"><a href="#Class.collect-756"><span class="linenos">756</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Class.collect-757"><a href="#Class.collect-757"><span class="linenos">757</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Class.collect-758"><a href="#Class.collect-758"><span class="linenos">758</span></a>                <span class="n">PytestCollectionWarning</span><span class="p">(</span>
</span><span id="Class.collect-759"><a href="#Class.collect-759"><span class="linenos">759</span></a>                    <span class="sa">f</span><span class="s2">&quot;cannot collect test class </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2"> because it has a &quot;</span>
</span><span id="Class.collect-760"><a href="#Class.collect-760"><span class="linenos">760</span></a>                    <span class="sa">f</span><span class="s2">&quot;__new__ constructor (from: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">nodeid</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Class.collect-761"><a href="#Class.collect-761"><span class="linenos">761</span></a>                <span class="p">)</span>
</span><span id="Class.collect-762"><a href="#Class.collect-762"><span class="linenos">762</span></a>            <span class="p">)</span>
</span><span id="Class.collect-763"><a href="#Class.collect-763"><span class="linenos">763</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Class.collect-764"><a href="#Class.collect-764"><span class="linenos">764</span></a>
</span><span id="Class.collect-765"><a href="#Class.collect-765"><span class="linenos">765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_class_fixture</span><span class="p">()</span>
</span><span id="Class.collect-766"><a href="#Class.collect-766"><span class="linenos">766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_method_fixture</span><span class="p">()</span>
</span><span id="Class.collect-767"><a href="#Class.collect-767"><span class="linenos">767</span></a>
</span><span id="Class.collect-768"><a href="#Class.collect-768"><span class="linenos">768</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">parsefactories</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newinstance</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="p">)</span>
</span><span id="Class.collect-769"><a href="#Class.collect-769"><span class="linenos">769</span></a>
</span><span id="Class.collect-770"><a href="#Class.collect-770"><span class="linenos">770</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Collect children (items and collectors) for this collector.</p>
</div>


                            </div>
                </section>
                <section id="cmdline">
                            <input id="cmdline-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">cmdline</span>:

                <label class="view-source-button" for="cmdline-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cmdline"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cmdline-213"><a href="#cmdline-213"><span class="linenos">213</span></a><span class="k">class</span><span class="w"> </span><span class="nc">cmdline</span><span class="p">:</span>  <span class="c1"># compatibility namespace</span>
</span><span id="cmdline-214"><a href="#cmdline-214"><span class="linenos">214</span></a>    <span class="n">main</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</span></pre></div>


    

                            <div id="cmdline.main" class="classattr">
                                        <input id="cmdline.main-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">main</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">plugins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">int</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">ExitCode</span>:</span></span>

                <label class="view-source-button" for="cmdline.main-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cmdline.main"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cmdline.main-140"><a href="#cmdline.main-140"><span class="linenos">140</span></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span>
</span><span id="cmdline.main-141"><a href="#cmdline.main-141"><span class="linenos">141</span></a>    <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="cmdline.main-142"><a href="#cmdline.main-142"><span class="linenos">142</span></a>    <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="cmdline.main-143"><a href="#cmdline.main-143"><span class="linenos">143</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span><span class="p">:</span>
</span><span id="cmdline.main-144"><a href="#cmdline.main-144"><span class="linenos">144</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Perform an in-process test run.</span>
</span><span id="cmdline.main-145"><a href="#cmdline.main-145"><span class="linenos">145</span></a>
</span><span id="cmdline.main-146"><a href="#cmdline.main-146"><span class="linenos">146</span></a><span class="sd">    :param args:</span>
</span><span id="cmdline.main-147"><a href="#cmdline.main-147"><span class="linenos">147</span></a><span class="sd">        List of command line arguments. If `None` or not given, defaults to reading</span>
</span><span id="cmdline.main-148"><a href="#cmdline.main-148"><span class="linenos">148</span></a><span class="sd">        arguments directly from the process command line (:data:`sys.argv`).</span>
</span><span id="cmdline.main-149"><a href="#cmdline.main-149"><span class="linenos">149</span></a><span class="sd">    :param plugins: List of plugin objects to be auto-registered during initialization.</span>
</span><span id="cmdline.main-150"><a href="#cmdline.main-150"><span class="linenos">150</span></a>
</span><span id="cmdline.main-151"><a href="#cmdline.main-151"><span class="linenos">151</span></a><span class="sd">    :returns: An exit code.</span>
</span><span id="cmdline.main-152"><a href="#cmdline.main-152"><span class="linenos">152</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="cmdline.main-153"><a href="#cmdline.main-153"><span class="linenos">153</span></a>    <span class="n">old_pytest_version</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">)</span>
</span><span id="cmdline.main-154"><a href="#cmdline.main-154"><span class="linenos">154</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="cmdline.main-155"><a href="#cmdline.main-155"><span class="linenos">155</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
</span><span id="cmdline.main-156"><a href="#cmdline.main-156"><span class="linenos">156</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="cmdline.main-157"><a href="#cmdline.main-157"><span class="linenos">157</span></a>            <span class="n">config</span> <span class="o">=</span> <span class="n">_prepareconfig</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">plugins</span><span class="p">)</span>
</span><span id="cmdline.main-158"><a href="#cmdline.main-158"><span class="linenos">158</span></a>        <span class="k">except</span> <span class="n">ConftestImportFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="cmdline.main-159"><a href="#cmdline.main-159"><span class="linenos">159</span></a>            <span class="n">exc_info</span> <span class="o">=</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exception</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">cause</span><span class="p">)</span>
</span><span id="cmdline.main-160"><a href="#cmdline.main-160"><span class="linenos">160</span></a>            <span class="n">tw</span> <span class="o">=</span> <span class="n">TerminalWriter</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="cmdline.main-161"><a href="#cmdline.main-161"><span class="linenos">161</span></a>            <span class="n">tw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ImportError while loading conftest &#39;</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="cmdline.main-162"><a href="#cmdline.main-162"><span class="linenos">162</span></a>            <span class="n">exc_info</span><span class="o">.</span><span class="n">traceback</span> <span class="o">=</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">traceback</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span id="cmdline.main-163"><a href="#cmdline.main-163"><span class="linenos">163</span></a>                <span class="n">filter_traceback_for_conftest_import_failure</span>
</span><span id="cmdline.main-164"><a href="#cmdline.main-164"><span class="linenos">164</span></a>            <span class="p">)</span>
</span><span id="cmdline.main-165"><a href="#cmdline.main-165"><span class="linenos">165</span></a>            <span class="n">exc_repr</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="cmdline.main-166"><a href="#cmdline.main-166"><span class="linenos">166</span></a>                <span class="n">exc_info</span><span class="o">.</span><span class="n">getrepr</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;short&quot;</span><span class="p">,</span> <span class="n">chain</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="cmdline.main-167"><a href="#cmdline.main-167"><span class="linenos">167</span></a>                <span class="k">if</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">traceback</span>
</span><span id="cmdline.main-168"><a href="#cmdline.main-168"><span class="linenos">168</span></a>                <span class="k">else</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">exconly</span><span class="p">()</span>
</span><span id="cmdline.main-169"><a href="#cmdline.main-169"><span class="linenos">169</span></a>            <span class="p">)</span>
</span><span id="cmdline.main-170"><a href="#cmdline.main-170"><span class="linenos">170</span></a>            <span class="n">formatted_tb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc_repr</span><span class="p">)</span>
</span><span id="cmdline.main-171"><a href="#cmdline.main-171"><span class="linenos">171</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">formatted_tb</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
</span><span id="cmdline.main-172"><a href="#cmdline.main-172"><span class="linenos">172</span></a>                <span class="n">tw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(),</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="cmdline.main-173"><a href="#cmdline.main-173"><span class="linenos">173</span></a>            <span class="k">return</span> <span class="n">ExitCode</span><span class="o">.</span><span class="n">USAGE_ERROR</span>
</span><span id="cmdline.main-174"><a href="#cmdline.main-174"><span class="linenos">174</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="cmdline.main-175"><a href="#cmdline.main-175"><span class="linenos">175</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="cmdline.main-176"><a href="#cmdline.main-176"><span class="linenos">176</span></a>                <span class="n">ret</span><span class="p">:</span> <span class="n">ExitCode</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_cmdline_main</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="cmdline.main-177"><a href="#cmdline.main-177"><span class="linenos">177</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="cmdline.main-178"><a href="#cmdline.main-178"><span class="linenos">178</span></a>                    <span class="k">return</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span><span id="cmdline.main-179"><a href="#cmdline.main-179"><span class="linenos">179</span></a>                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="cmdline.main-180"><a href="#cmdline.main-180"><span class="linenos">180</span></a>                    <span class="k">return</span> <span class="n">ret</span>
</span><span id="cmdline.main-181"><a href="#cmdline.main-181"><span class="linenos">181</span></a>            <span class="k">finally</span><span class="p">:</span>
</span><span id="cmdline.main-182"><a href="#cmdline.main-182"><span class="linenos">182</span></a>                <span class="n">config</span><span class="o">.</span><span class="n">_ensure_unconfigure</span><span class="p">()</span>
</span><span id="cmdline.main-183"><a href="#cmdline.main-183"><span class="linenos">183</span></a>    <span class="k">except</span> <span class="n">UsageError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="cmdline.main-184"><a href="#cmdline.main-184"><span class="linenos">184</span></a>        <span class="n">tw</span> <span class="o">=</span> <span class="n">TerminalWriter</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="cmdline.main-185"><a href="#cmdline.main-185"><span class="linenos">185</span></a>        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
</span><span id="cmdline.main-186"><a href="#cmdline.main-186"><span class="linenos">186</span></a>            <span class="n">tw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="cmdline.main-187"><a href="#cmdline.main-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="n">ExitCode</span><span class="o">.</span><span class="n">USAGE_ERROR</span>
</span><span id="cmdline.main-188"><a href="#cmdline.main-188"><span class="linenos">188</span></a>    <span class="k">finally</span><span class="p">:</span>
</span><span id="cmdline.main-189"><a href="#cmdline.main-189"><span class="linenos">189</span></a>        <span class="k">if</span> <span class="n">old_pytest_version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="cmdline.main-190"><a href="#cmdline.main-190"><span class="linenos">190</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="cmdline.main-191"><a href="#cmdline.main-191"><span class="linenos">191</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="cmdline.main-192"><a href="#cmdline.main-192"><span class="linenos">192</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_pytest_version</span>
</span></pre></div>


            <div class="docstring"><p>Perform an in-process test run.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>args</strong>: 
List of command line arguments. If <code>None</code> or not given, defaults to reading
arguments directly from the process command line (<code>sys.argv</code>).</li>
<li><strong>plugins</strong>:  List of plugin objects to be auto-registered during initialization.</li>
</ul>

<p>:returns: An exit code.</p>
</div>


                            </div>
                </section>
                <section id="Collector">
                            <input id="Collector-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Collector</span><wbr>(<span class="base">_pytest.nodes.Node</span>, <span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Collector-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Collector"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Collector-500"><a href="#Collector-500"><span class="linenos">500</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Collector</span><span class="p">(</span><span class="n">Node</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Collector-501"><a href="#Collector-501"><span class="linenos">501</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class of all collectors.</span>
</span><span id="Collector-502"><a href="#Collector-502"><span class="linenos">502</span></a>
</span><span id="Collector-503"><a href="#Collector-503"><span class="linenos">503</span></a><span class="sd">    Collector create children through `collect()` and thus iteratively build</span>
</span><span id="Collector-504"><a href="#Collector-504"><span class="linenos">504</span></a><span class="sd">    the collection tree.</span>
</span><span id="Collector-505"><a href="#Collector-505"><span class="linenos">505</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Collector-506"><a href="#Collector-506"><span class="linenos">506</span></a>
</span><span id="Collector-507"><a href="#Collector-507"><span class="linenos">507</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">CollectError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="Collector-508"><a href="#Collector-508"><span class="linenos">508</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An error during collection, contains a custom message.&quot;&quot;&quot;</span>
</span><span id="Collector-509"><a href="#Collector-509"><span class="linenos">509</span></a>
</span><span id="Collector-510"><a href="#Collector-510"><span class="linenos">510</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="Collector-511"><a href="#Collector-511"><span class="linenos">511</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">]:</span>
</span><span id="Collector-512"><a href="#Collector-512"><span class="linenos">512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collect children (items and collectors) for this collector.&quot;&quot;&quot;</span>
</span><span id="Collector-513"><a href="#Collector-513"><span class="linenos">513</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;abstract&quot;</span><span class="p">)</span>
</span><span id="Collector-514"><a href="#Collector-514"><span class="linenos">514</span></a>
</span><span id="Collector-515"><a href="#Collector-515"><span class="linenos">515</span></a>    <span class="c1"># TODO: This omits the style= parameter which breaks Liskov Substitution.</span>
</span><span id="Collector-516"><a href="#Collector-516"><span class="linenos">516</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repr_failure</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Collector-517"><a href="#Collector-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="Collector-518"><a href="#Collector-518"><span class="linenos">518</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">:</span>
</span><span id="Collector-519"><a href="#Collector-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a representation of a collection failure.</span>
</span><span id="Collector-520"><a href="#Collector-520"><span class="linenos">520</span></a>
</span><span id="Collector-521"><a href="#Collector-521"><span class="linenos">521</span></a><span class="sd">        :param excinfo: Exception information for the failure.</span>
</span><span id="Collector-522"><a href="#Collector-522"><span class="linenos">522</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Collector-523"><a href="#Collector-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CollectError</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span>
</span><span id="Collector-524"><a href="#Collector-524"><span class="linenos">524</span></a>            <span class="s2">&quot;fulltrace&quot;</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="Collector-525"><a href="#Collector-525"><span class="linenos">525</span></a>        <span class="p">):</span>
</span><span id="Collector-526"><a href="#Collector-526"><span class="linenos">526</span></a>            <span class="n">exc</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span>
</span><span id="Collector-527"><a href="#Collector-527"><span class="linenos">527</span></a>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Collector-528"><a href="#Collector-528"><span class="linenos">528</span></a>
</span><span id="Collector-529"><a href="#Collector-529"><span class="linenos">529</span></a>        <span class="c1"># Respect explicit tbstyle option, but default to &quot;short&quot;</span>
</span><span id="Collector-530"><a href="#Collector-530"><span class="linenos">530</span></a>        <span class="c1"># (_repr_failure_py uses &quot;long&quot; with &quot;fulltrace&quot; option always).</span>
</span><span id="Collector-531"><a href="#Collector-531"><span class="linenos">531</span></a>        <span class="n">tbstyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</span><span id="Collector-532"><a href="#Collector-532"><span class="linenos">532</span></a>        <span class="k">if</span> <span class="n">tbstyle</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="Collector-533"><a href="#Collector-533"><span class="linenos">533</span></a>            <span class="n">tbstyle</span> <span class="o">=</span> <span class="s2">&quot;short&quot;</span>
</span><span id="Collector-534"><a href="#Collector-534"><span class="linenos">534</span></a>
</span><span id="Collector-535"><a href="#Collector-535"><span class="linenos">535</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_repr_failure_py</span><span class="p">(</span><span class="n">excinfo</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">tbstyle</span><span class="p">)</span>
</span><span id="Collector-536"><a href="#Collector-536"><span class="linenos">536</span></a>
</span><span id="Collector-537"><a href="#Collector-537"><span class="linenos">537</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_traceback_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Traceback</span><span class="p">:</span>
</span><span id="Collector-538"><a href="#Collector-538"><span class="linenos">538</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">):</span>
</span><span id="Collector-539"><a href="#Collector-539"><span class="linenos">539</span></a>            <span class="n">traceback</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">traceback</span>
</span><span id="Collector-540"><a href="#Collector-540"><span class="linenos">540</span></a>            <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Collector-541"><a href="#Collector-541"><span class="linenos">541</span></a>            <span class="k">if</span> <span class="n">ntraceback</span> <span class="o">==</span> <span class="n">traceback</span><span class="p">:</span>
</span><span id="Collector-542"><a href="#Collector-542"><span class="linenos">542</span></a>                <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">ntraceback</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">excludepath</span><span class="o">=</span><span class="n">tracebackcutdir</span><span class="p">)</span>
</span><span id="Collector-543"><a href="#Collector-543"><span class="linenos">543</span></a>            <span class="k">return</span> <span class="n">ntraceback</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="Collector-544"><a href="#Collector-544"><span class="linenos">544</span></a>        <span class="k">return</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">traceback</span>
</span></pre></div>


            <div class="docstring"><p>Base class of all collectors.</p>

<p>Collector create children through <code><a href="#Collector.collect">collect()</a></code> and thus iteratively build
the collection tree.</p>
</div>


                            <div id="Collector.collect" class="classattr">
                                        <input id="Collector.collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-abc.abstractmethod">@abc.abstractmethod</div>

        <span class="def">def</span>
        <span class="name">collect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Collector.collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Collector.collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Collector.collect-510"><a href="#Collector.collect-510"><span class="linenos">510</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="Collector.collect-511"><a href="#Collector.collect-511"><span class="linenos">511</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">]:</span>
</span><span id="Collector.collect-512"><a href="#Collector.collect-512"><span class="linenos">512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collect children (items and collectors) for this collector.&quot;&quot;&quot;</span>
</span><span id="Collector.collect-513"><a href="#Collector.collect-513"><span class="linenos">513</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;abstract&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Collect children (items and collectors) for this collector.</p>
</div>


                            </div>
                            <div id="Collector.repr_failure" class="classattr">
                                        <input id="Collector.repr_failure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">repr_failure</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">excinfo</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">TerminalRepr</span>:</span></span>

                <label class="view-source-button" for="Collector.repr_failure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Collector.repr_failure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Collector.repr_failure-516"><a href="#Collector.repr_failure-516"><span class="linenos">516</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repr_failure</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Collector.repr_failure-517"><a href="#Collector.repr_failure-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="Collector.repr_failure-518"><a href="#Collector.repr_failure-518"><span class="linenos">518</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">:</span>
</span><span id="Collector.repr_failure-519"><a href="#Collector.repr_failure-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a representation of a collection failure.</span>
</span><span id="Collector.repr_failure-520"><a href="#Collector.repr_failure-520"><span class="linenos">520</span></a>
</span><span id="Collector.repr_failure-521"><a href="#Collector.repr_failure-521"><span class="linenos">521</span></a><span class="sd">        :param excinfo: Exception information for the failure.</span>
</span><span id="Collector.repr_failure-522"><a href="#Collector.repr_failure-522"><span class="linenos">522</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Collector.repr_failure-523"><a href="#Collector.repr_failure-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CollectError</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span>
</span><span id="Collector.repr_failure-524"><a href="#Collector.repr_failure-524"><span class="linenos">524</span></a>            <span class="s2">&quot;fulltrace&quot;</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="Collector.repr_failure-525"><a href="#Collector.repr_failure-525"><span class="linenos">525</span></a>        <span class="p">):</span>
</span><span id="Collector.repr_failure-526"><a href="#Collector.repr_failure-526"><span class="linenos">526</span></a>            <span class="n">exc</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span>
</span><span id="Collector.repr_failure-527"><a href="#Collector.repr_failure-527"><span class="linenos">527</span></a>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Collector.repr_failure-528"><a href="#Collector.repr_failure-528"><span class="linenos">528</span></a>
</span><span id="Collector.repr_failure-529"><a href="#Collector.repr_failure-529"><span class="linenos">529</span></a>        <span class="c1"># Respect explicit tbstyle option, but default to &quot;short&quot;</span>
</span><span id="Collector.repr_failure-530"><a href="#Collector.repr_failure-530"><span class="linenos">530</span></a>        <span class="c1"># (_repr_failure_py uses &quot;long&quot; with &quot;fulltrace&quot; option always).</span>
</span><span id="Collector.repr_failure-531"><a href="#Collector.repr_failure-531"><span class="linenos">531</span></a>        <span class="n">tbstyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</span><span id="Collector.repr_failure-532"><a href="#Collector.repr_failure-532"><span class="linenos">532</span></a>        <span class="k">if</span> <span class="n">tbstyle</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="Collector.repr_failure-533"><a href="#Collector.repr_failure-533"><span class="linenos">533</span></a>            <span class="n">tbstyle</span> <span class="o">=</span> <span class="s2">&quot;short&quot;</span>
</span><span id="Collector.repr_failure-534"><a href="#Collector.repr_failure-534"><span class="linenos">534</span></a>
</span><span id="Collector.repr_failure-535"><a href="#Collector.repr_failure-535"><span class="linenos">535</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_repr_failure_py</span><span class="p">(</span><span class="n">excinfo</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">tbstyle</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return a representation of a collection failure.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>excinfo</strong>:  Exception information for the failure.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="Collector.CollectError">
                            <input id="Collector.CollectError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Collector.CollectError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="Collector.CollectError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Collector.CollectError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Collector.CollectError-507"><a href="#Collector.CollectError-507"><span class="linenos">507</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">CollectError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="Collector.CollectError-508"><a href="#Collector.CollectError-508"><span class="linenos">508</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An error during collection, contains a custom message.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>An error during collection, contains a custom message.</p>
</div>


                </section>
                <section id="CollectReport">
                            <input id="CollectReport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">CollectReport</span><wbr>(<span class="base">_pytest.reports.BaseReport</span>):

                <label class="view-source-button" for="CollectReport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CollectReport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CollectReport-399"><a href="#CollectReport-399"><span class="linenos">399</span></a><span class="nd">@final</span>
</span><span id="CollectReport-400"><a href="#CollectReport-400"><span class="linenos">400</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CollectReport</span><span class="p">(</span><span class="n">BaseReport</span><span class="p">):</span>
</span><span id="CollectReport-401"><a href="#CollectReport-401"><span class="linenos">401</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Collection report object.</span>
</span><span id="CollectReport-402"><a href="#CollectReport-402"><span class="linenos">402</span></a>
</span><span id="CollectReport-403"><a href="#CollectReport-403"><span class="linenos">403</span></a><span class="sd">    Reports can contain arbitrary extra attributes.</span>
</span><span id="CollectReport-404"><a href="#CollectReport-404"><span class="linenos">404</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CollectReport-405"><a href="#CollectReport-405"><span class="linenos">405</span></a>
</span><span id="CollectReport-406"><a href="#CollectReport-406"><span class="linenos">406</span></a>    <span class="n">when</span> <span class="o">=</span> <span class="s2">&quot;collect&quot;</span>
</span><span id="CollectReport-407"><a href="#CollectReport-407"><span class="linenos">407</span></a>
</span><span id="CollectReport-408"><a href="#CollectReport-408"><span class="linenos">408</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="CollectReport-409"><a href="#CollectReport-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CollectReport-410"><a href="#CollectReport-410"><span class="linenos">410</span></a>        <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="CollectReport-411"><a href="#CollectReport-411"><span class="linenos">411</span></a>        <span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">],</span>
</span><span id="CollectReport-412"><a href="#CollectReport-412"><span class="linenos">412</span></a>        <span class="n">longrepr</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="CollectReport-413"><a href="#CollectReport-413"><span class="linenos">413</span></a>        <span class="o">|</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="CollectReport-414"><a href="#CollectReport-414"><span class="linenos">414</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</span><span id="CollectReport-415"><a href="#CollectReport-415"><span class="linenos">415</span></a>        <span class="o">|</span> <span class="nb">str</span>
</span><span id="CollectReport-416"><a href="#CollectReport-416"><span class="linenos">416</span></a>        <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">,</span>
</span><span id="CollectReport-417"><a href="#CollectReport-417"><span class="linenos">417</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CollectReport-418"><a href="#CollectReport-418"><span class="linenos">418</span></a>        <span class="n">sections</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(),</span>
</span><span id="CollectReport-419"><a href="#CollectReport-419"><span class="linenos">419</span></a>        <span class="o">**</span><span class="n">extra</span><span class="p">,</span>
</span><span id="CollectReport-420"><a href="#CollectReport-420"><span class="linenos">420</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CollectReport-421"><a href="#CollectReport-421"><span class="linenos">421</span></a>        <span class="c1">#: Normalized collection nodeid.</span>
</span><span id="CollectReport-422"><a href="#CollectReport-422"><span class="linenos">422</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span> <span class="o">=</span> <span class="n">nodeid</span>
</span><span id="CollectReport-423"><a href="#CollectReport-423"><span class="linenos">423</span></a>
</span><span id="CollectReport-424"><a href="#CollectReport-424"><span class="linenos">424</span></a>        <span class="c1">#: Test outcome, always one of &quot;passed&quot;, &quot;failed&quot;, &quot;skipped&quot;.</span>
</span><span id="CollectReport-425"><a href="#CollectReport-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
</span><span id="CollectReport-426"><a href="#CollectReport-426"><span class="linenos">426</span></a>
</span><span id="CollectReport-427"><a href="#CollectReport-427"><span class="linenos">427</span></a>        <span class="c1">#: None or a failure representation.</span>
</span><span id="CollectReport-428"><a href="#CollectReport-428"><span class="linenos">428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">longrepr</span> <span class="o">=</span> <span class="n">longrepr</span>
</span><span id="CollectReport-429"><a href="#CollectReport-429"><span class="linenos">429</span></a>
</span><span id="CollectReport-430"><a href="#CollectReport-430"><span class="linenos">430</span></a>        <span class="c1">#: The collected items and collection nodes.</span>
</span><span id="CollectReport-431"><a href="#CollectReport-431"><span class="linenos">431</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="CollectReport-432"><a href="#CollectReport-432"><span class="linenos">432</span></a>
</span><span id="CollectReport-433"><a href="#CollectReport-433"><span class="linenos">433</span></a>        <span class="c1">#: Tuples of str ``(heading, content)`` with extra information</span>
</span><span id="CollectReport-434"><a href="#CollectReport-434"><span class="linenos">434</span></a>        <span class="c1">#: for the test report. Used by pytest to add text captured</span>
</span><span id="CollectReport-435"><a href="#CollectReport-435"><span class="linenos">435</span></a>        <span class="c1">#: from ``stdout``, ``stderr``, and intercepted logging events. May</span>
</span><span id="CollectReport-436"><a href="#CollectReport-436"><span class="linenos">436</span></a>        <span class="c1">#: be used by other plugins to add arbitrary information to reports.</span>
</span><span id="CollectReport-437"><a href="#CollectReport-437"><span class="linenos">437</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sections</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span>
</span><span id="CollectReport-438"><a href="#CollectReport-438"><span class="linenos">438</span></a>
</span><span id="CollectReport-439"><a href="#CollectReport-439"><span class="linenos">439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span>
</span><span id="CollectReport-440"><a href="#CollectReport-440"><span class="linenos">440</span></a>
</span><span id="CollectReport-441"><a href="#CollectReport-441"><span class="linenos">441</span></a>    <span class="nd">@property</span>
</span><span id="CollectReport-442"><a href="#CollectReport-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">location</span><span class="p">(</span>  <span class="c1"># type:ignore[override]</span>
</span><span id="CollectReport-443"><a href="#CollectReport-443"><span class="linenos">443</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CollectReport-444"><a href="#CollectReport-444"><span class="linenos">444</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CollectReport-445"><a href="#CollectReport-445"><span class="linenos">445</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fspath</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fspath</span><span class="p">)</span>
</span><span id="CollectReport-446"><a href="#CollectReport-446"><span class="linenos">446</span></a>
</span><span id="CollectReport-447"><a href="#CollectReport-447"><span class="linenos">447</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CollectReport-448"><a href="#CollectReport-448"><span class="linenos">448</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;CollectReport </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="si">!r}</span><span class="s2"> lenresult=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> outcome=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Collection report object.</p>

<p>Reports can contain arbitrary extra attributes.</p>
</div>


                            <div id="CollectReport.__init__" class="classattr">
                                        <input id="CollectReport.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CollectReport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;passed&#39;</span><span class="p">,</span> <span class="s1">&#39;failed&#39;</span><span class="p">,</span> <span class="s1">&#39;skipped&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">longrepr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NoneType</span><span class="p">,</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">TerminalRepr</span><span class="p">]</span>,</span><span class="param">	<span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">sections</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">()</span>,</span><span class="param">	<span class="o">**</span><span class="n">extra</span></span>)</span>

                <label class="view-source-button" for="CollectReport.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CollectReport.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CollectReport.__init__-408"><a href="#CollectReport.__init__-408"><span class="linenos">408</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="CollectReport.__init__-409"><a href="#CollectReport.__init__-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CollectReport.__init__-410"><a href="#CollectReport.__init__-410"><span class="linenos">410</span></a>        <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="CollectReport.__init__-411"><a href="#CollectReport.__init__-411"><span class="linenos">411</span></a>        <span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">],</span>
</span><span id="CollectReport.__init__-412"><a href="#CollectReport.__init__-412"><span class="linenos">412</span></a>        <span class="n">longrepr</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="CollectReport.__init__-413"><a href="#CollectReport.__init__-413"><span class="linenos">413</span></a>        <span class="o">|</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="CollectReport.__init__-414"><a href="#CollectReport.__init__-414"><span class="linenos">414</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</span><span id="CollectReport.__init__-415"><a href="#CollectReport.__init__-415"><span class="linenos">415</span></a>        <span class="o">|</span> <span class="nb">str</span>
</span><span id="CollectReport.__init__-416"><a href="#CollectReport.__init__-416"><span class="linenos">416</span></a>        <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">,</span>
</span><span id="CollectReport.__init__-417"><a href="#CollectReport.__init__-417"><span class="linenos">417</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CollectReport.__init__-418"><a href="#CollectReport.__init__-418"><span class="linenos">418</span></a>        <span class="n">sections</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(),</span>
</span><span id="CollectReport.__init__-419"><a href="#CollectReport.__init__-419"><span class="linenos">419</span></a>        <span class="o">**</span><span class="n">extra</span><span class="p">,</span>
</span><span id="CollectReport.__init__-420"><a href="#CollectReport.__init__-420"><span class="linenos">420</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CollectReport.__init__-421"><a href="#CollectReport.__init__-421"><span class="linenos">421</span></a>        <span class="c1">#: Normalized collection nodeid.</span>
</span><span id="CollectReport.__init__-422"><a href="#CollectReport.__init__-422"><span class="linenos">422</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span> <span class="o">=</span> <span class="n">nodeid</span>
</span><span id="CollectReport.__init__-423"><a href="#CollectReport.__init__-423"><span class="linenos">423</span></a>
</span><span id="CollectReport.__init__-424"><a href="#CollectReport.__init__-424"><span class="linenos">424</span></a>        <span class="c1">#: Test outcome, always one of &quot;passed&quot;, &quot;failed&quot;, &quot;skipped&quot;.</span>
</span><span id="CollectReport.__init__-425"><a href="#CollectReport.__init__-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
</span><span id="CollectReport.__init__-426"><a href="#CollectReport.__init__-426"><span class="linenos">426</span></a>
</span><span id="CollectReport.__init__-427"><a href="#CollectReport.__init__-427"><span class="linenos">427</span></a>        <span class="c1">#: None or a failure representation.</span>
</span><span id="CollectReport.__init__-428"><a href="#CollectReport.__init__-428"><span class="linenos">428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">longrepr</span> <span class="o">=</span> <span class="n">longrepr</span>
</span><span id="CollectReport.__init__-429"><a href="#CollectReport.__init__-429"><span class="linenos">429</span></a>
</span><span id="CollectReport.__init__-430"><a href="#CollectReport.__init__-430"><span class="linenos">430</span></a>        <span class="c1">#: The collected items and collection nodes.</span>
</span><span id="CollectReport.__init__-431"><a href="#CollectReport.__init__-431"><span class="linenos">431</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="CollectReport.__init__-432"><a href="#CollectReport.__init__-432"><span class="linenos">432</span></a>
</span><span id="CollectReport.__init__-433"><a href="#CollectReport.__init__-433"><span class="linenos">433</span></a>        <span class="c1">#: Tuples of str ``(heading, content)`` with extra information</span>
</span><span id="CollectReport.__init__-434"><a href="#CollectReport.__init__-434"><span class="linenos">434</span></a>        <span class="c1">#: for the test report. Used by pytest to add text captured</span>
</span><span id="CollectReport.__init__-435"><a href="#CollectReport.__init__-435"><span class="linenos">435</span></a>        <span class="c1">#: from ``stdout``, ``stderr``, and intercepted logging events. May</span>
</span><span id="CollectReport.__init__-436"><a href="#CollectReport.__init__-436"><span class="linenos">436</span></a>        <span class="c1">#: be used by other plugins to add arbitrary information to reports.</span>
</span><span id="CollectReport.__init__-437"><a href="#CollectReport.__init__-437"><span class="linenos">437</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sections</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span>
</span><span id="CollectReport.__init__-438"><a href="#CollectReport.__init__-438"><span class="linenos">438</span></a>
</span><span id="CollectReport.__init__-439"><a href="#CollectReport.__init__-439"><span class="linenos">439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="CollectReport.when" class="classattr">
                                <div class="attr variable">
            <span class="name">when</span>        =
<span class="default_value">&#39;collect&#39;</span>

        
    </div>
    <a class="headerlink" href="#CollectReport.when"></a>
    
    

                            </div>
                            <div id="CollectReport.nodeid" class="classattr">
                                <div class="attr variable">
            <span class="name">nodeid</span>

        
    </div>
    <a class="headerlink" href="#CollectReport.nodeid"></a>
    
    

                            </div>
                            <div id="CollectReport.outcome" class="classattr">
                                <div class="attr variable">
            <span class="name">outcome</span>

        
    </div>
    <a class="headerlink" href="#CollectReport.outcome"></a>
    
    

                            </div>
                            <div id="CollectReport.longrepr" class="classattr">
                                <div class="attr variable">
            <span class="name">longrepr</span>

        
    </div>
    <a class="headerlink" href="#CollectReport.longrepr"></a>
    
    

                            </div>
                            <div id="CollectReport.result" class="classattr">
                                <div class="attr variable">
            <span class="name">result</span>

        
    </div>
    <a class="headerlink" href="#CollectReport.result"></a>
    
    

                            </div>
                            <div id="CollectReport.sections" class="classattr">
                                <div class="attr variable">
            <span class="name">sections</span>

        
    </div>
    <a class="headerlink" href="#CollectReport.sections"></a>
    
    

                            </div>
                            <div id="CollectReport.location" class="classattr">
                                        <input id="CollectReport.location-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">location</span><span class="annotation">: tuple[str, int | None, str] | None</span>

                <label class="view-source-button" for="CollectReport.location-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CollectReport.location"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CollectReport.location-441"><a href="#CollectReport.location-441"><span class="linenos">441</span></a>    <span class="nd">@property</span>
</span><span id="CollectReport.location-442"><a href="#CollectReport.location-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">location</span><span class="p">(</span>  <span class="c1"># type:ignore[override]</span>
</span><span id="CollectReport.location-443"><a href="#CollectReport.location-443"><span class="linenos">443</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CollectReport.location-444"><a href="#CollectReport.location-444"><span class="linenos">444</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CollectReport.location-445"><a href="#CollectReport.location-445"><span class="linenos">445</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fspath</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fspath</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="Config">
                            <input id="Config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Config</span>:

                <label class="view-source-button" for="Config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config-966"><a href="#Config-966"><span class="linenos"> 966</span></a><span class="nd">@final</span>
</span><span id="Config-967"><a href="#Config-967"><span class="linenos"> 967</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
</span><span id="Config-968"><a href="#Config-968"><span class="linenos"> 968</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Access to configuration values, pluginmanager and plugin hooks.</span>
</span><span id="Config-969"><a href="#Config-969"><span class="linenos"> 969</span></a>
</span><span id="Config-970"><a href="#Config-970"><span class="linenos"> 970</span></a><span class="sd">    :param PytestPluginManager pluginmanager:</span>
</span><span id="Config-971"><a href="#Config-971"><span class="linenos"> 971</span></a><span class="sd">        A pytest PluginManager.</span>
</span><span id="Config-972"><a href="#Config-972"><span class="linenos"> 972</span></a>
</span><span id="Config-973"><a href="#Config-973"><span class="linenos"> 973</span></a><span class="sd">    :param InvocationParams invocation_params:</span>
</span><span id="Config-974"><a href="#Config-974"><span class="linenos"> 974</span></a><span class="sd">        Object containing parameters regarding the :func:`pytest.main`</span>
</span><span id="Config-975"><a href="#Config-975"><span class="linenos"> 975</span></a><span class="sd">        invocation.</span>
</span><span id="Config-976"><a href="#Config-976"><span class="linenos"> 976</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Config-977"><a href="#Config-977"><span class="linenos"> 977</span></a>
</span><span id="Config-978"><a href="#Config-978"><span class="linenos"> 978</span></a>    <span class="nd">@final</span>
</span><span id="Config-979"><a href="#Config-979"><span class="linenos"> 979</span></a>    <span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config-980"><a href="#Config-980"><span class="linenos"> 980</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">InvocationParams</span><span class="p">:</span>
</span><span id="Config-981"><a href="#Config-981"><span class="linenos"> 981</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Holds parameters passed during :func:`pytest.main`.</span>
</span><span id="Config-982"><a href="#Config-982"><span class="linenos"> 982</span></a>
</span><span id="Config-983"><a href="#Config-983"><span class="linenos"> 983</span></a><span class="sd">        The object attributes are read-only.</span>
</span><span id="Config-984"><a href="#Config-984"><span class="linenos"> 984</span></a>
</span><span id="Config-985"><a href="#Config-985"><span class="linenos"> 985</span></a><span class="sd">        .. versionadded:: 5.1</span>
</span><span id="Config-986"><a href="#Config-986"><span class="linenos"> 986</span></a>
</span><span id="Config-987"><a href="#Config-987"><span class="linenos"> 987</span></a><span class="sd">        .. note::</span>
</span><span id="Config-988"><a href="#Config-988"><span class="linenos"> 988</span></a>
</span><span id="Config-989"><a href="#Config-989"><span class="linenos"> 989</span></a><span class="sd">            Note that the environment variable ``PYTEST_ADDOPTS`` and the ``addopts``</span>
</span><span id="Config-990"><a href="#Config-990"><span class="linenos"> 990</span></a><span class="sd">            ini option are handled by pytest, not being included in the ``args`` attribute.</span>
</span><span id="Config-991"><a href="#Config-991"><span class="linenos"> 991</span></a>
</span><span id="Config-992"><a href="#Config-992"><span class="linenos"> 992</span></a><span class="sd">            Plugins accessing ``InvocationParams`` must be aware of that.</span>
</span><span id="Config-993"><a href="#Config-993"><span class="linenos"> 993</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-994"><a href="#Config-994"><span class="linenos"> 994</span></a>
</span><span id="Config-995"><a href="#Config-995"><span class="linenos"> 995</span></a>        <span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</span><span id="Config-996"><a href="#Config-996"><span class="linenos"> 996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The command-line arguments as passed to :func:`pytest.main`.&quot;&quot;&quot;</span>
</span><span id="Config-997"><a href="#Config-997"><span class="linenos"> 997</span></a>        <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="Config-998"><a href="#Config-998"><span class="linenos"> 998</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extra plugins, might be `None`.&quot;&quot;&quot;</span>
</span><span id="Config-999"><a href="#Config-999"><span class="linenos"> 999</span></a>        <span class="nb">dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
</span><span id="Config-1000"><a href="#Config-1000"><span class="linenos">1000</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The directory from which :func:`pytest.main` was invoked. :type: pathlib.Path&quot;&quot;&quot;</span>
</span><span id="Config-1001"><a href="#Config-1001"><span class="linenos">1001</span></a>
</span><span id="Config-1002"><a href="#Config-1002"><span class="linenos">1002</span></a>        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Config-1003"><a href="#Config-1003"><span class="linenos">1003</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Config-1004"><a href="#Config-1004"><span class="linenos">1004</span></a>            <span class="o">*</span><span class="p">,</span>
</span><span id="Config-1005"><a href="#Config-1005"><span class="linenos">1005</span></a>            <span class="n">args</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Config-1006"><a href="#Config-1006"><span class="linenos">1006</span></a>            <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config-1007"><a href="#Config-1007"><span class="linenos">1007</span></a>            <span class="nb">dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="Config-1008"><a href="#Config-1008"><span class="linenos">1008</span></a>        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1009"><a href="#Config-1009"><span class="linenos">1009</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
</span><span id="Config-1010"><a href="#Config-1010"><span class="linenos">1010</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;plugins&quot;</span><span class="p">,</span> <span class="n">plugins</span><span class="p">)</span>
</span><span id="Config-1011"><a href="#Config-1011"><span class="linenos">1011</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dir&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
</span><span id="Config-1012"><a href="#Config-1012"><span class="linenos">1012</span></a>
</span><span id="Config-1013"><a href="#Config-1013"><span class="linenos">1013</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">ArgsSource</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="Config-1014"><a href="#Config-1014"><span class="linenos">1014</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Indicates the source of the test arguments.</span>
</span><span id="Config-1015"><a href="#Config-1015"><span class="linenos">1015</span></a>
</span><span id="Config-1016"><a href="#Config-1016"><span class="linenos">1016</span></a><span class="sd">        .. versionadded:: 7.2</span>
</span><span id="Config-1017"><a href="#Config-1017"><span class="linenos">1017</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1018"><a href="#Config-1018"><span class="linenos">1018</span></a>
</span><span id="Config-1019"><a href="#Config-1019"><span class="linenos">1019</span></a>        <span class="c1">#: Command line arguments.</span>
</span><span id="Config-1020"><a href="#Config-1020"><span class="linenos">1020</span></a>        <span class="n">ARGS</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</span><span id="Config-1021"><a href="#Config-1021"><span class="linenos">1021</span></a>        <span class="c1">#: Invocation directory.</span>
</span><span id="Config-1022"><a href="#Config-1022"><span class="linenos">1022</span></a>        <span class="n">INVOCATION_DIR</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</span><span id="Config-1023"><a href="#Config-1023"><span class="linenos">1023</span></a>        <span class="n">INCOVATION_DIR</span> <span class="o">=</span> <span class="n">INVOCATION_DIR</span>  <span class="c1"># backwards compatibility alias</span>
</span><span id="Config-1024"><a href="#Config-1024"><span class="linenos">1024</span></a>        <span class="c1">#: &#39;testpaths&#39; configuration value.</span>
</span><span id="Config-1025"><a href="#Config-1025"><span class="linenos">1025</span></a>        <span class="n">TESTPATHS</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</span><span id="Config-1026"><a href="#Config-1026"><span class="linenos">1026</span></a>
</span><span id="Config-1027"><a href="#Config-1027"><span class="linenos">1027</span></a>    <span class="c1"># Set by cacheprovider plugin.</span>
</span><span id="Config-1028"><a href="#Config-1028"><span class="linenos">1028</span></a>    <span class="n">cache</span><span class="p">:</span> <span class="n">Cache</span>
</span><span id="Config-1029"><a href="#Config-1029"><span class="linenos">1029</span></a>
</span><span id="Config-1030"><a href="#Config-1030"><span class="linenos">1030</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Config-1031"><a href="#Config-1031"><span class="linenos">1031</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Config-1032"><a href="#Config-1032"><span class="linenos">1032</span></a>        <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">,</span>
</span><span id="Config-1033"><a href="#Config-1033"><span class="linenos">1033</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Config-1034"><a href="#Config-1034"><span class="linenos">1034</span></a>        <span class="n">invocation_params</span><span class="p">:</span> <span class="n">InvocationParams</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config-1035"><a href="#Config-1035"><span class="linenos">1035</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1036"><a href="#Config-1036"><span class="linenos">1036</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">.argparsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">FILE_OR_DIR</span>
</span><span id="Config-1037"><a href="#Config-1037"><span class="linenos">1037</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">.argparsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
</span><span id="Config-1038"><a href="#Config-1038"><span class="linenos">1038</span></a>
</span><span id="Config-1039"><a href="#Config-1039"><span class="linenos">1039</span></a>        <span class="k">if</span> <span class="n">invocation_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1040"><a href="#Config-1040"><span class="linenos">1040</span></a>            <span class="n">invocation_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InvocationParams</span><span class="p">(</span>
</span><span id="Config-1041"><a href="#Config-1041"><span class="linenos">1041</span></a>                <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">plugins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span>
</span><span id="Config-1042"><a href="#Config-1042"><span class="linenos">1042</span></a>            <span class="p">)</span>
</span><span id="Config-1043"><a href="#Config-1043"><span class="linenos">1043</span></a>
</span><span id="Config-1044"><a href="#Config-1044"><span class="linenos">1044</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">option</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
</span><span id="Config-1045"><a href="#Config-1045"><span class="linenos">1045</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Access to command line option as attributes.</span>
</span><span id="Config-1046"><a href="#Config-1046"><span class="linenos">1046</span></a>
</span><span id="Config-1047"><a href="#Config-1047"><span class="linenos">1047</span></a><span class="sd">        :type: argparse.Namespace</span>
</span><span id="Config-1048"><a href="#Config-1048"><span class="linenos">1048</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1049"><a href="#Config-1049"><span class="linenos">1049</span></a>
</span><span id="Config-1050"><a href="#Config-1050"><span class="linenos">1050</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span> <span class="o">=</span> <span class="n">invocation_params</span>
</span><span id="Config-1051"><a href="#Config-1051"><span class="linenos">1051</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The parameters with which pytest was invoked.</span>
</span><span id="Config-1052"><a href="#Config-1052"><span class="linenos">1052</span></a>
</span><span id="Config-1053"><a href="#Config-1053"><span class="linenos">1053</span></a><span class="sd">        :type: InvocationParams</span>
</span><span id="Config-1054"><a href="#Config-1054"><span class="linenos">1054</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1055"><a href="#Config-1055"><span class="linenos">1055</span></a>
</span><span id="Config-1056"><a href="#Config-1056"><span class="linenos">1056</span></a>        <span class="n">_a</span> <span class="o">=</span> <span class="n">FILE_OR_DIR</span>
</span><span id="Config-1057"><a href="#Config-1057"><span class="linenos">1057</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">(</span>
</span><span id="Config-1058"><a href="#Config-1058"><span class="linenos">1058</span></a>            <span class="n">usage</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;%(prog)s [options] [</span><span class="si">{</span><span class="n">_a</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">_a</span><span class="si">}</span><span class="s2">] [...]&quot;</span><span class="p">,</span>
</span><span id="Config-1059"><a href="#Config-1059"><span class="linenos">1059</span></a>            <span class="n">processopt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span><span class="p">,</span>
</span><span id="Config-1060"><a href="#Config-1060"><span class="linenos">1060</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Config-1061"><a href="#Config-1061"><span class="linenos">1061</span></a>        <span class="p">)</span>
</span><span id="Config-1062"><a href="#Config-1062"><span class="linenos">1062</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span> <span class="o">=</span> <span class="n">pluginmanager</span>
</span><span id="Config-1063"><a href="#Config-1063"><span class="linenos">1063</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The plugin manager handles plugin registration and hook invocation.</span>
</span><span id="Config-1064"><a href="#Config-1064"><span class="linenos">1064</span></a>
</span><span id="Config-1065"><a href="#Config-1065"><span class="linenos">1065</span></a><span class="sd">        :type: PytestPluginManager</span>
</span><span id="Config-1066"><a href="#Config-1066"><span class="linenos">1066</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1067"><a href="#Config-1067"><span class="linenos">1067</span></a>
</span><span id="Config-1068"><a href="#Config-1068"><span class="linenos">1068</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stash</span> <span class="o">=</span> <span class="n">Stash</span><span class="p">()</span>
</span><span id="Config-1069"><a href="#Config-1069"><span class="linenos">1069</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A place where plugins can store information on the config for their</span>
</span><span id="Config-1070"><a href="#Config-1070"><span class="linenos">1070</span></a><span class="sd">        own use.</span>
</span><span id="Config-1071"><a href="#Config-1071"><span class="linenos">1071</span></a>
</span><span id="Config-1072"><a href="#Config-1072"><span class="linenos">1072</span></a><span class="sd">        :type: Stash</span>
</span><span id="Config-1073"><a href="#Config-1073"><span class="linenos">1073</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1074"><a href="#Config-1074"><span class="linenos">1074</span></a>        <span class="c1"># Deprecated alias. Was never public. Can be removed in a few releases.</span>
</span><span id="Config-1075"><a href="#Config-1075"><span class="linenos">1075</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stash</span>
</span><span id="Config-1076"><a href="#Config-1076"><span class="linenos">1076</span></a>
</span><span id="Config-1077"><a href="#Config-1077"><span class="linenos">1077</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">)</span>
</span><span id="Config-1078"><a href="#Config-1078"><span class="linenos">1078</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="p">:</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookRelay</span> <span class="o">=</span> <span class="n">PathAwareHookProxy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">hook</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
</span><span id="Config-1079"><a href="#Config-1079"><span class="linenos">1079</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inicache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Config-1080"><a href="#Config-1080"><span class="linenos">1080</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_override_ini</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="Config-1081"><a href="#Config-1081"><span class="linenos">1081</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_opt2dest</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Config-1082"><a href="#Config-1082"><span class="linenos">1082</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1083"><a href="#Config-1083"><span class="linenos">1083</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;pytestconfig&quot;</span><span class="p">)</span>
</span><span id="Config-1084"><a href="#Config-1084"><span class="linenos">1084</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Config-1085"><a href="#Config-1085"><span class="linenos">1085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_addoption</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="Config-1086"><a href="#Config-1086"><span class="linenos">1086</span></a>            <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="p">)</span>
</span><span id="Config-1087"><a href="#Config-1087"><span class="linenos">1087</span></a>        <span class="p">)</span>
</span><span id="Config-1088"><a href="#Config-1088"><span class="linenos">1088</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args_source</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">ArgsSource</span><span class="o">.</span><span class="n">ARGS</span>
</span><span id="Config-1089"><a href="#Config-1089"><span class="linenos">1089</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1090"><a href="#Config-1090"><span class="linenos">1090</span></a>
</span><span id="Config-1091"><a href="#Config-1091"><span class="linenos">1091</span></a>    <span class="nd">@property</span>
</span><span id="Config-1092"><a href="#Config-1092"><span class="linenos">1092</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rootpath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">:</span>
</span><span id="Config-1093"><a href="#Config-1093"><span class="linenos">1093</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path to the :ref:`rootdir &lt;rootdir&gt;`.</span>
</span><span id="Config-1094"><a href="#Config-1094"><span class="linenos">1094</span></a>
</span><span id="Config-1095"><a href="#Config-1095"><span class="linenos">1095</span></a><span class="sd">        :type: pathlib.Path</span>
</span><span id="Config-1096"><a href="#Config-1096"><span class="linenos">1096</span></a>
</span><span id="Config-1097"><a href="#Config-1097"><span class="linenos">1097</span></a><span class="sd">        .. versionadded:: 6.1</span>
</span><span id="Config-1098"><a href="#Config-1098"><span class="linenos">1098</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1099"><a href="#Config-1099"><span class="linenos">1099</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rootpath</span>
</span><span id="Config-1100"><a href="#Config-1100"><span class="linenos">1100</span></a>
</span><span id="Config-1101"><a href="#Config-1101"><span class="linenos">1101</span></a>    <span class="nd">@property</span>
</span><span id="Config-1102"><a href="#Config-1102"><span class="linenos">1102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inipath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1103"><a href="#Config-1103"><span class="linenos">1103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path to the :ref:`configfile &lt;configfiles&gt;`.</span>
</span><span id="Config-1104"><a href="#Config-1104"><span class="linenos">1104</span></a>
</span><span id="Config-1105"><a href="#Config-1105"><span class="linenos">1105</span></a><span class="sd">        .. versionadded:: 6.1</span>
</span><span id="Config-1106"><a href="#Config-1106"><span class="linenos">1106</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1107"><a href="#Config-1107"><span class="linenos">1107</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inipath</span>
</span><span id="Config-1108"><a href="#Config-1108"><span class="linenos">1108</span></a>
</span><span id="Config-1109"><a href="#Config-1109"><span class="linenos">1109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1110"><a href="#Config-1110"><span class="linenos">1110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a function to be called when the config object gets out of</span>
</span><span id="Config-1111"><a href="#Config-1111"><span class="linenos">1111</span></a><span class="sd">        use (usually coinciding with pytest_unconfigure).&quot;&quot;&quot;</span>
</span><span id="Config-1112"><a href="#Config-1112"><span class="linenos">1112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="Config-1113"><a href="#Config-1113"><span class="linenos">1113</span></a>
</span><span id="Config-1114"><a href="#Config-1114"><span class="linenos">1114</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_do_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1115"><a href="#Config-1115"><span class="linenos">1115</span></a>        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span>
</span><span id="Config-1116"><a href="#Config-1116"><span class="linenos">1116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Config-1117"><a href="#Config-1117"><span class="linenos">1117</span></a>        <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
</span><span id="Config-1118"><a href="#Config-1118"><span class="linenos">1118</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
</span><span id="Config-1119"><a href="#Config-1119"><span class="linenos">1119</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_configure</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>
</span><span id="Config-1120"><a href="#Config-1120"><span class="linenos">1120</span></a>
</span><span id="Config-1121"><a href="#Config-1121"><span class="linenos">1121</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_unconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1122"><a href="#Config-1122"><span class="linenos">1122</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span><span class="p">:</span>
</span><span id="Config-1123"><a href="#Config-1123"><span class="linenos">1123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Config-1124"><a href="#Config-1124"><span class="linenos">1124</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_unconfigure</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Config-1125"><a href="#Config-1125"><span class="linenos">1125</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_configure</span><span class="o">.</span><span class="n">_call_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1126"><a href="#Config-1126"><span class="linenos">1126</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="p">:</span>
</span><span id="Config-1127"><a href="#Config-1127"><span class="linenos">1127</span></a>            <span class="n">fin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Config-1128"><a href="#Config-1128"><span class="linenos">1128</span></a>            <span class="n">fin</span><span class="p">()</span>
</span><span id="Config-1129"><a href="#Config-1129"><span class="linenos">1129</span></a>
</span><span id="Config-1130"><a href="#Config-1130"><span class="linenos">1130</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_terminal_writer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TerminalWriter</span><span class="p">:</span>
</span><span id="Config-1131"><a href="#Config-1131"><span class="linenos">1131</span></a>        <span class="n">terminalreporter</span><span class="p">:</span> <span class="n">TerminalReporter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
</span><span id="Config-1132"><a href="#Config-1132"><span class="linenos">1132</span></a>            <span class="s2">&quot;terminalreporter&quot;</span>
</span><span id="Config-1133"><a href="#Config-1133"><span class="linenos">1133</span></a>        <span class="p">)</span>
</span><span id="Config-1134"><a href="#Config-1134"><span class="linenos">1134</span></a>        <span class="k">assert</span> <span class="n">terminalreporter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Config-1135"><a href="#Config-1135"><span class="linenos">1135</span></a>        <span class="k">return</span> <span class="n">terminalreporter</span><span class="o">.</span><span class="n">_tw</span>
</span><span id="Config-1136"><a href="#Config-1136"><span class="linenos">1136</span></a>
</span><span id="Config-1137"><a href="#Config-1137"><span class="linenos">1137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_cmdline_parse</span><span class="p">(</span>
</span><span id="Config-1138"><a href="#Config-1138"><span class="linenos">1138</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="Config-1139"><a href="#Config-1139"><span class="linenos">1139</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Config-1140"><a href="#Config-1140"><span class="linenos">1140</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1141"><a href="#Config-1141"><span class="linenos">1141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config-1142"><a href="#Config-1142"><span class="linenos">1142</span></a>        <span class="k">except</span> <span class="n">UsageError</span><span class="p">:</span>
</span><span id="Config-1143"><a href="#Config-1143"><span class="linenos">1143</span></a>            <span class="c1"># Handle --version and --help here in a minimal fashion.</span>
</span><span id="Config-1144"><a href="#Config-1144"><span class="linenos">1144</span></a>            <span class="c1"># This gets done via helpconfig normally, but its</span>
</span><span id="Config-1145"><a href="#Config-1145"><span class="linenos">1145</span></a>            <span class="c1"># pytest_cmdline_main is not called in case of errors.</span>
</span><span id="Config-1146"><a href="#Config-1146"><span class="linenos">1146</span></a>            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;--version&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="Config-1147"><a href="#Config-1147"><span class="linenos">1147</span></a>                <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.helpconfig</span><span class="w"> </span><span class="kn">import</span> <span class="n">showversion</span>
</span><span id="Config-1148"><a href="#Config-1148"><span class="linenos">1148</span></a>
</span><span id="Config-1149"><a href="#Config-1149"><span class="linenos">1149</span></a>                <span class="n">showversion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Config-1150"><a href="#Config-1150"><span class="linenos">1150</span></a>            <span class="k">elif</span> <span class="p">(</span>
</span><span id="Config-1151"><a href="#Config-1151"><span class="linenos">1151</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;--help&quot;</span> <span class="ow">in</span> <span class="n">args</span> <span class="ow">or</span> <span class="s2">&quot;-h&quot;</span> <span class="ow">in</span> <span class="n">args</span>
</span><span id="Config-1152"><a href="#Config-1152"><span class="linenos">1152</span></a>            <span class="p">):</span>
</span><span id="Config-1153"><a href="#Config-1153"><span class="linenos">1153</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_getparser</span><span class="p">()</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
</span><span id="Config-1154"><a href="#Config-1154"><span class="linenos">1154</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
</span><span id="Config-1155"><a href="#Config-1155"><span class="linenos">1155</span></a>                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">NOTE: displaying only minimal help due to UsageError.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="Config-1156"><a href="#Config-1156"><span class="linenos">1156</span></a>                <span class="p">)</span>
</span><span id="Config-1157"><a href="#Config-1157"><span class="linenos">1157</span></a>
</span><span id="Config-1158"><a href="#Config-1158"><span class="linenos">1158</span></a>            <span class="k">raise</span>
</span><span id="Config-1159"><a href="#Config-1159"><span class="linenos">1159</span></a>
</span><span id="Config-1160"><a href="#Config-1160"><span class="linenos">1160</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Config-1161"><a href="#Config-1161"><span class="linenos">1161</span></a>
</span><span id="Config-1162"><a href="#Config-1162"><span class="linenos">1162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">notify_exception</span><span class="p">(</span>
</span><span id="Config-1163"><a href="#Config-1163"><span class="linenos">1163</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Config-1164"><a href="#Config-1164"><span class="linenos">1164</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="Config-1165"><a href="#Config-1165"><span class="linenos">1165</span></a>        <span class="n">option</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config-1166"><a href="#Config-1166"><span class="linenos">1166</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1167"><a href="#Config-1167"><span class="linenos">1167</span></a>        <span class="k">if</span> <span class="n">option</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;fulltrace&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Config-1168"><a href="#Config-1168"><span class="linenos">1168</span></a>            <span class="n">style</span><span class="p">:</span> <span class="n">TracebackStyle</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span>
</span><span id="Config-1169"><a href="#Config-1169"><span class="linenos">1169</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1170"><a href="#Config-1170"><span class="linenos">1170</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;native&quot;</span>
</span><span id="Config-1171"><a href="#Config-1171"><span class="linenos">1171</span></a>        <span class="n">excrepr</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">getrepr</span><span class="p">(</span>
</span><span id="Config-1172"><a href="#Config-1172"><span class="linenos">1172</span></a>            <span class="n">funcargs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showlocals</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;showlocals&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
</span><span id="Config-1173"><a href="#Config-1173"><span class="linenos">1173</span></a>        <span class="p">)</span>
</span><span id="Config-1174"><a href="#Config-1174"><span class="linenos">1174</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_internalerror</span><span class="p">(</span><span class="n">excrepr</span><span class="o">=</span><span class="n">excrepr</span><span class="p">,</span> <span class="n">excinfo</span><span class="o">=</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="Config-1175"><a href="#Config-1175"><span class="linenos">1175</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">res</span><span class="p">):</span>
</span><span id="Config-1176"><a href="#Config-1176"><span class="linenos">1176</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">excrepr</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="Config-1177"><a href="#Config-1177"><span class="linenos">1177</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INTERNALERROR&gt; </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Config-1178"><a href="#Config-1178"><span class="linenos">1178</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</span><span id="Config-1179"><a href="#Config-1179"><span class="linenos">1179</span></a>
</span><span id="Config-1180"><a href="#Config-1180"><span class="linenos">1180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cwd_relative_nodeid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Config-1181"><a href="#Config-1181"><span class="linenos">1181</span></a>        <span class="c1"># nodeid&#39;s are relative to the rootpath, compute relative to cwd.</span>
</span><span id="Config-1182"><a href="#Config-1182"><span class="linenos">1182</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span><span class="p">:</span>
</span><span id="Config-1183"><a href="#Config-1183"><span class="linenos">1183</span></a>            <span class="n">base_path_part</span><span class="p">,</span> <span class="o">*</span><span class="n">nodeid_part</span> <span class="o">=</span> <span class="n">nodeid</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">)</span>
</span><span id="Config-1184"><a href="#Config-1184"><span class="linenos">1184</span></a>            <span class="c1"># Only process path part</span>
</span><span id="Config-1185"><a href="#Config-1185"><span class="linenos">1185</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span> <span class="o">/</span> <span class="n">base_path_part</span>
</span><span id="Config-1186"><a href="#Config-1186"><span class="linenos">1186</span></a>            <span class="n">relative_path</span> <span class="o">=</span> <span class="n">bestrelpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">fullpath</span><span class="p">)</span>
</span><span id="Config-1187"><a href="#Config-1187"><span class="linenos">1187</span></a>
</span><span id="Config-1188"><a href="#Config-1188"><span class="linenos">1188</span></a>            <span class="n">nodeid</span> <span class="o">=</span> <span class="s2">&quot;::&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">relative_path</span><span class="p">,</span> <span class="o">*</span><span class="n">nodeid_part</span><span class="p">])</span>
</span><span id="Config-1189"><a href="#Config-1189"><span class="linenos">1189</span></a>        <span class="k">return</span> <span class="n">nodeid</span>
</span><span id="Config-1190"><a href="#Config-1190"><span class="linenos">1190</span></a>
</span><span id="Config-1191"><a href="#Config-1191"><span class="linenos">1191</span></a>    <span class="nd">@classmethod</span>
</span><span id="Config-1192"><a href="#Config-1192"><span class="linenos">1192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fromdictargs</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">option_dict</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Config-1193"><a href="#Config-1193"><span class="linenos">1193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor usable for subprocesses.&quot;&quot;&quot;</span>
</span><span id="Config-1194"><a href="#Config-1194"><span class="linenos">1194</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config-1195"><a href="#Config-1195"><span class="linenos">1195</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">option_dict</span><span class="p">)</span>
</span><span id="Config-1196"><a href="#Config-1196"><span class="linenos">1196</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">addopts</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Config-1197"><a href="#Config-1197"><span class="linenos">1197</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">plugins</span><span class="p">:</span>
</span><span id="Config-1198"><a href="#Config-1198"><span class="linenos">1198</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">consider_pluginarg</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="Config-1199"><a href="#Config-1199"><span class="linenos">1199</span></a>        <span class="k">return</span> <span class="n">config</span>
</span><span id="Config-1200"><a href="#Config-1200"><span class="linenos">1200</span></a>
</span><span id="Config-1201"><a href="#Config-1201"><span class="linenos">1201</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_processopt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opt</span><span class="p">:</span> <span class="n">Argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1202"><a href="#Config-1202"><span class="linenos">1202</span></a>        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">opt</span><span class="o">.</span><span class="n">_short_opts</span> <span class="o">+</span> <span class="n">opt</span><span class="o">.</span><span class="n">_long_opts</span><span class="p">:</span>
</span><span id="Config-1203"><a href="#Config-1203"><span class="linenos">1203</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_opt2dest</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">dest</span>
</span><span id="Config-1204"><a href="#Config-1204"><span class="linenos">1204</span></a>
</span><span id="Config-1205"><a href="#Config-1205"><span class="linenos">1205</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">opt</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">):</span>
</span><span id="Config-1206"><a href="#Config-1206"><span class="linenos">1206</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="n">opt</span><span class="o">.</span><span class="n">dest</span><span class="p">):</span>
</span><span id="Config-1207"><a href="#Config-1207"><span class="linenos">1207</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="n">opt</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="n">opt</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="Config-1208"><a href="#Config-1208"><span class="linenos">1208</span></a>
</span><span id="Config-1209"><a href="#Config-1209"><span class="linenos">1209</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">trylast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config-1210"><a href="#Config-1210"><span class="linenos">1210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_load_initial_conftests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">early_config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1211"><a href="#Config-1211"><span class="linenos">1211</span></a>        <span class="c1"># We haven&#39;t fully parsed the command line arguments yet, so</span>
</span><span id="Config-1212"><a href="#Config-1212"><span class="linenos">1212</span></a>        <span class="c1"># early_config.args it not set yet. But we need it for</span>
</span><span id="Config-1213"><a href="#Config-1213"><span class="linenos">1213</span></a>        <span class="c1"># discovering the initial conftests. So &quot;pre-run&quot; the logic here.</span>
</span><span id="Config-1214"><a href="#Config-1214"><span class="linenos">1214</span></a>        <span class="c1"># It will be done for real in `parse()`.</span>
</span><span id="Config-1215"><a href="#Config-1215"><span class="linenos">1215</span></a>        <span class="n">args</span><span class="p">,</span> <span class="n">args_source</span> <span class="o">=</span> <span class="n">early_config</span><span class="o">.</span><span class="n">_decide_args</span><span class="p">(</span>
</span><span id="Config-1216"><a href="#Config-1216"><span class="linenos">1216</span></a>            <span class="n">args</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">file_or_dir</span><span class="p">,</span>
</span><span id="Config-1217"><a href="#Config-1217"><span class="linenos">1217</span></a>            <span class="n">pyargs</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Config-1218"><a href="#Config-1218"><span class="linenos">1218</span></a>            <span class="n">testpaths</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;testpaths&quot;</span><span class="p">),</span>
</span><span id="Config-1219"><a href="#Config-1219"><span class="linenos">1219</span></a>            <span class="n">invocation_dir</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config-1220"><a href="#Config-1220"><span class="linenos">1220</span></a>            <span class="n">rootpath</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Config-1221"><a href="#Config-1221"><span class="linenos">1221</span></a>            <span class="n">warn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Config-1222"><a href="#Config-1222"><span class="linenos">1222</span></a>        <span class="p">)</span>
</span><span id="Config-1223"><a href="#Config-1223"><span class="linenos">1223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">_set_initial_conftests</span><span class="p">(</span>
</span><span id="Config-1224"><a href="#Config-1224"><span class="linenos">1224</span></a>            <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
</span><span id="Config-1225"><a href="#Config-1225"><span class="linenos">1225</span></a>            <span class="n">pyargs</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Config-1226"><a href="#Config-1226"><span class="linenos">1226</span></a>            <span class="n">noconftest</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">noconftest</span><span class="p">,</span>
</span><span id="Config-1227"><a href="#Config-1227"><span class="linenos">1227</span></a>            <span class="n">rootpath</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Config-1228"><a href="#Config-1228"><span class="linenos">1228</span></a>            <span class="n">confcutdir</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">confcutdir</span><span class="p">,</span>
</span><span id="Config-1229"><a href="#Config-1229"><span class="linenos">1229</span></a>            <span class="n">invocation_dir</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config-1230"><a href="#Config-1230"><span class="linenos">1230</span></a>            <span class="n">importmode</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">importmode</span><span class="p">,</span>
</span><span id="Config-1231"><a href="#Config-1231"><span class="linenos">1231</span></a>            <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span>
</span><span id="Config-1232"><a href="#Config-1232"><span class="linenos">1232</span></a>                <span class="s2">&quot;consider_namespace_packages&quot;</span>
</span><span id="Config-1233"><a href="#Config-1233"><span class="linenos">1233</span></a>            <span class="p">),</span>
</span><span id="Config-1234"><a href="#Config-1234"><span class="linenos">1234</span></a>        <span class="p">)</span>
</span><span id="Config-1235"><a href="#Config-1235"><span class="linenos">1235</span></a>
</span><span id="Config-1236"><a href="#Config-1236"><span class="linenos">1236</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_initini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1237"><a href="#Config-1237"><span class="linenos">1237</span></a>        <span class="n">ns</span><span class="p">,</span> <span class="n">unknown_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_known_and_unknown_args</span><span class="p">(</span>
</span><span id="Config-1238"><a href="#Config-1238"><span class="linenos">1238</span></a>            <span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">)</span>
</span><span id="Config-1239"><a href="#Config-1239"><span class="linenos">1239</span></a>        <span class="p">)</span>
</span><span id="Config-1240"><a href="#Config-1240"><span class="linenos">1240</span></a>        <span class="n">rootpath</span><span class="p">,</span> <span class="n">inipath</span><span class="p">,</span> <span class="n">inicfg</span> <span class="o">=</span> <span class="n">determine_setup</span><span class="p">(</span>
</span><span id="Config-1241"><a href="#Config-1241"><span class="linenos">1241</span></a>            <span class="n">inifile</span><span class="o">=</span><span class="n">ns</span><span class="o">.</span><span class="n">inifilename</span><span class="p">,</span>
</span><span id="Config-1242"><a href="#Config-1242"><span class="linenos">1242</span></a>            <span class="n">args</span><span class="o">=</span><span class="n">ns</span><span class="o">.</span><span class="n">file_or_dir</span> <span class="o">+</span> <span class="n">unknown_args</span><span class="p">,</span>
</span><span id="Config-1243"><a href="#Config-1243"><span class="linenos">1243</span></a>            <span class="n">rootdir_cmd_arg</span><span class="o">=</span><span class="n">ns</span><span class="o">.</span><span class="n">rootdir</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config-1244"><a href="#Config-1244"><span class="linenos">1244</span></a>            <span class="n">invocation_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config-1245"><a href="#Config-1245"><span class="linenos">1245</span></a>        <span class="p">)</span>
</span><span id="Config-1246"><a href="#Config-1246"><span class="linenos">1246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rootpath</span> <span class="o">=</span> <span class="n">rootpath</span>
</span><span id="Config-1247"><a href="#Config-1247"><span class="linenos">1247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inipath</span> <span class="o">=</span> <span class="n">inipath</span>
</span><span id="Config-1248"><a href="#Config-1248"><span class="linenos">1248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">inicfg</span> <span class="o">=</span> <span class="n">inicfg</span>
</span><span id="Config-1249"><a href="#Config-1249"><span class="linenos">1249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">extra_info</span><span class="p">[</span><span class="s2">&quot;rootdir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span><span id="Config-1250"><a href="#Config-1250"><span class="linenos">1250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">extra_info</span><span class="p">[</span><span class="s2">&quot;inifile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inipath</span><span class="p">)</span>
</span><span id="Config-1251"><a href="#Config-1251"><span class="linenos">1251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">addini</span><span class="p">(</span><span class="s2">&quot;addopts&quot;</span><span class="p">,</span> <span class="s2">&quot;Extra command line options&quot;</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">)</span>
</span><span id="Config-1252"><a href="#Config-1252"><span class="linenos">1252</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">addini</span><span class="p">(</span><span class="s2">&quot;minversion&quot;</span><span class="p">,</span> <span class="s2">&quot;Minimally required pytest version&quot;</span><span class="p">)</span>
</span><span id="Config-1253"><a href="#Config-1253"><span class="linenos">1253</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">addini</span><span class="p">(</span>
</span><span id="Config-1254"><a href="#Config-1254"><span class="linenos">1254</span></a>            <span class="s2">&quot;required_plugins&quot;</span><span class="p">,</span>
</span><span id="Config-1255"><a href="#Config-1255"><span class="linenos">1255</span></a>            <span class="s2">&quot;Plugins that must be present for pytest to run&quot;</span><span class="p">,</span>
</span><span id="Config-1256"><a href="#Config-1256"><span class="linenos">1256</span></a>            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;args&quot;</span><span class="p">,</span>
</span><span id="Config-1257"><a href="#Config-1257"><span class="linenos">1257</span></a>            <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
</span><span id="Config-1258"><a href="#Config-1258"><span class="linenos">1258</span></a>        <span class="p">)</span>
</span><span id="Config-1259"><a href="#Config-1259"><span class="linenos">1259</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_override_ini</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">override_ini</span> <span class="ow">or</span> <span class="p">()</span>
</span><span id="Config-1260"><a href="#Config-1260"><span class="linenos">1260</span></a>
</span><span id="Config-1261"><a href="#Config-1261"><span class="linenos">1261</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_consider_importhook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1262"><a href="#Config-1262"><span class="linenos">1262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Install the PEP 302 import hook if using assertion rewriting.</span>
</span><span id="Config-1263"><a href="#Config-1263"><span class="linenos">1263</span></a>
</span><span id="Config-1264"><a href="#Config-1264"><span class="linenos">1264</span></a><span class="sd">        Needs to parse the --assert=&lt;mode&gt; option from the commandline</span>
</span><span id="Config-1265"><a href="#Config-1265"><span class="linenos">1265</span></a><span class="sd">        and find all the installed plugins to mark them for rewriting</span>
</span><span id="Config-1266"><a href="#Config-1266"><span class="linenos">1266</span></a><span class="sd">        by the importhook.</span>
</span><span id="Config-1267"><a href="#Config-1267"><span class="linenos">1267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1268"><a href="#Config-1268"><span class="linenos">1268</span></a>        <span class="n">ns</span><span class="p">,</span> <span class="n">unknown_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_known_and_unknown_args</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config-1269"><a href="#Config-1269"><span class="linenos">1269</span></a>        <span class="n">mode</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ns</span><span class="p">,</span> <span class="s2">&quot;assertmode&quot;</span><span class="p">,</span> <span class="s2">&quot;plain&quot;</span><span class="p">)</span>
</span><span id="Config-1270"><a href="#Config-1270"><span class="linenos">1270</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;rewrite&quot;</span><span class="p">:</span>
</span><span id="Config-1271"><a href="#Config-1271"><span class="linenos">1271</span></a>            <span class="kn">import</span><span class="w"> </span><span class="nn">_pytest.assertion</span>
</span><span id="Config-1272"><a href="#Config-1272"><span class="linenos">1272</span></a>
</span><span id="Config-1273"><a href="#Config-1273"><span class="linenos">1273</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1274"><a href="#Config-1274"><span class="linenos">1274</span></a>                <span class="n">hook</span> <span class="o">=</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">assertion</span><span class="o">.</span><span class="n">install_importhook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Config-1275"><a href="#Config-1275"><span class="linenos">1275</span></a>            <span class="k">except</span> <span class="ne">SystemError</span><span class="p">:</span>
</span><span id="Config-1276"><a href="#Config-1276"><span class="linenos">1276</span></a>                <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;plain&quot;</span>
</span><span id="Config-1277"><a href="#Config-1277"><span class="linenos">1277</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1278"><a href="#Config-1278"><span class="linenos">1278</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mark_plugins_for_rewrite</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span><span id="Config-1279"><a href="#Config-1279"><span class="linenos">1279</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_warn_about_missing_assertion</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="Config-1280"><a href="#Config-1280"><span class="linenos">1280</span></a>
</span><span id="Config-1281"><a href="#Config-1281"><span class="linenos">1281</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_mark_plugins_for_rewrite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1282"><a href="#Config-1282"><span class="linenos">1282</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Given an importhook, mark for rewrite any top-level</span>
</span><span id="Config-1283"><a href="#Config-1283"><span class="linenos">1283</span></a><span class="sd">        modules or packages in the distribution package for</span>
</span><span id="Config-1284"><a href="#Config-1284"><span class="linenos">1284</span></a><span class="sd">        all pytest plugins.&quot;&quot;&quot;</span>
</span><span id="Config-1285"><a href="#Config-1285"><span class="linenos">1285</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">rewrite_hook</span> <span class="o">=</span> <span class="n">hook</span>
</span><span id="Config-1286"><a href="#Config-1286"><span class="linenos">1286</span></a>
</span><span id="Config-1287"><a href="#Config-1287"><span class="linenos">1287</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_DISABLE_PLUGIN_AUTOLOAD&quot;</span><span class="p">):</span>
</span><span id="Config-1288"><a href="#Config-1288"><span class="linenos">1288</span></a>            <span class="c1"># We don&#39;t autoload from distribution package entry points,</span>
</span><span id="Config-1289"><a href="#Config-1289"><span class="linenos">1289</span></a>            <span class="c1"># no need to continue.</span>
</span><span id="Config-1290"><a href="#Config-1290"><span class="linenos">1290</span></a>            <span class="k">return</span>
</span><span id="Config-1291"><a href="#Config-1291"><span class="linenos">1291</span></a>
</span><span id="Config-1292"><a href="#Config-1292"><span class="linenos">1292</span></a>        <span class="n">package_files</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1293"><a href="#Config-1293"><span class="linenos">1293</span></a>            <span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="Config-1294"><a href="#Config-1294"><span class="linenos">1294</span></a>            <span class="k">for</span> <span class="n">dist</span> <span class="ow">in</span> <span class="n">importlib</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">distributions</span><span class="p">()</span>
</span><span id="Config-1295"><a href="#Config-1295"><span class="linenos">1295</span></a>            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">ep</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="s2">&quot;pytest11&quot;</span> <span class="k">for</span> <span class="n">ep</span> <span class="ow">in</span> <span class="n">dist</span><span class="o">.</span><span class="n">entry_points</span><span class="p">)</span>
</span><span id="Config-1296"><a href="#Config-1296"><span class="linenos">1296</span></a>            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">dist</span><span class="o">.</span><span class="n">files</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="Config-1297"><a href="#Config-1297"><span class="linenos">1297</span></a>        <span class="p">)</span>
</span><span id="Config-1298"><a href="#Config-1298"><span class="linenos">1298</span></a>
</span><span id="Config-1299"><a href="#Config-1299"><span class="linenos">1299</span></a>        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_iter_rewritable_modules</span><span class="p">(</span><span class="n">package_files</span><span class="p">):</span>
</span><span id="Config-1300"><a href="#Config-1300"><span class="linenos">1300</span></a>            <span class="n">hook</span><span class="o">.</span><span class="n">mark_rewrite</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config-1301"><a href="#Config-1301"><span class="linenos">1301</span></a>
</span><span id="Config-1302"><a href="#Config-1302"><span class="linenos">1302</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">via</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Config-1303"><a href="#Config-1303"><span class="linenos">1303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate known args.&quot;&quot;&quot;</span>
</span><span id="Config-1304"><a href="#Config-1304"><span class="linenos">1304</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_config_source_hint</span> <span class="o">=</span> <span class="n">via</span>  <span class="c1"># type: ignore</span>
</span><span id="Config-1305"><a href="#Config-1305"><span class="linenos">1305</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1306"><a href="#Config-1306"><span class="linenos">1306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_known_and_unknown_args</span><span class="p">(</span>
</span><span id="Config-1307"><a href="#Config-1307"><span class="linenos">1307</span></a>                <span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">)</span>
</span><span id="Config-1308"><a href="#Config-1308"><span class="linenos">1308</span></a>            <span class="p">)</span>
</span><span id="Config-1309"><a href="#Config-1309"><span class="linenos">1309</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Config-1310"><a href="#Config-1310"><span class="linenos">1310</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_config_source_hint</span>  <span class="c1"># type: ignore</span>
</span><span id="Config-1311"><a href="#Config-1311"><span class="linenos">1311</span></a>
</span><span id="Config-1312"><a href="#Config-1312"><span class="linenos">1312</span></a>        <span class="k">return</span> <span class="n">args</span>
</span><span id="Config-1313"><a href="#Config-1313"><span class="linenos">1313</span></a>
</span><span id="Config-1314"><a href="#Config-1314"><span class="linenos">1314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_decide_args</span><span class="p">(</span>
</span><span id="Config-1315"><a href="#Config-1315"><span class="linenos">1315</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Config-1316"><a href="#Config-1316"><span class="linenos">1316</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Config-1317"><a href="#Config-1317"><span class="linenos">1317</span></a>        <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Config-1318"><a href="#Config-1318"><span class="linenos">1318</span></a>        <span class="n">pyargs</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Config-1319"><a href="#Config-1319"><span class="linenos">1319</span></a>        <span class="n">testpaths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Config-1320"><a href="#Config-1320"><span class="linenos">1320</span></a>        <span class="n">invocation_dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="Config-1321"><a href="#Config-1321"><span class="linenos">1321</span></a>        <span class="n">rootpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="Config-1322"><a href="#Config-1322"><span class="linenos">1322</span></a>        <span class="n">warn</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Config-1323"><a href="#Config-1323"><span class="linenos">1323</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">ArgsSource</span><span class="p">]:</span>
</span><span id="Config-1324"><a href="#Config-1324"><span class="linenos">1324</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Decide the args (initial paths/nodeids) to use given the relevant inputs.</span>
</span><span id="Config-1325"><a href="#Config-1325"><span class="linenos">1325</span></a>
</span><span id="Config-1326"><a href="#Config-1326"><span class="linenos">1326</span></a><span class="sd">        :param warn: Whether can issue warnings.</span>
</span><span id="Config-1327"><a href="#Config-1327"><span class="linenos">1327</span></a>
</span><span id="Config-1328"><a href="#Config-1328"><span class="linenos">1328</span></a><span class="sd">        :returns: The args and the args source. Guaranteed to be non-empty.</span>
</span><span id="Config-1329"><a href="#Config-1329"><span class="linenos">1329</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1330"><a href="#Config-1330"><span class="linenos">1330</span></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
</span><span id="Config-1331"><a href="#Config-1331"><span class="linenos">1331</span></a>            <span class="n">source</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">ArgsSource</span><span class="o">.</span><span class="n">ARGS</span>
</span><span id="Config-1332"><a href="#Config-1332"><span class="linenos">1332</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">args</span>
</span><span id="Config-1333"><a href="#Config-1333"><span class="linenos">1333</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1334"><a href="#Config-1334"><span class="linenos">1334</span></a>            <span class="k">if</span> <span class="n">invocation_dir</span> <span class="o">==</span> <span class="n">rootpath</span><span class="p">:</span>
</span><span id="Config-1335"><a href="#Config-1335"><span class="linenos">1335</span></a>                <span class="n">source</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">ArgsSource</span><span class="o">.</span><span class="n">TESTPATHS</span>
</span><span id="Config-1336"><a href="#Config-1336"><span class="linenos">1336</span></a>                <span class="k">if</span> <span class="n">pyargs</span><span class="p">:</span>
</span><span id="Config-1337"><a href="#Config-1337"><span class="linenos">1337</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="n">testpaths</span>
</span><span id="Config-1338"><a href="#Config-1338"><span class="linenos">1338</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1339"><a href="#Config-1339"><span class="linenos">1339</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1340"><a href="#Config-1340"><span class="linenos">1340</span></a>                    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">testpaths</span><span class="p">:</span>
</span><span id="Config-1341"><a href="#Config-1341"><span class="linenos">1341</span></a>                        <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">iglob</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
</span><span id="Config-1342"><a href="#Config-1342"><span class="linenos">1342</span></a>                    <span class="k">if</span> <span class="n">testpaths</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
</span><span id="Config-1343"><a href="#Config-1343"><span class="linenos">1343</span></a>                        <span class="k">if</span> <span class="n">warn</span><span class="p">:</span>
</span><span id="Config-1344"><a href="#Config-1344"><span class="linenos">1344</span></a>                            <span class="n">warning_text</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1345"><a href="#Config-1345"><span class="linenos">1345</span></a>                                <span class="s2">&quot;No files were found in testpaths; &quot;</span>
</span><span id="Config-1346"><a href="#Config-1346"><span class="linenos">1346</span></a>                                <span class="s2">&quot;consider removing or adjusting your testpaths configuration. &quot;</span>
</span><span id="Config-1347"><a href="#Config-1347"><span class="linenos">1347</span></a>                                <span class="s2">&quot;Searching recursively from the current directory instead.&quot;</span>
</span><span id="Config-1348"><a href="#Config-1348"><span class="linenos">1348</span></a>                            <span class="p">)</span>
</span><span id="Config-1349"><a href="#Config-1349"><span class="linenos">1349</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">issue_config_time_warning</span><span class="p">(</span>
</span><span id="Config-1350"><a href="#Config-1350"><span class="linenos">1350</span></a>                                <span class="n">PytestConfigWarning</span><span class="p">(</span><span class="n">warning_text</span><span class="p">),</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span>
</span><span id="Config-1351"><a href="#Config-1351"><span class="linenos">1351</span></a>                            <span class="p">)</span>
</span><span id="Config-1352"><a href="#Config-1352"><span class="linenos">1352</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1353"><a href="#Config-1353"><span class="linenos">1353</span></a>                <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1354"><a href="#Config-1354"><span class="linenos">1354</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
</span><span id="Config-1355"><a href="#Config-1355"><span class="linenos">1355</span></a>                <span class="n">source</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">ArgsSource</span><span class="o">.</span><span class="n">INVOCATION_DIR</span>
</span><span id="Config-1356"><a href="#Config-1356"><span class="linenos">1356</span></a>                <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">invocation_dir</span><span class="p">)]</span>
</span><span id="Config-1357"><a href="#Config-1357"><span class="linenos">1357</span></a>        <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">source</span>
</span><span id="Config-1358"><a href="#Config-1358"><span class="linenos">1358</span></a>
</span><span id="Config-1359"><a href="#Config-1359"><span class="linenos">1359</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_preparse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">addopts</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1360"><a href="#Config-1360"><span class="linenos">1360</span></a>        <span class="k">if</span> <span class="n">addopts</span><span class="p">:</span>
</span><span id="Config-1361"><a href="#Config-1361"><span class="linenos">1361</span></a>            <span class="n">env_addopts</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_ADDOPTS&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="Config-1362"><a href="#Config-1362"><span class="linenos">1362</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">env_addopts</span><span class="p">):</span>
</span><span id="Config-1363"><a href="#Config-1363"><span class="linenos">1363</span></a>                <span class="n">args</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1364"><a href="#Config-1364"><span class="linenos">1364</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_args</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">env_addopts</span><span class="p">),</span> <span class="s2">&quot;via PYTEST_ADDOPTS&quot;</span><span class="p">)</span>
</span><span id="Config-1365"><a href="#Config-1365"><span class="linenos">1365</span></a>                    <span class="o">+</span> <span class="n">args</span>
</span><span id="Config-1366"><a href="#Config-1366"><span class="linenos">1366</span></a>                <span class="p">)</span>
</span><span id="Config-1367"><a href="#Config-1367"><span class="linenos">1367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initini</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config-1368"><a href="#Config-1368"><span class="linenos">1368</span></a>        <span class="k">if</span> <span class="n">addopts</span><span class="p">:</span>
</span><span id="Config-1369"><a href="#Config-1369"><span class="linenos">1369</span></a>            <span class="n">args</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1370"><a href="#Config-1370"><span class="linenos">1370</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_args</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;addopts&quot;</span><span class="p">),</span> <span class="s2">&quot;via addopts config&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">args</span>
</span><span id="Config-1371"><a href="#Config-1371"><span class="linenos">1371</span></a>            <span class="p">)</span>
</span><span id="Config-1372"><a href="#Config-1372"><span class="linenos">1372</span></a>
</span><span id="Config-1373"><a href="#Config-1373"><span class="linenos">1373</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span>
</span><span id="Config-1374"><a href="#Config-1374"><span class="linenos">1374</span></a>            <span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">)</span>
</span><span id="Config-1375"><a href="#Config-1375"><span class="linenos">1375</span></a>        <span class="p">)</span>
</span><span id="Config-1376"><a href="#Config-1376"><span class="linenos">1376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_checkversion</span><span class="p">()</span>
</span><span id="Config-1377"><a href="#Config-1377"><span class="linenos">1377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_consider_importhook</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config-1378"><a href="#Config-1378"><span class="linenos">1378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">consider_preparse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">exclude_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Config-1379"><a href="#Config-1379"><span class="linenos">1379</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_DISABLE_PLUGIN_AUTOLOAD&quot;</span><span class="p">):</span>
</span><span id="Config-1380"><a href="#Config-1380"><span class="linenos">1380</span></a>            <span class="c1"># Don&#39;t autoload from distribution package entry point. Only</span>
</span><span id="Config-1381"><a href="#Config-1381"><span class="linenos">1381</span></a>            <span class="c1"># explicitly specified plugins are going to be loaded.</span>
</span><span id="Config-1382"><a href="#Config-1382"><span class="linenos">1382</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">load_setuptools_entrypoints</span><span class="p">(</span><span class="s2">&quot;pytest11&quot;</span><span class="p">)</span>
</span><span id="Config-1383"><a href="#Config-1383"><span class="linenos">1383</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">consider_env</span><span class="p">()</span>
</span><span id="Config-1384"><a href="#Config-1384"><span class="linenos">1384</span></a>
</span><span id="Config-1385"><a href="#Config-1385"><span class="linenos">1385</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span>
</span><span id="Config-1386"><a href="#Config-1386"><span class="linenos">1386</span></a>            <span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="p">)</span>
</span><span id="Config-1387"><a href="#Config-1387"><span class="linenos">1387</span></a>        <span class="p">)</span>
</span><span id="Config-1388"><a href="#Config-1388"><span class="linenos">1388</span></a>
</span><span id="Config-1389"><a href="#Config-1389"><span class="linenos">1389</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_plugins</span><span class="p">()</span>
</span><span id="Config-1390"><a href="#Config-1390"><span class="linenos">1390</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_warn_about_skipped_plugins</span><span class="p">()</span>
</span><span id="Config-1391"><a href="#Config-1391"><span class="linenos">1391</span></a>
</span><span id="Config-1392"><a href="#Config-1392"><span class="linenos">1392</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">confcutdir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1393"><a href="#Config-1393"><span class="linenos">1393</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inipath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1394"><a href="#Config-1394"><span class="linenos">1394</span></a>                <span class="n">confcutdir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inipath</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</span><span id="Config-1395"><a href="#Config-1395"><span class="linenos">1395</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1396"><a href="#Config-1396"><span class="linenos">1396</span></a>                <span class="n">confcutdir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span><span id="Config-1397"><a href="#Config-1397"><span class="linenos">1397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">confcutdir</span> <span class="o">=</span> <span class="n">confcutdir</span>
</span><span id="Config-1398"><a href="#Config-1398"><span class="linenos">1398</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1399"><a href="#Config-1399"><span class="linenos">1399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_load_initial_conftests</span><span class="p">(</span>
</span><span id="Config-1400"><a href="#Config-1400"><span class="linenos">1400</span></a>                <span class="n">early_config</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span>
</span><span id="Config-1401"><a href="#Config-1401"><span class="linenos">1401</span></a>            <span class="p">)</span>
</span><span id="Config-1402"><a href="#Config-1402"><span class="linenos">1402</span></a>        <span class="k">except</span> <span class="n">ConftestImportFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Config-1403"><a href="#Config-1403"><span class="linenos">1403</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">help</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
</span><span id="Config-1404"><a href="#Config-1404"><span class="linenos">1404</span></a>                <span class="c1"># we don&#39;t want to prevent --help/--version to work</span>
</span><span id="Config-1405"><a href="#Config-1405"><span class="linenos">1405</span></a>                <span class="c1"># so just let is pass and print a warning at the end</span>
</span><span id="Config-1406"><a href="#Config-1406"><span class="linenos">1406</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">issue_config_time_warning</span><span class="p">(</span>
</span><span id="Config-1407"><a href="#Config-1407"><span class="linenos">1407</span></a>                    <span class="n">PytestConfigWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;could not load initial conftests: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="Config-1408"><a href="#Config-1408"><span class="linenos">1408</span></a>                    <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="Config-1409"><a href="#Config-1409"><span class="linenos">1409</span></a>                <span class="p">)</span>
</span><span id="Config-1410"><a href="#Config-1410"><span class="linenos">1410</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1411"><a href="#Config-1411"><span class="linenos">1411</span></a>                <span class="k">raise</span>
</span><span id="Config-1412"><a href="#Config-1412"><span class="linenos">1412</span></a>
</span><span id="Config-1413"><a href="#Config-1413"><span class="linenos">1413</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">wrapper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config-1414"><a href="#Config-1414"><span class="linenos">1414</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">]:</span>
</span><span id="Config-1415"><a href="#Config-1415"><span class="linenos">1415</span></a>        <span class="c1"># Validate invalid ini keys after collection is done so we take in account</span>
</span><span id="Config-1416"><a href="#Config-1416"><span class="linenos">1416</span></a>        <span class="c1"># options added by late-loading conftest files.</span>
</span><span id="Config-1417"><a href="#Config-1417"><span class="linenos">1417</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1418"><a href="#Config-1418"><span class="linenos">1418</span></a>            <span class="k">return</span> <span class="p">(</span><span class="k">yield</span><span class="p">)</span>
</span><span id="Config-1419"><a href="#Config-1419"><span class="linenos">1419</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Config-1420"><a href="#Config-1420"><span class="linenos">1420</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_config_options</span><span class="p">()</span>
</span><span id="Config-1421"><a href="#Config-1421"><span class="linenos">1421</span></a>
</span><span id="Config-1422"><a href="#Config-1422"><span class="linenos">1422</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_checkversion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1423"><a href="#Config-1423"><span class="linenos">1423</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
</span><span id="Config-1424"><a href="#Config-1424"><span class="linenos">1424</span></a>
</span><span id="Config-1425"><a href="#Config-1425"><span class="linenos">1425</span></a>        <span class="n">minver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inicfg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minversion&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Config-1426"><a href="#Config-1426"><span class="linenos">1426</span></a>        <span class="k">if</span> <span class="n">minver</span><span class="p">:</span>
</span><span id="Config-1427"><a href="#Config-1427"><span class="linenos">1427</span></a>            <span class="c1"># Imported lazily to improve start-up time.</span>
</span><span id="Config-1428"><a href="#Config-1428"><span class="linenos">1428</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">packaging.version</span><span class="w"> </span><span class="kn">import</span> <span class="n">Version</span>
</span><span id="Config-1429"><a href="#Config-1429"><span class="linenos">1429</span></a>
</span><span id="Config-1430"><a href="#Config-1430"><span class="linenos">1430</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">minver</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Config-1431"><a href="#Config-1431"><span class="linenos">1431</span></a>                <span class="k">raise</span> <span class="n">pytest</span><span class="o">.</span><span class="n">UsageError</span><span class="p">(</span>
</span><span id="Config-1432"><a href="#Config-1432"><span class="linenos">1432</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">inipath</span><span class="si">}</span><span class="s2">: &#39;minversion&#39; must be a single value&quot;</span>
</span><span id="Config-1433"><a href="#Config-1433"><span class="linenos">1433</span></a>                <span class="p">)</span>
</span><span id="Config-1434"><a href="#Config-1434"><span class="linenos">1434</span></a>
</span><span id="Config-1435"><a href="#Config-1435"><span class="linenos">1435</span></a>            <span class="k">if</span> <span class="n">Version</span><span class="p">(</span><span class="n">minver</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">Version</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">__version__</span><span class="p">):</span>
</span><span id="Config-1436"><a href="#Config-1436"><span class="linenos">1436</span></a>                <span class="k">raise</span> <span class="n">pytest</span><span class="o">.</span><span class="n">UsageError</span><span class="p">(</span>
</span><span id="Config-1437"><a href="#Config-1437"><span class="linenos">1437</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">inipath</span><span class="si">}</span><span class="s2">: &#39;minversion&#39; requires pytest-</span><span class="si">{</span><span class="n">minver</span><span class="si">}</span><span class="s2">, actual pytest-</span><span class="si">{</span><span class="n">pytest</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="Config-1438"><a href="#Config-1438"><span class="linenos">1438</span></a>                <span class="p">)</span>
</span><span id="Config-1439"><a href="#Config-1439"><span class="linenos">1439</span></a>
</span><span id="Config-1440"><a href="#Config-1440"><span class="linenos">1440</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_config_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1441"><a href="#Config-1441"><span class="linenos">1441</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unknown_ini_keys</span><span class="p">()):</span>
</span><span id="Config-1442"><a href="#Config-1442"><span class="linenos">1442</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_warn_or_fail_if_strict</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown config option: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Config-1443"><a href="#Config-1443"><span class="linenos">1443</span></a>
</span><span id="Config-1444"><a href="#Config-1444"><span class="linenos">1444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_plugins</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1445"><a href="#Config-1445"><span class="linenos">1445</span></a>        <span class="n">required_plugins</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;required_plugins&quot;</span><span class="p">))</span>
</span><span id="Config-1446"><a href="#Config-1446"><span class="linenos">1446</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">required_plugins</span><span class="p">:</span>
</span><span id="Config-1447"><a href="#Config-1447"><span class="linenos">1447</span></a>            <span class="k">return</span>
</span><span id="Config-1448"><a href="#Config-1448"><span class="linenos">1448</span></a>
</span><span id="Config-1449"><a href="#Config-1449"><span class="linenos">1449</span></a>        <span class="c1"># Imported lazily to improve start-up time.</span>
</span><span id="Config-1450"><a href="#Config-1450"><span class="linenos">1450</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">packaging.requirements</span><span class="w"> </span><span class="kn">import</span> <span class="n">InvalidRequirement</span>
</span><span id="Config-1451"><a href="#Config-1451"><span class="linenos">1451</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">packaging.requirements</span><span class="w"> </span><span class="kn">import</span> <span class="n">Requirement</span>
</span><span id="Config-1452"><a href="#Config-1452"><span class="linenos">1452</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">packaging.version</span><span class="w"> </span><span class="kn">import</span> <span class="n">Version</span>
</span><span id="Config-1453"><a href="#Config-1453"><span class="linenos">1453</span></a>
</span><span id="Config-1454"><a href="#Config-1454"><span class="linenos">1454</span></a>        <span class="n">plugin_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">list_plugin_distinfo</span><span class="p">()</span>
</span><span id="Config-1455"><a href="#Config-1455"><span class="linenos">1455</span></a>        <span class="n">plugin_dist_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">dist</span><span class="o">.</span><span class="n">project_name</span><span class="p">:</span> <span class="n">dist</span><span class="o">.</span><span class="n">version</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">dist</span> <span class="ow">in</span> <span class="n">plugin_info</span><span class="p">}</span>
</span><span id="Config-1456"><a href="#Config-1456"><span class="linenos">1456</span></a>
</span><span id="Config-1457"><a href="#Config-1457"><span class="linenos">1457</span></a>        <span class="n">missing_plugins</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1458"><a href="#Config-1458"><span class="linenos">1458</span></a>        <span class="k">for</span> <span class="n">required_plugin</span> <span class="ow">in</span> <span class="n">required_plugins</span><span class="p">:</span>
</span><span id="Config-1459"><a href="#Config-1459"><span class="linenos">1459</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1460"><a href="#Config-1460"><span class="linenos">1460</span></a>                <span class="n">req</span> <span class="o">=</span> <span class="n">Requirement</span><span class="p">(</span><span class="n">required_plugin</span><span class="p">)</span>
</span><span id="Config-1461"><a href="#Config-1461"><span class="linenos">1461</span></a>            <span class="k">except</span> <span class="n">InvalidRequirement</span><span class="p">:</span>
</span><span id="Config-1462"><a href="#Config-1462"><span class="linenos">1462</span></a>                <span class="n">missing_plugins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">required_plugin</span><span class="p">)</span>
</span><span id="Config-1463"><a href="#Config-1463"><span class="linenos">1463</span></a>                <span class="k">continue</span>
</span><span id="Config-1464"><a href="#Config-1464"><span class="linenos">1464</span></a>
</span><span id="Config-1465"><a href="#Config-1465"><span class="linenos">1465</span></a>            <span class="k">if</span> <span class="n">req</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plugin_dist_info</span><span class="p">:</span>
</span><span id="Config-1466"><a href="#Config-1466"><span class="linenos">1466</span></a>                <span class="n">missing_plugins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">required_plugin</span><span class="p">)</span>
</span><span id="Config-1467"><a href="#Config-1467"><span class="linenos">1467</span></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">req</span><span class="o">.</span><span class="n">specifier</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
</span><span id="Config-1468"><a href="#Config-1468"><span class="linenos">1468</span></a>                <span class="n">Version</span><span class="p">(</span><span class="n">plugin_dist_info</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">name</span><span class="p">]),</span> <span class="n">prereleases</span><span class="o">=</span><span class="kc">True</span>
</span><span id="Config-1469"><a href="#Config-1469"><span class="linenos">1469</span></a>            <span class="p">):</span>
</span><span id="Config-1470"><a href="#Config-1470"><span class="linenos">1470</span></a>                <span class="n">missing_plugins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">required_plugin</span><span class="p">)</span>
</span><span id="Config-1471"><a href="#Config-1471"><span class="linenos">1471</span></a>
</span><span id="Config-1472"><a href="#Config-1472"><span class="linenos">1472</span></a>        <span class="k">if</span> <span class="n">missing_plugins</span><span class="p">:</span>
</span><span id="Config-1473"><a href="#Config-1473"><span class="linenos">1473</span></a>            <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span>
</span><span id="Config-1474"><a href="#Config-1474"><span class="linenos">1474</span></a>                <span class="s2">&quot;Missing required plugins: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">missing_plugins</span><span class="p">)),</span>
</span><span id="Config-1475"><a href="#Config-1475"><span class="linenos">1475</span></a>            <span class="p">)</span>
</span><span id="Config-1476"><a href="#Config-1476"><span class="linenos">1476</span></a>
</span><span id="Config-1477"><a href="#Config-1477"><span class="linenos">1477</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_warn_or_fail_if_strict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1478"><a href="#Config-1478"><span class="linenos">1478</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">strict_config</span><span class="p">:</span>
</span><span id="Config-1479"><a href="#Config-1479"><span class="linenos">1479</span></a>            <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="Config-1480"><a href="#Config-1480"><span class="linenos">1480</span></a>
</span><span id="Config-1481"><a href="#Config-1481"><span class="linenos">1481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">issue_config_time_warning</span><span class="p">(</span><span class="n">PytestConfigWarning</span><span class="p">(</span><span class="n">message</span><span class="p">),</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="Config-1482"><a href="#Config-1482"><span class="linenos">1482</span></a>
</span><span id="Config-1483"><a href="#Config-1483"><span class="linenos">1483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_unknown_ini_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Config-1484"><a href="#Config-1484"><span class="linenos">1484</span></a>        <span class="n">parser_inicfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_inidict</span>
</span><span id="Config-1485"><a href="#Config-1485"><span class="linenos">1485</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inicfg</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parser_inicfg</span><span class="p">]</span>
</span><span id="Config-1486"><a href="#Config-1486"><span class="linenos">1486</span></a>
</span><span id="Config-1487"><a href="#Config-1487"><span class="linenos">1487</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">addopts</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1488"><a href="#Config-1488"><span class="linenos">1488</span></a>        <span class="c1"># Parse given cmdline arguments into this config object.</span>
</span><span id="Config-1489"><a href="#Config-1489"><span class="linenos">1489</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="Config-1490"><a href="#Config-1490"><span class="linenos">1490</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">[]</span>
</span><span id="Config-1491"><a href="#Config-1491"><span class="linenos">1491</span></a>        <span class="p">),</span> <span class="s2">&quot;can only parse cmdline args at most once per Config object&quot;</span>
</span><span id="Config-1492"><a href="#Config-1492"><span class="linenos">1492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_addhooks</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="Config-1493"><a href="#Config-1493"><span class="linenos">1493</span></a>            <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">pluginmanager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="p">)</span>
</span><span id="Config-1494"><a href="#Config-1494"><span class="linenos">1494</span></a>        <span class="p">)</span>
</span><span id="Config-1495"><a href="#Config-1495"><span class="linenos">1495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_preparse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">addopts</span><span class="o">=</span><span class="n">addopts</span><span class="p">)</span>
</span><span id="Config-1496"><a href="#Config-1496"><span class="linenos">1496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">after_preparse</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># type: ignore</span>
</span><span id="Config-1497"><a href="#Config-1497"><span class="linenos">1497</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1498"><a href="#Config-1498"><span class="linenos">1498</span></a>            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_setoption</span><span class="p">(</span>
</span><span id="Config-1499"><a href="#Config-1499"><span class="linenos">1499</span></a>                <span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span>
</span><span id="Config-1500"><a href="#Config-1500"><span class="linenos">1500</span></a>            <span class="p">)</span>
</span><span id="Config-1501"><a href="#Config-1501"><span class="linenos">1501</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_decide_args</span><span class="p">(</span>
</span><span id="Config-1502"><a href="#Config-1502"><span class="linenos">1502</span></a>                <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
</span><span id="Config-1503"><a href="#Config-1503"><span class="linenos">1503</span></a>                <span class="n">pyargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Config-1504"><a href="#Config-1504"><span class="linenos">1504</span></a>                <span class="n">testpaths</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;testpaths&quot;</span><span class="p">),</span>
</span><span id="Config-1505"><a href="#Config-1505"><span class="linenos">1505</span></a>                <span class="n">invocation_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config-1506"><a href="#Config-1506"><span class="linenos">1506</span></a>                <span class="n">rootpath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Config-1507"><a href="#Config-1507"><span class="linenos">1507</span></a>                <span class="n">warn</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Config-1508"><a href="#Config-1508"><span class="linenos">1508</span></a>            <span class="p">)</span>
</span><span id="Config-1509"><a href="#Config-1509"><span class="linenos">1509</span></a>        <span class="k">except</span> <span class="n">PrintHelp</span><span class="p">:</span>
</span><span id="Config-1510"><a href="#Config-1510"><span class="linenos">1510</span></a>            <span class="k">pass</span>
</span><span id="Config-1511"><a href="#Config-1511"><span class="linenos">1511</span></a>
</span><span id="Config-1512"><a href="#Config-1512"><span class="linenos">1512</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">issue_config_time_warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warning</span><span class="p">:</span> <span class="ne">Warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1513"><a href="#Config-1513"><span class="linenos">1513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Issue and handle a warning during the &quot;configure&quot; stage.</span>
</span><span id="Config-1514"><a href="#Config-1514"><span class="linenos">1514</span></a>
</span><span id="Config-1515"><a href="#Config-1515"><span class="linenos">1515</span></a><span class="sd">        During ``pytest_configure`` we can&#39;t capture warnings using the ``catch_warnings_for_item``</span>
</span><span id="Config-1516"><a href="#Config-1516"><span class="linenos">1516</span></a><span class="sd">        function because it is not possible to have hook wrappers around ``pytest_configure``.</span>
</span><span id="Config-1517"><a href="#Config-1517"><span class="linenos">1517</span></a>
</span><span id="Config-1518"><a href="#Config-1518"><span class="linenos">1518</span></a><span class="sd">        This function is mainly intended for plugins that need to issue warnings during</span>
</span><span id="Config-1519"><a href="#Config-1519"><span class="linenos">1519</span></a><span class="sd">        ``pytest_configure`` (or similar stages).</span>
</span><span id="Config-1520"><a href="#Config-1520"><span class="linenos">1520</span></a>
</span><span id="Config-1521"><a href="#Config-1521"><span class="linenos">1521</span></a><span class="sd">        :param warning: The warning instance.</span>
</span><span id="Config-1522"><a href="#Config-1522"><span class="linenos">1522</span></a><span class="sd">        :param stacklevel: stacklevel forwarded to warnings.warn.</span>
</span><span id="Config-1523"><a href="#Config-1523"><span class="linenos">1523</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1524"><a href="#Config-1524"><span class="linenos">1524</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">is_blocked</span><span class="p">(</span><span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
</span><span id="Config-1525"><a href="#Config-1525"><span class="linenos">1525</span></a>            <span class="k">return</span>
</span><span id="Config-1526"><a href="#Config-1526"><span class="linenos">1526</span></a>
</span><span id="Config-1527"><a href="#Config-1527"><span class="linenos">1527</span></a>        <span class="n">cmdline_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pythonwarnings</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="Config-1528"><a href="#Config-1528"><span class="linenos">1528</span></a>        <span class="n">config_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;filterwarnings&quot;</span><span class="p">)</span>
</span><span id="Config-1529"><a href="#Config-1529"><span class="linenos">1529</span></a>
</span><span id="Config-1530"><a href="#Config-1530"><span class="linenos">1530</span></a>        <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">records</span><span class="p">:</span>
</span><span id="Config-1531"><a href="#Config-1531"><span class="linenos">1531</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">warning</span><span class="p">))</span>
</span><span id="Config-1532"><a href="#Config-1532"><span class="linenos">1532</span></a>            <span class="n">apply_warning_filters</span><span class="p">(</span><span class="n">config_filters</span><span class="p">,</span> <span class="n">cmdline_filters</span><span class="p">)</span>
</span><span id="Config-1533"><a href="#Config-1533"><span class="linenos">1533</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>
</span><span id="Config-1534"><a href="#Config-1534"><span class="linenos">1534</span></a>
</span><span id="Config-1535"><a href="#Config-1535"><span class="linenos">1535</span></a>        <span class="k">if</span> <span class="n">records</span><span class="p">:</span>
</span><span id="Config-1536"><a href="#Config-1536"><span class="linenos">1536</span></a>            <span class="n">frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="n">stacklevel</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Config-1537"><a href="#Config-1537"><span class="linenos">1537</span></a>            <span class="n">location</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_filename</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="Config-1538"><a href="#Config-1538"><span class="linenos">1538</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_warning_recorded</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="Config-1539"><a href="#Config-1539"><span class="linenos">1539</span></a>                <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
</span><span id="Config-1540"><a href="#Config-1540"><span class="linenos">1540</span></a>                    <span class="n">warning_message</span><span class="o">=</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="Config-1541"><a href="#Config-1541"><span class="linenos">1541</span></a>                    <span class="n">when</span><span class="o">=</span><span class="s2">&quot;config&quot;</span><span class="p">,</span>
</span><span id="Config-1542"><a href="#Config-1542"><span class="linenos">1542</span></a>                    <span class="n">nodeid</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Config-1543"><a href="#Config-1543"><span class="linenos">1543</span></a>                    <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
</span><span id="Config-1544"><a href="#Config-1544"><span class="linenos">1544</span></a>                <span class="p">)</span>
</span><span id="Config-1545"><a href="#Config-1545"><span class="linenos">1545</span></a>            <span class="p">)</span>
</span><span id="Config-1546"><a href="#Config-1546"><span class="linenos">1546</span></a>
</span><span id="Config-1547"><a href="#Config-1547"><span class="linenos">1547</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addinivalue_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1548"><a href="#Config-1548"><span class="linenos">1548</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a line to an ini-file option. The option must have been</span>
</span><span id="Config-1549"><a href="#Config-1549"><span class="linenos">1549</span></a><span class="sd">        declared but might not yet be set in which case the line becomes</span>
</span><span id="Config-1550"><a href="#Config-1550"><span class="linenos">1550</span></a><span class="sd">        the first line in its value.&quot;&quot;&quot;</span>
</span><span id="Config-1551"><a href="#Config-1551"><span class="linenos">1551</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config-1552"><a href="#Config-1552"><span class="linenos">1552</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
</span><span id="Config-1553"><a href="#Config-1553"><span class="linenos">1553</span></a>        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>  <span class="c1"># modifies the cached list inline</span>
</span><span id="Config-1554"><a href="#Config-1554"><span class="linenos">1554</span></a>
</span><span id="Config-1555"><a href="#Config-1555"><span class="linenos">1555</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Config-1556"><a href="#Config-1556"><span class="linenos">1556</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return configuration value from an :ref:`ini file &lt;configfiles&gt;`.</span>
</span><span id="Config-1557"><a href="#Config-1557"><span class="linenos">1557</span></a>
</span><span id="Config-1558"><a href="#Config-1558"><span class="linenos">1558</span></a><span class="sd">        If a configuration value is not defined in an</span>
</span><span id="Config-1559"><a href="#Config-1559"><span class="linenos">1559</span></a><span class="sd">        :ref:`ini file &lt;configfiles&gt;`, then the ``default`` value provided while</span>
</span><span id="Config-1560"><a href="#Config-1560"><span class="linenos">1560</span></a><span class="sd">        registering the configuration through</span>
</span><span id="Config-1561"><a href="#Config-1561"><span class="linenos">1561</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;` will be returned.</span>
</span><span id="Config-1562"><a href="#Config-1562"><span class="linenos">1562</span></a><span class="sd">        Please note that you can even provide ``None`` as a valid</span>
</span><span id="Config-1563"><a href="#Config-1563"><span class="linenos">1563</span></a><span class="sd">        default value.</span>
</span><span id="Config-1564"><a href="#Config-1564"><span class="linenos">1564</span></a>
</span><span id="Config-1565"><a href="#Config-1565"><span class="linenos">1565</span></a><span class="sd">        If ``default`` is not provided while registering using</span>
</span><span id="Config-1566"><a href="#Config-1566"><span class="linenos">1566</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;`, then a default value</span>
</span><span id="Config-1567"><a href="#Config-1567"><span class="linenos">1567</span></a><span class="sd">        based on the ``type`` parameter passed to</span>
</span><span id="Config-1568"><a href="#Config-1568"><span class="linenos">1568</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;` will be returned.</span>
</span><span id="Config-1569"><a href="#Config-1569"><span class="linenos">1569</span></a><span class="sd">        The default values based on ``type`` are:</span>
</span><span id="Config-1570"><a href="#Config-1570"><span class="linenos">1570</span></a><span class="sd">        ``paths``, ``pathlist``, ``args`` and ``linelist`` : empty list ``[]``</span>
</span><span id="Config-1571"><a href="#Config-1571"><span class="linenos">1571</span></a><span class="sd">        ``bool`` : ``False``</span>
</span><span id="Config-1572"><a href="#Config-1572"><span class="linenos">1572</span></a><span class="sd">        ``string`` : empty string ``&quot;&quot;``</span>
</span><span id="Config-1573"><a href="#Config-1573"><span class="linenos">1573</span></a>
</span><span id="Config-1574"><a href="#Config-1574"><span class="linenos">1574</span></a><span class="sd">        If neither the ``default`` nor the ``type`` parameter is passed</span>
</span><span id="Config-1575"><a href="#Config-1575"><span class="linenos">1575</span></a><span class="sd">        while registering the configuration through</span>
</span><span id="Config-1576"><a href="#Config-1576"><span class="linenos">1576</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;`, then the configuration</span>
</span><span id="Config-1577"><a href="#Config-1577"><span class="linenos">1577</span></a><span class="sd">        is treated as a string and a default empty string &#39;&#39; is returned.</span>
</span><span id="Config-1578"><a href="#Config-1578"><span class="linenos">1578</span></a>
</span><span id="Config-1579"><a href="#Config-1579"><span class="linenos">1579</span></a><span class="sd">        If the specified name hasn&#39;t been registered through a prior</span>
</span><span id="Config-1580"><a href="#Config-1580"><span class="linenos">1580</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;` call (usually from a</span>
</span><span id="Config-1581"><a href="#Config-1581"><span class="linenos">1581</span></a><span class="sd">        plugin), a ValueError is raised.</span>
</span><span id="Config-1582"><a href="#Config-1582"><span class="linenos">1582</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1583"><a href="#Config-1583"><span class="linenos">1583</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1584"><a href="#Config-1584"><span class="linenos">1584</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inicache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="Config-1585"><a href="#Config-1585"><span class="linenos">1585</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Config-1586"><a href="#Config-1586"><span class="linenos">1586</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_inicache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getini</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config-1587"><a href="#Config-1587"><span class="linenos">1587</span></a>            <span class="k">return</span> <span class="n">val</span>
</span><span id="Config-1588"><a href="#Config-1588"><span class="linenos">1588</span></a>
</span><span id="Config-1589"><a href="#Config-1589"><span class="linenos">1589</span></a>    <span class="c1"># Meant for easy monkeypatching by legacypath plugin.</span>
</span><span id="Config-1590"><a href="#Config-1590"><span class="linenos">1590</span></a>    <span class="c1"># Can be inlined back (with no cover removed) once legacypath is gone.</span>
</span><span id="Config-1591"><a href="#Config-1591"><span class="linenos">1591</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getini_unknown_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
</span><span id="Config-1592"><a href="#Config-1592"><span class="linenos">1592</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;unknown configuration type: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Config-1593"><a href="#Config-1593"><span class="linenos">1593</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</span><span id="Config-1594"><a href="#Config-1594"><span class="linenos">1594</span></a>
</span><span id="Config-1595"><a href="#Config-1595"><span class="linenos">1595</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Config-1596"><a href="#Config-1596"><span class="linenos">1596</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1597"><a href="#Config-1597"><span class="linenos">1597</span></a>            <span class="n">description</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_inidict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="Config-1598"><a href="#Config-1598"><span class="linenos">1598</span></a>        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Config-1599"><a href="#Config-1599"><span class="linenos">1599</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unknown configuration value: </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="Config-1600"><a href="#Config-1600"><span class="linenos">1600</span></a>        <span class="n">override_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_override_ini_value</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config-1601"><a href="#Config-1601"><span class="linenos">1601</span></a>        <span class="k">if</span> <span class="n">override_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1602"><a href="#Config-1602"><span class="linenos">1602</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1603"><a href="#Config-1603"><span class="linenos">1603</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inicfg</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="Config-1604"><a href="#Config-1604"><span class="linenos">1604</span></a>            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Config-1605"><a href="#Config-1605"><span class="linenos">1605</span></a>                <span class="k">return</span> <span class="n">default</span>
</span><span id="Config-1606"><a href="#Config-1606"><span class="linenos">1606</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1607"><a href="#Config-1607"><span class="linenos">1607</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">override_value</span>
</span><span id="Config-1608"><a href="#Config-1608"><span class="linenos">1608</span></a>        <span class="c1"># Coerce the values based on types.</span>
</span><span id="Config-1609"><a href="#Config-1609"><span class="linenos">1609</span></a>        <span class="c1">#</span>
</span><span id="Config-1610"><a href="#Config-1610"><span class="linenos">1610</span></a>        <span class="c1"># Note: some coercions are only required if we are reading from .ini files, because</span>
</span><span id="Config-1611"><a href="#Config-1611"><span class="linenos">1611</span></a>        <span class="c1"># the file format doesn&#39;t contain type information, but when reading from toml we will</span>
</span><span id="Config-1612"><a href="#Config-1612"><span class="linenos">1612</span></a>        <span class="c1"># get either str or list of str values (see _parse_ini_config_from_pyproject_toml).</span>
</span><span id="Config-1613"><a href="#Config-1613"><span class="linenos">1613</span></a>        <span class="c1"># For example:</span>
</span><span id="Config-1614"><a href="#Config-1614"><span class="linenos">1614</span></a>        <span class="c1">#</span>
</span><span id="Config-1615"><a href="#Config-1615"><span class="linenos">1615</span></a>        <span class="c1">#   ini:</span>
</span><span id="Config-1616"><a href="#Config-1616"><span class="linenos">1616</span></a>        <span class="c1">#     a_line_list = &quot;tests acceptance&quot;</span>
</span><span id="Config-1617"><a href="#Config-1617"><span class="linenos">1617</span></a>        <span class="c1">#   in this case, we need to split the string to obtain a list of strings.</span>
</span><span id="Config-1618"><a href="#Config-1618"><span class="linenos">1618</span></a>        <span class="c1">#</span>
</span><span id="Config-1619"><a href="#Config-1619"><span class="linenos">1619</span></a>        <span class="c1">#   toml:</span>
</span><span id="Config-1620"><a href="#Config-1620"><span class="linenos">1620</span></a>        <span class="c1">#     a_line_list = [&quot;tests&quot;, &quot;acceptance&quot;]</span>
</span><span id="Config-1621"><a href="#Config-1621"><span class="linenos">1621</span></a>        <span class="c1">#   in this case, we already have a list ready to use.</span>
</span><span id="Config-1622"><a href="#Config-1622"><span class="linenos">1622</span></a>        <span class="c1">#</span>
</span><span id="Config-1623"><a href="#Config-1623"><span class="linenos">1623</span></a>        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;paths&quot;</span><span class="p">:</span>
</span><span id="Config-1624"><a href="#Config-1624"><span class="linenos">1624</span></a>            <span class="n">dp</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1625"><a href="#Config-1625"><span class="linenos">1625</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">inipath</span><span class="o">.</span><span class="n">parent</span>
</span><span id="Config-1626"><a href="#Config-1626"><span class="linenos">1626</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inipath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Config-1627"><a href="#Config-1627"><span class="linenos">1627</span></a>                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span>
</span><span id="Config-1628"><a href="#Config-1628"><span class="linenos">1628</span></a>            <span class="p">)</span>
</span><span id="Config-1629"><a href="#Config-1629"><span class="linenos">1629</span></a>            <span class="n">input_values</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>
</span><span id="Config-1630"><a href="#Config-1630"><span class="linenos">1630</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">dp</span> <span class="o">/</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">input_values</span><span class="p">]</span>
</span><span id="Config-1631"><a href="#Config-1631"><span class="linenos">1631</span></a>        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;args&quot;</span><span class="p">:</span>
</span><span id="Config-1632"><a href="#Config-1632"><span class="linenos">1632</span></a>            <span class="k">return</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>
</span><span id="Config-1633"><a href="#Config-1633"><span class="linenos">1633</span></a>        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;linelist&quot;</span><span class="p">:</span>
</span><span id="Config-1634"><a href="#Config-1634"><span class="linenos">1634</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Config-1635"><a href="#Config-1635"><span class="linenos">1635</span></a>                <span class="k">return</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span> <span class="k">if</span> <span class="n">t</span><span class="p">]</span>
</span><span id="Config-1636"><a href="#Config-1636"><span class="linenos">1636</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1637"><a href="#Config-1637"><span class="linenos">1637</span></a>                <span class="k">return</span> <span class="n">value</span>
</span><span id="Config-1638"><a href="#Config-1638"><span class="linenos">1638</span></a>        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;bool&quot;</span><span class="p">:</span>
</span><span id="Config-1639"><a href="#Config-1639"><span class="linenos">1639</span></a>            <span class="k">return</span> <span class="n">_strtobool</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="Config-1640"><a href="#Config-1640"><span class="linenos">1640</span></a>        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span>
</span><span id="Config-1641"><a href="#Config-1641"><span class="linenos">1641</span></a>            <span class="k">return</span> <span class="n">value</span>
</span><span id="Config-1642"><a href="#Config-1642"><span class="linenos">1642</span></a>        <span class="k">elif</span> <span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1643"><a href="#Config-1643"><span class="linenos">1643</span></a>            <span class="k">return</span> <span class="n">value</span>
</span><span id="Config-1644"><a href="#Config-1644"><span class="linenos">1644</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1645"><a href="#Config-1645"><span class="linenos">1645</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getini_unknown_type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Config-1646"><a href="#Config-1646"><span class="linenos">1646</span></a>
</span><span id="Config-1647"><a href="#Config-1647"><span class="linenos">1647</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getconftest_pathlist</span><span class="p">(</span>
</span><span id="Config-1648"><a href="#Config-1648"><span class="linenos">1648</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
</span><span id="Config-1649"><a href="#Config-1649"><span class="linenos">1649</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1650"><a href="#Config-1650"><span class="linenos">1650</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1651"><a href="#Config-1651"><span class="linenos">1651</span></a>            <span class="n">mod</span><span class="p">,</span> <span class="n">relroots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">_rget_with_confmod</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Config-1652"><a href="#Config-1652"><span class="linenos">1652</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Config-1653"><a href="#Config-1653"><span class="linenos">1653</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Config-1654"><a href="#Config-1654"><span class="linenos">1654</span></a>        <span class="k">assert</span> <span class="n">mod</span><span class="o">.</span><span class="vm">__file__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Config-1655"><a href="#Config-1655"><span class="linenos">1655</span></a>        <span class="n">modpath</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
</span><span id="Config-1656"><a href="#Config-1656"><span class="linenos">1656</span></a>        <span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config-1657"><a href="#Config-1657"><span class="linenos">1657</span></a>        <span class="k">for</span> <span class="n">relroot</span> <span class="ow">in</span> <span class="n">relroots</span><span class="p">:</span>
</span><span id="Config-1658"><a href="#Config-1658"><span class="linenos">1658</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">relroot</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">):</span>
</span><span id="Config-1659"><a href="#Config-1659"><span class="linenos">1659</span></a>                <span class="n">relroot</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">relroot</span><span class="p">)</span>
</span><span id="Config-1660"><a href="#Config-1660"><span class="linenos">1660</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1661"><a href="#Config-1661"><span class="linenos">1661</span></a>                <span class="n">relroot</span> <span class="o">=</span> <span class="n">relroot</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
</span><span id="Config-1662"><a href="#Config-1662"><span class="linenos">1662</span></a>                <span class="n">relroot</span> <span class="o">=</span> <span class="n">absolutepath</span><span class="p">(</span><span class="n">modpath</span> <span class="o">/</span> <span class="n">relroot</span><span class="p">)</span>
</span><span id="Config-1663"><a href="#Config-1663"><span class="linenos">1663</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">relroot</span><span class="p">)</span>
</span><span id="Config-1664"><a href="#Config-1664"><span class="linenos">1664</span></a>        <span class="k">return</span> <span class="n">values</span>
</span><span id="Config-1665"><a href="#Config-1665"><span class="linenos">1665</span></a>
</span><span id="Config-1666"><a href="#Config-1666"><span class="linenos">1666</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_override_ini_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1667"><a href="#Config-1667"><span class="linenos">1667</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Config-1668"><a href="#Config-1668"><span class="linenos">1668</span></a>        <span class="c1"># override_ini is a list of &quot;ini=value&quot; options.</span>
</span><span id="Config-1669"><a href="#Config-1669"><span class="linenos">1669</span></a>        <span class="c1"># Always use the last item if multiple values are set for same ini-name,</span>
</span><span id="Config-1670"><a href="#Config-1670"><span class="linenos">1670</span></a>        <span class="c1"># e.g. -o foo=bar1 -o foo=bar2 will set foo to bar2.</span>
</span><span id="Config-1671"><a href="#Config-1671"><span class="linenos">1671</span></a>        <span class="k">for</span> <span class="n">ini_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_override_ini</span><span class="p">:</span>
</span><span id="Config-1672"><a href="#Config-1672"><span class="linenos">1672</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1673"><a href="#Config-1673"><span class="linenos">1673</span></a>                <span class="n">key</span><span class="p">,</span> <span class="n">user_ini_value</span> <span class="o">=</span> <span class="n">ini_config</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Config-1674"><a href="#Config-1674"><span class="linenos">1674</span></a>            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Config-1675"><a href="#Config-1675"><span class="linenos">1675</span></a>                <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span>
</span><span id="Config-1676"><a href="#Config-1676"><span class="linenos">1676</span></a>                    <span class="sa">f</span><span class="s2">&quot;-o/--override-ini expects option=value style (got: </span><span class="si">{</span><span class="n">ini_config</span><span class="si">!r}</span><span class="s2">).&quot;</span>
</span><span id="Config-1677"><a href="#Config-1677"><span class="linenos">1677</span></a>                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="Config-1678"><a href="#Config-1678"><span class="linenos">1678</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1679"><a href="#Config-1679"><span class="linenos">1679</span></a>                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Config-1680"><a href="#Config-1680"><span class="linenos">1680</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">user_ini_value</span>
</span><span id="Config-1681"><a href="#Config-1681"><span class="linenos">1681</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="Config-1682"><a href="#Config-1682"><span class="linenos">1682</span></a>
</span><span id="Config-1683"><a href="#Config-1683"><span class="linenos">1683</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">notset</span><span class="p">,</span> <span class="n">skip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Config-1684"><a href="#Config-1684"><span class="linenos">1684</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return command line option value.</span>
</span><span id="Config-1685"><a href="#Config-1685"><span class="linenos">1685</span></a>
</span><span id="Config-1686"><a href="#Config-1686"><span class="linenos">1686</span></a><span class="sd">        :param name: Name of the option. You may also specify</span>
</span><span id="Config-1687"><a href="#Config-1687"><span class="linenos">1687</span></a><span class="sd">            the literal ``--OPT`` option instead of the &quot;dest&quot; option name.</span>
</span><span id="Config-1688"><a href="#Config-1688"><span class="linenos">1688</span></a><span class="sd">        :param default: Fallback value if no option of that name is **declared** via :hook:`pytest_addoption`.</span>
</span><span id="Config-1689"><a href="#Config-1689"><span class="linenos">1689</span></a><span class="sd">            Note this parameter will be ignored when the option is **declared** even if the option&#39;s value is ``None``.</span>
</span><span id="Config-1690"><a href="#Config-1690"><span class="linenos">1690</span></a><span class="sd">        :param skip: If ``True``, raise :func:`pytest.skip` if option is undeclared or has a ``None`` value.</span>
</span><span id="Config-1691"><a href="#Config-1691"><span class="linenos">1691</span></a><span class="sd">            Note that even if ``True``, if a default was specified it will be returned instead of a skip.</span>
</span><span id="Config-1692"><a href="#Config-1692"><span class="linenos">1692</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1693"><a href="#Config-1693"><span class="linenos">1693</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opt2dest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Config-1694"><a href="#Config-1694"><span class="linenos">1694</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config-1695"><a href="#Config-1695"><span class="linenos">1695</span></a>            <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Config-1696"><a href="#Config-1696"><span class="linenos">1696</span></a>            <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">skip</span><span class="p">:</span>
</span><span id="Config-1697"><a href="#Config-1697"><span class="linenos">1697</span></a>                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config-1698"><a href="#Config-1698"><span class="linenos">1698</span></a>            <span class="k">return</span> <span class="n">val</span>
</span><span id="Config-1699"><a href="#Config-1699"><span class="linenos">1699</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Config-1700"><a href="#Config-1700"><span class="linenos">1700</span></a>            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="Config-1701"><a href="#Config-1701"><span class="linenos">1701</span></a>                <span class="k">return</span> <span class="n">default</span>
</span><span id="Config-1702"><a href="#Config-1702"><span class="linenos">1702</span></a>            <span class="k">if</span> <span class="n">skip</span><span class="p">:</span>
</span><span id="Config-1703"><a href="#Config-1703"><span class="linenos">1703</span></a>                <span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
</span><span id="Config-1704"><a href="#Config-1704"><span class="linenos">1704</span></a>
</span><span id="Config-1705"><a href="#Config-1705"><span class="linenos">1705</span></a>                <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2"> option found&quot;</span><span class="p">)</span>
</span><span id="Config-1706"><a href="#Config-1706"><span class="linenos">1706</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no option named </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="Config-1707"><a href="#Config-1707"><span class="linenos">1707</span></a>
</span><span id="Config-1708"><a href="#Config-1708"><span class="linenos">1708</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Config-1709"><a href="#Config-1709"><span class="linenos">1709</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated, use getoption() instead.&quot;&quot;&quot;</span>
</span><span id="Config-1710"><a href="#Config-1710"><span class="linenos">1710</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config-1711"><a href="#Config-1711"><span class="linenos">1711</span></a>
</span><span id="Config-1712"><a href="#Config-1712"><span class="linenos">1712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getvalueorskip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Config-1713"><a href="#Config-1713"><span class="linenos">1713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated, use getoption(skip=True) instead.&quot;&quot;&quot;</span>
</span><span id="Config-1714"><a href="#Config-1714"><span class="linenos">1714</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config-1715"><a href="#Config-1715"><span class="linenos">1715</span></a>
</span><span id="Config-1716"><a href="#Config-1716"><span class="linenos">1716</span></a>    <span class="c1">#: Verbosity type for failed assertions (see :confval:`verbosity_assertions`).</span>
</span><span id="Config-1717"><a href="#Config-1717"><span class="linenos">1717</span></a>    <span class="n">VERBOSITY_ASSERTIONS</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="s2">&quot;assertions&quot;</span>
</span><span id="Config-1718"><a href="#Config-1718"><span class="linenos">1718</span></a>    <span class="c1">#: Verbosity type for test case execution (see :confval:`verbosity_test_cases`).</span>
</span><span id="Config-1719"><a href="#Config-1719"><span class="linenos">1719</span></a>    <span class="n">VERBOSITY_TEST_CASES</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="s2">&quot;test_cases&quot;</span>
</span><span id="Config-1720"><a href="#Config-1720"><span class="linenos">1720</span></a>    <span class="n">_VERBOSITY_INI_DEFAULT</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
</span><span id="Config-1721"><a href="#Config-1721"><span class="linenos">1721</span></a>
</span><span id="Config-1722"><a href="#Config-1722"><span class="linenos">1722</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_verbosity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbosity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Config-1723"><a href="#Config-1723"><span class="linenos">1723</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Retrieve the verbosity level for a fine-grained verbosity type.</span>
</span><span id="Config-1724"><a href="#Config-1724"><span class="linenos">1724</span></a>
</span><span id="Config-1725"><a href="#Config-1725"><span class="linenos">1725</span></a><span class="sd">        :param verbosity_type: Verbosity type to get level for. If a level is</span>
</span><span id="Config-1726"><a href="#Config-1726"><span class="linenos">1726</span></a><span class="sd">            configured for the given type, that value will be returned. If the</span>
</span><span id="Config-1727"><a href="#Config-1727"><span class="linenos">1727</span></a><span class="sd">            given type is not a known verbosity type, the global verbosity</span>
</span><span id="Config-1728"><a href="#Config-1728"><span class="linenos">1728</span></a><span class="sd">            level will be returned. If the given type is None (default), the</span>
</span><span id="Config-1729"><a href="#Config-1729"><span class="linenos">1729</span></a><span class="sd">            global verbosity level will be returned.</span>
</span><span id="Config-1730"><a href="#Config-1730"><span class="linenos">1730</span></a>
</span><span id="Config-1731"><a href="#Config-1731"><span class="linenos">1731</span></a><span class="sd">        To configure a level for a fine-grained verbosity type, the</span>
</span><span id="Config-1732"><a href="#Config-1732"><span class="linenos">1732</span></a><span class="sd">        configuration file should have a setting for the configuration name</span>
</span><span id="Config-1733"><a href="#Config-1733"><span class="linenos">1733</span></a><span class="sd">        and a numeric value for the verbosity level. A special value of &quot;auto&quot;</span>
</span><span id="Config-1734"><a href="#Config-1734"><span class="linenos">1734</span></a><span class="sd">        can be used to explicitly use the global verbosity level.</span>
</span><span id="Config-1735"><a href="#Config-1735"><span class="linenos">1735</span></a>
</span><span id="Config-1736"><a href="#Config-1736"><span class="linenos">1736</span></a><span class="sd">        Example:</span>
</span><span id="Config-1737"><a href="#Config-1737"><span class="linenos">1737</span></a>
</span><span id="Config-1738"><a href="#Config-1738"><span class="linenos">1738</span></a><span class="sd">        .. code-block:: ini</span>
</span><span id="Config-1739"><a href="#Config-1739"><span class="linenos">1739</span></a>
</span><span id="Config-1740"><a href="#Config-1740"><span class="linenos">1740</span></a><span class="sd">            # content of pytest.ini</span>
</span><span id="Config-1741"><a href="#Config-1741"><span class="linenos">1741</span></a><span class="sd">            [pytest]</span>
</span><span id="Config-1742"><a href="#Config-1742"><span class="linenos">1742</span></a><span class="sd">            verbosity_assertions = 2</span>
</span><span id="Config-1743"><a href="#Config-1743"><span class="linenos">1743</span></a>
</span><span id="Config-1744"><a href="#Config-1744"><span class="linenos">1744</span></a><span class="sd">        .. code-block:: console</span>
</span><span id="Config-1745"><a href="#Config-1745"><span class="linenos">1745</span></a>
</span><span id="Config-1746"><a href="#Config-1746"><span class="linenos">1746</span></a><span class="sd">            pytest -v</span>
</span><span id="Config-1747"><a href="#Config-1747"><span class="linenos">1747</span></a>
</span><span id="Config-1748"><a href="#Config-1748"><span class="linenos">1748</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Config-1749"><a href="#Config-1749"><span class="linenos">1749</span></a>
</span><span id="Config-1750"><a href="#Config-1750"><span class="linenos">1750</span></a><span class="sd">            print(config.get_verbosity())  # 1</span>
</span><span id="Config-1751"><a href="#Config-1751"><span class="linenos">1751</span></a><span class="sd">            print(config.get_verbosity(Config.VERBOSITY_ASSERTIONS))  # 2</span>
</span><span id="Config-1752"><a href="#Config-1752"><span class="linenos">1752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1753"><a href="#Config-1753"><span class="linenos">1753</span></a>        <span class="n">global_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Config-1754"><a href="#Config-1754"><span class="linenos">1754</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">global_level</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span id="Config-1755"><a href="#Config-1755"><span class="linenos">1755</span></a>        <span class="k">if</span> <span class="n">verbosity_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1756"><a href="#Config-1756"><span class="linenos">1756</span></a>            <span class="k">return</span> <span class="n">global_level</span>
</span><span id="Config-1757"><a href="#Config-1757"><span class="linenos">1757</span></a>
</span><span id="Config-1758"><a href="#Config-1758"><span class="linenos">1758</span></a>        <span class="n">ini_name</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">_verbosity_ini_name</span><span class="p">(</span><span class="n">verbosity_type</span><span class="p">)</span>
</span><span id="Config-1759"><a href="#Config-1759"><span class="linenos">1759</span></a>        <span class="k">if</span> <span class="n">ini_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_inidict</span><span class="p">:</span>
</span><span id="Config-1760"><a href="#Config-1760"><span class="linenos">1760</span></a>            <span class="k">return</span> <span class="n">global_level</span>
</span><span id="Config-1761"><a href="#Config-1761"><span class="linenos">1761</span></a>
</span><span id="Config-1762"><a href="#Config-1762"><span class="linenos">1762</span></a>        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="n">ini_name</span><span class="p">)</span>
</span><span id="Config-1763"><a href="#Config-1763"><span class="linenos">1763</span></a>        <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Config</span><span class="o">.</span><span class="n">_VERBOSITY_INI_DEFAULT</span><span class="p">:</span>
</span><span id="Config-1764"><a href="#Config-1764"><span class="linenos">1764</span></a>            <span class="k">return</span> <span class="n">global_level</span>
</span><span id="Config-1765"><a href="#Config-1765"><span class="linenos">1765</span></a>
</span><span id="Config-1766"><a href="#Config-1766"><span class="linenos">1766</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="Config-1767"><a href="#Config-1767"><span class="linenos">1767</span></a>
</span><span id="Config-1768"><a href="#Config-1768"><span class="linenos">1768</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Config-1769"><a href="#Config-1769"><span class="linenos">1769</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_verbosity_ini_name</span><span class="p">(</span><span class="n">verbosity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Config-1770"><a href="#Config-1770"><span class="linenos">1770</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;verbosity_</span><span class="si">{</span><span class="n">verbosity_type</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Config-1771"><a href="#Config-1771"><span class="linenos">1771</span></a>
</span><span id="Config-1772"><a href="#Config-1772"><span class="linenos">1772</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Config-1773"><a href="#Config-1773"><span class="linenos">1773</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_verbosity_ini</span><span class="p">(</span><span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span><span class="p">,</span> <span class="n">verbosity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1774"><a href="#Config-1774"><span class="linenos">1774</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a output verbosity configuration option for the given output type.</span>
</span><span id="Config-1775"><a href="#Config-1775"><span class="linenos">1775</span></a>
</span><span id="Config-1776"><a href="#Config-1776"><span class="linenos">1776</span></a><span class="sd">        :param parser: Parser for command line arguments and ini-file values.</span>
</span><span id="Config-1777"><a href="#Config-1777"><span class="linenos">1777</span></a><span class="sd">        :param verbosity_type: Fine-grained verbosity category.</span>
</span><span id="Config-1778"><a href="#Config-1778"><span class="linenos">1778</span></a><span class="sd">        :param help: Description of the output this type controls.</span>
</span><span id="Config-1779"><a href="#Config-1779"><span class="linenos">1779</span></a>
</span><span id="Config-1780"><a href="#Config-1780"><span class="linenos">1780</span></a><span class="sd">        The value should be retrieved via a call to</span>
</span><span id="Config-1781"><a href="#Config-1781"><span class="linenos">1781</span></a><span class="sd">        :py:func:`config.get_verbosity(type) &lt;pytest.Config.get_verbosity&gt;`.</span>
</span><span id="Config-1782"><a href="#Config-1782"><span class="linenos">1782</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config-1783"><a href="#Config-1783"><span class="linenos">1783</span></a>        <span class="n">parser</span><span class="o">.</span><span class="n">addini</span><span class="p">(</span>
</span><span id="Config-1784"><a href="#Config-1784"><span class="linenos">1784</span></a>            <span class="n">Config</span><span class="o">.</span><span class="n">_verbosity_ini_name</span><span class="p">(</span><span class="n">verbosity_type</span><span class="p">),</span>
</span><span id="Config-1785"><a href="#Config-1785"><span class="linenos">1785</span></a>            <span class="n">help</span><span class="o">=</span><span class="n">help</span><span class="p">,</span>
</span><span id="Config-1786"><a href="#Config-1786"><span class="linenos">1786</span></a>            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="Config-1787"><a href="#Config-1787"><span class="linenos">1787</span></a>            <span class="n">default</span><span class="o">=</span><span class="n">Config</span><span class="o">.</span><span class="n">_VERBOSITY_INI_DEFAULT</span><span class="p">,</span>
</span><span id="Config-1788"><a href="#Config-1788"><span class="linenos">1788</span></a>        <span class="p">)</span>
</span><span id="Config-1789"><a href="#Config-1789"><span class="linenos">1789</span></a>
</span><span id="Config-1790"><a href="#Config-1790"><span class="linenos">1790</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_warn_about_missing_assertion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1791"><a href="#Config-1791"><span class="linenos">1791</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">_assertion_supported</span><span class="p">():</span>
</span><span id="Config-1792"><a href="#Config-1792"><span class="linenos">1792</span></a>            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;plain&quot;</span><span class="p">:</span>
</span><span id="Config-1793"><a href="#Config-1793"><span class="linenos">1793</span></a>                <span class="n">warning_text</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1794"><a href="#Config-1794"><span class="linenos">1794</span></a>                    <span class="s2">&quot;ASSERTIONS ARE NOT EXECUTED&quot;</span>
</span><span id="Config-1795"><a href="#Config-1795"><span class="linenos">1795</span></a>                    <span class="s2">&quot; and FAILING TESTS WILL PASS.  Are you&quot;</span>
</span><span id="Config-1796"><a href="#Config-1796"><span class="linenos">1796</span></a>                    <span class="s2">&quot; using python -O?&quot;</span>
</span><span id="Config-1797"><a href="#Config-1797"><span class="linenos">1797</span></a>                <span class="p">)</span>
</span><span id="Config-1798"><a href="#Config-1798"><span class="linenos">1798</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Config-1799"><a href="#Config-1799"><span class="linenos">1799</span></a>                <span class="n">warning_text</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Config-1800"><a href="#Config-1800"><span class="linenos">1800</span></a>                    <span class="s2">&quot;assertions not in test modules or&quot;</span>
</span><span id="Config-1801"><a href="#Config-1801"><span class="linenos">1801</span></a>                    <span class="s2">&quot; plugins will be ignored&quot;</span>
</span><span id="Config-1802"><a href="#Config-1802"><span class="linenos">1802</span></a>                    <span class="s2">&quot; because assert statements are not executed &quot;</span>
</span><span id="Config-1803"><a href="#Config-1803"><span class="linenos">1803</span></a>                    <span class="s2">&quot;by the underlying Python interpreter &quot;</span>
</span><span id="Config-1804"><a href="#Config-1804"><span class="linenos">1804</span></a>                    <span class="s2">&quot;(are you using python -O?)</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Config-1805"><a href="#Config-1805"><span class="linenos">1805</span></a>                <span class="p">)</span>
</span><span id="Config-1806"><a href="#Config-1806"><span class="linenos">1806</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">issue_config_time_warning</span><span class="p">(</span>
</span><span id="Config-1807"><a href="#Config-1807"><span class="linenos">1807</span></a>                <span class="n">PytestConfigWarning</span><span class="p">(</span><span class="n">warning_text</span><span class="p">),</span>
</span><span id="Config-1808"><a href="#Config-1808"><span class="linenos">1808</span></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="Config-1809"><a href="#Config-1809"><span class="linenos">1809</span></a>            <span class="p">)</span>
</span><span id="Config-1810"><a href="#Config-1810"><span class="linenos">1810</span></a>
</span><span id="Config-1811"><a href="#Config-1811"><span class="linenos">1811</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_warn_about_skipped_plugins</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config-1812"><a href="#Config-1812"><span class="linenos">1812</span></a>        <span class="k">for</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">skipped_plugins</span><span class="p">:</span>
</span><span id="Config-1813"><a href="#Config-1813"><span class="linenos">1813</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">issue_config_time_warning</span><span class="p">(</span>
</span><span id="Config-1814"><a href="#Config-1814"><span class="linenos">1814</span></a>                <span class="n">PytestConfigWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;skipped plugin </span><span class="si">{</span><span class="n">module_name</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="Config-1815"><a href="#Config-1815"><span class="linenos">1815</span></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="Config-1816"><a href="#Config-1816"><span class="linenos">1816</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Access to configuration values, pluginmanager and plugin hooks.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>PytestPluginManager pluginmanager</strong>: 
A pytest PluginManager.</p></li>
<li><p><strong>InvocationParams invocation_params</strong>: 
Object containing parameters regarding the <code><a href="#main">pytest.main()</a></code>
invocation.</p></li>
</ul>
</div>


                            <div id="Config.__init__" class="classattr">
                                        <input id="Config.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Config</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">pluginmanager</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">PytestPluginManager</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">invocation_params</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">InvocationParams</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Config.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.__init__-1030"><a href="#Config.__init__-1030"><span class="linenos">1030</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Config.__init__-1031"><a href="#Config.__init__-1031"><span class="linenos">1031</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Config.__init__-1032"><a href="#Config.__init__-1032"><span class="linenos">1032</span></a>        <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">,</span>
</span><span id="Config.__init__-1033"><a href="#Config.__init__-1033"><span class="linenos">1033</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Config.__init__-1034"><a href="#Config.__init__-1034"><span class="linenos">1034</span></a>        <span class="n">invocation_params</span><span class="p">:</span> <span class="n">InvocationParams</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config.__init__-1035"><a href="#Config.__init__-1035"><span class="linenos">1035</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.__init__-1036"><a href="#Config.__init__-1036"><span class="linenos">1036</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">.argparsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">FILE_OR_DIR</span>
</span><span id="Config.__init__-1037"><a href="#Config.__init__-1037"><span class="linenos">1037</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">.argparsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
</span><span id="Config.__init__-1038"><a href="#Config.__init__-1038"><span class="linenos">1038</span></a>
</span><span id="Config.__init__-1039"><a href="#Config.__init__-1039"><span class="linenos">1039</span></a>        <span class="k">if</span> <span class="n">invocation_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.__init__-1040"><a href="#Config.__init__-1040"><span class="linenos">1040</span></a>            <span class="n">invocation_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InvocationParams</span><span class="p">(</span>
</span><span id="Config.__init__-1041"><a href="#Config.__init__-1041"><span class="linenos">1041</span></a>                <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">plugins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span>
</span><span id="Config.__init__-1042"><a href="#Config.__init__-1042"><span class="linenos">1042</span></a>            <span class="p">)</span>
</span><span id="Config.__init__-1043"><a href="#Config.__init__-1043"><span class="linenos">1043</span></a>
</span><span id="Config.__init__-1044"><a href="#Config.__init__-1044"><span class="linenos">1044</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">option</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
</span><span id="Config.__init__-1045"><a href="#Config.__init__-1045"><span class="linenos">1045</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Access to command line option as attributes.</span>
</span><span id="Config.__init__-1046"><a href="#Config.__init__-1046"><span class="linenos">1046</span></a>
</span><span id="Config.__init__-1047"><a href="#Config.__init__-1047"><span class="linenos">1047</span></a><span class="sd">        :type: argparse.Namespace</span>
</span><span id="Config.__init__-1048"><a href="#Config.__init__-1048"><span class="linenos">1048</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.__init__-1049"><a href="#Config.__init__-1049"><span class="linenos">1049</span></a>
</span><span id="Config.__init__-1050"><a href="#Config.__init__-1050"><span class="linenos">1050</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span> <span class="o">=</span> <span class="n">invocation_params</span>
</span><span id="Config.__init__-1051"><a href="#Config.__init__-1051"><span class="linenos">1051</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The parameters with which pytest was invoked.</span>
</span><span id="Config.__init__-1052"><a href="#Config.__init__-1052"><span class="linenos">1052</span></a>
</span><span id="Config.__init__-1053"><a href="#Config.__init__-1053"><span class="linenos">1053</span></a><span class="sd">        :type: InvocationParams</span>
</span><span id="Config.__init__-1054"><a href="#Config.__init__-1054"><span class="linenos">1054</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.__init__-1055"><a href="#Config.__init__-1055"><span class="linenos">1055</span></a>
</span><span id="Config.__init__-1056"><a href="#Config.__init__-1056"><span class="linenos">1056</span></a>        <span class="n">_a</span> <span class="o">=</span> <span class="n">FILE_OR_DIR</span>
</span><span id="Config.__init__-1057"><a href="#Config.__init__-1057"><span class="linenos">1057</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">(</span>
</span><span id="Config.__init__-1058"><a href="#Config.__init__-1058"><span class="linenos">1058</span></a>            <span class="n">usage</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;%(prog)s [options] [</span><span class="si">{</span><span class="n">_a</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">_a</span><span class="si">}</span><span class="s2">] [...]&quot;</span><span class="p">,</span>
</span><span id="Config.__init__-1059"><a href="#Config.__init__-1059"><span class="linenos">1059</span></a>            <span class="n">processopt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span><span class="p">,</span>
</span><span id="Config.__init__-1060"><a href="#Config.__init__-1060"><span class="linenos">1060</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Config.__init__-1061"><a href="#Config.__init__-1061"><span class="linenos">1061</span></a>        <span class="p">)</span>
</span><span id="Config.__init__-1062"><a href="#Config.__init__-1062"><span class="linenos">1062</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span> <span class="o">=</span> <span class="n">pluginmanager</span>
</span><span id="Config.__init__-1063"><a href="#Config.__init__-1063"><span class="linenos">1063</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The plugin manager handles plugin registration and hook invocation.</span>
</span><span id="Config.__init__-1064"><a href="#Config.__init__-1064"><span class="linenos">1064</span></a>
</span><span id="Config.__init__-1065"><a href="#Config.__init__-1065"><span class="linenos">1065</span></a><span class="sd">        :type: PytestPluginManager</span>
</span><span id="Config.__init__-1066"><a href="#Config.__init__-1066"><span class="linenos">1066</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.__init__-1067"><a href="#Config.__init__-1067"><span class="linenos">1067</span></a>
</span><span id="Config.__init__-1068"><a href="#Config.__init__-1068"><span class="linenos">1068</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stash</span> <span class="o">=</span> <span class="n">Stash</span><span class="p">()</span>
</span><span id="Config.__init__-1069"><a href="#Config.__init__-1069"><span class="linenos">1069</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A place where plugins can store information on the config for their</span>
</span><span id="Config.__init__-1070"><a href="#Config.__init__-1070"><span class="linenos">1070</span></a><span class="sd">        own use.</span>
</span><span id="Config.__init__-1071"><a href="#Config.__init__-1071"><span class="linenos">1071</span></a>
</span><span id="Config.__init__-1072"><a href="#Config.__init__-1072"><span class="linenos">1072</span></a><span class="sd">        :type: Stash</span>
</span><span id="Config.__init__-1073"><a href="#Config.__init__-1073"><span class="linenos">1073</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.__init__-1074"><a href="#Config.__init__-1074"><span class="linenos">1074</span></a>        <span class="c1"># Deprecated alias. Was never public. Can be removed in a few releases.</span>
</span><span id="Config.__init__-1075"><a href="#Config.__init__-1075"><span class="linenos">1075</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stash</span>
</span><span id="Config.__init__-1076"><a href="#Config.__init__-1076"><span class="linenos">1076</span></a>
</span><span id="Config.__init__-1077"><a href="#Config.__init__-1077"><span class="linenos">1077</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">)</span>
</span><span id="Config.__init__-1078"><a href="#Config.__init__-1078"><span class="linenos">1078</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="p">:</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookRelay</span> <span class="o">=</span> <span class="n">PathAwareHookProxy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">hook</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
</span><span id="Config.__init__-1079"><a href="#Config.__init__-1079"><span class="linenos">1079</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inicache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Config.__init__-1080"><a href="#Config.__init__-1080"><span class="linenos">1080</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_override_ini</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="Config.__init__-1081"><a href="#Config.__init__-1081"><span class="linenos">1081</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_opt2dest</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Config.__init__-1082"><a href="#Config.__init__-1082"><span class="linenos">1082</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Config.__init__-1083"><a href="#Config.__init__-1083"><span class="linenos">1083</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;pytestconfig&quot;</span><span class="p">)</span>
</span><span id="Config.__init__-1084"><a href="#Config.__init__-1084"><span class="linenos">1084</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Config.__init__-1085"><a href="#Config.__init__-1085"><span class="linenos">1085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_addoption</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="Config.__init__-1086"><a href="#Config.__init__-1086"><span class="linenos">1086</span></a>            <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="p">)</span>
</span><span id="Config.__init__-1087"><a href="#Config.__init__-1087"><span class="linenos">1087</span></a>        <span class="p">)</span>
</span><span id="Config.__init__-1088"><a href="#Config.__init__-1088"><span class="linenos">1088</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args_source</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">ArgsSource</span><span class="o">.</span><span class="n">ARGS</span>
</span><span id="Config.__init__-1089"><a href="#Config.__init__-1089"><span class="linenos">1089</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.cache" class="classattr">
                                <div class="attr variable">
            <span class="name">cache</span><span class="annotation">: _pytest.cacheprovider.Cache</span>

        
    </div>
    <a class="headerlink" href="#Config.cache"></a>
    
    

                            </div>
                            <div id="Config.option" class="classattr">
                                <div class="attr variable">
            <span class="name">option</span>

        
    </div>
    <a class="headerlink" href="#Config.option"></a>
    
            <div class="docstring"><p>Access to command line option as attributes.</p>
</div>


                            </div>
                            <div id="Config.invocation_params" class="classattr">
                                <div class="attr variable">
            <span class="name">invocation_params</span>

        
    </div>
    <a class="headerlink" href="#Config.invocation_params"></a>
    
            <div class="docstring"><p>The parameters with which pytest was invoked.</p>
</div>


                            </div>
                            <div id="Config.pluginmanager" class="classattr">
                                <div class="attr variable">
            <span class="name">pluginmanager</span>

        
    </div>
    <a class="headerlink" href="#Config.pluginmanager"></a>
    
            <div class="docstring"><p>The plugin manager handles plugin registration and hook invocation.</p>
</div>


                            </div>
                            <div id="Config.stash" class="classattr">
                                <div class="attr variable">
            <span class="name">stash</span>

        
    </div>
    <a class="headerlink" href="#Config.stash"></a>
    
            <div class="docstring"><p>A place where plugins can store information on the config for their
own use.</p>
</div>


                            </div>
                            <div id="Config.trace" class="classattr">
                                <div class="attr variable">
            <span class="name">trace</span>

        
    </div>
    <a class="headerlink" href="#Config.trace"></a>
    
    

                            </div>
                            <div id="Config.hook" class="classattr">
                                <div class="attr variable">
            <span class="name">hook</span><span class="annotation">: pluggy._hooks.HookRelay</span>

        
    </div>
    <a class="headerlink" href="#Config.hook"></a>
    
    

                            </div>
                            <div id="Config.args_source" class="classattr">
                                <div class="attr variable">
            <span class="name">args_source</span>

        
    </div>
    <a class="headerlink" href="#Config.args_source"></a>
    
    

                            </div>
                            <div id="Config.args" class="classattr">
                                <div class="attr variable">
            <span class="name">args</span><span class="annotation">: list[str]</span>

        
    </div>
    <a class="headerlink" href="#Config.args"></a>
    
    

                            </div>
                            <div id="Config.rootpath" class="classattr">
                                        <input id="Config.rootpath-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rootpath</span><span class="annotation">: pathlib._local.Path</span>

                <label class="view-source-button" for="Config.rootpath-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.rootpath"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.rootpath-1091"><a href="#Config.rootpath-1091"><span class="linenos">1091</span></a>    <span class="nd">@property</span>
</span><span id="Config.rootpath-1092"><a href="#Config.rootpath-1092"><span class="linenos">1092</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rootpath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">:</span>
</span><span id="Config.rootpath-1093"><a href="#Config.rootpath-1093"><span class="linenos">1093</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path to the :ref:`rootdir &lt;rootdir&gt;`.</span>
</span><span id="Config.rootpath-1094"><a href="#Config.rootpath-1094"><span class="linenos">1094</span></a>
</span><span id="Config.rootpath-1095"><a href="#Config.rootpath-1095"><span class="linenos">1095</span></a><span class="sd">        :type: pathlib.Path</span>
</span><span id="Config.rootpath-1096"><a href="#Config.rootpath-1096"><span class="linenos">1096</span></a>
</span><span id="Config.rootpath-1097"><a href="#Config.rootpath-1097"><span class="linenos">1097</span></a><span class="sd">        .. versionadded:: 6.1</span>
</span><span id="Config.rootpath-1098"><a href="#Config.rootpath-1098"><span class="linenos">1098</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.rootpath-1099"><a href="#Config.rootpath-1099"><span class="linenos">1099</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rootpath</span>
</span></pre></div>


            <div class="docstring"><p>The path to the :ref:<code>rootdir &lt;rootdir&gt;</code>.</p>

<p><em>New in version 6.1.</em></p>
</div>


                            </div>
                            <div id="Config.inipath" class="classattr">
                                        <input id="Config.inipath-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">inipath</span><span class="annotation">: pathlib._local.Path | None</span>

                <label class="view-source-button" for="Config.inipath-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.inipath"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.inipath-1101"><a href="#Config.inipath-1101"><span class="linenos">1101</span></a>    <span class="nd">@property</span>
</span><span id="Config.inipath-1102"><a href="#Config.inipath-1102"><span class="linenos">1102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inipath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.inipath-1103"><a href="#Config.inipath-1103"><span class="linenos">1103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path to the :ref:`configfile &lt;configfiles&gt;`.</span>
</span><span id="Config.inipath-1104"><a href="#Config.inipath-1104"><span class="linenos">1104</span></a>
</span><span id="Config.inipath-1105"><a href="#Config.inipath-1105"><span class="linenos">1105</span></a><span class="sd">        .. versionadded:: 6.1</span>
</span><span id="Config.inipath-1106"><a href="#Config.inipath-1106"><span class="linenos">1106</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.inipath-1107"><a href="#Config.inipath-1107"><span class="linenos">1107</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inipath</span>
</span></pre></div>


            <div class="docstring"><p>The path to the :ref:<code>configfile &lt;configfiles&gt;</code>.</p>

<p><em>New in version 6.1.</em></p>
</div>


                            </div>
                            <div id="Config.add_cleanup" class="classattr">
                                        <input id="Config.add_cleanup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_cleanup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">NoneType</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Config.add_cleanup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.add_cleanup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.add_cleanup-1109"><a href="#Config.add_cleanup-1109"><span class="linenos">1109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.add_cleanup-1110"><a href="#Config.add_cleanup-1110"><span class="linenos">1110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a function to be called when the config object gets out of</span>
</span><span id="Config.add_cleanup-1111"><a href="#Config.add_cleanup-1111"><span class="linenos">1111</span></a><span class="sd">        use (usually coinciding with pytest_unconfigure).&quot;&quot;&quot;</span>
</span><span id="Config.add_cleanup-1112"><a href="#Config.add_cleanup-1112"><span class="linenos">1112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add a function to be called when the config object gets out of
use (usually coinciding with pytest_unconfigure).</p>
</div>


                            </div>
                            <div id="Config.get_terminal_writer" class="classattr">
                                        <input id="Config.get_terminal_writer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_terminal_writer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">terminalwriter</span><span class="o">.</span><span class="n">TerminalWriter</span>:</span></span>

                <label class="view-source-button" for="Config.get_terminal_writer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.get_terminal_writer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.get_terminal_writer-1130"><a href="#Config.get_terminal_writer-1130"><span class="linenos">1130</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_terminal_writer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TerminalWriter</span><span class="p">:</span>
</span><span id="Config.get_terminal_writer-1131"><a href="#Config.get_terminal_writer-1131"><span class="linenos">1131</span></a>        <span class="n">terminalreporter</span><span class="p">:</span> <span class="n">TerminalReporter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
</span><span id="Config.get_terminal_writer-1132"><a href="#Config.get_terminal_writer-1132"><span class="linenos">1132</span></a>            <span class="s2">&quot;terminalreporter&quot;</span>
</span><span id="Config.get_terminal_writer-1133"><a href="#Config.get_terminal_writer-1133"><span class="linenos">1133</span></a>        <span class="p">)</span>
</span><span id="Config.get_terminal_writer-1134"><a href="#Config.get_terminal_writer-1134"><span class="linenos">1134</span></a>        <span class="k">assert</span> <span class="n">terminalreporter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Config.get_terminal_writer-1135"><a href="#Config.get_terminal_writer-1135"><span class="linenos">1135</span></a>        <span class="k">return</span> <span class="n">terminalreporter</span><span class="o">.</span><span class="n">_tw</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.pytest_cmdline_parse" class="classattr">
                                        <input id="Config.pytest_cmdline_parse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pytest_cmdline_parse</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">pluginmanager</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">PytestPluginManager</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>:</span></span>

                <label class="view-source-button" for="Config.pytest_cmdline_parse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.pytest_cmdline_parse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.pytest_cmdline_parse-1137"><a href="#Config.pytest_cmdline_parse-1137"><span class="linenos">1137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_cmdline_parse</span><span class="p">(</span>
</span><span id="Config.pytest_cmdline_parse-1138"><a href="#Config.pytest_cmdline_parse-1138"><span class="linenos">1138</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="Config.pytest_cmdline_parse-1139"><a href="#Config.pytest_cmdline_parse-1139"><span class="linenos">1139</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Config.pytest_cmdline_parse-1140"><a href="#Config.pytest_cmdline_parse-1140"><span class="linenos">1140</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config.pytest_cmdline_parse-1141"><a href="#Config.pytest_cmdline_parse-1141"><span class="linenos">1141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config.pytest_cmdline_parse-1142"><a href="#Config.pytest_cmdline_parse-1142"><span class="linenos">1142</span></a>        <span class="k">except</span> <span class="n">UsageError</span><span class="p">:</span>
</span><span id="Config.pytest_cmdline_parse-1143"><a href="#Config.pytest_cmdline_parse-1143"><span class="linenos">1143</span></a>            <span class="c1"># Handle --version and --help here in a minimal fashion.</span>
</span><span id="Config.pytest_cmdline_parse-1144"><a href="#Config.pytest_cmdline_parse-1144"><span class="linenos">1144</span></a>            <span class="c1"># This gets done via helpconfig normally, but its</span>
</span><span id="Config.pytest_cmdline_parse-1145"><a href="#Config.pytest_cmdline_parse-1145"><span class="linenos">1145</span></a>            <span class="c1"># pytest_cmdline_main is not called in case of errors.</span>
</span><span id="Config.pytest_cmdline_parse-1146"><a href="#Config.pytest_cmdline_parse-1146"><span class="linenos">1146</span></a>            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;--version&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="Config.pytest_cmdline_parse-1147"><a href="#Config.pytest_cmdline_parse-1147"><span class="linenos">1147</span></a>                <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.helpconfig</span><span class="w"> </span><span class="kn">import</span> <span class="n">showversion</span>
</span><span id="Config.pytest_cmdline_parse-1148"><a href="#Config.pytest_cmdline_parse-1148"><span class="linenos">1148</span></a>
</span><span id="Config.pytest_cmdline_parse-1149"><a href="#Config.pytest_cmdline_parse-1149"><span class="linenos">1149</span></a>                <span class="n">showversion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Config.pytest_cmdline_parse-1150"><a href="#Config.pytest_cmdline_parse-1150"><span class="linenos">1150</span></a>            <span class="k">elif</span> <span class="p">(</span>
</span><span id="Config.pytest_cmdline_parse-1151"><a href="#Config.pytest_cmdline_parse-1151"><span class="linenos">1151</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;--help&quot;</span> <span class="ow">in</span> <span class="n">args</span> <span class="ow">or</span> <span class="s2">&quot;-h&quot;</span> <span class="ow">in</span> <span class="n">args</span>
</span><span id="Config.pytest_cmdline_parse-1152"><a href="#Config.pytest_cmdline_parse-1152"><span class="linenos">1152</span></a>            <span class="p">):</span>
</span><span id="Config.pytest_cmdline_parse-1153"><a href="#Config.pytest_cmdline_parse-1153"><span class="linenos">1153</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_getparser</span><span class="p">()</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
</span><span id="Config.pytest_cmdline_parse-1154"><a href="#Config.pytest_cmdline_parse-1154"><span class="linenos">1154</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
</span><span id="Config.pytest_cmdline_parse-1155"><a href="#Config.pytest_cmdline_parse-1155"><span class="linenos">1155</span></a>                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">NOTE: displaying only minimal help due to UsageError.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="Config.pytest_cmdline_parse-1156"><a href="#Config.pytest_cmdline_parse-1156"><span class="linenos">1156</span></a>                <span class="p">)</span>
</span><span id="Config.pytest_cmdline_parse-1157"><a href="#Config.pytest_cmdline_parse-1157"><span class="linenos">1157</span></a>
</span><span id="Config.pytest_cmdline_parse-1158"><a href="#Config.pytest_cmdline_parse-1158"><span class="linenos">1158</span></a>            <span class="k">raise</span>
</span><span id="Config.pytest_cmdline_parse-1159"><a href="#Config.pytest_cmdline_parse-1159"><span class="linenos">1159</span></a>
</span><span id="Config.pytest_cmdline_parse-1160"><a href="#Config.pytest_cmdline_parse-1160"><span class="linenos">1160</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.notify_exception" class="classattr">
                                        <input id="Config.notify_exception-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">notify_exception</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">excinfo</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>,</span><span class="param">	<span class="n">option</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Config.notify_exception-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.notify_exception"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.notify_exception-1162"><a href="#Config.notify_exception-1162"><span class="linenos">1162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">notify_exception</span><span class="p">(</span>
</span><span id="Config.notify_exception-1163"><a href="#Config.notify_exception-1163"><span class="linenos">1163</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Config.notify_exception-1164"><a href="#Config.notify_exception-1164"><span class="linenos">1164</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="Config.notify_exception-1165"><a href="#Config.notify_exception-1165"><span class="linenos">1165</span></a>        <span class="n">option</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config.notify_exception-1166"><a href="#Config.notify_exception-1166"><span class="linenos">1166</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.notify_exception-1167"><a href="#Config.notify_exception-1167"><span class="linenos">1167</span></a>        <span class="k">if</span> <span class="n">option</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;fulltrace&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Config.notify_exception-1168"><a href="#Config.notify_exception-1168"><span class="linenos">1168</span></a>            <span class="n">style</span><span class="p">:</span> <span class="n">TracebackStyle</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span>
</span><span id="Config.notify_exception-1169"><a href="#Config.notify_exception-1169"><span class="linenos">1169</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Config.notify_exception-1170"><a href="#Config.notify_exception-1170"><span class="linenos">1170</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;native&quot;</span>
</span><span id="Config.notify_exception-1171"><a href="#Config.notify_exception-1171"><span class="linenos">1171</span></a>        <span class="n">excrepr</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">getrepr</span><span class="p">(</span>
</span><span id="Config.notify_exception-1172"><a href="#Config.notify_exception-1172"><span class="linenos">1172</span></a>            <span class="n">funcargs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showlocals</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;showlocals&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
</span><span id="Config.notify_exception-1173"><a href="#Config.notify_exception-1173"><span class="linenos">1173</span></a>        <span class="p">)</span>
</span><span id="Config.notify_exception-1174"><a href="#Config.notify_exception-1174"><span class="linenos">1174</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_internalerror</span><span class="p">(</span><span class="n">excrepr</span><span class="o">=</span><span class="n">excrepr</span><span class="p">,</span> <span class="n">excinfo</span><span class="o">=</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="Config.notify_exception-1175"><a href="#Config.notify_exception-1175"><span class="linenos">1175</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">res</span><span class="p">):</span>
</span><span id="Config.notify_exception-1176"><a href="#Config.notify_exception-1176"><span class="linenos">1176</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">excrepr</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="Config.notify_exception-1177"><a href="#Config.notify_exception-1177"><span class="linenos">1177</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INTERNALERROR&gt; </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Config.notify_exception-1178"><a href="#Config.notify_exception-1178"><span class="linenos">1178</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.cwd_relative_nodeid" class="classattr">
                                        <input id="Config.cwd_relative_nodeid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cwd_relative_nodeid</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Config.cwd_relative_nodeid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.cwd_relative_nodeid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.cwd_relative_nodeid-1180"><a href="#Config.cwd_relative_nodeid-1180"><span class="linenos">1180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cwd_relative_nodeid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Config.cwd_relative_nodeid-1181"><a href="#Config.cwd_relative_nodeid-1181"><span class="linenos">1181</span></a>        <span class="c1"># nodeid&#39;s are relative to the rootpath, compute relative to cwd.</span>
</span><span id="Config.cwd_relative_nodeid-1182"><a href="#Config.cwd_relative_nodeid-1182"><span class="linenos">1182</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span><span class="p">:</span>
</span><span id="Config.cwd_relative_nodeid-1183"><a href="#Config.cwd_relative_nodeid-1183"><span class="linenos">1183</span></a>            <span class="n">base_path_part</span><span class="p">,</span> <span class="o">*</span><span class="n">nodeid_part</span> <span class="o">=</span> <span class="n">nodeid</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">)</span>
</span><span id="Config.cwd_relative_nodeid-1184"><a href="#Config.cwd_relative_nodeid-1184"><span class="linenos">1184</span></a>            <span class="c1"># Only process path part</span>
</span><span id="Config.cwd_relative_nodeid-1185"><a href="#Config.cwd_relative_nodeid-1185"><span class="linenos">1185</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span> <span class="o">/</span> <span class="n">base_path_part</span>
</span><span id="Config.cwd_relative_nodeid-1186"><a href="#Config.cwd_relative_nodeid-1186"><span class="linenos">1186</span></a>            <span class="n">relative_path</span> <span class="o">=</span> <span class="n">bestrelpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">fullpath</span><span class="p">)</span>
</span><span id="Config.cwd_relative_nodeid-1187"><a href="#Config.cwd_relative_nodeid-1187"><span class="linenos">1187</span></a>
</span><span id="Config.cwd_relative_nodeid-1188"><a href="#Config.cwd_relative_nodeid-1188"><span class="linenos">1188</span></a>            <span class="n">nodeid</span> <span class="o">=</span> <span class="s2">&quot;::&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">relative_path</span><span class="p">,</span> <span class="o">*</span><span class="n">nodeid_part</span><span class="p">])</span>
</span><span id="Config.cwd_relative_nodeid-1189"><a href="#Config.cwd_relative_nodeid-1189"><span class="linenos">1189</span></a>        <span class="k">return</span> <span class="n">nodeid</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.fromdictargs" class="classattr">
                                        <input id="Config.fromdictargs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">fromdictargs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">option_dict</span>, </span><span class="param"><span class="n">args</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>:</span></span>

                <label class="view-source-button" for="Config.fromdictargs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.fromdictargs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.fromdictargs-1191"><a href="#Config.fromdictargs-1191"><span class="linenos">1191</span></a>    <span class="nd">@classmethod</span>
</span><span id="Config.fromdictargs-1192"><a href="#Config.fromdictargs-1192"><span class="linenos">1192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fromdictargs</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">option_dict</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Config.fromdictargs-1193"><a href="#Config.fromdictargs-1193"><span class="linenos">1193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor usable for subprocesses.&quot;&quot;&quot;</span>
</span><span id="Config.fromdictargs-1194"><a href="#Config.fromdictargs-1194"><span class="linenos">1194</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Config.fromdictargs-1195"><a href="#Config.fromdictargs-1195"><span class="linenos">1195</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">option_dict</span><span class="p">)</span>
</span><span id="Config.fromdictargs-1196"><a href="#Config.fromdictargs-1196"><span class="linenos">1196</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">addopts</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Config.fromdictargs-1197"><a href="#Config.fromdictargs-1197"><span class="linenos">1197</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">plugins</span><span class="p">:</span>
</span><span id="Config.fromdictargs-1198"><a href="#Config.fromdictargs-1198"><span class="linenos">1198</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">consider_pluginarg</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="Config.fromdictargs-1199"><a href="#Config.fromdictargs-1199"><span class="linenos">1199</span></a>        <span class="k">return</span> <span class="n">config</span>
</span></pre></div>


            <div class="docstring"><p>Constructor usable for subprocesses.</p>
</div>


                            </div>
                            <div id="Config.pytest_load_initial_conftests" class="classattr">
                                        <input id="Config.pytest_load_initial_conftests-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-hookimpl">@hookimpl(trylast=True)</div>

        <span class="def">def</span>
        <span class="name">pytest_load_initial_conftests</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">early_config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Config.pytest_load_initial_conftests-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.pytest_load_initial_conftests"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.pytest_load_initial_conftests-1209"><a href="#Config.pytest_load_initial_conftests-1209"><span class="linenos">1209</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">trylast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config.pytest_load_initial_conftests-1210"><a href="#Config.pytest_load_initial_conftests-1210"><span class="linenos">1210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_load_initial_conftests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">early_config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.pytest_load_initial_conftests-1211"><a href="#Config.pytest_load_initial_conftests-1211"><span class="linenos">1211</span></a>        <span class="c1"># We haven&#39;t fully parsed the command line arguments yet, so</span>
</span><span id="Config.pytest_load_initial_conftests-1212"><a href="#Config.pytest_load_initial_conftests-1212"><span class="linenos">1212</span></a>        <span class="c1"># early_config.args it not set yet. But we need it for</span>
</span><span id="Config.pytest_load_initial_conftests-1213"><a href="#Config.pytest_load_initial_conftests-1213"><span class="linenos">1213</span></a>        <span class="c1"># discovering the initial conftests. So &quot;pre-run&quot; the logic here.</span>
</span><span id="Config.pytest_load_initial_conftests-1214"><a href="#Config.pytest_load_initial_conftests-1214"><span class="linenos">1214</span></a>        <span class="c1"># It will be done for real in `parse()`.</span>
</span><span id="Config.pytest_load_initial_conftests-1215"><a href="#Config.pytest_load_initial_conftests-1215"><span class="linenos">1215</span></a>        <span class="n">args</span><span class="p">,</span> <span class="n">args_source</span> <span class="o">=</span> <span class="n">early_config</span><span class="o">.</span><span class="n">_decide_args</span><span class="p">(</span>
</span><span id="Config.pytest_load_initial_conftests-1216"><a href="#Config.pytest_load_initial_conftests-1216"><span class="linenos">1216</span></a>            <span class="n">args</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">file_or_dir</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1217"><a href="#Config.pytest_load_initial_conftests-1217"><span class="linenos">1217</span></a>            <span class="n">pyargs</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1218"><a href="#Config.pytest_load_initial_conftests-1218"><span class="linenos">1218</span></a>            <span class="n">testpaths</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;testpaths&quot;</span><span class="p">),</span>
</span><span id="Config.pytest_load_initial_conftests-1219"><a href="#Config.pytest_load_initial_conftests-1219"><span class="linenos">1219</span></a>            <span class="n">invocation_dir</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1220"><a href="#Config.pytest_load_initial_conftests-1220"><span class="linenos">1220</span></a>            <span class="n">rootpath</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1221"><a href="#Config.pytest_load_initial_conftests-1221"><span class="linenos">1221</span></a>            <span class="n">warn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1222"><a href="#Config.pytest_load_initial_conftests-1222"><span class="linenos">1222</span></a>        <span class="p">)</span>
</span><span id="Config.pytest_load_initial_conftests-1223"><a href="#Config.pytest_load_initial_conftests-1223"><span class="linenos">1223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">_set_initial_conftests</span><span class="p">(</span>
</span><span id="Config.pytest_load_initial_conftests-1224"><a href="#Config.pytest_load_initial_conftests-1224"><span class="linenos">1224</span></a>            <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1225"><a href="#Config.pytest_load_initial_conftests-1225"><span class="linenos">1225</span></a>            <span class="n">pyargs</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1226"><a href="#Config.pytest_load_initial_conftests-1226"><span class="linenos">1226</span></a>            <span class="n">noconftest</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">noconftest</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1227"><a href="#Config.pytest_load_initial_conftests-1227"><span class="linenos">1227</span></a>            <span class="n">rootpath</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1228"><a href="#Config.pytest_load_initial_conftests-1228"><span class="linenos">1228</span></a>            <span class="n">confcutdir</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">confcutdir</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1229"><a href="#Config.pytest_load_initial_conftests-1229"><span class="linenos">1229</span></a>            <span class="n">invocation_dir</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1230"><a href="#Config.pytest_load_initial_conftests-1230"><span class="linenos">1230</span></a>            <span class="n">importmode</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">importmode</span><span class="p">,</span>
</span><span id="Config.pytest_load_initial_conftests-1231"><a href="#Config.pytest_load_initial_conftests-1231"><span class="linenos">1231</span></a>            <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">early_config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span>
</span><span id="Config.pytest_load_initial_conftests-1232"><a href="#Config.pytest_load_initial_conftests-1232"><span class="linenos">1232</span></a>                <span class="s2">&quot;consider_namespace_packages&quot;</span>
</span><span id="Config.pytest_load_initial_conftests-1233"><a href="#Config.pytest_load_initial_conftests-1233"><span class="linenos">1233</span></a>            <span class="p">),</span>
</span><span id="Config.pytest_load_initial_conftests-1234"><a href="#Config.pytest_load_initial_conftests-1234"><span class="linenos">1234</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.pytest_collection" class="classattr">
                                        <input id="Config.pytest_collection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-hookimpl">@hookimpl(wrapper=True)</div>

        <span class="def">def</span>
        <span class="name">pytest_collection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Generator</span><span class="p">[</span><span class="n">NoneType</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Config.pytest_collection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.pytest_collection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.pytest_collection-1413"><a href="#Config.pytest_collection-1413"><span class="linenos">1413</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">wrapper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config.pytest_collection-1414"><a href="#Config.pytest_collection-1414"><span class="linenos">1414</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">]:</span>
</span><span id="Config.pytest_collection-1415"><a href="#Config.pytest_collection-1415"><span class="linenos">1415</span></a>        <span class="c1"># Validate invalid ini keys after collection is done so we take in account</span>
</span><span id="Config.pytest_collection-1416"><a href="#Config.pytest_collection-1416"><span class="linenos">1416</span></a>        <span class="c1"># options added by late-loading conftest files.</span>
</span><span id="Config.pytest_collection-1417"><a href="#Config.pytest_collection-1417"><span class="linenos">1417</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config.pytest_collection-1418"><a href="#Config.pytest_collection-1418"><span class="linenos">1418</span></a>            <span class="k">return</span> <span class="p">(</span><span class="k">yield</span><span class="p">)</span>
</span><span id="Config.pytest_collection-1419"><a href="#Config.pytest_collection-1419"><span class="linenos">1419</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Config.pytest_collection-1420"><a href="#Config.pytest_collection-1420"><span class="linenos">1420</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_config_options</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.parse" class="classattr">
                                        <input id="Config.parse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="n">addopts</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Config.parse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.parse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.parse-1487"><a href="#Config.parse-1487"><span class="linenos">1487</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">addopts</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.parse-1488"><a href="#Config.parse-1488"><span class="linenos">1488</span></a>        <span class="c1"># Parse given cmdline arguments into this config object.</span>
</span><span id="Config.parse-1489"><a href="#Config.parse-1489"><span class="linenos">1489</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="Config.parse-1490"><a href="#Config.parse-1490"><span class="linenos">1490</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">[]</span>
</span><span id="Config.parse-1491"><a href="#Config.parse-1491"><span class="linenos">1491</span></a>        <span class="p">),</span> <span class="s2">&quot;can only parse cmdline args at most once per Config object&quot;</span>
</span><span id="Config.parse-1492"><a href="#Config.parse-1492"><span class="linenos">1492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_addhooks</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="Config.parse-1493"><a href="#Config.parse-1493"><span class="linenos">1493</span></a>            <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">pluginmanager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="p">)</span>
</span><span id="Config.parse-1494"><a href="#Config.parse-1494"><span class="linenos">1494</span></a>        <span class="p">)</span>
</span><span id="Config.parse-1495"><a href="#Config.parse-1495"><span class="linenos">1495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_preparse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">addopts</span><span class="o">=</span><span class="n">addopts</span><span class="p">)</span>
</span><span id="Config.parse-1496"><a href="#Config.parse-1496"><span class="linenos">1496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">after_preparse</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># type: ignore</span>
</span><span id="Config.parse-1497"><a href="#Config.parse-1497"><span class="linenos">1497</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config.parse-1498"><a href="#Config.parse-1498"><span class="linenos">1498</span></a>            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse_setoption</span><span class="p">(</span>
</span><span id="Config.parse-1499"><a href="#Config.parse-1499"><span class="linenos">1499</span></a>                <span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span>
</span><span id="Config.parse-1500"><a href="#Config.parse-1500"><span class="linenos">1500</span></a>            <span class="p">)</span>
</span><span id="Config.parse-1501"><a href="#Config.parse-1501"><span class="linenos">1501</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_decide_args</span><span class="p">(</span>
</span><span id="Config.parse-1502"><a href="#Config.parse-1502"><span class="linenos">1502</span></a>                <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
</span><span id="Config.parse-1503"><a href="#Config.parse-1503"><span class="linenos">1503</span></a>                <span class="n">pyargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Config.parse-1504"><a href="#Config.parse-1504"><span class="linenos">1504</span></a>                <span class="n">testpaths</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;testpaths&quot;</span><span class="p">),</span>
</span><span id="Config.parse-1505"><a href="#Config.parse-1505"><span class="linenos">1505</span></a>                <span class="n">invocation_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Config.parse-1506"><a href="#Config.parse-1506"><span class="linenos">1506</span></a>                <span class="n">rootpath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Config.parse-1507"><a href="#Config.parse-1507"><span class="linenos">1507</span></a>                <span class="n">warn</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Config.parse-1508"><a href="#Config.parse-1508"><span class="linenos">1508</span></a>            <span class="p">)</span>
</span><span id="Config.parse-1509"><a href="#Config.parse-1509"><span class="linenos">1509</span></a>        <span class="k">except</span> <span class="n">PrintHelp</span><span class="p">:</span>
</span><span id="Config.parse-1510"><a href="#Config.parse-1510"><span class="linenos">1510</span></a>            <span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.issue_config_time_warning" class="classattr">
                                        <input id="Config.issue_config_time_warning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">issue_config_time_warning</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">warning</span><span class="p">:</span> <span class="ne">Warning</span>, </span><span class="param"><span class="n">stacklevel</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Config.issue_config_time_warning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.issue_config_time_warning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.issue_config_time_warning-1512"><a href="#Config.issue_config_time_warning-1512"><span class="linenos">1512</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">issue_config_time_warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warning</span><span class="p">:</span> <span class="ne">Warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.issue_config_time_warning-1513"><a href="#Config.issue_config_time_warning-1513"><span class="linenos">1513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Issue and handle a warning during the &quot;configure&quot; stage.</span>
</span><span id="Config.issue_config_time_warning-1514"><a href="#Config.issue_config_time_warning-1514"><span class="linenos">1514</span></a>
</span><span id="Config.issue_config_time_warning-1515"><a href="#Config.issue_config_time_warning-1515"><span class="linenos">1515</span></a><span class="sd">        During ``pytest_configure`` we can&#39;t capture warnings using the ``catch_warnings_for_item``</span>
</span><span id="Config.issue_config_time_warning-1516"><a href="#Config.issue_config_time_warning-1516"><span class="linenos">1516</span></a><span class="sd">        function because it is not possible to have hook wrappers around ``pytest_configure``.</span>
</span><span id="Config.issue_config_time_warning-1517"><a href="#Config.issue_config_time_warning-1517"><span class="linenos">1517</span></a>
</span><span id="Config.issue_config_time_warning-1518"><a href="#Config.issue_config_time_warning-1518"><span class="linenos">1518</span></a><span class="sd">        This function is mainly intended for plugins that need to issue warnings during</span>
</span><span id="Config.issue_config_time_warning-1519"><a href="#Config.issue_config_time_warning-1519"><span class="linenos">1519</span></a><span class="sd">        ``pytest_configure`` (or similar stages).</span>
</span><span id="Config.issue_config_time_warning-1520"><a href="#Config.issue_config_time_warning-1520"><span class="linenos">1520</span></a>
</span><span id="Config.issue_config_time_warning-1521"><a href="#Config.issue_config_time_warning-1521"><span class="linenos">1521</span></a><span class="sd">        :param warning: The warning instance.</span>
</span><span id="Config.issue_config_time_warning-1522"><a href="#Config.issue_config_time_warning-1522"><span class="linenos">1522</span></a><span class="sd">        :param stacklevel: stacklevel forwarded to warnings.warn.</span>
</span><span id="Config.issue_config_time_warning-1523"><a href="#Config.issue_config_time_warning-1523"><span class="linenos">1523</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.issue_config_time_warning-1524"><a href="#Config.issue_config_time_warning-1524"><span class="linenos">1524</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">is_blocked</span><span class="p">(</span><span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
</span><span id="Config.issue_config_time_warning-1525"><a href="#Config.issue_config_time_warning-1525"><span class="linenos">1525</span></a>            <span class="k">return</span>
</span><span id="Config.issue_config_time_warning-1526"><a href="#Config.issue_config_time_warning-1526"><span class="linenos">1526</span></a>
</span><span id="Config.issue_config_time_warning-1527"><a href="#Config.issue_config_time_warning-1527"><span class="linenos">1527</span></a>        <span class="n">cmdline_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_args_namespace</span><span class="o">.</span><span class="n">pythonwarnings</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="Config.issue_config_time_warning-1528"><a href="#Config.issue_config_time_warning-1528"><span class="linenos">1528</span></a>        <span class="n">config_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;filterwarnings&quot;</span><span class="p">)</span>
</span><span id="Config.issue_config_time_warning-1529"><a href="#Config.issue_config_time_warning-1529"><span class="linenos">1529</span></a>
</span><span id="Config.issue_config_time_warning-1530"><a href="#Config.issue_config_time_warning-1530"><span class="linenos">1530</span></a>        <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">records</span><span class="p">:</span>
</span><span id="Config.issue_config_time_warning-1531"><a href="#Config.issue_config_time_warning-1531"><span class="linenos">1531</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">warning</span><span class="p">))</span>
</span><span id="Config.issue_config_time_warning-1532"><a href="#Config.issue_config_time_warning-1532"><span class="linenos">1532</span></a>            <span class="n">apply_warning_filters</span><span class="p">(</span><span class="n">config_filters</span><span class="p">,</span> <span class="n">cmdline_filters</span><span class="p">)</span>
</span><span id="Config.issue_config_time_warning-1533"><a href="#Config.issue_config_time_warning-1533"><span class="linenos">1533</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>
</span><span id="Config.issue_config_time_warning-1534"><a href="#Config.issue_config_time_warning-1534"><span class="linenos">1534</span></a>
</span><span id="Config.issue_config_time_warning-1535"><a href="#Config.issue_config_time_warning-1535"><span class="linenos">1535</span></a>        <span class="k">if</span> <span class="n">records</span><span class="p">:</span>
</span><span id="Config.issue_config_time_warning-1536"><a href="#Config.issue_config_time_warning-1536"><span class="linenos">1536</span></a>            <span class="n">frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="n">stacklevel</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Config.issue_config_time_warning-1537"><a href="#Config.issue_config_time_warning-1537"><span class="linenos">1537</span></a>            <span class="n">location</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_filename</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="Config.issue_config_time_warning-1538"><a href="#Config.issue_config_time_warning-1538"><span class="linenos">1538</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_warning_recorded</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="Config.issue_config_time_warning-1539"><a href="#Config.issue_config_time_warning-1539"><span class="linenos">1539</span></a>                <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
</span><span id="Config.issue_config_time_warning-1540"><a href="#Config.issue_config_time_warning-1540"><span class="linenos">1540</span></a>                    <span class="n">warning_message</span><span class="o">=</span><span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="Config.issue_config_time_warning-1541"><a href="#Config.issue_config_time_warning-1541"><span class="linenos">1541</span></a>                    <span class="n">when</span><span class="o">=</span><span class="s2">&quot;config&quot;</span><span class="p">,</span>
</span><span id="Config.issue_config_time_warning-1542"><a href="#Config.issue_config_time_warning-1542"><span class="linenos">1542</span></a>                    <span class="n">nodeid</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Config.issue_config_time_warning-1543"><a href="#Config.issue_config_time_warning-1543"><span class="linenos">1543</span></a>                    <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
</span><span id="Config.issue_config_time_warning-1544"><a href="#Config.issue_config_time_warning-1544"><span class="linenos">1544</span></a>                <span class="p">)</span>
</span><span id="Config.issue_config_time_warning-1545"><a href="#Config.issue_config_time_warning-1545"><span class="linenos">1545</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Issue and handle a warning during the "configure" stage.</p>

<p>During <code>pytest_configure</code> we can't capture warnings using the <code>catch_warnings_for_item</code>
function because it is not possible to have hook wrappers around <code>pytest_configure</code>.</p>

<p>This function is mainly intended for plugins that need to issue warnings during
<code>pytest_configure</code> (or similar stages).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>warning</strong>:  The warning instance.</li>
<li><strong>stacklevel</strong>:  stacklevel forwarded to warnings.warn.</li>
</ul>
</div>


                            </div>
                            <div id="Config.addinivalue_line" class="classattr">
                                        <input id="Config.addinivalue_line-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addinivalue_line</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">line</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Config.addinivalue_line-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.addinivalue_line"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.addinivalue_line-1547"><a href="#Config.addinivalue_line-1547"><span class="linenos">1547</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addinivalue_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.addinivalue_line-1548"><a href="#Config.addinivalue_line-1548"><span class="linenos">1548</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a line to an ini-file option. The option must have been</span>
</span><span id="Config.addinivalue_line-1549"><a href="#Config.addinivalue_line-1549"><span class="linenos">1549</span></a><span class="sd">        declared but might not yet be set in which case the line becomes</span>
</span><span id="Config.addinivalue_line-1550"><a href="#Config.addinivalue_line-1550"><span class="linenos">1550</span></a><span class="sd">        the first line in its value.&quot;&quot;&quot;</span>
</span><span id="Config.addinivalue_line-1551"><a href="#Config.addinivalue_line-1551"><span class="linenos">1551</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config.addinivalue_line-1552"><a href="#Config.addinivalue_line-1552"><span class="linenos">1552</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
</span><span id="Config.addinivalue_line-1553"><a href="#Config.addinivalue_line-1553"><span class="linenos">1553</span></a>        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>  <span class="c1"># modifies the cached list inline</span>
</span></pre></div>


            <div class="docstring"><p>Add a line to an ini-file option. The option must have been
declared but might not yet be set in which case the line becomes
the first line in its value.</p>
</div>


                            </div>
                            <div id="Config.getini" class="classattr">
                                        <input id="Config.getini-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getini</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Config.getini-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.getini"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.getini-1555"><a href="#Config.getini-1555"><span class="linenos">1555</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Config.getini-1556"><a href="#Config.getini-1556"><span class="linenos">1556</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return configuration value from an :ref:`ini file &lt;configfiles&gt;`.</span>
</span><span id="Config.getini-1557"><a href="#Config.getini-1557"><span class="linenos">1557</span></a>
</span><span id="Config.getini-1558"><a href="#Config.getini-1558"><span class="linenos">1558</span></a><span class="sd">        If a configuration value is not defined in an</span>
</span><span id="Config.getini-1559"><a href="#Config.getini-1559"><span class="linenos">1559</span></a><span class="sd">        :ref:`ini file &lt;configfiles&gt;`, then the ``default`` value provided while</span>
</span><span id="Config.getini-1560"><a href="#Config.getini-1560"><span class="linenos">1560</span></a><span class="sd">        registering the configuration through</span>
</span><span id="Config.getini-1561"><a href="#Config.getini-1561"><span class="linenos">1561</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;` will be returned.</span>
</span><span id="Config.getini-1562"><a href="#Config.getini-1562"><span class="linenos">1562</span></a><span class="sd">        Please note that you can even provide ``None`` as a valid</span>
</span><span id="Config.getini-1563"><a href="#Config.getini-1563"><span class="linenos">1563</span></a><span class="sd">        default value.</span>
</span><span id="Config.getini-1564"><a href="#Config.getini-1564"><span class="linenos">1564</span></a>
</span><span id="Config.getini-1565"><a href="#Config.getini-1565"><span class="linenos">1565</span></a><span class="sd">        If ``default`` is not provided while registering using</span>
</span><span id="Config.getini-1566"><a href="#Config.getini-1566"><span class="linenos">1566</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;`, then a default value</span>
</span><span id="Config.getini-1567"><a href="#Config.getini-1567"><span class="linenos">1567</span></a><span class="sd">        based on the ``type`` parameter passed to</span>
</span><span id="Config.getini-1568"><a href="#Config.getini-1568"><span class="linenos">1568</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;` will be returned.</span>
</span><span id="Config.getini-1569"><a href="#Config.getini-1569"><span class="linenos">1569</span></a><span class="sd">        The default values based on ``type`` are:</span>
</span><span id="Config.getini-1570"><a href="#Config.getini-1570"><span class="linenos">1570</span></a><span class="sd">        ``paths``, ``pathlist``, ``args`` and ``linelist`` : empty list ``[]``</span>
</span><span id="Config.getini-1571"><a href="#Config.getini-1571"><span class="linenos">1571</span></a><span class="sd">        ``bool`` : ``False``</span>
</span><span id="Config.getini-1572"><a href="#Config.getini-1572"><span class="linenos">1572</span></a><span class="sd">        ``string`` : empty string ``&quot;&quot;``</span>
</span><span id="Config.getini-1573"><a href="#Config.getini-1573"><span class="linenos">1573</span></a>
</span><span id="Config.getini-1574"><a href="#Config.getini-1574"><span class="linenos">1574</span></a><span class="sd">        If neither the ``default`` nor the ``type`` parameter is passed</span>
</span><span id="Config.getini-1575"><a href="#Config.getini-1575"><span class="linenos">1575</span></a><span class="sd">        while registering the configuration through</span>
</span><span id="Config.getini-1576"><a href="#Config.getini-1576"><span class="linenos">1576</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;`, then the configuration</span>
</span><span id="Config.getini-1577"><a href="#Config.getini-1577"><span class="linenos">1577</span></a><span class="sd">        is treated as a string and a default empty string &#39;&#39; is returned.</span>
</span><span id="Config.getini-1578"><a href="#Config.getini-1578"><span class="linenos">1578</span></a>
</span><span id="Config.getini-1579"><a href="#Config.getini-1579"><span class="linenos">1579</span></a><span class="sd">        If the specified name hasn&#39;t been registered through a prior</span>
</span><span id="Config.getini-1580"><a href="#Config.getini-1580"><span class="linenos">1580</span></a><span class="sd">        :func:`parser.addini &lt;pytest.Parser.addini&gt;` call (usually from a</span>
</span><span id="Config.getini-1581"><a href="#Config.getini-1581"><span class="linenos">1581</span></a><span class="sd">        plugin), a ValueError is raised.</span>
</span><span id="Config.getini-1582"><a href="#Config.getini-1582"><span class="linenos">1582</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.getini-1583"><a href="#Config.getini-1583"><span class="linenos">1583</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config.getini-1584"><a href="#Config.getini-1584"><span class="linenos">1584</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inicache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="Config.getini-1585"><a href="#Config.getini-1585"><span class="linenos">1585</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Config.getini-1586"><a href="#Config.getini-1586"><span class="linenos">1586</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_inicache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getini</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config.getini-1587"><a href="#Config.getini-1587"><span class="linenos">1587</span></a>            <span class="k">return</span> <span class="n">val</span>
</span></pre></div>


            <div class="docstring"><p>Return configuration value from an :ref:<code>ini file &lt;configfiles&gt;</code>.</p>

<p>If a configuration value is not defined in an
:ref:<code>ini file &lt;configfiles&gt;</code>, then the <code>default</code> value provided while
registering the configuration through
<code>parser.addini &lt;<a href="#Parser.addini">pytest.Parser.addini</a>&gt;()</code> will be returned.
Please note that you can even provide <code>None</code> as a valid
default value.</p>

<p>If <code>default</code> is not provided while registering using
<code>parser.addini &lt;<a href="#Parser.addini">pytest.Parser.addini</a>&gt;()</code>, then a default value
based on the <code>type</code> parameter passed to
<code>parser.addini &lt;<a href="#Parser.addini">pytest.Parser.addini</a>&gt;()</code> will be returned.
The default values based on <code>type</code> are:
<code>paths</code>, <code>pathlist</code>, <code><a href="#Config.args">args</a></code> and <code>linelist</code> : empty list <code>[]</code>
<code>bool</code> : <code>False</code>
<code>string</code> : empty string <code>""</code></p>

<p>If neither the <code>default</code> nor the <code>type</code> parameter is passed
while registering the configuration through
<code>parser.addini &lt;<a href="#Parser.addini">pytest.Parser.addini</a>&gt;()</code>, then the configuration
is treated as a string and a default empty string '' is returned.</p>

<p>If the specified name hasn't been registered through a prior
<code>parser.addini &lt;<a href="#Parser.addini">pytest.Parser.addini</a>&gt;()</code> call (usually from a
plugin), a ValueError is raised.</p>
</div>


                            </div>
                            <div id="Config.getoption" class="classattr">
                                        <input id="Config.getoption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getoption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">default</span><span class="o">=&lt;</span><span class="n">NOTSET</span><span class="o">&gt;</span>, </span><span class="param"><span class="n">skip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Config.getoption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.getoption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.getoption-1683"><a href="#Config.getoption-1683"><span class="linenos">1683</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">notset</span><span class="p">,</span> <span class="n">skip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Config.getoption-1684"><a href="#Config.getoption-1684"><span class="linenos">1684</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return command line option value.</span>
</span><span id="Config.getoption-1685"><a href="#Config.getoption-1685"><span class="linenos">1685</span></a>
</span><span id="Config.getoption-1686"><a href="#Config.getoption-1686"><span class="linenos">1686</span></a><span class="sd">        :param name: Name of the option. You may also specify</span>
</span><span id="Config.getoption-1687"><a href="#Config.getoption-1687"><span class="linenos">1687</span></a><span class="sd">            the literal ``--OPT`` option instead of the &quot;dest&quot; option name.</span>
</span><span id="Config.getoption-1688"><a href="#Config.getoption-1688"><span class="linenos">1688</span></a><span class="sd">        :param default: Fallback value if no option of that name is **declared** via :hook:`pytest_addoption`.</span>
</span><span id="Config.getoption-1689"><a href="#Config.getoption-1689"><span class="linenos">1689</span></a><span class="sd">            Note this parameter will be ignored when the option is **declared** even if the option&#39;s value is ``None``.</span>
</span><span id="Config.getoption-1690"><a href="#Config.getoption-1690"><span class="linenos">1690</span></a><span class="sd">        :param skip: If ``True``, raise :func:`pytest.skip` if option is undeclared or has a ``None`` value.</span>
</span><span id="Config.getoption-1691"><a href="#Config.getoption-1691"><span class="linenos">1691</span></a><span class="sd">            Note that even if ``True``, if a default was specified it will be returned instead of a skip.</span>
</span><span id="Config.getoption-1692"><a href="#Config.getoption-1692"><span class="linenos">1692</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.getoption-1693"><a href="#Config.getoption-1693"><span class="linenos">1693</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opt2dest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Config.getoption-1694"><a href="#Config.getoption-1694"><span class="linenos">1694</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Config.getoption-1695"><a href="#Config.getoption-1695"><span class="linenos">1695</span></a>            <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Config.getoption-1696"><a href="#Config.getoption-1696"><span class="linenos">1696</span></a>            <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">skip</span><span class="p">:</span>
</span><span id="Config.getoption-1697"><a href="#Config.getoption-1697"><span class="linenos">1697</span></a>                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Config.getoption-1698"><a href="#Config.getoption-1698"><span class="linenos">1698</span></a>            <span class="k">return</span> <span class="n">val</span>
</span><span id="Config.getoption-1699"><a href="#Config.getoption-1699"><span class="linenos">1699</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Config.getoption-1700"><a href="#Config.getoption-1700"><span class="linenos">1700</span></a>            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="Config.getoption-1701"><a href="#Config.getoption-1701"><span class="linenos">1701</span></a>                <span class="k">return</span> <span class="n">default</span>
</span><span id="Config.getoption-1702"><a href="#Config.getoption-1702"><span class="linenos">1702</span></a>            <span class="k">if</span> <span class="n">skip</span><span class="p">:</span>
</span><span id="Config.getoption-1703"><a href="#Config.getoption-1703"><span class="linenos">1703</span></a>                <span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
</span><span id="Config.getoption-1704"><a href="#Config.getoption-1704"><span class="linenos">1704</span></a>
</span><span id="Config.getoption-1705"><a href="#Config.getoption-1705"><span class="linenos">1705</span></a>                <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2"> option found&quot;</span><span class="p">)</span>
</span><span id="Config.getoption-1706"><a href="#Config.getoption-1706"><span class="linenos">1706</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no option named </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span></pre></div>


            <div class="docstring"><p>Return command line option value.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>:  Name of the option. You may also specify
the literal <code>--OPT</code> option instead of the "dest" option name.</li>
<li><strong>default: Fallback value if no option of that name is <em>*declared</strong> via :hook<strong>: <code>pytest_addoption</code>.
Note this parameter will be ignored when the option is *</em>declared</strong> even if the option's value is <code>None</code>.</li>
<li><strong>skip</strong>:  If <code>True</code>, raise <code><a href="#skip">pytest.skip()</a></code> if option is undeclared or has a <code>None</code> value.
Note that even if <code>True</code>, if a default was specified it will be returned instead of a skip.</li>
</ul>
</div>


                            </div>
                            <div id="Config.getvalue" class="classattr">
                                        <input id="Config.getvalue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getvalue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">path</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Config.getvalue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.getvalue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.getvalue-1708"><a href="#Config.getvalue-1708"><span class="linenos">1708</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Config.getvalue-1709"><a href="#Config.getvalue-1709"><span class="linenos">1709</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated, use getoption() instead.&quot;&quot;&quot;</span>
</span><span id="Config.getvalue-1710"><a href="#Config.getvalue-1710"><span class="linenos">1710</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Deprecated, use getoption() instead.</p>
</div>


                            </div>
                            <div id="Config.getvalueorskip" class="classattr">
                                        <input id="Config.getvalueorskip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getvalueorskip</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">path</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Config.getvalueorskip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.getvalueorskip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.getvalueorskip-1712"><a href="#Config.getvalueorskip-1712"><span class="linenos">1712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getvalueorskip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Config.getvalueorskip-1713"><a href="#Config.getvalueorskip-1713"><span class="linenos">1713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated, use getoption(skip=True) instead.&quot;&quot;&quot;</span>
</span><span id="Config.getvalueorskip-1714"><a href="#Config.getvalueorskip-1714"><span class="linenos">1714</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Deprecated, use getoption(skip=True) instead.</p>
</div>


                            </div>
                            <div id="Config.VERBOSITY_ASSERTIONS" class="classattr">
                                <div class="attr variable">
            <span class="name">VERBOSITY_ASSERTIONS</span><span class="annotation">: Final</span>        =
<span class="default_value">&#39;assertions&#39;</span>

        
    </div>
    <a class="headerlink" href="#Config.VERBOSITY_ASSERTIONS"></a>
    
    

                            </div>
                            <div id="Config.VERBOSITY_TEST_CASES" class="classattr">
                                <div class="attr variable">
            <span class="name">VERBOSITY_TEST_CASES</span><span class="annotation">: Final</span>        =
<span class="default_value">&#39;test_cases&#39;</span>

        
    </div>
    <a class="headerlink" href="#Config.VERBOSITY_TEST_CASES"></a>
    
    

                            </div>
                            <div id="Config.get_verbosity" class="classattr">
                                        <input id="Config.get_verbosity-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_verbosity</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">verbosity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="Config.get_verbosity-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.get_verbosity"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.get_verbosity-1722"><a href="#Config.get_verbosity-1722"><span class="linenos">1722</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_verbosity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbosity_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Config.get_verbosity-1723"><a href="#Config.get_verbosity-1723"><span class="linenos">1723</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Retrieve the verbosity level for a fine-grained verbosity type.</span>
</span><span id="Config.get_verbosity-1724"><a href="#Config.get_verbosity-1724"><span class="linenos">1724</span></a>
</span><span id="Config.get_verbosity-1725"><a href="#Config.get_verbosity-1725"><span class="linenos">1725</span></a><span class="sd">        :param verbosity_type: Verbosity type to get level for. If a level is</span>
</span><span id="Config.get_verbosity-1726"><a href="#Config.get_verbosity-1726"><span class="linenos">1726</span></a><span class="sd">            configured for the given type, that value will be returned. If the</span>
</span><span id="Config.get_verbosity-1727"><a href="#Config.get_verbosity-1727"><span class="linenos">1727</span></a><span class="sd">            given type is not a known verbosity type, the global verbosity</span>
</span><span id="Config.get_verbosity-1728"><a href="#Config.get_verbosity-1728"><span class="linenos">1728</span></a><span class="sd">            level will be returned. If the given type is None (default), the</span>
</span><span id="Config.get_verbosity-1729"><a href="#Config.get_verbosity-1729"><span class="linenos">1729</span></a><span class="sd">            global verbosity level will be returned.</span>
</span><span id="Config.get_verbosity-1730"><a href="#Config.get_verbosity-1730"><span class="linenos">1730</span></a>
</span><span id="Config.get_verbosity-1731"><a href="#Config.get_verbosity-1731"><span class="linenos">1731</span></a><span class="sd">        To configure a level for a fine-grained verbosity type, the</span>
</span><span id="Config.get_verbosity-1732"><a href="#Config.get_verbosity-1732"><span class="linenos">1732</span></a><span class="sd">        configuration file should have a setting for the configuration name</span>
</span><span id="Config.get_verbosity-1733"><a href="#Config.get_verbosity-1733"><span class="linenos">1733</span></a><span class="sd">        and a numeric value for the verbosity level. A special value of &quot;auto&quot;</span>
</span><span id="Config.get_verbosity-1734"><a href="#Config.get_verbosity-1734"><span class="linenos">1734</span></a><span class="sd">        can be used to explicitly use the global verbosity level.</span>
</span><span id="Config.get_verbosity-1735"><a href="#Config.get_verbosity-1735"><span class="linenos">1735</span></a>
</span><span id="Config.get_verbosity-1736"><a href="#Config.get_verbosity-1736"><span class="linenos">1736</span></a><span class="sd">        Example:</span>
</span><span id="Config.get_verbosity-1737"><a href="#Config.get_verbosity-1737"><span class="linenos">1737</span></a>
</span><span id="Config.get_verbosity-1738"><a href="#Config.get_verbosity-1738"><span class="linenos">1738</span></a><span class="sd">        .. code-block:: ini</span>
</span><span id="Config.get_verbosity-1739"><a href="#Config.get_verbosity-1739"><span class="linenos">1739</span></a>
</span><span id="Config.get_verbosity-1740"><a href="#Config.get_verbosity-1740"><span class="linenos">1740</span></a><span class="sd">            # content of pytest.ini</span>
</span><span id="Config.get_verbosity-1741"><a href="#Config.get_verbosity-1741"><span class="linenos">1741</span></a><span class="sd">            [pytest]</span>
</span><span id="Config.get_verbosity-1742"><a href="#Config.get_verbosity-1742"><span class="linenos">1742</span></a><span class="sd">            verbosity_assertions = 2</span>
</span><span id="Config.get_verbosity-1743"><a href="#Config.get_verbosity-1743"><span class="linenos">1743</span></a>
</span><span id="Config.get_verbosity-1744"><a href="#Config.get_verbosity-1744"><span class="linenos">1744</span></a><span class="sd">        .. code-block:: console</span>
</span><span id="Config.get_verbosity-1745"><a href="#Config.get_verbosity-1745"><span class="linenos">1745</span></a>
</span><span id="Config.get_verbosity-1746"><a href="#Config.get_verbosity-1746"><span class="linenos">1746</span></a><span class="sd">            pytest -v</span>
</span><span id="Config.get_verbosity-1747"><a href="#Config.get_verbosity-1747"><span class="linenos">1747</span></a>
</span><span id="Config.get_verbosity-1748"><a href="#Config.get_verbosity-1748"><span class="linenos">1748</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Config.get_verbosity-1749"><a href="#Config.get_verbosity-1749"><span class="linenos">1749</span></a>
</span><span id="Config.get_verbosity-1750"><a href="#Config.get_verbosity-1750"><span class="linenos">1750</span></a><span class="sd">            print(config.get_verbosity())  # 1</span>
</span><span id="Config.get_verbosity-1751"><a href="#Config.get_verbosity-1751"><span class="linenos">1751</span></a><span class="sd">            print(config.get_verbosity(Config.VERBOSITY_ASSERTIONS))  # 2</span>
</span><span id="Config.get_verbosity-1752"><a href="#Config.get_verbosity-1752"><span class="linenos">1752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.get_verbosity-1753"><a href="#Config.get_verbosity-1753"><span class="linenos">1753</span></a>        <span class="n">global_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Config.get_verbosity-1754"><a href="#Config.get_verbosity-1754"><span class="linenos">1754</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">global_level</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span id="Config.get_verbosity-1755"><a href="#Config.get_verbosity-1755"><span class="linenos">1755</span></a>        <span class="k">if</span> <span class="n">verbosity_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.get_verbosity-1756"><a href="#Config.get_verbosity-1756"><span class="linenos">1756</span></a>            <span class="k">return</span> <span class="n">global_level</span>
</span><span id="Config.get_verbosity-1757"><a href="#Config.get_verbosity-1757"><span class="linenos">1757</span></a>
</span><span id="Config.get_verbosity-1758"><a href="#Config.get_verbosity-1758"><span class="linenos">1758</span></a>        <span class="n">ini_name</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">_verbosity_ini_name</span><span class="p">(</span><span class="n">verbosity_type</span><span class="p">)</span>
</span><span id="Config.get_verbosity-1759"><a href="#Config.get_verbosity-1759"><span class="linenos">1759</span></a>        <span class="k">if</span> <span class="n">ini_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_inidict</span><span class="p">:</span>
</span><span id="Config.get_verbosity-1760"><a href="#Config.get_verbosity-1760"><span class="linenos">1760</span></a>            <span class="k">return</span> <span class="n">global_level</span>
</span><span id="Config.get_verbosity-1761"><a href="#Config.get_verbosity-1761"><span class="linenos">1761</span></a>
</span><span id="Config.get_verbosity-1762"><a href="#Config.get_verbosity-1762"><span class="linenos">1762</span></a>        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="n">ini_name</span><span class="p">)</span>
</span><span id="Config.get_verbosity-1763"><a href="#Config.get_verbosity-1763"><span class="linenos">1763</span></a>        <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Config</span><span class="o">.</span><span class="n">_VERBOSITY_INI_DEFAULT</span><span class="p">:</span>
</span><span id="Config.get_verbosity-1764"><a href="#Config.get_verbosity-1764"><span class="linenos">1764</span></a>            <span class="k">return</span> <span class="n">global_level</span>
</span><span id="Config.get_verbosity-1765"><a href="#Config.get_verbosity-1765"><span class="linenos">1765</span></a>
</span><span id="Config.get_verbosity-1766"><a href="#Config.get_verbosity-1766"><span class="linenos">1766</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the verbosity level for a fine-grained verbosity type.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>verbosity_type</strong>:  Verbosity type to get level for. If a level is
configured for the given type, that value will be returned. If the
given type is not a known verbosity type, the global verbosity
level will be returned. If the given type is None (default), the
global verbosity level will be returned.</li>
</ul>

<p>To configure a level for a fine-grained verbosity type, the
configuration file should have a setting for the configuration name
and a numeric value for the verbosity level. A special value of "auto"
can be used to explicitly use the global verbosity level.</p>

<p>Example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">verbosity_assertions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</code></pre>
</div>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="go">pytest -v</span>
</code></pre>
</div>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_verbosity</span><span class="p">())</span>  <span class="c1"># 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_verbosity</span><span class="p">(</span><span class="n"><a href="#Config.VERBOSITY_ASSERTIONS">Config.VERBOSITY_ASSERTIONS</a></span><span class="p">))</span>  <span class="c1"># 2</span>
</code></pre>
</div>
</div>


                            </div>
                </section>
                <section id="Config.InvocationParams">
                            <input id="Config.InvocationParams-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Config.InvocationParams</span>:

                <label class="view-source-button" for="Config.InvocationParams-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.InvocationParams"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.InvocationParams-978"><a href="#Config.InvocationParams-978"><span class="linenos"> 978</span></a>    <span class="nd">@final</span>
</span><span id="Config.InvocationParams-979"><a href="#Config.InvocationParams-979"><span class="linenos"> 979</span></a>    <span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Config.InvocationParams-980"><a href="#Config.InvocationParams-980"><span class="linenos"> 980</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">InvocationParams</span><span class="p">:</span>
</span><span id="Config.InvocationParams-981"><a href="#Config.InvocationParams-981"><span class="linenos"> 981</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Holds parameters passed during :func:`pytest.main`.</span>
</span><span id="Config.InvocationParams-982"><a href="#Config.InvocationParams-982"><span class="linenos"> 982</span></a>
</span><span id="Config.InvocationParams-983"><a href="#Config.InvocationParams-983"><span class="linenos"> 983</span></a><span class="sd">        The object attributes are read-only.</span>
</span><span id="Config.InvocationParams-984"><a href="#Config.InvocationParams-984"><span class="linenos"> 984</span></a>
</span><span id="Config.InvocationParams-985"><a href="#Config.InvocationParams-985"><span class="linenos"> 985</span></a><span class="sd">        .. versionadded:: 5.1</span>
</span><span id="Config.InvocationParams-986"><a href="#Config.InvocationParams-986"><span class="linenos"> 986</span></a>
</span><span id="Config.InvocationParams-987"><a href="#Config.InvocationParams-987"><span class="linenos"> 987</span></a><span class="sd">        .. note::</span>
</span><span id="Config.InvocationParams-988"><a href="#Config.InvocationParams-988"><span class="linenos"> 988</span></a>
</span><span id="Config.InvocationParams-989"><a href="#Config.InvocationParams-989"><span class="linenos"> 989</span></a><span class="sd">            Note that the environment variable ``PYTEST_ADDOPTS`` and the ``addopts``</span>
</span><span id="Config.InvocationParams-990"><a href="#Config.InvocationParams-990"><span class="linenos"> 990</span></a><span class="sd">            ini option are handled by pytest, not being included in the ``args`` attribute.</span>
</span><span id="Config.InvocationParams-991"><a href="#Config.InvocationParams-991"><span class="linenos"> 991</span></a>
</span><span id="Config.InvocationParams-992"><a href="#Config.InvocationParams-992"><span class="linenos"> 992</span></a><span class="sd">            Plugins accessing ``InvocationParams`` must be aware of that.</span>
</span><span id="Config.InvocationParams-993"><a href="#Config.InvocationParams-993"><span class="linenos"> 993</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.InvocationParams-994"><a href="#Config.InvocationParams-994"><span class="linenos"> 994</span></a>
</span><span id="Config.InvocationParams-995"><a href="#Config.InvocationParams-995"><span class="linenos"> 995</span></a>        <span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</span><span id="Config.InvocationParams-996"><a href="#Config.InvocationParams-996"><span class="linenos"> 996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The command-line arguments as passed to :func:`pytest.main`.&quot;&quot;&quot;</span>
</span><span id="Config.InvocationParams-997"><a href="#Config.InvocationParams-997"><span class="linenos"> 997</span></a>        <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="Config.InvocationParams-998"><a href="#Config.InvocationParams-998"><span class="linenos"> 998</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extra plugins, might be `None`.&quot;&quot;&quot;</span>
</span><span id="Config.InvocationParams-999"><a href="#Config.InvocationParams-999"><span class="linenos"> 999</span></a>        <span class="nb">dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>
</span><span id="Config.InvocationParams-1000"><a href="#Config.InvocationParams-1000"><span class="linenos">1000</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The directory from which :func:`pytest.main` was invoked. :type: pathlib.Path&quot;&quot;&quot;</span>
</span><span id="Config.InvocationParams-1001"><a href="#Config.InvocationParams-1001"><span class="linenos">1001</span></a>
</span><span id="Config.InvocationParams-1002"><a href="#Config.InvocationParams-1002"><span class="linenos">1002</span></a>        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Config.InvocationParams-1003"><a href="#Config.InvocationParams-1003"><span class="linenos">1003</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Config.InvocationParams-1004"><a href="#Config.InvocationParams-1004"><span class="linenos">1004</span></a>            <span class="o">*</span><span class="p">,</span>
</span><span id="Config.InvocationParams-1005"><a href="#Config.InvocationParams-1005"><span class="linenos">1005</span></a>            <span class="n">args</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Config.InvocationParams-1006"><a href="#Config.InvocationParams-1006"><span class="linenos">1006</span></a>            <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config.InvocationParams-1007"><a href="#Config.InvocationParams-1007"><span class="linenos">1007</span></a>            <span class="nb">dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="Config.InvocationParams-1008"><a href="#Config.InvocationParams-1008"><span class="linenos">1008</span></a>        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.InvocationParams-1009"><a href="#Config.InvocationParams-1009"><span class="linenos">1009</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
</span><span id="Config.InvocationParams-1010"><a href="#Config.InvocationParams-1010"><span class="linenos">1010</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;plugins&quot;</span><span class="p">,</span> <span class="n">plugins</span><span class="p">)</span>
</span><span id="Config.InvocationParams-1011"><a href="#Config.InvocationParams-1011"><span class="linenos">1011</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dir&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Holds parameters passed during <code><a href="#main">pytest.main()</a></code>.</p>

<p>The object attributes are read-only.</p>

<p><em>New in version 5.1.</em></p>

<div class="alert note">

<p>Note that the environment variable <code>PYTEST_ADDOPTS</code> and the <code>addopts</code>
ini option are handled by pytest, not being included in the <code><a href="#Config.InvocationParams.args">args</a></code> attribute.</p>

<p>Plugins accessing <code><a href="#Config.InvocationParams">InvocationParams</a></code> must be aware of that.</p>

</div>
</div>


                            <div id="Config.InvocationParams.__init__" class="classattr">
                                        <input id="Config.InvocationParams.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Config.InvocationParams</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">plugins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">object</span><span class="p">]]</span>,</span><span class="param">	<span class="nb">dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span></span>)</span>

                <label class="view-source-button" for="Config.InvocationParams.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.InvocationParams.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.InvocationParams.__init__-1002"><a href="#Config.InvocationParams.__init__-1002"><span class="linenos">1002</span></a>        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Config.InvocationParams.__init__-1003"><a href="#Config.InvocationParams.__init__-1003"><span class="linenos">1003</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Config.InvocationParams.__init__-1004"><a href="#Config.InvocationParams.__init__-1004"><span class="linenos">1004</span></a>            <span class="o">*</span><span class="p">,</span>
</span><span id="Config.InvocationParams.__init__-1005"><a href="#Config.InvocationParams.__init__-1005"><span class="linenos">1005</span></a>            <span class="n">args</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Config.InvocationParams.__init__-1006"><a href="#Config.InvocationParams.__init__-1006"><span class="linenos">1006</span></a>            <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Config.InvocationParams.__init__-1007"><a href="#Config.InvocationParams.__init__-1007"><span class="linenos">1007</span></a>            <span class="nb">dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="Config.InvocationParams.__init__-1008"><a href="#Config.InvocationParams.__init__-1008"><span class="linenos">1008</span></a>        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Config.InvocationParams.__init__-1009"><a href="#Config.InvocationParams.__init__-1009"><span class="linenos">1009</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
</span><span id="Config.InvocationParams.__init__-1010"><a href="#Config.InvocationParams.__init__-1010"><span class="linenos">1010</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;plugins&quot;</span><span class="p">,</span> <span class="n">plugins</span><span class="p">)</span>
</span><span id="Config.InvocationParams.__init__-1011"><a href="#Config.InvocationParams.__init__-1011"><span class="linenos">1011</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dir&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Config.InvocationParams.args" class="classattr">
                                <div class="attr variable">
            <span class="name">args</span><span class="annotation">: tuple[str, ...]</span>

        
    </div>
    <a class="headerlink" href="#Config.InvocationParams.args"></a>
    
            <div class="docstring"><p>The command-line arguments as passed to <code><a href="#main">pytest.main()</a></code>.</p>
</div>


                            </div>
                            <div id="Config.InvocationParams.plugins" class="classattr">
                                <div class="attr variable">
            <span class="name">plugins</span><span class="annotation">: Optional[Sequence[str | object]]</span>

        
    </div>
    <a class="headerlink" href="#Config.InvocationParams.plugins"></a>
    
            <div class="docstring"><p>Extra plugins, might be <code>None</code>.</p>
</div>


                            </div>
                            <div id="Config.InvocationParams.dir" class="classattr">
                                <div class="attr variable">
            <span class="name">dir</span><span class="annotation">: pathlib._local.Path</span>

        
    </div>
    <a class="headerlink" href="#Config.InvocationParams.dir"></a>
    
            <div class="docstring"><p>The directory from which <code><a href="#main">pytest.main()</a></code> was invoked. :type: pathlib.Path</p>
</div>


                            </div>
                </section>
                <section id="Config.ArgsSource">
                            <input id="Config.ArgsSource-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Config.ArgsSource</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="Config.ArgsSource-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Config.ArgsSource"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Config.ArgsSource-1013"><a href="#Config.ArgsSource-1013"><span class="linenos">1013</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">ArgsSource</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="Config.ArgsSource-1014"><a href="#Config.ArgsSource-1014"><span class="linenos">1014</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Indicates the source of the test arguments.</span>
</span><span id="Config.ArgsSource-1015"><a href="#Config.ArgsSource-1015"><span class="linenos">1015</span></a>
</span><span id="Config.ArgsSource-1016"><a href="#Config.ArgsSource-1016"><span class="linenos">1016</span></a><span class="sd">        .. versionadded:: 7.2</span>
</span><span id="Config.ArgsSource-1017"><a href="#Config.ArgsSource-1017"><span class="linenos">1017</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Config.ArgsSource-1018"><a href="#Config.ArgsSource-1018"><span class="linenos">1018</span></a>
</span><span id="Config.ArgsSource-1019"><a href="#Config.ArgsSource-1019"><span class="linenos">1019</span></a>        <span class="c1">#: Command line arguments.</span>
</span><span id="Config.ArgsSource-1020"><a href="#Config.ArgsSource-1020"><span class="linenos">1020</span></a>        <span class="n">ARGS</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</span><span id="Config.ArgsSource-1021"><a href="#Config.ArgsSource-1021"><span class="linenos">1021</span></a>        <span class="c1">#: Invocation directory.</span>
</span><span id="Config.ArgsSource-1022"><a href="#Config.ArgsSource-1022"><span class="linenos">1022</span></a>        <span class="n">INVOCATION_DIR</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</span><span id="Config.ArgsSource-1023"><a href="#Config.ArgsSource-1023"><span class="linenos">1023</span></a>        <span class="n">INCOVATION_DIR</span> <span class="o">=</span> <span class="n">INVOCATION_DIR</span>  <span class="c1"># backwards compatibility alias</span>
</span><span id="Config.ArgsSource-1024"><a href="#Config.ArgsSource-1024"><span class="linenos">1024</span></a>        <span class="c1">#: &#39;testpaths&#39; configuration value.</span>
</span><span id="Config.ArgsSource-1025"><a href="#Config.ArgsSource-1025"><span class="linenos">1025</span></a>        <span class="n">TESTPATHS</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Indicates the source of the test arguments.</p>

<p><em>New in version 7.2.</em></p>
</div>


                            <div id="Config.ArgsSource.ARGS" class="classattr">
                                <div class="attr variable">
            <span class="name">ARGS</span>        =
<span class="default_value">&lt;ArgsSource.ARGS: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#Config.ArgsSource.ARGS"></a>
    
    

                            </div>
                            <div id="Config.ArgsSource.INVOCATION_DIR" class="classattr">
                                <div class="attr variable">
            <span class="name">INVOCATION_DIR</span>        =
<span class="default_value">&lt;ArgsSource.INVOCATION_DIR: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#Config.ArgsSource.INVOCATION_DIR"></a>
    
    

                            </div>
                            <div id="Config.ArgsSource.INCOVATION_DIR" class="classattr">
                                <div class="attr variable">
            <span class="name">INCOVATION_DIR</span>        =
<span class="default_value">&lt;ArgsSource.INVOCATION_DIR: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#Config.ArgsSource.INCOVATION_DIR"></a>
    
    

                            </div>
                            <div id="Config.ArgsSource.TESTPATHS" class="classattr">
                                <div class="attr variable">
            <span class="name">TESTPATHS</span>        =
<span class="default_value">&lt;ArgsSource.TESTPATHS: 3&gt;</span>

        
    </div>
    <a class="headerlink" href="#Config.ArgsSource.TESTPATHS"></a>
    
    

                            </div>
                </section>
                <section id="console_main">
                            <input id="console_main-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">console_main</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="console_main-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#console_main"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="console_main-195"><a href="#console_main-195"><span class="linenos">195</span></a><span class="k">def</span><span class="w"> </span><span class="nf">console_main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="console_main-196"><a href="#console_main-196"><span class="linenos">196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The CLI entry point of pytest.</span>
</span><span id="console_main-197"><a href="#console_main-197"><span class="linenos">197</span></a>
</span><span id="console_main-198"><a href="#console_main-198"><span class="linenos">198</span></a><span class="sd">    This function is not meant for programmable use; use `main()` instead.</span>
</span><span id="console_main-199"><a href="#console_main-199"><span class="linenos">199</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="console_main-200"><a href="#console_main-200"><span class="linenos">200</span></a>    <span class="c1"># https://docs.python.org/3/library/signal.html#note-on-sigpipe</span>
</span><span id="console_main-201"><a href="#console_main-201"><span class="linenos">201</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="console_main-202"><a href="#console_main-202"><span class="linenos">202</span></a>        <span class="n">code</span> <span class="o">=</span> <span class="n">main</span><span class="p">()</span>
</span><span id="console_main-203"><a href="#console_main-203"><span class="linenos">203</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</span><span id="console_main-204"><a href="#console_main-204"><span class="linenos">204</span></a>        <span class="k">return</span> <span class="n">code</span>
</span><span id="console_main-205"><a href="#console_main-205"><span class="linenos">205</span></a>    <span class="k">except</span> <span class="ne">BrokenPipeError</span><span class="p">:</span>
</span><span id="console_main-206"><a href="#console_main-206"><span class="linenos">206</span></a>        <span class="c1"># Python flushes standard streams on exit; redirect remaining output</span>
</span><span id="console_main-207"><a href="#console_main-207"><span class="linenos">207</span></a>        <span class="c1"># to devnull to avoid another BrokenPipeError at shutdown</span>
</span><span id="console_main-208"><a href="#console_main-208"><span class="linenos">208</span></a>        <span class="n">devnull</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">devnull</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">O_WRONLY</span><span class="p">)</span>
</span><span id="console_main-209"><a href="#console_main-209"><span class="linenos">209</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">dup2</span><span class="p">(</span><span class="n">devnull</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
</span><span id="console_main-210"><a href="#console_main-210"><span class="linenos">210</span></a>        <span class="k">return</span> <span class="mi">1</span>  <span class="c1"># Python exits with error code 1 on EPIPE</span>
</span></pre></div>


            <div class="docstring"><p>The CLI entry point of pytest.</p>

<p>This function is not meant for programmable use; use <code><a href="#main">main()</a></code> instead.</p>
</div>


                </section>
                <section id="deprecated_call">
                            <input id="deprecated_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">deprecated_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">recwarn</span><span class="o">.</span><span class="n">WarningsRecorder</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="deprecated_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#deprecated_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="deprecated_call-55"><a href="#deprecated_call-55"><span class="linenos">55</span></a><span class="k">def</span><span class="w"> </span><span class="nf">deprecated_call</span><span class="p">(</span>
</span><span id="deprecated_call-56"><a href="#deprecated_call-56"><span class="linenos">56</span></a>    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="deprecated_call-57"><a href="#deprecated_call-57"><span class="linenos">57</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WarningsRecorder</span> <span class="o">|</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="deprecated_call-58"><a href="#deprecated_call-58"><span class="linenos">58</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert that code produces a ``DeprecationWarning`` or ``PendingDeprecationWarning`` or ``FutureWarning``.</span>
</span><span id="deprecated_call-59"><a href="#deprecated_call-59"><span class="linenos">59</span></a>
</span><span id="deprecated_call-60"><a href="#deprecated_call-60"><span class="linenos">60</span></a><span class="sd">    This function can be used as a context manager::</span>
</span><span id="deprecated_call-61"><a href="#deprecated_call-61"><span class="linenos">61</span></a>
</span><span id="deprecated_call-62"><a href="#deprecated_call-62"><span class="linenos">62</span></a><span class="sd">        &gt;&gt;&gt; import warnings</span>
</span><span id="deprecated_call-63"><a href="#deprecated_call-63"><span class="linenos">63</span></a><span class="sd">        &gt;&gt;&gt; def api_call_v2():</span>
</span><span id="deprecated_call-64"><a href="#deprecated_call-64"><span class="linenos">64</span></a><span class="sd">        ...     warnings.warn(&#39;use v3 of this api&#39;, DeprecationWarning)</span>
</span><span id="deprecated_call-65"><a href="#deprecated_call-65"><span class="linenos">65</span></a><span class="sd">        ...     return 200</span>
</span><span id="deprecated_call-66"><a href="#deprecated_call-66"><span class="linenos">66</span></a>
</span><span id="deprecated_call-67"><a href="#deprecated_call-67"><span class="linenos">67</span></a><span class="sd">        &gt;&gt;&gt; import pytest</span>
</span><span id="deprecated_call-68"><a href="#deprecated_call-68"><span class="linenos">68</span></a><span class="sd">        &gt;&gt;&gt; with pytest.deprecated_call():</span>
</span><span id="deprecated_call-69"><a href="#deprecated_call-69"><span class="linenos">69</span></a><span class="sd">        ...    assert api_call_v2() == 200</span>
</span><span id="deprecated_call-70"><a href="#deprecated_call-70"><span class="linenos">70</span></a>
</span><span id="deprecated_call-71"><a href="#deprecated_call-71"><span class="linenos">71</span></a><span class="sd">    It can also be used by passing a function and ``*args`` and ``**kwargs``,</span>
</span><span id="deprecated_call-72"><a href="#deprecated_call-72"><span class="linenos">72</span></a><span class="sd">    in which case it will ensure calling ``func(*args, **kwargs)`` produces one of</span>
</span><span id="deprecated_call-73"><a href="#deprecated_call-73"><span class="linenos">73</span></a><span class="sd">    the warnings types above. The return value is the return value of the function.</span>
</span><span id="deprecated_call-74"><a href="#deprecated_call-74"><span class="linenos">74</span></a>
</span><span id="deprecated_call-75"><a href="#deprecated_call-75"><span class="linenos">75</span></a><span class="sd">    In the context manager form you may use the keyword argument ``match`` to assert</span>
</span><span id="deprecated_call-76"><a href="#deprecated_call-76"><span class="linenos">76</span></a><span class="sd">    that the warning matches a text or regex.</span>
</span><span id="deprecated_call-77"><a href="#deprecated_call-77"><span class="linenos">77</span></a>
</span><span id="deprecated_call-78"><a href="#deprecated_call-78"><span class="linenos">78</span></a><span class="sd">    The context manager produces a list of :class:`warnings.WarningMessage` objects,</span>
</span><span id="deprecated_call-79"><a href="#deprecated_call-79"><span class="linenos">79</span></a><span class="sd">    one for each warning raised.</span>
</span><span id="deprecated_call-80"><a href="#deprecated_call-80"><span class="linenos">80</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="deprecated_call-81"><a href="#deprecated_call-81"><span class="linenos">81</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="deprecated_call-82"><a href="#deprecated_call-82"><span class="linenos">82</span></a>    <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="deprecated_call-83"><a href="#deprecated_call-83"><span class="linenos">83</span></a>        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="deprecated_call-84"><a href="#deprecated_call-84"><span class="linenos">84</span></a>    <span class="k">return</span> <span class="n">warns</span><span class="p">(</span>
</span><span id="deprecated_call-85"><a href="#deprecated_call-85"><span class="linenos">85</span></a>        <span class="p">(</span><span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="ne">PendingDeprecationWarning</span><span class="p">,</span> <span class="ne">FutureWarning</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="deprecated_call-86"><a href="#deprecated_call-86"><span class="linenos">86</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Assert that code produces a <code>DeprecationWarning</code> or <code>PendingDeprecationWarning</code> or <code>FutureWarning</code>.</p>

<p>This function can be used as a context manager::</p>

<pre><code>&gt;&gt;&gt; import warnings
&gt;&gt;&gt; def api_call_v2():
...     warnings.warn('use v3 of this api', DeprecationWarning)
...     return 200

&gt;&gt;&gt; import pytest
&gt;&gt;&gt; with <a href="#deprecated_call">pytest.deprecated_call()</a>:
...    assert api_call_v2() == 200
</code></pre>

<p>It can also be used by passing a function and <code>*args</code> and <code>**kwargs</code>,
in which case it will ensure calling <code>func(*args, **kwargs)</code> produces one of
the warnings types above. The return value is the return value of the function.</p>

<p>In the context manager form you may use the keyword argument <code>match</code> to assert
that the warning matches a text or regex.</p>

<p>The context manager produces a list of <code>warnings.WarningMessage</code> objects,
one for each warning raised.</p>
</div>


                </section>
                <section id="Dir">
                            <input id="Dir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Dir</span><wbr>(<span class="base"><a href="#Directory">pytest.Directory</a></span>):

                <label class="view-source-button" for="Dir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dir-491"><a href="#Dir-491"><span class="linenos">491</span></a><span class="nd">@final</span>
</span><span id="Dir-492"><a href="#Dir-492"><span class="linenos">492</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Dir</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Directory</span><span class="p">):</span>
</span><span id="Dir-493"><a href="#Dir-493"><span class="linenos">493</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Collector of files in a file system directory.</span>
</span><span id="Dir-494"><a href="#Dir-494"><span class="linenos">494</span></a>
</span><span id="Dir-495"><a href="#Dir-495"><span class="linenos">495</span></a><span class="sd">    .. versionadded:: 8.0</span>
</span><span id="Dir-496"><a href="#Dir-496"><span class="linenos">496</span></a>
</span><span id="Dir-497"><a href="#Dir-497"><span class="linenos">497</span></a><span class="sd">    .. note::</span>
</span><span id="Dir-498"><a href="#Dir-498"><span class="linenos">498</span></a>
</span><span id="Dir-499"><a href="#Dir-499"><span class="linenos">499</span></a><span class="sd">        Python directories with an `__init__.py` file are instead collected by</span>
</span><span id="Dir-500"><a href="#Dir-500"><span class="linenos">500</span></a><span class="sd">        :class:`~pytest.Package` by default. Both are :class:`~pytest.Directory`</span>
</span><span id="Dir-501"><a href="#Dir-501"><span class="linenos">501</span></a><span class="sd">        collectors.</span>
</span><span id="Dir-502"><a href="#Dir-502"><span class="linenos">502</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Dir-503"><a href="#Dir-503"><span class="linenos">503</span></a>
</span><span id="Dir-504"><a href="#Dir-504"><span class="linenos">504</span></a>    <span class="nd">@classmethod</span>
</span><span id="Dir-505"><a href="#Dir-505"><span class="linenos">505</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Dir-506"><a href="#Dir-506"><span class="linenos">506</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="Dir-507"><a href="#Dir-507"><span class="linenos">507</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span>
</span><span id="Dir-508"><a href="#Dir-508"><span class="linenos">508</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Dir-509"><a href="#Dir-509"><span class="linenos">509</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="Dir-510"><a href="#Dir-510"><span class="linenos">510</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Dir-511"><a href="#Dir-511"><span class="linenos">511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public constructor.</span>
</span><span id="Dir-512"><a href="#Dir-512"><span class="linenos">512</span></a>
</span><span id="Dir-513"><a href="#Dir-513"><span class="linenos">513</span></a><span class="sd">        :param parent: The parent collector of this Dir.</span>
</span><span id="Dir-514"><a href="#Dir-514"><span class="linenos">514</span></a><span class="sd">        :param path: The directory&#39;s path.</span>
</span><span id="Dir-515"><a href="#Dir-515"><span class="linenos">515</span></a><span class="sd">        :type path: pathlib.Path</span>
</span><span id="Dir-516"><a href="#Dir-516"><span class="linenos">516</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dir-517"><a href="#Dir-517"><span class="linenos">517</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
</span><span id="Dir-518"><a href="#Dir-518"><span class="linenos">518</span></a>
</span><span id="Dir-519"><a href="#Dir-519"><span class="linenos">519</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Dir-520"><a href="#Dir-520"><span class="linenos">520</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
</span><span id="Dir-521"><a href="#Dir-521"><span class="linenos">521</span></a>        <span class="n">col</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="Dir-522"><a href="#Dir-522"><span class="linenos">522</span></a>        <span class="n">cols</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>
</span><span id="Dir-523"><a href="#Dir-523"><span class="linenos">523</span></a>        <span class="n">ihook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span>
</span><span id="Dir-524"><a href="#Dir-524"><span class="linenos">524</span></a>        <span class="k">for</span> <span class="n">direntry</span> <span class="ow">in</span> <span class="n">scandir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
</span><span id="Dir-525"><a href="#Dir-525"><span class="linenos">525</span></a>            <span class="k">if</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Dir-526"><a href="#Dir-526"><span class="linenos">526</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Dir-527"><a href="#Dir-527"><span class="linenos">527</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">with_parents</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Dir-528"><a href="#Dir-528"><span class="linenos">528</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Dir-529"><a href="#Dir-529"><span class="linenos">529</span></a>                        <span class="k">continue</span>
</span><span id="Dir-530"><a href="#Dir-530"><span class="linenos">530</span></a>                <span class="n">col</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_directory</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Dir-531"><a href="#Dir-531"><span class="linenos">531</span></a>                <span class="k">if</span> <span class="n">col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Dir-532"><a href="#Dir-532"><span class="linenos">532</span></a>                    <span class="k">yield</span> <span class="n">col</span>
</span><span id="Dir-533"><a href="#Dir-533"><span class="linenos">533</span></a>
</span><span id="Dir-534"><a href="#Dir-534"><span class="linenos">534</span></a>            <span class="k">elif</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Dir-535"><a href="#Dir-535"><span class="linenos">535</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Dir-536"><a href="#Dir-536"><span class="linenos">536</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="Dir-537"><a href="#Dir-537"><span class="linenos">537</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Dir-538"><a href="#Dir-538"><span class="linenos">538</span></a>                        <span class="k">continue</span>
</span><span id="Dir-539"><a href="#Dir-539"><span class="linenos">539</span></a>                <span class="n">cols</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Dir-540"><a href="#Dir-540"><span class="linenos">540</span></a>                <span class="k">yield from</span> <span class="n">cols</span>
</span></pre></div>


            <div class="docstring"><p>Collector of files in a file system directory.</p>

<p><em>New in version 8.0.</em></p>

<div class="alert note">

<p>Python directories with an <code>__init__.py</code> file are instead collected by
<code>~<a href="#Package">pytest.Package</a></code> by default. Both are <code>~<a href="#Directory">pytest.Directory</a></code>
collectors.</p>

</div>
</div>


                            <div id="Dir.from_parent" class="classattr">
                                        <input id="Dir.from_parent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_parent</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">parent</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span></span><span class="return-annotation">) -> <span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Dir.from_parent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dir.from_parent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dir.from_parent-504"><a href="#Dir.from_parent-504"><span class="linenos">504</span></a>    <span class="nd">@classmethod</span>
</span><span id="Dir.from_parent-505"><a href="#Dir.from_parent-505"><span class="linenos">505</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Dir.from_parent-506"><a href="#Dir.from_parent-506"><span class="linenos">506</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="Dir.from_parent-507"><a href="#Dir.from_parent-507"><span class="linenos">507</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span>
</span><span id="Dir.from_parent-508"><a href="#Dir.from_parent-508"><span class="linenos">508</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Dir.from_parent-509"><a href="#Dir.from_parent-509"><span class="linenos">509</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="Dir.from_parent-510"><a href="#Dir.from_parent-510"><span class="linenos">510</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Dir.from_parent-511"><a href="#Dir.from_parent-511"><span class="linenos">511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public constructor.</span>
</span><span id="Dir.from_parent-512"><a href="#Dir.from_parent-512"><span class="linenos">512</span></a>
</span><span id="Dir.from_parent-513"><a href="#Dir.from_parent-513"><span class="linenos">513</span></a><span class="sd">        :param parent: The parent collector of this Dir.</span>
</span><span id="Dir.from_parent-514"><a href="#Dir.from_parent-514"><span class="linenos">514</span></a><span class="sd">        :param path: The directory&#39;s path.</span>
</span><span id="Dir.from_parent-515"><a href="#Dir.from_parent-515"><span class="linenos">515</span></a><span class="sd">        :type path: pathlib.Path</span>
</span><span id="Dir.from_parent-516"><a href="#Dir.from_parent-516"><span class="linenos">516</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dir.from_parent-517"><a href="#Dir.from_parent-517"><span class="linenos">517</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The public constructor.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>parent</strong>:  The parent collector of this Dir.</li>
<li><strong>path</strong>:  The directory's path.</li>
</ul>
</div>


                            </div>
                            <div id="Dir.collect" class="classattr">
                                        <input id="Dir.collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Dir.collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dir.collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dir.collect-519"><a href="#Dir.collect-519"><span class="linenos">519</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Dir.collect-520"><a href="#Dir.collect-520"><span class="linenos">520</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
</span><span id="Dir.collect-521"><a href="#Dir.collect-521"><span class="linenos">521</span></a>        <span class="n">col</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="Dir.collect-522"><a href="#Dir.collect-522"><span class="linenos">522</span></a>        <span class="n">cols</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>
</span><span id="Dir.collect-523"><a href="#Dir.collect-523"><span class="linenos">523</span></a>        <span class="n">ihook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span>
</span><span id="Dir.collect-524"><a href="#Dir.collect-524"><span class="linenos">524</span></a>        <span class="k">for</span> <span class="n">direntry</span> <span class="ow">in</span> <span class="n">scandir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
</span><span id="Dir.collect-525"><a href="#Dir.collect-525"><span class="linenos">525</span></a>            <span class="k">if</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Dir.collect-526"><a href="#Dir.collect-526"><span class="linenos">526</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Dir.collect-527"><a href="#Dir.collect-527"><span class="linenos">527</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">with_parents</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Dir.collect-528"><a href="#Dir.collect-528"><span class="linenos">528</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Dir.collect-529"><a href="#Dir.collect-529"><span class="linenos">529</span></a>                        <span class="k">continue</span>
</span><span id="Dir.collect-530"><a href="#Dir.collect-530"><span class="linenos">530</span></a>                <span class="n">col</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_directory</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Dir.collect-531"><a href="#Dir.collect-531"><span class="linenos">531</span></a>                <span class="k">if</span> <span class="n">col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Dir.collect-532"><a href="#Dir.collect-532"><span class="linenos">532</span></a>                    <span class="k">yield</span> <span class="n">col</span>
</span><span id="Dir.collect-533"><a href="#Dir.collect-533"><span class="linenos">533</span></a>
</span><span id="Dir.collect-534"><a href="#Dir.collect-534"><span class="linenos">534</span></a>            <span class="k">elif</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Dir.collect-535"><a href="#Dir.collect-535"><span class="linenos">535</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Dir.collect-536"><a href="#Dir.collect-536"><span class="linenos">536</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="Dir.collect-537"><a href="#Dir.collect-537"><span class="linenos">537</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Dir.collect-538"><a href="#Dir.collect-538"><span class="linenos">538</span></a>                        <span class="k">continue</span>
</span><span id="Dir.collect-539"><a href="#Dir.collect-539"><span class="linenos">539</span></a>                <span class="n">cols</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Dir.collect-540"><a href="#Dir.collect-540"><span class="linenos">540</span></a>                <span class="k">yield from</span> <span class="n">cols</span>
</span></pre></div>


            <div class="docstring"><p>Collect children (items and collectors) for this collector.</p>
</div>


                            </div>
                </section>
                <section id="Directory">
                            <input id="Directory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Directory</span><wbr>(<span class="base">_pytest.nodes.FSCollector</span>, <span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Directory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Directory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Directory-632"><a href="#Directory-632"><span class="linenos">632</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Directory</span><span class="p">(</span><span class="n">FSCollector</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Directory-633"><a href="#Directory-633"><span class="linenos">633</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for collecting files from a directory.</span>
</span><span id="Directory-634"><a href="#Directory-634"><span class="linenos">634</span></a>
</span><span id="Directory-635"><a href="#Directory-635"><span class="linenos">635</span></a><span class="sd">    A basic directory collector does the following: goes over the files and</span>
</span><span id="Directory-636"><a href="#Directory-636"><span class="linenos">636</span></a><span class="sd">    sub-directories in the directory and creates collectors for them by calling</span>
</span><span id="Directory-637"><a href="#Directory-637"><span class="linenos">637</span></a><span class="sd">    the hooks :hook:`pytest_collect_directory` and :hook:`pytest_collect_file`,</span>
</span><span id="Directory-638"><a href="#Directory-638"><span class="linenos">638</span></a><span class="sd">    after checking that they are not ignored using</span>
</span><span id="Directory-639"><a href="#Directory-639"><span class="linenos">639</span></a><span class="sd">    :hook:`pytest_ignore_collect`.</span>
</span><span id="Directory-640"><a href="#Directory-640"><span class="linenos">640</span></a>
</span><span id="Directory-641"><a href="#Directory-641"><span class="linenos">641</span></a><span class="sd">    The default directory collectors are :class:`~pytest.Dir` and</span>
</span><span id="Directory-642"><a href="#Directory-642"><span class="linenos">642</span></a><span class="sd">    :class:`~pytest.Package`.</span>
</span><span id="Directory-643"><a href="#Directory-643"><span class="linenos">643</span></a>
</span><span id="Directory-644"><a href="#Directory-644"><span class="linenos">644</span></a><span class="sd">    .. versionadded:: 8.0</span>
</span><span id="Directory-645"><a href="#Directory-645"><span class="linenos">645</span></a>
</span><span id="Directory-646"><a href="#Directory-646"><span class="linenos">646</span></a><span class="sd">    :ref:`custom directory collectors`.</span>
</span><span id="Directory-647"><a href="#Directory-647"><span class="linenos">647</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Base class for collecting files from a directory.</p>

<p>A basic directory collector does the following: goes over the files and
sub-directories in the directory and creates collectors for them by calling
the hooks :hook:<code>pytest_collect_directory</code> and :hook:<code>pytest_collect_file</code>,
after checking that they are not ignored using
:hook:<code>pytest_ignore_collect</code>.</p>

<p>The default directory collectors are <code>~<a href="#Dir">pytest.Dir</a></code> and
<code>~<a href="#Package">pytest.Package</a></code>.</p>

<p><em>New in version 8.0.</em></p>

<p>:ref:<code>custom directory collectors</code>.</p>
</div>


                </section>
                <section id="DoctestItem">
                            <input id="DoctestItem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DoctestItem</span><wbr>(<span class="base"><a href="#Item">pytest.Item</a></span>):

                <label class="view-source-button" for="DoctestItem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem-252"><a href="#DoctestItem-252"><span class="linenos">252</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DoctestItem</span><span class="p">(</span><span class="n">Item</span><span class="p">):</span>
</span><span id="DoctestItem-253"><a href="#DoctestItem-253"><span class="linenos">253</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="DoctestItem-254"><a href="#DoctestItem-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="DoctestItem-255"><a href="#DoctestItem-255"><span class="linenos">255</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="DoctestItem-256"><a href="#DoctestItem-256"><span class="linenos">256</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">DoctestTextfile</span> <span class="o">|</span> <span class="n">DoctestModule</span><span class="p">,</span>
</span><span id="DoctestItem-257"><a href="#DoctestItem-257"><span class="linenos">257</span></a>        <span class="n">runner</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span><span class="p">,</span>
</span><span id="DoctestItem-258"><a href="#DoctestItem-258"><span class="linenos">258</span></a>        <span class="n">dtest</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTest</span><span class="p">,</span>
</span><span id="DoctestItem-259"><a href="#DoctestItem-259"><span class="linenos">259</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-260"><a href="#DoctestItem-260"><span class="linenos">260</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
</span><span id="DoctestItem-261"><a href="#DoctestItem-261"><span class="linenos">261</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">runner</span> <span class="o">=</span> <span class="n">runner</span>
</span><span id="DoctestItem-262"><a href="#DoctestItem-262"><span class="linenos">262</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dtest</span> <span class="o">=</span> <span class="n">dtest</span>
</span><span id="DoctestItem-263"><a href="#DoctestItem-263"><span class="linenos">263</span></a>
</span><span id="DoctestItem-264"><a href="#DoctestItem-264"><span class="linenos">264</span></a>        <span class="c1"># Stuff needed for fixture support.</span>
</span><span id="DoctestItem-265"><a href="#DoctestItem-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DoctestItem-266"><a href="#DoctestItem-266"><span class="linenos">266</span></a>        <span class="n">fm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="DoctestItem-267"><a href="#DoctestItem-267"><span class="linenos">267</span></a>        <span class="n">fixtureinfo</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">getfixtureinfo</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="DoctestItem-268"><a href="#DoctestItem-268"><span class="linenos">268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fixtureinfo</span> <span class="o">=</span> <span class="n">fixtureinfo</span>
</span><span id="DoctestItem-269"><a href="#DoctestItem-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">names_closure</span>
</span><span id="DoctestItem-270"><a href="#DoctestItem-270"><span class="linenos">270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initrequest</span><span class="p">()</span>
</span><span id="DoctestItem-271"><a href="#DoctestItem-271"><span class="linenos">271</span></a>
</span><span id="DoctestItem-272"><a href="#DoctestItem-272"><span class="linenos">272</span></a>    <span class="nd">@classmethod</span>
</span><span id="DoctestItem-273"><a href="#DoctestItem-273"><span class="linenos">273</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="DoctestItem-274"><a href="#DoctestItem-274"><span class="linenos">274</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="DoctestItem-275"><a href="#DoctestItem-275"><span class="linenos">275</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">DoctestTextfile</span> <span class="o">|</span> <span class="n">DoctestModule</span><span class="p">,</span>
</span><span id="DoctestItem-276"><a href="#DoctestItem-276"><span class="linenos">276</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="DoctestItem-277"><a href="#DoctestItem-277"><span class="linenos">277</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="DoctestItem-278"><a href="#DoctestItem-278"><span class="linenos">278</span></a>        <span class="n">runner</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span><span class="p">,</span>
</span><span id="DoctestItem-279"><a href="#DoctestItem-279"><span class="linenos">279</span></a>        <span class="n">dtest</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTest</span><span class="p">,</span>
</span><span id="DoctestItem-280"><a href="#DoctestItem-280"><span class="linenos">280</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="DoctestItem-281"><a href="#DoctestItem-281"><span class="linenos">281</span></a>        <span class="c1"># incompatible signature due to imposed limits on subclass</span>
</span><span id="DoctestItem-282"><a href="#DoctestItem-282"><span class="linenos">282</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public named constructor.&quot;&quot;&quot;</span>
</span><span id="DoctestItem-283"><a href="#DoctestItem-283"><span class="linenos">283</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">runner</span><span class="o">=</span><span class="n">runner</span><span class="p">,</span> <span class="n">dtest</span><span class="o">=</span><span class="n">dtest</span><span class="p">)</span>
</span><span id="DoctestItem-284"><a href="#DoctestItem-284"><span class="linenos">284</span></a>
</span><span id="DoctestItem-285"><a href="#DoctestItem-285"><span class="linenos">285</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_initrequest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-286"><a href="#DoctestItem-286"><span class="linenos">286</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">funcargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="DoctestItem-287"><a href="#DoctestItem-287"><span class="linenos">287</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="n">TopRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="DoctestItem-288"><a href="#DoctestItem-288"><span class="linenos">288</span></a>
</span><span id="DoctestItem-289"><a href="#DoctestItem-289"><span class="linenos">289</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-290"><a href="#DoctestItem-290"><span class="linenos">290</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">_fillfixtures</span><span class="p">()</span>
</span><span id="DoctestItem-291"><a href="#DoctestItem-291"><span class="linenos">291</span></a>        <span class="n">globs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">getfixture</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">getfixturevalue</span><span class="p">)</span>
</span><span id="DoctestItem-292"><a href="#DoctestItem-292"><span class="linenos">292</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">getfixturevalue</span><span class="p">(</span><span class="s2">&quot;doctest_namespace&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="DoctestItem-293"><a href="#DoctestItem-293"><span class="linenos">293</span></a>            <span class="n">globs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="DoctestItem-294"><a href="#DoctestItem-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="o">.</span><span class="n">globs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">globs</span><span class="p">)</span>
</span><span id="DoctestItem-295"><a href="#DoctestItem-295"><span class="linenos">295</span></a>
</span><span id="DoctestItem-296"><a href="#DoctestItem-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-297"><a href="#DoctestItem-297"><span class="linenos">297</span></a>        <span class="n">_check_all_skipped</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="p">)</span>
</span><span id="DoctestItem-298"><a href="#DoctestItem-298"><span class="linenos">298</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_disable_output_capturing_for_darwin</span><span class="p">()</span>
</span><span id="DoctestItem-299"><a href="#DoctestItem-299"><span class="linenos">299</span></a>        <span class="n">failures</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DoctestItem-300"><a href="#DoctestItem-300"><span class="linenos">300</span></a>        <span class="c1"># Type ignored because we change the type of `out` from what</span>
</span><span id="DoctestItem-301"><a href="#DoctestItem-301"><span class="linenos">301</span></a>        <span class="c1"># doctest expects.</span>
</span><span id="DoctestItem-302"><a href="#DoctestItem-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">failures</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="DoctestItem-303"><a href="#DoctestItem-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
</span><span id="DoctestItem-304"><a href="#DoctestItem-304"><span class="linenos">304</span></a>            <span class="k">raise</span> <span class="n">MultipleDoctestFailures</span><span class="p">(</span><span class="n">failures</span><span class="p">)</span>
</span><span id="DoctestItem-305"><a href="#DoctestItem-305"><span class="linenos">305</span></a>
</span><span id="DoctestItem-306"><a href="#DoctestItem-306"><span class="linenos">306</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_disable_output_capturing_for_darwin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-307"><a href="#DoctestItem-307"><span class="linenos">307</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disable output capturing. Otherwise, stdout is lost to doctest (#985).&quot;&quot;&quot;</span>
</span><span id="DoctestItem-308"><a href="#DoctestItem-308"><span class="linenos">308</span></a>        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Darwin&quot;</span><span class="p">:</span>
</span><span id="DoctestItem-309"><a href="#DoctestItem-309"><span class="linenos">309</span></a>            <span class="k">return</span>
</span><span id="DoctestItem-310"><a href="#DoctestItem-310"><span class="linenos">310</span></a>        <span class="n">capman</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">getplugin</span><span class="p">(</span><span class="s2">&quot;capturemanager&quot;</span><span class="p">)</span>
</span><span id="DoctestItem-311"><a href="#DoctestItem-311"><span class="linenos">311</span></a>        <span class="k">if</span> <span class="n">capman</span><span class="p">:</span>
</span><span id="DoctestItem-312"><a href="#DoctestItem-312"><span class="linenos">312</span></a>            <span class="n">capman</span><span class="o">.</span><span class="n">suspend_global_capture</span><span class="p">(</span><span class="n">in_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="DoctestItem-313"><a href="#DoctestItem-313"><span class="linenos">313</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capman</span><span class="o">.</span><span class="n">read_global_capture</span><span class="p">()</span>
</span><span id="DoctestItem-314"><a href="#DoctestItem-314"><span class="linenos">314</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</span><span id="DoctestItem-315"><a href="#DoctestItem-315"><span class="linenos">315</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="DoctestItem-316"><a href="#DoctestItem-316"><span class="linenos">316</span></a>
</span><span id="DoctestItem-317"><a href="#DoctestItem-317"><span class="linenos">317</span></a>    <span class="c1"># TODO: Type ignored -- breaks Liskov Substitution.</span>
</span><span id="DoctestItem-318"><a href="#DoctestItem-318"><span class="linenos">318</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repr_failure</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="DoctestItem-319"><a href="#DoctestItem-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="DoctestItem-320"><a href="#DoctestItem-320"><span class="linenos">320</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="DoctestItem-321"><a href="#DoctestItem-321"><span class="linenos">321</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">:</span>
</span><span id="DoctestItem-322"><a href="#DoctestItem-322"><span class="linenos">322</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">doctest</span>
</span><span id="DoctestItem-323"><a href="#DoctestItem-323"><span class="linenos">323</span></a>
</span><span id="DoctestItem-324"><a href="#DoctestItem-324"><span class="linenos">324</span></a>        <span class="n">failures</span><span class="p">:</span> <span class="p">(</span>
</span><span id="DoctestItem-325"><a href="#DoctestItem-325"><span class="linenos">325</span></a>            <span class="n">Sequence</span><span class="p">[</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span> <span class="o">|</span> <span class="n">doctest</span><span class="o">.</span><span class="n">UnexpectedException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="DoctestItem-326"><a href="#DoctestItem-326"><span class="linenos">326</span></a>        <span class="p">)</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DoctestItem-327"><a href="#DoctestItem-327"><span class="linenos">327</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="DoctestItem-328"><a href="#DoctestItem-328"><span class="linenos">328</span></a>            <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span><span class="p">,</span> <span class="n">doctest</span><span class="o">.</span><span class="n">UnexpectedException</span><span class="p">)</span>
</span><span id="DoctestItem-329"><a href="#DoctestItem-329"><span class="linenos">329</span></a>        <span class="p">):</span>
</span><span id="DoctestItem-330"><a href="#DoctestItem-330"><span class="linenos">330</span></a>            <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</span><span id="DoctestItem-331"><a href="#DoctestItem-331"><span class="linenos">331</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">MultipleDoctestFailures</span><span class="p">):</span>
</span><span id="DoctestItem-332"><a href="#DoctestItem-332"><span class="linenos">332</span></a>            <span class="n">failures</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">failures</span>
</span><span id="DoctestItem-333"><a href="#DoctestItem-333"><span class="linenos">333</span></a>
</span><span id="DoctestItem-334"><a href="#DoctestItem-334"><span class="linenos">334</span></a>        <span class="k">if</span> <span class="n">failures</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-335"><a href="#DoctestItem-335"><span class="linenos">335</span></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">repr_failure</span><span class="p">(</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="DoctestItem-336"><a href="#DoctestItem-336"><span class="linenos">336</span></a>
</span><span id="DoctestItem-337"><a href="#DoctestItem-337"><span class="linenos">337</span></a>        <span class="n">reprlocation_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DoctestItem-338"><a href="#DoctestItem-338"><span class="linenos">338</span></a>        <span class="k">for</span> <span class="n">failure</span> <span class="ow">in</span> <span class="n">failures</span><span class="p">:</span>
</span><span id="DoctestItem-339"><a href="#DoctestItem-339"><span class="linenos">339</span></a>            <span class="n">example</span> <span class="o">=</span> <span class="n">failure</span><span class="o">.</span><span class="n">example</span>
</span><span id="DoctestItem-340"><a href="#DoctestItem-340"><span class="linenos">340</span></a>            <span class="n">test</span> <span class="o">=</span> <span class="n">failure</span><span class="o">.</span><span class="n">test</span>
</span><span id="DoctestItem-341"><a href="#DoctestItem-341"><span class="linenos">341</span></a>            <span class="n">filename</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">filename</span>
</span><span id="DoctestItem-342"><a href="#DoctestItem-342"><span class="linenos">342</span></a>            <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-343"><a href="#DoctestItem-343"><span class="linenos">343</span></a>                <span class="n">lineno</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DoctestItem-344"><a href="#DoctestItem-344"><span class="linenos">344</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DoctestItem-345"><a href="#DoctestItem-345"><span class="linenos">345</span></a>                <span class="n">lineno</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="DoctestItem-346"><a href="#DoctestItem-346"><span class="linenos">346</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">failure</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="DoctestItem-347"><a href="#DoctestItem-347"><span class="linenos">347</span></a>            <span class="c1"># TODO: ReprFileLocation doesn&#39;t expect a None lineno.</span>
</span><span id="DoctestItem-348"><a href="#DoctestItem-348"><span class="linenos">348</span></a>            <span class="n">reprlocation</span> <span class="o">=</span> <span class="n">ReprFileLocation</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="DoctestItem-349"><a href="#DoctestItem-349"><span class="linenos">349</span></a>            <span class="n">checker</span> <span class="o">=</span> <span class="n">_get_checker</span><span class="p">()</span>
</span><span id="DoctestItem-350"><a href="#DoctestItem-350"><span class="linenos">350</span></a>            <span class="n">report_choice</span> <span class="o">=</span> <span class="n">_get_report_choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;doctestreport&quot;</span><span class="p">))</span>
</span><span id="DoctestItem-351"><a href="#DoctestItem-351"><span class="linenos">351</span></a>            <span class="k">if</span> <span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem-352"><a href="#DoctestItem-352"><span class="linenos">352</span></a>                <span class="k">assert</span> <span class="n">failure</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">docstring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="DoctestItem-353"><a href="#DoctestItem-353"><span class="linenos">353</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">failure</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">docstring</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="DoctestItem-354"><a href="#DoctestItem-354"><span class="linenos">354</span></a>                <span class="c1"># add line numbers to the left of the error message</span>
</span><span id="DoctestItem-355"><a href="#DoctestItem-355"><span class="linenos">355</span></a>                <span class="k">assert</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="DoctestItem-356"><a href="#DoctestItem-356"><span class="linenos">356</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="DoctestItem-357"><a href="#DoctestItem-357"><span class="linenos">357</span></a>                    <span class="s2">&quot;</span><span class="si">%03d</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="DoctestItem-358"><a href="#DoctestItem-358"><span class="linenos">358</span></a>                <span class="p">]</span>
</span><span id="DoctestItem-359"><a href="#DoctestItem-359"><span class="linenos">359</span></a>                <span class="c1"># trim docstring error lines to 10</span>
</span><span id="DoctestItem-360"><a href="#DoctestItem-360"><span class="linenos">360</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">-</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span> <span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="DoctestItem-361"><a href="#DoctestItem-361"><span class="linenos">361</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DoctestItem-362"><a href="#DoctestItem-362"><span class="linenos">362</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="DoctestItem-363"><a href="#DoctestItem-363"><span class="linenos">363</span></a>                    <span class="s2">&quot;EXAMPLE LOCATION UNKNOWN, not showing all tests of that example&quot;</span>
</span><span id="DoctestItem-364"><a href="#DoctestItem-364"><span class="linenos">364</span></a>                <span class="p">]</span>
</span><span id="DoctestItem-365"><a href="#DoctestItem-365"><span class="linenos">365</span></a>                <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&gt;&gt;&gt;&quot;</span>
</span><span id="DoctestItem-366"><a href="#DoctestItem-366"><span class="linenos">366</span></a>                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">example</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
</span><span id="DoctestItem-367"><a href="#DoctestItem-367"><span class="linenos">367</span></a>                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;??? </span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DoctestItem-368"><a href="#DoctestItem-368"><span class="linenos">368</span></a>                    <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>
</span><span id="DoctestItem-369"><a href="#DoctestItem-369"><span class="linenos">369</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">failure</span><span class="p">,</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span><span class="p">):</span>
</span><span id="DoctestItem-370"><a href="#DoctestItem-370"><span class="linenos">370</span></a>                <span class="n">lines</span> <span class="o">+=</span> <span class="n">checker</span><span class="o">.</span><span class="n">output_difference</span><span class="p">(</span>
</span><span id="DoctestItem-371"><a href="#DoctestItem-371"><span class="linenos">371</span></a>                    <span class="n">example</span><span class="p">,</span> <span class="n">failure</span><span class="o">.</span><span class="n">got</span><span class="p">,</span> <span class="n">report_choice</span>
</span><span id="DoctestItem-372"><a href="#DoctestItem-372"><span class="linenos">372</span></a>                <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DoctestItem-373"><a href="#DoctestItem-373"><span class="linenos">373</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DoctestItem-374"><a href="#DoctestItem-374"><span class="linenos">374</span></a>                <span class="n">inner_excinfo</span> <span class="o">=</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exc_info</span><span class="p">(</span><span class="n">failure</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span>
</span><span id="DoctestItem-375"><a href="#DoctestItem-375"><span class="linenos">375</span></a>                <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;UNEXPECTED EXCEPTION: </span><span class="si">{</span><span class="n">inner_excinfo</span><span class="o">.</span><span class="n">value</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">]</span>
</span><span id="DoctestItem-376"><a href="#DoctestItem-376"><span class="linenos">376</span></a>                <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span>
</span><span id="DoctestItem-377"><a href="#DoctestItem-377"><span class="linenos">377</span></a>                    <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception</span><span class="p">(</span><span class="o">*</span><span class="n">failure</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span>
</span><span id="DoctestItem-378"><a href="#DoctestItem-378"><span class="linenos">378</span></a>                <span class="p">]</span>
</span><span id="DoctestItem-379"><a href="#DoctestItem-379"><span class="linenos">379</span></a>            <span class="n">reprlocation_lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">reprlocation</span><span class="p">,</span> <span class="n">lines</span><span class="p">))</span>
</span><span id="DoctestItem-380"><a href="#DoctestItem-380"><span class="linenos">380</span></a>        <span class="k">return</span> <span class="n">ReprFailDoctest</span><span class="p">(</span><span class="n">reprlocation_lines</span><span class="p">)</span>
</span><span id="DoctestItem-381"><a href="#DoctestItem-381"><span class="linenos">381</span></a>
</span><span id="DoctestItem-382"><a href="#DoctestItem-382"><span class="linenos">382</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span><span id="DoctestItem-383"><a href="#DoctestItem-383"><span class="linenos">383</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;[doctest] </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Base class of all test invocation items.</p>

<p>Note that for a single function there might be multiple test invocation items.</p>
</div>


                            <div id="DoctestItem.__init__" class="classattr">
                                        <input id="DoctestItem.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">DoctestItem</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">parent</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">doctest</span><span class="o">.</span><span class="n">DoctestTextfile</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">doctest</span><span class="o">.</span><span class="n">DoctestModule</span>,</span><span class="param">	<span class="n">runner</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span>,</span><span class="param">	<span class="n">dtest</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTest</span></span>)</span>

                <label class="view-source-button" for="DoctestItem.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem.__init__-253"><a href="#DoctestItem.__init__-253"><span class="linenos">253</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="DoctestItem.__init__-254"><a href="#DoctestItem.__init__-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="DoctestItem.__init__-255"><a href="#DoctestItem.__init__-255"><span class="linenos">255</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="DoctestItem.__init__-256"><a href="#DoctestItem.__init__-256"><span class="linenos">256</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">DoctestTextfile</span> <span class="o">|</span> <span class="n">DoctestModule</span><span class="p">,</span>
</span><span id="DoctestItem.__init__-257"><a href="#DoctestItem.__init__-257"><span class="linenos">257</span></a>        <span class="n">runner</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span><span class="p">,</span>
</span><span id="DoctestItem.__init__-258"><a href="#DoctestItem.__init__-258"><span class="linenos">258</span></a>        <span class="n">dtest</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTest</span><span class="p">,</span>
</span><span id="DoctestItem.__init__-259"><a href="#DoctestItem.__init__-259"><span class="linenos">259</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem.__init__-260"><a href="#DoctestItem.__init__-260"><span class="linenos">260</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
</span><span id="DoctestItem.__init__-261"><a href="#DoctestItem.__init__-261"><span class="linenos">261</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">runner</span> <span class="o">=</span> <span class="n">runner</span>
</span><span id="DoctestItem.__init__-262"><a href="#DoctestItem.__init__-262"><span class="linenos">262</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dtest</span> <span class="o">=</span> <span class="n">dtest</span>
</span><span id="DoctestItem.__init__-263"><a href="#DoctestItem.__init__-263"><span class="linenos">263</span></a>
</span><span id="DoctestItem.__init__-264"><a href="#DoctestItem.__init__-264"><span class="linenos">264</span></a>        <span class="c1"># Stuff needed for fixture support.</span>
</span><span id="DoctestItem.__init__-265"><a href="#DoctestItem.__init__-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DoctestItem.__init__-266"><a href="#DoctestItem.__init__-266"><span class="linenos">266</span></a>        <span class="n">fm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="DoctestItem.__init__-267"><a href="#DoctestItem.__init__-267"><span class="linenos">267</span></a>        <span class="n">fixtureinfo</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">getfixtureinfo</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="DoctestItem.__init__-268"><a href="#DoctestItem.__init__-268"><span class="linenos">268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fixtureinfo</span> <span class="o">=</span> <span class="n">fixtureinfo</span>
</span><span id="DoctestItem.__init__-269"><a href="#DoctestItem.__init__-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">names_closure</span>
</span><span id="DoctestItem.__init__-270"><a href="#DoctestItem.__init__-270"><span class="linenos">270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initrequest</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="DoctestItem.runner" class="classattr">
                                <div class="attr variable">
            <span class="name">runner</span>

        
    </div>
    <a class="headerlink" href="#DoctestItem.runner"></a>
    
    

                            </div>
                            <div id="DoctestItem.dtest" class="classattr">
                                <div class="attr variable">
            <span class="name">dtest</span>

        
    </div>
    <a class="headerlink" href="#DoctestItem.dtest"></a>
    
    

                            </div>
                            <div id="DoctestItem.obj" class="classattr">
                                <div class="attr variable">
            <span class="name">obj</span>

        
    </div>
    <a class="headerlink" href="#DoctestItem.obj"></a>
    
    

                            </div>
                            <div id="DoctestItem.fixturenames" class="classattr">
                                <div class="attr variable">
            <span class="name">fixturenames</span>

        
    </div>
    <a class="headerlink" href="#DoctestItem.fixturenames"></a>
    
    

                            </div>
                            <div id="DoctestItem.from_parent" class="classattr">
                                        <input id="DoctestItem.from_parent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_parent</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">parent</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">doctest</span><span class="o">.</span><span class="n">DoctestTextfile</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">doctest</span><span class="o">.</span><span class="n">DoctestModule</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">runner</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span>,</span><span class="param">	<span class="n">dtest</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTest</span></span><span class="return-annotation">) -> <span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="DoctestItem.from_parent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem.from_parent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem.from_parent-272"><a href="#DoctestItem.from_parent-272"><span class="linenos">272</span></a>    <span class="nd">@classmethod</span>
</span><span id="DoctestItem.from_parent-273"><a href="#DoctestItem.from_parent-273"><span class="linenos">273</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="DoctestItem.from_parent-274"><a href="#DoctestItem.from_parent-274"><span class="linenos">274</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="DoctestItem.from_parent-275"><a href="#DoctestItem.from_parent-275"><span class="linenos">275</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">DoctestTextfile</span> <span class="o">|</span> <span class="n">DoctestModule</span><span class="p">,</span>
</span><span id="DoctestItem.from_parent-276"><a href="#DoctestItem.from_parent-276"><span class="linenos">276</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="DoctestItem.from_parent-277"><a href="#DoctestItem.from_parent-277"><span class="linenos">277</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="DoctestItem.from_parent-278"><a href="#DoctestItem.from_parent-278"><span class="linenos">278</span></a>        <span class="n">runner</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span><span class="p">,</span>
</span><span id="DoctestItem.from_parent-279"><a href="#DoctestItem.from_parent-279"><span class="linenos">279</span></a>        <span class="n">dtest</span><span class="p">:</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTest</span><span class="p">,</span>
</span><span id="DoctestItem.from_parent-280"><a href="#DoctestItem.from_parent-280"><span class="linenos">280</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="DoctestItem.from_parent-281"><a href="#DoctestItem.from_parent-281"><span class="linenos">281</span></a>        <span class="c1"># incompatible signature due to imposed limits on subclass</span>
</span><span id="DoctestItem.from_parent-282"><a href="#DoctestItem.from_parent-282"><span class="linenos">282</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public named constructor.&quot;&quot;&quot;</span>
</span><span id="DoctestItem.from_parent-283"><a href="#DoctestItem.from_parent-283"><span class="linenos">283</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">runner</span><span class="o">=</span><span class="n">runner</span><span class="p">,</span> <span class="n">dtest</span><span class="o">=</span><span class="n">dtest</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The public named constructor.</p>
</div>


                            </div>
                            <div id="DoctestItem.setup" class="classattr">
                                        <input id="DoctestItem.setup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DoctestItem.setup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem.setup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem.setup-289"><a href="#DoctestItem.setup-289"><span class="linenos">289</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem.setup-290"><a href="#DoctestItem.setup-290"><span class="linenos">290</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">_fillfixtures</span><span class="p">()</span>
</span><span id="DoctestItem.setup-291"><a href="#DoctestItem.setup-291"><span class="linenos">291</span></a>        <span class="n">globs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">getfixture</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">getfixturevalue</span><span class="p">)</span>
</span><span id="DoctestItem.setup-292"><a href="#DoctestItem.setup-292"><span class="linenos">292</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">getfixturevalue</span><span class="p">(</span><span class="s2">&quot;doctest_namespace&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="DoctestItem.setup-293"><a href="#DoctestItem.setup-293"><span class="linenos">293</span></a>            <span class="n">globs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="DoctestItem.setup-294"><a href="#DoctestItem.setup-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="o">.</span><span class="n">globs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">globs</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="DoctestItem.runtest" class="classattr">
                                        <input id="DoctestItem.runtest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runtest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="DoctestItem.runtest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem.runtest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem.runtest-296"><a href="#DoctestItem.runtest-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem.runtest-297"><a href="#DoctestItem.runtest-297"><span class="linenos">297</span></a>        <span class="n">_check_all_skipped</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="p">)</span>
</span><span id="DoctestItem.runtest-298"><a href="#DoctestItem.runtest-298"><span class="linenos">298</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_disable_output_capturing_for_darwin</span><span class="p">()</span>
</span><span id="DoctestItem.runtest-299"><a href="#DoctestItem.runtest-299"><span class="linenos">299</span></a>        <span class="n">failures</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DoctestItem.runtest-300"><a href="#DoctestItem.runtest-300"><span class="linenos">300</span></a>        <span class="c1"># Type ignored because we change the type of `out` from what</span>
</span><span id="DoctestItem.runtest-301"><a href="#DoctestItem.runtest-301"><span class="linenos">301</span></a>        <span class="c1"># doctest expects.</span>
</span><span id="DoctestItem.runtest-302"><a href="#DoctestItem.runtest-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">failures</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="DoctestItem.runtest-303"><a href="#DoctestItem.runtest-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
</span><span id="DoctestItem.runtest-304"><a href="#DoctestItem.runtest-304"><span class="linenos">304</span></a>            <span class="k">raise</span> <span class="n">MultipleDoctestFailures</span><span class="p">(</span><span class="n">failures</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run the test case for this item.</p>

<p>Must be implemented by subclasses.</p>

<p><em>seealso :ref:<code>non-python tests</code>.</em></p>
</div>


                            </div>
                            <div id="DoctestItem.repr_failure" class="classattr">
                                        <input id="DoctestItem.repr_failure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">repr_failure</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">excinfo</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">TerminalRepr</span>:</span></span>

                <label class="view-source-button" for="DoctestItem.repr_failure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem.repr_failure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem.repr_failure-318"><a href="#DoctestItem.repr_failure-318"><span class="linenos">318</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repr_failure</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="DoctestItem.repr_failure-319"><a href="#DoctestItem.repr_failure-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="DoctestItem.repr_failure-320"><a href="#DoctestItem.repr_failure-320"><span class="linenos">320</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="DoctestItem.repr_failure-321"><a href="#DoctestItem.repr_failure-321"><span class="linenos">321</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-322"><a href="#DoctestItem.repr_failure-322"><span class="linenos">322</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">doctest</span>
</span><span id="DoctestItem.repr_failure-323"><a href="#DoctestItem.repr_failure-323"><span class="linenos">323</span></a>
</span><span id="DoctestItem.repr_failure-324"><a href="#DoctestItem.repr_failure-324"><span class="linenos">324</span></a>        <span class="n">failures</span><span class="p">:</span> <span class="p">(</span>
</span><span id="DoctestItem.repr_failure-325"><a href="#DoctestItem.repr_failure-325"><span class="linenos">325</span></a>            <span class="n">Sequence</span><span class="p">[</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span> <span class="o">|</span> <span class="n">doctest</span><span class="o">.</span><span class="n">UnexpectedException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="DoctestItem.repr_failure-326"><a href="#DoctestItem.repr_failure-326"><span class="linenos">326</span></a>        <span class="p">)</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DoctestItem.repr_failure-327"><a href="#DoctestItem.repr_failure-327"><span class="linenos">327</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="DoctestItem.repr_failure-328"><a href="#DoctestItem.repr_failure-328"><span class="linenos">328</span></a>            <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span><span class="p">,</span> <span class="n">doctest</span><span class="o">.</span><span class="n">UnexpectedException</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-329"><a href="#DoctestItem.repr_failure-329"><span class="linenos">329</span></a>        <span class="p">):</span>
</span><span id="DoctestItem.repr_failure-330"><a href="#DoctestItem.repr_failure-330"><span class="linenos">330</span></a>            <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</span><span id="DoctestItem.repr_failure-331"><a href="#DoctestItem.repr_failure-331"><span class="linenos">331</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">MultipleDoctestFailures</span><span class="p">):</span>
</span><span id="DoctestItem.repr_failure-332"><a href="#DoctestItem.repr_failure-332"><span class="linenos">332</span></a>            <span class="n">failures</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">failures</span>
</span><span id="DoctestItem.repr_failure-333"><a href="#DoctestItem.repr_failure-333"><span class="linenos">333</span></a>
</span><span id="DoctestItem.repr_failure-334"><a href="#DoctestItem.repr_failure-334"><span class="linenos">334</span></a>        <span class="k">if</span> <span class="n">failures</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-335"><a href="#DoctestItem.repr_failure-335"><span class="linenos">335</span></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">repr_failure</span><span class="p">(</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-336"><a href="#DoctestItem.repr_failure-336"><span class="linenos">336</span></a>
</span><span id="DoctestItem.repr_failure-337"><a href="#DoctestItem.repr_failure-337"><span class="linenos">337</span></a>        <span class="n">reprlocation_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="DoctestItem.repr_failure-338"><a href="#DoctestItem.repr_failure-338"><span class="linenos">338</span></a>        <span class="k">for</span> <span class="n">failure</span> <span class="ow">in</span> <span class="n">failures</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-339"><a href="#DoctestItem.repr_failure-339"><span class="linenos">339</span></a>            <span class="n">example</span> <span class="o">=</span> <span class="n">failure</span><span class="o">.</span><span class="n">example</span>
</span><span id="DoctestItem.repr_failure-340"><a href="#DoctestItem.repr_failure-340"><span class="linenos">340</span></a>            <span class="n">test</span> <span class="o">=</span> <span class="n">failure</span><span class="o">.</span><span class="n">test</span>
</span><span id="DoctestItem.repr_failure-341"><a href="#DoctestItem.repr_failure-341"><span class="linenos">341</span></a>            <span class="n">filename</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">filename</span>
</span><span id="DoctestItem.repr_failure-342"><a href="#DoctestItem.repr_failure-342"><span class="linenos">342</span></a>            <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-343"><a href="#DoctestItem.repr_failure-343"><span class="linenos">343</span></a>                <span class="n">lineno</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DoctestItem.repr_failure-344"><a href="#DoctestItem.repr_failure-344"><span class="linenos">344</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-345"><a href="#DoctestItem.repr_failure-345"><span class="linenos">345</span></a>                <span class="n">lineno</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="DoctestItem.repr_failure-346"><a href="#DoctestItem.repr_failure-346"><span class="linenos">346</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">failure</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="DoctestItem.repr_failure-347"><a href="#DoctestItem.repr_failure-347"><span class="linenos">347</span></a>            <span class="c1"># TODO: ReprFileLocation doesn&#39;t expect a None lineno.</span>
</span><span id="DoctestItem.repr_failure-348"><a href="#DoctestItem.repr_failure-348"><span class="linenos">348</span></a>            <span class="n">reprlocation</span> <span class="o">=</span> <span class="n">ReprFileLocation</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="DoctestItem.repr_failure-349"><a href="#DoctestItem.repr_failure-349"><span class="linenos">349</span></a>            <span class="n">checker</span> <span class="o">=</span> <span class="n">_get_checker</span><span class="p">()</span>
</span><span id="DoctestItem.repr_failure-350"><a href="#DoctestItem.repr_failure-350"><span class="linenos">350</span></a>            <span class="n">report_choice</span> <span class="o">=</span> <span class="n">_get_report_choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;doctestreport&quot;</span><span class="p">))</span>
</span><span id="DoctestItem.repr_failure-351"><a href="#DoctestItem.repr_failure-351"><span class="linenos">351</span></a>            <span class="k">if</span> <span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-352"><a href="#DoctestItem.repr_failure-352"><span class="linenos">352</span></a>                <span class="k">assert</span> <span class="n">failure</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">docstring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="DoctestItem.repr_failure-353"><a href="#DoctestItem.repr_failure-353"><span class="linenos">353</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">failure</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">docstring</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-354"><a href="#DoctestItem.repr_failure-354"><span class="linenos">354</span></a>                <span class="c1"># add line numbers to the left of the error message</span>
</span><span id="DoctestItem.repr_failure-355"><a href="#DoctestItem.repr_failure-355"><span class="linenos">355</span></a>                <span class="k">assert</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="DoctestItem.repr_failure-356"><a href="#DoctestItem.repr_failure-356"><span class="linenos">356</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="DoctestItem.repr_failure-357"><a href="#DoctestItem.repr_failure-357"><span class="linenos">357</span></a>                    <span class="s2">&quot;</span><span class="si">%03d</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-358"><a href="#DoctestItem.repr_failure-358"><span class="linenos">358</span></a>                <span class="p">]</span>
</span><span id="DoctestItem.repr_failure-359"><a href="#DoctestItem.repr_failure-359"><span class="linenos">359</span></a>                <span class="c1"># trim docstring error lines to 10</span>
</span><span id="DoctestItem.repr_failure-360"><a href="#DoctestItem.repr_failure-360"><span class="linenos">360</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">-</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span> <span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="DoctestItem.repr_failure-361"><a href="#DoctestItem.repr_failure-361"><span class="linenos">361</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-362"><a href="#DoctestItem.repr_failure-362"><span class="linenos">362</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="DoctestItem.repr_failure-363"><a href="#DoctestItem.repr_failure-363"><span class="linenos">363</span></a>                    <span class="s2">&quot;EXAMPLE LOCATION UNKNOWN, not showing all tests of that example&quot;</span>
</span><span id="DoctestItem.repr_failure-364"><a href="#DoctestItem.repr_failure-364"><span class="linenos">364</span></a>                <span class="p">]</span>
</span><span id="DoctestItem.repr_failure-365"><a href="#DoctestItem.repr_failure-365"><span class="linenos">365</span></a>                <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&gt;&gt;&gt;&quot;</span>
</span><span id="DoctestItem.repr_failure-366"><a href="#DoctestItem.repr_failure-366"><span class="linenos">366</span></a>                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">example</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
</span><span id="DoctestItem.repr_failure-367"><a href="#DoctestItem.repr_failure-367"><span class="linenos">367</span></a>                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;??? </span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-368"><a href="#DoctestItem.repr_failure-368"><span class="linenos">368</span></a>                    <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>
</span><span id="DoctestItem.repr_failure-369"><a href="#DoctestItem.repr_failure-369"><span class="linenos">369</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">failure</span><span class="p">,</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFailure</span><span class="p">):</span>
</span><span id="DoctestItem.repr_failure-370"><a href="#DoctestItem.repr_failure-370"><span class="linenos">370</span></a>                <span class="n">lines</span> <span class="o">+=</span> <span class="n">checker</span><span class="o">.</span><span class="n">output_difference</span><span class="p">(</span>
</span><span id="DoctestItem.repr_failure-371"><a href="#DoctestItem.repr_failure-371"><span class="linenos">371</span></a>                    <span class="n">example</span><span class="p">,</span> <span class="n">failure</span><span class="o">.</span><span class="n">got</span><span class="p">,</span> <span class="n">report_choice</span>
</span><span id="DoctestItem.repr_failure-372"><a href="#DoctestItem.repr_failure-372"><span class="linenos">372</span></a>                <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-373"><a href="#DoctestItem.repr_failure-373"><span class="linenos">373</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="DoctestItem.repr_failure-374"><a href="#DoctestItem.repr_failure-374"><span class="linenos">374</span></a>                <span class="n">inner_excinfo</span> <span class="o">=</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exc_info</span><span class="p">(</span><span class="n">failure</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-375"><a href="#DoctestItem.repr_failure-375"><span class="linenos">375</span></a>                <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;UNEXPECTED EXCEPTION: </span><span class="si">{</span><span class="n">inner_excinfo</span><span class="o">.</span><span class="n">value</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">]</span>
</span><span id="DoctestItem.repr_failure-376"><a href="#DoctestItem.repr_failure-376"><span class="linenos">376</span></a>                <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span>
</span><span id="DoctestItem.repr_failure-377"><a href="#DoctestItem.repr_failure-377"><span class="linenos">377</span></a>                    <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception</span><span class="p">(</span><span class="o">*</span><span class="n">failure</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span>
</span><span id="DoctestItem.repr_failure-378"><a href="#DoctestItem.repr_failure-378"><span class="linenos">378</span></a>                <span class="p">]</span>
</span><span id="DoctestItem.repr_failure-379"><a href="#DoctestItem.repr_failure-379"><span class="linenos">379</span></a>            <span class="n">reprlocation_lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">reprlocation</span><span class="p">,</span> <span class="n">lines</span><span class="p">))</span>
</span><span id="DoctestItem.repr_failure-380"><a href="#DoctestItem.repr_failure-380"><span class="linenos">380</span></a>        <span class="k">return</span> <span class="n">ReprFailDoctest</span><span class="p">(</span><span class="n">reprlocation_lines</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return a representation of a collection or test failure.</p>

<p><em>seealso :ref:<code>non-python tests</code>.</em></p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>excinfo</strong>:  Exception information for the failure.</li>
</ul>
</div>


                            </div>
                            <div id="DoctestItem.reportinfo" class="classattr">
                                        <input id="DoctestItem.reportinfo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reportinfo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="DoctestItem.reportinfo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DoctestItem.reportinfo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DoctestItem.reportinfo-382"><a href="#DoctestItem.reportinfo-382"><span class="linenos">382</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span><span id="DoctestItem.reportinfo-383"><a href="#DoctestItem.reportinfo-383"><span class="linenos">383</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtest</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;[doctest] </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get location information for this item for test reports.</p>

<p>Returns a tuple with three elements:</p>

<ul>
<li>The path of the test (default <code>self.path</code>)</li>
<li>The 0-based line number of the test (default <code>None</code>)</li>
<li>A name of the test to be shown (default <code>""</code>)</li>
</ul>

<p><em>seealso :ref:<code>non-python tests</code>.</em></p>
</div>


                            </div>
                </section>
                <section id="exit">
                            <input id="exit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">exit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>, </span><span class="param"><span class="n">returncode</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">NoReturn</span>:</span></span>

                <label class="view-source-button" for="exit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#exit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="exit-106"><a href="#exit-106"><span class="linenos">106</span></a><span class="nd">@_with_exception</span><span class="p">(</span><span class="n">Exit</span><span class="p">)</span>
</span><span id="exit-107"><a href="#exit-107"><span class="linenos">107</span></a><span class="k">def</span><span class="w"> </span><span class="nf">exit</span><span class="p">(</span>
</span><span id="exit-108"><a href="#exit-108"><span class="linenos">108</span></a>    <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="exit-109"><a href="#exit-109"><span class="linenos">109</span></a>    <span class="n">returncode</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="exit-110"><a href="#exit-110"><span class="linenos">110</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="exit-111"><a href="#exit-111"><span class="linenos">111</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Exit testing process.</span>
</span><span id="exit-112"><a href="#exit-112"><span class="linenos">112</span></a>
</span><span id="exit-113"><a href="#exit-113"><span class="linenos">113</span></a><span class="sd">    :param reason:</span>
</span><span id="exit-114"><a href="#exit-114"><span class="linenos">114</span></a><span class="sd">        The message to show as the reason for exiting pytest.  reason has a default value</span>
</span><span id="exit-115"><a href="#exit-115"><span class="linenos">115</span></a><span class="sd">        only because `msg` is deprecated.</span>
</span><span id="exit-116"><a href="#exit-116"><span class="linenos">116</span></a>
</span><span id="exit-117"><a href="#exit-117"><span class="linenos">117</span></a><span class="sd">    :param returncode:</span>
</span><span id="exit-118"><a href="#exit-118"><span class="linenos">118</span></a><span class="sd">        Return code to be used when exiting pytest. None means the same as ``0`` (no error), same as :func:`sys.exit`.</span>
</span><span id="exit-119"><a href="#exit-119"><span class="linenos">119</span></a>
</span><span id="exit-120"><a href="#exit-120"><span class="linenos">120</span></a><span class="sd">    :raises pytest.exit.Exception:</span>
</span><span id="exit-121"><a href="#exit-121"><span class="linenos">121</span></a><span class="sd">        The exception that is raised.</span>
</span><span id="exit-122"><a href="#exit-122"><span class="linenos">122</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="exit-123"><a href="#exit-123"><span class="linenos">123</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="exit-124"><a href="#exit-124"><span class="linenos">124</span></a>    <span class="k">raise</span> <span class="n">Exit</span><span class="p">(</span><span class="n">reason</span><span class="p">,</span> <span class="n">returncode</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Exit testing process.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>reason</strong>: 
The message to show as the reason for exiting pytest.  reason has a default value
only because <code>msg</code> is deprecated.</p></li>
<li><p><strong>returncode</strong>: 
Return code to be used when exiting pytest. None means the same as <code>0</code> (no error), same as <code>sys.exit()</code>.</p></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>pytest.exit.Exception</strong>: 
The exception that is raised.</li>
</ul>
</div>


                </section>
                <section id="ExceptionInfo">
                            <input id="ExceptionInfo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">ExceptionInfo</span><wbr>(<span class="base">typing.Generic[+E]</span>):

                <label class="view-source-button" for="ExceptionInfo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo-436"><a href="#ExceptionInfo-436"><span class="linenos">436</span></a><span class="nd">@final</span>
</span><span id="ExceptionInfo-437"><a href="#ExceptionInfo-437"><span class="linenos">437</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="ExceptionInfo-438"><a href="#ExceptionInfo-438"><span class="linenos">438</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ExceptionInfo</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">E</span><span class="p">]):</span>
</span><span id="ExceptionInfo-439"><a href="#ExceptionInfo-439"><span class="linenos">439</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Wraps sys.exc_info() objects and offers help for navigating the traceback.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-440"><a href="#ExceptionInfo-440"><span class="linenos">440</span></a>
</span><span id="ExceptionInfo-441"><a href="#ExceptionInfo-441"><span class="linenos">441</span></a>    <span class="n">_assert_start_repr</span><span class="p">:</span> <span class="n">ClassVar</span> <span class="o">=</span> <span class="s2">&quot;AssertionError(&#39;assert &quot;</span>
</span><span id="ExceptionInfo-442"><a href="#ExceptionInfo-442"><span class="linenos">442</span></a>
</span><span id="ExceptionInfo-443"><a href="#ExceptionInfo-443"><span class="linenos">443</span></a>    <span class="n">_excinfo</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-444"><a href="#ExceptionInfo-444"><span class="linenos">444</span></a>    <span class="n">_striptext</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ExceptionInfo-445"><a href="#ExceptionInfo-445"><span class="linenos">445</span></a>    <span class="n">_traceback</span><span class="p">:</span> <span class="n">Traceback</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-446"><a href="#ExceptionInfo-446"><span class="linenos">446</span></a>
</span><span id="ExceptionInfo-447"><a href="#ExceptionInfo-447"><span class="linenos">447</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ExceptionInfo-448"><a href="#ExceptionInfo-448"><span class="linenos">448</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo-449"><a href="#ExceptionInfo-449"><span class="linenos">449</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-450"><a href="#ExceptionInfo-450"><span class="linenos">450</span></a>        <span class="n">striptext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="ExceptionInfo-451"><a href="#ExceptionInfo-451"><span class="linenos">451</span></a>        <span class="n">traceback</span><span class="p">:</span> <span class="n">Traceback</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-452"><a href="#ExceptionInfo-452"><span class="linenos">452</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="ExceptionInfo-453"><a href="#ExceptionInfo-453"><span class="linenos">453</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo-454"><a href="#ExceptionInfo-454"><span class="linenos">454</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-455"><a href="#ExceptionInfo-455"><span class="linenos">455</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="ExceptionInfo-456"><a href="#ExceptionInfo-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="o">=</span> <span class="n">excinfo</span>
</span><span id="ExceptionInfo-457"><a href="#ExceptionInfo-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_striptext</span> <span class="o">=</span> <span class="n">striptext</span>
</span><span id="ExceptionInfo-458"><a href="#ExceptionInfo-458"><span class="linenos">458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="o">=</span> <span class="n">traceback</span>
</span><span id="ExceptionInfo-459"><a href="#ExceptionInfo-459"><span class="linenos">459</span></a>
</span><span id="ExceptionInfo-460"><a href="#ExceptionInfo-460"><span class="linenos">460</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo-461"><a href="#ExceptionInfo-461"><span class="linenos">461</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_exception</span><span class="p">(</span>
</span><span id="ExceptionInfo-462"><a href="#ExceptionInfo-462"><span class="linenos">462</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="ExceptionInfo-463"><a href="#ExceptionInfo-463"><span class="linenos">463</span></a>        <span class="c1"># Ignoring error: &quot;Cannot use a covariant type variable as a parameter&quot;.</span>
</span><span id="ExceptionInfo-464"><a href="#ExceptionInfo-464"><span class="linenos">464</span></a>        <span class="c1"># This is OK to ignore because this class is (conceptually) readonly.</span>
</span><span id="ExceptionInfo-465"><a href="#ExceptionInfo-465"><span class="linenos">465</span></a>        <span class="c1"># See https://github.com/python/mypy/issues/7049.</span>
</span><span id="ExceptionInfo-466"><a href="#ExceptionInfo-466"><span class="linenos">466</span></a>        <span class="n">exception</span><span class="p">:</span> <span class="n">E</span><span class="p">,</span>  <span class="c1"># type: ignore[misc]</span>
</span><span id="ExceptionInfo-467"><a href="#ExceptionInfo-467"><span class="linenos">467</span></a>        <span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-468"><a href="#ExceptionInfo-468"><span class="linenos">468</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo-469"><a href="#ExceptionInfo-469"><span class="linenos">469</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an ExceptionInfo for an existing exception.</span>
</span><span id="ExceptionInfo-470"><a href="#ExceptionInfo-470"><span class="linenos">470</span></a>
</span><span id="ExceptionInfo-471"><a href="#ExceptionInfo-471"><span class="linenos">471</span></a><span class="sd">        The exception must have a non-``None`` ``__traceback__`` attribute,</span>
</span><span id="ExceptionInfo-472"><a href="#ExceptionInfo-472"><span class="linenos">472</span></a><span class="sd">        otherwise this function fails with an assertion error. This means that</span>
</span><span id="ExceptionInfo-473"><a href="#ExceptionInfo-473"><span class="linenos">473</span></a><span class="sd">        the exception must have been raised, or added a traceback with the</span>
</span><span id="ExceptionInfo-474"><a href="#ExceptionInfo-474"><span class="linenos">474</span></a><span class="sd">        :py:meth:`~BaseException.with_traceback()` method.</span>
</span><span id="ExceptionInfo-475"><a href="#ExceptionInfo-475"><span class="linenos">475</span></a>
</span><span id="ExceptionInfo-476"><a href="#ExceptionInfo-476"><span class="linenos">476</span></a><span class="sd">        :param exprinfo:</span>
</span><span id="ExceptionInfo-477"><a href="#ExceptionInfo-477"><span class="linenos">477</span></a><span class="sd">            A text string helping to determine if we should strip</span>
</span><span id="ExceptionInfo-478"><a href="#ExceptionInfo-478"><span class="linenos">478</span></a><span class="sd">            ``AssertionError`` from the output. Defaults to the exception</span>
</span><span id="ExceptionInfo-479"><a href="#ExceptionInfo-479"><span class="linenos">479</span></a><span class="sd">            message/``__str__()``.</span>
</span><span id="ExceptionInfo-480"><a href="#ExceptionInfo-480"><span class="linenos">480</span></a>
</span><span id="ExceptionInfo-481"><a href="#ExceptionInfo-481"><span class="linenos">481</span></a><span class="sd">        .. versionadded:: 7.4</span>
</span><span id="ExceptionInfo-482"><a href="#ExceptionInfo-482"><span class="linenos">482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-483"><a href="#ExceptionInfo-483"><span class="linenos">483</span></a>        <span class="k">assert</span> <span class="n">exception</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">,</span> <span class="p">(</span>
</span><span id="ExceptionInfo-484"><a href="#ExceptionInfo-484"><span class="linenos">484</span></a>            <span class="s2">&quot;Exceptions passed to ExcInfo.from_exception(...)&quot;</span>
</span><span id="ExceptionInfo-485"><a href="#ExceptionInfo-485"><span class="linenos">485</span></a>            <span class="s2">&quot; must have a non-None __traceback__.&quot;</span>
</span><span id="ExceptionInfo-486"><a href="#ExceptionInfo-486"><span class="linenos">486</span></a>        <span class="p">)</span>
</span><span id="ExceptionInfo-487"><a href="#ExceptionInfo-487"><span class="linenos">487</span></a>        <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">exception</span><span class="p">),</span> <span class="n">exception</span><span class="p">,</span> <span class="n">exception</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">)</span>
</span><span id="ExceptionInfo-488"><a href="#ExceptionInfo-488"><span class="linenos">488</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_exc_info</span><span class="p">(</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">exprinfo</span><span class="p">)</span>
</span><span id="ExceptionInfo-489"><a href="#ExceptionInfo-489"><span class="linenos">489</span></a>
</span><span id="ExceptionInfo-490"><a href="#ExceptionInfo-490"><span class="linenos">490</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo-491"><a href="#ExceptionInfo-491"><span class="linenos">491</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_exc_info</span><span class="p">(</span>
</span><span id="ExceptionInfo-492"><a href="#ExceptionInfo-492"><span class="linenos">492</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="ExceptionInfo-493"><a href="#ExceptionInfo-493"><span class="linenos">493</span></a>        <span class="n">exc_info</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">],</span>
</span><span id="ExceptionInfo-494"><a href="#ExceptionInfo-494"><span class="linenos">494</span></a>        <span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-495"><a href="#ExceptionInfo-495"><span class="linenos">495</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo-496"><a href="#ExceptionInfo-496"><span class="linenos">496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Like :func:`from_exception`, but using old-style exc_info tuple.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-497"><a href="#ExceptionInfo-497"><span class="linenos">497</span></a>        <span class="n">_striptext</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ExceptionInfo-498"><a href="#ExceptionInfo-498"><span class="linenos">498</span></a>        <span class="k">if</span> <span class="n">exprinfo</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="ne">AssertionError</span><span class="p">):</span>
</span><span id="ExceptionInfo-499"><a href="#ExceptionInfo-499"><span class="linenos">499</span></a>            <span class="n">exprinfo</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;msg&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ExceptionInfo-500"><a href="#ExceptionInfo-500"><span class="linenos">500</span></a>            <span class="k">if</span> <span class="n">exprinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-501"><a href="#ExceptionInfo-501"><span class="linenos">501</span></a>                <span class="n">exprinfo</span> <span class="o">=</span> <span class="n">saferepr</span><span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ExceptionInfo-502"><a href="#ExceptionInfo-502"><span class="linenos">502</span></a>            <span class="k">if</span> <span class="n">exprinfo</span> <span class="ow">and</span> <span class="n">exprinfo</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_assert_start_repr</span><span class="p">):</span>
</span><span id="ExceptionInfo-503"><a href="#ExceptionInfo-503"><span class="linenos">503</span></a>                <span class="n">_striptext</span> <span class="o">=</span> <span class="s2">&quot;AssertionError: &quot;</span>
</span><span id="ExceptionInfo-504"><a href="#ExceptionInfo-504"><span class="linenos">504</span></a>
</span><span id="ExceptionInfo-505"><a href="#ExceptionInfo-505"><span class="linenos">505</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">_striptext</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ExceptionInfo-506"><a href="#ExceptionInfo-506"><span class="linenos">506</span></a>
</span><span id="ExceptionInfo-507"><a href="#ExceptionInfo-507"><span class="linenos">507</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo-508"><a href="#ExceptionInfo-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_current</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]:</span>
</span><span id="ExceptionInfo-509"><a href="#ExceptionInfo-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an ExceptionInfo matching the current traceback.</span>
</span><span id="ExceptionInfo-510"><a href="#ExceptionInfo-510"><span class="linenos">510</span></a>
</span><span id="ExceptionInfo-511"><a href="#ExceptionInfo-511"><span class="linenos">511</span></a><span class="sd">        .. warning::</span>
</span><span id="ExceptionInfo-512"><a href="#ExceptionInfo-512"><span class="linenos">512</span></a>
</span><span id="ExceptionInfo-513"><a href="#ExceptionInfo-513"><span class="linenos">513</span></a><span class="sd">            Experimental API</span>
</span><span id="ExceptionInfo-514"><a href="#ExceptionInfo-514"><span class="linenos">514</span></a>
</span><span id="ExceptionInfo-515"><a href="#ExceptionInfo-515"><span class="linenos">515</span></a><span class="sd">        :param exprinfo:</span>
</span><span id="ExceptionInfo-516"><a href="#ExceptionInfo-516"><span class="linenos">516</span></a><span class="sd">            A text string helping to determine if we should strip</span>
</span><span id="ExceptionInfo-517"><a href="#ExceptionInfo-517"><span class="linenos">517</span></a><span class="sd">            ``AssertionError`` from the output. Defaults to the exception</span>
</span><span id="ExceptionInfo-518"><a href="#ExceptionInfo-518"><span class="linenos">518</span></a><span class="sd">            message/``__str__()``.</span>
</span><span id="ExceptionInfo-519"><a href="#ExceptionInfo-519"><span class="linenos">519</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-520"><a href="#ExceptionInfo-520"><span class="linenos">520</span></a>        <span class="n">tup</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
</span><span id="ExceptionInfo-521"><a href="#ExceptionInfo-521"><span class="linenos">521</span></a>        <span class="k">assert</span> <span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;no current exception&quot;</span>
</span><span id="ExceptionInfo-522"><a href="#ExceptionInfo-522"><span class="linenos">522</span></a>        <span class="k">assert</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;no current exception&quot;</span>
</span><span id="ExceptionInfo-523"><a href="#ExceptionInfo-523"><span class="linenos">523</span></a>        <span class="k">assert</span> <span class="n">tup</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;no current exception&quot;</span>
</span><span id="ExceptionInfo-524"><a href="#ExceptionInfo-524"><span class="linenos">524</span></a>        <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tup</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="ExceptionInfo-525"><a href="#ExceptionInfo-525"><span class="linenos">525</span></a>        <span class="k">return</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exc_info</span><span class="p">(</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">exprinfo</span><span class="p">)</span>
</span><span id="ExceptionInfo-526"><a href="#ExceptionInfo-526"><span class="linenos">526</span></a>
</span><span id="ExceptionInfo-527"><a href="#ExceptionInfo-527"><span class="linenos">527</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo-528"><a href="#ExceptionInfo-528"><span class="linenos">528</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">for_later</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo-529"><a href="#ExceptionInfo-529"><span class="linenos">529</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an unfilled ExceptionInfo.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-530"><a href="#ExceptionInfo-530"><span class="linenos">530</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ExceptionInfo-531"><a href="#ExceptionInfo-531"><span class="linenos">531</span></a>
</span><span id="ExceptionInfo-532"><a href="#ExceptionInfo-532"><span class="linenos">532</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fill_unfilled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-533"><a href="#ExceptionInfo-533"><span class="linenos">533</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill an unfilled ExceptionInfo created with ``for_later()``.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-534"><a href="#ExceptionInfo-534"><span class="linenos">534</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;ExceptionInfo was already filled&quot;</span>
</span><span id="ExceptionInfo-535"><a href="#ExceptionInfo-535"><span class="linenos">535</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="o">=</span> <span class="n">exc_info</span>
</span><span id="ExceptionInfo-536"><a href="#ExceptionInfo-536"><span class="linenos">536</span></a>
</span><span id="ExceptionInfo-537"><a href="#ExceptionInfo-537"><span class="linenos">537</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo-538"><a href="#ExceptionInfo-538"><span class="linenos">538</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo-539"><a href="#ExceptionInfo-539"><span class="linenos">539</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The exception class.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-540"><a href="#ExceptionInfo-540"><span class="linenos">540</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo-541"><a href="#ExceptionInfo-541"><span class="linenos">541</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-542"><a href="#ExceptionInfo-542"><span class="linenos">542</span></a>        <span class="p">),</span> <span class="s2">&quot;.type can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo-543"><a href="#ExceptionInfo-543"><span class="linenos">543</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ExceptionInfo-544"><a href="#ExceptionInfo-544"><span class="linenos">544</span></a>
</span><span id="ExceptionInfo-545"><a href="#ExceptionInfo-545"><span class="linenos">545</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo-546"><a href="#ExceptionInfo-546"><span class="linenos">546</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">E</span><span class="p">:</span>
</span><span id="ExceptionInfo-547"><a href="#ExceptionInfo-547"><span class="linenos">547</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The exception value.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-548"><a href="#ExceptionInfo-548"><span class="linenos">548</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo-549"><a href="#ExceptionInfo-549"><span class="linenos">549</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-550"><a href="#ExceptionInfo-550"><span class="linenos">550</span></a>        <span class="p">),</span> <span class="s2">&quot;.value can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo-551"><a href="#ExceptionInfo-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ExceptionInfo-552"><a href="#ExceptionInfo-552"><span class="linenos">552</span></a>
</span><span id="ExceptionInfo-553"><a href="#ExceptionInfo-553"><span class="linenos">553</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo-554"><a href="#ExceptionInfo-554"><span class="linenos">554</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tb</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TracebackType</span><span class="p">:</span>
</span><span id="ExceptionInfo-555"><a href="#ExceptionInfo-555"><span class="linenos">555</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The exception raw traceback.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-556"><a href="#ExceptionInfo-556"><span class="linenos">556</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo-557"><a href="#ExceptionInfo-557"><span class="linenos">557</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-558"><a href="#ExceptionInfo-558"><span class="linenos">558</span></a>        <span class="p">),</span> <span class="s2">&quot;.tb can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo-559"><a href="#ExceptionInfo-559"><span class="linenos">559</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="ExceptionInfo-560"><a href="#ExceptionInfo-560"><span class="linenos">560</span></a>
</span><span id="ExceptionInfo-561"><a href="#ExceptionInfo-561"><span class="linenos">561</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo-562"><a href="#ExceptionInfo-562"><span class="linenos">562</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">typename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ExceptionInfo-563"><a href="#ExceptionInfo-563"><span class="linenos">563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The type name of the exception.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-564"><a href="#ExceptionInfo-564"><span class="linenos">564</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo-565"><a href="#ExceptionInfo-565"><span class="linenos">565</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-566"><a href="#ExceptionInfo-566"><span class="linenos">566</span></a>        <span class="p">),</span> <span class="s2">&quot;.typename can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo-567"><a href="#ExceptionInfo-567"><span class="linenos">567</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="ExceptionInfo-568"><a href="#ExceptionInfo-568"><span class="linenos">568</span></a>
</span><span id="ExceptionInfo-569"><a href="#ExceptionInfo-569"><span class="linenos">569</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo-570"><a href="#ExceptionInfo-570"><span class="linenos">570</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">traceback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Traceback</span><span class="p">:</span>
</span><span id="ExceptionInfo-571"><a href="#ExceptionInfo-571"><span class="linenos">571</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The traceback.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-572"><a href="#ExceptionInfo-572"><span class="linenos">572</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-573"><a href="#ExceptionInfo-573"><span class="linenos">573</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="o">=</span> <span class="n">Traceback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="p">)</span>
</span><span id="ExceptionInfo-574"><a href="#ExceptionInfo-574"><span class="linenos">574</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span>
</span><span id="ExceptionInfo-575"><a href="#ExceptionInfo-575"><span class="linenos">575</span></a>
</span><span id="ExceptionInfo-576"><a href="#ExceptionInfo-576"><span class="linenos">576</span></a>    <span class="nd">@traceback</span><span class="o">.</span><span class="n">setter</span>
</span><span id="ExceptionInfo-577"><a href="#ExceptionInfo-577"><span class="linenos">577</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">traceback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Traceback</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-578"><a href="#ExceptionInfo-578"><span class="linenos">578</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="ExceptionInfo-579"><a href="#ExceptionInfo-579"><span class="linenos">579</span></a>
</span><span id="ExceptionInfo-580"><a href="#ExceptionInfo-580"><span class="linenos">580</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ExceptionInfo-581"><a href="#ExceptionInfo-581"><span class="linenos">581</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-582"><a href="#ExceptionInfo-582"><span class="linenos">582</span></a>            <span class="k">return</span> <span class="s2">&quot;&lt;ExceptionInfo for raises contextmanager&gt;&quot;</span>
</span><span id="ExceptionInfo-583"><a href="#ExceptionInfo-583"><span class="linenos">583</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">saferepr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s2"> tblen=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">)</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</span><span id="ExceptionInfo-584"><a href="#ExceptionInfo-584"><span class="linenos">584</span></a>
</span><span id="ExceptionInfo-585"><a href="#ExceptionInfo-585"><span class="linenos">585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">exconly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tryshort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ExceptionInfo-586"><a href="#ExceptionInfo-586"><span class="linenos">586</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the exception as a string.</span>
</span><span id="ExceptionInfo-587"><a href="#ExceptionInfo-587"><span class="linenos">587</span></a>
</span><span id="ExceptionInfo-588"><a href="#ExceptionInfo-588"><span class="linenos">588</span></a><span class="sd">        When &#39;tryshort&#39; resolves to True, and the exception is an</span>
</span><span id="ExceptionInfo-589"><a href="#ExceptionInfo-589"><span class="linenos">589</span></a><span class="sd">        AssertionError, only the actual exception part of the exception</span>
</span><span id="ExceptionInfo-590"><a href="#ExceptionInfo-590"><span class="linenos">590</span></a><span class="sd">        representation is returned (so &#39;AssertionError: &#39; is removed from</span>
</span><span id="ExceptionInfo-591"><a href="#ExceptionInfo-591"><span class="linenos">591</span></a><span class="sd">        the beginning).</span>
</span><span id="ExceptionInfo-592"><a href="#ExceptionInfo-592"><span class="linenos">592</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-593"><a href="#ExceptionInfo-593"><span class="linenos">593</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="n">format_exception_only</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="ExceptionInfo-594"><a href="#ExceptionInfo-594"><span class="linenos">594</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="ExceptionInfo-595"><a href="#ExceptionInfo-595"><span class="linenos">595</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</span><span id="ExceptionInfo-596"><a href="#ExceptionInfo-596"><span class="linenos">596</span></a>        <span class="k">if</span> <span class="n">tryshort</span><span class="p">:</span>
</span><span id="ExceptionInfo-597"><a href="#ExceptionInfo-597"><span class="linenos">597</span></a>            <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_striptext</span><span class="p">):</span>
</span><span id="ExceptionInfo-598"><a href="#ExceptionInfo-598"><span class="linenos">598</span></a>                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_striptext</span><span class="p">)</span> <span class="p">:]</span>
</span><span id="ExceptionInfo-599"><a href="#ExceptionInfo-599"><span class="linenos">599</span></a>        <span class="k">return</span> <span class="n">text</span>
</span><span id="ExceptionInfo-600"><a href="#ExceptionInfo-600"><span class="linenos">600</span></a>
</span><span id="ExceptionInfo-601"><a href="#ExceptionInfo-601"><span class="linenos">601</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">errisinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="n">EXCEPTION_OR_MORE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExceptionInfo-602"><a href="#ExceptionInfo-602"><span class="linenos">602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if the exception is an instance of exc.</span>
</span><span id="ExceptionInfo-603"><a href="#ExceptionInfo-603"><span class="linenos">603</span></a>
</span><span id="ExceptionInfo-604"><a href="#ExceptionInfo-604"><span class="linenos">604</span></a><span class="sd">        Consider using ``isinstance(excinfo.value, exc)`` instead.</span>
</span><span id="ExceptionInfo-605"><a href="#ExceptionInfo-605"><span class="linenos">605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-606"><a href="#ExceptionInfo-606"><span class="linenos">606</span></a>        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</span><span id="ExceptionInfo-607"><a href="#ExceptionInfo-607"><span class="linenos">607</span></a>
</span><span id="ExceptionInfo-608"><a href="#ExceptionInfo-608"><span class="linenos">608</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getreprcrash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReprFileLocation</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-609"><a href="#ExceptionInfo-609"><span class="linenos">609</span></a>        <span class="c1"># Find last non-hidden traceback entry that led to the exception of the</span>
</span><span id="ExceptionInfo-610"><a href="#ExceptionInfo-610"><span class="linenos">610</span></a>        <span class="c1"># traceback, or None if all hidden.</span>
</span><span id="ExceptionInfo-611"><a href="#ExceptionInfo-611"><span class="linenos">611</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="ExceptionInfo-612"><a href="#ExceptionInfo-612"><span class="linenos">612</span></a>            <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ExceptionInfo-613"><a href="#ExceptionInfo-613"><span class="linenos">613</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">entry</span><span class="o">.</span><span class="n">ishidden</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ExceptionInfo-614"><a href="#ExceptionInfo-614"><span class="linenos">614</span></a>                <span class="n">path</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">co_filename</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">lineno</span>
</span><span id="ExceptionInfo-615"><a href="#ExceptionInfo-615"><span class="linenos">615</span></a>                <span class="n">exconly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exconly</span><span class="p">(</span><span class="n">tryshort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ExceptionInfo-616"><a href="#ExceptionInfo-616"><span class="linenos">616</span></a>                <span class="k">return</span> <span class="n">ReprFileLocation</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">exconly</span><span class="p">)</span>
</span><span id="ExceptionInfo-617"><a href="#ExceptionInfo-617"><span class="linenos">617</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="ExceptionInfo-618"><a href="#ExceptionInfo-618"><span class="linenos">618</span></a>
</span><span id="ExceptionInfo-619"><a href="#ExceptionInfo-619"><span class="linenos">619</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getrepr</span><span class="p">(</span>
</span><span id="ExceptionInfo-620"><a href="#ExceptionInfo-620"><span class="linenos">620</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo-621"><a href="#ExceptionInfo-621"><span class="linenos">621</span></a>        <span class="n">showlocals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo-622"><a href="#ExceptionInfo-622"><span class="linenos">622</span></a>        <span class="n">style</span><span class="p">:</span> <span class="n">TracebackStyle</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
</span><span id="ExceptionInfo-623"><a href="#ExceptionInfo-623"><span class="linenos">623</span></a>        <span class="n">abspath</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo-624"><a href="#ExceptionInfo-624"><span class="linenos">624</span></a>        <span class="n">tbfilter</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="ExceptionInfo-625"><a href="#ExceptionInfo-625"><span class="linenos">625</span></a>        <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">Traceback</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo-626"><a href="#ExceptionInfo-626"><span class="linenos">626</span></a>        <span class="n">funcargs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo-627"><a href="#ExceptionInfo-627"><span class="linenos">627</span></a>        <span class="n">truncate_locals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo-628"><a href="#ExceptionInfo-628"><span class="linenos">628</span></a>        <span class="n">truncate_args</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo-629"><a href="#ExceptionInfo-629"><span class="linenos">629</span></a>        <span class="n">chain</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo-630"><a href="#ExceptionInfo-630"><span class="linenos">630</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReprExceptionInfo</span> <span class="o">|</span> <span class="n">ExceptionChainRepr</span><span class="p">:</span>
</span><span id="ExceptionInfo-631"><a href="#ExceptionInfo-631"><span class="linenos">631</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return str()able representation of this exception info.</span>
</span><span id="ExceptionInfo-632"><a href="#ExceptionInfo-632"><span class="linenos">632</span></a>
</span><span id="ExceptionInfo-633"><a href="#ExceptionInfo-633"><span class="linenos">633</span></a><span class="sd">        :param bool showlocals:</span>
</span><span id="ExceptionInfo-634"><a href="#ExceptionInfo-634"><span class="linenos">634</span></a><span class="sd">            Show locals per traceback entry.</span>
</span><span id="ExceptionInfo-635"><a href="#ExceptionInfo-635"><span class="linenos">635</span></a><span class="sd">            Ignored if ``style==&quot;native&quot;``.</span>
</span><span id="ExceptionInfo-636"><a href="#ExceptionInfo-636"><span class="linenos">636</span></a>
</span><span id="ExceptionInfo-637"><a href="#ExceptionInfo-637"><span class="linenos">637</span></a><span class="sd">        :param str style:</span>
</span><span id="ExceptionInfo-638"><a href="#ExceptionInfo-638"><span class="linenos">638</span></a><span class="sd">            long|short|line|no|native|value traceback style.</span>
</span><span id="ExceptionInfo-639"><a href="#ExceptionInfo-639"><span class="linenos">639</span></a>
</span><span id="ExceptionInfo-640"><a href="#ExceptionInfo-640"><span class="linenos">640</span></a><span class="sd">        :param bool abspath:</span>
</span><span id="ExceptionInfo-641"><a href="#ExceptionInfo-641"><span class="linenos">641</span></a><span class="sd">            If paths should be changed to absolute or left unchanged.</span>
</span><span id="ExceptionInfo-642"><a href="#ExceptionInfo-642"><span class="linenos">642</span></a>
</span><span id="ExceptionInfo-643"><a href="#ExceptionInfo-643"><span class="linenos">643</span></a><span class="sd">        :param tbfilter:</span>
</span><span id="ExceptionInfo-644"><a href="#ExceptionInfo-644"><span class="linenos">644</span></a><span class="sd">            A filter for traceback entries.</span>
</span><span id="ExceptionInfo-645"><a href="#ExceptionInfo-645"><span class="linenos">645</span></a>
</span><span id="ExceptionInfo-646"><a href="#ExceptionInfo-646"><span class="linenos">646</span></a><span class="sd">            * If false, don&#39;t hide any entries.</span>
</span><span id="ExceptionInfo-647"><a href="#ExceptionInfo-647"><span class="linenos">647</span></a><span class="sd">            * If true, hide internal entries and entries that contain a local</span>
</span><span id="ExceptionInfo-648"><a href="#ExceptionInfo-648"><span class="linenos">648</span></a><span class="sd">              variable ``__tracebackhide__ = True``.</span>
</span><span id="ExceptionInfo-649"><a href="#ExceptionInfo-649"><span class="linenos">649</span></a><span class="sd">            * If a callable, delegates the filtering to the callable.</span>
</span><span id="ExceptionInfo-650"><a href="#ExceptionInfo-650"><span class="linenos">650</span></a>
</span><span id="ExceptionInfo-651"><a href="#ExceptionInfo-651"><span class="linenos">651</span></a><span class="sd">            Ignored if ``style`` is ``&quot;native&quot;``.</span>
</span><span id="ExceptionInfo-652"><a href="#ExceptionInfo-652"><span class="linenos">652</span></a>
</span><span id="ExceptionInfo-653"><a href="#ExceptionInfo-653"><span class="linenos">653</span></a><span class="sd">        :param bool funcargs:</span>
</span><span id="ExceptionInfo-654"><a href="#ExceptionInfo-654"><span class="linenos">654</span></a><span class="sd">            Show fixtures (&quot;funcargs&quot; for legacy purposes) per traceback entry.</span>
</span><span id="ExceptionInfo-655"><a href="#ExceptionInfo-655"><span class="linenos">655</span></a>
</span><span id="ExceptionInfo-656"><a href="#ExceptionInfo-656"><span class="linenos">656</span></a><span class="sd">        :param bool truncate_locals:</span>
</span><span id="ExceptionInfo-657"><a href="#ExceptionInfo-657"><span class="linenos">657</span></a><span class="sd">            With ``showlocals==True``, make sure locals can be safely represented as strings.</span>
</span><span id="ExceptionInfo-658"><a href="#ExceptionInfo-658"><span class="linenos">658</span></a>
</span><span id="ExceptionInfo-659"><a href="#ExceptionInfo-659"><span class="linenos">659</span></a><span class="sd">        :param bool truncate_args:</span>
</span><span id="ExceptionInfo-660"><a href="#ExceptionInfo-660"><span class="linenos">660</span></a><span class="sd">            With ``showargs==True``, make sure args can be safely represented as strings.</span>
</span><span id="ExceptionInfo-661"><a href="#ExceptionInfo-661"><span class="linenos">661</span></a>
</span><span id="ExceptionInfo-662"><a href="#ExceptionInfo-662"><span class="linenos">662</span></a><span class="sd">        :param bool chain:</span>
</span><span id="ExceptionInfo-663"><a href="#ExceptionInfo-663"><span class="linenos">663</span></a><span class="sd">            If chained exceptions in Python 3 should be shown.</span>
</span><span id="ExceptionInfo-664"><a href="#ExceptionInfo-664"><span class="linenos">664</span></a>
</span><span id="ExceptionInfo-665"><a href="#ExceptionInfo-665"><span class="linenos">665</span></a><span class="sd">        .. versionchanged:: 3.9</span>
</span><span id="ExceptionInfo-666"><a href="#ExceptionInfo-666"><span class="linenos">666</span></a>
</span><span id="ExceptionInfo-667"><a href="#ExceptionInfo-667"><span class="linenos">667</span></a><span class="sd">            Added the ``chain`` parameter.</span>
</span><span id="ExceptionInfo-668"><a href="#ExceptionInfo-668"><span class="linenos">668</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-669"><a href="#ExceptionInfo-669"><span class="linenos">669</span></a>        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;native&quot;</span><span class="p">:</span>
</span><span id="ExceptionInfo-670"><a href="#ExceptionInfo-670"><span class="linenos">670</span></a>            <span class="k">return</span> <span class="n">ReprExceptionInfo</span><span class="p">(</span>
</span><span id="ExceptionInfo-671"><a href="#ExceptionInfo-671"><span class="linenos">671</span></a>                <span class="n">reprtraceback</span><span class="o">=</span><span class="n">ReprTracebackNative</span><span class="p">(</span>
</span><span id="ExceptionInfo-672"><a href="#ExceptionInfo-672"><span class="linenos">672</span></a>                    <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception</span><span class="p">(</span>
</span><span id="ExceptionInfo-673"><a href="#ExceptionInfo-673"><span class="linenos">673</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
</span><span id="ExceptionInfo-674"><a href="#ExceptionInfo-674"><span class="linenos">674</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="ExceptionInfo-675"><a href="#ExceptionInfo-675"><span class="linenos">675</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_rawentry</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-676"><a href="#ExceptionInfo-676"><span class="linenos">676</span></a>                    <span class="p">)</span>
</span><span id="ExceptionInfo-677"><a href="#ExceptionInfo-677"><span class="linenos">677</span></a>                <span class="p">),</span>
</span><span id="ExceptionInfo-678"><a href="#ExceptionInfo-678"><span class="linenos">678</span></a>                <span class="n">reprcrash</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getreprcrash</span><span class="p">(),</span>
</span><span id="ExceptionInfo-679"><a href="#ExceptionInfo-679"><span class="linenos">679</span></a>            <span class="p">)</span>
</span><span id="ExceptionInfo-680"><a href="#ExceptionInfo-680"><span class="linenos">680</span></a>
</span><span id="ExceptionInfo-681"><a href="#ExceptionInfo-681"><span class="linenos">681</span></a>        <span class="n">fmt</span> <span class="o">=</span> <span class="n">FormattedExcinfo</span><span class="p">(</span>
</span><span id="ExceptionInfo-682"><a href="#ExceptionInfo-682"><span class="linenos">682</span></a>            <span class="n">showlocals</span><span class="o">=</span><span class="n">showlocals</span><span class="p">,</span>
</span><span id="ExceptionInfo-683"><a href="#ExceptionInfo-683"><span class="linenos">683</span></a>            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
</span><span id="ExceptionInfo-684"><a href="#ExceptionInfo-684"><span class="linenos">684</span></a>            <span class="n">abspath</span><span class="o">=</span><span class="n">abspath</span><span class="p">,</span>
</span><span id="ExceptionInfo-685"><a href="#ExceptionInfo-685"><span class="linenos">685</span></a>            <span class="n">tbfilter</span><span class="o">=</span><span class="n">tbfilter</span><span class="p">,</span>
</span><span id="ExceptionInfo-686"><a href="#ExceptionInfo-686"><span class="linenos">686</span></a>            <span class="n">funcargs</span><span class="o">=</span><span class="n">funcargs</span><span class="p">,</span>
</span><span id="ExceptionInfo-687"><a href="#ExceptionInfo-687"><span class="linenos">687</span></a>            <span class="n">truncate_locals</span><span class="o">=</span><span class="n">truncate_locals</span><span class="p">,</span>
</span><span id="ExceptionInfo-688"><a href="#ExceptionInfo-688"><span class="linenos">688</span></a>            <span class="n">truncate_args</span><span class="o">=</span><span class="n">truncate_args</span><span class="p">,</span>
</span><span id="ExceptionInfo-689"><a href="#ExceptionInfo-689"><span class="linenos">689</span></a>            <span class="n">chain</span><span class="o">=</span><span class="n">chain</span><span class="p">,</span>
</span><span id="ExceptionInfo-690"><a href="#ExceptionInfo-690"><span class="linenos">690</span></a>        <span class="p">)</span>
</span><span id="ExceptionInfo-691"><a href="#ExceptionInfo-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">repr_excinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ExceptionInfo-692"><a href="#ExceptionInfo-692"><span class="linenos">692</span></a>
</span><span id="ExceptionInfo-693"><a href="#ExceptionInfo-693"><span class="linenos">693</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_stringify_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ExceptionInfo-694"><a href="#ExceptionInfo-694"><span class="linenos">694</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExceptionInfo-695"><a href="#ExceptionInfo-695"><span class="linenos">695</span></a>            <span class="n">notes</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="s2">&quot;__notes__&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="ExceptionInfo-696"><a href="#ExceptionInfo-696"><span class="linenos">696</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="ExceptionInfo-697"><a href="#ExceptionInfo-697"><span class="linenos">697</span></a>            <span class="c1"># Workaround for https://github.com/python/cpython/issues/98778 on</span>
</span><span id="ExceptionInfo-698"><a href="#ExceptionInfo-698"><span class="linenos">698</span></a>            <span class="c1"># Python &lt;= 3.9, and some 3.10 and 3.11 patch versions.</span>
</span><span id="ExceptionInfo-699"><a href="#ExceptionInfo-699"><span class="linenos">699</span></a>            <span class="n">HTTPError</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;urllib.error&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;HTTPError&quot;</span><span class="p">,</span> <span class="p">())</span>
</span><span id="ExceptionInfo-700"><a href="#ExceptionInfo-700"><span class="linenos">700</span></a>            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">HTTPError</span><span class="p">):</span>
</span><span id="ExceptionInfo-701"><a href="#ExceptionInfo-701"><span class="linenos">701</span></a>                <span class="n">notes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExceptionInfo-702"><a href="#ExceptionInfo-702"><span class="linenos">702</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ExceptionInfo-703"><a href="#ExceptionInfo-703"><span class="linenos">703</span></a>                <span class="k">raise</span>
</span><span id="ExceptionInfo-704"><a href="#ExceptionInfo-704"><span class="linenos">704</span></a>
</span><span id="ExceptionInfo-705"><a href="#ExceptionInfo-705"><span class="linenos">705</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="ExceptionInfo-706"><a href="#ExceptionInfo-706"><span class="linenos">706</span></a>            <span class="p">[</span>
</span><span id="ExceptionInfo-707"><a href="#ExceptionInfo-707"><span class="linenos">707</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span>
</span><span id="ExceptionInfo-708"><a href="#ExceptionInfo-708"><span class="linenos">708</span></a>                <span class="o">*</span><span class="n">notes</span><span class="p">,</span>
</span><span id="ExceptionInfo-709"><a href="#ExceptionInfo-709"><span class="linenos">709</span></a>            <span class="p">]</span>
</span><span id="ExceptionInfo-710"><a href="#ExceptionInfo-710"><span class="linenos">710</span></a>        <span class="p">)</span>
</span><span id="ExceptionInfo-711"><a href="#ExceptionInfo-711"><span class="linenos">711</span></a>
</span><span id="ExceptionInfo-712"><a href="#ExceptionInfo-712"><span class="linenos">712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">regexp</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">]:</span>
</span><span id="ExceptionInfo-713"><a href="#ExceptionInfo-713"><span class="linenos">713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether the regular expression `regexp` matches the string</span>
</span><span id="ExceptionInfo-714"><a href="#ExceptionInfo-714"><span class="linenos">714</span></a><span class="sd">        representation of the exception using :func:`python:re.search`.</span>
</span><span id="ExceptionInfo-715"><a href="#ExceptionInfo-715"><span class="linenos">715</span></a>
</span><span id="ExceptionInfo-716"><a href="#ExceptionInfo-716"><span class="linenos">716</span></a><span class="sd">        If it matches `True` is returned, otherwise an `AssertionError` is raised.</span>
</span><span id="ExceptionInfo-717"><a href="#ExceptionInfo-717"><span class="linenos">717</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-718"><a href="#ExceptionInfo-718"><span class="linenos">718</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ExceptionInfo-719"><a href="#ExceptionInfo-719"><span class="linenos">719</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_exception</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="ExceptionInfo-720"><a href="#ExceptionInfo-720"><span class="linenos">720</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Regex pattern did not match.</span><span class="se">\n</span><span class="s2"> Regex: </span><span class="si">{</span><span class="n">regexp</span><span class="si">!r}</span><span class="se">\n</span><span class="s2"> Input: </span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="ExceptionInfo-721"><a href="#ExceptionInfo-721"><span class="linenos">721</span></a>        <span class="k">if</span> <span class="n">regexp</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
</span><span id="ExceptionInfo-722"><a href="#ExceptionInfo-722"><span class="linenos">722</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Did you mean to `re.escape()` the regex?&quot;</span>
</span><span id="ExceptionInfo-723"><a href="#ExceptionInfo-723"><span class="linenos">723</span></a>        <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">msg</span>
</span><span id="ExceptionInfo-724"><a href="#ExceptionInfo-724"><span class="linenos">724</span></a>        <span class="c1"># Return True to allow for &quot;assert excinfo.match()&quot;.</span>
</span><span id="ExceptionInfo-725"><a href="#ExceptionInfo-725"><span class="linenos">725</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="ExceptionInfo-726"><a href="#ExceptionInfo-726"><span class="linenos">726</span></a>
</span><span id="ExceptionInfo-727"><a href="#ExceptionInfo-727"><span class="linenos">727</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_group_contains</span><span class="p">(</span>
</span><span id="ExceptionInfo-728"><a href="#ExceptionInfo-728"><span class="linenos">728</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo-729"><a href="#ExceptionInfo-729"><span class="linenos">729</span></a>        <span class="n">exc_group</span><span class="p">:</span> <span class="n">BaseExceptionGroup</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="ExceptionInfo-730"><a href="#ExceptionInfo-730"><span class="linenos">730</span></a>        <span class="n">expected_exception</span><span class="p">:</span> <span class="n">EXCEPTION_OR_MORE</span><span class="p">,</span>
</span><span id="ExceptionInfo-731"><a href="#ExceptionInfo-731"><span class="linenos">731</span></a>        <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-732"><a href="#ExceptionInfo-732"><span class="linenos">732</span></a>        <span class="n">target_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-733"><a href="#ExceptionInfo-733"><span class="linenos">733</span></a>        <span class="n">current_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="ExceptionInfo-734"><a href="#ExceptionInfo-734"><span class="linenos">734</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExceptionInfo-735"><a href="#ExceptionInfo-735"><span class="linenos">735</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return `True` if a `BaseExceptionGroup` contains a matching exception.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-736"><a href="#ExceptionInfo-736"><span class="linenos">736</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">target_depth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">current_depth</span> <span class="o">&gt;</span> <span class="n">target_depth</span><span class="p">):</span>
</span><span id="ExceptionInfo-737"><a href="#ExceptionInfo-737"><span class="linenos">737</span></a>            <span class="c1"># already descended past the target depth</span>
</span><span id="ExceptionInfo-738"><a href="#ExceptionInfo-738"><span class="linenos">738</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="ExceptionInfo-739"><a href="#ExceptionInfo-739"><span class="linenos">739</span></a>        <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">exc_group</span><span class="o">.</span><span class="n">exceptions</span><span class="p">:</span>
</span><span id="ExceptionInfo-740"><a href="#ExceptionInfo-740"><span class="linenos">740</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">BaseExceptionGroup</span><span class="p">):</span>
</span><span id="ExceptionInfo-741"><a href="#ExceptionInfo-741"><span class="linenos">741</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_contains</span><span class="p">(</span>
</span><span id="ExceptionInfo-742"><a href="#ExceptionInfo-742"><span class="linenos">742</span></a>                    <span class="n">exc</span><span class="p">,</span> <span class="n">expected_exception</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="n">target_depth</span><span class="p">,</span> <span class="n">current_depth</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="ExceptionInfo-743"><a href="#ExceptionInfo-743"><span class="linenos">743</span></a>                <span class="p">):</span>
</span><span id="ExceptionInfo-744"><a href="#ExceptionInfo-744"><span class="linenos">744</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ExceptionInfo-745"><a href="#ExceptionInfo-745"><span class="linenos">745</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">target_depth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">current_depth</span> <span class="o">!=</span> <span class="n">target_depth</span><span class="p">):</span>
</span><span id="ExceptionInfo-746"><a href="#ExceptionInfo-746"><span class="linenos">746</span></a>                <span class="c1"># not at the target depth, no match</span>
</span><span id="ExceptionInfo-747"><a href="#ExceptionInfo-747"><span class="linenos">747</span></a>                <span class="k">continue</span>
</span><span id="ExceptionInfo-748"><a href="#ExceptionInfo-748"><span class="linenos">748</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">expected_exception</span><span class="p">):</span>
</span><span id="ExceptionInfo-749"><a href="#ExceptionInfo-749"><span class="linenos">749</span></a>                <span class="k">continue</span>
</span><span id="ExceptionInfo-750"><a href="#ExceptionInfo-750"><span class="linenos">750</span></a>            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo-751"><a href="#ExceptionInfo-751"><span class="linenos">751</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_exception</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
</span><span id="ExceptionInfo-752"><a href="#ExceptionInfo-752"><span class="linenos">752</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">match</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="ExceptionInfo-753"><a href="#ExceptionInfo-753"><span class="linenos">753</span></a>                    <span class="k">continue</span>
</span><span id="ExceptionInfo-754"><a href="#ExceptionInfo-754"><span class="linenos">754</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="ExceptionInfo-755"><a href="#ExceptionInfo-755"><span class="linenos">755</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="ExceptionInfo-756"><a href="#ExceptionInfo-756"><span class="linenos">756</span></a>
</span><span id="ExceptionInfo-757"><a href="#ExceptionInfo-757"><span class="linenos">757</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">group_contains</span><span class="p">(</span>
</span><span id="ExceptionInfo-758"><a href="#ExceptionInfo-758"><span class="linenos">758</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo-759"><a href="#ExceptionInfo-759"><span class="linenos">759</span></a>        <span class="n">expected_exception</span><span class="p">:</span> <span class="n">EXCEPTION_OR_MORE</span><span class="p">,</span>
</span><span id="ExceptionInfo-760"><a href="#ExceptionInfo-760"><span class="linenos">760</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="ExceptionInfo-761"><a href="#ExceptionInfo-761"><span class="linenos">761</span></a>        <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-762"><a href="#ExceptionInfo-762"><span class="linenos">762</span></a>        <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo-763"><a href="#ExceptionInfo-763"><span class="linenos">763</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExceptionInfo-764"><a href="#ExceptionInfo-764"><span class="linenos">764</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether a captured exception group contains a matching exception.</span>
</span><span id="ExceptionInfo-765"><a href="#ExceptionInfo-765"><span class="linenos">765</span></a>
</span><span id="ExceptionInfo-766"><a href="#ExceptionInfo-766"><span class="linenos">766</span></a><span class="sd">        :param Type[BaseException] | Tuple[Type[BaseException]] expected_exception:</span>
</span><span id="ExceptionInfo-767"><a href="#ExceptionInfo-767"><span class="linenos">767</span></a><span class="sd">            The expected exception type, or a tuple if one of multiple possible</span>
</span><span id="ExceptionInfo-768"><a href="#ExceptionInfo-768"><span class="linenos">768</span></a><span class="sd">            exception types are expected.</span>
</span><span id="ExceptionInfo-769"><a href="#ExceptionInfo-769"><span class="linenos">769</span></a>
</span><span id="ExceptionInfo-770"><a href="#ExceptionInfo-770"><span class="linenos">770</span></a><span class="sd">        :param str | Pattern[str] | None match:</span>
</span><span id="ExceptionInfo-771"><a href="#ExceptionInfo-771"><span class="linenos">771</span></a><span class="sd">            If specified, a string containing a regular expression,</span>
</span><span id="ExceptionInfo-772"><a href="#ExceptionInfo-772"><span class="linenos">772</span></a><span class="sd">            or a regular expression object, that is tested against the string</span>
</span><span id="ExceptionInfo-773"><a href="#ExceptionInfo-773"><span class="linenos">773</span></a><span class="sd">            representation of the exception and its `PEP-678 &lt;https://peps.python.org/pep-0678/&gt;` `__notes__`</span>
</span><span id="ExceptionInfo-774"><a href="#ExceptionInfo-774"><span class="linenos">774</span></a><span class="sd">            using :func:`re.search`.</span>
</span><span id="ExceptionInfo-775"><a href="#ExceptionInfo-775"><span class="linenos">775</span></a>
</span><span id="ExceptionInfo-776"><a href="#ExceptionInfo-776"><span class="linenos">776</span></a><span class="sd">            To match a literal string that may contain :ref:`special characters</span>
</span><span id="ExceptionInfo-777"><a href="#ExceptionInfo-777"><span class="linenos">777</span></a><span class="sd">            &lt;re-syntax&gt;`, the pattern can first be escaped with :func:`re.escape`.</span>
</span><span id="ExceptionInfo-778"><a href="#ExceptionInfo-778"><span class="linenos">778</span></a>
</span><span id="ExceptionInfo-779"><a href="#ExceptionInfo-779"><span class="linenos">779</span></a><span class="sd">        :param Optional[int] depth:</span>
</span><span id="ExceptionInfo-780"><a href="#ExceptionInfo-780"><span class="linenos">780</span></a><span class="sd">            If `None`, will search for a matching exception at any nesting depth.</span>
</span><span id="ExceptionInfo-781"><a href="#ExceptionInfo-781"><span class="linenos">781</span></a><span class="sd">            If &gt;= 1, will only match an exception if it&#39;s at the specified depth (depth = 1 being</span>
</span><span id="ExceptionInfo-782"><a href="#ExceptionInfo-782"><span class="linenos">782</span></a><span class="sd">            the exceptions contained within the topmost exception group).</span>
</span><span id="ExceptionInfo-783"><a href="#ExceptionInfo-783"><span class="linenos">783</span></a>
</span><span id="ExceptionInfo-784"><a href="#ExceptionInfo-784"><span class="linenos">784</span></a><span class="sd">        .. versionadded:: 8.0</span>
</span><span id="ExceptionInfo-785"><a href="#ExceptionInfo-785"><span class="linenos">785</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo-786"><a href="#ExceptionInfo-786"><span class="linenos">786</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Captured exception is not an instance of `BaseExceptionGroup`&quot;</span>
</span><span id="ExceptionInfo-787"><a href="#ExceptionInfo-787"><span class="linenos">787</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseExceptionGroup</span><span class="p">),</span> <span class="n">msg</span>
</span><span id="ExceptionInfo-788"><a href="#ExceptionInfo-788"><span class="linenos">788</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;`depth` must be &gt;= 1 if specified&quot;</span>
</span><span id="ExceptionInfo-789"><a href="#ExceptionInfo-789"><span class="linenos">789</span></a>        <span class="k">assert</span> <span class="p">(</span><span class="n">depth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">depth</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">),</span> <span class="n">msg</span>
</span><span id="ExceptionInfo-790"><a href="#ExceptionInfo-790"><span class="linenos">790</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_contains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">expected_exception</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="n">depth</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Wraps sys.exc_info() objects and offers help for navigating the traceback.</p>
</div>


                            <div id="ExceptionInfo.__init__" class="classattr">
                                        <input id="ExceptionInfo.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ExceptionInfo</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">excinfo</span><span class="p">:</span> <span class="s1">&#39;tuple[type[E], E, TracebackType] | None&#39;</span>,</span><span class="param">	<span class="n">striptext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">traceback</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">Traceback</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="ExceptionInfo.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.__init__-447"><a href="#ExceptionInfo.__init__-447"><span class="linenos">447</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ExceptionInfo.__init__-448"><a href="#ExceptionInfo.__init__-448"><span class="linenos">448</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo.__init__-449"><a href="#ExceptionInfo.__init__-449"><span class="linenos">449</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.__init__-450"><a href="#ExceptionInfo.__init__-450"><span class="linenos">450</span></a>        <span class="n">striptext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="ExceptionInfo.__init__-451"><a href="#ExceptionInfo.__init__-451"><span class="linenos">451</span></a>        <span class="n">traceback</span><span class="p">:</span> <span class="n">Traceback</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.__init__-452"><a href="#ExceptionInfo.__init__-452"><span class="linenos">452</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="ExceptionInfo.__init__-453"><a href="#ExceptionInfo.__init__-453"><span class="linenos">453</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo.__init__-454"><a href="#ExceptionInfo.__init__-454"><span class="linenos">454</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo.__init__-455"><a href="#ExceptionInfo.__init__-455"><span class="linenos">455</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="ExceptionInfo.__init__-456"><a href="#ExceptionInfo.__init__-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="o">=</span> <span class="n">excinfo</span>
</span><span id="ExceptionInfo.__init__-457"><a href="#ExceptionInfo.__init__-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_striptext</span> <span class="o">=</span> <span class="n">striptext</span>
</span><span id="ExceptionInfo.__init__-458"><a href="#ExceptionInfo.__init__-458"><span class="linenos">458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="o">=</span> <span class="n">traceback</span>
</span></pre></div>


    

                            </div>
                            <div id="ExceptionInfo.from_exception" class="classattr">
                                        <input id="ExceptionInfo.from_exception-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_exception</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">exception</span><span class="p">:</span> <span class="o">+</span><span class="n">E</span>,</span><span class="param">	<span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="o">+</span><span class="n">E</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.from_exception-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.from_exception"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.from_exception-460"><a href="#ExceptionInfo.from_exception-460"><span class="linenos">460</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo.from_exception-461"><a href="#ExceptionInfo.from_exception-461"><span class="linenos">461</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_exception</span><span class="p">(</span>
</span><span id="ExceptionInfo.from_exception-462"><a href="#ExceptionInfo.from_exception-462"><span class="linenos">462</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="ExceptionInfo.from_exception-463"><a href="#ExceptionInfo.from_exception-463"><span class="linenos">463</span></a>        <span class="c1"># Ignoring error: &quot;Cannot use a covariant type variable as a parameter&quot;.</span>
</span><span id="ExceptionInfo.from_exception-464"><a href="#ExceptionInfo.from_exception-464"><span class="linenos">464</span></a>        <span class="c1"># This is OK to ignore because this class is (conceptually) readonly.</span>
</span><span id="ExceptionInfo.from_exception-465"><a href="#ExceptionInfo.from_exception-465"><span class="linenos">465</span></a>        <span class="c1"># See https://github.com/python/mypy/issues/7049.</span>
</span><span id="ExceptionInfo.from_exception-466"><a href="#ExceptionInfo.from_exception-466"><span class="linenos">466</span></a>        <span class="n">exception</span><span class="p">:</span> <span class="n">E</span><span class="p">,</span>  <span class="c1"># type: ignore[misc]</span>
</span><span id="ExceptionInfo.from_exception-467"><a href="#ExceptionInfo.from_exception-467"><span class="linenos">467</span></a>        <span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.from_exception-468"><a href="#ExceptionInfo.from_exception-468"><span class="linenos">468</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo.from_exception-469"><a href="#ExceptionInfo.from_exception-469"><span class="linenos">469</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an ExceptionInfo for an existing exception.</span>
</span><span id="ExceptionInfo.from_exception-470"><a href="#ExceptionInfo.from_exception-470"><span class="linenos">470</span></a>
</span><span id="ExceptionInfo.from_exception-471"><a href="#ExceptionInfo.from_exception-471"><span class="linenos">471</span></a><span class="sd">        The exception must have a non-``None`` ``__traceback__`` attribute,</span>
</span><span id="ExceptionInfo.from_exception-472"><a href="#ExceptionInfo.from_exception-472"><span class="linenos">472</span></a><span class="sd">        otherwise this function fails with an assertion error. This means that</span>
</span><span id="ExceptionInfo.from_exception-473"><a href="#ExceptionInfo.from_exception-473"><span class="linenos">473</span></a><span class="sd">        the exception must have been raised, or added a traceback with the</span>
</span><span id="ExceptionInfo.from_exception-474"><a href="#ExceptionInfo.from_exception-474"><span class="linenos">474</span></a><span class="sd">        :py:meth:`~BaseException.with_traceback()` method.</span>
</span><span id="ExceptionInfo.from_exception-475"><a href="#ExceptionInfo.from_exception-475"><span class="linenos">475</span></a>
</span><span id="ExceptionInfo.from_exception-476"><a href="#ExceptionInfo.from_exception-476"><span class="linenos">476</span></a><span class="sd">        :param exprinfo:</span>
</span><span id="ExceptionInfo.from_exception-477"><a href="#ExceptionInfo.from_exception-477"><span class="linenos">477</span></a><span class="sd">            A text string helping to determine if we should strip</span>
</span><span id="ExceptionInfo.from_exception-478"><a href="#ExceptionInfo.from_exception-478"><span class="linenos">478</span></a><span class="sd">            ``AssertionError`` from the output. Defaults to the exception</span>
</span><span id="ExceptionInfo.from_exception-479"><a href="#ExceptionInfo.from_exception-479"><span class="linenos">479</span></a><span class="sd">            message/``__str__()``.</span>
</span><span id="ExceptionInfo.from_exception-480"><a href="#ExceptionInfo.from_exception-480"><span class="linenos">480</span></a>
</span><span id="ExceptionInfo.from_exception-481"><a href="#ExceptionInfo.from_exception-481"><span class="linenos">481</span></a><span class="sd">        .. versionadded:: 7.4</span>
</span><span id="ExceptionInfo.from_exception-482"><a href="#ExceptionInfo.from_exception-482"><span class="linenos">482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.from_exception-483"><a href="#ExceptionInfo.from_exception-483"><span class="linenos">483</span></a>        <span class="k">assert</span> <span class="n">exception</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">,</span> <span class="p">(</span>
</span><span id="ExceptionInfo.from_exception-484"><a href="#ExceptionInfo.from_exception-484"><span class="linenos">484</span></a>            <span class="s2">&quot;Exceptions passed to ExcInfo.from_exception(...)&quot;</span>
</span><span id="ExceptionInfo.from_exception-485"><a href="#ExceptionInfo.from_exception-485"><span class="linenos">485</span></a>            <span class="s2">&quot; must have a non-None __traceback__.&quot;</span>
</span><span id="ExceptionInfo.from_exception-486"><a href="#ExceptionInfo.from_exception-486"><span class="linenos">486</span></a>        <span class="p">)</span>
</span><span id="ExceptionInfo.from_exception-487"><a href="#ExceptionInfo.from_exception-487"><span class="linenos">487</span></a>        <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">exception</span><span class="p">),</span> <span class="n">exception</span><span class="p">,</span> <span class="n">exception</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">)</span>
</span><span id="ExceptionInfo.from_exception-488"><a href="#ExceptionInfo.from_exception-488"><span class="linenos">488</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_exc_info</span><span class="p">(</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">exprinfo</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return an ExceptionInfo for an existing exception.</p>

<p>The exception must have a non-<code>None</code> <code>__traceback__</code> attribute,
otherwise this function fails with an assertion error. This means that
the exception must have been raised, or added a traceback with the
<code>~BaseException.with_traceback()()</code> method.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>exprinfo</strong>: 
A text string helping to determine if we should strip
<code>AssertionError</code> from the output. Defaults to the exception
message/<code>__str__()</code>.</li>
</ul>

<p><em>New in version 7.4.</em></p>
</div>


                            </div>
                            <div id="ExceptionInfo.from_exc_info" class="classattr">
                                        <input id="ExceptionInfo.from_exc_info-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_exc_info</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">exc_info</span><span class="p">:</span> <span class="s1">&#39;tuple[type[E], E, TracebackType]&#39;</span>,</span><span class="param">	<span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="o">+</span><span class="n">E</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.from_exc_info-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.from_exc_info"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.from_exc_info-490"><a href="#ExceptionInfo.from_exc_info-490"><span class="linenos">490</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo.from_exc_info-491"><a href="#ExceptionInfo.from_exc_info-491"><span class="linenos">491</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_exc_info</span><span class="p">(</span>
</span><span id="ExceptionInfo.from_exc_info-492"><a href="#ExceptionInfo.from_exc_info-492"><span class="linenos">492</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="ExceptionInfo.from_exc_info-493"><a href="#ExceptionInfo.from_exc_info-493"><span class="linenos">493</span></a>        <span class="n">exc_info</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">],</span>
</span><span id="ExceptionInfo.from_exc_info-494"><a href="#ExceptionInfo.from_exc_info-494"><span class="linenos">494</span></a>        <span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.from_exc_info-495"><a href="#ExceptionInfo.from_exc_info-495"><span class="linenos">495</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo.from_exc_info-496"><a href="#ExceptionInfo.from_exc_info-496"><span class="linenos">496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Like :func:`from_exception`, but using old-style exc_info tuple.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.from_exc_info-497"><a href="#ExceptionInfo.from_exc_info-497"><span class="linenos">497</span></a>        <span class="n">_striptext</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ExceptionInfo.from_exc_info-498"><a href="#ExceptionInfo.from_exc_info-498"><span class="linenos">498</span></a>        <span class="k">if</span> <span class="n">exprinfo</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="ne">AssertionError</span><span class="p">):</span>
</span><span id="ExceptionInfo.from_exc_info-499"><a href="#ExceptionInfo.from_exc_info-499"><span class="linenos">499</span></a>            <span class="n">exprinfo</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;msg&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ExceptionInfo.from_exc_info-500"><a href="#ExceptionInfo.from_exc_info-500"><span class="linenos">500</span></a>            <span class="k">if</span> <span class="n">exprinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo.from_exc_info-501"><a href="#ExceptionInfo.from_exc_info-501"><span class="linenos">501</span></a>                <span class="n">exprinfo</span> <span class="o">=</span> <span class="n">saferepr</span><span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ExceptionInfo.from_exc_info-502"><a href="#ExceptionInfo.from_exc_info-502"><span class="linenos">502</span></a>            <span class="k">if</span> <span class="n">exprinfo</span> <span class="ow">and</span> <span class="n">exprinfo</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_assert_start_repr</span><span class="p">):</span>
</span><span id="ExceptionInfo.from_exc_info-503"><a href="#ExceptionInfo.from_exc_info-503"><span class="linenos">503</span></a>                <span class="n">_striptext</span> <span class="o">=</span> <span class="s2">&quot;AssertionError: &quot;</span>
</span><span id="ExceptionInfo.from_exc_info-504"><a href="#ExceptionInfo.from_exc_info-504"><span class="linenos">504</span></a>
</span><span id="ExceptionInfo.from_exc_info-505"><a href="#ExceptionInfo.from_exc_info-505"><span class="linenos">505</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">_striptext</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Like <code><a href="#ExceptionInfo.from_exception">from_exception()</a></code>, but using old-style exc_info tuple.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.from_current" class="classattr">
                                        <input id="ExceptionInfo.from_current-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_current</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.from_current-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.from_current"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.from_current-507"><a href="#ExceptionInfo.from_current-507"><span class="linenos">507</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo.from_current-508"><a href="#ExceptionInfo.from_current-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_current</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">exprinfo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]:</span>
</span><span id="ExceptionInfo.from_current-509"><a href="#ExceptionInfo.from_current-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an ExceptionInfo matching the current traceback.</span>
</span><span id="ExceptionInfo.from_current-510"><a href="#ExceptionInfo.from_current-510"><span class="linenos">510</span></a>
</span><span id="ExceptionInfo.from_current-511"><a href="#ExceptionInfo.from_current-511"><span class="linenos">511</span></a><span class="sd">        .. warning::</span>
</span><span id="ExceptionInfo.from_current-512"><a href="#ExceptionInfo.from_current-512"><span class="linenos">512</span></a>
</span><span id="ExceptionInfo.from_current-513"><a href="#ExceptionInfo.from_current-513"><span class="linenos">513</span></a><span class="sd">            Experimental API</span>
</span><span id="ExceptionInfo.from_current-514"><a href="#ExceptionInfo.from_current-514"><span class="linenos">514</span></a>
</span><span id="ExceptionInfo.from_current-515"><a href="#ExceptionInfo.from_current-515"><span class="linenos">515</span></a><span class="sd">        :param exprinfo:</span>
</span><span id="ExceptionInfo.from_current-516"><a href="#ExceptionInfo.from_current-516"><span class="linenos">516</span></a><span class="sd">            A text string helping to determine if we should strip</span>
</span><span id="ExceptionInfo.from_current-517"><a href="#ExceptionInfo.from_current-517"><span class="linenos">517</span></a><span class="sd">            ``AssertionError`` from the output. Defaults to the exception</span>
</span><span id="ExceptionInfo.from_current-518"><a href="#ExceptionInfo.from_current-518"><span class="linenos">518</span></a><span class="sd">            message/``__str__()``.</span>
</span><span id="ExceptionInfo.from_current-519"><a href="#ExceptionInfo.from_current-519"><span class="linenos">519</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.from_current-520"><a href="#ExceptionInfo.from_current-520"><span class="linenos">520</span></a>        <span class="n">tup</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
</span><span id="ExceptionInfo.from_current-521"><a href="#ExceptionInfo.from_current-521"><span class="linenos">521</span></a>        <span class="k">assert</span> <span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;no current exception&quot;</span>
</span><span id="ExceptionInfo.from_current-522"><a href="#ExceptionInfo.from_current-522"><span class="linenos">522</span></a>        <span class="k">assert</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;no current exception&quot;</span>
</span><span id="ExceptionInfo.from_current-523"><a href="#ExceptionInfo.from_current-523"><span class="linenos">523</span></a>        <span class="k">assert</span> <span class="n">tup</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;no current exception&quot;</span>
</span><span id="ExceptionInfo.from_current-524"><a href="#ExceptionInfo.from_current-524"><span class="linenos">524</span></a>        <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tup</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="ExceptionInfo.from_current-525"><a href="#ExceptionInfo.from_current-525"><span class="linenos">525</span></a>        <span class="k">return</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exc_info</span><span class="p">(</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">exprinfo</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return an ExceptionInfo matching the current traceback.</p>

<div class="alert warning">

<p>Experimental API</p>

</div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>exprinfo</strong>: 
A text string helping to determine if we should strip
<code>AssertionError</code> from the output. Defaults to the exception
message/<code>__str__()</code>.</li>
</ul>
</div>


                            </div>
                            <div id="ExceptionInfo.for_later" class="classattr">
                                        <input id="ExceptionInfo.for_later-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">for_later</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="o">+</span><span class="n">E</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.for_later-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.for_later"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.for_later-527"><a href="#ExceptionInfo.for_later-527"><span class="linenos">527</span></a>    <span class="nd">@classmethod</span>
</span><span id="ExceptionInfo.for_later-528"><a href="#ExceptionInfo.for_later-528"><span class="linenos">528</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">for_later</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo.for_later-529"><a href="#ExceptionInfo.for_later-529"><span class="linenos">529</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an unfilled ExceptionInfo.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.for_later-530"><a href="#ExceptionInfo.for_later-530"><span class="linenos">530</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return an unfilled ExceptionInfo.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.fill_unfilled" class="classattr">
                                        <input id="ExceptionInfo.fill_unfilled-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fill_unfilled</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">exc_info</span><span class="p">:</span> <span class="s1">&#39;tuple[type[E], E, TracebackType]&#39;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.fill_unfilled-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.fill_unfilled"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.fill_unfilled-532"><a href="#ExceptionInfo.fill_unfilled-532"><span class="linenos">532</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fill_unfilled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">TracebackType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo.fill_unfilled-533"><a href="#ExceptionInfo.fill_unfilled-533"><span class="linenos">533</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill an unfilled ExceptionInfo created with ``for_later()``.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.fill_unfilled-534"><a href="#ExceptionInfo.fill_unfilled-534"><span class="linenos">534</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;ExceptionInfo was already filled&quot;</span>
</span><span id="ExceptionInfo.fill_unfilled-535"><a href="#ExceptionInfo.fill_unfilled-535"><span class="linenos">535</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="o">=</span> <span class="n">exc_info</span>
</span></pre></div>


            <div class="docstring"><p>Fill an unfilled ExceptionInfo created with <code><a href="#ExceptionInfo.for_later">for_later()</a></code>.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.type" class="classattr">
                                        <input id="ExceptionInfo.type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">type</span><span class="annotation">: &#39;type[E]&#39;</span>

                <label class="view-source-button" for="ExceptionInfo.type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.type-537"><a href="#ExceptionInfo.type-537"><span class="linenos">537</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo.type-538"><a href="#ExceptionInfo.type-538"><span class="linenos">538</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="ExceptionInfo.type-539"><a href="#ExceptionInfo.type-539"><span class="linenos">539</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The exception class.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.type-540"><a href="#ExceptionInfo.type-540"><span class="linenos">540</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo.type-541"><a href="#ExceptionInfo.type-541"><span class="linenos">541</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo.type-542"><a href="#ExceptionInfo.type-542"><span class="linenos">542</span></a>        <span class="p">),</span> <span class="s2">&quot;.type can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo.type-543"><a href="#ExceptionInfo.type-543"><span class="linenos">543</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The exception class.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.value" class="classattr">
                                        <input id="ExceptionInfo.value-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">value</span><span class="annotation">: +E</span>

                <label class="view-source-button" for="ExceptionInfo.value-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.value"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.value-545"><a href="#ExceptionInfo.value-545"><span class="linenos">545</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo.value-546"><a href="#ExceptionInfo.value-546"><span class="linenos">546</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">E</span><span class="p">:</span>
</span><span id="ExceptionInfo.value-547"><a href="#ExceptionInfo.value-547"><span class="linenos">547</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The exception value.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.value-548"><a href="#ExceptionInfo.value-548"><span class="linenos">548</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo.value-549"><a href="#ExceptionInfo.value-549"><span class="linenos">549</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo.value-550"><a href="#ExceptionInfo.value-550"><span class="linenos">550</span></a>        <span class="p">),</span> <span class="s2">&quot;.value can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo.value-551"><a href="#ExceptionInfo.value-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The exception value.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.tb" class="classattr">
                                        <input id="ExceptionInfo.tb-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tb</span><span class="annotation">: traceback</span>

                <label class="view-source-button" for="ExceptionInfo.tb-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.tb"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.tb-553"><a href="#ExceptionInfo.tb-553"><span class="linenos">553</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo.tb-554"><a href="#ExceptionInfo.tb-554"><span class="linenos">554</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tb</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TracebackType</span><span class="p">:</span>
</span><span id="ExceptionInfo.tb-555"><a href="#ExceptionInfo.tb-555"><span class="linenos">555</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The exception raw traceback.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.tb-556"><a href="#ExceptionInfo.tb-556"><span class="linenos">556</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo.tb-557"><a href="#ExceptionInfo.tb-557"><span class="linenos">557</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo.tb-558"><a href="#ExceptionInfo.tb-558"><span class="linenos">558</span></a>        <span class="p">),</span> <span class="s2">&quot;.tb can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo.tb-559"><a href="#ExceptionInfo.tb-559"><span class="linenos">559</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The exception raw traceback.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.typename" class="classattr">
                                        <input id="ExceptionInfo.typename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">typename</span><span class="annotation">: str</span>

                <label class="view-source-button" for="ExceptionInfo.typename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.typename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.typename-561"><a href="#ExceptionInfo.typename-561"><span class="linenos">561</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo.typename-562"><a href="#ExceptionInfo.typename-562"><span class="linenos">562</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">typename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ExceptionInfo.typename-563"><a href="#ExceptionInfo.typename-563"><span class="linenos">563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The type name of the exception.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.typename-564"><a href="#ExceptionInfo.typename-564"><span class="linenos">564</span></a>        <span class="k">assert</span> <span class="p">(</span>
</span><span id="ExceptionInfo.typename-565"><a href="#ExceptionInfo.typename-565"><span class="linenos">565</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ExceptionInfo.typename-566"><a href="#ExceptionInfo.typename-566"><span class="linenos">566</span></a>        <span class="p">),</span> <span class="s2">&quot;.typename can only be used after the context manager exits&quot;</span>
</span><span id="ExceptionInfo.typename-567"><a href="#ExceptionInfo.typename-567"><span class="linenos">567</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="vm">__name__</span>
</span></pre></div>


            <div class="docstring"><p>The type name of the exception.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.traceback" class="classattr">
                                        <input id="ExceptionInfo.traceback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">traceback</span><span class="annotation">: _pytest._code.code.Traceback</span>

                <label class="view-source-button" for="ExceptionInfo.traceback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.traceback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.traceback-569"><a href="#ExceptionInfo.traceback-569"><span class="linenos">569</span></a>    <span class="nd">@property</span>
</span><span id="ExceptionInfo.traceback-570"><a href="#ExceptionInfo.traceback-570"><span class="linenos">570</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">traceback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Traceback</span><span class="p">:</span>
</span><span id="ExceptionInfo.traceback-571"><a href="#ExceptionInfo.traceback-571"><span class="linenos">571</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The traceback.&quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.traceback-572"><a href="#ExceptionInfo.traceback-572"><span class="linenos">572</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExceptionInfo.traceback-573"><a href="#ExceptionInfo.traceback-573"><span class="linenos">573</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span> <span class="o">=</span> <span class="n">Traceback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="p">)</span>
</span><span id="ExceptionInfo.traceback-574"><a href="#ExceptionInfo.traceback-574"><span class="linenos">574</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traceback</span>
</span></pre></div>


            <div class="docstring"><p>The traceback.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.exconly" class="classattr">
                                        <input id="ExceptionInfo.exconly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">exconly</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">tryshort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.exconly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.exconly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.exconly-585"><a href="#ExceptionInfo.exconly-585"><span class="linenos">585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">exconly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tryshort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ExceptionInfo.exconly-586"><a href="#ExceptionInfo.exconly-586"><span class="linenos">586</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the exception as a string.</span>
</span><span id="ExceptionInfo.exconly-587"><a href="#ExceptionInfo.exconly-587"><span class="linenos">587</span></a>
</span><span id="ExceptionInfo.exconly-588"><a href="#ExceptionInfo.exconly-588"><span class="linenos">588</span></a><span class="sd">        When &#39;tryshort&#39; resolves to True, and the exception is an</span>
</span><span id="ExceptionInfo.exconly-589"><a href="#ExceptionInfo.exconly-589"><span class="linenos">589</span></a><span class="sd">        AssertionError, only the actual exception part of the exception</span>
</span><span id="ExceptionInfo.exconly-590"><a href="#ExceptionInfo.exconly-590"><span class="linenos">590</span></a><span class="sd">        representation is returned (so &#39;AssertionError: &#39; is removed from</span>
</span><span id="ExceptionInfo.exconly-591"><a href="#ExceptionInfo.exconly-591"><span class="linenos">591</span></a><span class="sd">        the beginning).</span>
</span><span id="ExceptionInfo.exconly-592"><a href="#ExceptionInfo.exconly-592"><span class="linenos">592</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.exconly-593"><a href="#ExceptionInfo.exconly-593"><span class="linenos">593</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="n">format_exception_only</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="ExceptionInfo.exconly-594"><a href="#ExceptionInfo.exconly-594"><span class="linenos">594</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="ExceptionInfo.exconly-595"><a href="#ExceptionInfo.exconly-595"><span class="linenos">595</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</span><span id="ExceptionInfo.exconly-596"><a href="#ExceptionInfo.exconly-596"><span class="linenos">596</span></a>        <span class="k">if</span> <span class="n">tryshort</span><span class="p">:</span>
</span><span id="ExceptionInfo.exconly-597"><a href="#ExceptionInfo.exconly-597"><span class="linenos">597</span></a>            <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_striptext</span><span class="p">):</span>
</span><span id="ExceptionInfo.exconly-598"><a href="#ExceptionInfo.exconly-598"><span class="linenos">598</span></a>                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_striptext</span><span class="p">)</span> <span class="p">:]</span>
</span><span id="ExceptionInfo.exconly-599"><a href="#ExceptionInfo.exconly-599"><span class="linenos">599</span></a>        <span class="k">return</span> <span class="n">text</span>
</span></pre></div>


            <div class="docstring"><p>Return the exception as a string.</p>

<p>When 'tryshort' resolves to True, and the exception is an
AssertionError, only the actual exception part of the exception
representation is returned (so 'AssertionError: ' is removed from
the beginning).</p>
</div>


                            </div>
                            <div id="ExceptionInfo.errisinstance" class="classattr">
                                        <input id="ExceptionInfo.errisinstance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">errisinstance</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">exc</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="o">...</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.errisinstance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.errisinstance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.errisinstance-601"><a href="#ExceptionInfo.errisinstance-601"><span class="linenos">601</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">errisinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="n">EXCEPTION_OR_MORE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExceptionInfo.errisinstance-602"><a href="#ExceptionInfo.errisinstance-602"><span class="linenos">602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if the exception is an instance of exc.</span>
</span><span id="ExceptionInfo.errisinstance-603"><a href="#ExceptionInfo.errisinstance-603"><span class="linenos">603</span></a>
</span><span id="ExceptionInfo.errisinstance-604"><a href="#ExceptionInfo.errisinstance-604"><span class="linenos">604</span></a><span class="sd">        Consider using ``isinstance(excinfo.value, exc)`` instead.</span>
</span><span id="ExceptionInfo.errisinstance-605"><a href="#ExceptionInfo.errisinstance-605"><span class="linenos">605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.errisinstance-606"><a href="#ExceptionInfo.errisinstance-606"><span class="linenos">606</span></a>        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return True if the exception is an instance of exc.</p>

<p>Consider using <code>isinstance(excinfo.value, exc)</code> instead.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.getrepr" class="classattr">
                                        <input id="ExceptionInfo.getrepr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getrepr</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">showlocals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">style</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;native&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;long&#39;</span>,</span><span class="param">	<span class="n">abspath</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">tbfilter</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">Traceback</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">funcargs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">truncate_locals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">truncate_args</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">chain</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ReprExceptionInfo</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionChainRepr</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.getrepr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.getrepr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.getrepr-619"><a href="#ExceptionInfo.getrepr-619"><span class="linenos">619</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getrepr</span><span class="p">(</span>
</span><span id="ExceptionInfo.getrepr-620"><a href="#ExceptionInfo.getrepr-620"><span class="linenos">620</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-621"><a href="#ExceptionInfo.getrepr-621"><span class="linenos">621</span></a>        <span class="n">showlocals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-622"><a href="#ExceptionInfo.getrepr-622"><span class="linenos">622</span></a>        <span class="n">style</span><span class="p">:</span> <span class="n">TracebackStyle</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-623"><a href="#ExceptionInfo.getrepr-623"><span class="linenos">623</span></a>        <span class="n">abspath</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-624"><a href="#ExceptionInfo.getrepr-624"><span class="linenos">624</span></a>        <span class="n">tbfilter</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="ExceptionInfo.getrepr-625"><a href="#ExceptionInfo.getrepr-625"><span class="linenos">625</span></a>        <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">Traceback</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-626"><a href="#ExceptionInfo.getrepr-626"><span class="linenos">626</span></a>        <span class="n">funcargs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-627"><a href="#ExceptionInfo.getrepr-627"><span class="linenos">627</span></a>        <span class="n">truncate_locals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-628"><a href="#ExceptionInfo.getrepr-628"><span class="linenos">628</span></a>        <span class="n">truncate_args</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-629"><a href="#ExceptionInfo.getrepr-629"><span class="linenos">629</span></a>        <span class="n">chain</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-630"><a href="#ExceptionInfo.getrepr-630"><span class="linenos">630</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReprExceptionInfo</span> <span class="o">|</span> <span class="n">ExceptionChainRepr</span><span class="p">:</span>
</span><span id="ExceptionInfo.getrepr-631"><a href="#ExceptionInfo.getrepr-631"><span class="linenos">631</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return str()able representation of this exception info.</span>
</span><span id="ExceptionInfo.getrepr-632"><a href="#ExceptionInfo.getrepr-632"><span class="linenos">632</span></a>
</span><span id="ExceptionInfo.getrepr-633"><a href="#ExceptionInfo.getrepr-633"><span class="linenos">633</span></a><span class="sd">        :param bool showlocals:</span>
</span><span id="ExceptionInfo.getrepr-634"><a href="#ExceptionInfo.getrepr-634"><span class="linenos">634</span></a><span class="sd">            Show locals per traceback entry.</span>
</span><span id="ExceptionInfo.getrepr-635"><a href="#ExceptionInfo.getrepr-635"><span class="linenos">635</span></a><span class="sd">            Ignored if ``style==&quot;native&quot;``.</span>
</span><span id="ExceptionInfo.getrepr-636"><a href="#ExceptionInfo.getrepr-636"><span class="linenos">636</span></a>
</span><span id="ExceptionInfo.getrepr-637"><a href="#ExceptionInfo.getrepr-637"><span class="linenos">637</span></a><span class="sd">        :param str style:</span>
</span><span id="ExceptionInfo.getrepr-638"><a href="#ExceptionInfo.getrepr-638"><span class="linenos">638</span></a><span class="sd">            long|short|line|no|native|value traceback style.</span>
</span><span id="ExceptionInfo.getrepr-639"><a href="#ExceptionInfo.getrepr-639"><span class="linenos">639</span></a>
</span><span id="ExceptionInfo.getrepr-640"><a href="#ExceptionInfo.getrepr-640"><span class="linenos">640</span></a><span class="sd">        :param bool abspath:</span>
</span><span id="ExceptionInfo.getrepr-641"><a href="#ExceptionInfo.getrepr-641"><span class="linenos">641</span></a><span class="sd">            If paths should be changed to absolute or left unchanged.</span>
</span><span id="ExceptionInfo.getrepr-642"><a href="#ExceptionInfo.getrepr-642"><span class="linenos">642</span></a>
</span><span id="ExceptionInfo.getrepr-643"><a href="#ExceptionInfo.getrepr-643"><span class="linenos">643</span></a><span class="sd">        :param tbfilter:</span>
</span><span id="ExceptionInfo.getrepr-644"><a href="#ExceptionInfo.getrepr-644"><span class="linenos">644</span></a><span class="sd">            A filter for traceback entries.</span>
</span><span id="ExceptionInfo.getrepr-645"><a href="#ExceptionInfo.getrepr-645"><span class="linenos">645</span></a>
</span><span id="ExceptionInfo.getrepr-646"><a href="#ExceptionInfo.getrepr-646"><span class="linenos">646</span></a><span class="sd">            * If false, don&#39;t hide any entries.</span>
</span><span id="ExceptionInfo.getrepr-647"><a href="#ExceptionInfo.getrepr-647"><span class="linenos">647</span></a><span class="sd">            * If true, hide internal entries and entries that contain a local</span>
</span><span id="ExceptionInfo.getrepr-648"><a href="#ExceptionInfo.getrepr-648"><span class="linenos">648</span></a><span class="sd">              variable ``__tracebackhide__ = True``.</span>
</span><span id="ExceptionInfo.getrepr-649"><a href="#ExceptionInfo.getrepr-649"><span class="linenos">649</span></a><span class="sd">            * If a callable, delegates the filtering to the callable.</span>
</span><span id="ExceptionInfo.getrepr-650"><a href="#ExceptionInfo.getrepr-650"><span class="linenos">650</span></a>
</span><span id="ExceptionInfo.getrepr-651"><a href="#ExceptionInfo.getrepr-651"><span class="linenos">651</span></a><span class="sd">            Ignored if ``style`` is ``&quot;native&quot;``.</span>
</span><span id="ExceptionInfo.getrepr-652"><a href="#ExceptionInfo.getrepr-652"><span class="linenos">652</span></a>
</span><span id="ExceptionInfo.getrepr-653"><a href="#ExceptionInfo.getrepr-653"><span class="linenos">653</span></a><span class="sd">        :param bool funcargs:</span>
</span><span id="ExceptionInfo.getrepr-654"><a href="#ExceptionInfo.getrepr-654"><span class="linenos">654</span></a><span class="sd">            Show fixtures (&quot;funcargs&quot; for legacy purposes) per traceback entry.</span>
</span><span id="ExceptionInfo.getrepr-655"><a href="#ExceptionInfo.getrepr-655"><span class="linenos">655</span></a>
</span><span id="ExceptionInfo.getrepr-656"><a href="#ExceptionInfo.getrepr-656"><span class="linenos">656</span></a><span class="sd">        :param bool truncate_locals:</span>
</span><span id="ExceptionInfo.getrepr-657"><a href="#ExceptionInfo.getrepr-657"><span class="linenos">657</span></a><span class="sd">            With ``showlocals==True``, make sure locals can be safely represented as strings.</span>
</span><span id="ExceptionInfo.getrepr-658"><a href="#ExceptionInfo.getrepr-658"><span class="linenos">658</span></a>
</span><span id="ExceptionInfo.getrepr-659"><a href="#ExceptionInfo.getrepr-659"><span class="linenos">659</span></a><span class="sd">        :param bool truncate_args:</span>
</span><span id="ExceptionInfo.getrepr-660"><a href="#ExceptionInfo.getrepr-660"><span class="linenos">660</span></a><span class="sd">            With ``showargs==True``, make sure args can be safely represented as strings.</span>
</span><span id="ExceptionInfo.getrepr-661"><a href="#ExceptionInfo.getrepr-661"><span class="linenos">661</span></a>
</span><span id="ExceptionInfo.getrepr-662"><a href="#ExceptionInfo.getrepr-662"><span class="linenos">662</span></a><span class="sd">        :param bool chain:</span>
</span><span id="ExceptionInfo.getrepr-663"><a href="#ExceptionInfo.getrepr-663"><span class="linenos">663</span></a><span class="sd">            If chained exceptions in Python 3 should be shown.</span>
</span><span id="ExceptionInfo.getrepr-664"><a href="#ExceptionInfo.getrepr-664"><span class="linenos">664</span></a>
</span><span id="ExceptionInfo.getrepr-665"><a href="#ExceptionInfo.getrepr-665"><span class="linenos">665</span></a><span class="sd">        .. versionchanged:: 3.9</span>
</span><span id="ExceptionInfo.getrepr-666"><a href="#ExceptionInfo.getrepr-666"><span class="linenos">666</span></a>
</span><span id="ExceptionInfo.getrepr-667"><a href="#ExceptionInfo.getrepr-667"><span class="linenos">667</span></a><span class="sd">            Added the ``chain`` parameter.</span>
</span><span id="ExceptionInfo.getrepr-668"><a href="#ExceptionInfo.getrepr-668"><span class="linenos">668</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.getrepr-669"><a href="#ExceptionInfo.getrepr-669"><span class="linenos">669</span></a>        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;native&quot;</span><span class="p">:</span>
</span><span id="ExceptionInfo.getrepr-670"><a href="#ExceptionInfo.getrepr-670"><span class="linenos">670</span></a>            <span class="k">return</span> <span class="n">ReprExceptionInfo</span><span class="p">(</span>
</span><span id="ExceptionInfo.getrepr-671"><a href="#ExceptionInfo.getrepr-671"><span class="linenos">671</span></a>                <span class="n">reprtraceback</span><span class="o">=</span><span class="n">ReprTracebackNative</span><span class="p">(</span>
</span><span id="ExceptionInfo.getrepr-672"><a href="#ExceptionInfo.getrepr-672"><span class="linenos">672</span></a>                    <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception</span><span class="p">(</span>
</span><span id="ExceptionInfo.getrepr-673"><a href="#ExceptionInfo.getrepr-673"><span class="linenos">673</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-674"><a href="#ExceptionInfo.getrepr-674"><span class="linenos">674</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-675"><a href="#ExceptionInfo.getrepr-675"><span class="linenos">675</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_rawentry</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-676"><a href="#ExceptionInfo.getrepr-676"><span class="linenos">676</span></a>                    <span class="p">)</span>
</span><span id="ExceptionInfo.getrepr-677"><a href="#ExceptionInfo.getrepr-677"><span class="linenos">677</span></a>                <span class="p">),</span>
</span><span id="ExceptionInfo.getrepr-678"><a href="#ExceptionInfo.getrepr-678"><span class="linenos">678</span></a>                <span class="n">reprcrash</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getreprcrash</span><span class="p">(),</span>
</span><span id="ExceptionInfo.getrepr-679"><a href="#ExceptionInfo.getrepr-679"><span class="linenos">679</span></a>            <span class="p">)</span>
</span><span id="ExceptionInfo.getrepr-680"><a href="#ExceptionInfo.getrepr-680"><span class="linenos">680</span></a>
</span><span id="ExceptionInfo.getrepr-681"><a href="#ExceptionInfo.getrepr-681"><span class="linenos">681</span></a>        <span class="n">fmt</span> <span class="o">=</span> <span class="n">FormattedExcinfo</span><span class="p">(</span>
</span><span id="ExceptionInfo.getrepr-682"><a href="#ExceptionInfo.getrepr-682"><span class="linenos">682</span></a>            <span class="n">showlocals</span><span class="o">=</span><span class="n">showlocals</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-683"><a href="#ExceptionInfo.getrepr-683"><span class="linenos">683</span></a>            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-684"><a href="#ExceptionInfo.getrepr-684"><span class="linenos">684</span></a>            <span class="n">abspath</span><span class="o">=</span><span class="n">abspath</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-685"><a href="#ExceptionInfo.getrepr-685"><span class="linenos">685</span></a>            <span class="n">tbfilter</span><span class="o">=</span><span class="n">tbfilter</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-686"><a href="#ExceptionInfo.getrepr-686"><span class="linenos">686</span></a>            <span class="n">funcargs</span><span class="o">=</span><span class="n">funcargs</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-687"><a href="#ExceptionInfo.getrepr-687"><span class="linenos">687</span></a>            <span class="n">truncate_locals</span><span class="o">=</span><span class="n">truncate_locals</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-688"><a href="#ExceptionInfo.getrepr-688"><span class="linenos">688</span></a>            <span class="n">truncate_args</span><span class="o">=</span><span class="n">truncate_args</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-689"><a href="#ExceptionInfo.getrepr-689"><span class="linenos">689</span></a>            <span class="n">chain</span><span class="o">=</span><span class="n">chain</span><span class="p">,</span>
</span><span id="ExceptionInfo.getrepr-690"><a href="#ExceptionInfo.getrepr-690"><span class="linenos">690</span></a>        <span class="p">)</span>
</span><span id="ExceptionInfo.getrepr-691"><a href="#ExceptionInfo.getrepr-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">repr_excinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return str()able representation of this exception info.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>bool showlocals</strong>: 
Show locals per traceback entry.
Ignored if <code>style=="native"</code>.</p></li>
<li><p><strong>str style</strong>: 
long|short|line|no|native|value traceback style.</p></li>
<li><p><strong>bool abspath</strong>: 
If paths should be changed to absolute or left unchanged.</p></li>
<li><p><strong>tbfilter</strong>: 
A filter for traceback entries.</p>

<ul>
<li>If false, don't hide any entries.</li>
<li>If true, hide internal entries and entries that contain a local
variable <code>__tracebackhide__ = True</code>.</li>
<li>If a callable, delegates the filtering to the callable.</li>
</ul>

<p>Ignored if <code>style</code> is <code>"native"</code>.</p></li>
<li><p><strong>bool funcargs</strong>: 
Show fixtures ("funcargs" for legacy purposes) per traceback entry.</p></li>
<li><p><strong>bool truncate_locals</strong>: 
With <code>showlocals==True</code>, make sure locals can be safely represented as strings.</p></li>
<li><p><strong>bool truncate_args</strong>: 
With <code>showargs==True</code>, make sure args can be safely represented as strings.</p></li>
<li><p><strong>bool chain</strong>: 
If chained exceptions in Python 3 should be shown.</p></li>
</ul>

<p><em>Changed in version 3.9:</em>
Added the <code>chain</code> parameter.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.match" class="classattr">
                                        <input id="ExceptionInfo.match-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">match</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">regexp</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.match-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.match"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.match-712"><a href="#ExceptionInfo.match-712"><span class="linenos">712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">regexp</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">]:</span>
</span><span id="ExceptionInfo.match-713"><a href="#ExceptionInfo.match-713"><span class="linenos">713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether the regular expression `regexp` matches the string</span>
</span><span id="ExceptionInfo.match-714"><a href="#ExceptionInfo.match-714"><span class="linenos">714</span></a><span class="sd">        representation of the exception using :func:`python:re.search`.</span>
</span><span id="ExceptionInfo.match-715"><a href="#ExceptionInfo.match-715"><span class="linenos">715</span></a>
</span><span id="ExceptionInfo.match-716"><a href="#ExceptionInfo.match-716"><span class="linenos">716</span></a><span class="sd">        If it matches `True` is returned, otherwise an `AssertionError` is raised.</span>
</span><span id="ExceptionInfo.match-717"><a href="#ExceptionInfo.match-717"><span class="linenos">717</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.match-718"><a href="#ExceptionInfo.match-718"><span class="linenos">718</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ExceptionInfo.match-719"><a href="#ExceptionInfo.match-719"><span class="linenos">719</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stringify_exception</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="ExceptionInfo.match-720"><a href="#ExceptionInfo.match-720"><span class="linenos">720</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Regex pattern did not match.</span><span class="se">\n</span><span class="s2"> Regex: </span><span class="si">{</span><span class="n">regexp</span><span class="si">!r}</span><span class="se">\n</span><span class="s2"> Input: </span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="ExceptionInfo.match-721"><a href="#ExceptionInfo.match-721"><span class="linenos">721</span></a>        <span class="k">if</span> <span class="n">regexp</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
</span><span id="ExceptionInfo.match-722"><a href="#ExceptionInfo.match-722"><span class="linenos">722</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Did you mean to `re.escape()` the regex?&quot;</span>
</span><span id="ExceptionInfo.match-723"><a href="#ExceptionInfo.match-723"><span class="linenos">723</span></a>        <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">msg</span>
</span><span id="ExceptionInfo.match-724"><a href="#ExceptionInfo.match-724"><span class="linenos">724</span></a>        <span class="c1"># Return True to allow for &quot;assert excinfo.match()&quot;.</span>
</span><span id="ExceptionInfo.match-725"><a href="#ExceptionInfo.match-725"><span class="linenos">725</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Check whether the regular expression <code>regexp</code> matches the string
representation of the exception using <code>python:re.search()</code>.</p>

<p>If it matches <code>True</code> is returned, otherwise an <code>AssertionError</code> is raised.</p>
</div>


                            </div>
                            <div id="ExceptionInfo.group_contains" class="classattr">
                                        <input id="ExceptionInfo.group_contains-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">group_contains</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">expected_exception</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="o">...</span><span class="p">]]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">match</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ExceptionInfo.group_contains-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExceptionInfo.group_contains"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExceptionInfo.group_contains-757"><a href="#ExceptionInfo.group_contains-757"><span class="linenos">757</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">group_contains</span><span class="p">(</span>
</span><span id="ExceptionInfo.group_contains-758"><a href="#ExceptionInfo.group_contains-758"><span class="linenos">758</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExceptionInfo.group_contains-759"><a href="#ExceptionInfo.group_contains-759"><span class="linenos">759</span></a>        <span class="n">expected_exception</span><span class="p">:</span> <span class="n">EXCEPTION_OR_MORE</span><span class="p">,</span>
</span><span id="ExceptionInfo.group_contains-760"><a href="#ExceptionInfo.group_contains-760"><span class="linenos">760</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="ExceptionInfo.group_contains-761"><a href="#ExceptionInfo.group_contains-761"><span class="linenos">761</span></a>        <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.group_contains-762"><a href="#ExceptionInfo.group_contains-762"><span class="linenos">762</span></a>        <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ExceptionInfo.group_contains-763"><a href="#ExceptionInfo.group_contains-763"><span class="linenos">763</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExceptionInfo.group_contains-764"><a href="#ExceptionInfo.group_contains-764"><span class="linenos">764</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether a captured exception group contains a matching exception.</span>
</span><span id="ExceptionInfo.group_contains-765"><a href="#ExceptionInfo.group_contains-765"><span class="linenos">765</span></a>
</span><span id="ExceptionInfo.group_contains-766"><a href="#ExceptionInfo.group_contains-766"><span class="linenos">766</span></a><span class="sd">        :param Type[BaseException] | Tuple[Type[BaseException]] expected_exception:</span>
</span><span id="ExceptionInfo.group_contains-767"><a href="#ExceptionInfo.group_contains-767"><span class="linenos">767</span></a><span class="sd">            The expected exception type, or a tuple if one of multiple possible</span>
</span><span id="ExceptionInfo.group_contains-768"><a href="#ExceptionInfo.group_contains-768"><span class="linenos">768</span></a><span class="sd">            exception types are expected.</span>
</span><span id="ExceptionInfo.group_contains-769"><a href="#ExceptionInfo.group_contains-769"><span class="linenos">769</span></a>
</span><span id="ExceptionInfo.group_contains-770"><a href="#ExceptionInfo.group_contains-770"><span class="linenos">770</span></a><span class="sd">        :param str | Pattern[str] | None match:</span>
</span><span id="ExceptionInfo.group_contains-771"><a href="#ExceptionInfo.group_contains-771"><span class="linenos">771</span></a><span class="sd">            If specified, a string containing a regular expression,</span>
</span><span id="ExceptionInfo.group_contains-772"><a href="#ExceptionInfo.group_contains-772"><span class="linenos">772</span></a><span class="sd">            or a regular expression object, that is tested against the string</span>
</span><span id="ExceptionInfo.group_contains-773"><a href="#ExceptionInfo.group_contains-773"><span class="linenos">773</span></a><span class="sd">            representation of the exception and its `PEP-678 &lt;https://peps.python.org/pep-0678/&gt;` `__notes__`</span>
</span><span id="ExceptionInfo.group_contains-774"><a href="#ExceptionInfo.group_contains-774"><span class="linenos">774</span></a><span class="sd">            using :func:`re.search`.</span>
</span><span id="ExceptionInfo.group_contains-775"><a href="#ExceptionInfo.group_contains-775"><span class="linenos">775</span></a>
</span><span id="ExceptionInfo.group_contains-776"><a href="#ExceptionInfo.group_contains-776"><span class="linenos">776</span></a><span class="sd">            To match a literal string that may contain :ref:`special characters</span>
</span><span id="ExceptionInfo.group_contains-777"><a href="#ExceptionInfo.group_contains-777"><span class="linenos">777</span></a><span class="sd">            &lt;re-syntax&gt;`, the pattern can first be escaped with :func:`re.escape`.</span>
</span><span id="ExceptionInfo.group_contains-778"><a href="#ExceptionInfo.group_contains-778"><span class="linenos">778</span></a>
</span><span id="ExceptionInfo.group_contains-779"><a href="#ExceptionInfo.group_contains-779"><span class="linenos">779</span></a><span class="sd">        :param Optional[int] depth:</span>
</span><span id="ExceptionInfo.group_contains-780"><a href="#ExceptionInfo.group_contains-780"><span class="linenos">780</span></a><span class="sd">            If `None`, will search for a matching exception at any nesting depth.</span>
</span><span id="ExceptionInfo.group_contains-781"><a href="#ExceptionInfo.group_contains-781"><span class="linenos">781</span></a><span class="sd">            If &gt;= 1, will only match an exception if it&#39;s at the specified depth (depth = 1 being</span>
</span><span id="ExceptionInfo.group_contains-782"><a href="#ExceptionInfo.group_contains-782"><span class="linenos">782</span></a><span class="sd">            the exceptions contained within the topmost exception group).</span>
</span><span id="ExceptionInfo.group_contains-783"><a href="#ExceptionInfo.group_contains-783"><span class="linenos">783</span></a>
</span><span id="ExceptionInfo.group_contains-784"><a href="#ExceptionInfo.group_contains-784"><span class="linenos">784</span></a><span class="sd">        .. versionadded:: 8.0</span>
</span><span id="ExceptionInfo.group_contains-785"><a href="#ExceptionInfo.group_contains-785"><span class="linenos">785</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExceptionInfo.group_contains-786"><a href="#ExceptionInfo.group_contains-786"><span class="linenos">786</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Captured exception is not an instance of `BaseExceptionGroup`&quot;</span>
</span><span id="ExceptionInfo.group_contains-787"><a href="#ExceptionInfo.group_contains-787"><span class="linenos">787</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseExceptionGroup</span><span class="p">),</span> <span class="n">msg</span>
</span><span id="ExceptionInfo.group_contains-788"><a href="#ExceptionInfo.group_contains-788"><span class="linenos">788</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;`depth` must be &gt;= 1 if specified&quot;</span>
</span><span id="ExceptionInfo.group_contains-789"><a href="#ExceptionInfo.group_contains-789"><span class="linenos">789</span></a>        <span class="k">assert</span> <span class="p">(</span><span class="n">depth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">depth</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">),</span> <span class="n">msg</span>
</span><span id="ExceptionInfo.group_contains-790"><a href="#ExceptionInfo.group_contains-790"><span class="linenos">790</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_contains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">expected_exception</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="n">depth</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Check whether a captured exception group contains a matching exception.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>Type[BaseException] | Tuple[Type[BaseException]] expected_exception</strong>: 
The expected exception type, or a tuple if one of multiple possible
exception types are expected.</p></li>
<li><p><strong>str | Pattern[str] | None match</strong>: 
If specified, a string containing a regular expression,
or a regular expression object, that is tested against the string
representation of the exception and its <code>PEP-678 &lt;https://peps.python.org/pep-0678/&gt;</code> <code>__notes__</code>
using <code>re.search()</code>.</p>

<p>To match a literal string that may contain :ref:<code>special characters
&lt;re-syntax&gt;</code>, the pattern can first be escaped with <code>re.escape()</code>.</p></li>
<li><p><strong>Optional[int] depth</strong>: 
If <code>None</code>, will search for a matching exception at any nesting depth.
If &gt;= 1, will only match an exception if it's at the specified depth (depth = 1 being
the exceptions contained within the topmost exception group).</p></li>
</ul>

<p><em>New in version 8.0.</em></p>
</div>


                            </div>
                </section>
                <section id="ExitCode">
                            <input id="ExitCode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">ExitCode</span><wbr>(<span class="base">enum.IntEnum</span>):

                <label class="view-source-button" for="ExitCode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExitCode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExitCode-92"><a href="#ExitCode-92"><span class="linenos"> 92</span></a><span class="nd">@final</span>
</span><span id="ExitCode-93"><a href="#ExitCode-93"><span class="linenos"> 93</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ExitCode</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntEnum</span><span class="p">):</span>
</span><span id="ExitCode-94"><a href="#ExitCode-94"><span class="linenos"> 94</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes the valid exit codes by pytest.</span>
</span><span id="ExitCode-95"><a href="#ExitCode-95"><span class="linenos"> 95</span></a>
</span><span id="ExitCode-96"><a href="#ExitCode-96"><span class="linenos"> 96</span></a><span class="sd">    Currently users and plugins may supply other exit codes as well.</span>
</span><span id="ExitCode-97"><a href="#ExitCode-97"><span class="linenos"> 97</span></a>
</span><span id="ExitCode-98"><a href="#ExitCode-98"><span class="linenos"> 98</span></a><span class="sd">    .. versionadded:: 5.0</span>
</span><span id="ExitCode-99"><a href="#ExitCode-99"><span class="linenos"> 99</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ExitCode-100"><a href="#ExitCode-100"><span class="linenos">100</span></a>
</span><span id="ExitCode-101"><a href="#ExitCode-101"><span class="linenos">101</span></a>    <span class="c1">#: Tests passed.</span>
</span><span id="ExitCode-102"><a href="#ExitCode-102"><span class="linenos">102</span></a>    <span class="n">OK</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ExitCode-103"><a href="#ExitCode-103"><span class="linenos">103</span></a>    <span class="c1">#: Tests failed.</span>
</span><span id="ExitCode-104"><a href="#ExitCode-104"><span class="linenos">104</span></a>    <span class="n">TESTS_FAILED</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ExitCode-105"><a href="#ExitCode-105"><span class="linenos">105</span></a>    <span class="c1">#: pytest was interrupted.</span>
</span><span id="ExitCode-106"><a href="#ExitCode-106"><span class="linenos">106</span></a>    <span class="n">INTERRUPTED</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="ExitCode-107"><a href="#ExitCode-107"><span class="linenos">107</span></a>    <span class="c1">#: An internal error got in the way.</span>
</span><span id="ExitCode-108"><a href="#ExitCode-108"><span class="linenos">108</span></a>    <span class="n">INTERNAL_ERROR</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="ExitCode-109"><a href="#ExitCode-109"><span class="linenos">109</span></a>    <span class="c1">#: pytest was misused.</span>
</span><span id="ExitCode-110"><a href="#ExitCode-110"><span class="linenos">110</span></a>    <span class="n">USAGE_ERROR</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="ExitCode-111"><a href="#ExitCode-111"><span class="linenos">111</span></a>    <span class="c1">#: pytest couldn&#39;t find tests.</span>
</span><span id="ExitCode-112"><a href="#ExitCode-112"><span class="linenos">112</span></a>    <span class="n">NO_TESTS_COLLECTED</span> <span class="o">=</span> <span class="mi">5</span>
</span></pre></div>


            <div class="docstring"><p>Encodes the valid exit codes by pytest.</p>

<p>Currently users and plugins may supply other exit codes as well.</p>

<p><em>New in version 5.0.</em></p>
</div>


                            <div id="ExitCode.OK" class="classattr">
                                <div class="attr variable">
            <span class="name">OK</span>        =
<span class="default_value">&lt;<a href="#ExitCode.OK">ExitCode.OK</a>: 0&gt;</span>

        
    </div>
    <a class="headerlink" href="#ExitCode.OK"></a>
    
    

                            </div>
                            <div id="ExitCode.TESTS_FAILED" class="classattr">
                                <div class="attr variable">
            <span class="name">TESTS_FAILED</span>        =
<span class="default_value">&lt;<a href="#ExitCode.TESTS_FAILED">ExitCode.TESTS_FAILED</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#ExitCode.TESTS_FAILED"></a>
    
    

                            </div>
                            <div id="ExitCode.INTERRUPTED" class="classattr">
                                <div class="attr variable">
            <span class="name">INTERRUPTED</span>        =
<span class="default_value">&lt;<a href="#ExitCode.INTERRUPTED">ExitCode.INTERRUPTED</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#ExitCode.INTERRUPTED"></a>
    
    

                            </div>
                            <div id="ExitCode.INTERNAL_ERROR" class="classattr">
                                <div class="attr variable">
            <span class="name">INTERNAL_ERROR</span>        =
<span class="default_value">&lt;<a href="#ExitCode.INTERNAL_ERROR">ExitCode.INTERNAL_ERROR</a>: 3&gt;</span>

        
    </div>
    <a class="headerlink" href="#ExitCode.INTERNAL_ERROR"></a>
    
    

                            </div>
                            <div id="ExitCode.USAGE_ERROR" class="classattr">
                                <div class="attr variable">
            <span class="name">USAGE_ERROR</span>        =
<span class="default_value">&lt;<a href="#ExitCode.USAGE_ERROR">ExitCode.USAGE_ERROR</a>: 4&gt;</span>

        
    </div>
    <a class="headerlink" href="#ExitCode.USAGE_ERROR"></a>
    
    

                            </div>
                            <div id="ExitCode.NO_TESTS_COLLECTED" class="classattr">
                                <div class="attr variable">
            <span class="name">NO_TESTS_COLLECTED</span>        =
<span class="default_value">&lt;<a href="#ExitCode.NO_TESTS_COLLECTED">ExitCode.NO_TESTS_COLLECTED</a>: 5&gt;</span>

        
    </div>
    <a class="headerlink" href="#ExitCode.NO_TESTS_COLLECTED"></a>
    
    

                            </div>
                </section>
                <section id="fail">
                            <input id="fail-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fail</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>, </span><span class="param"><span class="n">pytrace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">NoReturn</span>:</span></span>

                <label class="view-source-button" for="fail-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fail"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fail-164"><a href="#fail-164"><span class="linenos">164</span></a><span class="nd">@_with_exception</span><span class="p">(</span><span class="n">Failed</span><span class="p">)</span>
</span><span id="fail-165"><a href="#fail-165"><span class="linenos">165</span></a><span class="k">def</span><span class="w"> </span><span class="nf">fail</span><span class="p">(</span><span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pytrace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="fail-166"><a href="#fail-166"><span class="linenos">166</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Explicitly fail an executing test with the given message.</span>
</span><span id="fail-167"><a href="#fail-167"><span class="linenos">167</span></a>
</span><span id="fail-168"><a href="#fail-168"><span class="linenos">168</span></a><span class="sd">    :param reason:</span>
</span><span id="fail-169"><a href="#fail-169"><span class="linenos">169</span></a><span class="sd">        The message to show the user as reason for the failure.</span>
</span><span id="fail-170"><a href="#fail-170"><span class="linenos">170</span></a>
</span><span id="fail-171"><a href="#fail-171"><span class="linenos">171</span></a><span class="sd">    :param pytrace:</span>
</span><span id="fail-172"><a href="#fail-172"><span class="linenos">172</span></a><span class="sd">        If False, msg represents the full failure information and no</span>
</span><span id="fail-173"><a href="#fail-173"><span class="linenos">173</span></a><span class="sd">        python traceback will be reported.</span>
</span><span id="fail-174"><a href="#fail-174"><span class="linenos">174</span></a>
</span><span id="fail-175"><a href="#fail-175"><span class="linenos">175</span></a><span class="sd">    :raises pytest.fail.Exception:</span>
</span><span id="fail-176"><a href="#fail-176"><span class="linenos">176</span></a><span class="sd">        The exception that is raised.</span>
</span><span id="fail-177"><a href="#fail-177"><span class="linenos">177</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="fail-178"><a href="#fail-178"><span class="linenos">178</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="fail-179"><a href="#fail-179"><span class="linenos">179</span></a>    <span class="k">raise</span> <span class="n">Failed</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span> <span class="n">pytrace</span><span class="o">=</span><span class="n">pytrace</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Explicitly fail an executing test with the given message.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>reason</strong>: 
The message to show the user as reason for the failure.</p></li>
<li><p><strong>pytrace</strong>: 
If False, msg represents the full failure information and no
python traceback will be reported.</p></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>pytest.fail.Exception</strong>: 
The exception that is raised.</li>
</ul>
</div>


                </section>
                <section id="File">
                            <input id="File-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">File</span><wbr>(<span class="base">_pytest.nodes.FSCollector</span>, <span class="base">abc.ABC</span>):

                <label class="view-source-button" for="File-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#File"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="File-625"><a href="#File-625"><span class="linenos">625</span></a><span class="k">class</span><span class="w"> </span><span class="nc">File</span><span class="p">(</span><span class="n">FSCollector</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="File-626"><a href="#File-626"><span class="linenos">626</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for collecting tests from a file.</span>
</span><span id="File-627"><a href="#File-627"><span class="linenos">627</span></a>
</span><span id="File-628"><a href="#File-628"><span class="linenos">628</span></a><span class="sd">    :ref:`non-python tests`.</span>
</span><span id="File-629"><a href="#File-629"><span class="linenos">629</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Base class for collecting tests from a file.</p>

<p>:ref:<code>non-python tests</code>.</p>
</div>


                </section>
                <section id="fixture">
                            <input id="fixture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fixture</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">fixture_function</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="o">~</span><span class="n">FixtureFunction</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="s1">&#39;package&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span><span class="p">],</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="s1">&#39;package&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">]]]</span> <span class="o">=</span> <span class="s1">&#39;function&#39;</span>,</span><span class="param">	<span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">autouse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">FixtureFunctionMarker</span><span class="p">,</span> <span class="o">~</span><span class="n">FixtureFunction</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="fixture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fixture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fixture-1244"><a href="#fixture-1244"><span class="linenos">1244</span></a><span class="k">def</span><span class="w"> </span><span class="nf">fixture</span><span class="p">(</span>
</span><span id="fixture-1245"><a href="#fixture-1245"><span class="linenos">1245</span></a>    <span class="n">fixture_function</span><span class="p">:</span> <span class="n">FixtureFunction</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="fixture-1246"><a href="#fixture-1246"><span class="linenos">1246</span></a>    <span class="o">*</span><span class="p">,</span>
</span><span id="fixture-1247"><a href="#fixture-1247"><span class="linenos">1247</span></a>    <span class="n">scope</span><span class="p">:</span> <span class="n">_ScopeName</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Config</span><span class="p">],</span> <span class="n">_ScopeName</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="fixture-1248"><a href="#fixture-1248"><span class="linenos">1248</span></a>    <span class="n">params</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="fixture-1249"><a href="#fixture-1249"><span class="linenos">1249</span></a>    <span class="n">autouse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="fixture-1250"><a href="#fixture-1250"><span class="linenos">1250</span></a>    <span class="n">ids</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="fixture-1251"><a href="#fixture-1251"><span class="linenos">1251</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="fixture-1252"><a href="#fixture-1252"><span class="linenos">1252</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureFunctionMarker</span> <span class="o">|</span> <span class="n">FixtureFunction</span><span class="p">:</span>
</span><span id="fixture-1253"><a href="#fixture-1253"><span class="linenos">1253</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to mark a fixture factory function.</span>
</span><span id="fixture-1254"><a href="#fixture-1254"><span class="linenos">1254</span></a>
</span><span id="fixture-1255"><a href="#fixture-1255"><span class="linenos">1255</span></a><span class="sd">    This decorator can be used, with or without parameters, to define a</span>
</span><span id="fixture-1256"><a href="#fixture-1256"><span class="linenos">1256</span></a><span class="sd">    fixture function.</span>
</span><span id="fixture-1257"><a href="#fixture-1257"><span class="linenos">1257</span></a>
</span><span id="fixture-1258"><a href="#fixture-1258"><span class="linenos">1258</span></a><span class="sd">    The name of the fixture function can later be referenced to cause its</span>
</span><span id="fixture-1259"><a href="#fixture-1259"><span class="linenos">1259</span></a><span class="sd">    invocation ahead of running tests: test modules or classes can use the</span>
</span><span id="fixture-1260"><a href="#fixture-1260"><span class="linenos">1260</span></a><span class="sd">    ``pytest.mark.usefixtures(fixturename)`` marker.</span>
</span><span id="fixture-1261"><a href="#fixture-1261"><span class="linenos">1261</span></a>
</span><span id="fixture-1262"><a href="#fixture-1262"><span class="linenos">1262</span></a><span class="sd">    Test functions can directly use fixture names as input arguments in which</span>
</span><span id="fixture-1263"><a href="#fixture-1263"><span class="linenos">1263</span></a><span class="sd">    case the fixture instance returned from the fixture function will be</span>
</span><span id="fixture-1264"><a href="#fixture-1264"><span class="linenos">1264</span></a><span class="sd">    injected.</span>
</span><span id="fixture-1265"><a href="#fixture-1265"><span class="linenos">1265</span></a>
</span><span id="fixture-1266"><a href="#fixture-1266"><span class="linenos">1266</span></a><span class="sd">    Fixtures can provide their values to test functions using ``return`` or</span>
</span><span id="fixture-1267"><a href="#fixture-1267"><span class="linenos">1267</span></a><span class="sd">    ``yield`` statements. When using ``yield`` the code block after the</span>
</span><span id="fixture-1268"><a href="#fixture-1268"><span class="linenos">1268</span></a><span class="sd">    ``yield`` statement is executed as teardown code regardless of the test</span>
</span><span id="fixture-1269"><a href="#fixture-1269"><span class="linenos">1269</span></a><span class="sd">    outcome, and must yield exactly once.</span>
</span><span id="fixture-1270"><a href="#fixture-1270"><span class="linenos">1270</span></a>
</span><span id="fixture-1271"><a href="#fixture-1271"><span class="linenos">1271</span></a><span class="sd">    :param scope:</span>
</span><span id="fixture-1272"><a href="#fixture-1272"><span class="linenos">1272</span></a><span class="sd">        The scope for which this fixture is shared; one of ``&quot;function&quot;``</span>
</span><span id="fixture-1273"><a href="#fixture-1273"><span class="linenos">1273</span></a><span class="sd">        (default), ``&quot;class&quot;``, ``&quot;module&quot;``, ``&quot;package&quot;`` or ``&quot;session&quot;``.</span>
</span><span id="fixture-1274"><a href="#fixture-1274"><span class="linenos">1274</span></a>
</span><span id="fixture-1275"><a href="#fixture-1275"><span class="linenos">1275</span></a><span class="sd">        This parameter may also be a callable which receives ``(fixture_name, config)``</span>
</span><span id="fixture-1276"><a href="#fixture-1276"><span class="linenos">1276</span></a><span class="sd">        as parameters, and must return a ``str`` with one of the values mentioned above.</span>
</span><span id="fixture-1277"><a href="#fixture-1277"><span class="linenos">1277</span></a>
</span><span id="fixture-1278"><a href="#fixture-1278"><span class="linenos">1278</span></a><span class="sd">        See :ref:`dynamic scope` in the docs for more information.</span>
</span><span id="fixture-1279"><a href="#fixture-1279"><span class="linenos">1279</span></a>
</span><span id="fixture-1280"><a href="#fixture-1280"><span class="linenos">1280</span></a><span class="sd">    :param params:</span>
</span><span id="fixture-1281"><a href="#fixture-1281"><span class="linenos">1281</span></a><span class="sd">        An optional list of parameters which will cause multiple invocations</span>
</span><span id="fixture-1282"><a href="#fixture-1282"><span class="linenos">1282</span></a><span class="sd">        of the fixture function and all of the tests using it. The current</span>
</span><span id="fixture-1283"><a href="#fixture-1283"><span class="linenos">1283</span></a><span class="sd">        parameter is available in ``request.param``.</span>
</span><span id="fixture-1284"><a href="#fixture-1284"><span class="linenos">1284</span></a>
</span><span id="fixture-1285"><a href="#fixture-1285"><span class="linenos">1285</span></a><span class="sd">    :param autouse:</span>
</span><span id="fixture-1286"><a href="#fixture-1286"><span class="linenos">1286</span></a><span class="sd">        If True, the fixture func is activated for all tests that can see it.</span>
</span><span id="fixture-1287"><a href="#fixture-1287"><span class="linenos">1287</span></a><span class="sd">        If False (the default), an explicit reference is needed to activate</span>
</span><span id="fixture-1288"><a href="#fixture-1288"><span class="linenos">1288</span></a><span class="sd">        the fixture.</span>
</span><span id="fixture-1289"><a href="#fixture-1289"><span class="linenos">1289</span></a>
</span><span id="fixture-1290"><a href="#fixture-1290"><span class="linenos">1290</span></a><span class="sd">    :param ids:</span>
</span><span id="fixture-1291"><a href="#fixture-1291"><span class="linenos">1291</span></a><span class="sd">        Sequence of ids each corresponding to the params so that they are</span>
</span><span id="fixture-1292"><a href="#fixture-1292"><span class="linenos">1292</span></a><span class="sd">        part of the test id. If no ids are provided they will be generated</span>
</span><span id="fixture-1293"><a href="#fixture-1293"><span class="linenos">1293</span></a><span class="sd">        automatically from the params.</span>
</span><span id="fixture-1294"><a href="#fixture-1294"><span class="linenos">1294</span></a>
</span><span id="fixture-1295"><a href="#fixture-1295"><span class="linenos">1295</span></a><span class="sd">    :param name:</span>
</span><span id="fixture-1296"><a href="#fixture-1296"><span class="linenos">1296</span></a><span class="sd">        The name of the fixture. This defaults to the name of the decorated</span>
</span><span id="fixture-1297"><a href="#fixture-1297"><span class="linenos">1297</span></a><span class="sd">        function. If a fixture is used in the same module in which it is</span>
</span><span id="fixture-1298"><a href="#fixture-1298"><span class="linenos">1298</span></a><span class="sd">        defined, the function name of the fixture will be shadowed by the</span>
</span><span id="fixture-1299"><a href="#fixture-1299"><span class="linenos">1299</span></a><span class="sd">        function arg that requests the fixture; one way to resolve this is to</span>
</span><span id="fixture-1300"><a href="#fixture-1300"><span class="linenos">1300</span></a><span class="sd">        name the decorated function ``fixture_&lt;fixturename&gt;`` and then use</span>
</span><span id="fixture-1301"><a href="#fixture-1301"><span class="linenos">1301</span></a><span class="sd">        ``@pytest.fixture(name=&#39;&lt;fixturename&gt;&#39;)``.</span>
</span><span id="fixture-1302"><a href="#fixture-1302"><span class="linenos">1302</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="fixture-1303"><a href="#fixture-1303"><span class="linenos">1303</span></a>    <span class="n">fixture_marker</span> <span class="o">=</span> <span class="n">FixtureFunctionMarker</span><span class="p">(</span>
</span><span id="fixture-1304"><a href="#fixture-1304"><span class="linenos">1304</span></a>        <span class="n">scope</span><span class="o">=</span><span class="n">scope</span><span class="p">,</span>
</span><span id="fixture-1305"><a href="#fixture-1305"><span class="linenos">1305</span></a>        <span class="n">params</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="fixture-1306"><a href="#fixture-1306"><span class="linenos">1306</span></a>        <span class="n">autouse</span><span class="o">=</span><span class="n">autouse</span><span class="p">,</span>
</span><span id="fixture-1307"><a href="#fixture-1307"><span class="linenos">1307</span></a>        <span class="n">ids</span><span class="o">=</span><span class="kc">None</span> <span class="k">if</span> <span class="n">ids</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ids</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span> <span class="k">else</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span>
</span><span id="fixture-1308"><a href="#fixture-1308"><span class="linenos">1308</span></a>        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="fixture-1309"><a href="#fixture-1309"><span class="linenos">1309</span></a>        <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="fixture-1310"><a href="#fixture-1310"><span class="linenos">1310</span></a>    <span class="p">)</span>
</span><span id="fixture-1311"><a href="#fixture-1311"><span class="linenos">1311</span></a>
</span><span id="fixture-1312"><a href="#fixture-1312"><span class="linenos">1312</span></a>    <span class="c1"># Direct decoration.</span>
</span><span id="fixture-1313"><a href="#fixture-1313"><span class="linenos">1313</span></a>    <span class="k">if</span> <span class="n">fixture_function</span><span class="p">:</span>
</span><span id="fixture-1314"><a href="#fixture-1314"><span class="linenos">1314</span></a>        <span class="k">return</span> <span class="n">fixture_marker</span><span class="p">(</span><span class="n">fixture_function</span><span class="p">)</span>
</span><span id="fixture-1315"><a href="#fixture-1315"><span class="linenos">1315</span></a>
</span><span id="fixture-1316"><a href="#fixture-1316"><span class="linenos">1316</span></a>    <span class="k">return</span> <span class="n">fixture_marker</span>
</span></pre></div>


            <div class="docstring"><p>Decorator to mark a fixture factory function.</p>

<p>This decorator can be used, with or without parameters, to define a
fixture function.</p>

<p>The name of the fixture function can later be referenced to cause its
invocation ahead of running tests: test modules or classes can use the
<code>pytest.mark.usefixtures(fixturename)</code> marker.</p>

<p>Test functions can directly use fixture names as input arguments in which
case the fixture instance returned from the fixture function will be
injected.</p>

<p>Fixtures can provide their values to test functions using <code>return</code> or
<code>yield</code> statements. When using <code>yield</code> the code block after the
<code>yield</code> statement is executed as teardown code regardless of the test
outcome, and must yield exactly once.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>scope</strong>: 
The scope for which this fixture is shared; one of <code>"function"</code>
(default), <code>"class"</code>, <code>"module"</code>, <code>"package"</code> or <code>"session"</code>.</p>

<p>This parameter may also be a callable which receives <code>(fixture_name, config)</code>
as parameters, and must return a <code>str</code> with one of the values mentioned above.</p>

<p>See :ref:<code>dynamic scope</code> in the docs for more information.</p></li>
<li><p><strong>params</strong>: 
An optional list of parameters which will cause multiple invocations
of the fixture function and all of the tests using it. The current
parameter is available in <code>request.param</code>.</p></li>
<li><p><strong>autouse</strong>: 
If True, the fixture func is activated for all tests that can see it.
If False (the default), an explicit reference is needed to activate
the fixture.</p></li>
<li><p><strong>ids</strong>: 
Sequence of ids each corresponding to the params so that they are
part of the test id. If no ids are provided they will be generated
automatically from the params.</p></li>
<li><p><strong>name</strong>: 
The name of the fixture. This defaults to the name of the decorated
function. If a fixture is used in the same module in which it is
defined, the function name of the fixture will be shadowed by the
function arg that requests the fixture; one way to resolve this is to
name the decorated function <code>fixture_&lt;fixturename&gt;</code> and then use
<code>@<a href="#fixture">pytest.fixture</a>(name='&lt;fixturename&gt;')</code>.</p></li>
</ul>
</div>


                </section>
                <section id="FixtureDef">
                            <input id="FixtureDef-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">FixtureDef</span><wbr>(<span class="base">typing.Generic[~FixtureValue]</span>):

                <label class="view-source-button" for="FixtureDef-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef-944"><a href="#FixtureDef-944"><span class="linenos"> 944</span></a><span class="nd">@final</span>
</span><span id="FixtureDef-945"><a href="#FixtureDef-945"><span class="linenos"> 945</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FixtureDef</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">FixtureValue</span><span class="p">]):</span>
</span><span id="FixtureDef-946"><a href="#FixtureDef-946"><span class="linenos"> 946</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A container for a fixture definition.</span>
</span><span id="FixtureDef-947"><a href="#FixtureDef-947"><span class="linenos"> 947</span></a>
</span><span id="FixtureDef-948"><a href="#FixtureDef-948"><span class="linenos"> 948</span></a><span class="sd">    Note: At this time, only explicitly documented fields and methods are</span>
</span><span id="FixtureDef-949"><a href="#FixtureDef-949"><span class="linenos"> 949</span></a><span class="sd">    considered public stable API.</span>
</span><span id="FixtureDef-950"><a href="#FixtureDef-950"><span class="linenos"> 950</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="FixtureDef-951"><a href="#FixtureDef-951"><span class="linenos"> 951</span></a>
</span><span id="FixtureDef-952"><a href="#FixtureDef-952"><span class="linenos"> 952</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="FixtureDef-953"><a href="#FixtureDef-953"><span class="linenos"> 953</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="FixtureDef-954"><a href="#FixtureDef-954"><span class="linenos"> 954</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span>
</span><span id="FixtureDef-955"><a href="#FixtureDef-955"><span class="linenos"> 955</span></a>        <span class="n">baseid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef-956"><a href="#FixtureDef-956"><span class="linenos"> 956</span></a>        <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="FixtureDef-957"><a href="#FixtureDef-957"><span class="linenos"> 957</span></a>        <span class="n">func</span><span class="p">:</span> <span class="n">_FixtureFunc</span><span class="p">[</span><span class="n">FixtureValue</span><span class="p">],</span>
</span><span id="FixtureDef-958"><a href="#FixtureDef-958"><span class="linenos"> 958</span></a>        <span class="n">scope</span><span class="p">:</span> <span class="n">Scope</span> <span class="o">|</span> <span class="n">_ScopeName</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Config</span><span class="p">],</span> <span class="n">_ScopeName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef-959"><a href="#FixtureDef-959"><span class="linenos"> 959</span></a>        <span class="n">params</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef-960"><a href="#FixtureDef-960"><span class="linenos"> 960</span></a>        <span class="n">ids</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef-961"><a href="#FixtureDef-961"><span class="linenos"> 961</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="FixtureDef-962"><a href="#FixtureDef-962"><span class="linenos"> 962</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="FixtureDef-963"><a href="#FixtureDef-963"><span class="linenos"> 963</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef-964"><a href="#FixtureDef-964"><span class="linenos"> 964</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="FixtureDef-965"><a href="#FixtureDef-965"><span class="linenos"> 965</span></a>        <span class="c1"># The &quot;base&quot; node ID for the fixture.</span>
</span><span id="FixtureDef-966"><a href="#FixtureDef-966"><span class="linenos"> 966</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef-967"><a href="#FixtureDef-967"><span class="linenos"> 967</span></a>        <span class="c1"># This is a node ID prefix. A fixture is only available to a node (e.g.</span>
</span><span id="FixtureDef-968"><a href="#FixtureDef-968"><span class="linenos"> 968</span></a>        <span class="c1"># a `Function` item) if the fixture&#39;s baseid is a nodeid of a parent of</span>
</span><span id="FixtureDef-969"><a href="#FixtureDef-969"><span class="linenos"> 969</span></a>        <span class="c1"># node.</span>
</span><span id="FixtureDef-970"><a href="#FixtureDef-970"><span class="linenos"> 970</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef-971"><a href="#FixtureDef-971"><span class="linenos"> 971</span></a>        <span class="c1"># For a fixture found in a Collector&#39;s object (e.g. a `Module`s module,</span>
</span><span id="FixtureDef-972"><a href="#FixtureDef-972"><span class="linenos"> 972</span></a>        <span class="c1"># a `Class`&#39;s class), the baseid is the Collector&#39;s nodeid.</span>
</span><span id="FixtureDef-973"><a href="#FixtureDef-973"><span class="linenos"> 973</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef-974"><a href="#FixtureDef-974"><span class="linenos"> 974</span></a>        <span class="c1"># For a fixture found in a conftest plugin, the baseid is the conftest&#39;s</span>
</span><span id="FixtureDef-975"><a href="#FixtureDef-975"><span class="linenos"> 975</span></a>        <span class="c1"># directory path relative to the rootdir.</span>
</span><span id="FixtureDef-976"><a href="#FixtureDef-976"><span class="linenos"> 976</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef-977"><a href="#FixtureDef-977"><span class="linenos"> 977</span></a>        <span class="c1"># For other plugins, the baseid is the empty string (always matches).</span>
</span><span id="FixtureDef-978"><a href="#FixtureDef-978"><span class="linenos"> 978</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">baseid</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">baseid</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
</span><span id="FixtureDef-979"><a href="#FixtureDef-979"><span class="linenos"> 979</span></a>        <span class="c1"># Whether the fixture was found from a node or a conftest in the</span>
</span><span id="FixtureDef-980"><a href="#FixtureDef-980"><span class="linenos"> 980</span></a>        <span class="c1"># collection tree. Will be false for fixtures defined in non-conftest</span>
</span><span id="FixtureDef-981"><a href="#FixtureDef-981"><span class="linenos"> 981</span></a>        <span class="c1"># plugins.</span>
</span><span id="FixtureDef-982"><a href="#FixtureDef-982"><span class="linenos"> 982</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">has_location</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">baseid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureDef-983"><a href="#FixtureDef-983"><span class="linenos"> 983</span></a>        <span class="c1"># The fixture factory function.</span>
</span><span id="FixtureDef-984"><a href="#FixtureDef-984"><span class="linenos"> 984</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">func</span>
</span><span id="FixtureDef-985"><a href="#FixtureDef-985"><span class="linenos"> 985</span></a>        <span class="c1"># The name by which the fixture may be requested.</span>
</span><span id="FixtureDef-986"><a href="#FixtureDef-986"><span class="linenos"> 986</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">argname</span>
</span><span id="FixtureDef-987"><a href="#FixtureDef-987"><span class="linenos"> 987</span></a>        <span class="k">if</span> <span class="n">scope</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef-988"><a href="#FixtureDef-988"><span class="linenos"> 988</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Function</span>
</span><span id="FixtureDef-989"><a href="#FixtureDef-989"><span class="linenos"> 989</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">scope</span><span class="p">):</span>
</span><span id="FixtureDef-990"><a href="#FixtureDef-990"><span class="linenos"> 990</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">_eval_scope_callable</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">argname</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="FixtureDef-991"><a href="#FixtureDef-991"><span class="linenos"> 991</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="FixtureDef-992"><a href="#FixtureDef-992"><span class="linenos"> 992</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">Scope</span><span class="o">.</span><span class="n">from_user</span><span class="p">(</span>
</span><span id="FixtureDef-993"><a href="#FixtureDef-993"><span class="linenos"> 993</span></a>                <span class="n">scope</span><span class="p">,</span> <span class="n">descr</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Fixture &#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">baseid</span>
</span><span id="FixtureDef-994"><a href="#FixtureDef-994"><span class="linenos"> 994</span></a>            <span class="p">)</span>
</span><span id="FixtureDef-995"><a href="#FixtureDef-995"><span class="linenos"> 995</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scope</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">scope</span>
</span><span id="FixtureDef-996"><a href="#FixtureDef-996"><span class="linenos"> 996</span></a>        <span class="c1"># If the fixture is directly parametrized, the parameter values.</span>
</span><span id="FixtureDef-997"><a href="#FixtureDef-997"><span class="linenos"> 997</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="FixtureDef-998"><a href="#FixtureDef-998"><span class="linenos"> 998</span></a>        <span class="c1"># If the fixture is directly parametrized, a tuple of explicit IDs to</span>
</span><span id="FixtureDef-999"><a href="#FixtureDef-999"><span class="linenos"> 999</span></a>        <span class="c1"># assign to the parameter values, or a callable to generate an ID given</span>
</span><span id="FixtureDef-1000"><a href="#FixtureDef-1000"><span class="linenos">1000</span></a>        <span class="c1"># a parameter value.</span>
</span><span id="FixtureDef-1001"><a href="#FixtureDef-1001"><span class="linenos">1001</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">ids</span>
</span><span id="FixtureDef-1002"><a href="#FixtureDef-1002"><span class="linenos">1002</span></a>        <span class="c1"># The names requested by the fixtures.</span>
</span><span id="FixtureDef-1003"><a href="#FixtureDef-1003"><span class="linenos">1003</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">argnames</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">getfuncargnames</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureDef-1004"><a href="#FixtureDef-1004"><span class="linenos">1004</span></a>        <span class="c1"># If the fixture was executed, the current value of the fixture.</span>
</span><span id="FixtureDef-1005"><a href="#FixtureDef-1005"><span class="linenos">1005</span></a>        <span class="c1"># Can change if the fixture is executed with different parameters.</span>
</span><span id="FixtureDef-1006"><a href="#FixtureDef-1006"><span class="linenos">1006</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">:</span> <span class="n">_FixtureCachedResult</span><span class="p">[</span><span class="n">FixtureValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureDef-1007"><a href="#FixtureDef-1007"><span class="linenos">1007</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureDef-1008"><a href="#FixtureDef-1008"><span class="linenos">1008</span></a>
</span><span id="FixtureDef-1009"><a href="#FixtureDef-1009"><span class="linenos">1009</span></a>    <span class="nd">@property</span>
</span><span id="FixtureDef-1010"><a href="#FixtureDef-1010"><span class="linenos">1010</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scope</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_ScopeName</span><span class="p">:</span>
</span><span id="FixtureDef-1011"><a href="#FixtureDef-1011"><span class="linenos">1011</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scope string, one of &quot;function&quot;, &quot;class&quot;, &quot;module&quot;, &quot;package&quot;, &quot;session&quot;.&quot;&quot;&quot;</span>
</span><span id="FixtureDef-1012"><a href="#FixtureDef-1012"><span class="linenos">1012</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scope</span><span class="o">.</span><span class="n">value</span>
</span><span id="FixtureDef-1013"><a href="#FixtureDef-1013"><span class="linenos">1013</span></a>
</span><span id="FixtureDef-1014"><a href="#FixtureDef-1014"><span class="linenos">1014</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addfinalizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">finalizer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef-1015"><a href="#FixtureDef-1015"><span class="linenos">1015</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finalizer</span><span class="p">)</span>
</span><span id="FixtureDef-1016"><a href="#FixtureDef-1016"><span class="linenos">1016</span></a>
</span><span id="FixtureDef-1017"><a href="#FixtureDef-1017"><span class="linenos">1017</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef-1018"><a href="#FixtureDef-1018"><span class="linenos">1018</span></a>        <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureDef-1019"><a href="#FixtureDef-1019"><span class="linenos">1019</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="p">:</span>
</span><span id="FixtureDef-1020"><a href="#FixtureDef-1020"><span class="linenos">1020</span></a>            <span class="n">fin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="FixtureDef-1021"><a href="#FixtureDef-1021"><span class="linenos">1021</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureDef-1022"><a href="#FixtureDef-1022"><span class="linenos">1022</span></a>                <span class="n">fin</span><span class="p">()</span>
</span><span id="FixtureDef-1023"><a href="#FixtureDef-1023"><span class="linenos">1023</span></a>            <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="FixtureDef-1024"><a href="#FixtureDef-1024"><span class="linenos">1024</span></a>                <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="FixtureDef-1025"><a href="#FixtureDef-1025"><span class="linenos">1025</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span>
</span><span id="FixtureDef-1026"><a href="#FixtureDef-1026"><span class="linenos">1026</span></a>        <span class="n">node</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_fixture_post_finalizer</span><span class="p">(</span><span class="n">fixturedef</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef-1027"><a href="#FixtureDef-1027"><span class="linenos">1027</span></a>        <span class="c1"># Even if finalization fails, we invalidate the cached fixture</span>
</span><span id="FixtureDef-1028"><a href="#FixtureDef-1028"><span class="linenos">1028</span></a>        <span class="c1"># value and remove all finalizers because they may be bound methods</span>
</span><span id="FixtureDef-1029"><a href="#FixtureDef-1029"><span class="linenos">1029</span></a>        <span class="c1"># which will keep instances alive.</span>
</span><span id="FixtureDef-1030"><a href="#FixtureDef-1030"><span class="linenos">1030</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureDef-1031"><a href="#FixtureDef-1031"><span class="linenos">1031</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="FixtureDef-1032"><a href="#FixtureDef-1032"><span class="linenos">1032</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">exceptions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FixtureDef-1033"><a href="#FixtureDef-1033"><span class="linenos">1033</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FixtureDef-1034"><a href="#FixtureDef-1034"><span class="linenos">1034</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">exceptions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FixtureDef-1035"><a href="#FixtureDef-1035"><span class="linenos">1035</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;errors while tearing down fixture &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s1">&quot; of </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="FixtureDef-1036"><a href="#FixtureDef-1036"><span class="linenos">1036</span></a>            <span class="k">raise</span> <span class="n">BaseExceptionGroup</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="FixtureDef-1037"><a href="#FixtureDef-1037"><span class="linenos">1037</span></a>
</span><span id="FixtureDef-1038"><a href="#FixtureDef-1038"><span class="linenos">1038</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureValue</span><span class="p">:</span>
</span><span id="FixtureDef-1039"><a href="#FixtureDef-1039"><span class="linenos">1039</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the value of this fixture, executing it if not cached.&quot;&quot;&quot;</span>
</span><span id="FixtureDef-1040"><a href="#FixtureDef-1040"><span class="linenos">1040</span></a>        <span class="c1"># Ensure that the dependent fixtures requested by this fixture are loaded.</span>
</span><span id="FixtureDef-1041"><a href="#FixtureDef-1041"><span class="linenos">1041</span></a>        <span class="c1"># This needs to be done before checking if we have a cached value, since</span>
</span><span id="FixtureDef-1042"><a href="#FixtureDef-1042"><span class="linenos">1042</span></a>        <span class="c1"># if a dependent fixture has their cache invalidated, e.g. due to</span>
</span><span id="FixtureDef-1043"><a href="#FixtureDef-1043"><span class="linenos">1043</span></a>        <span class="c1"># parametrization, they finalize themselves and fixtures depending on it</span>
</span><span id="FixtureDef-1044"><a href="#FixtureDef-1044"><span class="linenos">1044</span></a>        <span class="c1"># (which will likely include this fixture) setting `self.cached_result = None`.</span>
</span><span id="FixtureDef-1045"><a href="#FixtureDef-1045"><span class="linenos">1045</span></a>        <span class="c1"># See #4871</span>
</span><span id="FixtureDef-1046"><a href="#FixtureDef-1046"><span class="linenos">1046</span></a>        <span class="n">requested_fixtures_that_should_finalize_us</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureDef-1047"><a href="#FixtureDef-1047"><span class="linenos">1047</span></a>        <span class="k">for</span> <span class="n">argname</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">argnames</span><span class="p">:</span>
</span><span id="FixtureDef-1048"><a href="#FixtureDef-1048"><span class="linenos">1048</span></a>            <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">_get_active_fixturedef</span><span class="p">(</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureDef-1049"><a href="#FixtureDef-1049"><span class="linenos">1049</span></a>            <span class="c1"># Saves requested fixtures in a list so we later can add our finalizer</span>
</span><span id="FixtureDef-1050"><a href="#FixtureDef-1050"><span class="linenos">1050</span></a>            <span class="c1"># to them, ensuring that if a requested fixture gets torn down we get torn</span>
</span><span id="FixtureDef-1051"><a href="#FixtureDef-1051"><span class="linenos">1051</span></a>            <span class="c1"># down first. This is generally handled by SetupState, but still currently</span>
</span><span id="FixtureDef-1052"><a href="#FixtureDef-1052"><span class="linenos">1052</span></a>            <span class="c1"># needed when this fixture is not parametrized but depends on a parametrized</span>
</span><span id="FixtureDef-1053"><a href="#FixtureDef-1053"><span class="linenos">1053</span></a>            <span class="c1"># fixture.</span>
</span><span id="FixtureDef-1054"><a href="#FixtureDef-1054"><span class="linenos">1054</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">,</span> <span class="n">PseudoFixtureDef</span><span class="p">):</span>
</span><span id="FixtureDef-1055"><a href="#FixtureDef-1055"><span class="linenos">1055</span></a>                <span class="n">requested_fixtures_that_should_finalize_us</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">)</span>
</span><span id="FixtureDef-1056"><a href="#FixtureDef-1056"><span class="linenos">1056</span></a>
</span><span id="FixtureDef-1057"><a href="#FixtureDef-1057"><span class="linenos">1057</span></a>        <span class="c1"># Check for (and return) cached value/exception.</span>
</span><span id="FixtureDef-1058"><a href="#FixtureDef-1058"><span class="linenos">1058</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef-1059"><a href="#FixtureDef-1059"><span class="linenos">1059</span></a>            <span class="n">request_cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_key</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef-1060"><a href="#FixtureDef-1060"><span class="linenos">1060</span></a>            <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FixtureDef-1061"><a href="#FixtureDef-1061"><span class="linenos">1061</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureDef-1062"><a href="#FixtureDef-1062"><span class="linenos">1062</span></a>                <span class="c1"># Attempt to make a normal == check: this might fail for objects</span>
</span><span id="FixtureDef-1063"><a href="#FixtureDef-1063"><span class="linenos">1063</span></a>                <span class="c1"># which do not implement the standard comparison (like numpy arrays -- #6497).</span>
</span><span id="FixtureDef-1064"><a href="#FixtureDef-1064"><span class="linenos">1064</span></a>                <span class="n">cache_hit</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">request_cache_key</span> <span class="o">==</span> <span class="n">cache_key</span><span class="p">)</span>
</span><span id="FixtureDef-1065"><a href="#FixtureDef-1065"><span class="linenos">1065</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">):</span>
</span><span id="FixtureDef-1066"><a href="#FixtureDef-1066"><span class="linenos">1066</span></a>                <span class="c1"># If the comparison raises, use &#39;is&#39; as fallback.</span>
</span><span id="FixtureDef-1067"><a href="#FixtureDef-1067"><span class="linenos">1067</span></a>                <span class="n">cache_hit</span> <span class="o">=</span> <span class="n">request_cache_key</span> <span class="ow">is</span> <span class="n">cache_key</span>
</span><span id="FixtureDef-1068"><a href="#FixtureDef-1068"><span class="linenos">1068</span></a>
</span><span id="FixtureDef-1069"><a href="#FixtureDef-1069"><span class="linenos">1069</span></a>            <span class="k">if</span> <span class="n">cache_hit</span><span class="p">:</span>
</span><span id="FixtureDef-1070"><a href="#FixtureDef-1070"><span class="linenos">1070</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef-1071"><a href="#FixtureDef-1071"><span class="linenos">1071</span></a>                    <span class="n">exc</span><span class="p">,</span> <span class="n">exc_tb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="FixtureDef-1072"><a href="#FixtureDef-1072"><span class="linenos">1072</span></a>                    <span class="k">raise</span> <span class="n">exc</span><span class="o">.</span><span class="n">with_traceback</span><span class="p">(</span><span class="n">exc_tb</span><span class="p">)</span>
</span><span id="FixtureDef-1073"><a href="#FixtureDef-1073"><span class="linenos">1073</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureDef-1074"><a href="#FixtureDef-1074"><span class="linenos">1074</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FixtureDef-1075"><a href="#FixtureDef-1075"><span class="linenos">1075</span></a>                    <span class="k">return</span> <span class="n">result</span>
</span><span id="FixtureDef-1076"><a href="#FixtureDef-1076"><span class="linenos">1076</span></a>            <span class="c1"># We have a previous but differently parametrized fixture instance</span>
</span><span id="FixtureDef-1077"><a href="#FixtureDef-1077"><span class="linenos">1077</span></a>            <span class="c1"># so we need to tear it down before creating a new one.</span>
</span><span id="FixtureDef-1078"><a href="#FixtureDef-1078"><span class="linenos">1078</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef-1079"><a href="#FixtureDef-1079"><span class="linenos">1079</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="FixtureDef-1080"><a href="#FixtureDef-1080"><span class="linenos">1080</span></a>
</span><span id="FixtureDef-1081"><a href="#FixtureDef-1081"><span class="linenos">1081</span></a>        <span class="c1"># Add finalizer to requested fixtures we saved previously.</span>
</span><span id="FixtureDef-1082"><a href="#FixtureDef-1082"><span class="linenos">1082</span></a>        <span class="c1"># We make sure to do this after checking for cached value to avoid</span>
</span><span id="FixtureDef-1083"><a href="#FixtureDef-1083"><span class="linenos">1083</span></a>        <span class="c1"># adding our finalizer multiple times. (#12135)</span>
</span><span id="FixtureDef-1084"><a href="#FixtureDef-1084"><span class="linenos">1084</span></a>        <span class="n">finalizer</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">finish</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef-1085"><a href="#FixtureDef-1085"><span class="linenos">1085</span></a>        <span class="k">for</span> <span class="n">parent_fixture</span> <span class="ow">in</span> <span class="n">requested_fixtures_that_should_finalize_us</span><span class="p">:</span>
</span><span id="FixtureDef-1086"><a href="#FixtureDef-1086"><span class="linenos">1086</span></a>            <span class="n">parent_fixture</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">finalizer</span><span class="p">)</span>
</span><span id="FixtureDef-1087"><a href="#FixtureDef-1087"><span class="linenos">1087</span></a>
</span><span id="FixtureDef-1088"><a href="#FixtureDef-1088"><span class="linenos">1088</span></a>        <span class="n">ihook</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">ihook</span>
</span><span id="FixtureDef-1089"><a href="#FixtureDef-1089"><span class="linenos">1089</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureDef-1090"><a href="#FixtureDef-1090"><span class="linenos">1090</span></a>            <span class="c1"># Setup the fixture, run the code in it, and cache the value</span>
</span><span id="FixtureDef-1091"><a href="#FixtureDef-1091"><span class="linenos">1091</span></a>            <span class="c1"># in self.cached_result</span>
</span><span id="FixtureDef-1092"><a href="#FixtureDef-1092"><span class="linenos">1092</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_fixture_setup</span><span class="p">(</span><span class="n">fixturedef</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef-1093"><a href="#FixtureDef-1093"><span class="linenos">1093</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="FixtureDef-1094"><a href="#FixtureDef-1094"><span class="linenos">1094</span></a>            <span class="c1"># schedule our finalizer, even if the setup failed</span>
</span><span id="FixtureDef-1095"><a href="#FixtureDef-1095"><span class="linenos">1095</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">finalizer</span><span class="p">)</span>
</span><span id="FixtureDef-1096"><a href="#FixtureDef-1096"><span class="linenos">1096</span></a>
</span><span id="FixtureDef-1097"><a href="#FixtureDef-1097"><span class="linenos">1097</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="FixtureDef-1098"><a href="#FixtureDef-1098"><span class="linenos">1098</span></a>
</span><span id="FixtureDef-1099"><a href="#FixtureDef-1099"><span class="linenos">1099</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
</span><span id="FixtureDef-1100"><a href="#FixtureDef-1100"><span class="linenos">1100</span></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;param&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FixtureDef-1101"><a href="#FixtureDef-1101"><span class="linenos">1101</span></a>
</span><span id="FixtureDef-1102"><a href="#FixtureDef-1102"><span class="linenos">1102</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="FixtureDef-1103"><a href="#FixtureDef-1103"><span class="linenos">1103</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;FixtureDef argname=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">!r}</span><span class="s2"> scope=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">!r}</span><span class="s2"> baseid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">baseid</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A container for a fixture definition.</p>

<p>Note: At this time, only explicitly documented fields and methods are
considered public stable API.</p>
</div>


                            <div id="FixtureDef.__init__" class="classattr">
                                        <input id="FixtureDef.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FixtureDef</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="n">baseid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">argname</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">func</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="o">~</span><span class="n">FixtureValue</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Generator</span><span class="p">[</span><span class="o">~</span><span class="n">FixtureValue</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]]]</span>,</span><span class="param">	<span class="n">scope</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">Scope</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="s1">&#39;package&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span><span class="p">],</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="s1">&#39;package&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">]],</span> <span class="n">NoneType</span><span class="p">]</span>,</span><span class="param">	<span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span><span class="p">]]</span>,</span><span class="param">	<span class="n">ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="FixtureDef.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef.__init__-952"><a href="#FixtureDef.__init__-952"><span class="linenos"> 952</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="FixtureDef.__init__-953"><a href="#FixtureDef.__init__-953"><span class="linenos"> 953</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-954"><a href="#FixtureDef.__init__-954"><span class="linenos"> 954</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-955"><a href="#FixtureDef.__init__-955"><span class="linenos"> 955</span></a>        <span class="n">baseid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-956"><a href="#FixtureDef.__init__-956"><span class="linenos"> 956</span></a>        <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-957"><a href="#FixtureDef.__init__-957"><span class="linenos"> 957</span></a>        <span class="n">func</span><span class="p">:</span> <span class="n">_FixtureFunc</span><span class="p">[</span><span class="n">FixtureValue</span><span class="p">],</span>
</span><span id="FixtureDef.__init__-958"><a href="#FixtureDef.__init__-958"><span class="linenos"> 958</span></a>        <span class="n">scope</span><span class="p">:</span> <span class="n">Scope</span> <span class="o">|</span> <span class="n">_ScopeName</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Config</span><span class="p">],</span> <span class="n">_ScopeName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-959"><a href="#FixtureDef.__init__-959"><span class="linenos"> 959</span></a>        <span class="n">params</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-960"><a href="#FixtureDef.__init__-960"><span class="linenos"> 960</span></a>        <span class="n">ids</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-961"><a href="#FixtureDef.__init__-961"><span class="linenos"> 961</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-962"><a href="#FixtureDef.__init__-962"><span class="linenos"> 962</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="FixtureDef.__init__-963"><a href="#FixtureDef.__init__-963"><span class="linenos"> 963</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef.__init__-964"><a href="#FixtureDef.__init__-964"><span class="linenos"> 964</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="FixtureDef.__init__-965"><a href="#FixtureDef.__init__-965"><span class="linenos"> 965</span></a>        <span class="c1"># The &quot;base&quot; node ID for the fixture.</span>
</span><span id="FixtureDef.__init__-966"><a href="#FixtureDef.__init__-966"><span class="linenos"> 966</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef.__init__-967"><a href="#FixtureDef.__init__-967"><span class="linenos"> 967</span></a>        <span class="c1"># This is a node ID prefix. A fixture is only available to a node (e.g.</span>
</span><span id="FixtureDef.__init__-968"><a href="#FixtureDef.__init__-968"><span class="linenos"> 968</span></a>        <span class="c1"># a `Function` item) if the fixture&#39;s baseid is a nodeid of a parent of</span>
</span><span id="FixtureDef.__init__-969"><a href="#FixtureDef.__init__-969"><span class="linenos"> 969</span></a>        <span class="c1"># node.</span>
</span><span id="FixtureDef.__init__-970"><a href="#FixtureDef.__init__-970"><span class="linenos"> 970</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef.__init__-971"><a href="#FixtureDef.__init__-971"><span class="linenos"> 971</span></a>        <span class="c1"># For a fixture found in a Collector&#39;s object (e.g. a `Module`s module,</span>
</span><span id="FixtureDef.__init__-972"><a href="#FixtureDef.__init__-972"><span class="linenos"> 972</span></a>        <span class="c1"># a `Class`&#39;s class), the baseid is the Collector&#39;s nodeid.</span>
</span><span id="FixtureDef.__init__-973"><a href="#FixtureDef.__init__-973"><span class="linenos"> 973</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef.__init__-974"><a href="#FixtureDef.__init__-974"><span class="linenos"> 974</span></a>        <span class="c1"># For a fixture found in a conftest plugin, the baseid is the conftest&#39;s</span>
</span><span id="FixtureDef.__init__-975"><a href="#FixtureDef.__init__-975"><span class="linenos"> 975</span></a>        <span class="c1"># directory path relative to the rootdir.</span>
</span><span id="FixtureDef.__init__-976"><a href="#FixtureDef.__init__-976"><span class="linenos"> 976</span></a>        <span class="c1">#</span>
</span><span id="FixtureDef.__init__-977"><a href="#FixtureDef.__init__-977"><span class="linenos"> 977</span></a>        <span class="c1"># For other plugins, the baseid is the empty string (always matches).</span>
</span><span id="FixtureDef.__init__-978"><a href="#FixtureDef.__init__-978"><span class="linenos"> 978</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">baseid</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">baseid</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
</span><span id="FixtureDef.__init__-979"><a href="#FixtureDef.__init__-979"><span class="linenos"> 979</span></a>        <span class="c1"># Whether the fixture was found from a node or a conftest in the</span>
</span><span id="FixtureDef.__init__-980"><a href="#FixtureDef.__init__-980"><span class="linenos"> 980</span></a>        <span class="c1"># collection tree. Will be false for fixtures defined in non-conftest</span>
</span><span id="FixtureDef.__init__-981"><a href="#FixtureDef.__init__-981"><span class="linenos"> 981</span></a>        <span class="c1"># plugins.</span>
</span><span id="FixtureDef.__init__-982"><a href="#FixtureDef.__init__-982"><span class="linenos"> 982</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">has_location</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">baseid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureDef.__init__-983"><a href="#FixtureDef.__init__-983"><span class="linenos"> 983</span></a>        <span class="c1"># The fixture factory function.</span>
</span><span id="FixtureDef.__init__-984"><a href="#FixtureDef.__init__-984"><span class="linenos"> 984</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">func</span>
</span><span id="FixtureDef.__init__-985"><a href="#FixtureDef.__init__-985"><span class="linenos"> 985</span></a>        <span class="c1"># The name by which the fixture may be requested.</span>
</span><span id="FixtureDef.__init__-986"><a href="#FixtureDef.__init__-986"><span class="linenos"> 986</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">argname</span>
</span><span id="FixtureDef.__init__-987"><a href="#FixtureDef.__init__-987"><span class="linenos"> 987</span></a>        <span class="k">if</span> <span class="n">scope</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef.__init__-988"><a href="#FixtureDef.__init__-988"><span class="linenos"> 988</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Function</span>
</span><span id="FixtureDef.__init__-989"><a href="#FixtureDef.__init__-989"><span class="linenos"> 989</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">scope</span><span class="p">):</span>
</span><span id="FixtureDef.__init__-990"><a href="#FixtureDef.__init__-990"><span class="linenos"> 990</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">_eval_scope_callable</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">argname</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="FixtureDef.__init__-991"><a href="#FixtureDef.__init__-991"><span class="linenos"> 991</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="FixtureDef.__init__-992"><a href="#FixtureDef.__init__-992"><span class="linenos"> 992</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">Scope</span><span class="o">.</span><span class="n">from_user</span><span class="p">(</span>
</span><span id="FixtureDef.__init__-993"><a href="#FixtureDef.__init__-993"><span class="linenos"> 993</span></a>                <span class="n">scope</span><span class="p">,</span> <span class="n">descr</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Fixture &#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">baseid</span>
</span><span id="FixtureDef.__init__-994"><a href="#FixtureDef.__init__-994"><span class="linenos"> 994</span></a>            <span class="p">)</span>
</span><span id="FixtureDef.__init__-995"><a href="#FixtureDef.__init__-995"><span class="linenos"> 995</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scope</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">scope</span>
</span><span id="FixtureDef.__init__-996"><a href="#FixtureDef.__init__-996"><span class="linenos"> 996</span></a>        <span class="c1"># If the fixture is directly parametrized, the parameter values.</span>
</span><span id="FixtureDef.__init__-997"><a href="#FixtureDef.__init__-997"><span class="linenos"> 997</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="FixtureDef.__init__-998"><a href="#FixtureDef.__init__-998"><span class="linenos"> 998</span></a>        <span class="c1"># If the fixture is directly parametrized, a tuple of explicit IDs to</span>
</span><span id="FixtureDef.__init__-999"><a href="#FixtureDef.__init__-999"><span class="linenos"> 999</span></a>        <span class="c1"># assign to the parameter values, or a callable to generate an ID given</span>
</span><span id="FixtureDef.__init__-1000"><a href="#FixtureDef.__init__-1000"><span class="linenos">1000</span></a>        <span class="c1"># a parameter value.</span>
</span><span id="FixtureDef.__init__-1001"><a href="#FixtureDef.__init__-1001"><span class="linenos">1001</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">ids</span>
</span><span id="FixtureDef.__init__-1002"><a href="#FixtureDef.__init__-1002"><span class="linenos">1002</span></a>        <span class="c1"># The names requested by the fixtures.</span>
</span><span id="FixtureDef.__init__-1003"><a href="#FixtureDef.__init__-1003"><span class="linenos">1003</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">argnames</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">getfuncargnames</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureDef.__init__-1004"><a href="#FixtureDef.__init__-1004"><span class="linenos">1004</span></a>        <span class="c1"># If the fixture was executed, the current value of the fixture.</span>
</span><span id="FixtureDef.__init__-1005"><a href="#FixtureDef.__init__-1005"><span class="linenos">1005</span></a>        <span class="c1"># Can change if the fixture is executed with different parameters.</span>
</span><span id="FixtureDef.__init__-1006"><a href="#FixtureDef.__init__-1006"><span class="linenos">1006</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">:</span> <span class="n">_FixtureCachedResult</span><span class="p">[</span><span class="n">FixtureValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureDef.__init__-1007"><a href="#FixtureDef.__init__-1007"><span class="linenos">1007</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


    

                            </div>
                            <div id="FixtureDef.baseid" class="classattr">
                                <div class="attr variable">
            <span class="name">baseid</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.baseid"></a>
    
    

                            </div>
                            <div id="FixtureDef.has_location" class="classattr">
                                <div class="attr variable">
            <span class="name">has_location</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.has_location"></a>
    
    

                            </div>
                            <div id="FixtureDef.func" class="classattr">
                                <div class="attr variable">
            <span class="name">func</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.func"></a>
    
    

                            </div>
                            <div id="FixtureDef.argname" class="classattr">
                                <div class="attr variable">
            <span class="name">argname</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.argname"></a>
    
    

                            </div>
                            <div id="FixtureDef.params" class="classattr">
                                <div class="attr variable">
            <span class="name">params</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.params"></a>
    
    

                            </div>
                            <div id="FixtureDef.ids" class="classattr">
                                <div class="attr variable">
            <span class="name">ids</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.ids"></a>
    
    

                            </div>
                            <div id="FixtureDef.argnames" class="classattr">
                                <div class="attr variable">
            <span class="name">argnames</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.argnames"></a>
    
    

                            </div>
                            <div id="FixtureDef.cached_result" class="classattr">
                                <div class="attr variable">
            <span class="name">cached_result</span><span class="annotation">: Union[Tuple[~FixtureValue, object, NoneType], Tuple[NoneType, object, Tuple[BaseException, Optional[traceback]]], NoneType]</span>

        
    </div>
    <a class="headerlink" href="#FixtureDef.cached_result"></a>
    
    

                            </div>
                            <div id="FixtureDef.scope" class="classattr">
                                        <input id="FixtureDef.scope-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scope</span><span class="annotation">: Literal[&#39;session&#39;, &#39;package&#39;, &#39;module&#39;, &#39;class&#39;, &#39;function&#39;]</span>

                <label class="view-source-button" for="FixtureDef.scope-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef.scope"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef.scope-1009"><a href="#FixtureDef.scope-1009"><span class="linenos">1009</span></a>    <span class="nd">@property</span>
</span><span id="FixtureDef.scope-1010"><a href="#FixtureDef.scope-1010"><span class="linenos">1010</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scope</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_ScopeName</span><span class="p">:</span>
</span><span id="FixtureDef.scope-1011"><a href="#FixtureDef.scope-1011"><span class="linenos">1011</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scope string, one of &quot;function&quot;, &quot;class&quot;, &quot;module&quot;, &quot;package&quot;, &quot;session&quot;.&quot;&quot;&quot;</span>
</span><span id="FixtureDef.scope-1012"><a href="#FixtureDef.scope-1012"><span class="linenos">1012</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scope</span><span class="o">.</span><span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Scope string, one of "function", "class", "module", "package", "session".</p>
</div>


                            </div>
                            <div id="FixtureDef.addfinalizer" class="classattr">
                                        <input id="FixtureDef.addfinalizer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addfinalizer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">finalizer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="FixtureDef.addfinalizer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef.addfinalizer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef.addfinalizer-1014"><a href="#FixtureDef.addfinalizer-1014"><span class="linenos">1014</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addfinalizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">finalizer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef.addfinalizer-1015"><a href="#FixtureDef.addfinalizer-1015"><span class="linenos">1015</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finalizer</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FixtureDef.finish" class="classattr">
                                        <input id="FixtureDef.finish-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">finish</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">SubRequest</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="FixtureDef.finish-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef.finish"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef.finish-1017"><a href="#FixtureDef.finish-1017"><span class="linenos">1017</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef.finish-1018"><a href="#FixtureDef.finish-1018"><span class="linenos">1018</span></a>        <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureDef.finish-1019"><a href="#FixtureDef.finish-1019"><span class="linenos">1019</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="p">:</span>
</span><span id="FixtureDef.finish-1020"><a href="#FixtureDef.finish-1020"><span class="linenos">1020</span></a>            <span class="n">fin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="FixtureDef.finish-1021"><a href="#FixtureDef.finish-1021"><span class="linenos">1021</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureDef.finish-1022"><a href="#FixtureDef.finish-1022"><span class="linenos">1022</span></a>                <span class="n">fin</span><span class="p">()</span>
</span><span id="FixtureDef.finish-1023"><a href="#FixtureDef.finish-1023"><span class="linenos">1023</span></a>            <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="FixtureDef.finish-1024"><a href="#FixtureDef.finish-1024"><span class="linenos">1024</span></a>                <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="FixtureDef.finish-1025"><a href="#FixtureDef.finish-1025"><span class="linenos">1025</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span>
</span><span id="FixtureDef.finish-1026"><a href="#FixtureDef.finish-1026"><span class="linenos">1026</span></a>        <span class="n">node</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_fixture_post_finalizer</span><span class="p">(</span><span class="n">fixturedef</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef.finish-1027"><a href="#FixtureDef.finish-1027"><span class="linenos">1027</span></a>        <span class="c1"># Even if finalization fails, we invalidate the cached fixture</span>
</span><span id="FixtureDef.finish-1028"><a href="#FixtureDef.finish-1028"><span class="linenos">1028</span></a>        <span class="c1"># value and remove all finalizers because they may be bound methods</span>
</span><span id="FixtureDef.finish-1029"><a href="#FixtureDef.finish-1029"><span class="linenos">1029</span></a>        <span class="c1"># which will keep instances alive.</span>
</span><span id="FixtureDef.finish-1030"><a href="#FixtureDef.finish-1030"><span class="linenos">1030</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureDef.finish-1031"><a href="#FixtureDef.finish-1031"><span class="linenos">1031</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_finalizers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="FixtureDef.finish-1032"><a href="#FixtureDef.finish-1032"><span class="linenos">1032</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">exceptions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FixtureDef.finish-1033"><a href="#FixtureDef.finish-1033"><span class="linenos">1033</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FixtureDef.finish-1034"><a href="#FixtureDef.finish-1034"><span class="linenos">1034</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">exceptions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FixtureDef.finish-1035"><a href="#FixtureDef.finish-1035"><span class="linenos">1035</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;errors while tearing down fixture &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s1">&quot; of </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="FixtureDef.finish-1036"><a href="#FixtureDef.finish-1036"><span class="linenos">1036</span></a>            <span class="k">raise</span> <span class="n">BaseExceptionGroup</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span></pre></div>


    

                            </div>
                            <div id="FixtureDef.execute" class="classattr">
                                        <input id="FixtureDef.execute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">SubRequest</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">FixtureValue</span>:</span></span>

                <label class="view-source-button" for="FixtureDef.execute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef.execute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef.execute-1038"><a href="#FixtureDef.execute-1038"><span class="linenos">1038</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureValue</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1039"><a href="#FixtureDef.execute-1039"><span class="linenos">1039</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the value of this fixture, executing it if not cached.&quot;&quot;&quot;</span>
</span><span id="FixtureDef.execute-1040"><a href="#FixtureDef.execute-1040"><span class="linenos">1040</span></a>        <span class="c1"># Ensure that the dependent fixtures requested by this fixture are loaded.</span>
</span><span id="FixtureDef.execute-1041"><a href="#FixtureDef.execute-1041"><span class="linenos">1041</span></a>        <span class="c1"># This needs to be done before checking if we have a cached value, since</span>
</span><span id="FixtureDef.execute-1042"><a href="#FixtureDef.execute-1042"><span class="linenos">1042</span></a>        <span class="c1"># if a dependent fixture has their cache invalidated, e.g. due to</span>
</span><span id="FixtureDef.execute-1043"><a href="#FixtureDef.execute-1043"><span class="linenos">1043</span></a>        <span class="c1"># parametrization, they finalize themselves and fixtures depending on it</span>
</span><span id="FixtureDef.execute-1044"><a href="#FixtureDef.execute-1044"><span class="linenos">1044</span></a>        <span class="c1"># (which will likely include this fixture) setting `self.cached_result = None`.</span>
</span><span id="FixtureDef.execute-1045"><a href="#FixtureDef.execute-1045"><span class="linenos">1045</span></a>        <span class="c1"># See #4871</span>
</span><span id="FixtureDef.execute-1046"><a href="#FixtureDef.execute-1046"><span class="linenos">1046</span></a>        <span class="n">requested_fixtures_that_should_finalize_us</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureDef.execute-1047"><a href="#FixtureDef.execute-1047"><span class="linenos">1047</span></a>        <span class="k">for</span> <span class="n">argname</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">argnames</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1048"><a href="#FixtureDef.execute-1048"><span class="linenos">1048</span></a>            <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">_get_active_fixturedef</span><span class="p">(</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1049"><a href="#FixtureDef.execute-1049"><span class="linenos">1049</span></a>            <span class="c1"># Saves requested fixtures in a list so we later can add our finalizer</span>
</span><span id="FixtureDef.execute-1050"><a href="#FixtureDef.execute-1050"><span class="linenos">1050</span></a>            <span class="c1"># to them, ensuring that if a requested fixture gets torn down we get torn</span>
</span><span id="FixtureDef.execute-1051"><a href="#FixtureDef.execute-1051"><span class="linenos">1051</span></a>            <span class="c1"># down first. This is generally handled by SetupState, but still currently</span>
</span><span id="FixtureDef.execute-1052"><a href="#FixtureDef.execute-1052"><span class="linenos">1052</span></a>            <span class="c1"># needed when this fixture is not parametrized but depends on a parametrized</span>
</span><span id="FixtureDef.execute-1053"><a href="#FixtureDef.execute-1053"><span class="linenos">1053</span></a>            <span class="c1"># fixture.</span>
</span><span id="FixtureDef.execute-1054"><a href="#FixtureDef.execute-1054"><span class="linenos">1054</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">,</span> <span class="n">PseudoFixtureDef</span><span class="p">):</span>
</span><span id="FixtureDef.execute-1055"><a href="#FixtureDef.execute-1055"><span class="linenos">1055</span></a>                <span class="n">requested_fixtures_that_should_finalize_us</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1056"><a href="#FixtureDef.execute-1056"><span class="linenos">1056</span></a>
</span><span id="FixtureDef.execute-1057"><a href="#FixtureDef.execute-1057"><span class="linenos">1057</span></a>        <span class="c1"># Check for (and return) cached value/exception.</span>
</span><span id="FixtureDef.execute-1058"><a href="#FixtureDef.execute-1058"><span class="linenos">1058</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1059"><a href="#FixtureDef.execute-1059"><span class="linenos">1059</span></a>            <span class="n">request_cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_key</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1060"><a href="#FixtureDef.execute-1060"><span class="linenos">1060</span></a>            <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FixtureDef.execute-1061"><a href="#FixtureDef.execute-1061"><span class="linenos">1061</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1062"><a href="#FixtureDef.execute-1062"><span class="linenos">1062</span></a>                <span class="c1"># Attempt to make a normal == check: this might fail for objects</span>
</span><span id="FixtureDef.execute-1063"><a href="#FixtureDef.execute-1063"><span class="linenos">1063</span></a>                <span class="c1"># which do not implement the standard comparison (like numpy arrays -- #6497).</span>
</span><span id="FixtureDef.execute-1064"><a href="#FixtureDef.execute-1064"><span class="linenos">1064</span></a>                <span class="n">cache_hit</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">request_cache_key</span> <span class="o">==</span> <span class="n">cache_key</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1065"><a href="#FixtureDef.execute-1065"><span class="linenos">1065</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">):</span>
</span><span id="FixtureDef.execute-1066"><a href="#FixtureDef.execute-1066"><span class="linenos">1066</span></a>                <span class="c1"># If the comparison raises, use &#39;is&#39; as fallback.</span>
</span><span id="FixtureDef.execute-1067"><a href="#FixtureDef.execute-1067"><span class="linenos">1067</span></a>                <span class="n">cache_hit</span> <span class="o">=</span> <span class="n">request_cache_key</span> <span class="ow">is</span> <span class="n">cache_key</span>
</span><span id="FixtureDef.execute-1068"><a href="#FixtureDef.execute-1068"><span class="linenos">1068</span></a>
</span><span id="FixtureDef.execute-1069"><a href="#FixtureDef.execute-1069"><span class="linenos">1069</span></a>            <span class="k">if</span> <span class="n">cache_hit</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1070"><a href="#FixtureDef.execute-1070"><span class="linenos">1070</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1071"><a href="#FixtureDef.execute-1071"><span class="linenos">1071</span></a>                    <span class="n">exc</span><span class="p">,</span> <span class="n">exc_tb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="FixtureDef.execute-1072"><a href="#FixtureDef.execute-1072"><span class="linenos">1072</span></a>                    <span class="k">raise</span> <span class="n">exc</span><span class="o">.</span><span class="n">with_traceback</span><span class="p">(</span><span class="n">exc_tb</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1073"><a href="#FixtureDef.execute-1073"><span class="linenos">1073</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1074"><a href="#FixtureDef.execute-1074"><span class="linenos">1074</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FixtureDef.execute-1075"><a href="#FixtureDef.execute-1075"><span class="linenos">1075</span></a>                    <span class="k">return</span> <span class="n">result</span>
</span><span id="FixtureDef.execute-1076"><a href="#FixtureDef.execute-1076"><span class="linenos">1076</span></a>            <span class="c1"># We have a previous but differently parametrized fixture instance</span>
</span><span id="FixtureDef.execute-1077"><a href="#FixtureDef.execute-1077"><span class="linenos">1077</span></a>            <span class="c1"># so we need to tear it down before creating a new one.</span>
</span><span id="FixtureDef.execute-1078"><a href="#FixtureDef.execute-1078"><span class="linenos">1078</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1079"><a href="#FixtureDef.execute-1079"><span class="linenos">1079</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="FixtureDef.execute-1080"><a href="#FixtureDef.execute-1080"><span class="linenos">1080</span></a>
</span><span id="FixtureDef.execute-1081"><a href="#FixtureDef.execute-1081"><span class="linenos">1081</span></a>        <span class="c1"># Add finalizer to requested fixtures we saved previously.</span>
</span><span id="FixtureDef.execute-1082"><a href="#FixtureDef.execute-1082"><span class="linenos">1082</span></a>        <span class="c1"># We make sure to do this after checking for cached value to avoid</span>
</span><span id="FixtureDef.execute-1083"><a href="#FixtureDef.execute-1083"><span class="linenos">1083</span></a>        <span class="c1"># adding our finalizer multiple times. (#12135)</span>
</span><span id="FixtureDef.execute-1084"><a href="#FixtureDef.execute-1084"><span class="linenos">1084</span></a>        <span class="n">finalizer</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">finish</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1085"><a href="#FixtureDef.execute-1085"><span class="linenos">1085</span></a>        <span class="k">for</span> <span class="n">parent_fixture</span> <span class="ow">in</span> <span class="n">requested_fixtures_that_should_finalize_us</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1086"><a href="#FixtureDef.execute-1086"><span class="linenos">1086</span></a>            <span class="n">parent_fixture</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">finalizer</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1087"><a href="#FixtureDef.execute-1087"><span class="linenos">1087</span></a>
</span><span id="FixtureDef.execute-1088"><a href="#FixtureDef.execute-1088"><span class="linenos">1088</span></a>        <span class="n">ihook</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">ihook</span>
</span><span id="FixtureDef.execute-1089"><a href="#FixtureDef.execute-1089"><span class="linenos">1089</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1090"><a href="#FixtureDef.execute-1090"><span class="linenos">1090</span></a>            <span class="c1"># Setup the fixture, run the code in it, and cache the value</span>
</span><span id="FixtureDef.execute-1091"><a href="#FixtureDef.execute-1091"><span class="linenos">1091</span></a>            <span class="c1"># in self.cached_result</span>
</span><span id="FixtureDef.execute-1092"><a href="#FixtureDef.execute-1092"><span class="linenos">1092</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_fixture_setup</span><span class="p">(</span><span class="n">fixturedef</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1093"><a href="#FixtureDef.execute-1093"><span class="linenos">1093</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="FixtureDef.execute-1094"><a href="#FixtureDef.execute-1094"><span class="linenos">1094</span></a>            <span class="c1"># schedule our finalizer, even if the setup failed</span>
</span><span id="FixtureDef.execute-1095"><a href="#FixtureDef.execute-1095"><span class="linenos">1095</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">finalizer</span><span class="p">)</span>
</span><span id="FixtureDef.execute-1096"><a href="#FixtureDef.execute-1096"><span class="linenos">1096</span></a>
</span><span id="FixtureDef.execute-1097"><a href="#FixtureDef.execute-1097"><span class="linenos">1097</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Return the value of this fixture, executing it if not cached.</p>
</div>


                            </div>
                            <div id="FixtureDef.cache_key" class="classattr">
                                        <input id="FixtureDef.cache_key-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cache_key</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">SubRequest</span></span><span class="return-annotation">) -> <span class="nb">object</span>:</span></span>

                <label class="view-source-button" for="FixtureDef.cache_key-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureDef.cache_key"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureDef.cache_key-1099"><a href="#FixtureDef.cache_key-1099"><span class="linenos">1099</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">SubRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
</span><span id="FixtureDef.cache_key-1100"><a href="#FixtureDef.cache_key-1100"><span class="linenos">1100</span></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;param&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="FixtureLookupError">
                            <input id="FixtureLookupError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">FixtureLookupError</span><wbr>(<span class="base">builtins.LookupError</span>):

                <label class="view-source-button" for="FixtureLookupError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureLookupError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureLookupError-791"><a href="#FixtureLookupError-791"><span class="linenos">791</span></a><span class="nd">@final</span>
</span><span id="FixtureLookupError-792"><a href="#FixtureLookupError-792"><span class="linenos">792</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FixtureLookupError</span><span class="p">(</span><span class="ne">LookupError</span><span class="p">):</span>
</span><span id="FixtureLookupError-793"><a href="#FixtureLookupError-793"><span class="linenos">793</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Could not return a requested fixture (missing or invalid).&quot;&quot;&quot;</span>
</span><span id="FixtureLookupError-794"><a href="#FixtureLookupError-794"><span class="linenos">794</span></a>
</span><span id="FixtureLookupError-795"><a href="#FixtureLookupError-795"><span class="linenos">795</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="FixtureLookupError-796"><a href="#FixtureLookupError-796"><span class="linenos">796</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureLookupError-797"><a href="#FixtureLookupError-797"><span class="linenos">797</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureLookupError-798"><a href="#FixtureLookupError-798"><span class="linenos">798</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">argname</span> <span class="o">=</span> <span class="n">argname</span>
</span><span id="FixtureLookupError-799"><a href="#FixtureLookupError-799"><span class="linenos">799</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
</span><span id="FixtureLookupError-800"><a href="#FixtureLookupError-800"><span class="linenos">800</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturestack</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">_get_fixturestack</span><span class="p">()</span>
</span><span id="FixtureLookupError-801"><a href="#FixtureLookupError-801"><span class="linenos">801</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span>
</span><span id="FixtureLookupError-802"><a href="#FixtureLookupError-802"><span class="linenos">802</span></a>
</span><span id="FixtureLookupError-803"><a href="#FixtureLookupError-803"><span class="linenos">803</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">formatrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureLookupErrorRepr</span><span class="p">:</span>
</span><span id="FixtureLookupError-804"><a href="#FixtureLookupError-804"><span class="linenos">804</span></a>        <span class="n">tblines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureLookupError-805"><a href="#FixtureLookupError-805"><span class="linenos">805</span></a>        <span class="n">addline</span> <span class="o">=</span> <span class="n">tblines</span><span class="o">.</span><span class="n">append</span>
</span><span id="FixtureLookupError-806"><a href="#FixtureLookupError-806"><span class="linenos">806</span></a>        <span class="n">stack</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">obj</span><span class="p">]</span>
</span><span id="FixtureLookupError-807"><a href="#FixtureLookupError-807"><span class="linenos">807</span></a>        <span class="n">stack</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixturestack</span><span class="p">))</span>
</span><span id="FixtureLookupError-808"><a href="#FixtureLookupError-808"><span class="linenos">808</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">msg</span>
</span><span id="FixtureLookupError-809"><a href="#FixtureLookupError-809"><span class="linenos">809</span></a>        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureLookupError-810"><a href="#FixtureLookupError-810"><span class="linenos">810</span></a>            <span class="c1"># The last fixture raise an error, let&#39;s present</span>
</span><span id="FixtureLookupError-811"><a href="#FixtureLookupError-811"><span class="linenos">811</span></a>            <span class="c1"># it at the requesting side.</span>
</span><span id="FixtureLookupError-812"><a href="#FixtureLookupError-812"><span class="linenos">812</span></a>            <span class="n">stack</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FixtureLookupError-813"><a href="#FixtureLookupError-813"><span class="linenos">813</span></a>        <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">stack</span><span class="p">:</span>
</span><span id="FixtureLookupError-814"><a href="#FixtureLookupError-814"><span class="linenos">814</span></a>            <span class="n">fspath</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">=</span> <span class="n">getfslineno</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
</span><span id="FixtureLookupError-815"><a href="#FixtureLookupError-815"><span class="linenos">815</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureLookupError-816"><a href="#FixtureLookupError-816"><span class="linenos">816</span></a>                <span class="n">lines</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsourcelines</span><span class="p">(</span><span class="n">get_real_func</span><span class="p">(</span><span class="n">function</span><span class="p">))</span>
</span><span id="FixtureLookupError-817"><a href="#FixtureLookupError-817"><span class="linenos">817</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="FixtureLookupError-818"><a href="#FixtureLookupError-818"><span class="linenos">818</span></a>                <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">&quot;file </span><span class="si">%s</span><span class="s2">, line </span><span class="si">%s</span><span class="s2">: source code not available&quot;</span>
</span><span id="FixtureLookupError-819"><a href="#FixtureLookupError-819"><span class="linenos">819</span></a>                <span class="n">addline</span><span class="p">(</span><span class="n">error_msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">fspath</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="FixtureLookupError-820"><a href="#FixtureLookupError-820"><span class="linenos">820</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureLookupError-821"><a href="#FixtureLookupError-821"><span class="linenos">821</span></a>                <span class="n">addline</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file </span><span class="si">{</span><span class="n">fspath</span><span class="si">}</span><span class="s2">, line </span><span class="si">{</span><span class="n">lineno</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="FixtureLookupError-822"><a href="#FixtureLookupError-822"><span class="linenos">822</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
</span><span id="FixtureLookupError-823"><a href="#FixtureLookupError-823"><span class="linenos">823</span></a>                    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</span><span id="FixtureLookupError-824"><a href="#FixtureLookupError-824"><span class="linenos">824</span></a>                    <span class="n">addline</span><span class="p">(</span><span class="s2">&quot;  &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>
</span><span id="FixtureLookupError-825"><a href="#FixtureLookupError-825"><span class="linenos">825</span></a>                    <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;def&quot;</span><span class="p">):</span>
</span><span id="FixtureLookupError-826"><a href="#FixtureLookupError-826"><span class="linenos">826</span></a>                        <span class="k">break</span>
</span><span id="FixtureLookupError-827"><a href="#FixtureLookupError-827"><span class="linenos">827</span></a>
</span><span id="FixtureLookupError-828"><a href="#FixtureLookupError-828"><span class="linenos">828</span></a>        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureLookupError-829"><a href="#FixtureLookupError-829"><span class="linenos">829</span></a>            <span class="n">fm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="FixtureLookupError-830"><a href="#FixtureLookupError-830"><span class="linenos">830</span></a>            <span class="n">available</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="FixtureLookupError-831"><a href="#FixtureLookupError-831"><span class="linenos">831</span></a>            <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">parent</span>
</span><span id="FixtureLookupError-832"><a href="#FixtureLookupError-832"><span class="linenos">832</span></a>            <span class="k">assert</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureLookupError-833"><a href="#FixtureLookupError-833"><span class="linenos">833</span></a>            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">fixturedefs</span> <span class="ow">in</span> <span class="n">fm</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FixtureLookupError-834"><a href="#FixtureLookupError-834"><span class="linenos">834</span></a>                <span class="n">faclist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fm</span><span class="o">.</span><span class="n">_matchfactories</span><span class="p">(</span><span class="n">fixturedefs</span><span class="p">,</span> <span class="n">parent</span><span class="p">))</span>
</span><span id="FixtureLookupError-835"><a href="#FixtureLookupError-835"><span class="linenos">835</span></a>                <span class="k">if</span> <span class="n">faclist</span><span class="p">:</span>
</span><span id="FixtureLookupError-836"><a href="#FixtureLookupError-836"><span class="linenos">836</span></a>                    <span class="n">available</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="FixtureLookupError-837"><a href="#FixtureLookupError-837"><span class="linenos">837</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">argname</span> <span class="ow">in</span> <span class="n">available</span><span class="p">:</span>
</span><span id="FixtureLookupError-838"><a href="#FixtureLookupError-838"><span class="linenos">838</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="FixtureLookupError-839"><a href="#FixtureLookupError-839"><span class="linenos">839</span></a>                    <span class="sa">f</span><span class="s2">&quot; recursive dependency involving fixture &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s2">&#39; detected&quot;</span>
</span><span id="FixtureLookupError-840"><a href="#FixtureLookupError-840"><span class="linenos">840</span></a>                <span class="p">)</span>
</span><span id="FixtureLookupError-841"><a href="#FixtureLookupError-841"><span class="linenos">841</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureLookupError-842"><a href="#FixtureLookupError-842"><span class="linenos">842</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;fixture &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span>
</span><span id="FixtureLookupError-843"><a href="#FixtureLookupError-843"><span class="linenos">843</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> available fixtures: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">available</span><span class="p">)))</span>
</span><span id="FixtureLookupError-844"><a href="#FixtureLookupError-844"><span class="linenos">844</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> use &#39;pytest --fixtures [testpath]&#39; for help on them.&quot;</span>
</span><span id="FixtureLookupError-845"><a href="#FixtureLookupError-845"><span class="linenos">845</span></a>
</span><span id="FixtureLookupError-846"><a href="#FixtureLookupError-846"><span class="linenos">846</span></a>        <span class="k">return</span> <span class="n">FixtureLookupErrorRepr</span><span class="p">(</span><span class="n">fspath</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">tblines</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Could not return a requested fixture (missing or invalid).</p>
</div>


                            <div id="FixtureLookupError.__init__" class="classattr">
                                        <input id="FixtureLookupError.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FixtureLookupError</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">argname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">FixtureRequest</span>,</span><span class="param">	<span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="FixtureLookupError.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureLookupError.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureLookupError.__init__-795"><a href="#FixtureLookupError.__init__-795"><span class="linenos">795</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="FixtureLookupError.__init__-796"><a href="#FixtureLookupError.__init__-796"><span class="linenos">796</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureLookupError.__init__-797"><a href="#FixtureLookupError.__init__-797"><span class="linenos">797</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureLookupError.__init__-798"><a href="#FixtureLookupError.__init__-798"><span class="linenos">798</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">argname</span> <span class="o">=</span> <span class="n">argname</span>
</span><span id="FixtureLookupError.__init__-799"><a href="#FixtureLookupError.__init__-799"><span class="linenos">799</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
</span><span id="FixtureLookupError.__init__-800"><a href="#FixtureLookupError.__init__-800"><span class="linenos">800</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturestack</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">_get_fixturestack</span><span class="p">()</span>
</span><span id="FixtureLookupError.__init__-801"><a href="#FixtureLookupError.__init__-801"><span class="linenos">801</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span>
</span></pre></div>


    

                            </div>
                            <div id="FixtureLookupError.argname" class="classattr">
                                <div class="attr variable">
            <span class="name">argname</span>

        
    </div>
    <a class="headerlink" href="#FixtureLookupError.argname"></a>
    
    

                            </div>
                            <div id="FixtureLookupError.request" class="classattr">
                                <div class="attr variable">
            <span class="name">request</span>

        
    </div>
    <a class="headerlink" href="#FixtureLookupError.request"></a>
    
    

                            </div>
                            <div id="FixtureLookupError.fixturestack" class="classattr">
                                <div class="attr variable">
            <span class="name">fixturestack</span>

        
    </div>
    <a class="headerlink" href="#FixtureLookupError.fixturestack"></a>
    
    

                            </div>
                            <div id="FixtureLookupError.msg" class="classattr">
                                <div class="attr variable">
            <span class="name">msg</span>

        
    </div>
    <a class="headerlink" href="#FixtureLookupError.msg"></a>
    
    

                            </div>
                            <div id="FixtureLookupError.formatrepr" class="classattr">
                                        <input id="FixtureLookupError.formatrepr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">formatrepr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">FixtureLookupErrorRepr</span>:</span></span>

                <label class="view-source-button" for="FixtureLookupError.formatrepr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureLookupError.formatrepr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureLookupError.formatrepr-803"><a href="#FixtureLookupError.formatrepr-803"><span class="linenos">803</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">formatrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureLookupErrorRepr</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-804"><a href="#FixtureLookupError.formatrepr-804"><span class="linenos">804</span></a>        <span class="n">tblines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FixtureLookupError.formatrepr-805"><a href="#FixtureLookupError.formatrepr-805"><span class="linenos">805</span></a>        <span class="n">addline</span> <span class="o">=</span> <span class="n">tblines</span><span class="o">.</span><span class="n">append</span>
</span><span id="FixtureLookupError.formatrepr-806"><a href="#FixtureLookupError.formatrepr-806"><span class="linenos">806</span></a>        <span class="n">stack</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">obj</span><span class="p">]</span>
</span><span id="FixtureLookupError.formatrepr-807"><a href="#FixtureLookupError.formatrepr-807"><span class="linenos">807</span></a>        <span class="n">stack</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixturestack</span><span class="p">))</span>
</span><span id="FixtureLookupError.formatrepr-808"><a href="#FixtureLookupError.formatrepr-808"><span class="linenos">808</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">msg</span>
</span><span id="FixtureLookupError.formatrepr-809"><a href="#FixtureLookupError.formatrepr-809"><span class="linenos">809</span></a>        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-810"><a href="#FixtureLookupError.formatrepr-810"><span class="linenos">810</span></a>            <span class="c1"># The last fixture raise an error, let&#39;s present</span>
</span><span id="FixtureLookupError.formatrepr-811"><a href="#FixtureLookupError.formatrepr-811"><span class="linenos">811</span></a>            <span class="c1"># it at the requesting side.</span>
</span><span id="FixtureLookupError.formatrepr-812"><a href="#FixtureLookupError.formatrepr-812"><span class="linenos">812</span></a>            <span class="n">stack</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FixtureLookupError.formatrepr-813"><a href="#FixtureLookupError.formatrepr-813"><span class="linenos">813</span></a>        <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">stack</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-814"><a href="#FixtureLookupError.formatrepr-814"><span class="linenos">814</span></a>            <span class="n">fspath</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">=</span> <span class="n">getfslineno</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
</span><span id="FixtureLookupError.formatrepr-815"><a href="#FixtureLookupError.formatrepr-815"><span class="linenos">815</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-816"><a href="#FixtureLookupError.formatrepr-816"><span class="linenos">816</span></a>                <span class="n">lines</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsourcelines</span><span class="p">(</span><span class="n">get_real_func</span><span class="p">(</span><span class="n">function</span><span class="p">))</span>
</span><span id="FixtureLookupError.formatrepr-817"><a href="#FixtureLookupError.formatrepr-817"><span class="linenos">817</span></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="FixtureLookupError.formatrepr-818"><a href="#FixtureLookupError.formatrepr-818"><span class="linenos">818</span></a>                <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">&quot;file </span><span class="si">%s</span><span class="s2">, line </span><span class="si">%s</span><span class="s2">: source code not available&quot;</span>
</span><span id="FixtureLookupError.formatrepr-819"><a href="#FixtureLookupError.formatrepr-819"><span class="linenos">819</span></a>                <span class="n">addline</span><span class="p">(</span><span class="n">error_msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">fspath</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="FixtureLookupError.formatrepr-820"><a href="#FixtureLookupError.formatrepr-820"><span class="linenos">820</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-821"><a href="#FixtureLookupError.formatrepr-821"><span class="linenos">821</span></a>                <span class="n">addline</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file </span><span class="si">{</span><span class="n">fspath</span><span class="si">}</span><span class="s2">, line </span><span class="si">{</span><span class="n">lineno</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="FixtureLookupError.formatrepr-822"><a href="#FixtureLookupError.formatrepr-822"><span class="linenos">822</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
</span><span id="FixtureLookupError.formatrepr-823"><a href="#FixtureLookupError.formatrepr-823"><span class="linenos">823</span></a>                    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</span><span id="FixtureLookupError.formatrepr-824"><a href="#FixtureLookupError.formatrepr-824"><span class="linenos">824</span></a>                    <span class="n">addline</span><span class="p">(</span><span class="s2">&quot;  &quot;</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>
</span><span id="FixtureLookupError.formatrepr-825"><a href="#FixtureLookupError.formatrepr-825"><span class="linenos">825</span></a>                    <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;def&quot;</span><span class="p">):</span>
</span><span id="FixtureLookupError.formatrepr-826"><a href="#FixtureLookupError.formatrepr-826"><span class="linenos">826</span></a>                        <span class="k">break</span>
</span><span id="FixtureLookupError.formatrepr-827"><a href="#FixtureLookupError.formatrepr-827"><span class="linenos">827</span></a>
</span><span id="FixtureLookupError.formatrepr-828"><a href="#FixtureLookupError.formatrepr-828"><span class="linenos">828</span></a>        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-829"><a href="#FixtureLookupError.formatrepr-829"><span class="linenos">829</span></a>            <span class="n">fm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="FixtureLookupError.formatrepr-830"><a href="#FixtureLookupError.formatrepr-830"><span class="linenos">830</span></a>            <span class="n">available</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="FixtureLookupError.formatrepr-831"><a href="#FixtureLookupError.formatrepr-831"><span class="linenos">831</span></a>            <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">parent</span>
</span><span id="FixtureLookupError.formatrepr-832"><a href="#FixtureLookupError.formatrepr-832"><span class="linenos">832</span></a>            <span class="k">assert</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureLookupError.formatrepr-833"><a href="#FixtureLookupError.formatrepr-833"><span class="linenos">833</span></a>            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">fixturedefs</span> <span class="ow">in</span> <span class="n">fm</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FixtureLookupError.formatrepr-834"><a href="#FixtureLookupError.formatrepr-834"><span class="linenos">834</span></a>                <span class="n">faclist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fm</span><span class="o">.</span><span class="n">_matchfactories</span><span class="p">(</span><span class="n">fixturedefs</span><span class="p">,</span> <span class="n">parent</span><span class="p">))</span>
</span><span id="FixtureLookupError.formatrepr-835"><a href="#FixtureLookupError.formatrepr-835"><span class="linenos">835</span></a>                <span class="k">if</span> <span class="n">faclist</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-836"><a href="#FixtureLookupError.formatrepr-836"><span class="linenos">836</span></a>                    <span class="n">available</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="FixtureLookupError.formatrepr-837"><a href="#FixtureLookupError.formatrepr-837"><span class="linenos">837</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">argname</span> <span class="ow">in</span> <span class="n">available</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-838"><a href="#FixtureLookupError.formatrepr-838"><span class="linenos">838</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="FixtureLookupError.formatrepr-839"><a href="#FixtureLookupError.formatrepr-839"><span class="linenos">839</span></a>                    <span class="sa">f</span><span class="s2">&quot; recursive dependency involving fixture &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s2">&#39; detected&quot;</span>
</span><span id="FixtureLookupError.formatrepr-840"><a href="#FixtureLookupError.formatrepr-840"><span class="linenos">840</span></a>                <span class="p">)</span>
</span><span id="FixtureLookupError.formatrepr-841"><a href="#FixtureLookupError.formatrepr-841"><span class="linenos">841</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureLookupError.formatrepr-842"><a href="#FixtureLookupError.formatrepr-842"><span class="linenos">842</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;fixture &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span>
</span><span id="FixtureLookupError.formatrepr-843"><a href="#FixtureLookupError.formatrepr-843"><span class="linenos">843</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> available fixtures: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">available</span><span class="p">)))</span>
</span><span id="FixtureLookupError.formatrepr-844"><a href="#FixtureLookupError.formatrepr-844"><span class="linenos">844</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> use &#39;pytest --fixtures [testpath]&#39; for help on them.&quot;</span>
</span><span id="FixtureLookupError.formatrepr-845"><a href="#FixtureLookupError.formatrepr-845"><span class="linenos">845</span></a>
</span><span id="FixtureLookupError.formatrepr-846"><a href="#FixtureLookupError.formatrepr-846"><span class="linenos">846</span></a>        <span class="k">return</span> <span class="n">FixtureLookupErrorRepr</span><span class="p">(</span><span class="n">fspath</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">tblines</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">argname</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="FixtureRequest">
                            <input id="FixtureRequest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FixtureRequest</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="FixtureRequest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest-356"><a href="#FixtureRequest-356"><span class="linenos">356</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FixtureRequest</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="FixtureRequest-357"><a href="#FixtureRequest-357"><span class="linenos">357</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The type of the ``request`` fixture.</span>
</span><span id="FixtureRequest-358"><a href="#FixtureRequest-358"><span class="linenos">358</span></a>
</span><span id="FixtureRequest-359"><a href="#FixtureRequest-359"><span class="linenos">359</span></a><span class="sd">    A request object gives access to the requesting test context and has a</span>
</span><span id="FixtureRequest-360"><a href="#FixtureRequest-360"><span class="linenos">360</span></a><span class="sd">    ``param`` attribute in case the fixture is parametrized.</span>
</span><span id="FixtureRequest-361"><a href="#FixtureRequest-361"><span class="linenos">361</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="FixtureRequest-362"><a href="#FixtureRequest-362"><span class="linenos">362</span></a>
</span><span id="FixtureRequest-363"><a href="#FixtureRequest-363"><span class="linenos">363</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="FixtureRequest-364"><a href="#FixtureRequest-364"><span class="linenos">364</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="FixtureRequest-365"><a href="#FixtureRequest-365"><span class="linenos">365</span></a>        <span class="n">pyfuncitem</span><span class="p">:</span> <span class="n">Function</span><span class="p">,</span>
</span><span id="FixtureRequest-366"><a href="#FixtureRequest-366"><span class="linenos">366</span></a>        <span class="n">fixturename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FixtureRequest-367"><a href="#FixtureRequest-367"><span class="linenos">367</span></a>        <span class="n">arg2fixturedefs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">FixtureDef</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span>
</span><span id="FixtureRequest-368"><a href="#FixtureRequest-368"><span class="linenos">368</span></a>        <span class="n">fixture_defs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FixtureDef</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
</span><span id="FixtureRequest-369"><a href="#FixtureRequest-369"><span class="linenos">369</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="FixtureRequest-370"><a href="#FixtureRequest-370"><span class="linenos">370</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="FixtureRequest-371"><a href="#FixtureRequest-371"><span class="linenos">371</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-372"><a href="#FixtureRequest-372"><span class="linenos">372</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="FixtureRequest-373"><a href="#FixtureRequest-373"><span class="linenos">373</span></a>        <span class="c1">#: Fixture for which this request is being performed.</span>
</span><span id="FixtureRequest-374"><a href="#FixtureRequest-374"><span class="linenos">374</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturename</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">fixturename</span>
</span><span id="FixtureRequest-375"><a href="#FixtureRequest-375"><span class="linenos">375</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pyfuncitem</span>
</span><span id="FixtureRequest-376"><a href="#FixtureRequest-376"><span class="linenos">376</span></a>        <span class="c1"># The FixtureDefs for each fixture name requested by this item.</span>
</span><span id="FixtureRequest-377"><a href="#FixtureRequest-377"><span class="linenos">377</span></a>        <span class="c1"># Starts from the statically-known fixturedefs resolved during</span>
</span><span id="FixtureRequest-378"><a href="#FixtureRequest-378"><span class="linenos">378</span></a>        <span class="c1"># collection. Dynamically requested fixtures (using</span>
</span><span id="FixtureRequest-379"><a href="#FixtureRequest-379"><span class="linenos">379</span></a>        <span class="c1"># `request.getfixturevalue(&quot;foo&quot;)`) are added dynamically.</span>
</span><span id="FixtureRequest-380"><a href="#FixtureRequest-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">arg2fixturedefs</span>
</span><span id="FixtureRequest-381"><a href="#FixtureRequest-381"><span class="linenos">381</span></a>        <span class="c1"># The evaluated argnames so far, mapping to the FixtureDef they resolved</span>
</span><span id="FixtureRequest-382"><a href="#FixtureRequest-382"><span class="linenos">382</span></a>        <span class="c1"># to.</span>
</span><span id="FixtureRequest-383"><a href="#FixtureRequest-383"><span class="linenos">383</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fixture_defs</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">fixture_defs</span>
</span><span id="FixtureRequest-384"><a href="#FixtureRequest-384"><span class="linenos">384</span></a>        <span class="c1"># Notes on the type of `param`:</span>
</span><span id="FixtureRequest-385"><a href="#FixtureRequest-385"><span class="linenos">385</span></a>        <span class="c1"># -`request.param` is only defined in parametrized fixtures, and will raise</span>
</span><span id="FixtureRequest-386"><a href="#FixtureRequest-386"><span class="linenos">386</span></a>        <span class="c1">#   AttributeError otherwise. Python typing has no notion of &quot;undefined&quot;, so</span>
</span><span id="FixtureRequest-387"><a href="#FixtureRequest-387"><span class="linenos">387</span></a>        <span class="c1">#   this cannot be reflected in the type.</span>
</span><span id="FixtureRequest-388"><a href="#FixtureRequest-388"><span class="linenos">388</span></a>        <span class="c1"># - Technically `param` is only (possibly) defined on SubRequest, not</span>
</span><span id="FixtureRequest-389"><a href="#FixtureRequest-389"><span class="linenos">389</span></a>        <span class="c1">#   FixtureRequest, but the typing of that is still in flux so this cheats.</span>
</span><span id="FixtureRequest-390"><a href="#FixtureRequest-390"><span class="linenos">390</span></a>        <span class="c1"># - In the future we might consider using a generic for the param type, but</span>
</span><span id="FixtureRequest-391"><a href="#FixtureRequest-391"><span class="linenos">391</span></a>        <span class="c1">#   for now just using Any.</span>
</span><span id="FixtureRequest-392"><a href="#FixtureRequest-392"><span class="linenos">392</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="FixtureRequest-393"><a href="#FixtureRequest-393"><span class="linenos">393</span></a>
</span><span id="FixtureRequest-394"><a href="#FixtureRequest-394"><span class="linenos">394</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-395"><a href="#FixtureRequest-395"><span class="linenos">395</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_fixturemanager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureManager</span><span class="p">:</span>
</span><span id="FixtureRequest-396"><a href="#FixtureRequest-396"><span class="linenos">396</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="FixtureRequest-397"><a href="#FixtureRequest-397"><span class="linenos">397</span></a>
</span><span id="FixtureRequest-398"><a href="#FixtureRequest-398"><span class="linenos">398</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-399"><a href="#FixtureRequest-399"><span class="linenos">399</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="FixtureRequest-400"><a href="#FixtureRequest-400"><span class="linenos">400</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_scope</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Scope</span><span class="p">:</span>
</span><span id="FixtureRequest-401"><a href="#FixtureRequest-401"><span class="linenos">401</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span><span id="FixtureRequest-402"><a href="#FixtureRequest-402"><span class="linenos">402</span></a>
</span><span id="FixtureRequest-403"><a href="#FixtureRequest-403"><span class="linenos">403</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-404"><a href="#FixtureRequest-404"><span class="linenos">404</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scope</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_ScopeName</span><span class="p">:</span>
</span><span id="FixtureRequest-405"><a href="#FixtureRequest-405"><span class="linenos">405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scope string, one of &quot;function&quot;, &quot;class&quot;, &quot;module&quot;, &quot;package&quot;, &quot;session&quot;.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-406"><a href="#FixtureRequest-406"><span class="linenos">406</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scope</span><span class="o">.</span><span class="n">value</span>
</span><span id="FixtureRequest-407"><a href="#FixtureRequest-407"><span class="linenos">407</span></a>
</span><span id="FixtureRequest-408"><a href="#FixtureRequest-408"><span class="linenos">408</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="FixtureRequest-409"><a href="#FixtureRequest-409"><span class="linenos">409</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_scope</span><span class="p">(</span>
</span><span id="FixtureRequest-410"><a href="#FixtureRequest-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="FixtureRequest-411"><a href="#FixtureRequest-411"><span class="linenos">411</span></a>        <span class="n">requested_fixturedef</span><span class="p">:</span> <span class="n">FixtureDef</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="n">PseudoFixtureDef</span><span class="p">[</span><span class="nb">object</span><span class="p">],</span>
</span><span id="FixtureRequest-412"><a href="#FixtureRequest-412"><span class="linenos">412</span></a>        <span class="n">requested_scope</span><span class="p">:</span> <span class="n">Scope</span><span class="p">,</span>
</span><span id="FixtureRequest-413"><a href="#FixtureRequest-413"><span class="linenos">413</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-414"><a href="#FixtureRequest-414"><span class="linenos">414</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span><span id="FixtureRequest-415"><a href="#FixtureRequest-415"><span class="linenos">415</span></a>
</span><span id="FixtureRequest-416"><a href="#FixtureRequest-416"><span class="linenos">416</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-417"><a href="#FixtureRequest-417"><span class="linenos">417</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fixturenames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="FixtureRequest-418"><a href="#FixtureRequest-418"><span class="linenos">418</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Names of all active fixtures in this request.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-419"><a href="#FixtureRequest-419"><span class="linenos">419</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">)</span>
</span><span id="FixtureRequest-420"><a href="#FixtureRequest-420"><span class="linenos">420</span></a>        <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fixture_defs</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="FixtureRequest-421"><a href="#FixtureRequest-421"><span class="linenos">421</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="FixtureRequest-422"><a href="#FixtureRequest-422"><span class="linenos">422</span></a>
</span><span id="FixtureRequest-423"><a href="#FixtureRequest-423"><span class="linenos">423</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-424"><a href="#FixtureRequest-424"><span class="linenos">424</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="FixtureRequest-425"><a href="#FixtureRequest-425"><span class="linenos">425</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest-426"><a href="#FixtureRequest-426"><span class="linenos">426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Underlying collection node (depends on current request scope).&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-427"><a href="#FixtureRequest-427"><span class="linenos">427</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span><span id="FixtureRequest-428"><a href="#FixtureRequest-428"><span class="linenos">428</span></a>
</span><span id="FixtureRequest-429"><a href="#FixtureRequest-429"><span class="linenos">429</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-430"><a href="#FixtureRequest-430"><span class="linenos">430</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="FixtureRequest-431"><a href="#FixtureRequest-431"><span class="linenos">431</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The pytest config object associated with this request.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-432"><a href="#FixtureRequest-432"><span class="linenos">432</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">config</span>
</span><span id="FixtureRequest-433"><a href="#FixtureRequest-433"><span class="linenos">433</span></a>
</span><span id="FixtureRequest-434"><a href="#FixtureRequest-434"><span class="linenos">434</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-435"><a href="#FixtureRequest-435"><span class="linenos">435</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest-436"><a href="#FixtureRequest-436"><span class="linenos">436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test function object if the request has a per-function scope.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-437"><a href="#FixtureRequest-437"><span class="linenos">437</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="o">!=</span> <span class="s2">&quot;function&quot;</span><span class="p">:</span>
</span><span id="FixtureRequest-438"><a href="#FixtureRequest-438"><span class="linenos">438</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
</span><span id="FixtureRequest-439"><a href="#FixtureRequest-439"><span class="linenos">439</span></a>                <span class="sa">f</span><span class="s2">&quot;function not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span>
</span><span id="FixtureRequest-440"><a href="#FixtureRequest-440"><span class="linenos">440</span></a>            <span class="p">)</span>
</span><span id="FixtureRequest-441"><a href="#FixtureRequest-441"><span class="linenos">441</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">obj</span>
</span><span id="FixtureRequest-442"><a href="#FixtureRequest-442"><span class="linenos">442</span></a>
</span><span id="FixtureRequest-443"><a href="#FixtureRequest-443"><span class="linenos">443</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-444"><a href="#FixtureRequest-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest-445"><a href="#FixtureRequest-445"><span class="linenos">445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Class (can be None) where the test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-446"><a href="#FixtureRequest-446"><span class="linenos">446</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">):</span>
</span><span id="FixtureRequest-447"><a href="#FixtureRequest-447"><span class="linenos">447</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cls not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span><span class="p">)</span>
</span><span id="FixtureRequest-448"><a href="#FixtureRequest-448"><span class="linenos">448</span></a>        <span class="n">clscol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">getparent</span><span class="p">(</span><span class="n">_pytest</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">Class</span><span class="p">)</span>
</span><span id="FixtureRequest-449"><a href="#FixtureRequest-449"><span class="linenos">449</span></a>        <span class="k">if</span> <span class="n">clscol</span><span class="p">:</span>
</span><span id="FixtureRequest-450"><a href="#FixtureRequest-450"><span class="linenos">450</span></a>            <span class="k">return</span> <span class="n">clscol</span><span class="o">.</span><span class="n">obj</span>
</span><span id="FixtureRequest-451"><a href="#FixtureRequest-451"><span class="linenos">451</span></a>
</span><span id="FixtureRequest-452"><a href="#FixtureRequest-452"><span class="linenos">452</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-453"><a href="#FixtureRequest-453"><span class="linenos">453</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest-454"><a href="#FixtureRequest-454"><span class="linenos">454</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Instance (can be None) on which test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-455"><a href="#FixtureRequest-455"><span class="linenos">455</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="o">!=</span> <span class="s2">&quot;function&quot;</span><span class="p">:</span>
</span><span id="FixtureRequest-456"><a href="#FixtureRequest-456"><span class="linenos">456</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="FixtureRequest-457"><a href="#FixtureRequest-457"><span class="linenos">457</span></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="p">,</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FixtureRequest-458"><a href="#FixtureRequest-458"><span class="linenos">458</span></a>
</span><span id="FixtureRequest-459"><a href="#FixtureRequest-459"><span class="linenos">459</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-460"><a href="#FixtureRequest-460"><span class="linenos">460</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest-461"><a href="#FixtureRequest-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Python module object where the test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-462"><a href="#FixtureRequest-462"><span class="linenos">462</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;module&quot;</span><span class="p">):</span>
</span><span id="FixtureRequest-463"><a href="#FixtureRequest-463"><span class="linenos">463</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span><span class="p">)</span>
</span><span id="FixtureRequest-464"><a href="#FixtureRequest-464"><span class="linenos">464</span></a>        <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">getparent</span><span class="p">(</span><span class="n">_pytest</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">Module</span><span class="p">)</span>
</span><span id="FixtureRequest-465"><a href="#FixtureRequest-465"><span class="linenos">465</span></a>        <span class="k">assert</span> <span class="n">mod</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureRequest-466"><a href="#FixtureRequest-466"><span class="linenos">466</span></a>        <span class="k">return</span> <span class="n">mod</span><span class="o">.</span><span class="n">obj</span>
</span><span id="FixtureRequest-467"><a href="#FixtureRequest-467"><span class="linenos">467</span></a>
</span><span id="FixtureRequest-468"><a href="#FixtureRequest-468"><span class="linenos">468</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-469"><a href="#FixtureRequest-469"><span class="linenos">469</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="FixtureRequest-470"><a href="#FixtureRequest-470"><span class="linenos">470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Path where the test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-471"><a href="#FixtureRequest-471"><span class="linenos">471</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="s2">&quot;package&quot;</span><span class="p">):</span>
</span><span id="FixtureRequest-472"><a href="#FixtureRequest-472"><span class="linenos">472</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;path not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span><span class="p">)</span>
</span><span id="FixtureRequest-473"><a href="#FixtureRequest-473"><span class="linenos">473</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">path</span>
</span><span id="FixtureRequest-474"><a href="#FixtureRequest-474"><span class="linenos">474</span></a>
</span><span id="FixtureRequest-475"><a href="#FixtureRequest-475"><span class="linenos">475</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-476"><a href="#FixtureRequest-476"><span class="linenos">476</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="FixtureRequest-477"><a href="#FixtureRequest-477"><span class="linenos">477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Keywords/markers dictionary for the underlying node.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-478"><a href="#FixtureRequest-478"><span class="linenos">478</span></a>        <span class="n">node</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span>
</span><span id="FixtureRequest-479"><a href="#FixtureRequest-479"><span class="linenos">479</span></a>        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">keywords</span>
</span><span id="FixtureRequest-480"><a href="#FixtureRequest-480"><span class="linenos">480</span></a>
</span><span id="FixtureRequest-481"><a href="#FixtureRequest-481"><span class="linenos">481</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest-482"><a href="#FixtureRequest-482"><span class="linenos">482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
</span><span id="FixtureRequest-483"><a href="#FixtureRequest-483"><span class="linenos">483</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pytest session object.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-484"><a href="#FixtureRequest-484"><span class="linenos">484</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">session</span>
</span><span id="FixtureRequest-485"><a href="#FixtureRequest-485"><span class="linenos">485</span></a>
</span><span id="FixtureRequest-486"><a href="#FixtureRequest-486"><span class="linenos">486</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="FixtureRequest-487"><a href="#FixtureRequest-487"><span class="linenos">487</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addfinalizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">finalizer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-488"><a href="#FixtureRequest-488"><span class="linenos">488</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add finalizer/teardown function to be called without arguments after</span>
</span><span id="FixtureRequest-489"><a href="#FixtureRequest-489"><span class="linenos">489</span></a><span class="sd">        the last test within the requesting test context finished execution.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-490"><a href="#FixtureRequest-490"><span class="linenos">490</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span><span id="FixtureRequest-491"><a href="#FixtureRequest-491"><span class="linenos">491</span></a>
</span><span id="FixtureRequest-492"><a href="#FixtureRequest-492"><span class="linenos">492</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">applymarker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">MarkDecorator</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-493"><a href="#FixtureRequest-493"><span class="linenos">493</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply a marker to a single test function invocation.</span>
</span><span id="FixtureRequest-494"><a href="#FixtureRequest-494"><span class="linenos">494</span></a>
</span><span id="FixtureRequest-495"><a href="#FixtureRequest-495"><span class="linenos">495</span></a><span class="sd">        This method is useful if you don&#39;t want to have a keyword/marker</span>
</span><span id="FixtureRequest-496"><a href="#FixtureRequest-496"><span class="linenos">496</span></a><span class="sd">        on all function invocations.</span>
</span><span id="FixtureRequest-497"><a href="#FixtureRequest-497"><span class="linenos">497</span></a>
</span><span id="FixtureRequest-498"><a href="#FixtureRequest-498"><span class="linenos">498</span></a><span class="sd">        :param marker:</span>
</span><span id="FixtureRequest-499"><a href="#FixtureRequest-499"><span class="linenos">499</span></a><span class="sd">            An object created by a call to ``pytest.mark.NAME(...)``.</span>
</span><span id="FixtureRequest-500"><a href="#FixtureRequest-500"><span class="linenos">500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest-501"><a href="#FixtureRequest-501"><span class="linenos">501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</span><span id="FixtureRequest-502"><a href="#FixtureRequest-502"><span class="linenos">502</span></a>
</span><span id="FixtureRequest-503"><a href="#FixtureRequest-503"><span class="linenos">503</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">raiseerror</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="FixtureRequest-504"><a href="#FixtureRequest-504"><span class="linenos">504</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raise a FixtureLookupError exception.</span>
</span><span id="FixtureRequest-505"><a href="#FixtureRequest-505"><span class="linenos">505</span></a>
</span><span id="FixtureRequest-506"><a href="#FixtureRequest-506"><span class="linenos">506</span></a><span class="sd">        :param msg:</span>
</span><span id="FixtureRequest-507"><a href="#FixtureRequest-507"><span class="linenos">507</span></a><span class="sd">            An optional custom error message.</span>
</span><span id="FixtureRequest-508"><a href="#FixtureRequest-508"><span class="linenos">508</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest-509"><a href="#FixtureRequest-509"><span class="linenos">509</span></a>        <span class="k">raise</span> <span class="n">FixtureLookupError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</span><span id="FixtureRequest-510"><a href="#FixtureRequest-510"><span class="linenos">510</span></a>
</span><span id="FixtureRequest-511"><a href="#FixtureRequest-511"><span class="linenos">511</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfixturevalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="FixtureRequest-512"><a href="#FixtureRequest-512"><span class="linenos">512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Dynamically run a named fixture function.</span>
</span><span id="FixtureRequest-513"><a href="#FixtureRequest-513"><span class="linenos">513</span></a>
</span><span id="FixtureRequest-514"><a href="#FixtureRequest-514"><span class="linenos">514</span></a><span class="sd">        Declaring fixtures via function argument is recommended where possible.</span>
</span><span id="FixtureRequest-515"><a href="#FixtureRequest-515"><span class="linenos">515</span></a><span class="sd">        But if you can only decide whether to use another fixture at test</span>
</span><span id="FixtureRequest-516"><a href="#FixtureRequest-516"><span class="linenos">516</span></a><span class="sd">        setup time, you may use this function to retrieve it inside a fixture</span>
</span><span id="FixtureRequest-517"><a href="#FixtureRequest-517"><span class="linenos">517</span></a><span class="sd">        or test function body.</span>
</span><span id="FixtureRequest-518"><a href="#FixtureRequest-518"><span class="linenos">518</span></a>
</span><span id="FixtureRequest-519"><a href="#FixtureRequest-519"><span class="linenos">519</span></a><span class="sd">        This method can be used during the test setup phase or the test run</span>
</span><span id="FixtureRequest-520"><a href="#FixtureRequest-520"><span class="linenos">520</span></a><span class="sd">        phase, but during the test teardown phase a fixture&#39;s value may not</span>
</span><span id="FixtureRequest-521"><a href="#FixtureRequest-521"><span class="linenos">521</span></a><span class="sd">        be available.</span>
</span><span id="FixtureRequest-522"><a href="#FixtureRequest-522"><span class="linenos">522</span></a>
</span><span id="FixtureRequest-523"><a href="#FixtureRequest-523"><span class="linenos">523</span></a><span class="sd">        :param argname:</span>
</span><span id="FixtureRequest-524"><a href="#FixtureRequest-524"><span class="linenos">524</span></a><span class="sd">            The fixture name.</span>
</span><span id="FixtureRequest-525"><a href="#FixtureRequest-525"><span class="linenos">525</span></a><span class="sd">        :raises pytest.FixtureLookupError:</span>
</span><span id="FixtureRequest-526"><a href="#FixtureRequest-526"><span class="linenos">526</span></a><span class="sd">            If the given fixture could not be found.</span>
</span><span id="FixtureRequest-527"><a href="#FixtureRequest-527"><span class="linenos">527</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest-528"><a href="#FixtureRequest-528"><span class="linenos">528</span></a>        <span class="c1"># Note that in addition to the use case described in the docstring,</span>
</span><span id="FixtureRequest-529"><a href="#FixtureRequest-529"><span class="linenos">529</span></a>        <span class="c1"># getfixturevalue() is also called by pytest itself during item and fixture</span>
</span><span id="FixtureRequest-530"><a href="#FixtureRequest-530"><span class="linenos">530</span></a>        <span class="c1"># setup to evaluate the fixtures that are requested statically</span>
</span><span id="FixtureRequest-531"><a href="#FixtureRequest-531"><span class="linenos">531</span></a>        <span class="c1"># (using function parameters, autouse, etc).</span>
</span><span id="FixtureRequest-532"><a href="#FixtureRequest-532"><span class="linenos">532</span></a>
</span><span id="FixtureRequest-533"><a href="#FixtureRequest-533"><span class="linenos">533</span></a>        <span class="n">fixturedef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_active_fixturedef</span><span class="p">(</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureRequest-534"><a href="#FixtureRequest-534"><span class="linenos">534</span></a>        <span class="k">assert</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span>
</span><span id="FixtureRequest-535"><a href="#FixtureRequest-535"><span class="linenos">535</span></a>            <span class="sa">f</span><span class="s1">&#39;The fixture value for &quot;</span><span class="si">{</span><span class="n">argname</span><span class="si">}</span><span class="s1">&quot; is not available.  &#39;</span>
</span><span id="FixtureRequest-536"><a href="#FixtureRequest-536"><span class="linenos">536</span></a>            <span class="s2">&quot;This can happen when the fixture has already been torn down.&quot;</span>
</span><span id="FixtureRequest-537"><a href="#FixtureRequest-537"><span class="linenos">537</span></a>        <span class="p">)</span>
</span><span id="FixtureRequest-538"><a href="#FixtureRequest-538"><span class="linenos">538</span></a>        <span class="k">return</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FixtureRequest-539"><a href="#FixtureRequest-539"><span class="linenos">539</span></a>
</span><span id="FixtureRequest-540"><a href="#FixtureRequest-540"><span class="linenos">540</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_iter_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">SubRequest</span><span class="p">]:</span>
</span><span id="FixtureRequest-541"><a href="#FixtureRequest-541"><span class="linenos">541</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yield all SubRequests in the chain, from self up.</span>
</span><span id="FixtureRequest-542"><a href="#FixtureRequest-542"><span class="linenos">542</span></a>
</span><span id="FixtureRequest-543"><a href="#FixtureRequest-543"><span class="linenos">543</span></a><span class="sd">        Note: does *not* yield the TopRequest.</span>
</span><span id="FixtureRequest-544"><a href="#FixtureRequest-544"><span class="linenos">544</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest-545"><a href="#FixtureRequest-545"><span class="linenos">545</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="FixtureRequest-546"><a href="#FixtureRequest-546"><span class="linenos">546</span></a>        <span class="k">while</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">SubRequest</span><span class="p">):</span>
</span><span id="FixtureRequest-547"><a href="#FixtureRequest-547"><span class="linenos">547</span></a>            <span class="k">yield</span> <span class="n">current</span>
</span><span id="FixtureRequest-548"><a href="#FixtureRequest-548"><span class="linenos">548</span></a>            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">_parent_request</span>
</span><span id="FixtureRequest-549"><a href="#FixtureRequest-549"><span class="linenos">549</span></a>
</span><span id="FixtureRequest-550"><a href="#FixtureRequest-550"><span class="linenos">550</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_active_fixturedef</span><span class="p">(</span>
</span><span id="FixtureRequest-551"><a href="#FixtureRequest-551"><span class="linenos">551</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="FixtureRequest-552"><a href="#FixtureRequest-552"><span class="linenos">552</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FixtureDef</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="n">PseudoFixtureDef</span><span class="p">[</span><span class="nb">object</span><span class="p">]:</span>
</span><span id="FixtureRequest-553"><a href="#FixtureRequest-553"><span class="linenos">553</span></a>        <span class="k">if</span> <span class="n">argname</span> <span class="o">==</span> <span class="s2">&quot;request&quot;</span><span class="p">:</span>
</span><span id="FixtureRequest-554"><a href="#FixtureRequest-554"><span class="linenos">554</span></a>            <span class="n">cached_result</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FixtureRequest-555"><a href="#FixtureRequest-555"><span class="linenos">555</span></a>            <span class="k">return</span> <span class="n">PseudoFixtureDef</span><span class="p">(</span><span class="n">cached_result</span><span class="p">,</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Function</span><span class="p">)</span>
</span><span id="FixtureRequest-556"><a href="#FixtureRequest-556"><span class="linenos">556</span></a>
</span><span id="FixtureRequest-557"><a href="#FixtureRequest-557"><span class="linenos">557</span></a>        <span class="c1"># If we already finished computing a fixture by this name in this item,</span>
</span><span id="FixtureRequest-558"><a href="#FixtureRequest-558"><span class="linenos">558</span></a>        <span class="c1"># return it.</span>
</span><span id="FixtureRequest-559"><a href="#FixtureRequest-559"><span class="linenos">559</span></a>        <span class="n">fixturedef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixture_defs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureRequest-560"><a href="#FixtureRequest-560"><span class="linenos">560</span></a>        <span class="k">if</span> <span class="n">fixturedef</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-561"><a href="#FixtureRequest-561"><span class="linenos">561</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_check_scope</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">,</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">_scope</span><span class="p">)</span>
</span><span id="FixtureRequest-562"><a href="#FixtureRequest-562"><span class="linenos">562</span></a>            <span class="k">return</span> <span class="n">fixturedef</span>
</span><span id="FixtureRequest-563"><a href="#FixtureRequest-563"><span class="linenos">563</span></a>
</span><span id="FixtureRequest-564"><a href="#FixtureRequest-564"><span class="linenos">564</span></a>        <span class="c1"># Find the appropriate fixturedef.</span>
</span><span id="FixtureRequest-565"><a href="#FixtureRequest-565"><span class="linenos">565</span></a>        <span class="n">fixturedefs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argname</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FixtureRequest-566"><a href="#FixtureRequest-566"><span class="linenos">566</span></a>        <span class="k">if</span> <span class="n">fixturedefs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-567"><a href="#FixtureRequest-567"><span class="linenos">567</span></a>            <span class="c1"># We arrive here because of a dynamic call to</span>
</span><span id="FixtureRequest-568"><a href="#FixtureRequest-568"><span class="linenos">568</span></a>            <span class="c1"># getfixturevalue(argname) which was naturally</span>
</span><span id="FixtureRequest-569"><a href="#FixtureRequest-569"><span class="linenos">569</span></a>            <span class="c1"># not known at parsing/collection time.</span>
</span><span id="FixtureRequest-570"><a href="#FixtureRequest-570"><span class="linenos">570</span></a>            <span class="n">fixturedefs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">getfixturedefs</span><span class="p">(</span><span class="n">argname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="p">)</span>
</span><span id="FixtureRequest-571"><a href="#FixtureRequest-571"><span class="linenos">571</span></a>            <span class="k">if</span> <span class="n">fixturedefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-572"><a href="#FixtureRequest-572"><span class="linenos">572</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">=</span> <span class="n">fixturedefs</span>
</span><span id="FixtureRequest-573"><a href="#FixtureRequest-573"><span class="linenos">573</span></a>        <span class="c1"># No fixtures defined with this name.</span>
</span><span id="FixtureRequest-574"><a href="#FixtureRequest-574"><span class="linenos">574</span></a>        <span class="k">if</span> <span class="n">fixturedefs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-575"><a href="#FixtureRequest-575"><span class="linenos">575</span></a>            <span class="k">raise</span> <span class="n">FixtureLookupError</span><span class="p">(</span><span class="n">argname</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="FixtureRequest-576"><a href="#FixtureRequest-576"><span class="linenos">576</span></a>        <span class="c1"># The are no fixtures with this name applicable for the function.</span>
</span><span id="FixtureRequest-577"><a href="#FixtureRequest-577"><span class="linenos">577</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">fixturedefs</span><span class="p">:</span>
</span><span id="FixtureRequest-578"><a href="#FixtureRequest-578"><span class="linenos">578</span></a>            <span class="k">raise</span> <span class="n">FixtureLookupError</span><span class="p">(</span><span class="n">argname</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="FixtureRequest-579"><a href="#FixtureRequest-579"><span class="linenos">579</span></a>        <span class="c1"># A fixture may override another fixture with the same name, e.g. a</span>
</span><span id="FixtureRequest-580"><a href="#FixtureRequest-580"><span class="linenos">580</span></a>        <span class="c1"># fixture in a module can override a fixture in a conftest, a fixture in</span>
</span><span id="FixtureRequest-581"><a href="#FixtureRequest-581"><span class="linenos">581</span></a>        <span class="c1"># a class can override a fixture in the module, and so on.</span>
</span><span id="FixtureRequest-582"><a href="#FixtureRequest-582"><span class="linenos">582</span></a>        <span class="c1"># An overriding fixture can request its own name (possibly indirectly);</span>
</span><span id="FixtureRequest-583"><a href="#FixtureRequest-583"><span class="linenos">583</span></a>        <span class="c1"># in this case it gets the value of the fixture it overrides, one level</span>
</span><span id="FixtureRequest-584"><a href="#FixtureRequest-584"><span class="linenos">584</span></a>        <span class="c1"># up.</span>
</span><span id="FixtureRequest-585"><a href="#FixtureRequest-585"><span class="linenos">585</span></a>        <span class="c1"># Check how many `argname`s deep we are, and take the next one.</span>
</span><span id="FixtureRequest-586"><a href="#FixtureRequest-586"><span class="linenos">586</span></a>        <span class="c1"># `fixturedefs` is sorted from furthest to closest, so use negative</span>
</span><span id="FixtureRequest-587"><a href="#FixtureRequest-587"><span class="linenos">587</span></a>        <span class="c1"># indexing to go in reverse.</span>
</span><span id="FixtureRequest-588"><a href="#FixtureRequest-588"><span class="linenos">588</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="FixtureRequest-589"><a href="#FixtureRequest-589"><span class="linenos">589</span></a>        <span class="k">for</span> <span class="n">request</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_chain</span><span class="p">():</span>
</span><span id="FixtureRequest-590"><a href="#FixtureRequest-590"><span class="linenos">590</span></a>            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">fixturename</span> <span class="o">==</span> <span class="n">argname</span><span class="p">:</span>
</span><span id="FixtureRequest-591"><a href="#FixtureRequest-591"><span class="linenos">591</span></a>                <span class="n">index</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="FixtureRequest-592"><a href="#FixtureRequest-592"><span class="linenos">592</span></a>        <span class="c1"># If already consumed all of the available levels, fail.</span>
</span><span id="FixtureRequest-593"><a href="#FixtureRequest-593"><span class="linenos">593</span></a>        <span class="k">if</span> <span class="o">-</span><span class="n">index</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">fixturedefs</span><span class="p">):</span>
</span><span id="FixtureRequest-594"><a href="#FixtureRequest-594"><span class="linenos">594</span></a>            <span class="k">raise</span> <span class="n">FixtureLookupError</span><span class="p">(</span><span class="n">argname</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="FixtureRequest-595"><a href="#FixtureRequest-595"><span class="linenos">595</span></a>        <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">fixturedefs</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="FixtureRequest-596"><a href="#FixtureRequest-596"><span class="linenos">596</span></a>
</span><span id="FixtureRequest-597"><a href="#FixtureRequest-597"><span class="linenos">597</span></a>        <span class="c1"># Prepare a SubRequest object for calling the fixture.</span>
</span><span id="FixtureRequest-598"><a href="#FixtureRequest-598"><span class="linenos">598</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureRequest-599"><a href="#FixtureRequest-599"><span class="linenos">599</span></a>            <span class="n">callspec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">callspec</span>
</span><span id="FixtureRequest-600"><a href="#FixtureRequest-600"><span class="linenos">600</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="FixtureRequest-601"><a href="#FixtureRequest-601"><span class="linenos">601</span></a>            <span class="n">callspec</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FixtureRequest-602"><a href="#FixtureRequest-602"><span class="linenos">602</span></a>        <span class="k">if</span> <span class="n">callspec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">argname</span> <span class="ow">in</span> <span class="n">callspec</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
</span><span id="FixtureRequest-603"><a href="#FixtureRequest-603"><span class="linenos">603</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="n">callspec</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span>
</span><span id="FixtureRequest-604"><a href="#FixtureRequest-604"><span class="linenos">604</span></a>            <span class="n">param_index</span> <span class="o">=</span> <span class="n">callspec</span><span class="o">.</span><span class="n">indices</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span>
</span><span id="FixtureRequest-605"><a href="#FixtureRequest-605"><span class="linenos">605</span></a>            <span class="c1"># The parametrize invocation scope overrides the fixture&#39;s scope.</span>
</span><span id="FixtureRequest-606"><a href="#FixtureRequest-606"><span class="linenos">606</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">callspec</span><span class="o">.</span><span class="n">_arg2scope</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span>
</span><span id="FixtureRequest-607"><a href="#FixtureRequest-607"><span class="linenos">607</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="FixtureRequest-608"><a href="#FixtureRequest-608"><span class="linenos">608</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="n">NOTSET</span>
</span><span id="FixtureRequest-609"><a href="#FixtureRequest-609"><span class="linenos">609</span></a>            <span class="n">param_index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FixtureRequest-610"><a href="#FixtureRequest-610"><span class="linenos">610</span></a>            <span class="n">scope</span> <span class="o">=</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">_scope</span>
</span><span id="FixtureRequest-611"><a href="#FixtureRequest-611"><span class="linenos">611</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_check_fixturedef_without_param</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">)</span>
</span><span id="FixtureRequest-612"><a href="#FixtureRequest-612"><span class="linenos">612</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_check_scope</span><span class="p">(</span><span class="n">fixturedef</span><span class="p">,</span> <span class="n">scope</span><span class="p">)</span>
</span><span id="FixtureRequest-613"><a href="#FixtureRequest-613"><span class="linenos">613</span></a>        <span class="n">subrequest</span> <span class="o">=</span> <span class="n">SubRequest</span><span class="p">(</span>
</span><span id="FixtureRequest-614"><a href="#FixtureRequest-614"><span class="linenos">614</span></a>            <span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_index</span><span class="p">,</span> <span class="n">fixturedef</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span>
</span><span id="FixtureRequest-615"><a href="#FixtureRequest-615"><span class="linenos">615</span></a>        <span class="p">)</span>
</span><span id="FixtureRequest-616"><a href="#FixtureRequest-616"><span class="linenos">616</span></a>
</span><span id="FixtureRequest-617"><a href="#FixtureRequest-617"><span class="linenos">617</span></a>        <span class="c1"># Make sure the fixture value is cached, running it if it isn&#39;t</span>
</span><span id="FixtureRequest-618"><a href="#FixtureRequest-618"><span class="linenos">618</span></a>        <span class="n">fixturedef</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">subrequest</span><span class="p">)</span>
</span><span id="FixtureRequest-619"><a href="#FixtureRequest-619"><span class="linenos">619</span></a>
</span><span id="FixtureRequest-620"><a href="#FixtureRequest-620"><span class="linenos">620</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fixture_defs</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">=</span> <span class="n">fixturedef</span>
</span><span id="FixtureRequest-621"><a href="#FixtureRequest-621"><span class="linenos">621</span></a>        <span class="k">return</span> <span class="n">fixturedef</span>
</span><span id="FixtureRequest-622"><a href="#FixtureRequest-622"><span class="linenos">622</span></a>
</span><span id="FixtureRequest-623"><a href="#FixtureRequest-623"><span class="linenos">623</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_fixturedef_without_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fixturedef</span><span class="p">:</span> <span class="n">FixtureDef</span><span class="p">[</span><span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest-624"><a href="#FixtureRequest-624"><span class="linenos">624</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that this request is allowed to execute this fixturedef without</span>
</span><span id="FixtureRequest-625"><a href="#FixtureRequest-625"><span class="linenos">625</span></a><span class="sd">        a param.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest-626"><a href="#FixtureRequest-626"><span class="linenos">626</span></a>        <span class="n">funcitem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span>
</span><span id="FixtureRequest-627"><a href="#FixtureRequest-627"><span class="linenos">627</span></a>        <span class="n">has_params</span> <span class="o">=</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureRequest-628"><a href="#FixtureRequest-628"><span class="linenos">628</span></a>        <span class="n">fixtures_not_supported</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">funcitem</span><span class="p">,</span> <span class="s2">&quot;nofuncargs&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="FixtureRequest-629"><a href="#FixtureRequest-629"><span class="linenos">629</span></a>        <span class="k">if</span> <span class="n">has_params</span> <span class="ow">and</span> <span class="n">fixtures_not_supported</span><span class="p">:</span>
</span><span id="FixtureRequest-630"><a href="#FixtureRequest-630"><span class="linenos">630</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="FixtureRequest-631"><a href="#FixtureRequest-631"><span class="linenos">631</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">funcitem</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> does not support fixtures, maybe unittest.TestCase subclass?</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-632"><a href="#FixtureRequest-632"><span class="linenos">632</span></a>                <span class="sa">f</span><span class="s2">&quot;Node id: </span><span class="si">{</span><span class="n">funcitem</span><span class="o">.</span><span class="n">nodeid</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-633"><a href="#FixtureRequest-633"><span class="linenos">633</span></a>                <span class="sa">f</span><span class="s2">&quot;Function type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">funcitem</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-634"><a href="#FixtureRequest-634"><span class="linenos">634</span></a>            <span class="p">)</span>
</span><span id="FixtureRequest-635"><a href="#FixtureRequest-635"><span class="linenos">635</span></a>            <span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="FixtureRequest-636"><a href="#FixtureRequest-636"><span class="linenos">636</span></a>        <span class="k">if</span> <span class="n">has_params</span><span class="p">:</span>
</span><span id="FixtureRequest-637"><a href="#FixtureRequest-637"><span class="linenos">637</span></a>            <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">stack</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="FixtureRequest-638"><a href="#FixtureRequest-638"><span class="linenos">638</span></a>            <span class="n">frameinfo</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getframeinfo</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="FixtureRequest-639"><a href="#FixtureRequest-639"><span class="linenos">639</span></a>            <span class="n">source_path</span> <span class="o">=</span> <span class="n">absolutepath</span><span class="p">(</span><span class="n">frameinfo</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span><span id="FixtureRequest-640"><a href="#FixtureRequest-640"><span class="linenos">640</span></a>            <span class="n">source_lineno</span> <span class="o">=</span> <span class="n">frameinfo</span><span class="o">.</span><span class="n">lineno</span>
</span><span id="FixtureRequest-641"><a href="#FixtureRequest-641"><span class="linenos">641</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="FixtureRequest-642"><a href="#FixtureRequest-642"><span class="linenos">642</span></a>                <span class="n">source_path_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">funcitem</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">))</span>
</span><span id="FixtureRequest-643"><a href="#FixtureRequest-643"><span class="linenos">643</span></a>            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="FixtureRequest-644"><a href="#FixtureRequest-644"><span class="linenos">644</span></a>                <span class="n">source_path_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span>
</span><span id="FixtureRequest-645"><a href="#FixtureRequest-645"><span class="linenos">645</span></a>            <span class="n">location</span> <span class="o">=</span> <span class="n">getlocation</span><span class="p">(</span><span class="n">fixturedef</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">funcitem</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span><span id="FixtureRequest-646"><a href="#FixtureRequest-646"><span class="linenos">646</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="FixtureRequest-647"><a href="#FixtureRequest-647"><span class="linenos">647</span></a>                <span class="s2">&quot;The requested fixture has no parameter defined for test:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-648"><a href="#FixtureRequest-648"><span class="linenos">648</span></a>                <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">funcitem</span><span class="o">.</span><span class="n">nodeid</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-649"><a href="#FixtureRequest-649"><span class="linenos">649</span></a>                <span class="sa">f</span><span class="s2">&quot;Requested fixture &#39;</span><span class="si">{</span><span class="n">fixturedef</span><span class="o">.</span><span class="n">argname</span><span class="si">}</span><span class="s2">&#39; defined in:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-650"><a href="#FixtureRequest-650"><span class="linenos">650</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-651"><a href="#FixtureRequest-651"><span class="linenos">651</span></a>                <span class="sa">f</span><span class="s2">&quot;Requested here:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-652"><a href="#FixtureRequest-652"><span class="linenos">652</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source_path_str</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">source_lineno</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="FixtureRequest-653"><a href="#FixtureRequest-653"><span class="linenos">653</span></a>            <span class="p">)</span>
</span><span id="FixtureRequest-654"><a href="#FixtureRequest-654"><span class="linenos">654</span></a>            <span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="FixtureRequest-655"><a href="#FixtureRequest-655"><span class="linenos">655</span></a>
</span><span id="FixtureRequest-656"><a href="#FixtureRequest-656"><span class="linenos">656</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_fixturestack</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">FixtureDef</span><span class="p">[</span><span class="n">Any</span><span class="p">]]:</span>
</span><span id="FixtureRequest-657"><a href="#FixtureRequest-657"><span class="linenos">657</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">request</span><span class="o">.</span><span class="n">_fixturedef</span> <span class="k">for</span> <span class="n">request</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_chain</span><span class="p">()]</span>
</span><span id="FixtureRequest-658"><a href="#FixtureRequest-658"><span class="linenos">658</span></a>        <span class="n">values</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="FixtureRequest-659"><a href="#FixtureRequest-659"><span class="linenos">659</span></a>        <span class="k">return</span> <span class="n">values</span>
</span></pre></div>


            <div class="docstring"><p>The type of the <code>request</code> fixture.</p>

<p>A request object gives access to the requesting test context and has a
<code><a href="#FixtureRequest.param">param</a></code> attribute in case the fixture is parametrized.</p>
</div>


                            <div id="FixtureRequest.fixturename" class="classattr">
                                <div class="attr variable">
            <span class="name">fixturename</span><span class="annotation">: Final</span>

        
    </div>
    <a class="headerlink" href="#FixtureRequest.fixturename"></a>
    
    

                            </div>
                            <div id="FixtureRequest.param" class="classattr">
                                <div class="attr variable">
            <span class="name">param</span><span class="annotation">: Any</span>

        
    </div>
    <a class="headerlink" href="#FixtureRequest.param"></a>
    
    

                            </div>
                            <div id="FixtureRequest.scope" class="classattr">
                                        <input id="FixtureRequest.scope-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scope</span><span class="annotation">: Literal[&#39;session&#39;, &#39;package&#39;, &#39;module&#39;, &#39;class&#39;, &#39;function&#39;]</span>

                <label class="view-source-button" for="FixtureRequest.scope-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.scope"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.scope-403"><a href="#FixtureRequest.scope-403"><span class="linenos">403</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.scope-404"><a href="#FixtureRequest.scope-404"><span class="linenos">404</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scope</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_ScopeName</span><span class="p">:</span>
</span><span id="FixtureRequest.scope-405"><a href="#FixtureRequest.scope-405"><span class="linenos">405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scope string, one of &quot;function&quot;, &quot;class&quot;, &quot;module&quot;, &quot;package&quot;, &quot;session&quot;.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.scope-406"><a href="#FixtureRequest.scope-406"><span class="linenos">406</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scope</span><span class="o">.</span><span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Scope string, one of "function", "class", "module", "package", "session".</p>
</div>


                            </div>
                            <div id="FixtureRequest.fixturenames" class="classattr">
                                        <input id="FixtureRequest.fixturenames-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">fixturenames</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="FixtureRequest.fixturenames-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.fixturenames"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.fixturenames-416"><a href="#FixtureRequest.fixturenames-416"><span class="linenos">416</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.fixturenames-417"><a href="#FixtureRequest.fixturenames-417"><span class="linenos">417</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fixturenames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="FixtureRequest.fixturenames-418"><a href="#FixtureRequest.fixturenames-418"><span class="linenos">418</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Names of all active fixtures in this request.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.fixturenames-419"><a href="#FixtureRequest.fixturenames-419"><span class="linenos">419</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">)</span>
</span><span id="FixtureRequest.fixturenames-420"><a href="#FixtureRequest.fixturenames-420"><span class="linenos">420</span></a>        <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fixture_defs</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="FixtureRequest.fixturenames-421"><a href="#FixtureRequest.fixturenames-421"><span class="linenos">421</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Names of all active fixtures in this request.</p>
</div>


                            </div>
                            <div id="FixtureRequest.node" class="classattr">
                                        <input id="FixtureRequest.node-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">node</span>

                <label class="view-source-button" for="FixtureRequest.node-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.node"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.node-423"><a href="#FixtureRequest.node-423"><span class="linenos">423</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.node-424"><a href="#FixtureRequest.node-424"><span class="linenos">424</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="FixtureRequest.node-425"><a href="#FixtureRequest.node-425"><span class="linenos">425</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest.node-426"><a href="#FixtureRequest.node-426"><span class="linenos">426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Underlying collection node (depends on current request scope).&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.node-427"><a href="#FixtureRequest.node-427"><span class="linenos">427</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Underlying collection node (depends on current request scope).</p>
</div>


                            </div>
                            <div id="FixtureRequest.config" class="classattr">
                                        <input id="FixtureRequest.config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">config</span><span class="annotation">: _pytest.config.Config</span>

                <label class="view-source-button" for="FixtureRequest.config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.config-429"><a href="#FixtureRequest.config-429"><span class="linenos">429</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.config-430"><a href="#FixtureRequest.config-430"><span class="linenos">430</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="FixtureRequest.config-431"><a href="#FixtureRequest.config-431"><span class="linenos">431</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The pytest config object associated with this request.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.config-432"><a href="#FixtureRequest.config-432"><span class="linenos">432</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">config</span>
</span></pre></div>


            <div class="docstring"><p>The pytest config object associated with this request.</p>
</div>


                            </div>
                            <div id="FixtureRequest.function" class="classattr">
                                        <input id="FixtureRequest.function-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">function</span>

                <label class="view-source-button" for="FixtureRequest.function-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.function"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.function-434"><a href="#FixtureRequest.function-434"><span class="linenos">434</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.function-435"><a href="#FixtureRequest.function-435"><span class="linenos">435</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest.function-436"><a href="#FixtureRequest.function-436"><span class="linenos">436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test function object if the request has a per-function scope.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.function-437"><a href="#FixtureRequest.function-437"><span class="linenos">437</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="o">!=</span> <span class="s2">&quot;function&quot;</span><span class="p">:</span>
</span><span id="FixtureRequest.function-438"><a href="#FixtureRequest.function-438"><span class="linenos">438</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
</span><span id="FixtureRequest.function-439"><a href="#FixtureRequest.function-439"><span class="linenos">439</span></a>                <span class="sa">f</span><span class="s2">&quot;function not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span>
</span><span id="FixtureRequest.function-440"><a href="#FixtureRequest.function-440"><span class="linenos">440</span></a>            <span class="p">)</span>
</span><span id="FixtureRequest.function-441"><a href="#FixtureRequest.function-441"><span class="linenos">441</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>Test function object if the request has a per-function scope.</p>
</div>


                            </div>
                            <div id="FixtureRequest.cls" class="classattr">
                                        <input id="FixtureRequest.cls-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">cls</span>

                <label class="view-source-button" for="FixtureRequest.cls-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.cls"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.cls-443"><a href="#FixtureRequest.cls-443"><span class="linenos">443</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.cls-444"><a href="#FixtureRequest.cls-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest.cls-445"><a href="#FixtureRequest.cls-445"><span class="linenos">445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Class (can be None) where the test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.cls-446"><a href="#FixtureRequest.cls-446"><span class="linenos">446</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">):</span>
</span><span id="FixtureRequest.cls-447"><a href="#FixtureRequest.cls-447"><span class="linenos">447</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cls not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span><span class="p">)</span>
</span><span id="FixtureRequest.cls-448"><a href="#FixtureRequest.cls-448"><span class="linenos">448</span></a>        <span class="n">clscol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">getparent</span><span class="p">(</span><span class="n">_pytest</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">Class</span><span class="p">)</span>
</span><span id="FixtureRequest.cls-449"><a href="#FixtureRequest.cls-449"><span class="linenos">449</span></a>        <span class="k">if</span> <span class="n">clscol</span><span class="p">:</span>
</span><span id="FixtureRequest.cls-450"><a href="#FixtureRequest.cls-450"><span class="linenos">450</span></a>            <span class="k">return</span> <span class="n">clscol</span><span class="o">.</span><span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>Class (can be None) where the test function was collected.</p>
</div>


                            </div>
                            <div id="FixtureRequest.instance" class="classattr">
                                        <input id="FixtureRequest.instance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">instance</span>

                <label class="view-source-button" for="FixtureRequest.instance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.instance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.instance-452"><a href="#FixtureRequest.instance-452"><span class="linenos">452</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.instance-453"><a href="#FixtureRequest.instance-453"><span class="linenos">453</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest.instance-454"><a href="#FixtureRequest.instance-454"><span class="linenos">454</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Instance (can be None) on which test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.instance-455"><a href="#FixtureRequest.instance-455"><span class="linenos">455</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="o">!=</span> <span class="s2">&quot;function&quot;</span><span class="p">:</span>
</span><span id="FixtureRequest.instance-456"><a href="#FixtureRequest.instance-456"><span class="linenos">456</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="FixtureRequest.instance-457"><a href="#FixtureRequest.instance-457"><span class="linenos">457</span></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="p">,</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Instance (can be None) on which test function was collected.</p>
</div>


                            </div>
                            <div id="FixtureRequest.module" class="classattr">
                                        <input id="FixtureRequest.module-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">module</span>

                <label class="view-source-button" for="FixtureRequest.module-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.module"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.module-459"><a href="#FixtureRequest.module-459"><span class="linenos">459</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.module-460"><a href="#FixtureRequest.module-460"><span class="linenos">460</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FixtureRequest.module-461"><a href="#FixtureRequest.module-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Python module object where the test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.module-462"><a href="#FixtureRequest.module-462"><span class="linenos">462</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;module&quot;</span><span class="p">):</span>
</span><span id="FixtureRequest.module-463"><a href="#FixtureRequest.module-463"><span class="linenos">463</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;module not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span><span class="p">)</span>
</span><span id="FixtureRequest.module-464"><a href="#FixtureRequest.module-464"><span class="linenos">464</span></a>        <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">getparent</span><span class="p">(</span><span class="n">_pytest</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">Module</span><span class="p">)</span>
</span><span id="FixtureRequest.module-465"><a href="#FixtureRequest.module-465"><span class="linenos">465</span></a>        <span class="k">assert</span> <span class="n">mod</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="FixtureRequest.module-466"><a href="#FixtureRequest.module-466"><span class="linenos">466</span></a>        <span class="k">return</span> <span class="n">mod</span><span class="o">.</span><span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>Python module object where the test function was collected.</p>
</div>


                            </div>
                            <div id="FixtureRequest.path" class="classattr">
                                        <input id="FixtureRequest.path-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">path</span><span class="annotation">: pathlib._local.Path</span>

                <label class="view-source-button" for="FixtureRequest.path-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.path"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.path-468"><a href="#FixtureRequest.path-468"><span class="linenos">468</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.path-469"><a href="#FixtureRequest.path-469"><span class="linenos">469</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="FixtureRequest.path-470"><a href="#FixtureRequest.path-470"><span class="linenos">470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Path where the test function was collected.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.path-471"><a href="#FixtureRequest.path-471"><span class="linenos">471</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="s2">&quot;package&quot;</span><span class="p">):</span>
</span><span id="FixtureRequest.path-472"><a href="#FixtureRequest.path-472"><span class="linenos">472</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;path not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="si">}</span><span class="s2">-scoped context&quot;</span><span class="p">)</span>
</span><span id="FixtureRequest.path-473"><a href="#FixtureRequest.path-473"><span class="linenos">473</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">path</span>
</span></pre></div>


            <div class="docstring"><p>Path where the test function was collected.</p>
</div>


                            </div>
                            <div id="FixtureRequest.keywords" class="classattr">
                                        <input id="FixtureRequest.keywords-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">keywords</span><span class="annotation">: MutableMapping[str, Any]</span>

                <label class="view-source-button" for="FixtureRequest.keywords-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.keywords"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.keywords-475"><a href="#FixtureRequest.keywords-475"><span class="linenos">475</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.keywords-476"><a href="#FixtureRequest.keywords-476"><span class="linenos">476</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="FixtureRequest.keywords-477"><a href="#FixtureRequest.keywords-477"><span class="linenos">477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Keywords/markers dictionary for the underlying node.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.keywords-478"><a href="#FixtureRequest.keywords-478"><span class="linenos">478</span></a>        <span class="n">node</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span>
</span><span id="FixtureRequest.keywords-479"><a href="#FixtureRequest.keywords-479"><span class="linenos">479</span></a>        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">keywords</span>
</span></pre></div>


            <div class="docstring"><p>Keywords/markers dictionary for the underlying node.</p>
</div>


                            </div>
                            <div id="FixtureRequest.session" class="classattr">
                                        <input id="FixtureRequest.session-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">session</span><span class="annotation">: _pytest.main.Session</span>

                <label class="view-source-button" for="FixtureRequest.session-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.session"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.session-481"><a href="#FixtureRequest.session-481"><span class="linenos">481</span></a>    <span class="nd">@property</span>
</span><span id="FixtureRequest.session-482"><a href="#FixtureRequest.session-482"><span class="linenos">482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
</span><span id="FixtureRequest.session-483"><a href="#FixtureRequest.session-483"><span class="linenos">483</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pytest session object.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.session-484"><a href="#FixtureRequest.session-484"><span class="linenos">484</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pyfuncitem</span><span class="o">.</span><span class="n">session</span>
</span></pre></div>


            <div class="docstring"><p>Pytest session object.</p>
</div>


                            </div>
                            <div id="FixtureRequest.addfinalizer" class="classattr">
                                        <input id="FixtureRequest.addfinalizer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-abc.abstractmethod">@abc.abstractmethod</div>

        <span class="def">def</span>
        <span class="name">addfinalizer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">finalizer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="FixtureRequest.addfinalizer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.addfinalizer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.addfinalizer-486"><a href="#FixtureRequest.addfinalizer-486"><span class="linenos">486</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="FixtureRequest.addfinalizer-487"><a href="#FixtureRequest.addfinalizer-487"><span class="linenos">487</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addfinalizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">finalizer</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest.addfinalizer-488"><a href="#FixtureRequest.addfinalizer-488"><span class="linenos">488</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add finalizer/teardown function to be called without arguments after</span>
</span><span id="FixtureRequest.addfinalizer-489"><a href="#FixtureRequest.addfinalizer-489"><span class="linenos">489</span></a><span class="sd">        the last test within the requesting test context finished execution.&quot;&quot;&quot;</span>
</span><span id="FixtureRequest.addfinalizer-490"><a href="#FixtureRequest.addfinalizer-490"><span class="linenos">490</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Add finalizer/teardown function to be called without arguments after
the last test within the requesting test context finished execution.</p>
</div>


                            </div>
                            <div id="FixtureRequest.applymarker" class="classattr">
                                        <input id="FixtureRequest.applymarker-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">applymarker</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">marker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">MarkDecorator</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="FixtureRequest.applymarker-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.applymarker"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.applymarker-492"><a href="#FixtureRequest.applymarker-492"><span class="linenos">492</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">applymarker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marker</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">MarkDecorator</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FixtureRequest.applymarker-493"><a href="#FixtureRequest.applymarker-493"><span class="linenos">493</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply a marker to a single test function invocation.</span>
</span><span id="FixtureRequest.applymarker-494"><a href="#FixtureRequest.applymarker-494"><span class="linenos">494</span></a>
</span><span id="FixtureRequest.applymarker-495"><a href="#FixtureRequest.applymarker-495"><span class="linenos">495</span></a><span class="sd">        This method is useful if you don&#39;t want to have a keyword/marker</span>
</span><span id="FixtureRequest.applymarker-496"><a href="#FixtureRequest.applymarker-496"><span class="linenos">496</span></a><span class="sd">        on all function invocations.</span>
</span><span id="FixtureRequest.applymarker-497"><a href="#FixtureRequest.applymarker-497"><span class="linenos">497</span></a>
</span><span id="FixtureRequest.applymarker-498"><a href="#FixtureRequest.applymarker-498"><span class="linenos">498</span></a><span class="sd">        :param marker:</span>
</span><span id="FixtureRequest.applymarker-499"><a href="#FixtureRequest.applymarker-499"><span class="linenos">499</span></a><span class="sd">            An object created by a call to ``pytest.mark.NAME(...)``.</span>
</span><span id="FixtureRequest.applymarker-500"><a href="#FixtureRequest.applymarker-500"><span class="linenos">500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest.applymarker-501"><a href="#FixtureRequest.applymarker-501"><span class="linenos">501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Apply a marker to a single test function invocation.</p>

<p>This method is useful if you don't want to have a keyword/marker
on all function invocations.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>marker</strong>: 
An object created by a call to <code>pytest.mark.NAME(...)</code>.</li>
</ul>
</div>


                            </div>
                            <div id="FixtureRequest.raiseerror" class="classattr">
                                        <input id="FixtureRequest.raiseerror-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">raiseerror</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">NoReturn</span>:</span></span>

                <label class="view-source-button" for="FixtureRequest.raiseerror-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.raiseerror"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.raiseerror-503"><a href="#FixtureRequest.raiseerror-503"><span class="linenos">503</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">raiseerror</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="FixtureRequest.raiseerror-504"><a href="#FixtureRequest.raiseerror-504"><span class="linenos">504</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raise a FixtureLookupError exception.</span>
</span><span id="FixtureRequest.raiseerror-505"><a href="#FixtureRequest.raiseerror-505"><span class="linenos">505</span></a>
</span><span id="FixtureRequest.raiseerror-506"><a href="#FixtureRequest.raiseerror-506"><span class="linenos">506</span></a><span class="sd">        :param msg:</span>
</span><span id="FixtureRequest.raiseerror-507"><a href="#FixtureRequest.raiseerror-507"><span class="linenos">507</span></a><span class="sd">            An optional custom error message.</span>
</span><span id="FixtureRequest.raiseerror-508"><a href="#FixtureRequest.raiseerror-508"><span class="linenos">508</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest.raiseerror-509"><a href="#FixtureRequest.raiseerror-509"><span class="linenos">509</span></a>        <span class="k">raise</span> <span class="n">FixtureLookupError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Raise a FixtureLookupError exception.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>msg</strong>: 
An optional custom error message.</li>
</ul>
</div>


                            </div>
                            <div id="FixtureRequest.getfixturevalue" class="classattr">
                                        <input id="FixtureRequest.getfixturevalue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getfixturevalue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">argname</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="FixtureRequest.getfixturevalue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FixtureRequest.getfixturevalue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FixtureRequest.getfixturevalue-511"><a href="#FixtureRequest.getfixturevalue-511"><span class="linenos">511</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfixturevalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="FixtureRequest.getfixturevalue-512"><a href="#FixtureRequest.getfixturevalue-512"><span class="linenos">512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Dynamically run a named fixture function.</span>
</span><span id="FixtureRequest.getfixturevalue-513"><a href="#FixtureRequest.getfixturevalue-513"><span class="linenos">513</span></a>
</span><span id="FixtureRequest.getfixturevalue-514"><a href="#FixtureRequest.getfixturevalue-514"><span class="linenos">514</span></a><span class="sd">        Declaring fixtures via function argument is recommended where possible.</span>
</span><span id="FixtureRequest.getfixturevalue-515"><a href="#FixtureRequest.getfixturevalue-515"><span class="linenos">515</span></a><span class="sd">        But if you can only decide whether to use another fixture at test</span>
</span><span id="FixtureRequest.getfixturevalue-516"><a href="#FixtureRequest.getfixturevalue-516"><span class="linenos">516</span></a><span class="sd">        setup time, you may use this function to retrieve it inside a fixture</span>
</span><span id="FixtureRequest.getfixturevalue-517"><a href="#FixtureRequest.getfixturevalue-517"><span class="linenos">517</span></a><span class="sd">        or test function body.</span>
</span><span id="FixtureRequest.getfixturevalue-518"><a href="#FixtureRequest.getfixturevalue-518"><span class="linenos">518</span></a>
</span><span id="FixtureRequest.getfixturevalue-519"><a href="#FixtureRequest.getfixturevalue-519"><span class="linenos">519</span></a><span class="sd">        This method can be used during the test setup phase or the test run</span>
</span><span id="FixtureRequest.getfixturevalue-520"><a href="#FixtureRequest.getfixturevalue-520"><span class="linenos">520</span></a><span class="sd">        phase, but during the test teardown phase a fixture&#39;s value may not</span>
</span><span id="FixtureRequest.getfixturevalue-521"><a href="#FixtureRequest.getfixturevalue-521"><span class="linenos">521</span></a><span class="sd">        be available.</span>
</span><span id="FixtureRequest.getfixturevalue-522"><a href="#FixtureRequest.getfixturevalue-522"><span class="linenos">522</span></a>
</span><span id="FixtureRequest.getfixturevalue-523"><a href="#FixtureRequest.getfixturevalue-523"><span class="linenos">523</span></a><span class="sd">        :param argname:</span>
</span><span id="FixtureRequest.getfixturevalue-524"><a href="#FixtureRequest.getfixturevalue-524"><span class="linenos">524</span></a><span class="sd">            The fixture name.</span>
</span><span id="FixtureRequest.getfixturevalue-525"><a href="#FixtureRequest.getfixturevalue-525"><span class="linenos">525</span></a><span class="sd">        :raises pytest.FixtureLookupError:</span>
</span><span id="FixtureRequest.getfixturevalue-526"><a href="#FixtureRequest.getfixturevalue-526"><span class="linenos">526</span></a><span class="sd">            If the given fixture could not be found.</span>
</span><span id="FixtureRequest.getfixturevalue-527"><a href="#FixtureRequest.getfixturevalue-527"><span class="linenos">527</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="FixtureRequest.getfixturevalue-528"><a href="#FixtureRequest.getfixturevalue-528"><span class="linenos">528</span></a>        <span class="c1"># Note that in addition to the use case described in the docstring,</span>
</span><span id="FixtureRequest.getfixturevalue-529"><a href="#FixtureRequest.getfixturevalue-529"><span class="linenos">529</span></a>        <span class="c1"># getfixturevalue() is also called by pytest itself during item and fixture</span>
</span><span id="FixtureRequest.getfixturevalue-530"><a href="#FixtureRequest.getfixturevalue-530"><span class="linenos">530</span></a>        <span class="c1"># setup to evaluate the fixtures that are requested statically</span>
</span><span id="FixtureRequest.getfixturevalue-531"><a href="#FixtureRequest.getfixturevalue-531"><span class="linenos">531</span></a>        <span class="c1"># (using function parameters, autouse, etc).</span>
</span><span id="FixtureRequest.getfixturevalue-532"><a href="#FixtureRequest.getfixturevalue-532"><span class="linenos">532</span></a>
</span><span id="FixtureRequest.getfixturevalue-533"><a href="#FixtureRequest.getfixturevalue-533"><span class="linenos">533</span></a>        <span class="n">fixturedef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_active_fixturedef</span><span class="p">(</span><span class="n">argname</span><span class="p">)</span>
</span><span id="FixtureRequest.getfixturevalue-534"><a href="#FixtureRequest.getfixturevalue-534"><span class="linenos">534</span></a>        <span class="k">assert</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span>
</span><span id="FixtureRequest.getfixturevalue-535"><a href="#FixtureRequest.getfixturevalue-535"><span class="linenos">535</span></a>            <span class="sa">f</span><span class="s1">&#39;The fixture value for &quot;</span><span class="si">{</span><span class="n">argname</span><span class="si">}</span><span class="s1">&quot; is not available.  &#39;</span>
</span><span id="FixtureRequest.getfixturevalue-536"><a href="#FixtureRequest.getfixturevalue-536"><span class="linenos">536</span></a>            <span class="s2">&quot;This can happen when the fixture has already been torn down.&quot;</span>
</span><span id="FixtureRequest.getfixturevalue-537"><a href="#FixtureRequest.getfixturevalue-537"><span class="linenos">537</span></a>        <span class="p">)</span>
</span><span id="FixtureRequest.getfixturevalue-538"><a href="#FixtureRequest.getfixturevalue-538"><span class="linenos">538</span></a>        <span class="k">return</span> <span class="n">fixturedef</span><span class="o">.</span><span class="n">cached_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Dynamically run a named fixture function.</p>

<p>Declaring fixtures via function argument is recommended where possible.
But if you can only decide whether to use another fixture at test
setup time, you may use this function to retrieve it inside a fixture
or test function body.</p>

<p>This method can be used during the test setup phase or the test run
phase, but during the test teardown phase a fixture's value may not
be available.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>argname</strong>: 
The fixture name.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong><a href="#FixtureLookupError">pytest.FixtureLookupError</a></strong>: 
If the given fixture could not be found.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="freeze_includes">
                            <input id="freeze_includes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">freeze_includes</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="freeze_includes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#freeze_includes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="freeze_includes-11"><a href="#freeze_includes-11"><span class="linenos">11</span></a><span class="k">def</span><span class="w"> </span><span class="nf">freeze_includes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="freeze_includes-12"><a href="#freeze_includes-12"><span class="linenos">12</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list of module names used by pytest that should be</span>
</span><span id="freeze_includes-13"><a href="#freeze_includes-13"><span class="linenos">13</span></a><span class="sd">    included by cx_freeze.&quot;&quot;&quot;</span>
</span><span id="freeze_includes-14"><a href="#freeze_includes-14"><span class="linenos">14</span></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">_pytest</span>
</span><span id="freeze_includes-15"><a href="#freeze_includes-15"><span class="linenos">15</span></a>
</span><span id="freeze_includes-16"><a href="#freeze_includes-16"><span class="linenos">16</span></a>    <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">_iter_all_modules</span><span class="p">(</span><span class="n">_pytest</span><span class="p">))</span>
</span><span id="freeze_includes-17"><a href="#freeze_includes-17"><span class="linenos">17</span></a>    <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Return a list of module names used by pytest that should be
included by cx_freeze.</p>
</div>


                </section>
                <section id="Function">
                            <input id="Function-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Function</span><wbr>(<span class="base">_pytest.python.PyobjMixin</span>, <span class="base"><a href="#Item">pytest.Item</a></span>):

                <label class="view-source-button" for="Function-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function-1495"><a href="#Function-1495"><span class="linenos">1495</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Function</span><span class="p">(</span><span class="n">PyobjMixin</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">):</span>
</span><span id="Function-1496"><a href="#Function-1496"><span class="linenos">1496</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Item responsible for setting up and executing a Python test function.</span>
</span><span id="Function-1497"><a href="#Function-1497"><span class="linenos">1497</span></a>
</span><span id="Function-1498"><a href="#Function-1498"><span class="linenos">1498</span></a><span class="sd">    :param name:</span>
</span><span id="Function-1499"><a href="#Function-1499"><span class="linenos">1499</span></a><span class="sd">        The full function name, including any decorations like those</span>
</span><span id="Function-1500"><a href="#Function-1500"><span class="linenos">1500</span></a><span class="sd">        added by parametrization (``my_func[my_param]``).</span>
</span><span id="Function-1501"><a href="#Function-1501"><span class="linenos">1501</span></a><span class="sd">    :param parent:</span>
</span><span id="Function-1502"><a href="#Function-1502"><span class="linenos">1502</span></a><span class="sd">        The parent Node.</span>
</span><span id="Function-1503"><a href="#Function-1503"><span class="linenos">1503</span></a><span class="sd">    :param config:</span>
</span><span id="Function-1504"><a href="#Function-1504"><span class="linenos">1504</span></a><span class="sd">        The pytest Config object.</span>
</span><span id="Function-1505"><a href="#Function-1505"><span class="linenos">1505</span></a><span class="sd">    :param callspec:</span>
</span><span id="Function-1506"><a href="#Function-1506"><span class="linenos">1506</span></a><span class="sd">        If given, this function has been parametrized and the callspec contains</span>
</span><span id="Function-1507"><a href="#Function-1507"><span class="linenos">1507</span></a><span class="sd">        meta information about the parametrization.</span>
</span><span id="Function-1508"><a href="#Function-1508"><span class="linenos">1508</span></a><span class="sd">    :param callobj:</span>
</span><span id="Function-1509"><a href="#Function-1509"><span class="linenos">1509</span></a><span class="sd">        If given, the object which will be called when the Function is invoked,</span>
</span><span id="Function-1510"><a href="#Function-1510"><span class="linenos">1510</span></a><span class="sd">        otherwise the callobj will be obtained from ``parent`` using ``originalname``.</span>
</span><span id="Function-1511"><a href="#Function-1511"><span class="linenos">1511</span></a><span class="sd">    :param keywords:</span>
</span><span id="Function-1512"><a href="#Function-1512"><span class="linenos">1512</span></a><span class="sd">        Keywords bound to the function object for &quot;-k&quot; matching.</span>
</span><span id="Function-1513"><a href="#Function-1513"><span class="linenos">1513</span></a><span class="sd">    :param session:</span>
</span><span id="Function-1514"><a href="#Function-1514"><span class="linenos">1514</span></a><span class="sd">        The pytest Session object.</span>
</span><span id="Function-1515"><a href="#Function-1515"><span class="linenos">1515</span></a><span class="sd">    :param fixtureinfo:</span>
</span><span id="Function-1516"><a href="#Function-1516"><span class="linenos">1516</span></a><span class="sd">        Fixture information already resolved at this fixture node..</span>
</span><span id="Function-1517"><a href="#Function-1517"><span class="linenos">1517</span></a><span class="sd">    :param originalname:</span>
</span><span id="Function-1518"><a href="#Function-1518"><span class="linenos">1518</span></a><span class="sd">        The attribute name to use for accessing the underlying function object.</span>
</span><span id="Function-1519"><a href="#Function-1519"><span class="linenos">1519</span></a><span class="sd">        Defaults to ``name``. Set this if name is different from the original name,</span>
</span><span id="Function-1520"><a href="#Function-1520"><span class="linenos">1520</span></a><span class="sd">        for example when it contains decorations like those added by parametrization</span>
</span><span id="Function-1521"><a href="#Function-1521"><span class="linenos">1521</span></a><span class="sd">        (``my_func[my_param]``).</span>
</span><span id="Function-1522"><a href="#Function-1522"><span class="linenos">1522</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Function-1523"><a href="#Function-1523"><span class="linenos">1523</span></a>
</span><span id="Function-1524"><a href="#Function-1524"><span class="linenos">1524</span></a>    <span class="c1"># Disable since functions handle it themselves.</span>
</span><span id="Function-1525"><a href="#Function-1525"><span class="linenos">1525</span></a>    <span class="n">_ALLOW_MARKERS</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Function-1526"><a href="#Function-1526"><span class="linenos">1526</span></a>
</span><span id="Function-1527"><a href="#Function-1527"><span class="linenos">1527</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Function-1528"><a href="#Function-1528"><span class="linenos">1528</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Function-1529"><a href="#Function-1529"><span class="linenos">1529</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Function-1530"><a href="#Function-1530"><span class="linenos">1530</span></a>        <span class="n">parent</span><span class="p">,</span>
</span><span id="Function-1531"><a href="#Function-1531"><span class="linenos">1531</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function-1532"><a href="#Function-1532"><span class="linenos">1532</span></a>        <span class="n">callspec</span><span class="p">:</span> <span class="n">CallSpec2</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function-1533"><a href="#Function-1533"><span class="linenos">1533</span></a>        <span class="n">callobj</span><span class="o">=</span><span class="n">NOTSET</span><span class="p">,</span>
</span><span id="Function-1534"><a href="#Function-1534"><span class="linenos">1534</span></a>        <span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function-1535"><a href="#Function-1535"><span class="linenos">1535</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function-1536"><a href="#Function-1536"><span class="linenos">1536</span></a>        <span class="n">fixtureinfo</span><span class="p">:</span> <span class="n">FuncFixtureInfo</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function-1537"><a href="#Function-1537"><span class="linenos">1537</span></a>        <span class="n">originalname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function-1538"><a href="#Function-1538"><span class="linenos">1538</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function-1539"><a href="#Function-1539"><span class="linenos">1539</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</span><span id="Function-1540"><a href="#Function-1540"><span class="linenos">1540</span></a>
</span><span id="Function-1541"><a href="#Function-1541"><span class="linenos">1541</span></a>        <span class="k">if</span> <span class="n">callobj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTSET</span><span class="p">:</span>
</span><span id="Function-1542"><a href="#Function-1542"><span class="linenos">1542</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="o">=</span> <span class="n">callobj</span>
</span><span id="Function-1543"><a href="#Function-1543"><span class="linenos">1543</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">callobj</span><span class="p">,</span> <span class="s2">&quot;__self__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Function-1544"><a href="#Function-1544"><span class="linenos">1544</span></a>
</span><span id="Function-1545"><a href="#Function-1545"><span class="linenos">1545</span></a>        <span class="c1">#: Original function name, without any decorations (for example</span>
</span><span id="Function-1546"><a href="#Function-1546"><span class="linenos">1546</span></a>        <span class="c1">#: parametrization adds a ``&quot;[...]&quot;`` suffix to function names), used to access</span>
</span><span id="Function-1547"><a href="#Function-1547"><span class="linenos">1547</span></a>        <span class="c1">#: the underlying function object from ``parent`` (in case ``callobj`` is not given</span>
</span><span id="Function-1548"><a href="#Function-1548"><span class="linenos">1548</span></a>        <span class="c1">#: explicitly).</span>
</span><span id="Function-1549"><a href="#Function-1549"><span class="linenos">1549</span></a>        <span class="c1">#:</span>
</span><span id="Function-1550"><a href="#Function-1550"><span class="linenos">1550</span></a>        <span class="c1">#: .. versionadded:: 3.0</span>
</span><span id="Function-1551"><a href="#Function-1551"><span class="linenos">1551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">originalname</span> <span class="o">=</span> <span class="n">originalname</span> <span class="ow">or</span> <span class="n">name</span>
</span><span id="Function-1552"><a href="#Function-1552"><span class="linenos">1552</span></a>
</span><span id="Function-1553"><a href="#Function-1553"><span class="linenos">1553</span></a>        <span class="c1"># Note: when FunctionDefinition is introduced, we should change ``originalname``</span>
</span><span id="Function-1554"><a href="#Function-1554"><span class="linenos">1554</span></a>        <span class="c1"># to a readonly property that returns FunctionDefinition.name.</span>
</span><span id="Function-1555"><a href="#Function-1555"><span class="linenos">1555</span></a>
</span><span id="Function-1556"><a href="#Function-1556"><span class="linenos">1556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">own_markers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">get_unpacked_marks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">))</span>
</span><span id="Function-1557"><a href="#Function-1557"><span class="linenos">1557</span></a>        <span class="k">if</span> <span class="n">callspec</span><span class="p">:</span>
</span><span id="Function-1558"><a href="#Function-1558"><span class="linenos">1558</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callspec</span> <span class="o">=</span> <span class="n">callspec</span>
</span><span id="Function-1559"><a href="#Function-1559"><span class="linenos">1559</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">own_markers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">callspec</span><span class="o">.</span><span class="n">marks</span><span class="p">)</span>
</span><span id="Function-1560"><a href="#Function-1560"><span class="linenos">1560</span></a>
</span><span id="Function-1561"><a href="#Function-1561"><span class="linenos">1561</span></a>        <span class="c1"># todo: this is a hell of a hack</span>
</span><span id="Function-1562"><a href="#Function-1562"><span class="linenos">1562</span></a>        <span class="c1"># https://github.com/pytest-dev/pytest/issues/4569</span>
</span><span id="Function-1563"><a href="#Function-1563"><span class="linenos">1563</span></a>        <span class="c1"># Note: the order of the updates is important here; indicates what</span>
</span><span id="Function-1564"><a href="#Function-1564"><span class="linenos">1564</span></a>        <span class="c1"># takes priority (ctor argument over function attributes over markers).</span>
</span><span id="Function-1565"><a href="#Function-1565"><span class="linenos">1565</span></a>        <span class="c1"># Take own_markers only; NodeKeywords handles parent traversal on its own.</span>
</span><span id="Function-1566"><a href="#Function-1566"><span class="linenos">1566</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">mark</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">mark</span><span class="p">)</span> <span class="k">for</span> <span class="n">mark</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">own_markers</span><span class="p">)</span>
</span><span id="Function-1567"><a href="#Function-1567"><span class="linenos">1567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</span><span id="Function-1568"><a href="#Function-1568"><span class="linenos">1568</span></a>        <span class="k">if</span> <span class="n">keywords</span><span class="p">:</span>
</span><span id="Function-1569"><a href="#Function-1569"><span class="linenos">1569</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">keywords</span><span class="p">)</span>
</span><span id="Function-1570"><a href="#Function-1570"><span class="linenos">1570</span></a>
</span><span id="Function-1571"><a href="#Function-1571"><span class="linenos">1571</span></a>        <span class="k">if</span> <span class="n">fixtureinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function-1572"><a href="#Function-1572"><span class="linenos">1572</span></a>            <span class="n">fm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="Function-1573"><a href="#Function-1573"><span class="linenos">1573</span></a>            <span class="n">fixtureinfo</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">getfixtureinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span>
</span><span id="Function-1574"><a href="#Function-1574"><span class="linenos">1574</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fixtureinfo</span><span class="p">:</span> <span class="n">FuncFixtureInfo</span> <span class="o">=</span> <span class="n">fixtureinfo</span>
</span><span id="Function-1575"><a href="#Function-1575"><span class="linenos">1575</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">names_closure</span>
</span><span id="Function-1576"><a href="#Function-1576"><span class="linenos">1576</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initrequest</span><span class="p">()</span>
</span><span id="Function-1577"><a href="#Function-1577"><span class="linenos">1577</span></a>
</span><span id="Function-1578"><a href="#Function-1578"><span class="linenos">1578</span></a>    <span class="c1"># todo: determine sound type limitations</span>
</span><span id="Function-1579"><a href="#Function-1579"><span class="linenos">1579</span></a>    <span class="nd">@classmethod</span>
</span><span id="Function-1580"><a href="#Function-1580"><span class="linenos">1580</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Function-1581"><a href="#Function-1581"><span class="linenos">1581</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public constructor.&quot;&quot;&quot;</span>
</span><span id="Function-1582"><a href="#Function-1582"><span class="linenos">1582</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Function-1583"><a href="#Function-1583"><span class="linenos">1583</span></a>
</span><span id="Function-1584"><a href="#Function-1584"><span class="linenos">1584</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_initrequest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function-1585"><a href="#Function-1585"><span class="linenos">1585</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">funcargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Function-1586"><a href="#Function-1586"><span class="linenos">1586</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="n">fixtures</span><span class="o">.</span><span class="n">TopRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Function-1587"><a href="#Function-1587"><span class="linenos">1587</span></a>
</span><span id="Function-1588"><a href="#Function-1588"><span class="linenos">1588</span></a>    <span class="nd">@property</span>
</span><span id="Function-1589"><a href="#Function-1589"><span class="linenos">1589</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function-1590"><a href="#Function-1590"><span class="linenos">1590</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Underlying python &#39;function&#39; object.&quot;&quot;&quot;</span>
</span><span id="Function-1591"><a href="#Function-1591"><span class="linenos">1591</span></a>        <span class="k">return</span> <span class="n">getimfunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
</span><span id="Function-1592"><a href="#Function-1592"><span class="linenos">1592</span></a>
</span><span id="Function-1593"><a href="#Function-1593"><span class="linenos">1593</span></a>    <span class="nd">@property</span>
</span><span id="Function-1594"><a href="#Function-1594"><span class="linenos">1594</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function-1595"><a href="#Function-1595"><span class="linenos">1595</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Function-1596"><a href="#Function-1596"><span class="linenos">1596</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span>
</span><span id="Function-1597"><a href="#Function-1597"><span class="linenos">1597</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="Function-1598"><a href="#Function-1598"><span class="linenos">1598</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">Class</span><span class="p">):</span>
</span><span id="Function-1599"><a href="#Function-1599"><span class="linenos">1599</span></a>                <span class="c1"># Each Function gets a fresh class instance.</span>
</span><span id="Function-1600"><a href="#Function-1600"><span class="linenos">1600</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getinstance</span><span class="p">()</span>
</span><span id="Function-1601"><a href="#Function-1601"><span class="linenos">1601</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Function-1602"><a href="#Function-1602"><span class="linenos">1602</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Function-1603"><a href="#Function-1603"><span class="linenos">1603</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span>
</span><span id="Function-1604"><a href="#Function-1604"><span class="linenos">1604</span></a>
</span><span id="Function-1605"><a href="#Function-1605"><span class="linenos">1605</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function-1606"><a href="#Function-1606"><span class="linenos">1606</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">Class</span><span class="p">):</span>
</span><span id="Function-1607"><a href="#Function-1607"><span class="linenos">1607</span></a>            <span class="c1"># Each Function gets a fresh class instance.</span>
</span><span id="Function-1608"><a href="#Function-1608"><span class="linenos">1608</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">newinstance</span><span class="p">()</span>
</span><span id="Function-1609"><a href="#Function-1609"><span class="linenos">1609</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Function-1610"><a href="#Function-1610"><span class="linenos">1610</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Function-1611"><a href="#Function-1611"><span class="linenos">1611</span></a>
</span><span id="Function-1612"><a href="#Function-1612"><span class="linenos">1612</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getobj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function-1613"><a href="#Function-1613"><span class="linenos">1613</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span>
</span><span id="Function-1614"><a href="#Function-1614"><span class="linenos">1614</span></a>        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function-1615"><a href="#Function-1615"><span class="linenos">1615</span></a>            <span class="n">parent_obj</span> <span class="o">=</span> <span class="n">instance</span>
</span><span id="Function-1616"><a href="#Function-1616"><span class="linenos">1616</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Function-1617"><a href="#Function-1617"><span class="linenos">1617</span></a>            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Function-1618"><a href="#Function-1618"><span class="linenos">1618</span></a>            <span class="n">parent_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">obj</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="Function-1619"><a href="#Function-1619"><span class="linenos">1619</span></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parent_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">originalname</span><span class="p">)</span>
</span><span id="Function-1620"><a href="#Function-1620"><span class="linenos">1620</span></a>
</span><span id="Function-1621"><a href="#Function-1621"><span class="linenos">1621</span></a>    <span class="nd">@property</span>
</span><span id="Function-1622"><a href="#Function-1622"><span class="linenos">1622</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_pyfuncitem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function-1623"><a href="#Function-1623"><span class="linenos">1623</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;(compatonly) for code expecting pytest-2.2 style request objects.&quot;&quot;&quot;</span>
</span><span id="Function-1624"><a href="#Function-1624"><span class="linenos">1624</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Function-1625"><a href="#Function-1625"><span class="linenos">1625</span></a>
</span><span id="Function-1626"><a href="#Function-1626"><span class="linenos">1626</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function-1627"><a href="#Function-1627"><span class="linenos">1627</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute the underlying test function.&quot;&quot;&quot;</span>
</span><span id="Function-1628"><a href="#Function-1628"><span class="linenos">1628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_pyfunc_call</span><span class="p">(</span><span class="n">pyfuncitem</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Function-1629"><a href="#Function-1629"><span class="linenos">1629</span></a>
</span><span id="Function-1630"><a href="#Function-1630"><span class="linenos">1630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function-1631"><a href="#Function-1631"><span class="linenos">1631</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">_fillfixtures</span><span class="p">()</span>
</span><span id="Function-1632"><a href="#Function-1632"><span class="linenos">1632</span></a>
</span><span id="Function-1633"><a href="#Function-1633"><span class="linenos">1633</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_traceback_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Traceback</span><span class="p">:</span>
</span><span id="Function-1634"><a href="#Function-1634"><span class="linenos">1634</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_obj&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;fulltrace&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Function-1635"><a href="#Function-1635"><span class="linenos">1635</span></a>            <span class="n">code</span> <span class="o">=</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">Code</span><span class="o">.</span><span class="n">from_function</span><span class="p">(</span><span class="n">get_real_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">))</span>
</span><span id="Function-1636"><a href="#Function-1636"><span class="linenos">1636</span></a>            <span class="n">path</span><span class="p">,</span> <span class="n">firstlineno</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">firstlineno</span>
</span><span id="Function-1637"><a href="#Function-1637"><span class="linenos">1637</span></a>            <span class="n">traceback</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">traceback</span>
</span><span id="Function-1638"><a href="#Function-1638"><span class="linenos">1638</span></a>            <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">firstlineno</span><span class="o">=</span><span class="n">firstlineno</span><span class="p">)</span>
</span><span id="Function-1639"><a href="#Function-1639"><span class="linenos">1639</span></a>            <span class="k">if</span> <span class="n">ntraceback</span> <span class="o">==</span> <span class="n">traceback</span><span class="p">:</span>
</span><span id="Function-1640"><a href="#Function-1640"><span class="linenos">1640</span></a>                <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">ntraceback</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
</span><span id="Function-1641"><a href="#Function-1641"><span class="linenos">1641</span></a>                <span class="k">if</span> <span class="n">ntraceback</span> <span class="o">==</span> <span class="n">traceback</span><span class="p">:</span>
</span><span id="Function-1642"><a href="#Function-1642"><span class="linenos">1642</span></a>                    <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">ntraceback</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">filter_traceback</span><span class="p">)</span>
</span><span id="Function-1643"><a href="#Function-1643"><span class="linenos">1643</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">ntraceback</span><span class="p">:</span>
</span><span id="Function-1644"><a href="#Function-1644"><span class="linenos">1644</span></a>                        <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">traceback</span>
</span><span id="Function-1645"><a href="#Function-1645"><span class="linenos">1645</span></a>            <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">ntraceback</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="Function-1646"><a href="#Function-1646"><span class="linenos">1646</span></a>
</span><span id="Function-1647"><a href="#Function-1647"><span class="linenos">1647</span></a>            <span class="c1"># issue364: mark all but first and last frames to</span>
</span><span id="Function-1648"><a href="#Function-1648"><span class="linenos">1648</span></a>            <span class="c1"># only show a single-line message for each frame.</span>
</span><span id="Function-1649"><a href="#Function-1649"><span class="linenos">1649</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="Function-1650"><a href="#Function-1650"><span class="linenos">1650</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ntraceback</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="Function-1651"><a href="#Function-1651"><span class="linenos">1651</span></a>                    <span class="n">ntraceback</span> <span class="o">=</span> <span class="n">Traceback</span><span class="p">(</span>
</span><span id="Function-1652"><a href="#Function-1652"><span class="linenos">1652</span></a>                        <span class="p">(</span>
</span><span id="Function-1653"><a href="#Function-1653"><span class="linenos">1653</span></a>                            <span class="n">ntraceback</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="Function-1654"><a href="#Function-1654"><span class="linenos">1654</span></a>                            <span class="o">*</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">with_repr_style</span><span class="p">(</span><span class="s2">&quot;short&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">ntraceback</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="Function-1655"><a href="#Function-1655"><span class="linenos">1655</span></a>                            <span class="n">ntraceback</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
</span><span id="Function-1656"><a href="#Function-1656"><span class="linenos">1656</span></a>                        <span class="p">)</span>
</span><span id="Function-1657"><a href="#Function-1657"><span class="linenos">1657</span></a>                    <span class="p">)</span>
</span><span id="Function-1658"><a href="#Function-1658"><span class="linenos">1658</span></a>
</span><span id="Function-1659"><a href="#Function-1659"><span class="linenos">1659</span></a>            <span class="k">return</span> <span class="n">ntraceback</span>
</span><span id="Function-1660"><a href="#Function-1660"><span class="linenos">1660</span></a>        <span class="k">return</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">traceback</span>
</span><span id="Function-1661"><a href="#Function-1661"><span class="linenos">1661</span></a>
</span><span id="Function-1662"><a href="#Function-1662"><span class="linenos">1662</span></a>    <span class="c1"># TODO: Type ignored -- breaks Liskov Substitution.</span>
</span><span id="Function-1663"><a href="#Function-1663"><span class="linenos">1663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repr_failure</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Function-1664"><a href="#Function-1664"><span class="linenos">1664</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Function-1665"><a href="#Function-1665"><span class="linenos">1665</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="Function-1666"><a href="#Function-1666"><span class="linenos">1666</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">:</span>
</span><span id="Function-1667"><a href="#Function-1667"><span class="linenos">1667</span></a>        <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</span><span id="Function-1668"><a href="#Function-1668"><span class="linenos">1668</span></a>        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="Function-1669"><a href="#Function-1669"><span class="linenos">1669</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span>
</span><span id="Function-1670"><a href="#Function-1670"><span class="linenos">1670</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_repr_failure_py</span><span class="p">(</span><span class="n">excinfo</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Item responsible for setting up and executing a Python test function.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>: 
The full function name, including any decorations like those
added by parametrization (<code>my_func[my_param]</code>).</li>
<li><strong>parent</strong>: 
The parent Node.</li>
<li><strong>config</strong>: 
The pytest Config object.</li>
<li><strong>callspec</strong>: 
If given, this function has been parametrized and the callspec contains
meta information about the parametrization.</li>
<li><strong>callobj</strong>: 
If given, the object which will be called when the Function is invoked,
otherwise the callobj will be obtained from <code><a href="#Function.parent">parent</a></code> using <code><a href="#Function.originalname">originalname</a></code>.</li>
<li><strong>keywords</strong>: 
Keywords bound to the function object for "-k" matching.</li>
<li><strong>session</strong>: 
The pytest Session object.</li>
<li><strong>fixtureinfo</strong>: 
Fixture information already resolved at this fixture node..</li>
<li><strong>originalname</strong>: 
The attribute name to use for accessing the underlying function object.
Defaults to <code><a href="#Function.name">name</a></code>. Set this if name is different from the original name,
for example when it contains decorations like those added by parametrization
(<code>my_func[my_param]</code>).</li>
</ul>
</div>


                            <div id="Function.__init__" class="classattr">
                                        <input id="Function.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Function</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">parent</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">callspec</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">CallSpec2</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">callobj</span><span class="o">=&lt;</span><span class="n">NotSetType</span><span class="o">.</span><span class="n">token</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">keywords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">Session</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">fixtureinfo</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">FuncFixtureInfo</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">originalname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Function.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.__init__-1527"><a href="#Function.__init__-1527"><span class="linenos">1527</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Function.__init__-1528"><a href="#Function.__init__-1528"><span class="linenos">1528</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Function.__init__-1529"><a href="#Function.__init__-1529"><span class="linenos">1529</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Function.__init__-1530"><a href="#Function.__init__-1530"><span class="linenos">1530</span></a>        <span class="n">parent</span><span class="p">,</span>
</span><span id="Function.__init__-1531"><a href="#Function.__init__-1531"><span class="linenos">1531</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function.__init__-1532"><a href="#Function.__init__-1532"><span class="linenos">1532</span></a>        <span class="n">callspec</span><span class="p">:</span> <span class="n">CallSpec2</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function.__init__-1533"><a href="#Function.__init__-1533"><span class="linenos">1533</span></a>        <span class="n">callobj</span><span class="o">=</span><span class="n">NOTSET</span><span class="p">,</span>
</span><span id="Function.__init__-1534"><a href="#Function.__init__-1534"><span class="linenos">1534</span></a>        <span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function.__init__-1535"><a href="#Function.__init__-1535"><span class="linenos">1535</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function.__init__-1536"><a href="#Function.__init__-1536"><span class="linenos">1536</span></a>        <span class="n">fixtureinfo</span><span class="p">:</span> <span class="n">FuncFixtureInfo</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function.__init__-1537"><a href="#Function.__init__-1537"><span class="linenos">1537</span></a>        <span class="n">originalname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Function.__init__-1538"><a href="#Function.__init__-1538"><span class="linenos">1538</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function.__init__-1539"><a href="#Function.__init__-1539"><span class="linenos">1539</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</span><span id="Function.__init__-1540"><a href="#Function.__init__-1540"><span class="linenos">1540</span></a>
</span><span id="Function.__init__-1541"><a href="#Function.__init__-1541"><span class="linenos">1541</span></a>        <span class="k">if</span> <span class="n">callobj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTSET</span><span class="p">:</span>
</span><span id="Function.__init__-1542"><a href="#Function.__init__-1542"><span class="linenos">1542</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="o">=</span> <span class="n">callobj</span>
</span><span id="Function.__init__-1543"><a href="#Function.__init__-1543"><span class="linenos">1543</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">callobj</span><span class="p">,</span> <span class="s2">&quot;__self__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Function.__init__-1544"><a href="#Function.__init__-1544"><span class="linenos">1544</span></a>
</span><span id="Function.__init__-1545"><a href="#Function.__init__-1545"><span class="linenos">1545</span></a>        <span class="c1">#: Original function name, without any decorations (for example</span>
</span><span id="Function.__init__-1546"><a href="#Function.__init__-1546"><span class="linenos">1546</span></a>        <span class="c1">#: parametrization adds a ``&quot;[...]&quot;`` suffix to function names), used to access</span>
</span><span id="Function.__init__-1547"><a href="#Function.__init__-1547"><span class="linenos">1547</span></a>        <span class="c1">#: the underlying function object from ``parent`` (in case ``callobj`` is not given</span>
</span><span id="Function.__init__-1548"><a href="#Function.__init__-1548"><span class="linenos">1548</span></a>        <span class="c1">#: explicitly).</span>
</span><span id="Function.__init__-1549"><a href="#Function.__init__-1549"><span class="linenos">1549</span></a>        <span class="c1">#:</span>
</span><span id="Function.__init__-1550"><a href="#Function.__init__-1550"><span class="linenos">1550</span></a>        <span class="c1">#: .. versionadded:: 3.0</span>
</span><span id="Function.__init__-1551"><a href="#Function.__init__-1551"><span class="linenos">1551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">originalname</span> <span class="o">=</span> <span class="n">originalname</span> <span class="ow">or</span> <span class="n">name</span>
</span><span id="Function.__init__-1552"><a href="#Function.__init__-1552"><span class="linenos">1552</span></a>
</span><span id="Function.__init__-1553"><a href="#Function.__init__-1553"><span class="linenos">1553</span></a>        <span class="c1"># Note: when FunctionDefinition is introduced, we should change ``originalname``</span>
</span><span id="Function.__init__-1554"><a href="#Function.__init__-1554"><span class="linenos">1554</span></a>        <span class="c1"># to a readonly property that returns FunctionDefinition.name.</span>
</span><span id="Function.__init__-1555"><a href="#Function.__init__-1555"><span class="linenos">1555</span></a>
</span><span id="Function.__init__-1556"><a href="#Function.__init__-1556"><span class="linenos">1556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">own_markers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">get_unpacked_marks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">))</span>
</span><span id="Function.__init__-1557"><a href="#Function.__init__-1557"><span class="linenos">1557</span></a>        <span class="k">if</span> <span class="n">callspec</span><span class="p">:</span>
</span><span id="Function.__init__-1558"><a href="#Function.__init__-1558"><span class="linenos">1558</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callspec</span> <span class="o">=</span> <span class="n">callspec</span>
</span><span id="Function.__init__-1559"><a href="#Function.__init__-1559"><span class="linenos">1559</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">own_markers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">callspec</span><span class="o">.</span><span class="n">marks</span><span class="p">)</span>
</span><span id="Function.__init__-1560"><a href="#Function.__init__-1560"><span class="linenos">1560</span></a>
</span><span id="Function.__init__-1561"><a href="#Function.__init__-1561"><span class="linenos">1561</span></a>        <span class="c1"># todo: this is a hell of a hack</span>
</span><span id="Function.__init__-1562"><a href="#Function.__init__-1562"><span class="linenos">1562</span></a>        <span class="c1"># https://github.com/pytest-dev/pytest/issues/4569</span>
</span><span id="Function.__init__-1563"><a href="#Function.__init__-1563"><span class="linenos">1563</span></a>        <span class="c1"># Note: the order of the updates is important here; indicates what</span>
</span><span id="Function.__init__-1564"><a href="#Function.__init__-1564"><span class="linenos">1564</span></a>        <span class="c1"># takes priority (ctor argument over function attributes over markers).</span>
</span><span id="Function.__init__-1565"><a href="#Function.__init__-1565"><span class="linenos">1565</span></a>        <span class="c1"># Take own_markers only; NodeKeywords handles parent traversal on its own.</span>
</span><span id="Function.__init__-1566"><a href="#Function.__init__-1566"><span class="linenos">1566</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">mark</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">mark</span><span class="p">)</span> <span class="k">for</span> <span class="n">mark</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">own_markers</span><span class="p">)</span>
</span><span id="Function.__init__-1567"><a href="#Function.__init__-1567"><span class="linenos">1567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</span><span id="Function.__init__-1568"><a href="#Function.__init__-1568"><span class="linenos">1568</span></a>        <span class="k">if</span> <span class="n">keywords</span><span class="p">:</span>
</span><span id="Function.__init__-1569"><a href="#Function.__init__-1569"><span class="linenos">1569</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">keywords</span><span class="p">)</span>
</span><span id="Function.__init__-1570"><a href="#Function.__init__-1570"><span class="linenos">1570</span></a>
</span><span id="Function.__init__-1571"><a href="#Function.__init__-1571"><span class="linenos">1571</span></a>        <span class="k">if</span> <span class="n">fixtureinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function.__init__-1572"><a href="#Function.__init__-1572"><span class="linenos">1572</span></a>            <span class="n">fm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span>
</span><span id="Function.__init__-1573"><a href="#Function.__init__-1573"><span class="linenos">1573</span></a>            <span class="n">fixtureinfo</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">getfixtureinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span>
</span><span id="Function.__init__-1574"><a href="#Function.__init__-1574"><span class="linenos">1574</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fixtureinfo</span><span class="p">:</span> <span class="n">FuncFixtureInfo</span> <span class="o">=</span> <span class="n">fixtureinfo</span>
</span><span id="Function.__init__-1575"><a href="#Function.__init__-1575"><span class="linenos">1575</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">names_closure</span>
</span><span id="Function.__init__-1576"><a href="#Function.__init__-1576"><span class="linenos">1576</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initrequest</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Function.originalname" class="classattr">
                                <div class="attr variable">
            <span class="name">originalname</span>

        
    </div>
    <a class="headerlink" href="#Function.originalname"></a>
    
    

                            </div>
                            <div id="Function.fixturenames" class="classattr">
                                <div class="attr variable">
            <span class="name">fixturenames</span>

        
    </div>
    <a class="headerlink" href="#Function.fixturenames"></a>
    
    

                            </div>
                            <div id="Function.from_parent" class="classattr">
                                        <input id="Function.from_parent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_parent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">parent</span>, </span><span class="param"><span class="o">**</span><span class="n">kw</span></span><span class="return-annotation">) -> <span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Function.from_parent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.from_parent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.from_parent-1579"><a href="#Function.from_parent-1579"><span class="linenos">1579</span></a>    <span class="nd">@classmethod</span>
</span><span id="Function.from_parent-1580"><a href="#Function.from_parent-1580"><span class="linenos">1580</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_parent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Function.from_parent-1581"><a href="#Function.from_parent-1581"><span class="linenos">1581</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The public constructor.&quot;&quot;&quot;</span>
</span><span id="Function.from_parent-1582"><a href="#Function.from_parent-1582"><span class="linenos">1582</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The public constructor.</p>
</div>


                            </div>
                            <div id="Function.function" class="classattr">
                                        <input id="Function.function-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">function</span>

                <label class="view-source-button" for="Function.function-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.function"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.function-1588"><a href="#Function.function-1588"><span class="linenos">1588</span></a>    <span class="nd">@property</span>
</span><span id="Function.function-1589"><a href="#Function.function-1589"><span class="linenos">1589</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function.function-1590"><a href="#Function.function-1590"><span class="linenos">1590</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Underlying python &#39;function&#39; object.&quot;&quot;&quot;</span>
</span><span id="Function.function-1591"><a href="#Function.function-1591"><span class="linenos">1591</span></a>        <span class="k">return</span> <span class="n">getimfunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Underlying python 'function' object.</p>
</div>


                            </div>
                            <div id="Function.instance" class="classattr">
                                        <input id="Function.instance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">instance</span>

                <label class="view-source-button" for="Function.instance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.instance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.instance-1593"><a href="#Function.instance-1593"><span class="linenos">1593</span></a>    <span class="nd">@property</span>
</span><span id="Function.instance-1594"><a href="#Function.instance-1594"><span class="linenos">1594</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Function.instance-1595"><a href="#Function.instance-1595"><span class="linenos">1595</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Function.instance-1596"><a href="#Function.instance-1596"><span class="linenos">1596</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span>
</span><span id="Function.instance-1597"><a href="#Function.instance-1597"><span class="linenos">1597</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="Function.instance-1598"><a href="#Function.instance-1598"><span class="linenos">1598</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">Class</span><span class="p">):</span>
</span><span id="Function.instance-1599"><a href="#Function.instance-1599"><span class="linenos">1599</span></a>                <span class="c1"># Each Function gets a fresh class instance.</span>
</span><span id="Function.instance-1600"><a href="#Function.instance-1600"><span class="linenos">1600</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getinstance</span><span class="p">()</span>
</span><span id="Function.instance-1601"><a href="#Function.instance-1601"><span class="linenos">1601</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Function.instance-1602"><a href="#Function.instance-1602"><span class="linenos">1602</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Function.instance-1603"><a href="#Function.instance-1603"><span class="linenos">1603</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_instance</span>
</span></pre></div>


            <div class="docstring"><p>Python instance object the function is bound to.</p>

<p>Returns None if not a test method, e.g. for a standalone test function,
a class or a module.</p>
</div>


                            </div>
                            <div id="Function.runtest" class="classattr">
                                        <input id="Function.runtest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runtest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Function.runtest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.runtest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.runtest-1626"><a href="#Function.runtest-1626"><span class="linenos">1626</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function.runtest-1627"><a href="#Function.runtest-1627"><span class="linenos">1627</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute the underlying test function.&quot;&quot;&quot;</span>
</span><span id="Function.runtest-1628"><a href="#Function.runtest-1628"><span class="linenos">1628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_pyfunc_call</span><span class="p">(</span><span class="n">pyfuncitem</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Execute the underlying test function.</p>
</div>


                            </div>
                            <div id="Function.setup" class="classattr">
                                        <input id="Function.setup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Function.setup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.setup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.setup-1630"><a href="#Function.setup-1630"><span class="linenos">1630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Function.setup-1631"><a href="#Function.setup-1631"><span class="linenos">1631</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">_fillfixtures</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Function.repr_failure" class="classattr">
                                        <input id="Function.repr_failure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">repr_failure</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">excinfo</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">TerminalRepr</span>:</span></span>

                <label class="view-source-button" for="Function.repr_failure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function.repr_failure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function.repr_failure-1663"><a href="#Function.repr_failure-1663"><span class="linenos">1663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">repr_failure</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
</span><span id="Function.repr_failure-1664"><a href="#Function.repr_failure-1664"><span class="linenos">1664</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Function.repr_failure-1665"><a href="#Function.repr_failure-1665"><span class="linenos">1665</span></a>        <span class="n">excinfo</span><span class="p">:</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="Function.repr_failure-1666"><a href="#Function.repr_failure-1666"><span class="linenos">1666</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">:</span>
</span><span id="Function.repr_failure-1667"><a href="#Function.repr_failure-1667"><span class="linenos">1667</span></a>        <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</span><span id="Function.repr_failure-1668"><a href="#Function.repr_failure-1668"><span class="linenos">1668</span></a>        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="Function.repr_failure-1669"><a href="#Function.repr_failure-1669"><span class="linenos">1669</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span>
</span><span id="Function.repr_failure-1670"><a href="#Function.repr_failure-1670"><span class="linenos">1670</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_repr_failure_py</span><span class="p">(</span><span class="n">excinfo</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return a representation of a collection or test failure.</p>

<p><em>seealso :ref:<code>non-python tests</code>.</em></p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>excinfo</strong>:  Exception information for the failure.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="hookimpl">
                    <div class="attr variable">
            <span class="name">hookimpl</span>        =
<span class="default_value">&lt;pluggy._hooks.HookimplMarker object&gt;</span>

        
    </div>
    <a class="headerlink" href="#hookimpl"></a>
    
    

                </section>
                <section id="HookRecorder">
                            <input id="HookRecorder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">HookRecorder</span>:

                <label class="view-source-button" for="HookRecorder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder-249"><a href="#HookRecorder-249"><span class="linenos">249</span></a><span class="nd">@final</span>
</span><span id="HookRecorder-250"><a href="#HookRecorder-250"><span class="linenos">250</span></a><span class="k">class</span><span class="w"> </span><span class="nc">HookRecorder</span><span class="p">:</span>
</span><span id="HookRecorder-251"><a href="#HookRecorder-251"><span class="linenos">251</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Record all hooks called in a plugin manager.</span>
</span><span id="HookRecorder-252"><a href="#HookRecorder-252"><span class="linenos">252</span></a>
</span><span id="HookRecorder-253"><a href="#HookRecorder-253"><span class="linenos">253</span></a><span class="sd">    Hook recorders are created by :class:`Pytester`.</span>
</span><span id="HookRecorder-254"><a href="#HookRecorder-254"><span class="linenos">254</span></a>
</span><span id="HookRecorder-255"><a href="#HookRecorder-255"><span class="linenos">255</span></a><span class="sd">    This wraps all the hook calls in the plugin manager, recording each call</span>
</span><span id="HookRecorder-256"><a href="#HookRecorder-256"><span class="linenos">256</span></a><span class="sd">    before propagating the normal calls.</span>
</span><span id="HookRecorder-257"><a href="#HookRecorder-257"><span class="linenos">257</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="HookRecorder-258"><a href="#HookRecorder-258"><span class="linenos">258</span></a>
</span><span id="HookRecorder-259"><a href="#HookRecorder-259"><span class="linenos">259</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="HookRecorder-260"><a href="#HookRecorder-260"><span class="linenos">260</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="HookRecorder-261"><a href="#HookRecorder-261"><span class="linenos">261</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-262"><a href="#HookRecorder-262"><span class="linenos">262</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="HookRecorder-263"><a href="#HookRecorder-263"><span class="linenos">263</span></a>
</span><span id="HookRecorder-264"><a href="#HookRecorder-264"><span class="linenos">264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pluginmanager</span> <span class="o">=</span> <span class="n">pluginmanager</span>
</span><span id="HookRecorder-265"><a href="#HookRecorder-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RecordedHookCall</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder-266"><a href="#HookRecorder-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="HookRecorder-267"><a href="#HookRecorder-267"><span class="linenos">267</span></a>
</span><span id="HookRecorder-268"><a href="#HookRecorder-268"><span class="linenos">268</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">before</span><span class="p">(</span><span class="n">hook_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hook_impls</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-269"><a href="#HookRecorder-269"><span class="linenos">269</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RecordedHookCall</span><span class="p">(</span><span class="n">hook_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>
</span><span id="HookRecorder-270"><a href="#HookRecorder-270"><span class="linenos">270</span></a>
</span><span id="HookRecorder-271"><a href="#HookRecorder-271"><span class="linenos">271</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">after</span><span class="p">(</span><span class="n">outcome</span><span class="p">,</span> <span class="n">hook_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hook_impls</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-272"><a href="#HookRecorder-272"><span class="linenos">272</span></a>            <span class="k">pass</span>
</span><span id="HookRecorder-273"><a href="#HookRecorder-273"><span class="linenos">273</span></a>
</span><span id="HookRecorder-274"><a href="#HookRecorder-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_undo_wrapping</span> <span class="o">=</span> <span class="n">pluginmanager</span><span class="o">.</span><span class="n">add_hookcall_monitoring</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">)</span>
</span><span id="HookRecorder-275"><a href="#HookRecorder-275"><span class="linenos">275</span></a>
</span><span id="HookRecorder-276"><a href="#HookRecorder-276"><span class="linenos">276</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish_recording</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-277"><a href="#HookRecorder-277"><span class="linenos">277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_undo_wrapping</span><span class="p">()</span>
</span><span id="HookRecorder-278"><a href="#HookRecorder-278"><span class="linenos">278</span></a>
</span><span id="HookRecorder-279"><a href="#HookRecorder-279"><span class="linenos">279</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getcalls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">RecordedHookCall</span><span class="p">]:</span>
</span><span id="HookRecorder-280"><a href="#HookRecorder-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all recorded calls to hooks with the given names (or name).&quot;&quot;&quot;</span>
</span><span id="HookRecorder-281"><a href="#HookRecorder-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="HookRecorder-282"><a href="#HookRecorder-282"><span class="linenos">282</span></a>            <span class="n">names</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span id="HookRecorder-283"><a href="#HookRecorder-283"><span class="linenos">283</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">call</span> <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span> <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">_name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span>
</span><span id="HookRecorder-284"><a href="#HookRecorder-284"><span class="linenos">284</span></a>
</span><span id="HookRecorder-285"><a href="#HookRecorder-285"><span class="linenos">285</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">assert_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-286"><a href="#HookRecorder-286"><span class="linenos">286</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="HookRecorder-287"><a href="#HookRecorder-287"><span class="linenos">287</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="HookRecorder-288"><a href="#HookRecorder-288"><span class="linenos">288</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="HookRecorder-289"><a href="#HookRecorder-289"><span class="linenos">289</span></a>        <span class="c1"># Since Python 3.13, f_locals is not a dict, but eval requires a dict.</span>
</span><span id="HookRecorder-290"><a href="#HookRecorder-290"><span class="linenos">290</span></a>        <span class="n">backlocals</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_locals</span><span class="p">)</span>
</span><span id="HookRecorder-291"><a href="#HookRecorder-291"><span class="linenos">291</span></a>        <span class="k">while</span> <span class="n">entries</span><span class="p">:</span>
</span><span id="HookRecorder-292"><a href="#HookRecorder-292"><span class="linenos">292</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">check</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="HookRecorder-293"><a href="#HookRecorder-293"><span class="linenos">293</span></a>            <span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">call</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span>
</span><span id="HookRecorder-294"><a href="#HookRecorder-294"><span class="linenos">294</span></a>                <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="HookRecorder-295"><a href="#HookRecorder-295"><span class="linenos">295</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NAMEMATCH&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder-296"><a href="#HookRecorder-296"><span class="linenos">296</span></a>                    <span class="k">if</span> <span class="nb">eval</span><span class="p">(</span><span class="n">check</span><span class="p">,</span> <span class="n">backlocals</span><span class="p">,</span> <span class="n">call</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">):</span>
</span><span id="HookRecorder-297"><a href="#HookRecorder-297"><span class="linenos">297</span></a>                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CHECKERMATCH&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">check</span><span class="p">),</span> <span class="s2">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder-298"><a href="#HookRecorder-298"><span class="linenos">298</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="HookRecorder-299"><a href="#HookRecorder-299"><span class="linenos">299</span></a>                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NOCHECKERMATCH&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">check</span><span class="p">),</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder-300"><a href="#HookRecorder-300"><span class="linenos">300</span></a>                        <span class="k">continue</span>
</span><span id="HookRecorder-301"><a href="#HookRecorder-301"><span class="linenos">301</span></a>                    <span class="n">i</span> <span class="o">+=</span> <span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="HookRecorder-302"><a href="#HookRecorder-302"><span class="linenos">302</span></a>                    <span class="k">break</span>
</span><span id="HookRecorder-303"><a href="#HookRecorder-303"><span class="linenos">303</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NONAMEMATCH&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;with&quot;</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder-304"><a href="#HookRecorder-304"><span class="linenos">304</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="HookRecorder-305"><a href="#HookRecorder-305"><span class="linenos">305</span></a>                <span class="n">fail</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;could not find </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2"> check </span><span class="si">{</span><span class="n">check</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="HookRecorder-306"><a href="#HookRecorder-306"><span class="linenos">306</span></a>
</span><span id="HookRecorder-307"><a href="#HookRecorder-307"><span class="linenos">307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">popcall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordedHookCall</span><span class="p">:</span>
</span><span id="HookRecorder-308"><a href="#HookRecorder-308"><span class="linenos">308</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="HookRecorder-309"><a href="#HookRecorder-309"><span class="linenos">309</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">call</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">):</span>
</span><span id="HookRecorder-310"><a href="#HookRecorder-310"><span class="linenos">310</span></a>            <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="HookRecorder-311"><a href="#HookRecorder-311"><span class="linenos">311</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="HookRecorder-312"><a href="#HookRecorder-312"><span class="linenos">312</span></a>                <span class="k">return</span> <span class="n">call</span>
</span><span id="HookRecorder-313"><a href="#HookRecorder-313"><span class="linenos">313</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;could not find call </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">, in:&quot;</span><span class="p">]</span>
</span><span id="HookRecorder-314"><a href="#HookRecorder-314"><span class="linenos">314</span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">])</span>
</span><span id="HookRecorder-315"><a href="#HookRecorder-315"><span class="linenos">315</span></a>        <span class="n">fail</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
</span><span id="HookRecorder-316"><a href="#HookRecorder-316"><span class="linenos">316</span></a>
</span><span id="HookRecorder-317"><a href="#HookRecorder-317"><span class="linenos">317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getcall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordedHookCall</span><span class="p">:</span>
</span><span id="HookRecorder-318"><a href="#HookRecorder-318"><span class="linenos">318</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="HookRecorder-319"><a href="#HookRecorder-319"><span class="linenos">319</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
</span><span id="HookRecorder-320"><a href="#HookRecorder-320"><span class="linenos">320</span></a>        <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="HookRecorder-321"><a href="#HookRecorder-321"><span class="linenos">321</span></a>
</span><span id="HookRecorder-322"><a href="#HookRecorder-322"><span class="linenos">322</span></a>    <span class="c1"># functionality for test reports</span>
</span><span id="HookRecorder-323"><a href="#HookRecorder-323"><span class="linenos">323</span></a>
</span><span id="HookRecorder-324"><a href="#HookRecorder-324"><span class="linenos">324</span></a>    <span class="nd">@overload</span>
</span><span id="HookRecorder-325"><a href="#HookRecorder-325"><span class="linenos">325</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getreports</span><span class="p">(</span>
</span><span id="HookRecorder-326"><a href="#HookRecorder-326"><span class="linenos">326</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-327"><a href="#HookRecorder-327"><span class="linenos">327</span></a>        <span class="n">names</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">],</span>
</span><span id="HookRecorder-328"><a href="#HookRecorder-328"><span class="linenos">328</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="HookRecorder-329"><a href="#HookRecorder-329"><span class="linenos">329</span></a>
</span><span id="HookRecorder-330"><a href="#HookRecorder-330"><span class="linenos">330</span></a>    <span class="nd">@overload</span>
</span><span id="HookRecorder-331"><a href="#HookRecorder-331"><span class="linenos">331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getreports</span><span class="p">(</span>
</span><span id="HookRecorder-332"><a href="#HookRecorder-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-333"><a href="#HookRecorder-333"><span class="linenos">333</span></a>        <span class="n">names</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">],</span>
</span><span id="HookRecorder-334"><a href="#HookRecorder-334"><span class="linenos">334</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TestReport</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="HookRecorder-335"><a href="#HookRecorder-335"><span class="linenos">335</span></a>
</span><span id="HookRecorder-336"><a href="#HookRecorder-336"><span class="linenos">336</span></a>    <span class="nd">@overload</span>
</span><span id="HookRecorder-337"><a href="#HookRecorder-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getreports</span><span class="p">(</span>
</span><span id="HookRecorder-338"><a href="#HookRecorder-338"><span class="linenos">338</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-339"><a href="#HookRecorder-339"><span class="linenos">339</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder-340"><a href="#HookRecorder-340"><span class="linenos">340</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-341"><a href="#HookRecorder-341"><span class="linenos">341</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-342"><a href="#HookRecorder-342"><span class="linenos">342</span></a>        <span class="p">),</span>
</span><span id="HookRecorder-343"><a href="#HookRecorder-343"><span class="linenos">343</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="HookRecorder-344"><a href="#HookRecorder-344"><span class="linenos">344</span></a>
</span><span id="HookRecorder-345"><a href="#HookRecorder-345"><span class="linenos">345</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getreports</span><span class="p">(</span>
</span><span id="HookRecorder-346"><a href="#HookRecorder-346"><span class="linenos">346</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-347"><a href="#HookRecorder-347"><span class="linenos">347</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder-348"><a href="#HookRecorder-348"><span class="linenos">348</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-349"><a href="#HookRecorder-349"><span class="linenos">349</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-350"><a href="#HookRecorder-350"><span class="linenos">350</span></a>        <span class="p">),</span>
</span><span id="HookRecorder-351"><a href="#HookRecorder-351"><span class="linenos">351</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">]:</span>
</span><span id="HookRecorder-352"><a href="#HookRecorder-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">report</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="n">names</span><span class="p">)]</span>
</span><span id="HookRecorder-353"><a href="#HookRecorder-353"><span class="linenos">353</span></a>
</span><span id="HookRecorder-354"><a href="#HookRecorder-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">matchreport</span><span class="p">(</span>
</span><span id="HookRecorder-355"><a href="#HookRecorder-355"><span class="linenos">355</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-356"><a href="#HookRecorder-356"><span class="linenos">356</span></a>        <span class="n">inamepart</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-357"><a href="#HookRecorder-357"><span class="linenos">357</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder-358"><a href="#HookRecorder-358"><span class="linenos">358</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-359"><a href="#HookRecorder-359"><span class="linenos">359</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-360"><a href="#HookRecorder-360"><span class="linenos">360</span></a>        <span class="p">),</span>
</span><span id="HookRecorder-361"><a href="#HookRecorder-361"><span class="linenos">361</span></a>        <span class="n">when</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="HookRecorder-362"><a href="#HookRecorder-362"><span class="linenos">362</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">:</span>
</span><span id="HookRecorder-363"><a href="#HookRecorder-363"><span class="linenos">363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a testreport whose dotted import path matches.&quot;&quot;&quot;</span>
</span><span id="HookRecorder-364"><a href="#HookRecorder-364"><span class="linenos">364</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder-365"><a href="#HookRecorder-365"><span class="linenos">365</span></a>        <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getreports</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">):</span>
</span><span id="HookRecorder-366"><a href="#HookRecorder-366"><span class="linenos">366</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">when</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">!=</span> <span class="s2">&quot;call&quot;</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="HookRecorder-367"><a href="#HookRecorder-367"><span class="linenos">367</span></a>                <span class="c1"># setup/teardown passing reports - let&#39;s ignore those</span>
</span><span id="HookRecorder-368"><a href="#HookRecorder-368"><span class="linenos">368</span></a>                <span class="k">continue</span>
</span><span id="HookRecorder-369"><a href="#HookRecorder-369"><span class="linenos">369</span></a>            <span class="k">if</span> <span class="n">when</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">!=</span> <span class="n">when</span><span class="p">:</span>
</span><span id="HookRecorder-370"><a href="#HookRecorder-370"><span class="linenos">370</span></a>                <span class="k">continue</span>
</span><span id="HookRecorder-371"><a href="#HookRecorder-371"><span class="linenos">371</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">inamepart</span> <span class="ow">or</span> <span class="n">inamepart</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">nodeid</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">):</span>
</span><span id="HookRecorder-372"><a href="#HookRecorder-372"><span class="linenos">372</span></a>                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder-373"><a href="#HookRecorder-373"><span class="linenos">373</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
</span><span id="HookRecorder-374"><a href="#HookRecorder-374"><span class="linenos">374</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="HookRecorder-375"><a href="#HookRecorder-375"><span class="linenos">375</span></a>                <span class="sa">f</span><span class="s2">&quot;could not find test report matching </span><span class="si">{</span><span class="n">inamepart</span><span class="si">!r}</span><span class="s2">: &quot;</span>
</span><span id="HookRecorder-376"><a href="#HookRecorder-376"><span class="linenos">376</span></a>                <span class="s2">&quot;no test reports at all!&quot;</span>
</span><span id="HookRecorder-377"><a href="#HookRecorder-377"><span class="linenos">377</span></a>            <span class="p">)</span>
</span><span id="HookRecorder-378"><a href="#HookRecorder-378"><span class="linenos">378</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="HookRecorder-379"><a href="#HookRecorder-379"><span class="linenos">379</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="HookRecorder-380"><a href="#HookRecorder-380"><span class="linenos">380</span></a>                <span class="sa">f</span><span class="s2">&quot;found 2 or more testreports matching </span><span class="si">{</span><span class="n">inamepart</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="HookRecorder-381"><a href="#HookRecorder-381"><span class="linenos">381</span></a>            <span class="p">)</span>
</span><span id="HookRecorder-382"><a href="#HookRecorder-382"><span class="linenos">382</span></a>        <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="HookRecorder-383"><a href="#HookRecorder-383"><span class="linenos">383</span></a>
</span><span id="HookRecorder-384"><a href="#HookRecorder-384"><span class="linenos">384</span></a>    <span class="nd">@overload</span>
</span><span id="HookRecorder-385"><a href="#HookRecorder-385"><span class="linenos">385</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailures</span><span class="p">(</span>
</span><span id="HookRecorder-386"><a href="#HookRecorder-386"><span class="linenos">386</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-387"><a href="#HookRecorder-387"><span class="linenos">387</span></a>        <span class="n">names</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">],</span>
</span><span id="HookRecorder-388"><a href="#HookRecorder-388"><span class="linenos">388</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="HookRecorder-389"><a href="#HookRecorder-389"><span class="linenos">389</span></a>
</span><span id="HookRecorder-390"><a href="#HookRecorder-390"><span class="linenos">390</span></a>    <span class="nd">@overload</span>
</span><span id="HookRecorder-391"><a href="#HookRecorder-391"><span class="linenos">391</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailures</span><span class="p">(</span>
</span><span id="HookRecorder-392"><a href="#HookRecorder-392"><span class="linenos">392</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-393"><a href="#HookRecorder-393"><span class="linenos">393</span></a>        <span class="n">names</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">],</span>
</span><span id="HookRecorder-394"><a href="#HookRecorder-394"><span class="linenos">394</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TestReport</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="HookRecorder-395"><a href="#HookRecorder-395"><span class="linenos">395</span></a>
</span><span id="HookRecorder-396"><a href="#HookRecorder-396"><span class="linenos">396</span></a>    <span class="nd">@overload</span>
</span><span id="HookRecorder-397"><a href="#HookRecorder-397"><span class="linenos">397</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailures</span><span class="p">(</span>
</span><span id="HookRecorder-398"><a href="#HookRecorder-398"><span class="linenos">398</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-399"><a href="#HookRecorder-399"><span class="linenos">399</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder-400"><a href="#HookRecorder-400"><span class="linenos">400</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-401"><a href="#HookRecorder-401"><span class="linenos">401</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-402"><a href="#HookRecorder-402"><span class="linenos">402</span></a>        <span class="p">),</span>
</span><span id="HookRecorder-403"><a href="#HookRecorder-403"><span class="linenos">403</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="HookRecorder-404"><a href="#HookRecorder-404"><span class="linenos">404</span></a>
</span><span id="HookRecorder-405"><a href="#HookRecorder-405"><span class="linenos">405</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailures</span><span class="p">(</span>
</span><span id="HookRecorder-406"><a href="#HookRecorder-406"><span class="linenos">406</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-407"><a href="#HookRecorder-407"><span class="linenos">407</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder-408"><a href="#HookRecorder-408"><span class="linenos">408</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-409"><a href="#HookRecorder-409"><span class="linenos">409</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder-410"><a href="#HookRecorder-410"><span class="linenos">410</span></a>        <span class="p">),</span>
</span><span id="HookRecorder-411"><a href="#HookRecorder-411"><span class="linenos">411</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">]:</span>
</span><span id="HookRecorder-412"><a href="#HookRecorder-412"><span class="linenos">412</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rep</span> <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getreports</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">failed</span><span class="p">]</span>
</span><span id="HookRecorder-413"><a href="#HookRecorder-413"><span class="linenos">413</span></a>
</span><span id="HookRecorder-414"><a href="#HookRecorder-414"><span class="linenos">414</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailedcollections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span><span class="p">]:</span>
</span><span id="HookRecorder-415"><a href="#HookRecorder-415"><span class="linenos">415</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getfailures</span><span class="p">(</span><span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">)</span>
</span><span id="HookRecorder-416"><a href="#HookRecorder-416"><span class="linenos">416</span></a>
</span><span id="HookRecorder-417"><a href="#HookRecorder-417"><span class="linenos">417</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">listoutcomes</span><span class="p">(</span>
</span><span id="HookRecorder-418"><a href="#HookRecorder-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder-419"><a href="#HookRecorder-419"><span class="linenos">419</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span>
</span><span id="HookRecorder-420"><a href="#HookRecorder-420"><span class="linenos">420</span></a>        <span class="n">Sequence</span><span class="p">[</span><span class="n">TestReport</span><span class="p">],</span>
</span><span id="HookRecorder-421"><a href="#HookRecorder-421"><span class="linenos">421</span></a>        <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">],</span>
</span><span id="HookRecorder-422"><a href="#HookRecorder-422"><span class="linenos">422</span></a>        <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">],</span>
</span><span id="HookRecorder-423"><a href="#HookRecorder-423"><span class="linenos">423</span></a>    <span class="p">]:</span>
</span><span id="HookRecorder-424"><a href="#HookRecorder-424"><span class="linenos">424</span></a>        <span class="n">passed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder-425"><a href="#HookRecorder-425"><span class="linenos">425</span></a>        <span class="n">skipped</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder-426"><a href="#HookRecorder-426"><span class="linenos">426</span></a>        <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder-427"><a href="#HookRecorder-427"><span class="linenos">427</span></a>        <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getreports</span><span class="p">(</span>
</span><span id="HookRecorder-428"><a href="#HookRecorder-428"><span class="linenos">428</span></a>            <span class="p">(</span><span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span> <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">)</span>
</span><span id="HookRecorder-429"><a href="#HookRecorder-429"><span class="linenos">429</span></a>        <span class="p">):</span>
</span><span id="HookRecorder-430"><a href="#HookRecorder-430"><span class="linenos">430</span></a>            <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="HookRecorder-431"><a href="#HookRecorder-431"><span class="linenos">431</span></a>                <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span><span class="p">:</span>
</span><span id="HookRecorder-432"><a href="#HookRecorder-432"><span class="linenos">432</span></a>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rep</span><span class="p">,</span> <span class="n">TestReport</span><span class="p">)</span>
</span><span id="HookRecorder-433"><a href="#HookRecorder-433"><span class="linenos">433</span></a>                    <span class="n">passed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder-434"><a href="#HookRecorder-434"><span class="linenos">434</span></a>            <span class="k">elif</span> <span class="n">rep</span><span class="o">.</span><span class="n">skipped</span><span class="p">:</span>
</span><span id="HookRecorder-435"><a href="#HookRecorder-435"><span class="linenos">435</span></a>                <span class="n">skipped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder-436"><a href="#HookRecorder-436"><span class="linenos">436</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="HookRecorder-437"><a href="#HookRecorder-437"><span class="linenos">437</span></a>                <span class="k">assert</span> <span class="n">rep</span><span class="o">.</span><span class="n">failed</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Unexpected outcome: </span><span class="si">{</span><span class="n">rep</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="HookRecorder-438"><a href="#HookRecorder-438"><span class="linenos">438</span></a>                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder-439"><a href="#HookRecorder-439"><span class="linenos">439</span></a>        <span class="k">return</span> <span class="n">passed</span><span class="p">,</span> <span class="n">skipped</span><span class="p">,</span> <span class="n">failed</span>
</span><span id="HookRecorder-440"><a href="#HookRecorder-440"><span class="linenos">440</span></a>
</span><span id="HookRecorder-441"><a href="#HookRecorder-441"><span class="linenos">441</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">countoutcomes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="HookRecorder-442"><a href="#HookRecorder-442"><span class="linenos">442</span></a>        <span class="k">return</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listoutcomes</span><span class="p">()]</span>
</span><span id="HookRecorder-443"><a href="#HookRecorder-443"><span class="linenos">443</span></a>
</span><span id="HookRecorder-444"><a href="#HookRecorder-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">assertoutcome</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">passed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">failed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-445"><a href="#HookRecorder-445"><span class="linenos">445</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="HookRecorder-446"><a href="#HookRecorder-446"><span class="linenos">446</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester_assertions</span><span class="w"> </span><span class="kn">import</span> <span class="n">assertoutcome</span>
</span><span id="HookRecorder-447"><a href="#HookRecorder-447"><span class="linenos">447</span></a>
</span><span id="HookRecorder-448"><a href="#HookRecorder-448"><span class="linenos">448</span></a>        <span class="n">outcomes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">listoutcomes</span><span class="p">()</span>
</span><span id="HookRecorder-449"><a href="#HookRecorder-449"><span class="linenos">449</span></a>        <span class="n">assertoutcome</span><span class="p">(</span>
</span><span id="HookRecorder-450"><a href="#HookRecorder-450"><span class="linenos">450</span></a>            <span class="n">outcomes</span><span class="p">,</span>
</span><span id="HookRecorder-451"><a href="#HookRecorder-451"><span class="linenos">451</span></a>            <span class="n">passed</span><span class="o">=</span><span class="n">passed</span><span class="p">,</span>
</span><span id="HookRecorder-452"><a href="#HookRecorder-452"><span class="linenos">452</span></a>            <span class="n">skipped</span><span class="o">=</span><span class="n">skipped</span><span class="p">,</span>
</span><span id="HookRecorder-453"><a href="#HookRecorder-453"><span class="linenos">453</span></a>            <span class="n">failed</span><span class="o">=</span><span class="n">failed</span><span class="p">,</span>
</span><span id="HookRecorder-454"><a href="#HookRecorder-454"><span class="linenos">454</span></a>        <span class="p">)</span>
</span><span id="HookRecorder-455"><a href="#HookRecorder-455"><span class="linenos">455</span></a>
</span><span id="HookRecorder-456"><a href="#HookRecorder-456"><span class="linenos">456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder-457"><a href="#HookRecorder-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Record all hooks called in a plugin manager.</p>

<p>Hook recorders are created by <code><a href="#Pytester">Pytester</a></code>.</p>

<p>This wraps all the hook calls in the plugin manager, recording each call
before propagating the normal calls.</p>
</div>


                            <div id="HookRecorder.__init__" class="classattr">
                                        <input id="HookRecorder.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">HookRecorder</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">pluginmanager</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">PytestPluginManager</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="HookRecorder.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.__init__-259"><a href="#HookRecorder.__init__-259"><span class="linenos">259</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="HookRecorder.__init__-260"><a href="#HookRecorder.__init__-260"><span class="linenos">260</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="HookRecorder.__init__-261"><a href="#HookRecorder.__init__-261"><span class="linenos">261</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.__init__-262"><a href="#HookRecorder.__init__-262"><span class="linenos">262</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="HookRecorder.__init__-263"><a href="#HookRecorder.__init__-263"><span class="linenos">263</span></a>
</span><span id="HookRecorder.__init__-264"><a href="#HookRecorder.__init__-264"><span class="linenos">264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pluginmanager</span> <span class="o">=</span> <span class="n">pluginmanager</span>
</span><span id="HookRecorder.__init__-265"><a href="#HookRecorder.__init__-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RecordedHookCall</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder.__init__-266"><a href="#HookRecorder.__init__-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="HookRecorder.__init__-267"><a href="#HookRecorder.__init__-267"><span class="linenos">267</span></a>
</span><span id="HookRecorder.__init__-268"><a href="#HookRecorder.__init__-268"><span class="linenos">268</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">before</span><span class="p">(</span><span class="n">hook_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hook_impls</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.__init__-269"><a href="#HookRecorder.__init__-269"><span class="linenos">269</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RecordedHookCall</span><span class="p">(</span><span class="n">hook_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>
</span><span id="HookRecorder.__init__-270"><a href="#HookRecorder.__init__-270"><span class="linenos">270</span></a>
</span><span id="HookRecorder.__init__-271"><a href="#HookRecorder.__init__-271"><span class="linenos">271</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">after</span><span class="p">(</span><span class="n">outcome</span><span class="p">,</span> <span class="n">hook_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hook_impls</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.__init__-272"><a href="#HookRecorder.__init__-272"><span class="linenos">272</span></a>            <span class="k">pass</span>
</span><span id="HookRecorder.__init__-273"><a href="#HookRecorder.__init__-273"><span class="linenos">273</span></a>
</span><span id="HookRecorder.__init__-274"><a href="#HookRecorder.__init__-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_undo_wrapping</span> <span class="o">=</span> <span class="n">pluginmanager</span><span class="o">.</span><span class="n">add_hookcall_monitoring</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.calls" class="classattr">
                                <div class="attr variable">
            <span class="name">calls</span><span class="annotation">: list[_pytest.pytester.RecordedHookCall]</span>

        
    </div>
    <a class="headerlink" href="#HookRecorder.calls"></a>
    
    

                            </div>
                            <div id="HookRecorder.ret" class="classattr">
                                <div class="attr variable">
            <span class="name">ret</span><span class="annotation">: int | _pytest.config.ExitCode | None</span>

        
    </div>
    <a class="headerlink" href="#HookRecorder.ret"></a>
    
    

                            </div>
                            <div id="HookRecorder.finish_recording" class="classattr">
                                        <input id="HookRecorder.finish_recording-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">finish_recording</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.finish_recording-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.finish_recording"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.finish_recording-276"><a href="#HookRecorder.finish_recording-276"><span class="linenos">276</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish_recording</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.finish_recording-277"><a href="#HookRecorder.finish_recording-277"><span class="linenos">277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_undo_wrapping</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.getcalls" class="classattr">
                                        <input id="HookRecorder.getcalls-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getcalls</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">names</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RecordedHookCall</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.getcalls-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.getcalls"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.getcalls-279"><a href="#HookRecorder.getcalls-279"><span class="linenos">279</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getcalls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">RecordedHookCall</span><span class="p">]:</span>
</span><span id="HookRecorder.getcalls-280"><a href="#HookRecorder.getcalls-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all recorded calls to hooks with the given names (or name).&quot;&quot;&quot;</span>
</span><span id="HookRecorder.getcalls-281"><a href="#HookRecorder.getcalls-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="HookRecorder.getcalls-282"><a href="#HookRecorder.getcalls-282"><span class="linenos">282</span></a>            <span class="n">names</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span id="HookRecorder.getcalls-283"><a href="#HookRecorder.getcalls-283"><span class="linenos">283</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">call</span> <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span> <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">_name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Get all recorded calls to hooks with the given names (or name).</p>
</div>


                            </div>
                            <div id="HookRecorder.assert_contains" class="classattr">
                                        <input id="HookRecorder.assert_contains-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">assert_contains</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">entries</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.assert_contains-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.assert_contains"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.assert_contains-285"><a href="#HookRecorder.assert_contains-285"><span class="linenos">285</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">assert_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.assert_contains-286"><a href="#HookRecorder.assert_contains-286"><span class="linenos">286</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="HookRecorder.assert_contains-287"><a href="#HookRecorder.assert_contains-287"><span class="linenos">287</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="HookRecorder.assert_contains-288"><a href="#HookRecorder.assert_contains-288"><span class="linenos">288</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-289"><a href="#HookRecorder.assert_contains-289"><span class="linenos">289</span></a>        <span class="c1"># Since Python 3.13, f_locals is not a dict, but eval requires a dict.</span>
</span><span id="HookRecorder.assert_contains-290"><a href="#HookRecorder.assert_contains-290"><span class="linenos">290</span></a>        <span class="n">backlocals</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_locals</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-291"><a href="#HookRecorder.assert_contains-291"><span class="linenos">291</span></a>        <span class="k">while</span> <span class="n">entries</span><span class="p">:</span>
</span><span id="HookRecorder.assert_contains-292"><a href="#HookRecorder.assert_contains-292"><span class="linenos">292</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">check</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-293"><a href="#HookRecorder.assert_contains-293"><span class="linenos">293</span></a>            <span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">call</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span>
</span><span id="HookRecorder.assert_contains-294"><a href="#HookRecorder.assert_contains-294"><span class="linenos">294</span></a>                <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="HookRecorder.assert_contains-295"><a href="#HookRecorder.assert_contains-295"><span class="linenos">295</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NAMEMATCH&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-296"><a href="#HookRecorder.assert_contains-296"><span class="linenos">296</span></a>                    <span class="k">if</span> <span class="nb">eval</span><span class="p">(</span><span class="n">check</span><span class="p">,</span> <span class="n">backlocals</span><span class="p">,</span> <span class="n">call</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">):</span>
</span><span id="HookRecorder.assert_contains-297"><a href="#HookRecorder.assert_contains-297"><span class="linenos">297</span></a>                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CHECKERMATCH&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">check</span><span class="p">),</span> <span class="s2">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-298"><a href="#HookRecorder.assert_contains-298"><span class="linenos">298</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="HookRecorder.assert_contains-299"><a href="#HookRecorder.assert_contains-299"><span class="linenos">299</span></a>                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NOCHECKERMATCH&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">check</span><span class="p">),</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-300"><a href="#HookRecorder.assert_contains-300"><span class="linenos">300</span></a>                        <span class="k">continue</span>
</span><span id="HookRecorder.assert_contains-301"><a href="#HookRecorder.assert_contains-301"><span class="linenos">301</span></a>                    <span class="n">i</span> <span class="o">+=</span> <span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="HookRecorder.assert_contains-302"><a href="#HookRecorder.assert_contains-302"><span class="linenos">302</span></a>                    <span class="k">break</span>
</span><span id="HookRecorder.assert_contains-303"><a href="#HookRecorder.assert_contains-303"><span class="linenos">303</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NONAMEMATCH&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;with&quot;</span><span class="p">,</span> <span class="n">call</span><span class="p">)</span>
</span><span id="HookRecorder.assert_contains-304"><a href="#HookRecorder.assert_contains-304"><span class="linenos">304</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="HookRecorder.assert_contains-305"><a href="#HookRecorder.assert_contains-305"><span class="linenos">305</span></a>                <span class="n">fail</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;could not find </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2"> check </span><span class="si">{</span><span class="n">check</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.popcall" class="classattr">
                                        <input id="HookRecorder.popcall-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">popcall</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RecordedHookCall</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.popcall-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.popcall"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.popcall-307"><a href="#HookRecorder.popcall-307"><span class="linenos">307</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">popcall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordedHookCall</span><span class="p">:</span>
</span><span id="HookRecorder.popcall-308"><a href="#HookRecorder.popcall-308"><span class="linenos">308</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="HookRecorder.popcall-309"><a href="#HookRecorder.popcall-309"><span class="linenos">309</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">call</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">):</span>
</span><span id="HookRecorder.popcall-310"><a href="#HookRecorder.popcall-310"><span class="linenos">310</span></a>            <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="HookRecorder.popcall-311"><a href="#HookRecorder.popcall-311"><span class="linenos">311</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="HookRecorder.popcall-312"><a href="#HookRecorder.popcall-312"><span class="linenos">312</span></a>                <span class="k">return</span> <span class="n">call</span>
</span><span id="HookRecorder.popcall-313"><a href="#HookRecorder.popcall-313"><span class="linenos">313</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;could not find call </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">, in:&quot;</span><span class="p">]</span>
</span><span id="HookRecorder.popcall-314"><a href="#HookRecorder.popcall-314"><span class="linenos">314</span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">])</span>
</span><span id="HookRecorder.popcall-315"><a href="#HookRecorder.popcall-315"><span class="linenos">315</span></a>        <span class="n">fail</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.getcall" class="classattr">
                                        <input id="HookRecorder.getcall-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getcall</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RecordedHookCall</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.getcall-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.getcall"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.getcall-317"><a href="#HookRecorder.getcall-317"><span class="linenos">317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getcall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordedHookCall</span><span class="p">:</span>
</span><span id="HookRecorder.getcall-318"><a href="#HookRecorder.getcall-318"><span class="linenos">318</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="HookRecorder.getcall-319"><a href="#HookRecorder.getcall-319"><span class="linenos">319</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
</span><span id="HookRecorder.getcall-320"><a href="#HookRecorder.getcall-320"><span class="linenos">320</span></a>        <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.getreports" class="classattr">
                                        <input id="HookRecorder.getreports-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getreports</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">names</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;pytest_collectreport&#39;</span><span class="p">,</span> <span class="s1">&#39;pytest_runtest_logreport&#39;</span><span class="p">)</span></span><span class="return-annotation">) -> <span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.getreports-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.getreports"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.getreports-345"><a href="#HookRecorder.getreports-345"><span class="linenos">345</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getreports</span><span class="p">(</span>
</span><span id="HookRecorder.getreports-346"><a href="#HookRecorder.getreports-346"><span class="linenos">346</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder.getreports-347"><a href="#HookRecorder.getreports-347"><span class="linenos">347</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder.getreports-348"><a href="#HookRecorder.getreports-348"><span class="linenos">348</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.getreports-349"><a href="#HookRecorder.getreports-349"><span class="linenos">349</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.getreports-350"><a href="#HookRecorder.getreports-350"><span class="linenos">350</span></a>        <span class="p">),</span>
</span><span id="HookRecorder.getreports-351"><a href="#HookRecorder.getreports-351"><span class="linenos">351</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">]:</span>
</span><span id="HookRecorder.getreports-352"><a href="#HookRecorder.getreports-352"><span class="linenos">352</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">report</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="n">names</span><span class="p">)]</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.matchreport" class="classattr">
                                        <input id="HookRecorder.matchreport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">matchreport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">inamepart</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">names</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;pytest_runtest_logreport&#39;</span><span class="p">,</span> <span class="s1">&#39;pytest_collectreport&#39;</span><span class="p">)</span>,</span><span class="param">	<span class="n">when</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.matchreport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.matchreport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.matchreport-354"><a href="#HookRecorder.matchreport-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">matchreport</span><span class="p">(</span>
</span><span id="HookRecorder.matchreport-355"><a href="#HookRecorder.matchreport-355"><span class="linenos">355</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder.matchreport-356"><a href="#HookRecorder.matchreport-356"><span class="linenos">356</span></a>        <span class="n">inamepart</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.matchreport-357"><a href="#HookRecorder.matchreport-357"><span class="linenos">357</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder.matchreport-358"><a href="#HookRecorder.matchreport-358"><span class="linenos">358</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.matchreport-359"><a href="#HookRecorder.matchreport-359"><span class="linenos">359</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.matchreport-360"><a href="#HookRecorder.matchreport-360"><span class="linenos">360</span></a>        <span class="p">),</span>
</span><span id="HookRecorder.matchreport-361"><a href="#HookRecorder.matchreport-361"><span class="linenos">361</span></a>        <span class="n">when</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="HookRecorder.matchreport-362"><a href="#HookRecorder.matchreport-362"><span class="linenos">362</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">:</span>
</span><span id="HookRecorder.matchreport-363"><a href="#HookRecorder.matchreport-363"><span class="linenos">363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a testreport whose dotted import path matches.&quot;&quot;&quot;</span>
</span><span id="HookRecorder.matchreport-364"><a href="#HookRecorder.matchreport-364"><span class="linenos">364</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder.matchreport-365"><a href="#HookRecorder.matchreport-365"><span class="linenos">365</span></a>        <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getreports</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">):</span>
</span><span id="HookRecorder.matchreport-366"><a href="#HookRecorder.matchreport-366"><span class="linenos">366</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">when</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">!=</span> <span class="s2">&quot;call&quot;</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="HookRecorder.matchreport-367"><a href="#HookRecorder.matchreport-367"><span class="linenos">367</span></a>                <span class="c1"># setup/teardown passing reports - let&#39;s ignore those</span>
</span><span id="HookRecorder.matchreport-368"><a href="#HookRecorder.matchreport-368"><span class="linenos">368</span></a>                <span class="k">continue</span>
</span><span id="HookRecorder.matchreport-369"><a href="#HookRecorder.matchreport-369"><span class="linenos">369</span></a>            <span class="k">if</span> <span class="n">when</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">!=</span> <span class="n">when</span><span class="p">:</span>
</span><span id="HookRecorder.matchreport-370"><a href="#HookRecorder.matchreport-370"><span class="linenos">370</span></a>                <span class="k">continue</span>
</span><span id="HookRecorder.matchreport-371"><a href="#HookRecorder.matchreport-371"><span class="linenos">371</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">inamepart</span> <span class="ow">or</span> <span class="n">inamepart</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">nodeid</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">):</span>
</span><span id="HookRecorder.matchreport-372"><a href="#HookRecorder.matchreport-372"><span class="linenos">372</span></a>                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder.matchreport-373"><a href="#HookRecorder.matchreport-373"><span class="linenos">373</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
</span><span id="HookRecorder.matchreport-374"><a href="#HookRecorder.matchreport-374"><span class="linenos">374</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="HookRecorder.matchreport-375"><a href="#HookRecorder.matchreport-375"><span class="linenos">375</span></a>                <span class="sa">f</span><span class="s2">&quot;could not find test report matching </span><span class="si">{</span><span class="n">inamepart</span><span class="si">!r}</span><span class="s2">: &quot;</span>
</span><span id="HookRecorder.matchreport-376"><a href="#HookRecorder.matchreport-376"><span class="linenos">376</span></a>                <span class="s2">&quot;no test reports at all!&quot;</span>
</span><span id="HookRecorder.matchreport-377"><a href="#HookRecorder.matchreport-377"><span class="linenos">377</span></a>            <span class="p">)</span>
</span><span id="HookRecorder.matchreport-378"><a href="#HookRecorder.matchreport-378"><span class="linenos">378</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="HookRecorder.matchreport-379"><a href="#HookRecorder.matchreport-379"><span class="linenos">379</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="HookRecorder.matchreport-380"><a href="#HookRecorder.matchreport-380"><span class="linenos">380</span></a>                <span class="sa">f</span><span class="s2">&quot;found 2 or more testreports matching </span><span class="si">{</span><span class="n">inamepart</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="HookRecorder.matchreport-381"><a href="#HookRecorder.matchreport-381"><span class="linenos">381</span></a>            <span class="p">)</span>
</span><span id="HookRecorder.matchreport-382"><a href="#HookRecorder.matchreport-382"><span class="linenos">382</span></a>        <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Return a testreport whose dotted import path matches.</p>
</div>


                            </div>
                            <div id="HookRecorder.getfailures" class="classattr">
                                        <input id="HookRecorder.getfailures-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getfailures</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">names</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;pytest_collectreport&#39;</span><span class="p">,</span> <span class="s1">&#39;pytest_runtest_logreport&#39;</span><span class="p">)</span></span><span class="return-annotation">) -> <span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.getfailures-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.getfailures"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.getfailures-405"><a href="#HookRecorder.getfailures-405"><span class="linenos">405</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailures</span><span class="p">(</span>
</span><span id="HookRecorder.getfailures-406"><a href="#HookRecorder.getfailures-406"><span class="linenos">406</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder.getfailures-407"><a href="#HookRecorder.getfailures-407"><span class="linenos">407</span></a>        <span class="n">names</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="HookRecorder.getfailures-408"><a href="#HookRecorder.getfailures-408"><span class="linenos">408</span></a>            <span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.getfailures-409"><a href="#HookRecorder.getfailures-409"><span class="linenos">409</span></a>            <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">,</span>
</span><span id="HookRecorder.getfailures-410"><a href="#HookRecorder.getfailures-410"><span class="linenos">410</span></a>        <span class="p">),</span>
</span><span id="HookRecorder.getfailures-411"><a href="#HookRecorder.getfailures-411"><span class="linenos">411</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">]:</span>
</span><span id="HookRecorder.getfailures-412"><a href="#HookRecorder.getfailures-412"><span class="linenos">412</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rep</span> <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getreports</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">failed</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.getfailedcollections" class="classattr">
                                        <input id="HookRecorder.getfailedcollections-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getfailedcollections</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.getfailedcollections-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.getfailedcollections"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.getfailedcollections-414"><a href="#HookRecorder.getfailedcollections-414"><span class="linenos">414</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getfailedcollections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span><span class="p">]:</span>
</span><span id="HookRecorder.getfailedcollections-415"><a href="#HookRecorder.getfailedcollections-415"><span class="linenos">415</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getfailures</span><span class="p">(</span><span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.listoutcomes" class="classattr">
                                        <input id="HookRecorder.listoutcomes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">listoutcomes</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.listoutcomes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.listoutcomes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.listoutcomes-417"><a href="#HookRecorder.listoutcomes-417"><span class="linenos">417</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">listoutcomes</span><span class="p">(</span>
</span><span id="HookRecorder.listoutcomes-418"><a href="#HookRecorder.listoutcomes-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="HookRecorder.listoutcomes-419"><a href="#HookRecorder.listoutcomes-419"><span class="linenos">419</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span>
</span><span id="HookRecorder.listoutcomes-420"><a href="#HookRecorder.listoutcomes-420"><span class="linenos">420</span></a>        <span class="n">Sequence</span><span class="p">[</span><span class="n">TestReport</span><span class="p">],</span>
</span><span id="HookRecorder.listoutcomes-421"><a href="#HookRecorder.listoutcomes-421"><span class="linenos">421</span></a>        <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">],</span>
</span><span id="HookRecorder.listoutcomes-422"><a href="#HookRecorder.listoutcomes-422"><span class="linenos">422</span></a>        <span class="n">Sequence</span><span class="p">[</span><span class="n">CollectReport</span> <span class="o">|</span> <span class="n">TestReport</span><span class="p">],</span>
</span><span id="HookRecorder.listoutcomes-423"><a href="#HookRecorder.listoutcomes-423"><span class="linenos">423</span></a>    <span class="p">]:</span>
</span><span id="HookRecorder.listoutcomes-424"><a href="#HookRecorder.listoutcomes-424"><span class="linenos">424</span></a>        <span class="n">passed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder.listoutcomes-425"><a href="#HookRecorder.listoutcomes-425"><span class="linenos">425</span></a>        <span class="n">skipped</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder.listoutcomes-426"><a href="#HookRecorder.listoutcomes-426"><span class="linenos">426</span></a>        <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HookRecorder.listoutcomes-427"><a href="#HookRecorder.listoutcomes-427"><span class="linenos">427</span></a>        <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getreports</span><span class="p">(</span>
</span><span id="HookRecorder.listoutcomes-428"><a href="#HookRecorder.listoutcomes-428"><span class="linenos">428</span></a>            <span class="p">(</span><span class="s2">&quot;pytest_collectreport&quot;</span><span class="p">,</span> <span class="s2">&quot;pytest_runtest_logreport&quot;</span><span class="p">)</span>
</span><span id="HookRecorder.listoutcomes-429"><a href="#HookRecorder.listoutcomes-429"><span class="linenos">429</span></a>        <span class="p">):</span>
</span><span id="HookRecorder.listoutcomes-430"><a href="#HookRecorder.listoutcomes-430"><span class="linenos">430</span></a>            <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="HookRecorder.listoutcomes-431"><a href="#HookRecorder.listoutcomes-431"><span class="linenos">431</span></a>                <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span><span class="p">:</span>
</span><span id="HookRecorder.listoutcomes-432"><a href="#HookRecorder.listoutcomes-432"><span class="linenos">432</span></a>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rep</span><span class="p">,</span> <span class="n">TestReport</span><span class="p">)</span>
</span><span id="HookRecorder.listoutcomes-433"><a href="#HookRecorder.listoutcomes-433"><span class="linenos">433</span></a>                    <span class="n">passed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder.listoutcomes-434"><a href="#HookRecorder.listoutcomes-434"><span class="linenos">434</span></a>            <span class="k">elif</span> <span class="n">rep</span><span class="o">.</span><span class="n">skipped</span><span class="p">:</span>
</span><span id="HookRecorder.listoutcomes-435"><a href="#HookRecorder.listoutcomes-435"><span class="linenos">435</span></a>                <span class="n">skipped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder.listoutcomes-436"><a href="#HookRecorder.listoutcomes-436"><span class="linenos">436</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="HookRecorder.listoutcomes-437"><a href="#HookRecorder.listoutcomes-437"><span class="linenos">437</span></a>                <span class="k">assert</span> <span class="n">rep</span><span class="o">.</span><span class="n">failed</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Unexpected outcome: </span><span class="si">{</span><span class="n">rep</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="HookRecorder.listoutcomes-438"><a href="#HookRecorder.listoutcomes-438"><span class="linenos">438</span></a>                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
</span><span id="HookRecorder.listoutcomes-439"><a href="#HookRecorder.listoutcomes-439"><span class="linenos">439</span></a>        <span class="k">return</span> <span class="n">passed</span><span class="p">,</span> <span class="n">skipped</span><span class="p">,</span> <span class="n">failed</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.countoutcomes" class="classattr">
                                        <input id="HookRecorder.countoutcomes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">countoutcomes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.countoutcomes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.countoutcomes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.countoutcomes-441"><a href="#HookRecorder.countoutcomes-441"><span class="linenos">441</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">countoutcomes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
</span><span id="HookRecorder.countoutcomes-442"><a href="#HookRecorder.countoutcomes-442"><span class="linenos">442</span></a>        <span class="k">return</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listoutcomes</span><span class="p">()]</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.assertoutcome" class="classattr">
                                        <input id="HookRecorder.assertoutcome-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">assertoutcome</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">passed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>, </span><span class="param"><span class="n">skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>, </span><span class="param"><span class="n">failed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.assertoutcome-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.assertoutcome"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.assertoutcome-444"><a href="#HookRecorder.assertoutcome-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">assertoutcome</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">passed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">failed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.assertoutcome-445"><a href="#HookRecorder.assertoutcome-445"><span class="linenos">445</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="HookRecorder.assertoutcome-446"><a href="#HookRecorder.assertoutcome-446"><span class="linenos">446</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester_assertions</span><span class="w"> </span><span class="kn">import</span> <span class="n">assertoutcome</span>
</span><span id="HookRecorder.assertoutcome-447"><a href="#HookRecorder.assertoutcome-447"><span class="linenos">447</span></a>
</span><span id="HookRecorder.assertoutcome-448"><a href="#HookRecorder.assertoutcome-448"><span class="linenos">448</span></a>        <span class="n">outcomes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">listoutcomes</span><span class="p">()</span>
</span><span id="HookRecorder.assertoutcome-449"><a href="#HookRecorder.assertoutcome-449"><span class="linenos">449</span></a>        <span class="n">assertoutcome</span><span class="p">(</span>
</span><span id="HookRecorder.assertoutcome-450"><a href="#HookRecorder.assertoutcome-450"><span class="linenos">450</span></a>            <span class="n">outcomes</span><span class="p">,</span>
</span><span id="HookRecorder.assertoutcome-451"><a href="#HookRecorder.assertoutcome-451"><span class="linenos">451</span></a>            <span class="n">passed</span><span class="o">=</span><span class="n">passed</span><span class="p">,</span>
</span><span id="HookRecorder.assertoutcome-452"><a href="#HookRecorder.assertoutcome-452"><span class="linenos">452</span></a>            <span class="n">skipped</span><span class="o">=</span><span class="n">skipped</span><span class="p">,</span>
</span><span id="HookRecorder.assertoutcome-453"><a href="#HookRecorder.assertoutcome-453"><span class="linenos">453</span></a>            <span class="n">failed</span><span class="o">=</span><span class="n">failed</span><span class="p">,</span>
</span><span id="HookRecorder.assertoutcome-454"><a href="#HookRecorder.assertoutcome-454"><span class="linenos">454</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="HookRecorder.clear" class="classattr">
                                        <input id="HookRecorder.clear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="HookRecorder.clear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HookRecorder.clear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HookRecorder.clear-456"><a href="#HookRecorder.clear-456"><span class="linenos">456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HookRecorder.clear-457"><a href="#HookRecorder.clear-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="hookspec">
                    <div class="attr variable">
            <span class="name">hookspec</span>        =
<span class="default_value">&lt;pluggy._hooks.HookspecMarker object&gt;</span>

        
    </div>
    <a class="headerlink" href="#hookspec"></a>
    
    

                </section>
                <section id="importorskip">
                            <input id="importorskip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">importorskip</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">modname</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">minversion</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">ImportError</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="importorskip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#importorskip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="importorskip-210"><a href="#importorskip-210"><span class="linenos">210</span></a><span class="k">def</span><span class="w"> </span><span class="nf">importorskip</span><span class="p">(</span>
</span><span id="importorskip-211"><a href="#importorskip-211"><span class="linenos">211</span></a>    <span class="n">modname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="importorskip-212"><a href="#importorskip-212"><span class="linenos">212</span></a>    <span class="n">minversion</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="importorskip-213"><a href="#importorskip-213"><span class="linenos">213</span></a>    <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="importorskip-214"><a href="#importorskip-214"><span class="linenos">214</span></a>    <span class="o">*</span><span class="p">,</span>
</span><span id="importorskip-215"><a href="#importorskip-215"><span class="linenos">215</span></a>    <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">ImportError</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="importorskip-216"><a href="#importorskip-216"><span class="linenos">216</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="importorskip-217"><a href="#importorskip-217"><span class="linenos">217</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Import and return the requested module ``modname``, or skip the</span>
</span><span id="importorskip-218"><a href="#importorskip-218"><span class="linenos">218</span></a><span class="sd">    current test if the module cannot be imported.</span>
</span><span id="importorskip-219"><a href="#importorskip-219"><span class="linenos">219</span></a>
</span><span id="importorskip-220"><a href="#importorskip-220"><span class="linenos">220</span></a><span class="sd">    :param modname:</span>
</span><span id="importorskip-221"><a href="#importorskip-221"><span class="linenos">221</span></a><span class="sd">        The name of the module to import.</span>
</span><span id="importorskip-222"><a href="#importorskip-222"><span class="linenos">222</span></a><span class="sd">    :param minversion:</span>
</span><span id="importorskip-223"><a href="#importorskip-223"><span class="linenos">223</span></a><span class="sd">        If given, the imported module&#39;s ``__version__`` attribute must be at</span>
</span><span id="importorskip-224"><a href="#importorskip-224"><span class="linenos">224</span></a><span class="sd">        least this minimal version, otherwise the test is still skipped.</span>
</span><span id="importorskip-225"><a href="#importorskip-225"><span class="linenos">225</span></a><span class="sd">    :param reason:</span>
</span><span id="importorskip-226"><a href="#importorskip-226"><span class="linenos">226</span></a><span class="sd">        If given, this reason is shown as the message when the module cannot</span>
</span><span id="importorskip-227"><a href="#importorskip-227"><span class="linenos">227</span></a><span class="sd">        be imported.</span>
</span><span id="importorskip-228"><a href="#importorskip-228"><span class="linenos">228</span></a><span class="sd">    :param exc_type:</span>
</span><span id="importorskip-229"><a href="#importorskip-229"><span class="linenos">229</span></a><span class="sd">        The exception that should be captured in order to skip modules.</span>
</span><span id="importorskip-230"><a href="#importorskip-230"><span class="linenos">230</span></a><span class="sd">        Must be :py:class:`ImportError` or a subclass.</span>
</span><span id="importorskip-231"><a href="#importorskip-231"><span class="linenos">231</span></a>
</span><span id="importorskip-232"><a href="#importorskip-232"><span class="linenos">232</span></a><span class="sd">        If the module can be imported but raises :class:`ImportError`, pytest will</span>
</span><span id="importorskip-233"><a href="#importorskip-233"><span class="linenos">233</span></a><span class="sd">        issue a warning to the user, as often users expect the module not to be</span>
</span><span id="importorskip-234"><a href="#importorskip-234"><span class="linenos">234</span></a><span class="sd">        found (which would raise :class:`ModuleNotFoundError` instead).</span>
</span><span id="importorskip-235"><a href="#importorskip-235"><span class="linenos">235</span></a>
</span><span id="importorskip-236"><a href="#importorskip-236"><span class="linenos">236</span></a><span class="sd">        This warning can be suppressed by passing ``exc_type=ImportError`` explicitly.</span>
</span><span id="importorskip-237"><a href="#importorskip-237"><span class="linenos">237</span></a>
</span><span id="importorskip-238"><a href="#importorskip-238"><span class="linenos">238</span></a><span class="sd">        See :ref:`import-or-skip-import-error` for details.</span>
</span><span id="importorskip-239"><a href="#importorskip-239"><span class="linenos">239</span></a>
</span><span id="importorskip-240"><a href="#importorskip-240"><span class="linenos">240</span></a>
</span><span id="importorskip-241"><a href="#importorskip-241"><span class="linenos">241</span></a><span class="sd">    :returns:</span>
</span><span id="importorskip-242"><a href="#importorskip-242"><span class="linenos">242</span></a><span class="sd">        The imported module. This should be assigned to its canonical name.</span>
</span><span id="importorskip-243"><a href="#importorskip-243"><span class="linenos">243</span></a>
</span><span id="importorskip-244"><a href="#importorskip-244"><span class="linenos">244</span></a><span class="sd">    :raises pytest.skip.Exception:</span>
</span><span id="importorskip-245"><a href="#importorskip-245"><span class="linenos">245</span></a><span class="sd">        If the module cannot be imported.</span>
</span><span id="importorskip-246"><a href="#importorskip-246"><span class="linenos">246</span></a>
</span><span id="importorskip-247"><a href="#importorskip-247"><span class="linenos">247</span></a><span class="sd">    Example::</span>
</span><span id="importorskip-248"><a href="#importorskip-248"><span class="linenos">248</span></a>
</span><span id="importorskip-249"><a href="#importorskip-249"><span class="linenos">249</span></a><span class="sd">        docutils = pytest.importorskip(&quot;docutils&quot;)</span>
</span><span id="importorskip-250"><a href="#importorskip-250"><span class="linenos">250</span></a>
</span><span id="importorskip-251"><a href="#importorskip-251"><span class="linenos">251</span></a><span class="sd">    .. versionadded:: 8.2</span>
</span><span id="importorskip-252"><a href="#importorskip-252"><span class="linenos">252</span></a>
</span><span id="importorskip-253"><a href="#importorskip-253"><span class="linenos">253</span></a><span class="sd">        The ``exc_type`` parameter.</span>
</span><span id="importorskip-254"><a href="#importorskip-254"><span class="linenos">254</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="importorskip-255"><a href="#importorskip-255"><span class="linenos">255</span></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
</span><span id="importorskip-256"><a href="#importorskip-256"><span class="linenos">256</span></a>
</span><span id="importorskip-257"><a href="#importorskip-257"><span class="linenos">257</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="importorskip-258"><a href="#importorskip-258"><span class="linenos">258</span></a>    <span class="nb">compile</span><span class="p">(</span><span class="n">modname</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;eval&quot;</span><span class="p">)</span>  <span class="c1"># to catch syntaxerrors</span>
</span><span id="importorskip-259"><a href="#importorskip-259"><span class="linenos">259</span></a>
</span><span id="importorskip-260"><a href="#importorskip-260"><span class="linenos">260</span></a>    <span class="c1"># Until pytest 9.1, we will warn the user if we catch ImportError (instead of ModuleNotFoundError),</span>
</span><span id="importorskip-261"><a href="#importorskip-261"><span class="linenos">261</span></a>    <span class="c1"># as this might be hiding an installation/environment problem, which is not usually what is intended</span>
</span><span id="importorskip-262"><a href="#importorskip-262"><span class="linenos">262</span></a>    <span class="c1"># when using importorskip() (#11523).</span>
</span><span id="importorskip-263"><a href="#importorskip-263"><span class="linenos">263</span></a>    <span class="c1"># In 9.1, to keep the function signature compatible, we just change the code below to:</span>
</span><span id="importorskip-264"><a href="#importorskip-264"><span class="linenos">264</span></a>    <span class="c1"># 1. Use `exc_type = ModuleNotFoundError` if `exc_type` is not given.</span>
</span><span id="importorskip-265"><a href="#importorskip-265"><span class="linenos">265</span></a>    <span class="c1"># 2. Remove `warn_on_import` and the warning handling.</span>
</span><span id="importorskip-266"><a href="#importorskip-266"><span class="linenos">266</span></a>    <span class="k">if</span> <span class="n">exc_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="importorskip-267"><a href="#importorskip-267"><span class="linenos">267</span></a>        <span class="n">exc_type</span> <span class="o">=</span> <span class="ne">ImportError</span>
</span><span id="importorskip-268"><a href="#importorskip-268"><span class="linenos">268</span></a>        <span class="n">warn_on_import_error</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="importorskip-269"><a href="#importorskip-269"><span class="linenos">269</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="importorskip-270"><a href="#importorskip-270"><span class="linenos">270</span></a>        <span class="n">warn_on_import_error</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="importorskip-271"><a href="#importorskip-271"><span class="linenos">271</span></a>
</span><span id="importorskip-272"><a href="#importorskip-272"><span class="linenos">272</span></a>    <span class="n">skipped</span><span class="p">:</span> <span class="n">Skipped</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="importorskip-273"><a href="#importorskip-273"><span class="linenos">273</span></a>    <span class="n">warning</span><span class="p">:</span> <span class="ne">Warning</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="importorskip-274"><a href="#importorskip-274"><span class="linenos">274</span></a>
</span><span id="importorskip-275"><a href="#importorskip-275"><span class="linenos">275</span></a>    <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
</span><span id="importorskip-276"><a href="#importorskip-276"><span class="linenos">276</span></a>        <span class="c1"># Make sure to ignore ImportWarnings that might happen because</span>
</span><span id="importorskip-277"><a href="#importorskip-277"><span class="linenos">277</span></a>        <span class="c1"># of existing directories with the same name we&#39;re trying to</span>
</span><span id="importorskip-278"><a href="#importorskip-278"><span class="linenos">278</span></a>        <span class="c1"># import but without a __init__.py file.</span>
</span><span id="importorskip-279"><a href="#importorskip-279"><span class="linenos">279</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</span><span id="importorskip-280"><a href="#importorskip-280"><span class="linenos">280</span></a>
</span><span id="importorskip-281"><a href="#importorskip-281"><span class="linenos">281</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="importorskip-282"><a href="#importorskip-282"><span class="linenos">282</span></a>            <span class="nb">__import__</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span>
</span><span id="importorskip-283"><a href="#importorskip-283"><span class="linenos">283</span></a>        <span class="k">except</span> <span class="n">exc_type</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="importorskip-284"><a href="#importorskip-284"><span class="linenos">284</span></a>            <span class="c1"># Do not raise or issue warnings inside the catch_warnings() block.</span>
</span><span id="importorskip-285"><a href="#importorskip-285"><span class="linenos">285</span></a>            <span class="k">if</span> <span class="n">reason</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="importorskip-286"><a href="#importorskip-286"><span class="linenos">286</span></a>                <span class="n">reason</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;could not import </span><span class="si">{</span><span class="n">modname</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="importorskip-287"><a href="#importorskip-287"><span class="linenos">287</span></a>            <span class="n">skipped</span> <span class="o">=</span> <span class="n">Skipped</span><span class="p">(</span><span class="n">reason</span><span class="p">,</span> <span class="n">allow_module_level</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="importorskip-288"><a href="#importorskip-288"><span class="linenos">288</span></a>
</span><span id="importorskip-289"><a href="#importorskip-289"><span class="linenos">289</span></a>            <span class="k">if</span> <span class="n">warn_on_import_error</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">):</span>
</span><span id="importorskip-290"><a href="#importorskip-290"><span class="linenos">290</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="importorskip-291"><a href="#importorskip-291"><span class="linenos">291</span></a>                    <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="importorskip-292"><a href="#importorskip-292"><span class="linenos">292</span></a>                    <span class="sa">f</span><span class="s2">&quot;Module &#39;</span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2">&#39; was found, but when imported by pytest it raised:&quot;</span><span class="p">,</span>
</span><span id="importorskip-293"><a href="#importorskip-293"><span class="linenos">293</span></a>                    <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">exc</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="importorskip-294"><a href="#importorskip-294"><span class="linenos">294</span></a>                    <span class="s2">&quot;In pytest 9.1 this warning will become an error by default.&quot;</span><span class="p">,</span>
</span><span id="importorskip-295"><a href="#importorskip-295"><span class="linenos">295</span></a>                    <span class="s2">&quot;You can fix the underlying problem, or alternatively overwrite this behavior and silence this &quot;</span>
</span><span id="importorskip-296"><a href="#importorskip-296"><span class="linenos">296</span></a>                    <span class="s2">&quot;warning by passing exc_type=ImportError explicitly.&quot;</span><span class="p">,</span>
</span><span id="importorskip-297"><a href="#importorskip-297"><span class="linenos">297</span></a>                    <span class="s2">&quot;See https://docs.pytest.org/en/stable/deprecations.html#pytest-importorskip-default-behavior-regarding-importerror&quot;</span><span class="p">,</span>
</span><span id="importorskip-298"><a href="#importorskip-298"><span class="linenos">298</span></a>                <span class="p">]</span>
</span><span id="importorskip-299"><a href="#importorskip-299"><span class="linenos">299</span></a>                <span class="n">warning</span> <span class="o">=</span> <span class="n">PytestDeprecationWarning</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
</span><span id="importorskip-300"><a href="#importorskip-300"><span class="linenos">300</span></a>
</span><span id="importorskip-301"><a href="#importorskip-301"><span class="linenos">301</span></a>    <span class="k">if</span> <span class="n">warning</span><span class="p">:</span>
</span><span id="importorskip-302"><a href="#importorskip-302"><span class="linenos">302</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="importorskip-303"><a href="#importorskip-303"><span class="linenos">303</span></a>    <span class="k">if</span> <span class="n">skipped</span><span class="p">:</span>
</span><span id="importorskip-304"><a href="#importorskip-304"><span class="linenos">304</span></a>        <span class="k">raise</span> <span class="n">skipped</span>
</span><span id="importorskip-305"><a href="#importorskip-305"><span class="linenos">305</span></a>
</span><span id="importorskip-306"><a href="#importorskip-306"><span class="linenos">306</span></a>    <span class="n">mod</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">modname</span><span class="p">]</span>
</span><span id="importorskip-307"><a href="#importorskip-307"><span class="linenos">307</span></a>    <span class="k">if</span> <span class="n">minversion</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="importorskip-308"><a href="#importorskip-308"><span class="linenos">308</span></a>        <span class="k">return</span> <span class="n">mod</span>
</span><span id="importorskip-309"><a href="#importorskip-309"><span class="linenos">309</span></a>    <span class="n">verattr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s2">&quot;__version__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="importorskip-310"><a href="#importorskip-310"><span class="linenos">310</span></a>    <span class="k">if</span> <span class="n">minversion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="importorskip-311"><a href="#importorskip-311"><span class="linenos">311</span></a>        <span class="c1"># Imported lazily to improve start-up time.</span>
</span><span id="importorskip-312"><a href="#importorskip-312"><span class="linenos">312</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">packaging.version</span><span class="w"> </span><span class="kn">import</span> <span class="n">Version</span>
</span><span id="importorskip-313"><a href="#importorskip-313"><span class="linenos">313</span></a>
</span><span id="importorskip-314"><a href="#importorskip-314"><span class="linenos">314</span></a>        <span class="k">if</span> <span class="n">verattr</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">Version</span><span class="p">(</span><span class="n">verattr</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Version</span><span class="p">(</span><span class="n">minversion</span><span class="p">):</span>
</span><span id="importorskip-315"><a href="#importorskip-315"><span class="linenos">315</span></a>            <span class="k">raise</span> <span class="n">Skipped</span><span class="p">(</span>
</span><span id="importorskip-316"><a href="#importorskip-316"><span class="linenos">316</span></a>                <span class="sa">f</span><span class="s2">&quot;module </span><span class="si">{</span><span class="n">modname</span><span class="si">!r}</span><span class="s2"> has __version__ </span><span class="si">{</span><span class="n">verattr</span><span class="si">!r}</span><span class="s2">, required is: </span><span class="si">{</span><span class="n">minversion</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="importorskip-317"><a href="#importorskip-317"><span class="linenos">317</span></a>                <span class="n">allow_module_level</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="importorskip-318"><a href="#importorskip-318"><span class="linenos">318</span></a>            <span class="p">)</span>
</span><span id="importorskip-319"><a href="#importorskip-319"><span class="linenos">319</span></a>    <span class="k">return</span> <span class="n">mod</span>
</span></pre></div>


            <div class="docstring"><p>Import and return the requested module <code>modname</code>, or skip the
current test if the module cannot be imported.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>modname</strong>: 
The name of the module to import.</li>
<li><strong>minversion</strong>: 
If given, the imported module's <code><a href="#__version__">__version__</a></code> attribute must be at
least this minimal version, otherwise the test is still skipped.</li>
<li><strong>reason</strong>: 
If given, this reason is shown as the message when the module cannot
be imported.</li>
<li><p><strong>exc_type</strong>: 
The exception that should be captured in order to skip modules.
Must be <code>ImportError</code> or a subclass.</p>

<p>If the module can be imported but raises <code>ImportError</code>, pytest will
issue a warning to the user, as often users expect the module not to be
found (which would raise <code>ModuleNotFoundError</code> instead).</p>

<p>This warning can be suppressed by passing <code>exc_type=ImportError</code> explicitly.</p>

<p>See :ref:<code>import-or-skip-import-error</code> for details.</p></li>
</ul>

<p>:returns:
    The imported module. This should be assigned to its canonical name.</p>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>pytest.skip.Exception</strong>: 
If the module cannot be imported.</li>
</ul>

<p>Example::</p>

<pre><code>docutils = <a href="#importorskip">pytest.importorskip</a>("docutils")
</code></pre>

<p><em>New in version 8.2:</em>
The <code>exc_type</code> parameter.</p>
</div>


                </section>
                <section id="Item">
                            <input id="Item-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Item</span><wbr>(<span class="base">_pytest.nodes.Node</span>, <span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Item-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Item"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Item-650"><a href="#Item-650"><span class="linenos">650</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Item</span><span class="p">(</span><span class="n">Node</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Item-651"><a href="#Item-651"><span class="linenos">651</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class of all test invocation items.</span>
</span><span id="Item-652"><a href="#Item-652"><span class="linenos">652</span></a>
</span><span id="Item-653"><a href="#Item-653"><span class="linenos">653</span></a><span class="sd">    Note that for a single function there might be multiple test invocation items.</span>
</span><span id="Item-654"><a href="#Item-654"><span class="linenos">654</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Item-655"><a href="#Item-655"><span class="linenos">655</span></a>
</span><span id="Item-656"><a href="#Item-656"><span class="linenos">656</span></a>    <span class="n">nextitem</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Item-657"><a href="#Item-657"><span class="linenos">657</span></a>
</span><span id="Item-658"><a href="#Item-658"><span class="linenos">658</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Item-659"><a href="#Item-659"><span class="linenos">659</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Item-660"><a href="#Item-660"><span class="linenos">660</span></a>        <span class="n">name</span><span class="p">,</span>
</span><span id="Item-661"><a href="#Item-661"><span class="linenos">661</span></a>        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Item-662"><a href="#Item-662"><span class="linenos">662</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Item-663"><a href="#Item-663"><span class="linenos">663</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Item-664"><a href="#Item-664"><span class="linenos">664</span></a>        <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Item-665"><a href="#Item-665"><span class="linenos">665</span></a>        <span class="o">**</span><span class="n">kw</span><span class="p">,</span>
</span><span id="Item-666"><a href="#Item-666"><span class="linenos">666</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Item-667"><a href="#Item-667"><span class="linenos">667</span></a>        <span class="c1"># The first two arguments are intentionally passed positionally,</span>
</span><span id="Item-668"><a href="#Item-668"><span class="linenos">668</span></a>        <span class="c1"># to keep plugins who define a node type which inherits from</span>
</span><span id="Item-669"><a href="#Item-669"><span class="linenos">669</span></a>        <span class="c1"># (pytest.Item, pytest.File) working (see issue #8435).</span>
</span><span id="Item-670"><a href="#Item-670"><span class="linenos">670</span></a>        <span class="c1"># They can be made kwargs when the deprecation above is done.</span>
</span><span id="Item-671"><a href="#Item-671"><span class="linenos">671</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Item-672"><a href="#Item-672"><span class="linenos">672</span></a>            <span class="n">name</span><span class="p">,</span>
</span><span id="Item-673"><a href="#Item-673"><span class="linenos">673</span></a>            <span class="n">parent</span><span class="p">,</span>
</span><span id="Item-674"><a href="#Item-674"><span class="linenos">674</span></a>            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="Item-675"><a href="#Item-675"><span class="linenos">675</span></a>            <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
</span><span id="Item-676"><a href="#Item-676"><span class="linenos">676</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Item-677"><a href="#Item-677"><span class="linenos">677</span></a>            <span class="o">**</span><span class="n">kw</span><span class="p">,</span>
</span><span id="Item-678"><a href="#Item-678"><span class="linenos">678</span></a>        <span class="p">)</span>
</span><span id="Item-679"><a href="#Item-679"><span class="linenos">679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_report_sections</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Item-680"><a href="#Item-680"><span class="linenos">680</span></a>
</span><span id="Item-681"><a href="#Item-681"><span class="linenos">681</span></a>        <span class="c1">#: A list of tuples (name, value) that holds user defined properties</span>
</span><span id="Item-682"><a href="#Item-682"><span class="linenos">682</span></a>        <span class="c1">#: for this test.</span>
</span><span id="Item-683"><a href="#Item-683"><span class="linenos">683</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user_properties</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Item-684"><a href="#Item-684"><span class="linenos">684</span></a>
</span><span id="Item-685"><a href="#Item-685"><span class="linenos">685</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_check_item_and_collector_diamond_inheritance</span><span class="p">()</span>
</span><span id="Item-686"><a href="#Item-686"><span class="linenos">686</span></a>
</span><span id="Item-687"><a href="#Item-687"><span class="linenos">687</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_item_and_collector_diamond_inheritance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Item-688"><a href="#Item-688"><span class="linenos">688</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Item-689"><a href="#Item-689"><span class="linenos">689</span></a><span class="sd">        Check if the current type inherits from both File and Collector</span>
</span><span id="Item-690"><a href="#Item-690"><span class="linenos">690</span></a><span class="sd">        at the same time, emitting a warning accordingly (#8447).</span>
</span><span id="Item-691"><a href="#Item-691"><span class="linenos">691</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item-692"><a href="#Item-692"><span class="linenos">692</span></a>        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Item-693"><a href="#Item-693"><span class="linenos">693</span></a>
</span><span id="Item-694"><a href="#Item-694"><span class="linenos">694</span></a>        <span class="c1"># We inject an attribute in the type to avoid issuing this warning</span>
</span><span id="Item-695"><a href="#Item-695"><span class="linenos">695</span></a>        <span class="c1"># for the same class more than once, which is not helpful.</span>
</span><span id="Item-696"><a href="#Item-696"><span class="linenos">696</span></a>        <span class="c1"># It is a hack, but was deemed acceptable in order to avoid</span>
</span><span id="Item-697"><a href="#Item-697"><span class="linenos">697</span></a>        <span class="c1"># flooding the user in the common case.</span>
</span><span id="Item-698"><a href="#Item-698"><span class="linenos">698</span></a>        <span class="n">attr_name</span> <span class="o">=</span> <span class="s2">&quot;_pytest_diamond_inheritance_warning_shown&quot;</span>
</span><span id="Item-699"><a href="#Item-699"><span class="linenos">699</span></a>        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Item-700"><a href="#Item-700"><span class="linenos">700</span></a>            <span class="k">return</span>
</span><span id="Item-701"><a href="#Item-701"><span class="linenos">701</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="Item-702"><a href="#Item-702"><span class="linenos">702</span></a>
</span><span id="Item-703"><a href="#Item-703"><span class="linenos">703</span></a>        <span class="n">problems</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="Item-704"><a href="#Item-704"><span class="linenos">704</span></a>            <span class="n">base</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__bases__</span> <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">Collector</span><span class="p">)</span>
</span><span id="Item-705"><a href="#Item-705"><span class="linenos">705</span></a>        <span class="p">)</span>
</span><span id="Item-706"><a href="#Item-706"><span class="linenos">706</span></a>        <span class="k">if</span> <span class="n">problems</span><span class="p">:</span>
</span><span id="Item-707"><a href="#Item-707"><span class="linenos">707</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Item-708"><a href="#Item-708"><span class="linenos">708</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is an Item subclass and should not be a collector, &quot;</span>
</span><span id="Item-709"><a href="#Item-709"><span class="linenos">709</span></a>                <span class="sa">f</span><span class="s2">&quot;however its bases </span><span class="si">{</span><span class="n">problems</span><span class="si">}</span><span class="s2"> are collectors.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Item-710"><a href="#Item-710"><span class="linenos">710</span></a>                <span class="s2">&quot;Please split the Collectors and the Item into separate node types.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Item-711"><a href="#Item-711"><span class="linenos">711</span></a>                <span class="s2">&quot;Pytest Doc example: https://docs.pytest.org/en/latest/example/nonpython.html</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Item-712"><a href="#Item-712"><span class="linenos">712</span></a>                <span class="s2">&quot;example pull request on a plugin: https://github.com/asmeurer/pytest-flakes/pull/40/&quot;</span><span class="p">,</span>
</span><span id="Item-713"><a href="#Item-713"><span class="linenos">713</span></a>                <span class="n">PytestWarning</span><span class="p">,</span>
</span><span id="Item-714"><a href="#Item-714"><span class="linenos">714</span></a>            <span class="p">)</span>
</span><span id="Item-715"><a href="#Item-715"><span class="linenos">715</span></a>
</span><span id="Item-716"><a href="#Item-716"><span class="linenos">716</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="Item-717"><a href="#Item-717"><span class="linenos">717</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Item-718"><a href="#Item-718"><span class="linenos">718</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the test case for this item.</span>
</span><span id="Item-719"><a href="#Item-719"><span class="linenos">719</span></a>
</span><span id="Item-720"><a href="#Item-720"><span class="linenos">720</span></a><span class="sd">        Must be implemented by subclasses.</span>
</span><span id="Item-721"><a href="#Item-721"><span class="linenos">721</span></a>
</span><span id="Item-722"><a href="#Item-722"><span class="linenos">722</span></a><span class="sd">        .. seealso:: :ref:`non-python tests`</span>
</span><span id="Item-723"><a href="#Item-723"><span class="linenos">723</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item-724"><a href="#Item-724"><span class="linenos">724</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;runtest must be implemented by Item subclass&quot;</span><span class="p">)</span>
</span><span id="Item-725"><a href="#Item-725"><span class="linenos">725</span></a>
</span><span id="Item-726"><a href="#Item-726"><span class="linenos">726</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_report_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Item-727"><a href="#Item-727"><span class="linenos">727</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new report section, similar to what&#39;s done internally to add</span>
</span><span id="Item-728"><a href="#Item-728"><span class="linenos">728</span></a><span class="sd">        stdout and stderr captured output::</span>
</span><span id="Item-729"><a href="#Item-729"><span class="linenos">729</span></a>
</span><span id="Item-730"><a href="#Item-730"><span class="linenos">730</span></a><span class="sd">            item.add_report_section(&quot;call&quot;, &quot;stdout&quot;, &quot;report section contents&quot;)</span>
</span><span id="Item-731"><a href="#Item-731"><span class="linenos">731</span></a>
</span><span id="Item-732"><a href="#Item-732"><span class="linenos">732</span></a><span class="sd">        :param str when:</span>
</span><span id="Item-733"><a href="#Item-733"><span class="linenos">733</span></a><span class="sd">            One of the possible capture states, ``&quot;setup&quot;``, ``&quot;call&quot;``, ``&quot;teardown&quot;``.</span>
</span><span id="Item-734"><a href="#Item-734"><span class="linenos">734</span></a><span class="sd">        :param str key:</span>
</span><span id="Item-735"><a href="#Item-735"><span class="linenos">735</span></a><span class="sd">            Name of the section, can be customized at will. Pytest uses ``&quot;stdout&quot;`` and</span>
</span><span id="Item-736"><a href="#Item-736"><span class="linenos">736</span></a><span class="sd">            ``&quot;stderr&quot;`` internally.</span>
</span><span id="Item-737"><a href="#Item-737"><span class="linenos">737</span></a><span class="sd">        :param str content:</span>
</span><span id="Item-738"><a href="#Item-738"><span class="linenos">738</span></a><span class="sd">            The full contents as a string.</span>
</span><span id="Item-739"><a href="#Item-739"><span class="linenos">739</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item-740"><a href="#Item-740"><span class="linenos">740</span></a>        <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
</span><span id="Item-741"><a href="#Item-741"><span class="linenos">741</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_report_sections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">when</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">content</span><span class="p">))</span>
</span><span id="Item-742"><a href="#Item-742"><span class="linenos">742</span></a>
</span><span id="Item-743"><a href="#Item-743"><span class="linenos">743</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span><span id="Item-744"><a href="#Item-744"><span class="linenos">744</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get location information for this item for test reports.</span>
</span><span id="Item-745"><a href="#Item-745"><span class="linenos">745</span></a>
</span><span id="Item-746"><a href="#Item-746"><span class="linenos">746</span></a><span class="sd">        Returns a tuple with three elements:</span>
</span><span id="Item-747"><a href="#Item-747"><span class="linenos">747</span></a>
</span><span id="Item-748"><a href="#Item-748"><span class="linenos">748</span></a><span class="sd">        - The path of the test (default ``self.path``)</span>
</span><span id="Item-749"><a href="#Item-749"><span class="linenos">749</span></a><span class="sd">        - The 0-based line number of the test (default ``None``)</span>
</span><span id="Item-750"><a href="#Item-750"><span class="linenos">750</span></a><span class="sd">        - A name of the test to be shown (default ``&quot;&quot;``)</span>
</span><span id="Item-751"><a href="#Item-751"><span class="linenos">751</span></a>
</span><span id="Item-752"><a href="#Item-752"><span class="linenos">752</span></a><span class="sd">        .. seealso:: :ref:`non-python tests`</span>
</span><span id="Item-753"><a href="#Item-753"><span class="linenos">753</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item-754"><a href="#Item-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
</span><span id="Item-755"><a href="#Item-755"><span class="linenos">755</span></a>
</span><span id="Item-756"><a href="#Item-756"><span class="linenos">756</span></a>    <span class="nd">@cached_property</span>
</span><span id="Item-757"><a href="#Item-757"><span class="linenos">757</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span><span id="Item-758"><a href="#Item-758"><span class="linenos">758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Item-759"><a href="#Item-759"><span class="linenos">759</span></a><span class="sd">        Returns a tuple of ``(relfspath, lineno, testname)`` for this item</span>
</span><span id="Item-760"><a href="#Item-760"><span class="linenos">760</span></a><span class="sd">        where ``relfspath`` is file path relative to ``config.rootpath``</span>
</span><span id="Item-761"><a href="#Item-761"><span class="linenos">761</span></a><span class="sd">        and lineno is a 0-based line number.</span>
</span><span id="Item-762"><a href="#Item-762"><span class="linenos">762</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item-763"><a href="#Item-763"><span class="linenos">763</span></a>        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reportinfo</span><span class="p">()</span>
</span><span id="Item-764"><a href="#Item-764"><span class="linenos">764</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">absolutepath</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Item-765"><a href="#Item-765"><span class="linenos">765</span></a>        <span class="n">relfspath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_node_location_to_relpath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Item-766"><a href="#Item-766"><span class="linenos">766</span></a>        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">str</span>
</span><span id="Item-767"><a href="#Item-767"><span class="linenos">767</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">relfspath</span><span class="p">,</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Base class of all test invocation items.</p>

<p>Note that for a single function there might be multiple test invocation items.</p>
</div>


                            <div id="Item.nextitem" class="classattr">
                                <div class="attr variable">
            <span class="name">nextitem</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Item.nextitem"></a>
    
    

                            </div>
                            <div id="Item.user_properties" class="classattr">
                                <div class="attr variable">
            <span class="name">user_properties</span><span class="annotation">: list[tuple[str, object]]</span>

        
    </div>
    <a class="headerlink" href="#Item.user_properties"></a>
    
    

                            </div>
                            <div id="Item.runtest" class="classattr">
                                        <input id="Item.runtest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-abc.abstractmethod">@abc.abstractmethod</div>

        <span class="def">def</span>
        <span class="name">runtest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Item.runtest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Item.runtest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Item.runtest-716"><a href="#Item.runtest-716"><span class="linenos">716</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="Item.runtest-717"><a href="#Item.runtest-717"><span class="linenos">717</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Item.runtest-718"><a href="#Item.runtest-718"><span class="linenos">718</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the test case for this item.</span>
</span><span id="Item.runtest-719"><a href="#Item.runtest-719"><span class="linenos">719</span></a>
</span><span id="Item.runtest-720"><a href="#Item.runtest-720"><span class="linenos">720</span></a><span class="sd">        Must be implemented by subclasses.</span>
</span><span id="Item.runtest-721"><a href="#Item.runtest-721"><span class="linenos">721</span></a>
</span><span id="Item.runtest-722"><a href="#Item.runtest-722"><span class="linenos">722</span></a><span class="sd">        .. seealso:: :ref:`non-python tests`</span>
</span><span id="Item.runtest-723"><a href="#Item.runtest-723"><span class="linenos">723</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item.runtest-724"><a href="#Item.runtest-724"><span class="linenos">724</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;runtest must be implemented by Item subclass&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run the test case for this item.</p>

<p>Must be implemented by subclasses.</p>

<p><em>seealso :ref:<code>non-python tests</code>.</em></p>
</div>


                            </div>
                            <div id="Item.add_report_section" class="classattr">
                                        <input id="Item.add_report_section-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_report_section</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">when</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">key</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">content</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Item.add_report_section-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Item.add_report_section"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Item.add_report_section-726"><a href="#Item.add_report_section-726"><span class="linenos">726</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_report_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Item.add_report_section-727"><a href="#Item.add_report_section-727"><span class="linenos">727</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new report section, similar to what&#39;s done internally to add</span>
</span><span id="Item.add_report_section-728"><a href="#Item.add_report_section-728"><span class="linenos">728</span></a><span class="sd">        stdout and stderr captured output::</span>
</span><span id="Item.add_report_section-729"><a href="#Item.add_report_section-729"><span class="linenos">729</span></a>
</span><span id="Item.add_report_section-730"><a href="#Item.add_report_section-730"><span class="linenos">730</span></a><span class="sd">            item.add_report_section(&quot;call&quot;, &quot;stdout&quot;, &quot;report section contents&quot;)</span>
</span><span id="Item.add_report_section-731"><a href="#Item.add_report_section-731"><span class="linenos">731</span></a>
</span><span id="Item.add_report_section-732"><a href="#Item.add_report_section-732"><span class="linenos">732</span></a><span class="sd">        :param str when:</span>
</span><span id="Item.add_report_section-733"><a href="#Item.add_report_section-733"><span class="linenos">733</span></a><span class="sd">            One of the possible capture states, ``&quot;setup&quot;``, ``&quot;call&quot;``, ``&quot;teardown&quot;``.</span>
</span><span id="Item.add_report_section-734"><a href="#Item.add_report_section-734"><span class="linenos">734</span></a><span class="sd">        :param str key:</span>
</span><span id="Item.add_report_section-735"><a href="#Item.add_report_section-735"><span class="linenos">735</span></a><span class="sd">            Name of the section, can be customized at will. Pytest uses ``&quot;stdout&quot;`` and</span>
</span><span id="Item.add_report_section-736"><a href="#Item.add_report_section-736"><span class="linenos">736</span></a><span class="sd">            ``&quot;stderr&quot;`` internally.</span>
</span><span id="Item.add_report_section-737"><a href="#Item.add_report_section-737"><span class="linenos">737</span></a><span class="sd">        :param str content:</span>
</span><span id="Item.add_report_section-738"><a href="#Item.add_report_section-738"><span class="linenos">738</span></a><span class="sd">            The full contents as a string.</span>
</span><span id="Item.add_report_section-739"><a href="#Item.add_report_section-739"><span class="linenos">739</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item.add_report_section-740"><a href="#Item.add_report_section-740"><span class="linenos">740</span></a>        <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
</span><span id="Item.add_report_section-741"><a href="#Item.add_report_section-741"><span class="linenos">741</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_report_sections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">when</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">content</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Add a new report section, similar to what's done internally to add
stdout and stderr captured output::</p>

<pre><code>item.add_report_section("call", "stdout", "report section contents")
</code></pre>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str when</strong>: 
One of the possible capture states, <code>"setup"</code>, <code>"call"</code>, <code>"teardown"</code>.</li>
<li><strong>str key</strong>: 
Name of the section, can be customized at will. Pytest uses <code>"stdout"</code> and
<code>"stderr"</code> internally.</li>
<li><strong>str content</strong>: 
The full contents as a string.</li>
</ul>
</div>


                            </div>
                            <div id="Item.reportinfo" class="classattr">
                                        <input id="Item.reportinfo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reportinfo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Item.reportinfo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Item.reportinfo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Item.reportinfo-743"><a href="#Item.reportinfo-743"><span class="linenos">743</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span><span id="Item.reportinfo-744"><a href="#Item.reportinfo-744"><span class="linenos">744</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get location information for this item for test reports.</span>
</span><span id="Item.reportinfo-745"><a href="#Item.reportinfo-745"><span class="linenos">745</span></a>
</span><span id="Item.reportinfo-746"><a href="#Item.reportinfo-746"><span class="linenos">746</span></a><span class="sd">        Returns a tuple with three elements:</span>
</span><span id="Item.reportinfo-747"><a href="#Item.reportinfo-747"><span class="linenos">747</span></a>
</span><span id="Item.reportinfo-748"><a href="#Item.reportinfo-748"><span class="linenos">748</span></a><span class="sd">        - The path of the test (default ``self.path``)</span>
</span><span id="Item.reportinfo-749"><a href="#Item.reportinfo-749"><span class="linenos">749</span></a><span class="sd">        - The 0-based line number of the test (default ``None``)</span>
</span><span id="Item.reportinfo-750"><a href="#Item.reportinfo-750"><span class="linenos">750</span></a><span class="sd">        - A name of the test to be shown (default ``&quot;&quot;``)</span>
</span><span id="Item.reportinfo-751"><a href="#Item.reportinfo-751"><span class="linenos">751</span></a>
</span><span id="Item.reportinfo-752"><a href="#Item.reportinfo-752"><span class="linenos">752</span></a><span class="sd">        .. seealso:: :ref:`non-python tests`</span>
</span><span id="Item.reportinfo-753"><a href="#Item.reportinfo-753"><span class="linenos">753</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item.reportinfo-754"><a href="#Item.reportinfo-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get location information for this item for test reports.</p>

<p>Returns a tuple with three elements:</p>

<ul>
<li>The path of the test (default <code>self.path</code>)</li>
<li>The 0-based line number of the test (default <code>None</code>)</li>
<li>A name of the test to be shown (default <code>""</code>)</li>
</ul>

<p><em>seealso :ref:<code>non-python tests</code>.</em></p>
</div>


                            </div>
                            <div id="Item.location" class="classattr">
                                        <input id="Item.location-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">location</span><span class="annotation">: tuple[str, int | None, str]</span>

                <label class="view-source-button" for="Item.location-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Item.location"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Item.location-756"><a href="#Item.location-756"><span class="linenos">756</span></a>    <span class="nd">@cached_property</span>
</span><span id="Item.location-757"><a href="#Item.location-757"><span class="linenos">757</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span><span id="Item.location-758"><a href="#Item.location-758"><span class="linenos">758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Item.location-759"><a href="#Item.location-759"><span class="linenos">759</span></a><span class="sd">        Returns a tuple of ``(relfspath, lineno, testname)`` for this item</span>
</span><span id="Item.location-760"><a href="#Item.location-760"><span class="linenos">760</span></a><span class="sd">        where ``relfspath`` is file path relative to ``config.rootpath``</span>
</span><span id="Item.location-761"><a href="#Item.location-761"><span class="linenos">761</span></a><span class="sd">        and lineno is a 0-based line number.</span>
</span><span id="Item.location-762"><a href="#Item.location-762"><span class="linenos">762</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Item.location-763"><a href="#Item.location-763"><span class="linenos">763</span></a>        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reportinfo</span><span class="p">()</span>
</span><span id="Item.location-764"><a href="#Item.location-764"><span class="linenos">764</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">absolutepath</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Item.location-765"><a href="#Item.location-765"><span class="linenos">765</span></a>        <span class="n">relfspath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_node_location_to_relpath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Item.location-766"><a href="#Item.location-766"><span class="linenos">766</span></a>        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">str</span>
</span><span id="Item.location-767"><a href="#Item.location-767"><span class="linenos">767</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">relfspath</span><span class="p">,</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Returns a tuple of <code>(relfspath, lineno, testname)</code> for this item
where <code>relfspath</code> is file path relative to <code>config.rootpath</code>
and lineno is a 0-based line number.</p>
</div>


                            </div>
                </section>
                <section id="LineMatcher">
                            <input id="LineMatcher-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LineMatcher</span>:

                <label class="view-source-button" for="LineMatcher-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher-1544"><a href="#LineMatcher-1544"><span class="linenos">1544</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LineMatcher</span><span class="p">:</span>
</span><span id="LineMatcher-1545"><a href="#LineMatcher-1545"><span class="linenos">1545</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Flexible matching of text.</span>
</span><span id="LineMatcher-1546"><a href="#LineMatcher-1546"><span class="linenos">1546</span></a>
</span><span id="LineMatcher-1547"><a href="#LineMatcher-1547"><span class="linenos">1547</span></a><span class="sd">    This is a convenience class to test large texts like the output of</span>
</span><span id="LineMatcher-1548"><a href="#LineMatcher-1548"><span class="linenos">1548</span></a><span class="sd">    commands.</span>
</span><span id="LineMatcher-1549"><a href="#LineMatcher-1549"><span class="linenos">1549</span></a>
</span><span id="LineMatcher-1550"><a href="#LineMatcher-1550"><span class="linenos">1550</span></a><span class="sd">    The constructor takes a list of lines without their trailing newlines, i.e.</span>
</span><span id="LineMatcher-1551"><a href="#LineMatcher-1551"><span class="linenos">1551</span></a><span class="sd">    ``text.splitlines()``.</span>
</span><span id="LineMatcher-1552"><a href="#LineMatcher-1552"><span class="linenos">1552</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1553"><a href="#LineMatcher-1553"><span class="linenos">1553</span></a>
</span><span id="LineMatcher-1554"><a href="#LineMatcher-1554"><span class="linenos">1554</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1555"><a href="#LineMatcher-1555"><span class="linenos">1555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span>
</span><span id="LineMatcher-1556"><a href="#LineMatcher-1556"><span class="linenos">1556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LineMatcher-1557"><a href="#LineMatcher-1557"><span class="linenos">1557</span></a>
</span><span id="LineMatcher-1558"><a href="#LineMatcher-1558"><span class="linenos">1558</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LineMatcher-1559"><a href="#LineMatcher-1559"><span class="linenos">1559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the entire original text.</span>
</span><span id="LineMatcher-1560"><a href="#LineMatcher-1560"><span class="linenos">1560</span></a>
</span><span id="LineMatcher-1561"><a href="#LineMatcher-1561"><span class="linenos">1561</span></a><span class="sd">        .. versionadded:: 6.2</span>
</span><span id="LineMatcher-1562"><a href="#LineMatcher-1562"><span class="linenos">1562</span></a><span class="sd">            You can use :meth:`str` in older versions.</span>
</span><span id="LineMatcher-1563"><a href="#LineMatcher-1563"><span class="linenos">1563</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1564"><a href="#LineMatcher-1564"><span class="linenos">1564</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
</span><span id="LineMatcher-1565"><a href="#LineMatcher-1565"><span class="linenos">1565</span></a>
</span><span id="LineMatcher-1566"><a href="#LineMatcher-1566"><span class="linenos">1566</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="LineMatcher-1567"><a href="#LineMatcher-1567"><span class="linenos">1567</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="LineMatcher-1568"><a href="#LineMatcher-1568"><span class="linenos">1568</span></a>            <span class="n">lines2</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">lines2</span><span class="p">)</span>
</span><span id="LineMatcher-1569"><a href="#LineMatcher-1569"><span class="linenos">1569</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="n">Source</span><span class="p">):</span>
</span><span id="LineMatcher-1570"><a href="#LineMatcher-1570"><span class="linenos">1570</span></a>            <span class="n">lines2</span> <span class="o">=</span> <span class="n">lines2</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lines</span>
</span><span id="LineMatcher-1571"><a href="#LineMatcher-1571"><span class="linenos">1571</span></a>        <span class="k">return</span> <span class="n">lines2</span>
</span><span id="LineMatcher-1572"><a href="#LineMatcher-1572"><span class="linenos">1572</span></a>
</span><span id="LineMatcher-1573"><a href="#LineMatcher-1573"><span class="linenos">1573</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fnmatch_lines_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1574"><a href="#LineMatcher-1574"><span class="linenos">1574</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output in any order (using :func:`python:fnmatch.fnmatch`).&quot;&quot;&quot;</span>
</span><span id="LineMatcher-1575"><a href="#LineMatcher-1575"><span class="linenos">1575</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1576"><a href="#LineMatcher-1576"><span class="linenos">1576</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines_random</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="n">fnmatch</span><span class="p">)</span>
</span><span id="LineMatcher-1577"><a href="#LineMatcher-1577"><span class="linenos">1577</span></a>
</span><span id="LineMatcher-1578"><a href="#LineMatcher-1578"><span class="linenos">1578</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">re_match_lines_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1579"><a href="#LineMatcher-1579"><span class="linenos">1579</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output in any order (using :func:`python:re.match`).&quot;&quot;&quot;</span>
</span><span id="LineMatcher-1580"><a href="#LineMatcher-1580"><span class="linenos">1580</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1581"><a href="#LineMatcher-1581"><span class="linenos">1581</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines_random</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">name</span><span class="p">)))</span>
</span><span id="LineMatcher-1582"><a href="#LineMatcher-1582"><span class="linenos">1582</span></a>
</span><span id="LineMatcher-1583"><a href="#LineMatcher-1583"><span class="linenos">1583</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_lines_random</span><span class="p">(</span>
</span><span id="LineMatcher-1584"><a href="#LineMatcher-1584"><span class="linenos">1584</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">match_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span>
</span><span id="LineMatcher-1585"><a href="#LineMatcher-1585"><span class="linenos">1585</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1586"><a href="#LineMatcher-1586"><span class="linenos">1586</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1587"><a href="#LineMatcher-1587"><span class="linenos">1587</span></a>        <span class="n">lines2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getlines</span><span class="p">(</span><span class="n">lines2</span><span class="p">)</span>
</span><span id="LineMatcher-1588"><a href="#LineMatcher-1588"><span class="linenos">1588</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines2</span><span class="p">:</span>
</span><span id="LineMatcher-1589"><a href="#LineMatcher-1589"><span class="linenos">1589</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
</span><span id="LineMatcher-1590"><a href="#LineMatcher-1590"><span class="linenos">1590</span></a>                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="n">x</span> <span class="ow">or</span> <span class="n">match_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
</span><span id="LineMatcher-1591"><a href="#LineMatcher-1591"><span class="linenos">1591</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="s2">&quot;matched: &quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span><span id="LineMatcher-1592"><a href="#LineMatcher-1592"><span class="linenos">1592</span></a>                    <span class="k">break</span>
</span><span id="LineMatcher-1593"><a href="#LineMatcher-1593"><span class="linenos">1593</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LineMatcher-1594"><a href="#LineMatcher-1594"><span class="linenos">1594</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;line </span><span class="si">{</span><span class="n">line</span><span class="si">!r}</span><span class="s2"> not found in output&quot;</span>
</span><span id="LineMatcher-1595"><a href="#LineMatcher-1595"><span class="linenos">1595</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1596"><a href="#LineMatcher-1596"><span class="linenos">1596</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_fail</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1597"><a href="#LineMatcher-1597"><span class="linenos">1597</span></a>
</span><span id="LineMatcher-1598"><a href="#LineMatcher-1598"><span class="linenos">1598</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_lines_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fnline</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="LineMatcher-1599"><a href="#LineMatcher-1599"><span class="linenos">1599</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return all lines following the given line in the text.</span>
</span><span id="LineMatcher-1600"><a href="#LineMatcher-1600"><span class="linenos">1600</span></a>
</span><span id="LineMatcher-1601"><a href="#LineMatcher-1601"><span class="linenos">1601</span></a><span class="sd">        The given line can contain glob wildcards.</span>
</span><span id="LineMatcher-1602"><a href="#LineMatcher-1602"><span class="linenos">1602</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1603"><a href="#LineMatcher-1603"><span class="linenos">1603</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
</span><span id="LineMatcher-1604"><a href="#LineMatcher-1604"><span class="linenos">1604</span></a>            <span class="k">if</span> <span class="n">fnline</span> <span class="o">==</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">fnmatch</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">fnline</span><span class="p">):</span>
</span><span id="LineMatcher-1605"><a href="#LineMatcher-1605"><span class="linenos">1605</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
</span><span id="LineMatcher-1606"><a href="#LineMatcher-1606"><span class="linenos">1606</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;line </span><span class="si">{</span><span class="n">fnline</span><span class="si">!r}</span><span class="s2"> not found in output&quot;</span><span class="p">)</span>
</span><span id="LineMatcher-1607"><a href="#LineMatcher-1607"><span class="linenos">1607</span></a>
</span><span id="LineMatcher-1608"><a href="#LineMatcher-1608"><span class="linenos">1608</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1609"><a href="#LineMatcher-1609"><span class="linenos">1609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">))</span>
</span><span id="LineMatcher-1610"><a href="#LineMatcher-1610"><span class="linenos">1610</span></a>
</span><span id="LineMatcher-1611"><a href="#LineMatcher-1611"><span class="linenos">1611</span></a>    <span class="nd">@property</span>
</span><span id="LineMatcher-1612"><a href="#LineMatcher-1612"><span class="linenos">1612</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_log_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LineMatcher-1613"><a href="#LineMatcher-1613"><span class="linenos">1613</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span><span class="p">)</span>
</span><span id="LineMatcher-1614"><a href="#LineMatcher-1614"><span class="linenos">1614</span></a>
</span><span id="LineMatcher-1615"><a href="#LineMatcher-1615"><span class="linenos">1615</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fnmatch_lines</span><span class="p">(</span>
</span><span id="LineMatcher-1616"><a href="#LineMatcher-1616"><span class="linenos">1616</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher-1617"><a href="#LineMatcher-1617"><span class="linenos">1617</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1618"><a href="#LineMatcher-1618"><span class="linenos">1618</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output (using :func:`python:fnmatch.fnmatch`).</span>
</span><span id="LineMatcher-1619"><a href="#LineMatcher-1619"><span class="linenos">1619</span></a>
</span><span id="LineMatcher-1620"><a href="#LineMatcher-1620"><span class="linenos">1620</span></a><span class="sd">        The argument is a list of lines which have to match and can use glob</span>
</span><span id="LineMatcher-1621"><a href="#LineMatcher-1621"><span class="linenos">1621</span></a><span class="sd">        wildcards.  If they do not match a pytest.fail() is called.  The</span>
</span><span id="LineMatcher-1622"><a href="#LineMatcher-1622"><span class="linenos">1622</span></a><span class="sd">        matches and non-matches are also shown as part of the error message.</span>
</span><span id="LineMatcher-1623"><a href="#LineMatcher-1623"><span class="linenos">1623</span></a>
</span><span id="LineMatcher-1624"><a href="#LineMatcher-1624"><span class="linenos">1624</span></a><span class="sd">        :param lines2: String patterns to match.</span>
</span><span id="LineMatcher-1625"><a href="#LineMatcher-1625"><span class="linenos">1625</span></a><span class="sd">        :param consecutive: Match lines consecutively?</span>
</span><span id="LineMatcher-1626"><a href="#LineMatcher-1626"><span class="linenos">1626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1627"><a href="#LineMatcher-1627"><span class="linenos">1627</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1628"><a href="#LineMatcher-1628"><span class="linenos">1628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="n">fnmatch</span><span class="p">,</span> <span class="s2">&quot;fnmatch&quot;</span><span class="p">,</span> <span class="n">consecutive</span><span class="o">=</span><span class="n">consecutive</span><span class="p">)</span>
</span><span id="LineMatcher-1629"><a href="#LineMatcher-1629"><span class="linenos">1629</span></a>
</span><span id="LineMatcher-1630"><a href="#LineMatcher-1630"><span class="linenos">1630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">re_match_lines</span><span class="p">(</span>
</span><span id="LineMatcher-1631"><a href="#LineMatcher-1631"><span class="linenos">1631</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher-1632"><a href="#LineMatcher-1632"><span class="linenos">1632</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1633"><a href="#LineMatcher-1633"><span class="linenos">1633</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output (using :func:`python:re.match`).</span>
</span><span id="LineMatcher-1634"><a href="#LineMatcher-1634"><span class="linenos">1634</span></a>
</span><span id="LineMatcher-1635"><a href="#LineMatcher-1635"><span class="linenos">1635</span></a><span class="sd">        The argument is a list of lines which have to match using ``re.match``.</span>
</span><span id="LineMatcher-1636"><a href="#LineMatcher-1636"><span class="linenos">1636</span></a><span class="sd">        If they do not match a pytest.fail() is called.</span>
</span><span id="LineMatcher-1637"><a href="#LineMatcher-1637"><span class="linenos">1637</span></a>
</span><span id="LineMatcher-1638"><a href="#LineMatcher-1638"><span class="linenos">1638</span></a><span class="sd">        The matches and non-matches are also shown as part of the error message.</span>
</span><span id="LineMatcher-1639"><a href="#LineMatcher-1639"><span class="linenos">1639</span></a>
</span><span id="LineMatcher-1640"><a href="#LineMatcher-1640"><span class="linenos">1640</span></a><span class="sd">        :param lines2: string patterns to match.</span>
</span><span id="LineMatcher-1641"><a href="#LineMatcher-1641"><span class="linenos">1641</span></a><span class="sd">        :param consecutive: match lines consecutively?</span>
</span><span id="LineMatcher-1642"><a href="#LineMatcher-1642"><span class="linenos">1642</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1643"><a href="#LineMatcher-1643"><span class="linenos">1643</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1644"><a href="#LineMatcher-1644"><span class="linenos">1644</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines</span><span class="p">(</span>
</span><span id="LineMatcher-1645"><a href="#LineMatcher-1645"><span class="linenos">1645</span></a>            <span class="n">lines2</span><span class="p">,</span>
</span><span id="LineMatcher-1646"><a href="#LineMatcher-1646"><span class="linenos">1646</span></a>            <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">name</span><span class="p">)),</span>
</span><span id="LineMatcher-1647"><a href="#LineMatcher-1647"><span class="linenos">1647</span></a>            <span class="s2">&quot;re.match&quot;</span><span class="p">,</span>
</span><span id="LineMatcher-1648"><a href="#LineMatcher-1648"><span class="linenos">1648</span></a>            <span class="n">consecutive</span><span class="o">=</span><span class="n">consecutive</span><span class="p">,</span>
</span><span id="LineMatcher-1649"><a href="#LineMatcher-1649"><span class="linenos">1649</span></a>        <span class="p">)</span>
</span><span id="LineMatcher-1650"><a href="#LineMatcher-1650"><span class="linenos">1650</span></a>
</span><span id="LineMatcher-1651"><a href="#LineMatcher-1651"><span class="linenos">1651</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_match_lines</span><span class="p">(</span>
</span><span id="LineMatcher-1652"><a href="#LineMatcher-1652"><span class="linenos">1652</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LineMatcher-1653"><a href="#LineMatcher-1653"><span class="linenos">1653</span></a>        <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="LineMatcher-1654"><a href="#LineMatcher-1654"><span class="linenos">1654</span></a>        <span class="n">match_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">],</span>
</span><span id="LineMatcher-1655"><a href="#LineMatcher-1655"><span class="linenos">1655</span></a>        <span class="n">match_nickname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="LineMatcher-1656"><a href="#LineMatcher-1656"><span class="linenos">1656</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="LineMatcher-1657"><a href="#LineMatcher-1657"><span class="linenos">1657</span></a>        <span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="LineMatcher-1658"><a href="#LineMatcher-1658"><span class="linenos">1658</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1659"><a href="#LineMatcher-1659"><span class="linenos">1659</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Underlying implementation of ``fnmatch_lines`` and ``re_match_lines``.</span>
</span><span id="LineMatcher-1660"><a href="#LineMatcher-1660"><span class="linenos">1660</span></a>
</span><span id="LineMatcher-1661"><a href="#LineMatcher-1661"><span class="linenos">1661</span></a><span class="sd">        :param Sequence[str] lines2:</span>
</span><span id="LineMatcher-1662"><a href="#LineMatcher-1662"><span class="linenos">1662</span></a><span class="sd">            List of string patterns to match. The actual format depends on</span>
</span><span id="LineMatcher-1663"><a href="#LineMatcher-1663"><span class="linenos">1663</span></a><span class="sd">            ``match_func``.</span>
</span><span id="LineMatcher-1664"><a href="#LineMatcher-1664"><span class="linenos">1664</span></a><span class="sd">        :param match_func:</span>
</span><span id="LineMatcher-1665"><a href="#LineMatcher-1665"><span class="linenos">1665</span></a><span class="sd">            A callable ``match_func(line, pattern)`` where line is the</span>
</span><span id="LineMatcher-1666"><a href="#LineMatcher-1666"><span class="linenos">1666</span></a><span class="sd">            captured line from stdout/stderr and pattern is the matching</span>
</span><span id="LineMatcher-1667"><a href="#LineMatcher-1667"><span class="linenos">1667</span></a><span class="sd">            pattern.</span>
</span><span id="LineMatcher-1668"><a href="#LineMatcher-1668"><span class="linenos">1668</span></a><span class="sd">        :param str match_nickname:</span>
</span><span id="LineMatcher-1669"><a href="#LineMatcher-1669"><span class="linenos">1669</span></a><span class="sd">            The nickname for the match function that will be logged to stdout</span>
</span><span id="LineMatcher-1670"><a href="#LineMatcher-1670"><span class="linenos">1670</span></a><span class="sd">            when a match occurs.</span>
</span><span id="LineMatcher-1671"><a href="#LineMatcher-1671"><span class="linenos">1671</span></a><span class="sd">        :param consecutive:</span>
</span><span id="LineMatcher-1672"><a href="#LineMatcher-1672"><span class="linenos">1672</span></a><span class="sd">            Match lines consecutively?</span>
</span><span id="LineMatcher-1673"><a href="#LineMatcher-1673"><span class="linenos">1673</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1674"><a href="#LineMatcher-1674"><span class="linenos">1674</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
</span><span id="LineMatcher-1675"><a href="#LineMatcher-1675"><span class="linenos">1675</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid type for lines2: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">lines2</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="LineMatcher-1676"><a href="#LineMatcher-1676"><span class="linenos">1676</span></a>        <span class="n">lines2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getlines</span><span class="p">(</span><span class="n">lines2</span><span class="p">)</span>
</span><span id="LineMatcher-1677"><a href="#LineMatcher-1677"><span class="linenos">1677</span></a>        <span class="n">lines1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[:]</span>
</span><span id="LineMatcher-1678"><a href="#LineMatcher-1678"><span class="linenos">1678</span></a>        <span class="n">extralines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LineMatcher-1679"><a href="#LineMatcher-1679"><span class="linenos">1679</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1680"><a href="#LineMatcher-1680"><span class="linenos">1680</span></a>        <span class="n">wnick</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">match_nickname</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="LineMatcher-1681"><a href="#LineMatcher-1681"><span class="linenos">1681</span></a>        <span class="n">started</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher-1682"><a href="#LineMatcher-1682"><span class="linenos">1682</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines2</span><span class="p">:</span>
</span><span id="LineMatcher-1683"><a href="#LineMatcher-1683"><span class="linenos">1683</span></a>            <span class="n">nomatchprinted</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher-1684"><a href="#LineMatcher-1684"><span class="linenos">1684</span></a>            <span class="k">while</span> <span class="n">lines1</span><span class="p">:</span>
</span><span id="LineMatcher-1685"><a href="#LineMatcher-1685"><span class="linenos">1685</span></a>                <span class="n">nextline</span> <span class="o">=</span> <span class="n">lines1</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="LineMatcher-1686"><a href="#LineMatcher-1686"><span class="linenos">1686</span></a>                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="n">nextline</span><span class="p">:</span>
</span><span id="LineMatcher-1687"><a href="#LineMatcher-1687"><span class="linenos">1687</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="s2">&quot;exact match:&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span><span id="LineMatcher-1688"><a href="#LineMatcher-1688"><span class="linenos">1688</span></a>                    <span class="n">started</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1689"><a href="#LineMatcher-1689"><span class="linenos">1689</span></a>                    <span class="k">break</span>
</span><span id="LineMatcher-1690"><a href="#LineMatcher-1690"><span class="linenos">1690</span></a>                <span class="k">elif</span> <span class="n">match_func</span><span class="p">(</span><span class="n">nextline</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
</span><span id="LineMatcher-1691"><a href="#LineMatcher-1691"><span class="linenos">1691</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">match_nickname</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span><span id="LineMatcher-1692"><a href="#LineMatcher-1692"><span class="linenos">1692</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span>
</span><span id="LineMatcher-1693"><a href="#LineMatcher-1693"><span class="linenos">1693</span></a>                        <span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;with:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">nextline</span><span class="p">)</span>
</span><span id="LineMatcher-1694"><a href="#LineMatcher-1694"><span class="linenos">1694</span></a>                    <span class="p">)</span>
</span><span id="LineMatcher-1695"><a href="#LineMatcher-1695"><span class="linenos">1695</span></a>                    <span class="n">started</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1696"><a href="#LineMatcher-1696"><span class="linenos">1696</span></a>                    <span class="k">break</span>
</span><span id="LineMatcher-1697"><a href="#LineMatcher-1697"><span class="linenos">1697</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LineMatcher-1698"><a href="#LineMatcher-1698"><span class="linenos">1698</span></a>                    <span class="k">if</span> <span class="n">consecutive</span> <span class="ow">and</span> <span class="n">started</span><span class="p">:</span>
</span><span id="LineMatcher-1699"><a href="#LineMatcher-1699"><span class="linenos">1699</span></a>                        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;no consecutive match: </span><span class="si">{</span><span class="n">line</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LineMatcher-1700"><a href="#LineMatcher-1700"><span class="linenos">1700</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1701"><a href="#LineMatcher-1701"><span class="linenos">1701</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span>
</span><span id="LineMatcher-1702"><a href="#LineMatcher-1702"><span class="linenos">1702</span></a>                            <span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;with:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">nextline</span><span class="p">)</span>
</span><span id="LineMatcher-1703"><a href="#LineMatcher-1703"><span class="linenos">1703</span></a>                        <span class="p">)</span>
</span><span id="LineMatcher-1704"><a href="#LineMatcher-1704"><span class="linenos">1704</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_fail</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1705"><a href="#LineMatcher-1705"><span class="linenos">1705</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">nomatchprinted</span><span class="p">:</span>
</span><span id="LineMatcher-1706"><a href="#LineMatcher-1706"><span class="linenos">1706</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span>
</span><span id="LineMatcher-1707"><a href="#LineMatcher-1707"><span class="linenos">1707</span></a>                            <span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;nomatch:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="LineMatcher-1708"><a href="#LineMatcher-1708"><span class="linenos">1708</span></a>                        <span class="p">)</span>
</span><span id="LineMatcher-1709"><a href="#LineMatcher-1709"><span class="linenos">1709</span></a>                        <span class="n">nomatchprinted</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1710"><a href="#LineMatcher-1710"><span class="linenos">1710</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;and:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">nextline</span><span class="p">))</span>
</span><span id="LineMatcher-1711"><a href="#LineMatcher-1711"><span class="linenos">1711</span></a>                <span class="n">extralines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nextline</span><span class="p">)</span>
</span><span id="LineMatcher-1712"><a href="#LineMatcher-1712"><span class="linenos">1712</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LineMatcher-1713"><a href="#LineMatcher-1713"><span class="linenos">1713</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;remains unmatched: </span><span class="si">{</span><span class="n">line</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LineMatcher-1714"><a href="#LineMatcher-1714"><span class="linenos">1714</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1715"><a href="#LineMatcher-1715"><span class="linenos">1715</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_fail</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1716"><a href="#LineMatcher-1716"><span class="linenos">1716</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LineMatcher-1717"><a href="#LineMatcher-1717"><span class="linenos">1717</span></a>
</span><span id="LineMatcher-1718"><a href="#LineMatcher-1718"><span class="linenos">1718</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">no_fnmatch_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1719"><a href="#LineMatcher-1719"><span class="linenos">1719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure captured lines do not match the given pattern, using ``fnmatch.fnmatch``.</span>
</span><span id="LineMatcher-1720"><a href="#LineMatcher-1720"><span class="linenos">1720</span></a>
</span><span id="LineMatcher-1721"><a href="#LineMatcher-1721"><span class="linenos">1721</span></a><span class="sd">        :param str pat: The pattern to match lines.</span>
</span><span id="LineMatcher-1722"><a href="#LineMatcher-1722"><span class="linenos">1722</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1723"><a href="#LineMatcher-1723"><span class="linenos">1723</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1724"><a href="#LineMatcher-1724"><span class="linenos">1724</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_no_match_line</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">fnmatch</span><span class="p">,</span> <span class="s2">&quot;fnmatch&quot;</span><span class="p">)</span>
</span><span id="LineMatcher-1725"><a href="#LineMatcher-1725"><span class="linenos">1725</span></a>
</span><span id="LineMatcher-1726"><a href="#LineMatcher-1726"><span class="linenos">1726</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">no_re_match_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1727"><a href="#LineMatcher-1727"><span class="linenos">1727</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure captured lines do not match the given pattern, using ``re.match``.</span>
</span><span id="LineMatcher-1728"><a href="#LineMatcher-1728"><span class="linenos">1728</span></a>
</span><span id="LineMatcher-1729"><a href="#LineMatcher-1729"><span class="linenos">1729</span></a><span class="sd">        :param str pat: The regular expression to match lines.</span>
</span><span id="LineMatcher-1730"><a href="#LineMatcher-1730"><span class="linenos">1730</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1731"><a href="#LineMatcher-1731"><span class="linenos">1731</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1732"><a href="#LineMatcher-1732"><span class="linenos">1732</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_no_match_line</span><span class="p">(</span>
</span><span id="LineMatcher-1733"><a href="#LineMatcher-1733"><span class="linenos">1733</span></a>            <span class="n">pat</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">name</span><span class="p">)),</span> <span class="s2">&quot;re.match&quot;</span>
</span><span id="LineMatcher-1734"><a href="#LineMatcher-1734"><span class="linenos">1734</span></a>        <span class="p">)</span>
</span><span id="LineMatcher-1735"><a href="#LineMatcher-1735"><span class="linenos">1735</span></a>
</span><span id="LineMatcher-1736"><a href="#LineMatcher-1736"><span class="linenos">1736</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_no_match_line</span><span class="p">(</span>
</span><span id="LineMatcher-1737"><a href="#LineMatcher-1737"><span class="linenos">1737</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">match_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">match_nickname</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="LineMatcher-1738"><a href="#LineMatcher-1738"><span class="linenos">1738</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1739"><a href="#LineMatcher-1739"><span class="linenos">1739</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure captured lines does not have a the given pattern, using ``fnmatch.fnmatch``.</span>
</span><span id="LineMatcher-1740"><a href="#LineMatcher-1740"><span class="linenos">1740</span></a>
</span><span id="LineMatcher-1741"><a href="#LineMatcher-1741"><span class="linenos">1741</span></a><span class="sd">        :param str pat: The pattern to match lines.</span>
</span><span id="LineMatcher-1742"><a href="#LineMatcher-1742"><span class="linenos">1742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher-1743"><a href="#LineMatcher-1743"><span class="linenos">1743</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1744"><a href="#LineMatcher-1744"><span class="linenos">1744</span></a>        <span class="n">nomatch_printed</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher-1745"><a href="#LineMatcher-1745"><span class="linenos">1745</span></a>        <span class="n">wnick</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">match_nickname</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="LineMatcher-1746"><a href="#LineMatcher-1746"><span class="linenos">1746</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
</span><span id="LineMatcher-1747"><a href="#LineMatcher-1747"><span class="linenos">1747</span></a>            <span class="k">if</span> <span class="n">match_func</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">pat</span><span class="p">):</span>
</span><span id="LineMatcher-1748"><a href="#LineMatcher-1748"><span class="linenos">1748</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">match_nickname</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">pat</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LineMatcher-1749"><a href="#LineMatcher-1749"><span class="linenos">1749</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1750"><a href="#LineMatcher-1750"><span class="linenos">1750</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;with:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span><span id="LineMatcher-1751"><a href="#LineMatcher-1751"><span class="linenos">1751</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_fail</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="LineMatcher-1752"><a href="#LineMatcher-1752"><span class="linenos">1752</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LineMatcher-1753"><a href="#LineMatcher-1753"><span class="linenos">1753</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">nomatch_printed</span><span class="p">:</span>
</span><span id="LineMatcher-1754"><a href="#LineMatcher-1754"><span class="linenos">1754</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;nomatch:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">pat</span><span class="p">))</span>
</span><span id="LineMatcher-1755"><a href="#LineMatcher-1755"><span class="linenos">1755</span></a>                    <span class="n">nomatch_printed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1756"><a href="#LineMatcher-1756"><span class="linenos">1756</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="s2">&quot;{:&gt;</span><span class="si">{width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;and:&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">wnick</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span><span id="LineMatcher-1757"><a href="#LineMatcher-1757"><span class="linenos">1757</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LineMatcher-1758"><a href="#LineMatcher-1758"><span class="linenos">1758</span></a>
</span><span id="LineMatcher-1759"><a href="#LineMatcher-1759"><span class="linenos">1759</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher-1760"><a href="#LineMatcher-1760"><span class="linenos">1760</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher-1761"><a href="#LineMatcher-1761"><span class="linenos">1761</span></a>        <span class="n">log_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_text</span>
</span><span id="LineMatcher-1762"><a href="#LineMatcher-1762"><span class="linenos">1762</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LineMatcher-1763"><a href="#LineMatcher-1763"><span class="linenos">1763</span></a>        <span class="n">fail</span><span class="p">(</span><span class="n">log_text</span><span class="p">)</span>
</span><span id="LineMatcher-1764"><a href="#LineMatcher-1764"><span class="linenos">1764</span></a>
</span><span id="LineMatcher-1765"><a href="#LineMatcher-1765"><span class="linenos">1765</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LineMatcher-1766"><a href="#LineMatcher-1766"><span class="linenos">1766</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the entire original text.&quot;&quot;&quot;</span>
</span><span id="LineMatcher-1767"><a href="#LineMatcher-1767"><span class="linenos">1767</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Flexible matching of text.</p>

<p>This is a convenience class to test large texts like the output of
commands.</p>

<p>The constructor takes a list of lines without their trailing newlines, i.e.
<code>text.splitlines()</code>.</p>
</div>


                            <div id="LineMatcher.__init__" class="classattr">
                                        <input id="LineMatcher.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LineMatcher</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">lines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">LineMatcher</span><span class="o">.</span><span class="n">str</span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="LineMatcher.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.__init__-1554"><a href="#LineMatcher.__init__-1554"><span class="linenos">1554</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.__init__-1555"><a href="#LineMatcher.__init__-1555"><span class="linenos">1555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span>
</span><span id="LineMatcher.__init__-1556"><a href="#LineMatcher.__init__-1556"><span class="linenos">1556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_output</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


    

                            </div>
                            <div id="LineMatcher.lines" class="classattr">
                                <div class="attr variable">
            <span class="name">lines</span>

        
    </div>
    <a class="headerlink" href="#LineMatcher.lines"></a>
    
    

                            </div>
                            <div id="LineMatcher.fnmatch_lines_random" class="classattr">
                                        <input id="LineMatcher.fnmatch_lines_random-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fnmatch_lines_random</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.fnmatch_lines_random-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.fnmatch_lines_random"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.fnmatch_lines_random-1573"><a href="#LineMatcher.fnmatch_lines_random-1573"><span class="linenos">1573</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fnmatch_lines_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.fnmatch_lines_random-1574"><a href="#LineMatcher.fnmatch_lines_random-1574"><span class="linenos">1574</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output in any order (using :func:`python:fnmatch.fnmatch`).&quot;&quot;&quot;</span>
</span><span id="LineMatcher.fnmatch_lines_random-1575"><a href="#LineMatcher.fnmatch_lines_random-1575"><span class="linenos">1575</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher.fnmatch_lines_random-1576"><a href="#LineMatcher.fnmatch_lines_random-1576"><span class="linenos">1576</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines_random</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="n">fnmatch</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Check lines exist in the output in any order (using <code>python:fnmatch.fnmatch()</code>).</p>
</div>


                            </div>
                            <div id="LineMatcher.re_match_lines_random" class="classattr">
                                        <input id="LineMatcher.re_match_lines_random-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">re_match_lines_random</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.re_match_lines_random-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.re_match_lines_random"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.re_match_lines_random-1578"><a href="#LineMatcher.re_match_lines_random-1578"><span class="linenos">1578</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">re_match_lines_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.re_match_lines_random-1579"><a href="#LineMatcher.re_match_lines_random-1579"><span class="linenos">1579</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output in any order (using :func:`python:re.match`).&quot;&quot;&quot;</span>
</span><span id="LineMatcher.re_match_lines_random-1580"><a href="#LineMatcher.re_match_lines_random-1580"><span class="linenos">1580</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher.re_match_lines_random-1581"><a href="#LineMatcher.re_match_lines_random-1581"><span class="linenos">1581</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines_random</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">name</span><span class="p">)))</span>
</span></pre></div>


            <div class="docstring"><p>Check lines exist in the output in any order (using <code>python:re.match()</code>).</p>
</div>


                            </div>
                            <div id="LineMatcher.get_lines_after" class="classattr">
                                        <input id="LineMatcher.get_lines_after-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_lines_after</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fnline</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n"><a href="#LineMatcher.str">LineMatcher.str</a></span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.get_lines_after-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.get_lines_after"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.get_lines_after-1598"><a href="#LineMatcher.get_lines_after-1598"><span class="linenos">1598</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_lines_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fnline</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="LineMatcher.get_lines_after-1599"><a href="#LineMatcher.get_lines_after-1599"><span class="linenos">1599</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return all lines following the given line in the text.</span>
</span><span id="LineMatcher.get_lines_after-1600"><a href="#LineMatcher.get_lines_after-1600"><span class="linenos">1600</span></a>
</span><span id="LineMatcher.get_lines_after-1601"><a href="#LineMatcher.get_lines_after-1601"><span class="linenos">1601</span></a><span class="sd">        The given line can contain glob wildcards.</span>
</span><span id="LineMatcher.get_lines_after-1602"><a href="#LineMatcher.get_lines_after-1602"><span class="linenos">1602</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher.get_lines_after-1603"><a href="#LineMatcher.get_lines_after-1603"><span class="linenos">1603</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
</span><span id="LineMatcher.get_lines_after-1604"><a href="#LineMatcher.get_lines_after-1604"><span class="linenos">1604</span></a>            <span class="k">if</span> <span class="n">fnline</span> <span class="o">==</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">fnmatch</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">fnline</span><span class="p">):</span>
</span><span id="LineMatcher.get_lines_after-1605"><a href="#LineMatcher.get_lines_after-1605"><span class="linenos">1605</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
</span><span id="LineMatcher.get_lines_after-1606"><a href="#LineMatcher.get_lines_after-1606"><span class="linenos">1606</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;line </span><span class="si">{</span><span class="n">fnline</span><span class="si">!r}</span><span class="s2"> not found in output&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return all lines following the given line in the text.</p>

<p>The given line can contain glob wildcards.</p>
</div>


                            </div>
                            <div id="LineMatcher.fnmatch_lines" class="classattr">
                                        <input id="LineMatcher.fnmatch_lines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fnmatch_lines</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.fnmatch_lines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.fnmatch_lines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.fnmatch_lines-1615"><a href="#LineMatcher.fnmatch_lines-1615"><span class="linenos">1615</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fnmatch_lines</span><span class="p">(</span>
</span><span id="LineMatcher.fnmatch_lines-1616"><a href="#LineMatcher.fnmatch_lines-1616"><span class="linenos">1616</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher.fnmatch_lines-1617"><a href="#LineMatcher.fnmatch_lines-1617"><span class="linenos">1617</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.fnmatch_lines-1618"><a href="#LineMatcher.fnmatch_lines-1618"><span class="linenos">1618</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output (using :func:`python:fnmatch.fnmatch`).</span>
</span><span id="LineMatcher.fnmatch_lines-1619"><a href="#LineMatcher.fnmatch_lines-1619"><span class="linenos">1619</span></a>
</span><span id="LineMatcher.fnmatch_lines-1620"><a href="#LineMatcher.fnmatch_lines-1620"><span class="linenos">1620</span></a><span class="sd">        The argument is a list of lines which have to match and can use glob</span>
</span><span id="LineMatcher.fnmatch_lines-1621"><a href="#LineMatcher.fnmatch_lines-1621"><span class="linenos">1621</span></a><span class="sd">        wildcards.  If they do not match a pytest.fail() is called.  The</span>
</span><span id="LineMatcher.fnmatch_lines-1622"><a href="#LineMatcher.fnmatch_lines-1622"><span class="linenos">1622</span></a><span class="sd">        matches and non-matches are also shown as part of the error message.</span>
</span><span id="LineMatcher.fnmatch_lines-1623"><a href="#LineMatcher.fnmatch_lines-1623"><span class="linenos">1623</span></a>
</span><span id="LineMatcher.fnmatch_lines-1624"><a href="#LineMatcher.fnmatch_lines-1624"><span class="linenos">1624</span></a><span class="sd">        :param lines2: String patterns to match.</span>
</span><span id="LineMatcher.fnmatch_lines-1625"><a href="#LineMatcher.fnmatch_lines-1625"><span class="linenos">1625</span></a><span class="sd">        :param consecutive: Match lines consecutively?</span>
</span><span id="LineMatcher.fnmatch_lines-1626"><a href="#LineMatcher.fnmatch_lines-1626"><span class="linenos">1626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher.fnmatch_lines-1627"><a href="#LineMatcher.fnmatch_lines-1627"><span class="linenos">1627</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher.fnmatch_lines-1628"><a href="#LineMatcher.fnmatch_lines-1628"><span class="linenos">1628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span> <span class="n">fnmatch</span><span class="p">,</span> <span class="s2">&quot;fnmatch&quot;</span><span class="p">,</span> <span class="n">consecutive</span><span class="o">=</span><span class="n">consecutive</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Check lines exist in the output (using <code>python:fnmatch.fnmatch()</code>).</p>

<p>The argument is a list of lines which have to match and can use glob
wildcards.  If they do not match a <a href="#fail">pytest.fail()</a> is called.  The
matches and non-matches are also shown as part of the error message.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>lines2</strong>:  String patterns to match.</li>
<li><strong>consecutive</strong>:  Match lines consecutively?</li>
</ul>
</div>


                            </div>
                            <div id="LineMatcher.re_match_lines" class="classattr">
                                        <input id="LineMatcher.re_match_lines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">re_match_lines</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.re_match_lines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.re_match_lines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.re_match_lines-1630"><a href="#LineMatcher.re_match_lines-1630"><span class="linenos">1630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">re_match_lines</span><span class="p">(</span>
</span><span id="LineMatcher.re_match_lines-1631"><a href="#LineMatcher.re_match_lines-1631"><span class="linenos">1631</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lines2</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">consecutive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LineMatcher.re_match_lines-1632"><a href="#LineMatcher.re_match_lines-1632"><span class="linenos">1632</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.re_match_lines-1633"><a href="#LineMatcher.re_match_lines-1633"><span class="linenos">1633</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check lines exist in the output (using :func:`python:re.match`).</span>
</span><span id="LineMatcher.re_match_lines-1634"><a href="#LineMatcher.re_match_lines-1634"><span class="linenos">1634</span></a>
</span><span id="LineMatcher.re_match_lines-1635"><a href="#LineMatcher.re_match_lines-1635"><span class="linenos">1635</span></a><span class="sd">        The argument is a list of lines which have to match using ``re.match``.</span>
</span><span id="LineMatcher.re_match_lines-1636"><a href="#LineMatcher.re_match_lines-1636"><span class="linenos">1636</span></a><span class="sd">        If they do not match a pytest.fail() is called.</span>
</span><span id="LineMatcher.re_match_lines-1637"><a href="#LineMatcher.re_match_lines-1637"><span class="linenos">1637</span></a>
</span><span id="LineMatcher.re_match_lines-1638"><a href="#LineMatcher.re_match_lines-1638"><span class="linenos">1638</span></a><span class="sd">        The matches and non-matches are also shown as part of the error message.</span>
</span><span id="LineMatcher.re_match_lines-1639"><a href="#LineMatcher.re_match_lines-1639"><span class="linenos">1639</span></a>
</span><span id="LineMatcher.re_match_lines-1640"><a href="#LineMatcher.re_match_lines-1640"><span class="linenos">1640</span></a><span class="sd">        :param lines2: string patterns to match.</span>
</span><span id="LineMatcher.re_match_lines-1641"><a href="#LineMatcher.re_match_lines-1641"><span class="linenos">1641</span></a><span class="sd">        :param consecutive: match lines consecutively?</span>
</span><span id="LineMatcher.re_match_lines-1642"><a href="#LineMatcher.re_match_lines-1642"><span class="linenos">1642</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher.re_match_lines-1643"><a href="#LineMatcher.re_match_lines-1643"><span class="linenos">1643</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher.re_match_lines-1644"><a href="#LineMatcher.re_match_lines-1644"><span class="linenos">1644</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_match_lines</span><span class="p">(</span>
</span><span id="LineMatcher.re_match_lines-1645"><a href="#LineMatcher.re_match_lines-1645"><span class="linenos">1645</span></a>            <span class="n">lines2</span><span class="p">,</span>
</span><span id="LineMatcher.re_match_lines-1646"><a href="#LineMatcher.re_match_lines-1646"><span class="linenos">1646</span></a>            <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">name</span><span class="p">)),</span>
</span><span id="LineMatcher.re_match_lines-1647"><a href="#LineMatcher.re_match_lines-1647"><span class="linenos">1647</span></a>            <span class="s2">&quot;re.match&quot;</span><span class="p">,</span>
</span><span id="LineMatcher.re_match_lines-1648"><a href="#LineMatcher.re_match_lines-1648"><span class="linenos">1648</span></a>            <span class="n">consecutive</span><span class="o">=</span><span class="n">consecutive</span><span class="p">,</span>
</span><span id="LineMatcher.re_match_lines-1649"><a href="#LineMatcher.re_match_lines-1649"><span class="linenos">1649</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Check lines exist in the output (using <code>python:re.match()</code>).</p>

<p>The argument is a list of lines which have to match using <code>re.match</code>.
If they do not match a <a href="#fail">pytest.fail()</a> is called.</p>

<p>The matches and non-matches are also shown as part of the error message.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>lines2</strong>:  string patterns to match.</li>
<li><strong>consecutive</strong>:  match lines consecutively?</li>
</ul>
</div>


                            </div>
                            <div id="LineMatcher.no_fnmatch_line" class="classattr">
                                        <input id="LineMatcher.no_fnmatch_line-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">no_fnmatch_line</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pat</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n"><a href="#LineMatcher.str">LineMatcher.str</a></span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.no_fnmatch_line-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.no_fnmatch_line"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.no_fnmatch_line-1718"><a href="#LineMatcher.no_fnmatch_line-1718"><span class="linenos">1718</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">no_fnmatch_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.no_fnmatch_line-1719"><a href="#LineMatcher.no_fnmatch_line-1719"><span class="linenos">1719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure captured lines do not match the given pattern, using ``fnmatch.fnmatch``.</span>
</span><span id="LineMatcher.no_fnmatch_line-1720"><a href="#LineMatcher.no_fnmatch_line-1720"><span class="linenos">1720</span></a>
</span><span id="LineMatcher.no_fnmatch_line-1721"><a href="#LineMatcher.no_fnmatch_line-1721"><span class="linenos">1721</span></a><span class="sd">        :param str pat: The pattern to match lines.</span>
</span><span id="LineMatcher.no_fnmatch_line-1722"><a href="#LineMatcher.no_fnmatch_line-1722"><span class="linenos">1722</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher.no_fnmatch_line-1723"><a href="#LineMatcher.no_fnmatch_line-1723"><span class="linenos">1723</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher.no_fnmatch_line-1724"><a href="#LineMatcher.no_fnmatch_line-1724"><span class="linenos">1724</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_no_match_line</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">fnmatch</span><span class="p">,</span> <span class="s2">&quot;fnmatch&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Ensure captured lines do not match the given pattern, using <code>fnmatch.fnmatch</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str pat</strong>:  The pattern to match lines.</li>
</ul>
</div>


                            </div>
                            <div id="LineMatcher.no_re_match_line" class="classattr">
                                        <input id="LineMatcher.no_re_match_line-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">no_re_match_line</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pat</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n"><a href="#LineMatcher.str">LineMatcher.str</a></span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.no_re_match_line-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.no_re_match_line"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.no_re_match_line-1726"><a href="#LineMatcher.no_re_match_line-1726"><span class="linenos">1726</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">no_re_match_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LineMatcher.no_re_match_line-1727"><a href="#LineMatcher.no_re_match_line-1727"><span class="linenos">1727</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure captured lines do not match the given pattern, using ``re.match``.</span>
</span><span id="LineMatcher.no_re_match_line-1728"><a href="#LineMatcher.no_re_match_line-1728"><span class="linenos">1728</span></a>
</span><span id="LineMatcher.no_re_match_line-1729"><a href="#LineMatcher.no_re_match_line-1729"><span class="linenos">1729</span></a><span class="sd">        :param str pat: The regular expression to match lines.</span>
</span><span id="LineMatcher.no_re_match_line-1730"><a href="#LineMatcher.no_re_match_line-1730"><span class="linenos">1730</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LineMatcher.no_re_match_line-1731"><a href="#LineMatcher.no_re_match_line-1731"><span class="linenos">1731</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LineMatcher.no_re_match_line-1732"><a href="#LineMatcher.no_re_match_line-1732"><span class="linenos">1732</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_no_match_line</span><span class="p">(</span>
</span><span id="LineMatcher.no_re_match_line-1733"><a href="#LineMatcher.no_re_match_line-1733"><span class="linenos">1733</span></a>            <span class="n">pat</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">pat</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">name</span><span class="p">)),</span> <span class="s2">&quot;re.match&quot;</span>
</span><span id="LineMatcher.no_re_match_line-1734"><a href="#LineMatcher.no_re_match_line-1734"><span class="linenos">1734</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Ensure captured lines do not match the given pattern, using <code>re.match</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>str pat</strong>:  The regular expression to match lines.</li>
</ul>
</div>


                            </div>
                            <div id="LineMatcher.str" class="classattr">
                                        <input id="LineMatcher.str-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">str</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="o">&lt;</span><span class="n">function</span> <span class="n"><a href="#LineMatcher.str">LineMatcher.str</a></span> <span class="n">at</span> <span class="mh">0x104e0a8e0</span><span class="o">&gt;</span>:</span></span>

                <label class="view-source-button" for="LineMatcher.str-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LineMatcher.str"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LineMatcher.str-1765"><a href="#LineMatcher.str-1765"><span class="linenos">1765</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LineMatcher.str-1766"><a href="#LineMatcher.str-1766"><span class="linenos">1766</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the entire original text.&quot;&quot;&quot;</span>
</span><span id="LineMatcher.str-1767"><a href="#LineMatcher.str-1767"><span class="linenos">1767</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return the entire original text.</p>
</div>


                            </div>
                </section>
                <section id="LogCaptureFixture">
                            <input id="LogCaptureFixture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">LogCaptureFixture</span>:

                <label class="view-source-button" for="LogCaptureFixture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture-406"><a href="#LogCaptureFixture-406"><span class="linenos">406</span></a><span class="nd">@final</span>
</span><span id="LogCaptureFixture-407"><a href="#LogCaptureFixture-407"><span class="linenos">407</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LogCaptureFixture</span><span class="p">:</span>
</span><span id="LogCaptureFixture-408"><a href="#LogCaptureFixture-408"><span class="linenos">408</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides access and control of log capturing.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-409"><a href="#LogCaptureFixture-409"><span class="linenos">409</span></a>
</span><span id="LogCaptureFixture-410"><a href="#LogCaptureFixture-410"><span class="linenos">410</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-411"><a href="#LogCaptureFixture-411"><span class="linenos">411</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="LogCaptureFixture-412"><a href="#LogCaptureFixture-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="n">item</span>
</span><span id="LogCaptureFixture-413"><a href="#LogCaptureFixture-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="LogCaptureFixture-414"><a href="#LogCaptureFixture-414"><span class="linenos">414</span></a>        <span class="c1"># Dict of log name -&gt; log level.</span>
</span><span id="LogCaptureFixture-415"><a href="#LogCaptureFixture-415"><span class="linenos">415</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_logger_levels</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="LogCaptureFixture-416"><a href="#LogCaptureFixture-416"><span class="linenos">416</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="LogCaptureFixture-417"><a href="#LogCaptureFixture-417"><span class="linenos">417</span></a>
</span><span id="LogCaptureFixture-418"><a href="#LogCaptureFixture-418"><span class="linenos">418</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-419"><a href="#LogCaptureFixture-419"><span class="linenos">419</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Finalize the fixture.</span>
</span><span id="LogCaptureFixture-420"><a href="#LogCaptureFixture-420"><span class="linenos">420</span></a>
</span><span id="LogCaptureFixture-421"><a href="#LogCaptureFixture-421"><span class="linenos">421</span></a><span class="sd">        This restores the log levels and the disabled logging levels changed by :meth:`set_level`.</span>
</span><span id="LogCaptureFixture-422"><a href="#LogCaptureFixture-422"><span class="linenos">422</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-423"><a href="#LogCaptureFixture-423"><span class="linenos">423</span></a>        <span class="c1"># Restore log levels.</span>
</span><span id="LogCaptureFixture-424"><a href="#LogCaptureFixture-424"><span class="linenos">424</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-425"><a href="#LogCaptureFixture-425"><span class="linenos">425</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-426"><a href="#LogCaptureFixture-426"><span class="linenos">426</span></a>        <span class="k">for</span> <span class="n">logger_name</span><span class="p">,</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_logger_levels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="LogCaptureFixture-427"><a href="#LogCaptureFixture-427"><span class="linenos">427</span></a>            <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger_name</span><span class="p">)</span>
</span><span id="LogCaptureFixture-428"><a href="#LogCaptureFixture-428"><span class="linenos">428</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-429"><a href="#LogCaptureFixture-429"><span class="linenos">429</span></a>        <span class="c1"># Disable logging at the original disabled logging level.</span>
</span><span id="LogCaptureFixture-430"><a href="#LogCaptureFixture-430"><span class="linenos">430</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-431"><a href="#LogCaptureFixture-431"><span class="linenos">431</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-432"><a href="#LogCaptureFixture-432"><span class="linenos">432</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="LogCaptureFixture-433"><a href="#LogCaptureFixture-433"><span class="linenos">433</span></a>
</span><span id="LogCaptureFixture-434"><a href="#LogCaptureFixture-434"><span class="linenos">434</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture-435"><a href="#LogCaptureFixture-435"><span class="linenos">435</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LogCaptureHandler</span><span class="p">:</span>
</span><span id="LogCaptureFixture-436"><a href="#LogCaptureFixture-436"><span class="linenos">436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the logging handler used by the fixture.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-437"><a href="#LogCaptureFixture-437"><span class="linenos">437</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">caplog_handler_key</span><span class="p">]</span>
</span><span id="LogCaptureFixture-438"><a href="#LogCaptureFixture-438"><span class="linenos">438</span></a>
</span><span id="LogCaptureFixture-439"><a href="#LogCaptureFixture-439"><span class="linenos">439</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_records</span><span class="p">(</span>
</span><span id="LogCaptureFixture-440"><a href="#LogCaptureFixture-440"><span class="linenos">440</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">]</span>
</span><span id="LogCaptureFixture-441"><a href="#LogCaptureFixture-441"><span class="linenos">441</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">]:</span>
</span><span id="LogCaptureFixture-442"><a href="#LogCaptureFixture-442"><span class="linenos">442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the logging records for one of the possible test phases.</span>
</span><span id="LogCaptureFixture-443"><a href="#LogCaptureFixture-443"><span class="linenos">443</span></a>
</span><span id="LogCaptureFixture-444"><a href="#LogCaptureFixture-444"><span class="linenos">444</span></a><span class="sd">        :param when:</span>
</span><span id="LogCaptureFixture-445"><a href="#LogCaptureFixture-445"><span class="linenos">445</span></a><span class="sd">            Which test phase to obtain the records from.</span>
</span><span id="LogCaptureFixture-446"><a href="#LogCaptureFixture-446"><span class="linenos">446</span></a><span class="sd">            Valid values are: &quot;setup&quot;, &quot;call&quot; and &quot;teardown&quot;.</span>
</span><span id="LogCaptureFixture-447"><a href="#LogCaptureFixture-447"><span class="linenos">447</span></a>
</span><span id="LogCaptureFixture-448"><a href="#LogCaptureFixture-448"><span class="linenos">448</span></a><span class="sd">        :returns: The list of captured records at the given stage.</span>
</span><span id="LogCaptureFixture-449"><a href="#LogCaptureFixture-449"><span class="linenos">449</span></a>
</span><span id="LogCaptureFixture-450"><a href="#LogCaptureFixture-450"><span class="linenos">450</span></a><span class="sd">        .. versionadded:: 3.4</span>
</span><span id="LogCaptureFixture-451"><a href="#LogCaptureFixture-451"><span class="linenos">451</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-452"><a href="#LogCaptureFixture-452"><span class="linenos">452</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">caplog_records_key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">when</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="LogCaptureFixture-453"><a href="#LogCaptureFixture-453"><span class="linenos">453</span></a>
</span><span id="LogCaptureFixture-454"><a href="#LogCaptureFixture-454"><span class="linenos">454</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture-455"><a href="#LogCaptureFixture-455"><span class="linenos">455</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LogCaptureFixture-456"><a href="#LogCaptureFixture-456"><span class="linenos">456</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The formatted log text.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-457"><a href="#LogCaptureFixture-457"><span class="linenos">457</span></a>        <span class="k">return</span> <span class="n">_remove_ansi_escape_sequences</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</span><span id="LogCaptureFixture-458"><a href="#LogCaptureFixture-458"><span class="linenos">458</span></a>
</span><span id="LogCaptureFixture-459"><a href="#LogCaptureFixture-459"><span class="linenos">459</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture-460"><a href="#LogCaptureFixture-460"><span class="linenos">460</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">records</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">]:</span>
</span><span id="LogCaptureFixture-461"><a href="#LogCaptureFixture-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of log records.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-462"><a href="#LogCaptureFixture-462"><span class="linenos">462</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">records</span>
</span><span id="LogCaptureFixture-463"><a href="#LogCaptureFixture-463"><span class="linenos">463</span></a>
</span><span id="LogCaptureFixture-464"><a href="#LogCaptureFixture-464"><span class="linenos">464</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture-465"><a href="#LogCaptureFixture-465"><span class="linenos">465</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">record_tuples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="LogCaptureFixture-466"><a href="#LogCaptureFixture-466"><span class="linenos">466</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of a stripped down version of log records intended</span>
</span><span id="LogCaptureFixture-467"><a href="#LogCaptureFixture-467"><span class="linenos">467</span></a><span class="sd">        for use in assertion comparison.</span>
</span><span id="LogCaptureFixture-468"><a href="#LogCaptureFixture-468"><span class="linenos">468</span></a>
</span><span id="LogCaptureFixture-469"><a href="#LogCaptureFixture-469"><span class="linenos">469</span></a><span class="sd">        The format of the tuple is:</span>
</span><span id="LogCaptureFixture-470"><a href="#LogCaptureFixture-470"><span class="linenos">470</span></a>
</span><span id="LogCaptureFixture-471"><a href="#LogCaptureFixture-471"><span class="linenos">471</span></a><span class="sd">            (logger_name, log_level, message)</span>
</span><span id="LogCaptureFixture-472"><a href="#LogCaptureFixture-472"><span class="linenos">472</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-473"><a href="#LogCaptureFixture-473"><span class="linenos">473</span></a>        <span class="k">return</span> <span class="p">[(</span><span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">levelno</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">getMessage</span><span class="p">())</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
</span><span id="LogCaptureFixture-474"><a href="#LogCaptureFixture-474"><span class="linenos">474</span></a>
</span><span id="LogCaptureFixture-475"><a href="#LogCaptureFixture-475"><span class="linenos">475</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture-476"><a href="#LogCaptureFixture-476"><span class="linenos">476</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="LogCaptureFixture-477"><a href="#LogCaptureFixture-477"><span class="linenos">477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of format-interpolated log messages.</span>
</span><span id="LogCaptureFixture-478"><a href="#LogCaptureFixture-478"><span class="linenos">478</span></a>
</span><span id="LogCaptureFixture-479"><a href="#LogCaptureFixture-479"><span class="linenos">479</span></a><span class="sd">        Unlike &#39;records&#39;, which contains the format string and parameters for</span>
</span><span id="LogCaptureFixture-480"><a href="#LogCaptureFixture-480"><span class="linenos">480</span></a><span class="sd">        interpolation, log messages in this list are all interpolated.</span>
</span><span id="LogCaptureFixture-481"><a href="#LogCaptureFixture-481"><span class="linenos">481</span></a>
</span><span id="LogCaptureFixture-482"><a href="#LogCaptureFixture-482"><span class="linenos">482</span></a><span class="sd">        Unlike &#39;text&#39;, which contains the output from the handler, log</span>
</span><span id="LogCaptureFixture-483"><a href="#LogCaptureFixture-483"><span class="linenos">483</span></a><span class="sd">        messages in this list are unadorned with levels, timestamps, etc,</span>
</span><span id="LogCaptureFixture-484"><a href="#LogCaptureFixture-484"><span class="linenos">484</span></a><span class="sd">        making exact comparisons more reliable.</span>
</span><span id="LogCaptureFixture-485"><a href="#LogCaptureFixture-485"><span class="linenos">485</span></a>
</span><span id="LogCaptureFixture-486"><a href="#LogCaptureFixture-486"><span class="linenos">486</span></a><span class="sd">        Note that traceback or stack info (from :func:`logging.exception` or</span>
</span><span id="LogCaptureFixture-487"><a href="#LogCaptureFixture-487"><span class="linenos">487</span></a><span class="sd">        the `exc_info` or `stack_info` arguments to the logging functions) is</span>
</span><span id="LogCaptureFixture-488"><a href="#LogCaptureFixture-488"><span class="linenos">488</span></a><span class="sd">        not included, as this is added by the formatter in the handler.</span>
</span><span id="LogCaptureFixture-489"><a href="#LogCaptureFixture-489"><span class="linenos">489</span></a>
</span><span id="LogCaptureFixture-490"><a href="#LogCaptureFixture-490"><span class="linenos">490</span></a><span class="sd">        .. versionadded:: 3.7</span>
</span><span id="LogCaptureFixture-491"><a href="#LogCaptureFixture-491"><span class="linenos">491</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-492"><a href="#LogCaptureFixture-492"><span class="linenos">492</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">getMessage</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
</span><span id="LogCaptureFixture-493"><a href="#LogCaptureFixture-493"><span class="linenos">493</span></a>
</span><span id="LogCaptureFixture-494"><a href="#LogCaptureFixture-494"><span class="linenos">494</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-495"><a href="#LogCaptureFixture-495"><span class="linenos">495</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the list of log records and the captured log text.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-496"><a href="#LogCaptureFixture-496"><span class="linenos">496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="LogCaptureFixture-497"><a href="#LogCaptureFixture-497"><span class="linenos">497</span></a>
</span><span id="LogCaptureFixture-498"><a href="#LogCaptureFixture-498"><span class="linenos">498</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_force_enable_logging</span><span class="p">(</span>
</span><span id="LogCaptureFixture-499"><a href="#LogCaptureFixture-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span>
</span><span id="LogCaptureFixture-500"><a href="#LogCaptureFixture-500"><span class="linenos">500</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="LogCaptureFixture-501"><a href="#LogCaptureFixture-501"><span class="linenos">501</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enable the desired logging level if the global level was disabled via ``logging.disabled``.</span>
</span><span id="LogCaptureFixture-502"><a href="#LogCaptureFixture-502"><span class="linenos">502</span></a>
</span><span id="LogCaptureFixture-503"><a href="#LogCaptureFixture-503"><span class="linenos">503</span></a><span class="sd">        Only enables logging levels greater than or equal to the requested ``level``.</span>
</span><span id="LogCaptureFixture-504"><a href="#LogCaptureFixture-504"><span class="linenos">504</span></a>
</span><span id="LogCaptureFixture-505"><a href="#LogCaptureFixture-505"><span class="linenos">505</span></a><span class="sd">        Does nothing if the desired ``level`` wasn&#39;t disabled.</span>
</span><span id="LogCaptureFixture-506"><a href="#LogCaptureFixture-506"><span class="linenos">506</span></a>
</span><span id="LogCaptureFixture-507"><a href="#LogCaptureFixture-507"><span class="linenos">507</span></a><span class="sd">        :param level:</span>
</span><span id="LogCaptureFixture-508"><a href="#LogCaptureFixture-508"><span class="linenos">508</span></a><span class="sd">            The logger level caplog should capture.</span>
</span><span id="LogCaptureFixture-509"><a href="#LogCaptureFixture-509"><span class="linenos">509</span></a><span class="sd">            All logging is enabled if a non-standard logging level string is supplied.</span>
</span><span id="LogCaptureFixture-510"><a href="#LogCaptureFixture-510"><span class="linenos">510</span></a><span class="sd">            Valid level strings are in :data:`logging._nameToLevel`.</span>
</span><span id="LogCaptureFixture-511"><a href="#LogCaptureFixture-511"><span class="linenos">511</span></a><span class="sd">        :param logger_obj: The logger object to check.</span>
</span><span id="LogCaptureFixture-512"><a href="#LogCaptureFixture-512"><span class="linenos">512</span></a>
</span><span id="LogCaptureFixture-513"><a href="#LogCaptureFixture-513"><span class="linenos">513</span></a><span class="sd">        :return: The original disabled logging level.</span>
</span><span id="LogCaptureFixture-514"><a href="#LogCaptureFixture-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-515"><a href="#LogCaptureFixture-515"><span class="linenos">515</span></a>        <span class="n">original_disable_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">logger_obj</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">disable</span>
</span><span id="LogCaptureFixture-516"><a href="#LogCaptureFixture-516"><span class="linenos">516</span></a>
</span><span id="LogCaptureFixture-517"><a href="#LogCaptureFixture-517"><span class="linenos">517</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="LogCaptureFixture-518"><a href="#LogCaptureFixture-518"><span class="linenos">518</span></a>            <span class="c1"># Try to translate the level string to an int for `logging.disable()`</span>
</span><span id="LogCaptureFixture-519"><a href="#LogCaptureFixture-519"><span class="linenos">519</span></a>            <span class="n">level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLevelName</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-520"><a href="#LogCaptureFixture-520"><span class="linenos">520</span></a>
</span><span id="LogCaptureFixture-521"><a href="#LogCaptureFixture-521"><span class="linenos">521</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="LogCaptureFixture-522"><a href="#LogCaptureFixture-522"><span class="linenos">522</span></a>            <span class="c1"># The level provided was not valid, so just un-disable all logging.</span>
</span><span id="LogCaptureFixture-523"><a href="#LogCaptureFixture-523"><span class="linenos">523</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>
</span><span id="LogCaptureFixture-524"><a href="#LogCaptureFixture-524"><span class="linenos">524</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="n">logger_obj</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">level</span><span class="p">):</span>
</span><span id="LogCaptureFixture-525"><a href="#LogCaptureFixture-525"><span class="linenos">525</span></a>            <span class="c1"># Each level is `10` away from other levels.</span>
</span><span id="LogCaptureFixture-526"><a href="#LogCaptureFixture-526"><span class="linenos">526</span></a>            <span class="c1"># https://docs.python.org/3/library/logging.html#logging-levels</span>
</span><span id="LogCaptureFixture-527"><a href="#LogCaptureFixture-527"><span class="linenos">527</span></a>            <span class="n">disable_level</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">level</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>
</span><span id="LogCaptureFixture-528"><a href="#LogCaptureFixture-528"><span class="linenos">528</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">disable_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-529"><a href="#LogCaptureFixture-529"><span class="linenos">529</span></a>
</span><span id="LogCaptureFixture-530"><a href="#LogCaptureFixture-530"><span class="linenos">530</span></a>        <span class="k">return</span> <span class="n">original_disable_level</span>
</span><span id="LogCaptureFixture-531"><a href="#LogCaptureFixture-531"><span class="linenos">531</span></a>
</span><span id="LogCaptureFixture-532"><a href="#LogCaptureFixture-532"><span class="linenos">532</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-533"><a href="#LogCaptureFixture-533"><span class="linenos">533</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the threshold level of a logger for the duration of a test.</span>
</span><span id="LogCaptureFixture-534"><a href="#LogCaptureFixture-534"><span class="linenos">534</span></a>
</span><span id="LogCaptureFixture-535"><a href="#LogCaptureFixture-535"><span class="linenos">535</span></a><span class="sd">        Logging messages which are less severe than this level will not be captured.</span>
</span><span id="LogCaptureFixture-536"><a href="#LogCaptureFixture-536"><span class="linenos">536</span></a>
</span><span id="LogCaptureFixture-537"><a href="#LogCaptureFixture-537"><span class="linenos">537</span></a><span class="sd">        .. versionchanged:: 3.4</span>
</span><span id="LogCaptureFixture-538"><a href="#LogCaptureFixture-538"><span class="linenos">538</span></a><span class="sd">            The levels of the loggers changed by this function will be</span>
</span><span id="LogCaptureFixture-539"><a href="#LogCaptureFixture-539"><span class="linenos">539</span></a><span class="sd">            restored to their initial values at the end of the test.</span>
</span><span id="LogCaptureFixture-540"><a href="#LogCaptureFixture-540"><span class="linenos">540</span></a>
</span><span id="LogCaptureFixture-541"><a href="#LogCaptureFixture-541"><span class="linenos">541</span></a><span class="sd">        Will enable the requested logging level if it was disabled via :func:`logging.disable`.</span>
</span><span id="LogCaptureFixture-542"><a href="#LogCaptureFixture-542"><span class="linenos">542</span></a>
</span><span id="LogCaptureFixture-543"><a href="#LogCaptureFixture-543"><span class="linenos">543</span></a><span class="sd">        :param level: The level.</span>
</span><span id="LogCaptureFixture-544"><a href="#LogCaptureFixture-544"><span class="linenos">544</span></a><span class="sd">        :param logger: The logger to update. If not given, the root logger.</span>
</span><span id="LogCaptureFixture-545"><a href="#LogCaptureFixture-545"><span class="linenos">545</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-546"><a href="#LogCaptureFixture-546"><span class="linenos">546</span></a>        <span class="n">logger_obj</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span>
</span><span id="LogCaptureFixture-547"><a href="#LogCaptureFixture-547"><span class="linenos">547</span></a>        <span class="c1"># Save the original log-level to restore it during teardown.</span>
</span><span id="LogCaptureFixture-548"><a href="#LogCaptureFixture-548"><span class="linenos">548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_logger_levels</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logger_obj</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-549"><a href="#LogCaptureFixture-549"><span class="linenos">549</span></a>        <span class="n">logger_obj</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-550"><a href="#LogCaptureFixture-550"><span class="linenos">550</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-551"><a href="#LogCaptureFixture-551"><span class="linenos">551</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">level</span>
</span><span id="LogCaptureFixture-552"><a href="#LogCaptureFixture-552"><span class="linenos">552</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-553"><a href="#LogCaptureFixture-553"><span class="linenos">553</span></a>        <span class="n">initial_disabled_logging_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_force_enable_logging</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">)</span>
</span><span id="LogCaptureFixture-554"><a href="#LogCaptureFixture-554"><span class="linenos">554</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture-555"><a href="#LogCaptureFixture-555"><span class="linenos">555</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span> <span class="o">=</span> <span class="n">initial_disabled_logging_level</span>
</span><span id="LogCaptureFixture-556"><a href="#LogCaptureFixture-556"><span class="linenos">556</span></a>
</span><span id="LogCaptureFixture-557"><a href="#LogCaptureFixture-557"><span class="linenos">557</span></a>    <span class="nd">@contextmanager</span>
</span><span id="LogCaptureFixture-558"><a href="#LogCaptureFixture-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">at_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="LogCaptureFixture-559"><a href="#LogCaptureFixture-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context manager that sets the level for capturing of logs. After</span>
</span><span id="LogCaptureFixture-560"><a href="#LogCaptureFixture-560"><span class="linenos">560</span></a><span class="sd">        the end of the &#39;with&#39; statement the level is restored to its original</span>
</span><span id="LogCaptureFixture-561"><a href="#LogCaptureFixture-561"><span class="linenos">561</span></a><span class="sd">        value.</span>
</span><span id="LogCaptureFixture-562"><a href="#LogCaptureFixture-562"><span class="linenos">562</span></a>
</span><span id="LogCaptureFixture-563"><a href="#LogCaptureFixture-563"><span class="linenos">563</span></a><span class="sd">        Will enable the requested logging level if it was disabled via :func:`logging.disable`.</span>
</span><span id="LogCaptureFixture-564"><a href="#LogCaptureFixture-564"><span class="linenos">564</span></a>
</span><span id="LogCaptureFixture-565"><a href="#LogCaptureFixture-565"><span class="linenos">565</span></a><span class="sd">        :param level: The level.</span>
</span><span id="LogCaptureFixture-566"><a href="#LogCaptureFixture-566"><span class="linenos">566</span></a><span class="sd">        :param logger: The logger to update. If not given, the root logger.</span>
</span><span id="LogCaptureFixture-567"><a href="#LogCaptureFixture-567"><span class="linenos">567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-568"><a href="#LogCaptureFixture-568"><span class="linenos">568</span></a>        <span class="n">logger_obj</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span>
</span><span id="LogCaptureFixture-569"><a href="#LogCaptureFixture-569"><span class="linenos">569</span></a>        <span class="n">orig_level</span> <span class="o">=</span> <span class="n">logger_obj</span><span class="o">.</span><span class="n">level</span>
</span><span id="LogCaptureFixture-570"><a href="#LogCaptureFixture-570"><span class="linenos">570</span></a>        <span class="n">logger_obj</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-571"><a href="#LogCaptureFixture-571"><span class="linenos">571</span></a>        <span class="n">handler_orig_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">level</span>
</span><span id="LogCaptureFixture-572"><a href="#LogCaptureFixture-572"><span class="linenos">572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-573"><a href="#LogCaptureFixture-573"><span class="linenos">573</span></a>        <span class="n">original_disable_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_force_enable_logging</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">)</span>
</span><span id="LogCaptureFixture-574"><a href="#LogCaptureFixture-574"><span class="linenos">574</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="LogCaptureFixture-575"><a href="#LogCaptureFixture-575"><span class="linenos">575</span></a>            <span class="k">yield</span>
</span><span id="LogCaptureFixture-576"><a href="#LogCaptureFixture-576"><span class="linenos">576</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="LogCaptureFixture-577"><a href="#LogCaptureFixture-577"><span class="linenos">577</span></a>            <span class="n">logger_obj</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">orig_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-578"><a href="#LogCaptureFixture-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">handler_orig_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-579"><a href="#LogCaptureFixture-579"><span class="linenos">579</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">original_disable_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture-580"><a href="#LogCaptureFixture-580"><span class="linenos">580</span></a>
</span><span id="LogCaptureFixture-581"><a href="#LogCaptureFixture-581"><span class="linenos">581</span></a>    <span class="nd">@contextmanager</span>
</span><span id="LogCaptureFixture-582"><a href="#LogCaptureFixture-582"><span class="linenos">582</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="LogCaptureFixture-583"><a href="#LogCaptureFixture-583"><span class="linenos">583</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context manager that temporarily adds the given filter to the caplog&#39;s</span>
</span><span id="LogCaptureFixture-584"><a href="#LogCaptureFixture-584"><span class="linenos">584</span></a><span class="sd">        :meth:`handler` for the &#39;with&#39; statement block, and removes that filter at the</span>
</span><span id="LogCaptureFixture-585"><a href="#LogCaptureFixture-585"><span class="linenos">585</span></a><span class="sd">        end of the block.</span>
</span><span id="LogCaptureFixture-586"><a href="#LogCaptureFixture-586"><span class="linenos">586</span></a>
</span><span id="LogCaptureFixture-587"><a href="#LogCaptureFixture-587"><span class="linenos">587</span></a><span class="sd">        :param filter_: A custom :class:`logging.Filter` object.</span>
</span><span id="LogCaptureFixture-588"><a href="#LogCaptureFixture-588"><span class="linenos">588</span></a>
</span><span id="LogCaptureFixture-589"><a href="#LogCaptureFixture-589"><span class="linenos">589</span></a><span class="sd">        .. versionadded:: 7.5</span>
</span><span id="LogCaptureFixture-590"><a href="#LogCaptureFixture-590"><span class="linenos">590</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture-591"><a href="#LogCaptureFixture-591"><span class="linenos">591</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">filter_</span><span class="p">)</span>
</span><span id="LogCaptureFixture-592"><a href="#LogCaptureFixture-592"><span class="linenos">592</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="LogCaptureFixture-593"><a href="#LogCaptureFixture-593"><span class="linenos">593</span></a>            <span class="k">yield</span>
</span><span id="LogCaptureFixture-594"><a href="#LogCaptureFixture-594"><span class="linenos">594</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="LogCaptureFixture-595"><a href="#LogCaptureFixture-595"><span class="linenos">595</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">removeFilter</span><span class="p">(</span><span class="n">filter_</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Provides access and control of log capturing.</p>
</div>


                            <div id="LogCaptureFixture.__init__" class="classattr">
                                        <input id="LogCaptureFixture.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LogCaptureFixture</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">item</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Node</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="LogCaptureFixture.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.__init__-410"><a href="#LogCaptureFixture.__init__-410"><span class="linenos">410</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture.__init__-411"><a href="#LogCaptureFixture.__init__-411"><span class="linenos">411</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="LogCaptureFixture.__init__-412"><a href="#LogCaptureFixture.__init__-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="n">item</span>
</span><span id="LogCaptureFixture.__init__-413"><a href="#LogCaptureFixture.__init__-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="LogCaptureFixture.__init__-414"><a href="#LogCaptureFixture.__init__-414"><span class="linenos">414</span></a>        <span class="c1"># Dict of log name -&gt; log level.</span>
</span><span id="LogCaptureFixture.__init__-415"><a href="#LogCaptureFixture.__init__-415"><span class="linenos">415</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_logger_levels</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="LogCaptureFixture.__init__-416"><a href="#LogCaptureFixture.__init__-416"><span class="linenos">416</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


    

                            </div>
                            <div id="LogCaptureFixture.handler" class="classattr">
                                        <input id="LogCaptureFixture.handler-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">handler</span><span class="annotation">: _pytest.logging.LogCaptureHandler</span>

                <label class="view-source-button" for="LogCaptureFixture.handler-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.handler"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.handler-434"><a href="#LogCaptureFixture.handler-434"><span class="linenos">434</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture.handler-435"><a href="#LogCaptureFixture.handler-435"><span class="linenos">435</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LogCaptureHandler</span><span class="p">:</span>
</span><span id="LogCaptureFixture.handler-436"><a href="#LogCaptureFixture.handler-436"><span class="linenos">436</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the logging handler used by the fixture.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.handler-437"><a href="#LogCaptureFixture.handler-437"><span class="linenos">437</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">caplog_handler_key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Get the logging handler used by the fixture.</p>
</div>


                            </div>
                            <div id="LogCaptureFixture.get_records" class="classattr">
                                        <input id="LogCaptureFixture.get_records-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_records</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;setup&#39;</span><span class="p">,</span> <span class="s1">&#39;call&#39;</span><span class="p">,</span> <span class="s1">&#39;teardown&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LogCaptureFixture.get_records-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.get_records"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.get_records-439"><a href="#LogCaptureFixture.get_records-439"><span class="linenos">439</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_records</span><span class="p">(</span>
</span><span id="LogCaptureFixture.get_records-440"><a href="#LogCaptureFixture.get_records-440"><span class="linenos">440</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">]</span>
</span><span id="LogCaptureFixture.get_records-441"><a href="#LogCaptureFixture.get_records-441"><span class="linenos">441</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">]:</span>
</span><span id="LogCaptureFixture.get_records-442"><a href="#LogCaptureFixture.get_records-442"><span class="linenos">442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the logging records for one of the possible test phases.</span>
</span><span id="LogCaptureFixture.get_records-443"><a href="#LogCaptureFixture.get_records-443"><span class="linenos">443</span></a>
</span><span id="LogCaptureFixture.get_records-444"><a href="#LogCaptureFixture.get_records-444"><span class="linenos">444</span></a><span class="sd">        :param when:</span>
</span><span id="LogCaptureFixture.get_records-445"><a href="#LogCaptureFixture.get_records-445"><span class="linenos">445</span></a><span class="sd">            Which test phase to obtain the records from.</span>
</span><span id="LogCaptureFixture.get_records-446"><a href="#LogCaptureFixture.get_records-446"><span class="linenos">446</span></a><span class="sd">            Valid values are: &quot;setup&quot;, &quot;call&quot; and &quot;teardown&quot;.</span>
</span><span id="LogCaptureFixture.get_records-447"><a href="#LogCaptureFixture.get_records-447"><span class="linenos">447</span></a>
</span><span id="LogCaptureFixture.get_records-448"><a href="#LogCaptureFixture.get_records-448"><span class="linenos">448</span></a><span class="sd">        :returns: The list of captured records at the given stage.</span>
</span><span id="LogCaptureFixture.get_records-449"><a href="#LogCaptureFixture.get_records-449"><span class="linenos">449</span></a>
</span><span id="LogCaptureFixture.get_records-450"><a href="#LogCaptureFixture.get_records-450"><span class="linenos">450</span></a><span class="sd">        .. versionadded:: 3.4</span>
</span><span id="LogCaptureFixture.get_records-451"><a href="#LogCaptureFixture.get_records-451"><span class="linenos">451</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.get_records-452"><a href="#LogCaptureFixture.get_records-452"><span class="linenos">452</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">caplog_records_key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">when</span><span class="p">,</span> <span class="p">[])</span>
</span></pre></div>


            <div class="docstring"><p>Get the logging records for one of the possible test phases.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>when</strong>: 
Which test phase to obtain the records from.
Valid values are: "setup", "call" and "teardown".</li>
</ul>

<p>:returns: The list of captured records at the given stage.</p>

<p><em>New in version 3.4.</em></p>
</div>


                            </div>
                            <div id="LogCaptureFixture.text" class="classattr">
                                        <input id="LogCaptureFixture.text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">text</span><span class="annotation">: str</span>

                <label class="view-source-button" for="LogCaptureFixture.text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.text-454"><a href="#LogCaptureFixture.text-454"><span class="linenos">454</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture.text-455"><a href="#LogCaptureFixture.text-455"><span class="linenos">455</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LogCaptureFixture.text-456"><a href="#LogCaptureFixture.text-456"><span class="linenos">456</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The formatted log text.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.text-457"><a href="#LogCaptureFixture.text-457"><span class="linenos">457</span></a>        <span class="k">return</span> <span class="n">_remove_ansi_escape_sequences</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>The formatted log text.</p>
</div>


                            </div>
                            <div id="LogCaptureFixture.records" class="classattr">
                                        <input id="LogCaptureFixture.records-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">records</span><span class="annotation">: list[logging.LogRecord]</span>

                <label class="view-source-button" for="LogCaptureFixture.records-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.records"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.records-459"><a href="#LogCaptureFixture.records-459"><span class="linenos">459</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture.records-460"><a href="#LogCaptureFixture.records-460"><span class="linenos">460</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">records</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">]:</span>
</span><span id="LogCaptureFixture.records-461"><a href="#LogCaptureFixture.records-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of log records.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.records-462"><a href="#LogCaptureFixture.records-462"><span class="linenos">462</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">records</span>
</span></pre></div>


            <div class="docstring"><p>The list of log records.</p>
</div>


                            </div>
                            <div id="LogCaptureFixture.record_tuples" class="classattr">
                                        <input id="LogCaptureFixture.record_tuples-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">record_tuples</span><span class="annotation">: list[tuple[str, int, str]]</span>

                <label class="view-source-button" for="LogCaptureFixture.record_tuples-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.record_tuples"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.record_tuples-464"><a href="#LogCaptureFixture.record_tuples-464"><span class="linenos">464</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture.record_tuples-465"><a href="#LogCaptureFixture.record_tuples-465"><span class="linenos">465</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">record_tuples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="LogCaptureFixture.record_tuples-466"><a href="#LogCaptureFixture.record_tuples-466"><span class="linenos">466</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of a stripped down version of log records intended</span>
</span><span id="LogCaptureFixture.record_tuples-467"><a href="#LogCaptureFixture.record_tuples-467"><span class="linenos">467</span></a><span class="sd">        for use in assertion comparison.</span>
</span><span id="LogCaptureFixture.record_tuples-468"><a href="#LogCaptureFixture.record_tuples-468"><span class="linenos">468</span></a>
</span><span id="LogCaptureFixture.record_tuples-469"><a href="#LogCaptureFixture.record_tuples-469"><span class="linenos">469</span></a><span class="sd">        The format of the tuple is:</span>
</span><span id="LogCaptureFixture.record_tuples-470"><a href="#LogCaptureFixture.record_tuples-470"><span class="linenos">470</span></a>
</span><span id="LogCaptureFixture.record_tuples-471"><a href="#LogCaptureFixture.record_tuples-471"><span class="linenos">471</span></a><span class="sd">            (logger_name, log_level, message)</span>
</span><span id="LogCaptureFixture.record_tuples-472"><a href="#LogCaptureFixture.record_tuples-472"><span class="linenos">472</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.record_tuples-473"><a href="#LogCaptureFixture.record_tuples-473"><span class="linenos">473</span></a>        <span class="k">return</span> <span class="p">[(</span><span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">levelno</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">getMessage</span><span class="p">())</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>A list of a stripped down version of log records intended
for use in assertion comparison.</p>

<p>The format of the tuple is:</p>

<pre><code>(logger_name, log_level, message)
</code></pre>
</div>


                            </div>
                            <div id="LogCaptureFixture.messages" class="classattr">
                                        <input id="LogCaptureFixture.messages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">messages</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="LogCaptureFixture.messages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.messages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.messages-475"><a href="#LogCaptureFixture.messages-475"><span class="linenos">475</span></a>    <span class="nd">@property</span>
</span><span id="LogCaptureFixture.messages-476"><a href="#LogCaptureFixture.messages-476"><span class="linenos">476</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="LogCaptureFixture.messages-477"><a href="#LogCaptureFixture.messages-477"><span class="linenos">477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of format-interpolated log messages.</span>
</span><span id="LogCaptureFixture.messages-478"><a href="#LogCaptureFixture.messages-478"><span class="linenos">478</span></a>
</span><span id="LogCaptureFixture.messages-479"><a href="#LogCaptureFixture.messages-479"><span class="linenos">479</span></a><span class="sd">        Unlike &#39;records&#39;, which contains the format string and parameters for</span>
</span><span id="LogCaptureFixture.messages-480"><a href="#LogCaptureFixture.messages-480"><span class="linenos">480</span></a><span class="sd">        interpolation, log messages in this list are all interpolated.</span>
</span><span id="LogCaptureFixture.messages-481"><a href="#LogCaptureFixture.messages-481"><span class="linenos">481</span></a>
</span><span id="LogCaptureFixture.messages-482"><a href="#LogCaptureFixture.messages-482"><span class="linenos">482</span></a><span class="sd">        Unlike &#39;text&#39;, which contains the output from the handler, log</span>
</span><span id="LogCaptureFixture.messages-483"><a href="#LogCaptureFixture.messages-483"><span class="linenos">483</span></a><span class="sd">        messages in this list are unadorned with levels, timestamps, etc,</span>
</span><span id="LogCaptureFixture.messages-484"><a href="#LogCaptureFixture.messages-484"><span class="linenos">484</span></a><span class="sd">        making exact comparisons more reliable.</span>
</span><span id="LogCaptureFixture.messages-485"><a href="#LogCaptureFixture.messages-485"><span class="linenos">485</span></a>
</span><span id="LogCaptureFixture.messages-486"><a href="#LogCaptureFixture.messages-486"><span class="linenos">486</span></a><span class="sd">        Note that traceback or stack info (from :func:`logging.exception` or</span>
</span><span id="LogCaptureFixture.messages-487"><a href="#LogCaptureFixture.messages-487"><span class="linenos">487</span></a><span class="sd">        the `exc_info` or `stack_info` arguments to the logging functions) is</span>
</span><span id="LogCaptureFixture.messages-488"><a href="#LogCaptureFixture.messages-488"><span class="linenos">488</span></a><span class="sd">        not included, as this is added by the formatter in the handler.</span>
</span><span id="LogCaptureFixture.messages-489"><a href="#LogCaptureFixture.messages-489"><span class="linenos">489</span></a>
</span><span id="LogCaptureFixture.messages-490"><a href="#LogCaptureFixture.messages-490"><span class="linenos">490</span></a><span class="sd">        .. versionadded:: 3.7</span>
</span><span id="LogCaptureFixture.messages-491"><a href="#LogCaptureFixture.messages-491"><span class="linenos">491</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.messages-492"><a href="#LogCaptureFixture.messages-492"><span class="linenos">492</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">getMessage</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>A list of format-interpolated log messages.</p>

<p>Unlike 'records', which contains the format string and parameters for
interpolation, log messages in this list are all interpolated.</p>

<p>Unlike 'text', which contains the output from the handler, log
messages in this list are unadorned with levels, timestamps, etc,
making exact comparisons more reliable.</p>

<p>Note that traceback or stack info (from <code>logging.exception()</code> or
the <code>exc_info</code> or <code>stack_info</code> arguments to the logging functions) is
not included, as this is added by the formatter in the handler.</p>

<p><em>New in version 3.7.</em></p>
</div>


                            </div>
                            <div id="LogCaptureFixture.clear" class="classattr">
                                        <input id="LogCaptureFixture.clear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogCaptureFixture.clear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.clear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.clear-494"><a href="#LogCaptureFixture.clear-494"><span class="linenos">494</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture.clear-495"><a href="#LogCaptureFixture.clear-495"><span class="linenos">495</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the list of log records and the captured log text.&quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.clear-496"><a href="#LogCaptureFixture.clear-496"><span class="linenos">496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Reset the list of log records and the captured log text.</p>
</div>


                            </div>
                            <div id="LogCaptureFixture.set_level" class="classattr">
                                        <input id="LogCaptureFixture.set_level-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_level</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span>, </span><span class="param"><span class="n">logger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LogCaptureFixture.set_level-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.set_level"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.set_level-532"><a href="#LogCaptureFixture.set_level-532"><span class="linenos">532</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture.set_level-533"><a href="#LogCaptureFixture.set_level-533"><span class="linenos">533</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the threshold level of a logger for the duration of a test.</span>
</span><span id="LogCaptureFixture.set_level-534"><a href="#LogCaptureFixture.set_level-534"><span class="linenos">534</span></a>
</span><span id="LogCaptureFixture.set_level-535"><a href="#LogCaptureFixture.set_level-535"><span class="linenos">535</span></a><span class="sd">        Logging messages which are less severe than this level will not be captured.</span>
</span><span id="LogCaptureFixture.set_level-536"><a href="#LogCaptureFixture.set_level-536"><span class="linenos">536</span></a>
</span><span id="LogCaptureFixture.set_level-537"><a href="#LogCaptureFixture.set_level-537"><span class="linenos">537</span></a><span class="sd">        .. versionchanged:: 3.4</span>
</span><span id="LogCaptureFixture.set_level-538"><a href="#LogCaptureFixture.set_level-538"><span class="linenos">538</span></a><span class="sd">            The levels of the loggers changed by this function will be</span>
</span><span id="LogCaptureFixture.set_level-539"><a href="#LogCaptureFixture.set_level-539"><span class="linenos">539</span></a><span class="sd">            restored to their initial values at the end of the test.</span>
</span><span id="LogCaptureFixture.set_level-540"><a href="#LogCaptureFixture.set_level-540"><span class="linenos">540</span></a>
</span><span id="LogCaptureFixture.set_level-541"><a href="#LogCaptureFixture.set_level-541"><span class="linenos">541</span></a><span class="sd">        Will enable the requested logging level if it was disabled via :func:`logging.disable`.</span>
</span><span id="LogCaptureFixture.set_level-542"><a href="#LogCaptureFixture.set_level-542"><span class="linenos">542</span></a>
</span><span id="LogCaptureFixture.set_level-543"><a href="#LogCaptureFixture.set_level-543"><span class="linenos">543</span></a><span class="sd">        :param level: The level.</span>
</span><span id="LogCaptureFixture.set_level-544"><a href="#LogCaptureFixture.set_level-544"><span class="linenos">544</span></a><span class="sd">        :param logger: The logger to update. If not given, the root logger.</span>
</span><span id="LogCaptureFixture.set_level-545"><a href="#LogCaptureFixture.set_level-545"><span class="linenos">545</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.set_level-546"><a href="#LogCaptureFixture.set_level-546"><span class="linenos">546</span></a>        <span class="n">logger_obj</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span>
</span><span id="LogCaptureFixture.set_level-547"><a href="#LogCaptureFixture.set_level-547"><span class="linenos">547</span></a>        <span class="c1"># Save the original log-level to restore it during teardown.</span>
</span><span id="LogCaptureFixture.set_level-548"><a href="#LogCaptureFixture.set_level-548"><span class="linenos">548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_logger_levels</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logger_obj</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.set_level-549"><a href="#LogCaptureFixture.set_level-549"><span class="linenos">549</span></a>        <span class="n">logger_obj</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.set_level-550"><a href="#LogCaptureFixture.set_level-550"><span class="linenos">550</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture.set_level-551"><a href="#LogCaptureFixture.set_level-551"><span class="linenos">551</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_handler_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">level</span>
</span><span id="LogCaptureFixture.set_level-552"><a href="#LogCaptureFixture.set_level-552"><span class="linenos">552</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.set_level-553"><a href="#LogCaptureFixture.set_level-553"><span class="linenos">553</span></a>        <span class="n">initial_disabled_logging_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_force_enable_logging</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">)</span>
</span><span id="LogCaptureFixture.set_level-554"><a href="#LogCaptureFixture.set_level-554"><span class="linenos">554</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LogCaptureFixture.set_level-555"><a href="#LogCaptureFixture.set_level-555"><span class="linenos">555</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_disabled_logging_level</span> <span class="o">=</span> <span class="n">initial_disabled_logging_level</span>
</span></pre></div>


            <div class="docstring"><p>Set the threshold level of a logger for the duration of a test.</p>

<p>Logging messages which are less severe than this level will not be captured.</p>

<p><em>Changed in version 3.4:</em>
The levels of the loggers changed by this function will be
restored to their initial values at the end of the test.</p>

<p>Will enable the requested logging level if it was disabled via <code>logging.disable()</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>level</strong>:  The level.</li>
<li><strong>logger</strong>:  The logger to update. If not given, the root logger.</li>
</ul>
</div>


                            </div>
                            <div id="LogCaptureFixture.at_level" class="classattr">
                                        <input id="LogCaptureFixture.at_level-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-contextmanager">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">at_level</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">logger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Generator</span><span class="p">[</span><span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LogCaptureFixture.at_level-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.at_level"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.at_level-557"><a href="#LogCaptureFixture.at_level-557"><span class="linenos">557</span></a>    <span class="nd">@contextmanager</span>
</span><span id="LogCaptureFixture.at_level-558"><a href="#LogCaptureFixture.at_level-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">at_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="LogCaptureFixture.at_level-559"><a href="#LogCaptureFixture.at_level-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context manager that sets the level for capturing of logs. After</span>
</span><span id="LogCaptureFixture.at_level-560"><a href="#LogCaptureFixture.at_level-560"><span class="linenos">560</span></a><span class="sd">        the end of the &#39;with&#39; statement the level is restored to its original</span>
</span><span id="LogCaptureFixture.at_level-561"><a href="#LogCaptureFixture.at_level-561"><span class="linenos">561</span></a><span class="sd">        value.</span>
</span><span id="LogCaptureFixture.at_level-562"><a href="#LogCaptureFixture.at_level-562"><span class="linenos">562</span></a>
</span><span id="LogCaptureFixture.at_level-563"><a href="#LogCaptureFixture.at_level-563"><span class="linenos">563</span></a><span class="sd">        Will enable the requested logging level if it was disabled via :func:`logging.disable`.</span>
</span><span id="LogCaptureFixture.at_level-564"><a href="#LogCaptureFixture.at_level-564"><span class="linenos">564</span></a>
</span><span id="LogCaptureFixture.at_level-565"><a href="#LogCaptureFixture.at_level-565"><span class="linenos">565</span></a><span class="sd">        :param level: The level.</span>
</span><span id="LogCaptureFixture.at_level-566"><a href="#LogCaptureFixture.at_level-566"><span class="linenos">566</span></a><span class="sd">        :param logger: The logger to update. If not given, the root logger.</span>
</span><span id="LogCaptureFixture.at_level-567"><a href="#LogCaptureFixture.at_level-567"><span class="linenos">567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.at_level-568"><a href="#LogCaptureFixture.at_level-568"><span class="linenos">568</span></a>        <span class="n">logger_obj</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span>
</span><span id="LogCaptureFixture.at_level-569"><a href="#LogCaptureFixture.at_level-569"><span class="linenos">569</span></a>        <span class="n">orig_level</span> <span class="o">=</span> <span class="n">logger_obj</span><span class="o">.</span><span class="n">level</span>
</span><span id="LogCaptureFixture.at_level-570"><a href="#LogCaptureFixture.at_level-570"><span class="linenos">570</span></a>        <span class="n">logger_obj</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.at_level-571"><a href="#LogCaptureFixture.at_level-571"><span class="linenos">571</span></a>        <span class="n">handler_orig_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">level</span>
</span><span id="LogCaptureFixture.at_level-572"><a href="#LogCaptureFixture.at_level-572"><span class="linenos">572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.at_level-573"><a href="#LogCaptureFixture.at_level-573"><span class="linenos">573</span></a>        <span class="n">original_disable_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_force_enable_logging</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">)</span>
</span><span id="LogCaptureFixture.at_level-574"><a href="#LogCaptureFixture.at_level-574"><span class="linenos">574</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="LogCaptureFixture.at_level-575"><a href="#LogCaptureFixture.at_level-575"><span class="linenos">575</span></a>            <span class="k">yield</span>
</span><span id="LogCaptureFixture.at_level-576"><a href="#LogCaptureFixture.at_level-576"><span class="linenos">576</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="LogCaptureFixture.at_level-577"><a href="#LogCaptureFixture.at_level-577"><span class="linenos">577</span></a>            <span class="n">logger_obj</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">orig_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.at_level-578"><a href="#LogCaptureFixture.at_level-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">handler_orig_level</span><span class="p">)</span>
</span><span id="LogCaptureFixture.at_level-579"><a href="#LogCaptureFixture.at_level-579"><span class="linenos">579</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">original_disable_level</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Context manager that sets the level for capturing of logs. After
the end of the 'with' statement the level is restored to its original
value.</p>

<p>Will enable the requested logging level if it was disabled via <code>logging.disable()</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>level</strong>:  The level.</li>
<li><strong>logger</strong>:  The logger to update. If not given, the root logger.</li>
</ul>
</div>


                            </div>
                            <div id="LogCaptureFixture.filtering" class="classattr">
                                        <input id="LogCaptureFixture.filtering-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-contextmanager">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">filtering</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filter_</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Filter</span></span><span class="return-annotation">) -> <span class="n">Generator</span><span class="p">[</span><span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LogCaptureFixture.filtering-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LogCaptureFixture.filtering"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LogCaptureFixture.filtering-581"><a href="#LogCaptureFixture.filtering-581"><span class="linenos">581</span></a>    <span class="nd">@contextmanager</span>
</span><span id="LogCaptureFixture.filtering-582"><a href="#LogCaptureFixture.filtering-582"><span class="linenos">582</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="LogCaptureFixture.filtering-583"><a href="#LogCaptureFixture.filtering-583"><span class="linenos">583</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context manager that temporarily adds the given filter to the caplog&#39;s</span>
</span><span id="LogCaptureFixture.filtering-584"><a href="#LogCaptureFixture.filtering-584"><span class="linenos">584</span></a><span class="sd">        :meth:`handler` for the &#39;with&#39; statement block, and removes that filter at the</span>
</span><span id="LogCaptureFixture.filtering-585"><a href="#LogCaptureFixture.filtering-585"><span class="linenos">585</span></a><span class="sd">        end of the block.</span>
</span><span id="LogCaptureFixture.filtering-586"><a href="#LogCaptureFixture.filtering-586"><span class="linenos">586</span></a>
</span><span id="LogCaptureFixture.filtering-587"><a href="#LogCaptureFixture.filtering-587"><span class="linenos">587</span></a><span class="sd">        :param filter_: A custom :class:`logging.Filter` object.</span>
</span><span id="LogCaptureFixture.filtering-588"><a href="#LogCaptureFixture.filtering-588"><span class="linenos">588</span></a>
</span><span id="LogCaptureFixture.filtering-589"><a href="#LogCaptureFixture.filtering-589"><span class="linenos">589</span></a><span class="sd">        .. versionadded:: 7.5</span>
</span><span id="LogCaptureFixture.filtering-590"><a href="#LogCaptureFixture.filtering-590"><span class="linenos">590</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LogCaptureFixture.filtering-591"><a href="#LogCaptureFixture.filtering-591"><span class="linenos">591</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">filter_</span><span class="p">)</span>
</span><span id="LogCaptureFixture.filtering-592"><a href="#LogCaptureFixture.filtering-592"><span class="linenos">592</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="LogCaptureFixture.filtering-593"><a href="#LogCaptureFixture.filtering-593"><span class="linenos">593</span></a>            <span class="k">yield</span>
</span><span id="LogCaptureFixture.filtering-594"><a href="#LogCaptureFixture.filtering-594"><span class="linenos">594</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="LogCaptureFixture.filtering-595"><a href="#LogCaptureFixture.filtering-595"><span class="linenos">595</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">removeFilter</span><span class="p">(</span><span class="n">filter_</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Context manager that temporarily adds the given filter to the caplog's
<code><a href="#LogCaptureFixture.handler">handler()</a></code> for the 'with' statement block, and removes that filter at the
end of the block.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filter_</strong>:  A custom <code>logging.Filter</code> object.</li>
</ul>

<p><em>New in version 7.5.</em></p>
</div>


                            </div>
                </section>
                <section id="main">
                            <input id="main-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">main</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">plugins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">int</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">ExitCode</span>:</span></span>

                <label class="view-source-button" for="main-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#main"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="main-140"><a href="#main-140"><span class="linenos">140</span></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span>
</span><span id="main-141"><a href="#main-141"><span class="linenos">141</span></a>    <span class="n">args</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="main-142"><a href="#main-142"><span class="linenos">142</span></a>    <span class="n">plugins</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="main-143"><a href="#main-143"><span class="linenos">143</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span><span class="p">:</span>
</span><span id="main-144"><a href="#main-144"><span class="linenos">144</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Perform an in-process test run.</span>
</span><span id="main-145"><a href="#main-145"><span class="linenos">145</span></a>
</span><span id="main-146"><a href="#main-146"><span class="linenos">146</span></a><span class="sd">    :param args:</span>
</span><span id="main-147"><a href="#main-147"><span class="linenos">147</span></a><span class="sd">        List of command line arguments. If `None` or not given, defaults to reading</span>
</span><span id="main-148"><a href="#main-148"><span class="linenos">148</span></a><span class="sd">        arguments directly from the process command line (:data:`sys.argv`).</span>
</span><span id="main-149"><a href="#main-149"><span class="linenos">149</span></a><span class="sd">    :param plugins: List of plugin objects to be auto-registered during initialization.</span>
</span><span id="main-150"><a href="#main-150"><span class="linenos">150</span></a>
</span><span id="main-151"><a href="#main-151"><span class="linenos">151</span></a><span class="sd">    :returns: An exit code.</span>
</span><span id="main-152"><a href="#main-152"><span class="linenos">152</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="main-153"><a href="#main-153"><span class="linenos">153</span></a>    <span class="n">old_pytest_version</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">)</span>
</span><span id="main-154"><a href="#main-154"><span class="linenos">154</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="main-155"><a href="#main-155"><span class="linenos">155</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
</span><span id="main-156"><a href="#main-156"><span class="linenos">156</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="main-157"><a href="#main-157"><span class="linenos">157</span></a>            <span class="n">config</span> <span class="o">=</span> <span class="n">_prepareconfig</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">plugins</span><span class="p">)</span>
</span><span id="main-158"><a href="#main-158"><span class="linenos">158</span></a>        <span class="k">except</span> <span class="n">ConftestImportFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="main-159"><a href="#main-159"><span class="linenos">159</span></a>            <span class="n">exc_info</span> <span class="o">=</span> <span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exception</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">cause</span><span class="p">)</span>
</span><span id="main-160"><a href="#main-160"><span class="linenos">160</span></a>            <span class="n">tw</span> <span class="o">=</span> <span class="n">TerminalWriter</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="main-161"><a href="#main-161"><span class="linenos">161</span></a>            <span class="n">tw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ImportError while loading conftest &#39;</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="main-162"><a href="#main-162"><span class="linenos">162</span></a>            <span class="n">exc_info</span><span class="o">.</span><span class="n">traceback</span> <span class="o">=</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">traceback</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span id="main-163"><a href="#main-163"><span class="linenos">163</span></a>                <span class="n">filter_traceback_for_conftest_import_failure</span>
</span><span id="main-164"><a href="#main-164"><span class="linenos">164</span></a>            <span class="p">)</span>
</span><span id="main-165"><a href="#main-165"><span class="linenos">165</span></a>            <span class="n">exc_repr</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="main-166"><a href="#main-166"><span class="linenos">166</span></a>                <span class="n">exc_info</span><span class="o">.</span><span class="n">getrepr</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;short&quot;</span><span class="p">,</span> <span class="n">chain</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="main-167"><a href="#main-167"><span class="linenos">167</span></a>                <span class="k">if</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">traceback</span>
</span><span id="main-168"><a href="#main-168"><span class="linenos">168</span></a>                <span class="k">else</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">exconly</span><span class="p">()</span>
</span><span id="main-169"><a href="#main-169"><span class="linenos">169</span></a>            <span class="p">)</span>
</span><span id="main-170"><a href="#main-170"><span class="linenos">170</span></a>            <span class="n">formatted_tb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc_repr</span><span class="p">)</span>
</span><span id="main-171"><a href="#main-171"><span class="linenos">171</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">formatted_tb</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
</span><span id="main-172"><a href="#main-172"><span class="linenos">172</span></a>                <span class="n">tw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(),</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="main-173"><a href="#main-173"><span class="linenos">173</span></a>            <span class="k">return</span> <span class="n">ExitCode</span><span class="o">.</span><span class="n">USAGE_ERROR</span>
</span><span id="main-174"><a href="#main-174"><span class="linenos">174</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="main-175"><a href="#main-175"><span class="linenos">175</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="main-176"><a href="#main-176"><span class="linenos">176</span></a>                <span class="n">ret</span><span class="p">:</span> <span class="n">ExitCode</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_cmdline_main</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="main-177"><a href="#main-177"><span class="linenos">177</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="main-178"><a href="#main-178"><span class="linenos">178</span></a>                    <span class="k">return</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span><span id="main-179"><a href="#main-179"><span class="linenos">179</span></a>                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="main-180"><a href="#main-180"><span class="linenos">180</span></a>                    <span class="k">return</span> <span class="n">ret</span>
</span><span id="main-181"><a href="#main-181"><span class="linenos">181</span></a>            <span class="k">finally</span><span class="p">:</span>
</span><span id="main-182"><a href="#main-182"><span class="linenos">182</span></a>                <span class="n">config</span><span class="o">.</span><span class="n">_ensure_unconfigure</span><span class="p">()</span>
</span><span id="main-183"><a href="#main-183"><span class="linenos">183</span></a>    <span class="k">except</span> <span class="n">UsageError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="main-184"><a href="#main-184"><span class="linenos">184</span></a>        <span class="n">tw</span> <span class="o">=</span> <span class="n">TerminalWriter</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="main-185"><a href="#main-185"><span class="linenos">185</span></a>        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
</span><span id="main-186"><a href="#main-186"><span class="linenos">186</span></a>            <span class="n">tw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="main-187"><a href="#main-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="n">ExitCode</span><span class="o">.</span><span class="n">USAGE_ERROR</span>
</span><span id="main-188"><a href="#main-188"><span class="linenos">188</span></a>    <span class="k">finally</span><span class="p">:</span>
</span><span id="main-189"><a href="#main-189"><span class="linenos">189</span></a>        <span class="k">if</span> <span class="n">old_pytest_version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="main-190"><a href="#main-190"><span class="linenos">190</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="main-191"><a href="#main-191"><span class="linenos">191</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="main-192"><a href="#main-192"><span class="linenos">192</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PYTEST_VERSION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_pytest_version</span>
</span></pre></div>


            <div class="docstring"><p>Perform an in-process test run.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>args</strong>: 
List of command line arguments. If <code>None</code> or not given, defaults to reading
arguments directly from the process command line (<code>sys.argv</code>).</li>
<li><strong>plugins</strong>:  List of plugin objects to be auto-registered during initialization.</li>
</ul>

<p>:returns: An exit code.</p>
</div>


                </section>
                <section id="mark">
                    <div class="attr variable">
            <span class="name">mark</span>        =
<span class="default_value">&lt;_pytest.mark.structures.MarkGenerator object&gt;</span>

        
    </div>
    <a class="headerlink" href="#mark"></a>
    
    

                </section>
                <section id="Mark">
                            <input id="Mark-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Mark</span>:

                <label class="view-source-button" for="Mark-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Mark"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Mark-193"><a href="#Mark-193"><span class="linenos">193</span></a><span class="nd">@final</span>
</span><span id="Mark-194"><a href="#Mark-194"><span class="linenos">194</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Mark-195"><a href="#Mark-195"><span class="linenos">195</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Mark</span><span class="p">:</span>
</span><span id="Mark-196"><a href="#Mark-196"><span class="linenos">196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A pytest mark.&quot;&quot;&quot;</span>
</span><span id="Mark-197"><a href="#Mark-197"><span class="linenos">197</span></a>
</span><span id="Mark-198"><a href="#Mark-198"><span class="linenos">198</span></a>    <span class="c1">#: Name of the mark.</span>
</span><span id="Mark-199"><a href="#Mark-199"><span class="linenos">199</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Mark-200"><a href="#Mark-200"><span class="linenos">200</span></a>    <span class="c1">#: Positional arguments of the mark decorator.</span>
</span><span id="Mark-201"><a href="#Mark-201"><span class="linenos">201</span></a>    <span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</span><span id="Mark-202"><a href="#Mark-202"><span class="linenos">202</span></a>    <span class="c1">#: Keyword arguments of the mark decorator.</span>
</span><span id="Mark-203"><a href="#Mark-203"><span class="linenos">203</span></a>    <span class="n">kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span><span id="Mark-204"><a href="#Mark-204"><span class="linenos">204</span></a>
</span><span id="Mark-205"><a href="#Mark-205"><span class="linenos">205</span></a>    <span class="c1">#: Source Mark for ids with parametrize Marks.</span>
</span><span id="Mark-206"><a href="#Mark-206"><span class="linenos">206</span></a>    <span class="n">_param_ids_from</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Mark-207"><a href="#Mark-207"><span class="linenos">207</span></a>    <span class="c1">#: Resolved/generated ids with parametrize Marks.</span>
</span><span id="Mark-208"><a href="#Mark-208"><span class="linenos">208</span></a>    <span class="n">_param_ids_generated</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
</span><span id="Mark-209"><a href="#Mark-209"><span class="linenos">209</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span>
</span><span id="Mark-210"><a href="#Mark-210"><span class="linenos">210</span></a>    <span class="p">)</span>
</span><span id="Mark-211"><a href="#Mark-211"><span class="linenos">211</span></a>
</span><span id="Mark-212"><a href="#Mark-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Mark-213"><a href="#Mark-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Mark-214"><a href="#Mark-214"><span class="linenos">214</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Mark-215"><a href="#Mark-215"><span class="linenos">215</span></a>        <span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
</span><span id="Mark-216"><a href="#Mark-216"><span class="linenos">216</span></a>        <span class="n">kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Mark-217"><a href="#Mark-217"><span class="linenos">217</span></a>        <span class="n">param_ids_from</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Mark-218"><a href="#Mark-218"><span class="linenos">218</span></a>        <span class="n">param_ids_generated</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Mark-219"><a href="#Mark-219"><span class="linenos">219</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Mark-220"><a href="#Mark-220"><span class="linenos">220</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Mark-221"><a href="#Mark-221"><span class="linenos">221</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Mark-222"><a href="#Mark-222"><span class="linenos">222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="Mark-223"><a href="#Mark-223"><span class="linenos">223</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Mark-224"><a href="#Mark-224"><span class="linenos">224</span></a>        <span class="c1"># Weirdness to bypass frozen=True.</span>
</span><span id="Mark-225"><a href="#Mark-225"><span class="linenos">225</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Mark-226"><a href="#Mark-226"><span class="linenos">226</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</span><span id="Mark-227"><a href="#Mark-227"><span class="linenos">227</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="Mark-228"><a href="#Mark-228"><span class="linenos">228</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_param_ids_from&quot;</span><span class="p">,</span> <span class="n">param_ids_from</span><span class="p">)</span>
</span><span id="Mark-229"><a href="#Mark-229"><span class="linenos">229</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_param_ids_generated&quot;</span><span class="p">,</span> <span class="n">param_ids_generated</span><span class="p">)</span>
</span><span id="Mark-230"><a href="#Mark-230"><span class="linenos">230</span></a>
</span><span id="Mark-231"><a href="#Mark-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_has_param_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Mark-232"><a href="#Mark-232"><span class="linenos">232</span></a>        <span class="k">return</span> <span class="s2">&quot;ids&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span>
</span><span id="Mark-233"><a href="#Mark-233"><span class="linenos">233</span></a>
</span><span id="Mark-234"><a href="#Mark-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">combined_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Mark</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mark</span><span class="p">:</span>
</span><span id="Mark-235"><a href="#Mark-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new Mark which is a combination of this</span>
</span><span id="Mark-236"><a href="#Mark-236"><span class="linenos">236</span></a><span class="sd">        Mark and another Mark.</span>
</span><span id="Mark-237"><a href="#Mark-237"><span class="linenos">237</span></a>
</span><span id="Mark-238"><a href="#Mark-238"><span class="linenos">238</span></a><span class="sd">        Combines by appending args and merging kwargs.</span>
</span><span id="Mark-239"><a href="#Mark-239"><span class="linenos">239</span></a>
</span><span id="Mark-240"><a href="#Mark-240"><span class="linenos">240</span></a><span class="sd">        :param Mark other: The mark to combine with.</span>
</span><span id="Mark-241"><a href="#Mark-241"><span class="linenos">241</span></a><span class="sd">        :rtype: Mark</span>
</span><span id="Mark-242"><a href="#Mark-242"><span class="linenos">242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Mark-243"><a href="#Mark-243"><span class="linenos">243</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
</span><span id="Mark-244"><a href="#Mark-244"><span class="linenos">244</span></a>
</span><span id="Mark-245"><a href="#Mark-245"><span class="linenos">245</span></a>        <span class="c1"># Remember source of ids with parametrize Marks.</span>
</span><span id="Mark-246"><a href="#Mark-246"><span class="linenos">246</span></a>        <span class="n">param_ids_from</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Mark-247"><a href="#Mark-247"><span class="linenos">247</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;parametrize&quot;</span><span class="p">:</span>
</span><span id="Mark-248"><a href="#Mark-248"><span class="linenos">248</span></a>            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">_has_param_ids</span><span class="p">():</span>
</span><span id="Mark-249"><a href="#Mark-249"><span class="linenos">249</span></a>                <span class="n">param_ids_from</span> <span class="o">=</span> <span class="n">other</span>
</span><span id="Mark-250"><a href="#Mark-250"><span class="linenos">250</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_param_ids</span><span class="p">():</span>
</span><span id="Mark-251"><a href="#Mark-251"><span class="linenos">251</span></a>                <span class="n">param_ids_from</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="Mark-252"><a href="#Mark-252"><span class="linenos">252</span></a>
</span><span id="Mark-253"><a href="#Mark-253"><span class="linenos">253</span></a>        <span class="k">return</span> <span class="n">Mark</span><span class="p">(</span>
</span><span id="Mark-254"><a href="#Mark-254"><span class="linenos">254</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="Mark-255"><a href="#Mark-255"><span class="linenos">255</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
</span><span id="Mark-256"><a href="#Mark-256"><span class="linenos">256</span></a>            <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">other</span><span class="o">.</span><span class="n">kwargs</span><span class="p">),</span>
</span><span id="Mark-257"><a href="#Mark-257"><span class="linenos">257</span></a>            <span class="n">param_ids_from</span><span class="o">=</span><span class="n">param_ids_from</span><span class="p">,</span>
</span><span id="Mark-258"><a href="#Mark-258"><span class="linenos">258</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Mark-259"><a href="#Mark-259"><span class="linenos">259</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A pytest mark.</p>
</div>


                            <div id="Mark.__init__" class="classattr">
                                        <input id="Mark.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Mark</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>,</span><span class="param">	<span class="n">kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">param_ids_from</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">param_ids_generated</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Mark.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Mark.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Mark.__init__-212"><a href="#Mark.__init__-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Mark.__init__-213"><a href="#Mark.__init__-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Mark.__init__-214"><a href="#Mark.__init__-214"><span class="linenos">214</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Mark.__init__-215"><a href="#Mark.__init__-215"><span class="linenos">215</span></a>        <span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
</span><span id="Mark.__init__-216"><a href="#Mark.__init__-216"><span class="linenos">216</span></a>        <span class="n">kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Mark.__init__-217"><a href="#Mark.__init__-217"><span class="linenos">217</span></a>        <span class="n">param_ids_from</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Mark.__init__-218"><a href="#Mark.__init__-218"><span class="linenos">218</span></a>        <span class="n">param_ids_generated</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Mark.__init__-219"><a href="#Mark.__init__-219"><span class="linenos">219</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Mark.__init__-220"><a href="#Mark.__init__-220"><span class="linenos">220</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Mark.__init__-221"><a href="#Mark.__init__-221"><span class="linenos">221</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Mark.__init__-222"><a href="#Mark.__init__-222"><span class="linenos">222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="Mark.__init__-223"><a href="#Mark.__init__-223"><span class="linenos">223</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Mark.__init__-224"><a href="#Mark.__init__-224"><span class="linenos">224</span></a>        <span class="c1"># Weirdness to bypass frozen=True.</span>
</span><span id="Mark.__init__-225"><a href="#Mark.__init__-225"><span class="linenos">225</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Mark.__init__-226"><a href="#Mark.__init__-226"><span class="linenos">226</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</span><span id="Mark.__init__-227"><a href="#Mark.__init__-227"><span class="linenos">227</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;kwargs&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="Mark.__init__-228"><a href="#Mark.__init__-228"><span class="linenos">228</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_param_ids_from&quot;</span><span class="p">,</span> <span class="n">param_ids_from</span><span class="p">)</span>
</span><span id="Mark.__init__-229"><a href="#Mark.__init__-229"><span class="linenos">229</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_param_ids_generated&quot;</span><span class="p">,</span> <span class="n">param_ids_generated</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="Mark.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Mark.name"></a>
    
    

                            </div>
                            <div id="Mark.args" class="classattr">
                                <div class="attr variable">
            <span class="name">args</span><span class="annotation">: tuple[typing.Any, ...]</span>

        
    </div>
    <a class="headerlink" href="#Mark.args"></a>
    
    

                            </div>
                            <div id="Mark.kwargs" class="classattr">
                                <div class="attr variable">
            <span class="name">kwargs</span><span class="annotation">: Mapping[str, Any]</span>

        
    </div>
    <a class="headerlink" href="#Mark.kwargs"></a>
    
    

                            </div>
                            <div id="Mark.combined_with" class="classattr">
                                        <input id="Mark.combined_with-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">combined_with</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">other</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">Mark</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">Mark</span>:</span></span>

                <label class="view-source-button" for="Mark.combined_with-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Mark.combined_with"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Mark.combined_with-234"><a href="#Mark.combined_with-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">combined_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Mark</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mark</span><span class="p">:</span>
</span><span id="Mark.combined_with-235"><a href="#Mark.combined_with-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new Mark which is a combination of this</span>
</span><span id="Mark.combined_with-236"><a href="#Mark.combined_with-236"><span class="linenos">236</span></a><span class="sd">        Mark and another Mark.</span>
</span><span id="Mark.combined_with-237"><a href="#Mark.combined_with-237"><span class="linenos">237</span></a>
</span><span id="Mark.combined_with-238"><a href="#Mark.combined_with-238"><span class="linenos">238</span></a><span class="sd">        Combines by appending args and merging kwargs.</span>
</span><span id="Mark.combined_with-239"><a href="#Mark.combined_with-239"><span class="linenos">239</span></a>
</span><span id="Mark.combined_with-240"><a href="#Mark.combined_with-240"><span class="linenos">240</span></a><span class="sd">        :param Mark other: The mark to combine with.</span>
</span><span id="Mark.combined_with-241"><a href="#Mark.combined_with-241"><span class="linenos">241</span></a><span class="sd">        :rtype: Mark</span>
</span><span id="Mark.combined_with-242"><a href="#Mark.combined_with-242"><span class="linenos">242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Mark.combined_with-243"><a href="#Mark.combined_with-243"><span class="linenos">243</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
</span><span id="Mark.combined_with-244"><a href="#Mark.combined_with-244"><span class="linenos">244</span></a>
</span><span id="Mark.combined_with-245"><a href="#Mark.combined_with-245"><span class="linenos">245</span></a>        <span class="c1"># Remember source of ids with parametrize Marks.</span>
</span><span id="Mark.combined_with-246"><a href="#Mark.combined_with-246"><span class="linenos">246</span></a>        <span class="n">param_ids_from</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Mark.combined_with-247"><a href="#Mark.combined_with-247"><span class="linenos">247</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;parametrize&quot;</span><span class="p">:</span>
</span><span id="Mark.combined_with-248"><a href="#Mark.combined_with-248"><span class="linenos">248</span></a>            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">_has_param_ids</span><span class="p">():</span>
</span><span id="Mark.combined_with-249"><a href="#Mark.combined_with-249"><span class="linenos">249</span></a>                <span class="n">param_ids_from</span> <span class="o">=</span> <span class="n">other</span>
</span><span id="Mark.combined_with-250"><a href="#Mark.combined_with-250"><span class="linenos">250</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_param_ids</span><span class="p">():</span>
</span><span id="Mark.combined_with-251"><a href="#Mark.combined_with-251"><span class="linenos">251</span></a>                <span class="n">param_ids_from</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="Mark.combined_with-252"><a href="#Mark.combined_with-252"><span class="linenos">252</span></a>
</span><span id="Mark.combined_with-253"><a href="#Mark.combined_with-253"><span class="linenos">253</span></a>        <span class="k">return</span> <span class="n">Mark</span><span class="p">(</span>
</span><span id="Mark.combined_with-254"><a href="#Mark.combined_with-254"><span class="linenos">254</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="Mark.combined_with-255"><a href="#Mark.combined_with-255"><span class="linenos">255</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
</span><span id="Mark.combined_with-256"><a href="#Mark.combined_with-256"><span class="linenos">256</span></a>            <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">other</span><span class="o">.</span><span class="n">kwargs</span><span class="p">),</span>
</span><span id="Mark.combined_with-257"><a href="#Mark.combined_with-257"><span class="linenos">257</span></a>            <span class="n">param_ids_from</span><span class="o">=</span><span class="n">param_ids_from</span><span class="p">,</span>
</span><span id="Mark.combined_with-258"><a href="#Mark.combined_with-258"><span class="linenos">258</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Mark.combined_with-259"><a href="#Mark.combined_with-259"><span class="linenos">259</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return a new Mark which is a combination of this
Mark and another Mark.</p>

<p>Combines by appending args and merging kwargs.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>Mark other</strong>:  The mark to combine with.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="MarkDecorator">
                            <input id="MarkDecorator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">MarkDecorator</span>:

                <label class="view-source-button" for="MarkDecorator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator-268"><a href="#MarkDecorator-268"><span class="linenos">268</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="MarkDecorator-269"><a href="#MarkDecorator-269"><span class="linenos">269</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MarkDecorator</span><span class="p">:</span>
</span><span id="MarkDecorator-270"><a href="#MarkDecorator-270"><span class="linenos">270</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A decorator for applying a mark on test functions and classes.</span>
</span><span id="MarkDecorator-271"><a href="#MarkDecorator-271"><span class="linenos">271</span></a>
</span><span id="MarkDecorator-272"><a href="#MarkDecorator-272"><span class="linenos">272</span></a><span class="sd">    ``MarkDecorators`` are created with ``pytest.mark``::</span>
</span><span id="MarkDecorator-273"><a href="#MarkDecorator-273"><span class="linenos">273</span></a>
</span><span id="MarkDecorator-274"><a href="#MarkDecorator-274"><span class="linenos">274</span></a><span class="sd">        mark1 = pytest.mark.NAME  # Simple MarkDecorator</span>
</span><span id="MarkDecorator-275"><a href="#MarkDecorator-275"><span class="linenos">275</span></a><span class="sd">        mark2 = pytest.mark.NAME(name1=value)  # Parametrized MarkDecorator</span>
</span><span id="MarkDecorator-276"><a href="#MarkDecorator-276"><span class="linenos">276</span></a>
</span><span id="MarkDecorator-277"><a href="#MarkDecorator-277"><span class="linenos">277</span></a><span class="sd">    and can then be applied as decorators to test functions::</span>
</span><span id="MarkDecorator-278"><a href="#MarkDecorator-278"><span class="linenos">278</span></a>
</span><span id="MarkDecorator-279"><a href="#MarkDecorator-279"><span class="linenos">279</span></a><span class="sd">        @mark2</span>
</span><span id="MarkDecorator-280"><a href="#MarkDecorator-280"><span class="linenos">280</span></a><span class="sd">        def test_function():</span>
</span><span id="MarkDecorator-281"><a href="#MarkDecorator-281"><span class="linenos">281</span></a><span class="sd">            pass</span>
</span><span id="MarkDecorator-282"><a href="#MarkDecorator-282"><span class="linenos">282</span></a>
</span><span id="MarkDecorator-283"><a href="#MarkDecorator-283"><span class="linenos">283</span></a><span class="sd">    When a ``MarkDecorator`` is called, it does the following:</span>
</span><span id="MarkDecorator-284"><a href="#MarkDecorator-284"><span class="linenos">284</span></a>
</span><span id="MarkDecorator-285"><a href="#MarkDecorator-285"><span class="linenos">285</span></a><span class="sd">    1. If called with a single class as its only positional argument and no</span>
</span><span id="MarkDecorator-286"><a href="#MarkDecorator-286"><span class="linenos">286</span></a><span class="sd">       additional keyword arguments, it attaches the mark to the class so it</span>
</span><span id="MarkDecorator-287"><a href="#MarkDecorator-287"><span class="linenos">287</span></a><span class="sd">       gets applied automatically to all test cases found in that class.</span>
</span><span id="MarkDecorator-288"><a href="#MarkDecorator-288"><span class="linenos">288</span></a>
</span><span id="MarkDecorator-289"><a href="#MarkDecorator-289"><span class="linenos">289</span></a><span class="sd">    2. If called with a single function as its only positional argument and</span>
</span><span id="MarkDecorator-290"><a href="#MarkDecorator-290"><span class="linenos">290</span></a><span class="sd">       no additional keyword arguments, it attaches the mark to the function,</span>
</span><span id="MarkDecorator-291"><a href="#MarkDecorator-291"><span class="linenos">291</span></a><span class="sd">       containing all the arguments already stored internally in the</span>
</span><span id="MarkDecorator-292"><a href="#MarkDecorator-292"><span class="linenos">292</span></a><span class="sd">       ``MarkDecorator``.</span>
</span><span id="MarkDecorator-293"><a href="#MarkDecorator-293"><span class="linenos">293</span></a>
</span><span id="MarkDecorator-294"><a href="#MarkDecorator-294"><span class="linenos">294</span></a><span class="sd">    3. When called in any other case, it returns a new ``MarkDecorator``</span>
</span><span id="MarkDecorator-295"><a href="#MarkDecorator-295"><span class="linenos">295</span></a><span class="sd">       instance with the original ``MarkDecorator``&#39;s content updated with</span>
</span><span id="MarkDecorator-296"><a href="#MarkDecorator-296"><span class="linenos">296</span></a><span class="sd">       the arguments passed to this call.</span>
</span><span id="MarkDecorator-297"><a href="#MarkDecorator-297"><span class="linenos">297</span></a>
</span><span id="MarkDecorator-298"><a href="#MarkDecorator-298"><span class="linenos">298</span></a><span class="sd">    Note: The rules above prevent a ``MarkDecorator`` from storing only a</span>
</span><span id="MarkDecorator-299"><a href="#MarkDecorator-299"><span class="linenos">299</span></a><span class="sd">    single function or class reference as its positional argument with no</span>
</span><span id="MarkDecorator-300"><a href="#MarkDecorator-300"><span class="linenos">300</span></a><span class="sd">    additional keyword or positional arguments. You can work around this by</span>
</span><span id="MarkDecorator-301"><a href="#MarkDecorator-301"><span class="linenos">301</span></a><span class="sd">    using `with_args()`.</span>
</span><span id="MarkDecorator-302"><a href="#MarkDecorator-302"><span class="linenos">302</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MarkDecorator-303"><a href="#MarkDecorator-303"><span class="linenos">303</span></a>
</span><span id="MarkDecorator-304"><a href="#MarkDecorator-304"><span class="linenos">304</span></a>    <span class="n">mark</span><span class="p">:</span> <span class="n">Mark</span>
</span><span id="MarkDecorator-305"><a href="#MarkDecorator-305"><span class="linenos">305</span></a>
</span><span id="MarkDecorator-306"><a href="#MarkDecorator-306"><span class="linenos">306</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark</span><span class="p">:</span> <span class="n">Mark</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MarkDecorator-307"><a href="#MarkDecorator-307"><span class="linenos">307</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="MarkDecorator-308"><a href="#MarkDecorator-308"><span class="linenos">308</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="MarkDecorator-309"><a href="#MarkDecorator-309"><span class="linenos">309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mark</span> <span class="o">=</span> <span class="n">mark</span>
</span><span id="MarkDecorator-310"><a href="#MarkDecorator-310"><span class="linenos">310</span></a>
</span><span id="MarkDecorator-311"><a href="#MarkDecorator-311"><span class="linenos">311</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator-312"><a href="#MarkDecorator-312"><span class="linenos">312</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="MarkDecorator-313"><a href="#MarkDecorator-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for mark.name.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator-314"><a href="#MarkDecorator-314"><span class="linenos">314</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">name</span>
</span><span id="MarkDecorator-315"><a href="#MarkDecorator-315"><span class="linenos">315</span></a>
</span><span id="MarkDecorator-316"><a href="#MarkDecorator-316"><span class="linenos">316</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator-317"><a href="#MarkDecorator-317"><span class="linenos">317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="MarkDecorator-318"><a href="#MarkDecorator-318"><span class="linenos">318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for mark.args.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator-319"><a href="#MarkDecorator-319"><span class="linenos">319</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">args</span>
</span><span id="MarkDecorator-320"><a href="#MarkDecorator-320"><span class="linenos">320</span></a>
</span><span id="MarkDecorator-321"><a href="#MarkDecorator-321"><span class="linenos">321</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator-322"><a href="#MarkDecorator-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="MarkDecorator-323"><a href="#MarkDecorator-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for mark.kwargs.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator-324"><a href="#MarkDecorator-324"><span class="linenos">324</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">kwargs</span>
</span><span id="MarkDecorator-325"><a href="#MarkDecorator-325"><span class="linenos">325</span></a>
</span><span id="MarkDecorator-326"><a href="#MarkDecorator-326"><span class="linenos">326</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator-327"><a href="#MarkDecorator-327"><span class="linenos">327</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">markname</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="MarkDecorator-328"><a href="#MarkDecorator-328"><span class="linenos">328</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="MarkDecorator-329"><a href="#MarkDecorator-329"><span class="linenos">329</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>  <span class="c1"># for backward-compat (2.4.1 had this attr)</span>
</span><span id="MarkDecorator-330"><a href="#MarkDecorator-330"><span class="linenos">330</span></a>
</span><span id="MarkDecorator-331"><a href="#MarkDecorator-331"><span class="linenos">331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">with_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MarkDecorator</span><span class="p">:</span>
</span><span id="MarkDecorator-332"><a href="#MarkDecorator-332"><span class="linenos">332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a MarkDecorator with extra arguments added.</span>
</span><span id="MarkDecorator-333"><a href="#MarkDecorator-333"><span class="linenos">333</span></a>
</span><span id="MarkDecorator-334"><a href="#MarkDecorator-334"><span class="linenos">334</span></a><span class="sd">        Unlike calling the MarkDecorator, with_args() can be used even</span>
</span><span id="MarkDecorator-335"><a href="#MarkDecorator-335"><span class="linenos">335</span></a><span class="sd">        if the sole argument is a callable/class.</span>
</span><span id="MarkDecorator-336"><a href="#MarkDecorator-336"><span class="linenos">336</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MarkDecorator-337"><a href="#MarkDecorator-337"><span class="linenos">337</span></a>        <span class="n">mark</span> <span class="o">=</span> <span class="n">Mark</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="MarkDecorator-338"><a href="#MarkDecorator-338"><span class="linenos">338</span></a>        <span class="k">return</span> <span class="n">MarkDecorator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">combined_with</span><span class="p">(</span><span class="n">mark</span><span class="p">),</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="MarkDecorator-339"><a href="#MarkDecorator-339"><span class="linenos">339</span></a>
</span><span id="MarkDecorator-340"><a href="#MarkDecorator-340"><span class="linenos">340</span></a>    <span class="c1"># Type ignored because the overloads overlap with an incompatible</span>
</span><span id="MarkDecorator-341"><a href="#MarkDecorator-341"><span class="linenos">341</span></a>    <span class="c1"># return type. Not much we can do about that. Thankfully mypy picks</span>
</span><span id="MarkDecorator-342"><a href="#MarkDecorator-342"><span class="linenos">342</span></a>    <span class="c1"># the first match so it works out even if we break the rules.</span>
</span><span id="MarkDecorator-343"><a href="#MarkDecorator-343"><span class="linenos">343</span></a>    <span class="nd">@overload</span>
</span><span id="MarkDecorator-344"><a href="#MarkDecorator-344"><span class="linenos">344</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="n">Markable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Markable</span><span class="p">:</span>  <span class="c1"># type: ignore[overload-overlap]</span>
</span><span id="MarkDecorator-345"><a href="#MarkDecorator-345"><span class="linenos">345</span></a>        <span class="k">pass</span>
</span><span id="MarkDecorator-346"><a href="#MarkDecorator-346"><span class="linenos">346</span></a>
</span><span id="MarkDecorator-347"><a href="#MarkDecorator-347"><span class="linenos">347</span></a>    <span class="nd">@overload</span>
</span><span id="MarkDecorator-348"><a href="#MarkDecorator-348"><span class="linenos">348</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MarkDecorator</span><span class="p">:</span>
</span><span id="MarkDecorator-349"><a href="#MarkDecorator-349"><span class="linenos">349</span></a>        <span class="k">pass</span>
</span><span id="MarkDecorator-350"><a href="#MarkDecorator-350"><span class="linenos">350</span></a>
</span><span id="MarkDecorator-351"><a href="#MarkDecorator-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">):</span>
</span><span id="MarkDecorator-352"><a href="#MarkDecorator-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call the MarkDecorator.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator-353"><a href="#MarkDecorator-353"><span class="linenos">353</span></a>        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
</span><span id="MarkDecorator-354"><a href="#MarkDecorator-354"><span class="linenos">354</span></a>            <span class="n">func</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MarkDecorator-355"><a href="#MarkDecorator-355"><span class="linenos">355</span></a>            <span class="n">is_class</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="MarkDecorator-356"><a href="#MarkDecorator-356"><span class="linenos">356</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="p">(</span><span class="n">istestfunc</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="ow">or</span> <span class="n">is_class</span><span class="p">):</span>
</span><span id="MarkDecorator-357"><a href="#MarkDecorator-357"><span class="linenos">357</span></a>                <span class="n">store_mark</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="MarkDecorator-358"><a href="#MarkDecorator-358"><span class="linenos">358</span></a>                <span class="k">return</span> <span class="n">func</span>
</span><span id="MarkDecorator-359"><a href="#MarkDecorator-359"><span class="linenos">359</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A decorator for applying a mark on test functions and classes.</p>

<p><code>MarkDecorators</code> are created with <code><a href="#mark">pytest.mark</a></code>::</p>

<pre><code>mark1 = pytest.mark.NAME  # Simple MarkDecorator
mark2 = pytest.mark.NAME(name1=value)  # Parametrized MarkDecorator
</code></pre>

<p>and can then be applied as decorators to test functions::</p>

<pre><code>@mark2
def test_function():
    pass
</code></pre>

<p>When a <code><a href="#MarkDecorator">MarkDecorator</a></code> is called, it does the following:</p>

<ol>
<li><p>If called with a single class as its only positional argument and no
additional keyword arguments, it attaches the mark to the class so it
gets applied automatically to all test cases found in that class.</p></li>
<li><p>If called with a single function as its only positional argument and
no additional keyword arguments, it attaches the mark to the function,
containing all the arguments already stored internally in the
<code><a href="#MarkDecorator">MarkDecorator</a></code>.</p></li>
<li><p>When called in any other case, it returns a new <code><a href="#MarkDecorator">MarkDecorator</a></code>
instance with the original <code><a href="#MarkDecorator">MarkDecorator</a></code>'s content updated with
the arguments passed to this call.</p></li>
</ol>

<p>Note: The rules above prevent a <code><a href="#MarkDecorator">MarkDecorator</a></code> from storing only a
single function or class reference as its positional argument with no
additional keyword or positional arguments. You can work around this by
using <code><a href="#MarkDecorator.with_args">with_args()</a></code>.</p>
</div>


                            <div id="MarkDecorator.__init__" class="classattr">
                                        <input id="MarkDecorator.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MarkDecorator</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">mark</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">Mark</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="MarkDecorator.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator.__init__-306"><a href="#MarkDecorator.__init__-306"><span class="linenos">306</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark</span><span class="p">:</span> <span class="n">Mark</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MarkDecorator.__init__-307"><a href="#MarkDecorator.__init__-307"><span class="linenos">307</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="MarkDecorator.__init__-308"><a href="#MarkDecorator.__init__-308"><span class="linenos">308</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="MarkDecorator.__init__-309"><a href="#MarkDecorator.__init__-309"><span class="linenos">309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mark</span> <span class="o">=</span> <span class="n">mark</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="MarkDecorator.mark" class="classattr">
                                <div class="attr variable">
            <span class="name">mark</span><span class="annotation">: _pytest.mark.structures.Mark</span>

        
    </div>
    <a class="headerlink" href="#MarkDecorator.mark"></a>
    
    

                            </div>
                            <div id="MarkDecorator.name" class="classattr">
                                        <input id="MarkDecorator.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="MarkDecorator.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator.name-311"><a href="#MarkDecorator.name-311"><span class="linenos">311</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator.name-312"><a href="#MarkDecorator.name-312"><span class="linenos">312</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="MarkDecorator.name-313"><a href="#MarkDecorator.name-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for mark.name.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator.name-314"><a href="#MarkDecorator.name-314"><span class="linenos">314</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


            <div class="docstring"><p>Alias for mark.name.</p>
</div>


                            </div>
                            <div id="MarkDecorator.args" class="classattr">
                                        <input id="MarkDecorator.args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">args</span><span class="annotation">: tuple[typing.Any, ...]</span>

                <label class="view-source-button" for="MarkDecorator.args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator.args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator.args-316"><a href="#MarkDecorator.args-316"><span class="linenos">316</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator.args-317"><a href="#MarkDecorator.args-317"><span class="linenos">317</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="MarkDecorator.args-318"><a href="#MarkDecorator.args-318"><span class="linenos">318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for mark.args.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator.args-319"><a href="#MarkDecorator.args-319"><span class="linenos">319</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">args</span>
</span></pre></div>


            <div class="docstring"><p>Alias for mark.args.</p>
</div>


                            </div>
                            <div id="MarkDecorator.kwargs" class="classattr">
                                        <input id="MarkDecorator.kwargs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">kwargs</span><span class="annotation">: Mapping[str, Any]</span>

                <label class="view-source-button" for="MarkDecorator.kwargs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator.kwargs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator.kwargs-321"><a href="#MarkDecorator.kwargs-321"><span class="linenos">321</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator.kwargs-322"><a href="#MarkDecorator.kwargs-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="MarkDecorator.kwargs-323"><a href="#MarkDecorator.kwargs-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for mark.kwargs.&quot;&quot;&quot;</span>
</span><span id="MarkDecorator.kwargs-324"><a href="#MarkDecorator.kwargs-324"><span class="linenos">324</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">kwargs</span>
</span></pre></div>


            <div class="docstring"><p>Alias for mark.kwargs.</p>
</div>


                            </div>
                            <div id="MarkDecorator.markname" class="classattr">
                                        <input id="MarkDecorator.markname-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">markname</span><span class="annotation">: str</span>

                <label class="view-source-button" for="MarkDecorator.markname-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator.markname"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator.markname-326"><a href="#MarkDecorator.markname-326"><span class="linenos">326</span></a>    <span class="nd">@property</span>
</span><span id="MarkDecorator.markname-327"><a href="#MarkDecorator.markname-327"><span class="linenos">327</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">markname</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="MarkDecorator.markname-328"><a href="#MarkDecorator.markname-328"><span class="linenos">328</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="MarkDecorator.markname-329"><a href="#MarkDecorator.markname-329"><span class="linenos">329</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>  <span class="c1"># for backward-compat (2.4.1 had this attr)</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="MarkDecorator.with_args" class="classattr">
                                        <input id="MarkDecorator.with_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">with_args</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">MarkDecorator</span>:</span></span>

                <label class="view-source-button" for="MarkDecorator.with_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkDecorator.with_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkDecorator.with_args-331"><a href="#MarkDecorator.with_args-331"><span class="linenos">331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">with_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MarkDecorator</span><span class="p">:</span>
</span><span id="MarkDecorator.with_args-332"><a href="#MarkDecorator.with_args-332"><span class="linenos">332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a MarkDecorator with extra arguments added.</span>
</span><span id="MarkDecorator.with_args-333"><a href="#MarkDecorator.with_args-333"><span class="linenos">333</span></a>
</span><span id="MarkDecorator.with_args-334"><a href="#MarkDecorator.with_args-334"><span class="linenos">334</span></a><span class="sd">        Unlike calling the MarkDecorator, with_args() can be used even</span>
</span><span id="MarkDecorator.with_args-335"><a href="#MarkDecorator.with_args-335"><span class="linenos">335</span></a><span class="sd">        if the sole argument is a callable/class.</span>
</span><span id="MarkDecorator.with_args-336"><a href="#MarkDecorator.with_args-336"><span class="linenos">336</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MarkDecorator.with_args-337"><a href="#MarkDecorator.with_args-337"><span class="linenos">337</span></a>        <span class="n">mark</span> <span class="o">=</span> <span class="n">Mark</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="MarkDecorator.with_args-338"><a href="#MarkDecorator.with_args-338"><span class="linenos">338</span></a>        <span class="k">return</span> <span class="n">MarkDecorator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">combined_with</span><span class="p">(</span><span class="n">mark</span><span class="p">),</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return a MarkDecorator with extra arguments added.</p>

<p>Unlike calling the MarkDecorator, with_args() can be used even
if the sole argument is a callable/class.</p>
</div>


                            </div>
                </section>
                <section id="MarkGenerator">
                            <input id="MarkGenerator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">MarkGenerator</span>:

                <label class="view-source-button" for="MarkGenerator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkGenerator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkGenerator-485"><a href="#MarkGenerator-485"><span class="linenos">485</span></a><span class="nd">@final</span>
</span><span id="MarkGenerator-486"><a href="#MarkGenerator-486"><span class="linenos">486</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MarkGenerator</span><span class="p">:</span>
</span><span id="MarkGenerator-487"><a href="#MarkGenerator-487"><span class="linenos">487</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for :class:`MarkDecorator` objects - exposed as</span>
</span><span id="MarkGenerator-488"><a href="#MarkGenerator-488"><span class="linenos">488</span></a><span class="sd">    a ``pytest.mark`` singleton instance.</span>
</span><span id="MarkGenerator-489"><a href="#MarkGenerator-489"><span class="linenos">489</span></a>
</span><span id="MarkGenerator-490"><a href="#MarkGenerator-490"><span class="linenos">490</span></a><span class="sd">    Example::</span>
</span><span id="MarkGenerator-491"><a href="#MarkGenerator-491"><span class="linenos">491</span></a>
</span><span id="MarkGenerator-492"><a href="#MarkGenerator-492"><span class="linenos">492</span></a><span class="sd">         import pytest</span>
</span><span id="MarkGenerator-493"><a href="#MarkGenerator-493"><span class="linenos">493</span></a>
</span><span id="MarkGenerator-494"><a href="#MarkGenerator-494"><span class="linenos">494</span></a>
</span><span id="MarkGenerator-495"><a href="#MarkGenerator-495"><span class="linenos">495</span></a><span class="sd">         @pytest.mark.slowtest</span>
</span><span id="MarkGenerator-496"><a href="#MarkGenerator-496"><span class="linenos">496</span></a><span class="sd">         def test_function():</span>
</span><span id="MarkGenerator-497"><a href="#MarkGenerator-497"><span class="linenos">497</span></a><span class="sd">             pass</span>
</span><span id="MarkGenerator-498"><a href="#MarkGenerator-498"><span class="linenos">498</span></a>
</span><span id="MarkGenerator-499"><a href="#MarkGenerator-499"><span class="linenos">499</span></a><span class="sd">    applies a &#39;slowtest&#39; :class:`Mark` on ``test_function``.</span>
</span><span id="MarkGenerator-500"><a href="#MarkGenerator-500"><span class="linenos">500</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MarkGenerator-501"><a href="#MarkGenerator-501"><span class="linenos">501</span></a>
</span><span id="MarkGenerator-502"><a href="#MarkGenerator-502"><span class="linenos">502</span></a>    <span class="c1"># See TYPE_CHECKING above.</span>
</span><span id="MarkGenerator-503"><a href="#MarkGenerator-503"><span class="linenos">503</span></a>    <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
</span><span id="MarkGenerator-504"><a href="#MarkGenerator-504"><span class="linenos">504</span></a>        <span class="n">skip</span><span class="p">:</span> <span class="n">_SkipMarkDecorator</span>
</span><span id="MarkGenerator-505"><a href="#MarkGenerator-505"><span class="linenos">505</span></a>        <span class="n">skipif</span><span class="p">:</span> <span class="n">_SkipifMarkDecorator</span>
</span><span id="MarkGenerator-506"><a href="#MarkGenerator-506"><span class="linenos">506</span></a>        <span class="n">xfail</span><span class="p">:</span> <span class="n">_XfailMarkDecorator</span>
</span><span id="MarkGenerator-507"><a href="#MarkGenerator-507"><span class="linenos">507</span></a>        <span class="n">parametrize</span><span class="p">:</span> <span class="n">_ParametrizeMarkDecorator</span>
</span><span id="MarkGenerator-508"><a href="#MarkGenerator-508"><span class="linenos">508</span></a>        <span class="n">usefixtures</span><span class="p">:</span> <span class="n">_UsefixturesMarkDecorator</span>
</span><span id="MarkGenerator-509"><a href="#MarkGenerator-509"><span class="linenos">509</span></a>        <span class="n">filterwarnings</span><span class="p">:</span> <span class="n">_FilterwarningsMarkDecorator</span>
</span><span id="MarkGenerator-510"><a href="#MarkGenerator-510"><span class="linenos">510</span></a>
</span><span id="MarkGenerator-511"><a href="#MarkGenerator-511"><span class="linenos">511</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MarkGenerator-512"><a href="#MarkGenerator-512"><span class="linenos">512</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="MarkGenerator-513"><a href="#MarkGenerator-513"><span class="linenos">513</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MarkGenerator-514"><a href="#MarkGenerator-514"><span class="linenos">514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="MarkGenerator-515"><a href="#MarkGenerator-515"><span class="linenos">515</span></a>
</span><span id="MarkGenerator-516"><a href="#MarkGenerator-516"><span class="linenos">516</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MarkDecorator</span><span class="p">:</span>
</span><span id="MarkGenerator-517"><a href="#MarkGenerator-517"><span class="linenos">517</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a new :class:`MarkDecorator` with the given name.&quot;&quot;&quot;</span>
</span><span id="MarkGenerator-518"><a href="#MarkGenerator-518"><span class="linenos">518</span></a>        <span class="k">if</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;_&quot;</span><span class="p">:</span>
</span><span id="MarkGenerator-519"><a href="#MarkGenerator-519"><span class="linenos">519</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Marker name must NOT start with underscore&quot;</span><span class="p">)</span>
</span><span id="MarkGenerator-520"><a href="#MarkGenerator-520"><span class="linenos">520</span></a>
</span><span id="MarkGenerator-521"><a href="#MarkGenerator-521"><span class="linenos">521</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MarkGenerator-522"><a href="#MarkGenerator-522"><span class="linenos">522</span></a>            <span class="c1"># We store a set of markers as a performance optimisation - if a mark</span>
</span><span id="MarkGenerator-523"><a href="#MarkGenerator-523"><span class="linenos">523</span></a>            <span class="c1"># name is in the set we definitely know it, but a mark may be known and</span>
</span><span id="MarkGenerator-524"><a href="#MarkGenerator-524"><span class="linenos">524</span></a>            <span class="c1"># not in the set.  We therefore start by updating the set!</span>
</span><span id="MarkGenerator-525"><a href="#MarkGenerator-525"><span class="linenos">525</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="p">:</span>
</span><span id="MarkGenerator-526"><a href="#MarkGenerator-526"><span class="linenos">526</span></a>                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;markers&quot;</span><span class="p">):</span>
</span><span id="MarkGenerator-527"><a href="#MarkGenerator-527"><span class="linenos">527</span></a>                    <span class="c1"># example lines: &quot;skipif(condition): skip the given test if...&quot;</span>
</span><span id="MarkGenerator-528"><a href="#MarkGenerator-528"><span class="linenos">528</span></a>                    <span class="c1"># or &quot;hypothesis: tests which use Hypothesis&quot;, so to get the</span>
</span><span id="MarkGenerator-529"><a href="#MarkGenerator-529"><span class="linenos">529</span></a>                    <span class="c1"># marker name we split on both `:` and `(`.</span>
</span><span id="MarkGenerator-530"><a href="#MarkGenerator-530"><span class="linenos">530</span></a>                    <span class="n">marker</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="MarkGenerator-531"><a href="#MarkGenerator-531"><span class="linenos">531</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</span><span id="MarkGenerator-532"><a href="#MarkGenerator-532"><span class="linenos">532</span></a>
</span><span id="MarkGenerator-533"><a href="#MarkGenerator-533"><span class="linenos">533</span></a>            <span class="c1"># If the name is not in the set of known marks after updating,</span>
</span><span id="MarkGenerator-534"><a href="#MarkGenerator-534"><span class="linenos">534</span></a>            <span class="c1"># then it really is time to issue a warning or an error.</span>
</span><span id="MarkGenerator-535"><a href="#MarkGenerator-535"><span class="linenos">535</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="p">:</span>
</span><span id="MarkGenerator-536"><a href="#MarkGenerator-536"><span class="linenos">536</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">strict_markers</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
</span><span id="MarkGenerator-537"><a href="#MarkGenerator-537"><span class="linenos">537</span></a>                    <span class="n">fail</span><span class="p">(</span>
</span><span id="MarkGenerator-538"><a href="#MarkGenerator-538"><span class="linenos">538</span></a>                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2"> not found in `markers` configuration option&quot;</span><span class="p">,</span>
</span><span id="MarkGenerator-539"><a href="#MarkGenerator-539"><span class="linenos">539</span></a>                        <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="MarkGenerator-540"><a href="#MarkGenerator-540"><span class="linenos">540</span></a>                    <span class="p">)</span>
</span><span id="MarkGenerator-541"><a href="#MarkGenerator-541"><span class="linenos">541</span></a>
</span><span id="MarkGenerator-542"><a href="#MarkGenerator-542"><span class="linenos">542</span></a>                <span class="c1"># Raise a specific error for common misspellings of &quot;parametrize&quot;.</span>
</span><span id="MarkGenerator-543"><a href="#MarkGenerator-543"><span class="linenos">543</span></a>                <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;parameterize&quot;</span><span class="p">,</span> <span class="s2">&quot;parametrise&quot;</span><span class="p">,</span> <span class="s2">&quot;parameterise&quot;</span><span class="p">]:</span>
</span><span id="MarkGenerator-544"><a href="#MarkGenerator-544"><span class="linenos">544</span></a>                    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="MarkGenerator-545"><a href="#MarkGenerator-545"><span class="linenos">545</span></a>                    <span class="n">fail</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; mark, did you mean &#39;parametrize&#39;?&quot;</span><span class="p">)</span>
</span><span id="MarkGenerator-546"><a href="#MarkGenerator-546"><span class="linenos">546</span></a>
</span><span id="MarkGenerator-547"><a href="#MarkGenerator-547"><span class="linenos">547</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="MarkGenerator-548"><a href="#MarkGenerator-548"><span class="linenos">548</span></a>                    <span class="sa">f</span><span class="s2">&quot;Unknown pytest.mark.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> - is this a typo?  You can register &quot;</span>
</span><span id="MarkGenerator-549"><a href="#MarkGenerator-549"><span class="linenos">549</span></a>                    <span class="s2">&quot;custom marks to avoid this warning - for details, see &quot;</span>
</span><span id="MarkGenerator-550"><a href="#MarkGenerator-550"><span class="linenos">550</span></a>                    <span class="s2">&quot;https://docs.pytest.org/en/stable/how-to/mark.html&quot;</span><span class="p">,</span>
</span><span id="MarkGenerator-551"><a href="#MarkGenerator-551"><span class="linenos">551</span></a>                    <span class="n">PytestUnknownMarkWarning</span><span class="p">,</span>
</span><span id="MarkGenerator-552"><a href="#MarkGenerator-552"><span class="linenos">552</span></a>                    <span class="mi">2</span><span class="p">,</span>
</span><span id="MarkGenerator-553"><a href="#MarkGenerator-553"><span class="linenos">553</span></a>                <span class="p">)</span>
</span><span id="MarkGenerator-554"><a href="#MarkGenerator-554"><span class="linenos">554</span></a>
</span><span id="MarkGenerator-555"><a href="#MarkGenerator-555"><span class="linenos">555</span></a>        <span class="k">return</span> <span class="n">MarkDecorator</span><span class="p">(</span><span class="n">Mark</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{},</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Factory for <code><a href="#MarkDecorator">MarkDecorator</a></code> objects - exposed as
a <code><a href="#mark">pytest.mark</a></code> singleton instance.</p>

<p>Example::</p>

<pre><code> import pytest


 @pytest.mark.slowtest
 def test_function():
     pass
</code></pre>

<p>applies a 'slowtest' <code><a href="#Mark">Mark</a></code> on <code>test_function</code>.</p>
</div>


                            <div id="MarkGenerator.__init__" class="classattr">
                                        <input id="MarkGenerator.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MarkGenerator</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="MarkGenerator.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MarkGenerator.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MarkGenerator.__init__-511"><a href="#MarkGenerator.__init__-511"><span class="linenos">511</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MarkGenerator.__init__-512"><a href="#MarkGenerator.__init__-512"><span class="linenos">512</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="MarkGenerator.__init__-513"><a href="#MarkGenerator.__init__-513"><span class="linenos">513</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MarkGenerator.__init__-514"><a href="#MarkGenerator.__init__-514"><span class="linenos">514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="Metafunc">
                            <input id="Metafunc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Metafunc</span>:

                <label class="view-source-button" for="Metafunc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Metafunc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Metafunc-1091"><a href="#Metafunc-1091"><span class="linenos">1091</span></a><span class="nd">@final</span>
</span><span id="Metafunc-1092"><a href="#Metafunc-1092"><span class="linenos">1092</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Metafunc</span><span class="p">:</span>
</span><span id="Metafunc-1093"><a href="#Metafunc-1093"><span class="linenos">1093</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Objects passed to the :hook:`pytest_generate_tests` hook.</span>
</span><span id="Metafunc-1094"><a href="#Metafunc-1094"><span class="linenos">1094</span></a>
</span><span id="Metafunc-1095"><a href="#Metafunc-1095"><span class="linenos">1095</span></a><span class="sd">    They help to inspect a test function and to generate tests according to</span>
</span><span id="Metafunc-1096"><a href="#Metafunc-1096"><span class="linenos">1096</span></a><span class="sd">    test configuration or values specified in the class or module where a</span>
</span><span id="Metafunc-1097"><a href="#Metafunc-1097"><span class="linenos">1097</span></a><span class="sd">    test function is defined.</span>
</span><span id="Metafunc-1098"><a href="#Metafunc-1098"><span class="linenos">1098</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Metafunc-1099"><a href="#Metafunc-1099"><span class="linenos">1099</span></a>
</span><span id="Metafunc-1100"><a href="#Metafunc-1100"><span class="linenos">1100</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Metafunc-1101"><a href="#Metafunc-1101"><span class="linenos">1101</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc-1102"><a href="#Metafunc-1102"><span class="linenos">1102</span></a>        <span class="n">definition</span><span class="p">:</span> <span class="n">FunctionDefinition</span><span class="p">,</span>
</span><span id="Metafunc-1103"><a href="#Metafunc-1103"><span class="linenos">1103</span></a>        <span class="n">fixtureinfo</span><span class="p">:</span> <span class="n">fixtures</span><span class="o">.</span><span class="n">FuncFixtureInfo</span><span class="p">,</span>
</span><span id="Metafunc-1104"><a href="#Metafunc-1104"><span class="linenos">1104</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span>
</span><span id="Metafunc-1105"><a href="#Metafunc-1105"><span class="linenos">1105</span></a>        <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1106"><a href="#Metafunc-1106"><span class="linenos">1106</span></a>        <span class="n">module</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1107"><a href="#Metafunc-1107"><span class="linenos">1107</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Metafunc-1108"><a href="#Metafunc-1108"><span class="linenos">1108</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1109"><a href="#Metafunc-1109"><span class="linenos">1109</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1110"><a href="#Metafunc-1110"><span class="linenos">1110</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Metafunc-1111"><a href="#Metafunc-1111"><span class="linenos">1111</span></a>
</span><span id="Metafunc-1112"><a href="#Metafunc-1112"><span class="linenos">1112</span></a>        <span class="c1">#: Access to the underlying :class:`_pytest.python.FunctionDefinition`.</span>
</span><span id="Metafunc-1113"><a href="#Metafunc-1113"><span class="linenos">1113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">definition</span> <span class="o">=</span> <span class="n">definition</span>
</span><span id="Metafunc-1114"><a href="#Metafunc-1114"><span class="linenos">1114</span></a>
</span><span id="Metafunc-1115"><a href="#Metafunc-1115"><span class="linenos">1115</span></a>        <span class="c1">#: Access to the :class:`pytest.Config` object for the test session.</span>
</span><span id="Metafunc-1116"><a href="#Metafunc-1116"><span class="linenos">1116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="Metafunc-1117"><a href="#Metafunc-1117"><span class="linenos">1117</span></a>
</span><span id="Metafunc-1118"><a href="#Metafunc-1118"><span class="linenos">1118</span></a>        <span class="c1">#: The module object where the test function is defined in.</span>
</span><span id="Metafunc-1119"><a href="#Metafunc-1119"><span class="linenos">1119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="n">module</span>
</span><span id="Metafunc-1120"><a href="#Metafunc-1120"><span class="linenos">1120</span></a>
</span><span id="Metafunc-1121"><a href="#Metafunc-1121"><span class="linenos">1121</span></a>        <span class="c1">#: Underlying Python test function.</span>
</span><span id="Metafunc-1122"><a href="#Metafunc-1122"><span class="linenos">1122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">definition</span><span class="o">.</span><span class="n">obj</span>
</span><span id="Metafunc-1123"><a href="#Metafunc-1123"><span class="linenos">1123</span></a>
</span><span id="Metafunc-1124"><a href="#Metafunc-1124"><span class="linenos">1124</span></a>        <span class="c1">#: Set of fixture names required by the test function.</span>
</span><span id="Metafunc-1125"><a href="#Metafunc-1125"><span class="linenos">1125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">names_closure</span>
</span><span id="Metafunc-1126"><a href="#Metafunc-1126"><span class="linenos">1126</span></a>
</span><span id="Metafunc-1127"><a href="#Metafunc-1127"><span class="linenos">1127</span></a>        <span class="c1">#: Class object where the test function is defined in or ``None``.</span>
</span><span id="Metafunc-1128"><a href="#Metafunc-1128"><span class="linenos">1128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="bp">cls</span>
</span><span id="Metafunc-1129"><a href="#Metafunc-1129"><span class="linenos">1129</span></a>
</span><span id="Metafunc-1130"><a href="#Metafunc-1130"><span class="linenos">1130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">name2fixturedefs</span>
</span><span id="Metafunc-1131"><a href="#Metafunc-1131"><span class="linenos">1131</span></a>
</span><span id="Metafunc-1132"><a href="#Metafunc-1132"><span class="linenos">1132</span></a>        <span class="c1"># Result of parametrize().</span>
</span><span id="Metafunc-1133"><a href="#Metafunc-1133"><span class="linenos">1133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calls</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CallSpec2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Metafunc-1134"><a href="#Metafunc-1134"><span class="linenos">1134</span></a>
</span><span id="Metafunc-1135"><a href="#Metafunc-1135"><span class="linenos">1135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parametrize</span><span class="p">(</span>
</span><span id="Metafunc-1136"><a href="#Metafunc-1136"><span class="linenos">1136</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc-1137"><a href="#Metafunc-1137"><span class="linenos">1137</span></a>        <span class="n">argnames</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc-1138"><a href="#Metafunc-1138"><span class="linenos">1138</span></a>        <span class="n">argvalues</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ParameterSet</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="nb">object</span><span class="p">],</span>
</span><span id="Metafunc-1139"><a href="#Metafunc-1139"><span class="linenos">1139</span></a>        <span class="n">indirect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1140"><a href="#Metafunc-1140"><span class="linenos">1140</span></a>        <span class="n">ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1141"><a href="#Metafunc-1141"><span class="linenos">1141</span></a>        <span class="n">scope</span><span class="p">:</span> <span class="n">_ScopeName</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1142"><a href="#Metafunc-1142"><span class="linenos">1142</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Metafunc-1143"><a href="#Metafunc-1143"><span class="linenos">1143</span></a>        <span class="n">_param_mark</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1144"><a href="#Metafunc-1144"><span class="linenos">1144</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1145"><a href="#Metafunc-1145"><span class="linenos">1145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add new invocations to the underlying test function using the list</span>
</span><span id="Metafunc-1146"><a href="#Metafunc-1146"><span class="linenos">1146</span></a><span class="sd">        of argvalues for the given argnames. Parametrization is performed</span>
</span><span id="Metafunc-1147"><a href="#Metafunc-1147"><span class="linenos">1147</span></a><span class="sd">        during the collection phase. If you need to setup expensive resources</span>
</span><span id="Metafunc-1148"><a href="#Metafunc-1148"><span class="linenos">1148</span></a><span class="sd">        see about setting indirect to do it rather than at test setup time.</span>
</span><span id="Metafunc-1149"><a href="#Metafunc-1149"><span class="linenos">1149</span></a>
</span><span id="Metafunc-1150"><a href="#Metafunc-1150"><span class="linenos">1150</span></a><span class="sd">        Can be called multiple times per test function (but only on different</span>
</span><span id="Metafunc-1151"><a href="#Metafunc-1151"><span class="linenos">1151</span></a><span class="sd">        argument names), in which case each call parametrizes all previous</span>
</span><span id="Metafunc-1152"><a href="#Metafunc-1152"><span class="linenos">1152</span></a><span class="sd">        parametrizations, e.g.</span>
</span><span id="Metafunc-1153"><a href="#Metafunc-1153"><span class="linenos">1153</span></a>
</span><span id="Metafunc-1154"><a href="#Metafunc-1154"><span class="linenos">1154</span></a><span class="sd">        ::</span>
</span><span id="Metafunc-1155"><a href="#Metafunc-1155"><span class="linenos">1155</span></a>
</span><span id="Metafunc-1156"><a href="#Metafunc-1156"><span class="linenos">1156</span></a><span class="sd">            unparametrized:         t</span>
</span><span id="Metafunc-1157"><a href="#Metafunc-1157"><span class="linenos">1157</span></a><span class="sd">            parametrize [&quot;x&quot;, &quot;y&quot;]: t[x], t[y]</span>
</span><span id="Metafunc-1158"><a href="#Metafunc-1158"><span class="linenos">1158</span></a><span class="sd">            parametrize [1, 2]:     t[x-1], t[x-2], t[y-1], t[y-2]</span>
</span><span id="Metafunc-1159"><a href="#Metafunc-1159"><span class="linenos">1159</span></a>
</span><span id="Metafunc-1160"><a href="#Metafunc-1160"><span class="linenos">1160</span></a><span class="sd">        :param argnames:</span>
</span><span id="Metafunc-1161"><a href="#Metafunc-1161"><span class="linenos">1161</span></a><span class="sd">            A comma-separated string denoting one or more argument names, or</span>
</span><span id="Metafunc-1162"><a href="#Metafunc-1162"><span class="linenos">1162</span></a><span class="sd">            a list/tuple of argument strings.</span>
</span><span id="Metafunc-1163"><a href="#Metafunc-1163"><span class="linenos">1163</span></a>
</span><span id="Metafunc-1164"><a href="#Metafunc-1164"><span class="linenos">1164</span></a><span class="sd">        :param argvalues:</span>
</span><span id="Metafunc-1165"><a href="#Metafunc-1165"><span class="linenos">1165</span></a><span class="sd">            The list of argvalues determines how often a test is invoked with</span>
</span><span id="Metafunc-1166"><a href="#Metafunc-1166"><span class="linenos">1166</span></a><span class="sd">            different argument values.</span>
</span><span id="Metafunc-1167"><a href="#Metafunc-1167"><span class="linenos">1167</span></a>
</span><span id="Metafunc-1168"><a href="#Metafunc-1168"><span class="linenos">1168</span></a><span class="sd">            If only one argname was specified argvalues is a list of values.</span>
</span><span id="Metafunc-1169"><a href="#Metafunc-1169"><span class="linenos">1169</span></a><span class="sd">            If N argnames were specified, argvalues must be a list of</span>
</span><span id="Metafunc-1170"><a href="#Metafunc-1170"><span class="linenos">1170</span></a><span class="sd">            N-tuples, where each tuple-element specifies a value for its</span>
</span><span id="Metafunc-1171"><a href="#Metafunc-1171"><span class="linenos">1171</span></a><span class="sd">            respective argname.</span>
</span><span id="Metafunc-1172"><a href="#Metafunc-1172"><span class="linenos">1172</span></a><span class="sd">        :type argvalues: Iterable[_pytest.mark.structures.ParameterSet | Sequence[object] | object]</span>
</span><span id="Metafunc-1173"><a href="#Metafunc-1173"><span class="linenos">1173</span></a><span class="sd">        :param indirect:</span>
</span><span id="Metafunc-1174"><a href="#Metafunc-1174"><span class="linenos">1174</span></a><span class="sd">            A list of arguments&#39; names (subset of argnames) or a boolean.</span>
</span><span id="Metafunc-1175"><a href="#Metafunc-1175"><span class="linenos">1175</span></a><span class="sd">            If True the list contains all names from the argnames. Each</span>
</span><span id="Metafunc-1176"><a href="#Metafunc-1176"><span class="linenos">1176</span></a><span class="sd">            argvalue corresponding to an argname in this list will</span>
</span><span id="Metafunc-1177"><a href="#Metafunc-1177"><span class="linenos">1177</span></a><span class="sd">            be passed as request.param to its respective argname fixture</span>
</span><span id="Metafunc-1178"><a href="#Metafunc-1178"><span class="linenos">1178</span></a><span class="sd">            function so that it can perform more expensive setups during the</span>
</span><span id="Metafunc-1179"><a href="#Metafunc-1179"><span class="linenos">1179</span></a><span class="sd">            setup phase of a test rather than at collection time.</span>
</span><span id="Metafunc-1180"><a href="#Metafunc-1180"><span class="linenos">1180</span></a>
</span><span id="Metafunc-1181"><a href="#Metafunc-1181"><span class="linenos">1181</span></a><span class="sd">        :param ids:</span>
</span><span id="Metafunc-1182"><a href="#Metafunc-1182"><span class="linenos">1182</span></a><span class="sd">            Sequence of (or generator for) ids for ``argvalues``,</span>
</span><span id="Metafunc-1183"><a href="#Metafunc-1183"><span class="linenos">1183</span></a><span class="sd">            or a callable to return part of the id for each argvalue.</span>
</span><span id="Metafunc-1184"><a href="#Metafunc-1184"><span class="linenos">1184</span></a>
</span><span id="Metafunc-1185"><a href="#Metafunc-1185"><span class="linenos">1185</span></a><span class="sd">            With sequences (and generators like ``itertools.count()``) the</span>
</span><span id="Metafunc-1186"><a href="#Metafunc-1186"><span class="linenos">1186</span></a><span class="sd">            returned ids should be of type ``string``, ``int``, ``float``,</span>
</span><span id="Metafunc-1187"><a href="#Metafunc-1187"><span class="linenos">1187</span></a><span class="sd">            ``bool``, or ``None``.</span>
</span><span id="Metafunc-1188"><a href="#Metafunc-1188"><span class="linenos">1188</span></a><span class="sd">            They are mapped to the corresponding index in ``argvalues``.</span>
</span><span id="Metafunc-1189"><a href="#Metafunc-1189"><span class="linenos">1189</span></a><span class="sd">            ``None`` means to use the auto-generated id.</span>
</span><span id="Metafunc-1190"><a href="#Metafunc-1190"><span class="linenos">1190</span></a>
</span><span id="Metafunc-1191"><a href="#Metafunc-1191"><span class="linenos">1191</span></a><span class="sd">            If it is a callable it will be called for each entry in</span>
</span><span id="Metafunc-1192"><a href="#Metafunc-1192"><span class="linenos">1192</span></a><span class="sd">            ``argvalues``, and the return value is used as part of the</span>
</span><span id="Metafunc-1193"><a href="#Metafunc-1193"><span class="linenos">1193</span></a><span class="sd">            auto-generated id for the whole set (where parts are joined with</span>
</span><span id="Metafunc-1194"><a href="#Metafunc-1194"><span class="linenos">1194</span></a><span class="sd">            dashes (&quot;-&quot;)).</span>
</span><span id="Metafunc-1195"><a href="#Metafunc-1195"><span class="linenos">1195</span></a><span class="sd">            This is useful to provide more specific ids for certain items, e.g.</span>
</span><span id="Metafunc-1196"><a href="#Metafunc-1196"><span class="linenos">1196</span></a><span class="sd">            dates.  Returning ``None`` will use an auto-generated id.</span>
</span><span id="Metafunc-1197"><a href="#Metafunc-1197"><span class="linenos">1197</span></a>
</span><span id="Metafunc-1198"><a href="#Metafunc-1198"><span class="linenos">1198</span></a><span class="sd">            If no ids are provided they will be generated automatically from</span>
</span><span id="Metafunc-1199"><a href="#Metafunc-1199"><span class="linenos">1199</span></a><span class="sd">            the argvalues.</span>
</span><span id="Metafunc-1200"><a href="#Metafunc-1200"><span class="linenos">1200</span></a>
</span><span id="Metafunc-1201"><a href="#Metafunc-1201"><span class="linenos">1201</span></a><span class="sd">        :param scope:</span>
</span><span id="Metafunc-1202"><a href="#Metafunc-1202"><span class="linenos">1202</span></a><span class="sd">            If specified it denotes the scope of the parameters.</span>
</span><span id="Metafunc-1203"><a href="#Metafunc-1203"><span class="linenos">1203</span></a><span class="sd">            The scope is used for grouping tests by parameter instances.</span>
</span><span id="Metafunc-1204"><a href="#Metafunc-1204"><span class="linenos">1204</span></a><span class="sd">            It will also override any fixture-function defined scope, allowing</span>
</span><span id="Metafunc-1205"><a href="#Metafunc-1205"><span class="linenos">1205</span></a><span class="sd">            to set a dynamic scope using test context or configuration.</span>
</span><span id="Metafunc-1206"><a href="#Metafunc-1206"><span class="linenos">1206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Metafunc-1207"><a href="#Metafunc-1207"><span class="linenos">1207</span></a>        <span class="n">argnames</span><span class="p">,</span> <span class="n">parametersets</span> <span class="o">=</span> <span class="n">ParameterSet</span><span class="o">.</span><span class="n">_for_parametrize</span><span class="p">(</span>
</span><span id="Metafunc-1208"><a href="#Metafunc-1208"><span class="linenos">1208</span></a>            <span class="n">argnames</span><span class="p">,</span>
</span><span id="Metafunc-1209"><a href="#Metafunc-1209"><span class="linenos">1209</span></a>            <span class="n">argvalues</span><span class="p">,</span>
</span><span id="Metafunc-1210"><a href="#Metafunc-1210"><span class="linenos">1210</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
</span><span id="Metafunc-1211"><a href="#Metafunc-1211"><span class="linenos">1211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
</span><span id="Metafunc-1212"><a href="#Metafunc-1212"><span class="linenos">1212</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Metafunc-1213"><a href="#Metafunc-1213"><span class="linenos">1213</span></a>        <span class="p">)</span>
</span><span id="Metafunc-1214"><a href="#Metafunc-1214"><span class="linenos">1214</span></a>        <span class="k">del</span> <span class="n">argvalues</span>
</span><span id="Metafunc-1215"><a href="#Metafunc-1215"><span class="linenos">1215</span></a>
</span><span id="Metafunc-1216"><a href="#Metafunc-1216"><span class="linenos">1216</span></a>        <span class="k">if</span> <span class="s2">&quot;request&quot;</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">:</span>
</span><span id="Metafunc-1217"><a href="#Metafunc-1217"><span class="linenos">1217</span></a>            <span class="n">fail</span><span class="p">(</span>
</span><span id="Metafunc-1218"><a href="#Metafunc-1218"><span class="linenos">1218</span></a>                <span class="s2">&quot;&#39;request&#39; is a reserved name and cannot be used in @pytest.mark.parametrize&quot;</span><span class="p">,</span>
</span><span id="Metafunc-1219"><a href="#Metafunc-1219"><span class="linenos">1219</span></a>                <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1220"><a href="#Metafunc-1220"><span class="linenos">1220</span></a>            <span class="p">)</span>
</span><span id="Metafunc-1221"><a href="#Metafunc-1221"><span class="linenos">1221</span></a>
</span><span id="Metafunc-1222"><a href="#Metafunc-1222"><span class="linenos">1222</span></a>        <span class="k">if</span> <span class="n">scope</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1223"><a href="#Metafunc-1223"><span class="linenos">1223</span></a>            <span class="n">scope_</span> <span class="o">=</span> <span class="n">Scope</span><span class="o">.</span><span class="n">from_user</span><span class="p">(</span>
</span><span id="Metafunc-1224"><a href="#Metafunc-1224"><span class="linenos">1224</span></a>                <span class="n">scope</span><span class="p">,</span> <span class="n">descr</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;parametrize() call in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Metafunc-1225"><a href="#Metafunc-1225"><span class="linenos">1225</span></a>            <span class="p">)</span>
</span><span id="Metafunc-1226"><a href="#Metafunc-1226"><span class="linenos">1226</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1227"><a href="#Metafunc-1227"><span class="linenos">1227</span></a>            <span class="n">scope_</span> <span class="o">=</span> <span class="n">_find_parametrized_scope</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="p">,</span> <span class="n">indirect</span><span class="p">)</span>
</span><span id="Metafunc-1228"><a href="#Metafunc-1228"><span class="linenos">1228</span></a>
</span><span id="Metafunc-1229"><a href="#Metafunc-1229"><span class="linenos">1229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_if_using_arg_names</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="n">indirect</span><span class="p">)</span>
</span><span id="Metafunc-1230"><a href="#Metafunc-1230"><span class="linenos">1230</span></a>
</span><span id="Metafunc-1231"><a href="#Metafunc-1231"><span class="linenos">1231</span></a>        <span class="c1"># Use any already (possibly) generated ids with parametrize Marks.</span>
</span><span id="Metafunc-1232"><a href="#Metafunc-1232"><span class="linenos">1232</span></a>        <span class="k">if</span> <span class="n">_param_mark</span> <span class="ow">and</span> <span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span><span class="p">:</span>
</span><span id="Metafunc-1233"><a href="#Metafunc-1233"><span class="linenos">1233</span></a>            <span class="n">generated_ids</span> <span class="o">=</span> <span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span><span class="o">.</span><span class="n">_param_ids_generated</span>
</span><span id="Metafunc-1234"><a href="#Metafunc-1234"><span class="linenos">1234</span></a>            <span class="k">if</span> <span class="n">generated_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1235"><a href="#Metafunc-1235"><span class="linenos">1235</span></a>                <span class="n">ids</span> <span class="o">=</span> <span class="n">generated_ids</span>
</span><span id="Metafunc-1236"><a href="#Metafunc-1236"><span class="linenos">1236</span></a>
</span><span id="Metafunc-1237"><a href="#Metafunc-1237"><span class="linenos">1237</span></a>        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_parameter_set_ids</span><span class="p">(</span>
</span><span id="Metafunc-1238"><a href="#Metafunc-1238"><span class="linenos">1238</span></a>            <span class="n">argnames</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">parametersets</span><span class="p">,</span> <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">nodeid</span>
</span><span id="Metafunc-1239"><a href="#Metafunc-1239"><span class="linenos">1239</span></a>        <span class="p">)</span>
</span><span id="Metafunc-1240"><a href="#Metafunc-1240"><span class="linenos">1240</span></a>
</span><span id="Metafunc-1241"><a href="#Metafunc-1241"><span class="linenos">1241</span></a>        <span class="c1"># Store used (possibly generated) ids with parametrize Marks.</span>
</span><span id="Metafunc-1242"><a href="#Metafunc-1242"><span class="linenos">1242</span></a>        <span class="k">if</span> <span class="n">_param_mark</span> <span class="ow">and</span> <span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span> <span class="ow">and</span> <span class="n">generated_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1243"><a href="#Metafunc-1243"><span class="linenos">1243</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span><span class="p">,</span> <span class="s2">&quot;_param_ids_generated&quot;</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span>
</span><span id="Metafunc-1244"><a href="#Metafunc-1244"><span class="linenos">1244</span></a>
</span><span id="Metafunc-1245"><a href="#Metafunc-1245"><span class="linenos">1245</span></a>        <span class="c1"># Add funcargs as fixturedefs to fixtureinfo.arg2fixturedefs by registering</span>
</span><span id="Metafunc-1246"><a href="#Metafunc-1246"><span class="linenos">1246</span></a>        <span class="c1"># artificial &quot;pseudo&quot; FixtureDef&#39;s so that later at test execution time we can</span>
</span><span id="Metafunc-1247"><a href="#Metafunc-1247"><span class="linenos">1247</span></a>        <span class="c1"># rely on a proper FixtureDef to exist for fixture setup.</span>
</span><span id="Metafunc-1248"><a href="#Metafunc-1248"><span class="linenos">1248</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc-1249"><a href="#Metafunc-1249"><span class="linenos">1249</span></a>        <span class="c1"># If we have a scope that is higher than function, we need</span>
</span><span id="Metafunc-1250"><a href="#Metafunc-1250"><span class="linenos">1250</span></a>        <span class="c1"># to make sure we only ever create an according fixturedef on</span>
</span><span id="Metafunc-1251"><a href="#Metafunc-1251"><span class="linenos">1251</span></a>        <span class="c1"># a per-scope basis. We thus store and cache the fixturedef on the</span>
</span><span id="Metafunc-1252"><a href="#Metafunc-1252"><span class="linenos">1252</span></a>        <span class="c1"># node related to the scope.</span>
</span><span id="Metafunc-1253"><a href="#Metafunc-1253"><span class="linenos">1253</span></a>        <span class="k">if</span> <span class="n">scope_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Function</span><span class="p">:</span>
</span><span id="Metafunc-1254"><a href="#Metafunc-1254"><span class="linenos">1254</span></a>            <span class="n">collector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">parent</span>
</span><span id="Metafunc-1255"><a href="#Metafunc-1255"><span class="linenos">1255</span></a>            <span class="k">assert</span> <span class="n">collector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Metafunc-1256"><a href="#Metafunc-1256"><span class="linenos">1256</span></a>            <span class="n">node</span> <span class="o">=</span> <span class="n">get_scope_node</span><span class="p">(</span><span class="n">collector</span><span class="p">,</span> <span class="n">scope_</span><span class="p">)</span>
</span><span id="Metafunc-1257"><a href="#Metafunc-1257"><span class="linenos">1257</span></a>            <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1258"><a href="#Metafunc-1258"><span class="linenos">1258</span></a>                <span class="c1"># If used class scope and there is no class, use module-level</span>
</span><span id="Metafunc-1259"><a href="#Metafunc-1259"><span class="linenos">1259</span></a>                <span class="c1"># collector (for now).</span>
</span><span id="Metafunc-1260"><a href="#Metafunc-1260"><span class="linenos">1260</span></a>                <span class="k">if</span> <span class="n">scope_</span> <span class="ow">is</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Class</span><span class="p">:</span>
</span><span id="Metafunc-1261"><a href="#Metafunc-1261"><span class="linenos">1261</span></a>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collector</span><span class="p">,</span> <span class="n">Module</span><span class="p">)</span>
</span><span id="Metafunc-1262"><a href="#Metafunc-1262"><span class="linenos">1262</span></a>                    <span class="n">node</span> <span class="o">=</span> <span class="n">collector</span>
</span><span id="Metafunc-1263"><a href="#Metafunc-1263"><span class="linenos">1263</span></a>                <span class="c1"># If used package scope and there is no package, use session</span>
</span><span id="Metafunc-1264"><a href="#Metafunc-1264"><span class="linenos">1264</span></a>                <span class="c1"># (for now).</span>
</span><span id="Metafunc-1265"><a href="#Metafunc-1265"><span class="linenos">1265</span></a>                <span class="k">elif</span> <span class="n">scope_</span> <span class="ow">is</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Package</span><span class="p">:</span>
</span><span id="Metafunc-1266"><a href="#Metafunc-1266"><span class="linenos">1266</span></a>                    <span class="n">node</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="n">session</span>
</span><span id="Metafunc-1267"><a href="#Metafunc-1267"><span class="linenos">1267</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1268"><a href="#Metafunc-1268"><span class="linenos">1268</span></a>                    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Unhandled missing scope: </span><span class="si">{</span><span class="n">scope</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Metafunc-1269"><a href="#Metafunc-1269"><span class="linenos">1269</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1270"><a href="#Metafunc-1270"><span class="linenos">1270</span></a>            <span class="n">name2pseudofixturedef</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc-1271"><a href="#Metafunc-1271"><span class="linenos">1271</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1272"><a href="#Metafunc-1272"><span class="linenos">1272</span></a>            <span class="n">default</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FixtureDef</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Metafunc-1273"><a href="#Metafunc-1273"><span class="linenos">1273</span></a>            <span class="n">name2pseudofixturedef</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">stash</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
</span><span id="Metafunc-1274"><a href="#Metafunc-1274"><span class="linenos">1274</span></a>                <span class="n">name2pseudofixturedef_key</span><span class="p">,</span> <span class="n">default</span>
</span><span id="Metafunc-1275"><a href="#Metafunc-1275"><span class="linenos">1275</span></a>            <span class="p">)</span>
</span><span id="Metafunc-1276"><a href="#Metafunc-1276"><span class="linenos">1276</span></a>        <span class="n">arg_directness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_args_directness</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="n">indirect</span><span class="p">)</span>
</span><span id="Metafunc-1277"><a href="#Metafunc-1277"><span class="linenos">1277</span></a>        <span class="k">for</span> <span class="n">argname</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">:</span>
</span><span id="Metafunc-1278"><a href="#Metafunc-1278"><span class="linenos">1278</span></a>            <span class="k">if</span> <span class="n">arg_directness</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;indirect&quot;</span><span class="p">:</span>
</span><span id="Metafunc-1279"><a href="#Metafunc-1279"><span class="linenos">1279</span></a>                <span class="k">continue</span>
</span><span id="Metafunc-1280"><a href="#Metafunc-1280"><span class="linenos">1280</span></a>            <span class="k">if</span> <span class="n">name2pseudofixturedef</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">argname</span> <span class="ow">in</span> <span class="n">name2pseudofixturedef</span><span class="p">:</span>
</span><span id="Metafunc-1281"><a href="#Metafunc-1281"><span class="linenos">1281</span></a>                <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">name2pseudofixturedef</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span>
</span><span id="Metafunc-1282"><a href="#Metafunc-1282"><span class="linenos">1282</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1283"><a href="#Metafunc-1283"><span class="linenos">1283</span></a>                <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">FixtureDef</span><span class="p">(</span>
</span><span id="Metafunc-1284"><a href="#Metafunc-1284"><span class="linenos">1284</span></a>                    <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
</span><span id="Metafunc-1285"><a href="#Metafunc-1285"><span class="linenos">1285</span></a>                    <span class="n">baseid</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Metafunc-1286"><a href="#Metafunc-1286"><span class="linenos">1286</span></a>                    <span class="n">argname</span><span class="o">=</span><span class="n">argname</span><span class="p">,</span>
</span><span id="Metafunc-1287"><a href="#Metafunc-1287"><span class="linenos">1287</span></a>                    <span class="n">func</span><span class="o">=</span><span class="n">get_direct_param_fixture_func</span><span class="p">,</span>
</span><span id="Metafunc-1288"><a href="#Metafunc-1288"><span class="linenos">1288</span></a>                    <span class="n">scope</span><span class="o">=</span><span class="n">scope_</span><span class="p">,</span>
</span><span id="Metafunc-1289"><a href="#Metafunc-1289"><span class="linenos">1289</span></a>                    <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1290"><a href="#Metafunc-1290"><span class="linenos">1290</span></a>                    <span class="n">ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1291"><a href="#Metafunc-1291"><span class="linenos">1291</span></a>                    <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Metafunc-1292"><a href="#Metafunc-1292"><span class="linenos">1292</span></a>                <span class="p">)</span>
</span><span id="Metafunc-1293"><a href="#Metafunc-1293"><span class="linenos">1293</span></a>                <span class="k">if</span> <span class="n">name2pseudofixturedef</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1294"><a href="#Metafunc-1294"><span class="linenos">1294</span></a>                    <span class="n">name2pseudofixturedef</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">=</span> <span class="n">fixturedef</span>
</span><span id="Metafunc-1295"><a href="#Metafunc-1295"><span class="linenos">1295</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">fixturedef</span><span class="p">]</span>
</span><span id="Metafunc-1296"><a href="#Metafunc-1296"><span class="linenos">1296</span></a>
</span><span id="Metafunc-1297"><a href="#Metafunc-1297"><span class="linenos">1297</span></a>        <span class="c1"># Create the new calls: if we are parametrize() multiple times (by applying the decorator</span>
</span><span id="Metafunc-1298"><a href="#Metafunc-1298"><span class="linenos">1298</span></a>        <span class="c1"># more than once) then we accumulate those calls generating the cartesian product</span>
</span><span id="Metafunc-1299"><a href="#Metafunc-1299"><span class="linenos">1299</span></a>        <span class="c1"># of all calls.</span>
</span><span id="Metafunc-1300"><a href="#Metafunc-1300"><span class="linenos">1300</span></a>        <span class="n">newcalls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Metafunc-1301"><a href="#Metafunc-1301"><span class="linenos">1301</span></a>        <span class="k">for</span> <span class="n">callspec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calls</span> <span class="ow">or</span> <span class="p">[</span><span class="n">CallSpec2</span><span class="p">()]:</span>
</span><span id="Metafunc-1302"><a href="#Metafunc-1302"><span class="linenos">1302</span></a>            <span class="k">for</span> <span class="n">param_index</span><span class="p">,</span> <span class="p">(</span><span class="n">param_id</span><span class="p">,</span> <span class="n">param_set</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
</span><span id="Metafunc-1303"><a href="#Metafunc-1303"><span class="linenos">1303</span></a>                <span class="nb">zip</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">parametersets</span><span class="p">)</span>
</span><span id="Metafunc-1304"><a href="#Metafunc-1304"><span class="linenos">1304</span></a>            <span class="p">):</span>
</span><span id="Metafunc-1305"><a href="#Metafunc-1305"><span class="linenos">1305</span></a>                <span class="n">newcallspec</span> <span class="o">=</span> <span class="n">callspec</span><span class="o">.</span><span class="n">setmulti</span><span class="p">(</span>
</span><span id="Metafunc-1306"><a href="#Metafunc-1306"><span class="linenos">1306</span></a>                    <span class="n">argnames</span><span class="o">=</span><span class="n">argnames</span><span class="p">,</span>
</span><span id="Metafunc-1307"><a href="#Metafunc-1307"><span class="linenos">1307</span></a>                    <span class="n">valset</span><span class="o">=</span><span class="n">param_set</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
</span><span id="Metafunc-1308"><a href="#Metafunc-1308"><span class="linenos">1308</span></a>                    <span class="nb">id</span><span class="o">=</span><span class="n">param_id</span><span class="p">,</span>
</span><span id="Metafunc-1309"><a href="#Metafunc-1309"><span class="linenos">1309</span></a>                    <span class="n">marks</span><span class="o">=</span><span class="n">param_set</span><span class="o">.</span><span class="n">marks</span><span class="p">,</span>
</span><span id="Metafunc-1310"><a href="#Metafunc-1310"><span class="linenos">1310</span></a>                    <span class="n">scope</span><span class="o">=</span><span class="n">scope_</span><span class="p">,</span>
</span><span id="Metafunc-1311"><a href="#Metafunc-1311"><span class="linenos">1311</span></a>                    <span class="n">param_index</span><span class="o">=</span><span class="n">param_index</span><span class="p">,</span>
</span><span id="Metafunc-1312"><a href="#Metafunc-1312"><span class="linenos">1312</span></a>                <span class="p">)</span>
</span><span id="Metafunc-1313"><a href="#Metafunc-1313"><span class="linenos">1313</span></a>                <span class="n">newcalls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newcallspec</span><span class="p">)</span>
</span><span id="Metafunc-1314"><a href="#Metafunc-1314"><span class="linenos">1314</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calls</span> <span class="o">=</span> <span class="n">newcalls</span>
</span><span id="Metafunc-1315"><a href="#Metafunc-1315"><span class="linenos">1315</span></a>
</span><span id="Metafunc-1316"><a href="#Metafunc-1316"><span class="linenos">1316</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_resolve_parameter_set_ids</span><span class="p">(</span>
</span><span id="Metafunc-1317"><a href="#Metafunc-1317"><span class="linenos">1317</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc-1318"><a href="#Metafunc-1318"><span class="linenos">1318</span></a>        <span class="n">argnames</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc-1319"><a href="#Metafunc-1319"><span class="linenos">1319</span></a>        <span class="n">ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc-1320"><a href="#Metafunc-1320"><span class="linenos">1320</span></a>        <span class="n">parametersets</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ParameterSet</span><span class="p">],</span>
</span><span id="Metafunc-1321"><a href="#Metafunc-1321"><span class="linenos">1321</span></a>        <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Metafunc-1322"><a href="#Metafunc-1322"><span class="linenos">1322</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Metafunc-1323"><a href="#Metafunc-1323"><span class="linenos">1323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve the actual ids for the given parameter sets.</span>
</span><span id="Metafunc-1324"><a href="#Metafunc-1324"><span class="linenos">1324</span></a>
</span><span id="Metafunc-1325"><a href="#Metafunc-1325"><span class="linenos">1325</span></a><span class="sd">        :param argnames:</span>
</span><span id="Metafunc-1326"><a href="#Metafunc-1326"><span class="linenos">1326</span></a><span class="sd">            Argument names passed to ``parametrize()``.</span>
</span><span id="Metafunc-1327"><a href="#Metafunc-1327"><span class="linenos">1327</span></a><span class="sd">        :param ids:</span>
</span><span id="Metafunc-1328"><a href="#Metafunc-1328"><span class="linenos">1328</span></a><span class="sd">            The `ids` parameter of the ``parametrize()`` call (see docs).</span>
</span><span id="Metafunc-1329"><a href="#Metafunc-1329"><span class="linenos">1329</span></a><span class="sd">        :param parametersets:</span>
</span><span id="Metafunc-1330"><a href="#Metafunc-1330"><span class="linenos">1330</span></a><span class="sd">            The parameter sets, each containing a set of values corresponding</span>
</span><span id="Metafunc-1331"><a href="#Metafunc-1331"><span class="linenos">1331</span></a><span class="sd">            to ``argnames``.</span>
</span><span id="Metafunc-1332"><a href="#Metafunc-1332"><span class="linenos">1332</span></a><span class="sd">        :param nodeid str:</span>
</span><span id="Metafunc-1333"><a href="#Metafunc-1333"><span class="linenos">1333</span></a><span class="sd">            The nodeid of the definition item that generated this</span>
</span><span id="Metafunc-1334"><a href="#Metafunc-1334"><span class="linenos">1334</span></a><span class="sd">            parametrization.</span>
</span><span id="Metafunc-1335"><a href="#Metafunc-1335"><span class="linenos">1335</span></a><span class="sd">        :returns:</span>
</span><span id="Metafunc-1336"><a href="#Metafunc-1336"><span class="linenos">1336</span></a><span class="sd">            List with ids for each parameter set given.</span>
</span><span id="Metafunc-1337"><a href="#Metafunc-1337"><span class="linenos">1337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Metafunc-1338"><a href="#Metafunc-1338"><span class="linenos">1338</span></a>        <span class="k">if</span> <span class="n">ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1339"><a href="#Metafunc-1339"><span class="linenos">1339</span></a>            <span class="n">idfn</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc-1340"><a href="#Metafunc-1340"><span class="linenos">1340</span></a>            <span class="n">ids_</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc-1341"><a href="#Metafunc-1341"><span class="linenos">1341</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">ids</span><span class="p">):</span>
</span><span id="Metafunc-1342"><a href="#Metafunc-1342"><span class="linenos">1342</span></a>            <span class="n">idfn</span> <span class="o">=</span> <span class="n">ids</span>
</span><span id="Metafunc-1343"><a href="#Metafunc-1343"><span class="linenos">1343</span></a>            <span class="n">ids_</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc-1344"><a href="#Metafunc-1344"><span class="linenos">1344</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1345"><a href="#Metafunc-1345"><span class="linenos">1345</span></a>            <span class="n">idfn</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc-1346"><a href="#Metafunc-1346"><span class="linenos">1346</span></a>            <span class="n">ids_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_ids</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">parametersets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="Metafunc-1347"><a href="#Metafunc-1347"><span class="linenos">1347</span></a>        <span class="n">id_maker</span> <span class="o">=</span> <span class="n">IdMaker</span><span class="p">(</span>
</span><span id="Metafunc-1348"><a href="#Metafunc-1348"><span class="linenos">1348</span></a>            <span class="n">argnames</span><span class="p">,</span>
</span><span id="Metafunc-1349"><a href="#Metafunc-1349"><span class="linenos">1349</span></a>            <span class="n">parametersets</span><span class="p">,</span>
</span><span id="Metafunc-1350"><a href="#Metafunc-1350"><span class="linenos">1350</span></a>            <span class="n">idfn</span><span class="p">,</span>
</span><span id="Metafunc-1351"><a href="#Metafunc-1351"><span class="linenos">1351</span></a>            <span class="n">ids_</span><span class="p">,</span>
</span><span id="Metafunc-1352"><a href="#Metafunc-1352"><span class="linenos">1352</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
</span><span id="Metafunc-1353"><a href="#Metafunc-1353"><span class="linenos">1353</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Metafunc-1354"><a href="#Metafunc-1354"><span class="linenos">1354</span></a>            <span class="n">func_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
</span><span id="Metafunc-1355"><a href="#Metafunc-1355"><span class="linenos">1355</span></a>        <span class="p">)</span>
</span><span id="Metafunc-1356"><a href="#Metafunc-1356"><span class="linenos">1356</span></a>        <span class="k">return</span> <span class="n">id_maker</span><span class="o">.</span><span class="n">make_unique_parameterset_ids</span><span class="p">()</span>
</span><span id="Metafunc-1357"><a href="#Metafunc-1357"><span class="linenos">1357</span></a>
</span><span id="Metafunc-1358"><a href="#Metafunc-1358"><span class="linenos">1358</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_ids</span><span class="p">(</span>
</span><span id="Metafunc-1359"><a href="#Metafunc-1359"><span class="linenos">1359</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc-1360"><a href="#Metafunc-1360"><span class="linenos">1360</span></a>        <span class="n">ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="Metafunc-1361"><a href="#Metafunc-1361"><span class="linenos">1361</span></a>        <span class="n">parametersets</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ParameterSet</span><span class="p">],</span>
</span><span id="Metafunc-1362"><a href="#Metafunc-1362"><span class="linenos">1362</span></a>        <span class="n">func_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Metafunc-1363"><a href="#Metafunc-1363"><span class="linenos">1363</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="Metafunc-1364"><a href="#Metafunc-1364"><span class="linenos">1364</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Metafunc-1365"><a href="#Metafunc-1365"><span class="linenos">1365</span></a>            <span class="n">num_ids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="Metafunc-1366"><a href="#Metafunc-1366"><span class="linenos">1366</span></a>        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
</span><span id="Metafunc-1367"><a href="#Metafunc-1367"><span class="linenos">1367</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Metafunc-1368"><a href="#Metafunc-1368"><span class="linenos">1368</span></a>                <span class="nb">iter</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span>
</span><span id="Metafunc-1369"><a href="#Metafunc-1369"><span class="linenos">1369</span></a>            <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Metafunc-1370"><a href="#Metafunc-1370"><span class="linenos">1370</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;ids must be a callable or an iterable&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="Metafunc-1371"><a href="#Metafunc-1371"><span class="linenos">1371</span></a>            <span class="n">num_ids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parametersets</span><span class="p">)</span>
</span><span id="Metafunc-1372"><a href="#Metafunc-1372"><span class="linenos">1372</span></a>
</span><span id="Metafunc-1373"><a href="#Metafunc-1373"><span class="linenos">1373</span></a>        <span class="c1"># num_ids == 0 is a special case: https://github.com/pytest-dev/pytest/issues/1849</span>
</span><span id="Metafunc-1374"><a href="#Metafunc-1374"><span class="linenos">1374</span></a>        <span class="k">if</span> <span class="n">num_ids</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parametersets</span><span class="p">)</span> <span class="ow">and</span> <span class="n">num_ids</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Metafunc-1375"><a href="#Metafunc-1375"><span class="linenos">1375</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;In </span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2"> parameter sets specified, with different number of ids: </span><span class="si">{}</span><span class="s2">&quot;</span>
</span><span id="Metafunc-1376"><a href="#Metafunc-1376"><span class="linenos">1376</span></a>            <span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">parametersets</span><span class="p">),</span> <span class="n">num_ids</span><span class="p">),</span> <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Metafunc-1377"><a href="#Metafunc-1377"><span class="linenos">1377</span></a>
</span><span id="Metafunc-1378"><a href="#Metafunc-1378"><span class="linenos">1378</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">num_ids</span><span class="p">))</span>
</span><span id="Metafunc-1379"><a href="#Metafunc-1379"><span class="linenos">1379</span></a>
</span><span id="Metafunc-1380"><a href="#Metafunc-1380"><span class="linenos">1380</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_resolve_args_directness</span><span class="p">(</span>
</span><span id="Metafunc-1381"><a href="#Metafunc-1381"><span class="linenos">1381</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc-1382"><a href="#Metafunc-1382"><span class="linenos">1382</span></a>        <span class="n">argnames</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc-1383"><a href="#Metafunc-1383"><span class="linenos">1383</span></a>        <span class="n">indirect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc-1384"><a href="#Metafunc-1384"><span class="linenos">1384</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;indirect&quot;</span><span class="p">,</span> <span class="s2">&quot;direct&quot;</span><span class="p">]]:</span>
</span><span id="Metafunc-1385"><a href="#Metafunc-1385"><span class="linenos">1385</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve if each parametrized argument must be considered an indirect</span>
</span><span id="Metafunc-1386"><a href="#Metafunc-1386"><span class="linenos">1386</span></a><span class="sd">        parameter to a fixture of the same name, or a direct parameter to the</span>
</span><span id="Metafunc-1387"><a href="#Metafunc-1387"><span class="linenos">1387</span></a><span class="sd">        parametrized function, based on the ``indirect`` parameter of the</span>
</span><span id="Metafunc-1388"><a href="#Metafunc-1388"><span class="linenos">1388</span></a><span class="sd">        parametrized() call.</span>
</span><span id="Metafunc-1389"><a href="#Metafunc-1389"><span class="linenos">1389</span></a>
</span><span id="Metafunc-1390"><a href="#Metafunc-1390"><span class="linenos">1390</span></a><span class="sd">        :param argnames:</span>
</span><span id="Metafunc-1391"><a href="#Metafunc-1391"><span class="linenos">1391</span></a><span class="sd">            List of argument names passed to ``parametrize()``.</span>
</span><span id="Metafunc-1392"><a href="#Metafunc-1392"><span class="linenos">1392</span></a><span class="sd">        :param indirect:</span>
</span><span id="Metafunc-1393"><a href="#Metafunc-1393"><span class="linenos">1393</span></a><span class="sd">            Same as the ``indirect`` parameter of ``parametrize()``.</span>
</span><span id="Metafunc-1394"><a href="#Metafunc-1394"><span class="linenos">1394</span></a><span class="sd">        :returns</span>
</span><span id="Metafunc-1395"><a href="#Metafunc-1395"><span class="linenos">1395</span></a><span class="sd">            A dict mapping each arg name to either &quot;indirect&quot; or &quot;direct&quot;.</span>
</span><span id="Metafunc-1396"><a href="#Metafunc-1396"><span class="linenos">1396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Metafunc-1397"><a href="#Metafunc-1397"><span class="linenos">1397</span></a>        <span class="n">arg_directness</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;indirect&quot;</span><span class="p">,</span> <span class="s2">&quot;direct&quot;</span><span class="p">]]</span>
</span><span id="Metafunc-1398"><a href="#Metafunc-1398"><span class="linenos">1398</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indirect</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="Metafunc-1399"><a href="#Metafunc-1399"><span class="linenos">1399</span></a>            <span class="n">arg_directness</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span>
</span><span id="Metafunc-1400"><a href="#Metafunc-1400"><span class="linenos">1400</span></a>                <span class="n">argnames</span><span class="p">,</span> <span class="s2">&quot;indirect&quot;</span> <span class="k">if</span> <span class="n">indirect</span> <span class="k">else</span> <span class="s2">&quot;direct&quot;</span>
</span><span id="Metafunc-1401"><a href="#Metafunc-1401"><span class="linenos">1401</span></a>            <span class="p">)</span>
</span><span id="Metafunc-1402"><a href="#Metafunc-1402"><span class="linenos">1402</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indirect</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
</span><span id="Metafunc-1403"><a href="#Metafunc-1403"><span class="linenos">1403</span></a>            <span class="n">arg_directness</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="s2">&quot;direct&quot;</span><span class="p">)</span>
</span><span id="Metafunc-1404"><a href="#Metafunc-1404"><span class="linenos">1404</span></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">indirect</span><span class="p">:</span>
</span><span id="Metafunc-1405"><a href="#Metafunc-1405"><span class="linenos">1405</span></a>                <span class="k">if</span> <span class="n">arg</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">:</span>
</span><span id="Metafunc-1406"><a href="#Metafunc-1406"><span class="linenos">1406</span></a>                    <span class="n">fail</span><span class="p">(</span>
</span><span id="Metafunc-1407"><a href="#Metafunc-1407"><span class="linenos">1407</span></a>                        <span class="sa">f</span><span class="s2">&quot;In </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: indirect fixture &#39;</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist&quot;</span><span class="p">,</span>
</span><span id="Metafunc-1408"><a href="#Metafunc-1408"><span class="linenos">1408</span></a>                        <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1409"><a href="#Metafunc-1409"><span class="linenos">1409</span></a>                    <span class="p">)</span>
</span><span id="Metafunc-1410"><a href="#Metafunc-1410"><span class="linenos">1410</span></a>                <span class="n">arg_directness</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;indirect&quot;</span>
</span><span id="Metafunc-1411"><a href="#Metafunc-1411"><span class="linenos">1411</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1412"><a href="#Metafunc-1412"><span class="linenos">1412</span></a>            <span class="n">fail</span><span class="p">(</span>
</span><span id="Metafunc-1413"><a href="#Metafunc-1413"><span class="linenos">1413</span></a>                <span class="sa">f</span><span class="s2">&quot;In </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: expected Sequence or boolean&quot;</span>
</span><span id="Metafunc-1414"><a href="#Metafunc-1414"><span class="linenos">1414</span></a>                <span class="sa">f</span><span class="s2">&quot; for indirect, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">indirect</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Metafunc-1415"><a href="#Metafunc-1415"><span class="linenos">1415</span></a>                <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1416"><a href="#Metafunc-1416"><span class="linenos">1416</span></a>            <span class="p">)</span>
</span><span id="Metafunc-1417"><a href="#Metafunc-1417"><span class="linenos">1417</span></a>        <span class="k">return</span> <span class="n">arg_directness</span>
</span><span id="Metafunc-1418"><a href="#Metafunc-1418"><span class="linenos">1418</span></a>
</span><span id="Metafunc-1419"><a href="#Metafunc-1419"><span class="linenos">1419</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_if_using_arg_names</span><span class="p">(</span>
</span><span id="Metafunc-1420"><a href="#Metafunc-1420"><span class="linenos">1420</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc-1421"><a href="#Metafunc-1421"><span class="linenos">1421</span></a>        <span class="n">argnames</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc-1422"><a href="#Metafunc-1422"><span class="linenos">1422</span></a>        <span class="n">indirect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc-1423"><a href="#Metafunc-1423"><span class="linenos">1423</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc-1424"><a href="#Metafunc-1424"><span class="linenos">1424</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if all argnames are being used, by default values, or directly/indirectly.</span>
</span><span id="Metafunc-1425"><a href="#Metafunc-1425"><span class="linenos">1425</span></a>
</span><span id="Metafunc-1426"><a href="#Metafunc-1426"><span class="linenos">1426</span></a><span class="sd">        :param List[str] argnames: List of argument names passed to ``parametrize()``.</span>
</span><span id="Metafunc-1427"><a href="#Metafunc-1427"><span class="linenos">1427</span></a><span class="sd">        :param indirect: Same as the ``indirect`` parameter of ``parametrize()``.</span>
</span><span id="Metafunc-1428"><a href="#Metafunc-1428"><span class="linenos">1428</span></a><span class="sd">        :raises ValueError: If validation fails.</span>
</span><span id="Metafunc-1429"><a href="#Metafunc-1429"><span class="linenos">1429</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Metafunc-1430"><a href="#Metafunc-1430"><span class="linenos">1430</span></a>        <span class="n">default_arg_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">get_default_arg_names</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">))</span>
</span><span id="Metafunc-1431"><a href="#Metafunc-1431"><span class="linenos">1431</span></a>        <span class="n">func_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="Metafunc-1432"><a href="#Metafunc-1432"><span class="linenos">1432</span></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">:</span>
</span><span id="Metafunc-1433"><a href="#Metafunc-1433"><span class="linenos">1433</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
</span><span id="Metafunc-1434"><a href="#Metafunc-1434"><span class="linenos">1434</span></a>                <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">default_arg_names</span><span class="p">:</span>
</span><span id="Metafunc-1435"><a href="#Metafunc-1435"><span class="linenos">1435</span></a>                    <span class="n">fail</span><span class="p">(</span>
</span><span id="Metafunc-1436"><a href="#Metafunc-1436"><span class="linenos">1436</span></a>                        <span class="sa">f</span><span class="s2">&quot;In </span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">: function already takes an argument &#39;</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&#39; with a default value&quot;</span><span class="p">,</span>
</span><span id="Metafunc-1437"><a href="#Metafunc-1437"><span class="linenos">1437</span></a>                        <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1438"><a href="#Metafunc-1438"><span class="linenos">1438</span></a>                    <span class="p">)</span>
</span><span id="Metafunc-1439"><a href="#Metafunc-1439"><span class="linenos">1439</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1440"><a href="#Metafunc-1440"><span class="linenos">1440</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indirect</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
</span><span id="Metafunc-1441"><a href="#Metafunc-1441"><span class="linenos">1441</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;fixture&quot;</span> <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">indirect</span> <span class="k">else</span> <span class="s2">&quot;argument&quot;</span>
</span><span id="Metafunc-1442"><a href="#Metafunc-1442"><span class="linenos">1442</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc-1443"><a href="#Metafunc-1443"><span class="linenos">1443</span></a>                        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;fixture&quot;</span> <span class="k">if</span> <span class="n">indirect</span> <span class="k">else</span> <span class="s2">&quot;argument&quot;</span>
</span><span id="Metafunc-1444"><a href="#Metafunc-1444"><span class="linenos">1444</span></a>                    <span class="n">fail</span><span class="p">(</span>
</span><span id="Metafunc-1445"><a href="#Metafunc-1445"><span class="linenos">1445</span></a>                        <span class="sa">f</span><span class="s2">&quot;In </span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">: function uses no </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="Metafunc-1446"><a href="#Metafunc-1446"><span class="linenos">1446</span></a>                        <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc-1447"><a href="#Metafunc-1447"><span class="linenos">1447</span></a>                    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Objects passed to the :hook:<code>pytest_generate_tests</code> hook.</p>

<p>They help to inspect a test function and to generate tests according to
test configuration or values specified in the class or module where a
test function is defined.</p>
</div>


                            <div id="Metafunc.__init__" class="classattr">
                                        <input id="Metafunc.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Metafunc</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">definition</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">FunctionDefinition</span>,</span><span class="param">	<span class="n">fixtureinfo</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">FuncFixtureInfo</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="bp">cls</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">module</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Metafunc.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Metafunc.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Metafunc.__init__-1100"><a href="#Metafunc.__init__-1100"><span class="linenos">1100</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Metafunc.__init__-1101"><a href="#Metafunc.__init__-1101"><span class="linenos">1101</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1102"><a href="#Metafunc.__init__-1102"><span class="linenos">1102</span></a>        <span class="n">definition</span><span class="p">:</span> <span class="n">FunctionDefinition</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1103"><a href="#Metafunc.__init__-1103"><span class="linenos">1103</span></a>        <span class="n">fixtureinfo</span><span class="p">:</span> <span class="n">fixtures</span><span class="o">.</span><span class="n">FuncFixtureInfo</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1104"><a href="#Metafunc.__init__-1104"><span class="linenos">1104</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1105"><a href="#Metafunc.__init__-1105"><span class="linenos">1105</span></a>        <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1106"><a href="#Metafunc.__init__-1106"><span class="linenos">1106</span></a>        <span class="n">module</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1107"><a href="#Metafunc.__init__-1107"><span class="linenos">1107</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1108"><a href="#Metafunc.__init__-1108"><span class="linenos">1108</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc.__init__-1109"><a href="#Metafunc.__init__-1109"><span class="linenos">1109</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.__init__-1110"><a href="#Metafunc.__init__-1110"><span class="linenos">1110</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Metafunc.__init__-1111"><a href="#Metafunc.__init__-1111"><span class="linenos">1111</span></a>
</span><span id="Metafunc.__init__-1112"><a href="#Metafunc.__init__-1112"><span class="linenos">1112</span></a>        <span class="c1">#: Access to the underlying :class:`_pytest.python.FunctionDefinition`.</span>
</span><span id="Metafunc.__init__-1113"><a href="#Metafunc.__init__-1113"><span class="linenos">1113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">definition</span> <span class="o">=</span> <span class="n">definition</span>
</span><span id="Metafunc.__init__-1114"><a href="#Metafunc.__init__-1114"><span class="linenos">1114</span></a>
</span><span id="Metafunc.__init__-1115"><a href="#Metafunc.__init__-1115"><span class="linenos">1115</span></a>        <span class="c1">#: Access to the :class:`pytest.Config` object for the test session.</span>
</span><span id="Metafunc.__init__-1116"><a href="#Metafunc.__init__-1116"><span class="linenos">1116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="Metafunc.__init__-1117"><a href="#Metafunc.__init__-1117"><span class="linenos">1117</span></a>
</span><span id="Metafunc.__init__-1118"><a href="#Metafunc.__init__-1118"><span class="linenos">1118</span></a>        <span class="c1">#: The module object where the test function is defined in.</span>
</span><span id="Metafunc.__init__-1119"><a href="#Metafunc.__init__-1119"><span class="linenos">1119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="n">module</span>
</span><span id="Metafunc.__init__-1120"><a href="#Metafunc.__init__-1120"><span class="linenos">1120</span></a>
</span><span id="Metafunc.__init__-1121"><a href="#Metafunc.__init__-1121"><span class="linenos">1121</span></a>        <span class="c1">#: Underlying Python test function.</span>
</span><span id="Metafunc.__init__-1122"><a href="#Metafunc.__init__-1122"><span class="linenos">1122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">definition</span><span class="o">.</span><span class="n">obj</span>
</span><span id="Metafunc.__init__-1123"><a href="#Metafunc.__init__-1123"><span class="linenos">1123</span></a>
</span><span id="Metafunc.__init__-1124"><a href="#Metafunc.__init__-1124"><span class="linenos">1124</span></a>        <span class="c1">#: Set of fixture names required by the test function.</span>
</span><span id="Metafunc.__init__-1125"><a href="#Metafunc.__init__-1125"><span class="linenos">1125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fixturenames</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">names_closure</span>
</span><span id="Metafunc.__init__-1126"><a href="#Metafunc.__init__-1126"><span class="linenos">1126</span></a>
</span><span id="Metafunc.__init__-1127"><a href="#Metafunc.__init__-1127"><span class="linenos">1127</span></a>        <span class="c1">#: Class object where the test function is defined in or ``None``.</span>
</span><span id="Metafunc.__init__-1128"><a href="#Metafunc.__init__-1128"><span class="linenos">1128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="bp">cls</span>
</span><span id="Metafunc.__init__-1129"><a href="#Metafunc.__init__-1129"><span class="linenos">1129</span></a>
</span><span id="Metafunc.__init__-1130"><a href="#Metafunc.__init__-1130"><span class="linenos">1130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span> <span class="o">=</span> <span class="n">fixtureinfo</span><span class="o">.</span><span class="n">name2fixturedefs</span>
</span><span id="Metafunc.__init__-1131"><a href="#Metafunc.__init__-1131"><span class="linenos">1131</span></a>
</span><span id="Metafunc.__init__-1132"><a href="#Metafunc.__init__-1132"><span class="linenos">1132</span></a>        <span class="c1"># Result of parametrize().</span>
</span><span id="Metafunc.__init__-1133"><a href="#Metafunc.__init__-1133"><span class="linenos">1133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calls</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CallSpec2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


    

                            </div>
                            <div id="Metafunc.definition" class="classattr">
                                <div class="attr variable">
            <span class="name">definition</span>

        
    </div>
    <a class="headerlink" href="#Metafunc.definition"></a>
    
    

                            </div>
                            <div id="Metafunc.config" class="classattr">
                                <div class="attr variable">
            <span class="name">config</span>

        
    </div>
    <a class="headerlink" href="#Metafunc.config"></a>
    
    

                            </div>
                            <div id="Metafunc.module" class="classattr">
                                <div class="attr variable">
            <span class="name">module</span>

        
    </div>
    <a class="headerlink" href="#Metafunc.module"></a>
    
    

                            </div>
                            <div id="Metafunc.function" class="classattr">
                                <div class="attr variable">
            <span class="name">function</span>

        
    </div>
    <a class="headerlink" href="#Metafunc.function"></a>
    
    

                            </div>
                            <div id="Metafunc.fixturenames" class="classattr">
                                <div class="attr variable">
            <span class="name">fixturenames</span>

        
    </div>
    <a class="headerlink" href="#Metafunc.fixturenames"></a>
    
    

                            </div>
                            <div id="Metafunc.cls" class="classattr">
                                <div class="attr variable">
            <span class="name">cls</span>

        
    </div>
    <a class="headerlink" href="#Metafunc.cls"></a>
    
    

                            </div>
                            <div id="Metafunc.parametrize" class="classattr">
                                        <input id="Metafunc.parametrize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parametrize</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">argnames</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">argvalues</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">ParameterSet</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span><span class="p">],</span> <span class="nb">object</span><span class="p">]]</span>,</span><span class="param">	<span class="n">indirect</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">scope</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="s1">&#39;package&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_param_mark</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Metafunc.parametrize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Metafunc.parametrize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Metafunc.parametrize-1135"><a href="#Metafunc.parametrize-1135"><span class="linenos">1135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parametrize</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1136"><a href="#Metafunc.parametrize-1136"><span class="linenos">1136</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1137"><a href="#Metafunc.parametrize-1137"><span class="linenos">1137</span></a>        <span class="n">argnames</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Metafunc.parametrize-1138"><a href="#Metafunc.parametrize-1138"><span class="linenos">1138</span></a>        <span class="n">argvalues</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ParameterSet</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="nb">object</span><span class="p">],</span>
</span><span id="Metafunc.parametrize-1139"><a href="#Metafunc.parametrize-1139"><span class="linenos">1139</span></a>        <span class="n">indirect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1140"><a href="#Metafunc.parametrize-1140"><span class="linenos">1140</span></a>        <span class="n">ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1141"><a href="#Metafunc.parametrize-1141"><span class="linenos">1141</span></a>        <span class="n">scope</span><span class="p">:</span> <span class="n">_ScopeName</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1142"><a href="#Metafunc.parametrize-1142"><span class="linenos">1142</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1143"><a href="#Metafunc.parametrize-1143"><span class="linenos">1143</span></a>        <span class="n">_param_mark</span><span class="p">:</span> <span class="n">Mark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1144"><a href="#Metafunc.parametrize-1144"><span class="linenos">1144</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1145"><a href="#Metafunc.parametrize-1145"><span class="linenos">1145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add new invocations to the underlying test function using the list</span>
</span><span id="Metafunc.parametrize-1146"><a href="#Metafunc.parametrize-1146"><span class="linenos">1146</span></a><span class="sd">        of argvalues for the given argnames. Parametrization is performed</span>
</span><span id="Metafunc.parametrize-1147"><a href="#Metafunc.parametrize-1147"><span class="linenos">1147</span></a><span class="sd">        during the collection phase. If you need to setup expensive resources</span>
</span><span id="Metafunc.parametrize-1148"><a href="#Metafunc.parametrize-1148"><span class="linenos">1148</span></a><span class="sd">        see about setting indirect to do it rather than at test setup time.</span>
</span><span id="Metafunc.parametrize-1149"><a href="#Metafunc.parametrize-1149"><span class="linenos">1149</span></a>
</span><span id="Metafunc.parametrize-1150"><a href="#Metafunc.parametrize-1150"><span class="linenos">1150</span></a><span class="sd">        Can be called multiple times per test function (but only on different</span>
</span><span id="Metafunc.parametrize-1151"><a href="#Metafunc.parametrize-1151"><span class="linenos">1151</span></a><span class="sd">        argument names), in which case each call parametrizes all previous</span>
</span><span id="Metafunc.parametrize-1152"><a href="#Metafunc.parametrize-1152"><span class="linenos">1152</span></a><span class="sd">        parametrizations, e.g.</span>
</span><span id="Metafunc.parametrize-1153"><a href="#Metafunc.parametrize-1153"><span class="linenos">1153</span></a>
</span><span id="Metafunc.parametrize-1154"><a href="#Metafunc.parametrize-1154"><span class="linenos">1154</span></a><span class="sd">        ::</span>
</span><span id="Metafunc.parametrize-1155"><a href="#Metafunc.parametrize-1155"><span class="linenos">1155</span></a>
</span><span id="Metafunc.parametrize-1156"><a href="#Metafunc.parametrize-1156"><span class="linenos">1156</span></a><span class="sd">            unparametrized:         t</span>
</span><span id="Metafunc.parametrize-1157"><a href="#Metafunc.parametrize-1157"><span class="linenos">1157</span></a><span class="sd">            parametrize [&quot;x&quot;, &quot;y&quot;]: t[x], t[y]</span>
</span><span id="Metafunc.parametrize-1158"><a href="#Metafunc.parametrize-1158"><span class="linenos">1158</span></a><span class="sd">            parametrize [1, 2]:     t[x-1], t[x-2], t[y-1], t[y-2]</span>
</span><span id="Metafunc.parametrize-1159"><a href="#Metafunc.parametrize-1159"><span class="linenos">1159</span></a>
</span><span id="Metafunc.parametrize-1160"><a href="#Metafunc.parametrize-1160"><span class="linenos">1160</span></a><span class="sd">        :param argnames:</span>
</span><span id="Metafunc.parametrize-1161"><a href="#Metafunc.parametrize-1161"><span class="linenos">1161</span></a><span class="sd">            A comma-separated string denoting one or more argument names, or</span>
</span><span id="Metafunc.parametrize-1162"><a href="#Metafunc.parametrize-1162"><span class="linenos">1162</span></a><span class="sd">            a list/tuple of argument strings.</span>
</span><span id="Metafunc.parametrize-1163"><a href="#Metafunc.parametrize-1163"><span class="linenos">1163</span></a>
</span><span id="Metafunc.parametrize-1164"><a href="#Metafunc.parametrize-1164"><span class="linenos">1164</span></a><span class="sd">        :param argvalues:</span>
</span><span id="Metafunc.parametrize-1165"><a href="#Metafunc.parametrize-1165"><span class="linenos">1165</span></a><span class="sd">            The list of argvalues determines how often a test is invoked with</span>
</span><span id="Metafunc.parametrize-1166"><a href="#Metafunc.parametrize-1166"><span class="linenos">1166</span></a><span class="sd">            different argument values.</span>
</span><span id="Metafunc.parametrize-1167"><a href="#Metafunc.parametrize-1167"><span class="linenos">1167</span></a>
</span><span id="Metafunc.parametrize-1168"><a href="#Metafunc.parametrize-1168"><span class="linenos">1168</span></a><span class="sd">            If only one argname was specified argvalues is a list of values.</span>
</span><span id="Metafunc.parametrize-1169"><a href="#Metafunc.parametrize-1169"><span class="linenos">1169</span></a><span class="sd">            If N argnames were specified, argvalues must be a list of</span>
</span><span id="Metafunc.parametrize-1170"><a href="#Metafunc.parametrize-1170"><span class="linenos">1170</span></a><span class="sd">            N-tuples, where each tuple-element specifies a value for its</span>
</span><span id="Metafunc.parametrize-1171"><a href="#Metafunc.parametrize-1171"><span class="linenos">1171</span></a><span class="sd">            respective argname.</span>
</span><span id="Metafunc.parametrize-1172"><a href="#Metafunc.parametrize-1172"><span class="linenos">1172</span></a><span class="sd">        :type argvalues: Iterable[_pytest.mark.structures.ParameterSet | Sequence[object] | object]</span>
</span><span id="Metafunc.parametrize-1173"><a href="#Metafunc.parametrize-1173"><span class="linenos">1173</span></a><span class="sd">        :param indirect:</span>
</span><span id="Metafunc.parametrize-1174"><a href="#Metafunc.parametrize-1174"><span class="linenos">1174</span></a><span class="sd">            A list of arguments&#39; names (subset of argnames) or a boolean.</span>
</span><span id="Metafunc.parametrize-1175"><a href="#Metafunc.parametrize-1175"><span class="linenos">1175</span></a><span class="sd">            If True the list contains all names from the argnames. Each</span>
</span><span id="Metafunc.parametrize-1176"><a href="#Metafunc.parametrize-1176"><span class="linenos">1176</span></a><span class="sd">            argvalue corresponding to an argname in this list will</span>
</span><span id="Metafunc.parametrize-1177"><a href="#Metafunc.parametrize-1177"><span class="linenos">1177</span></a><span class="sd">            be passed as request.param to its respective argname fixture</span>
</span><span id="Metafunc.parametrize-1178"><a href="#Metafunc.parametrize-1178"><span class="linenos">1178</span></a><span class="sd">            function so that it can perform more expensive setups during the</span>
</span><span id="Metafunc.parametrize-1179"><a href="#Metafunc.parametrize-1179"><span class="linenos">1179</span></a><span class="sd">            setup phase of a test rather than at collection time.</span>
</span><span id="Metafunc.parametrize-1180"><a href="#Metafunc.parametrize-1180"><span class="linenos">1180</span></a>
</span><span id="Metafunc.parametrize-1181"><a href="#Metafunc.parametrize-1181"><span class="linenos">1181</span></a><span class="sd">        :param ids:</span>
</span><span id="Metafunc.parametrize-1182"><a href="#Metafunc.parametrize-1182"><span class="linenos">1182</span></a><span class="sd">            Sequence of (or generator for) ids for ``argvalues``,</span>
</span><span id="Metafunc.parametrize-1183"><a href="#Metafunc.parametrize-1183"><span class="linenos">1183</span></a><span class="sd">            or a callable to return part of the id for each argvalue.</span>
</span><span id="Metafunc.parametrize-1184"><a href="#Metafunc.parametrize-1184"><span class="linenos">1184</span></a>
</span><span id="Metafunc.parametrize-1185"><a href="#Metafunc.parametrize-1185"><span class="linenos">1185</span></a><span class="sd">            With sequences (and generators like ``itertools.count()``) the</span>
</span><span id="Metafunc.parametrize-1186"><a href="#Metafunc.parametrize-1186"><span class="linenos">1186</span></a><span class="sd">            returned ids should be of type ``string``, ``int``, ``float``,</span>
</span><span id="Metafunc.parametrize-1187"><a href="#Metafunc.parametrize-1187"><span class="linenos">1187</span></a><span class="sd">            ``bool``, or ``None``.</span>
</span><span id="Metafunc.parametrize-1188"><a href="#Metafunc.parametrize-1188"><span class="linenos">1188</span></a><span class="sd">            They are mapped to the corresponding index in ``argvalues``.</span>
</span><span id="Metafunc.parametrize-1189"><a href="#Metafunc.parametrize-1189"><span class="linenos">1189</span></a><span class="sd">            ``None`` means to use the auto-generated id.</span>
</span><span id="Metafunc.parametrize-1190"><a href="#Metafunc.parametrize-1190"><span class="linenos">1190</span></a>
</span><span id="Metafunc.parametrize-1191"><a href="#Metafunc.parametrize-1191"><span class="linenos">1191</span></a><span class="sd">            If it is a callable it will be called for each entry in</span>
</span><span id="Metafunc.parametrize-1192"><a href="#Metafunc.parametrize-1192"><span class="linenos">1192</span></a><span class="sd">            ``argvalues``, and the return value is used as part of the</span>
</span><span id="Metafunc.parametrize-1193"><a href="#Metafunc.parametrize-1193"><span class="linenos">1193</span></a><span class="sd">            auto-generated id for the whole set (where parts are joined with</span>
</span><span id="Metafunc.parametrize-1194"><a href="#Metafunc.parametrize-1194"><span class="linenos">1194</span></a><span class="sd">            dashes (&quot;-&quot;)).</span>
</span><span id="Metafunc.parametrize-1195"><a href="#Metafunc.parametrize-1195"><span class="linenos">1195</span></a><span class="sd">            This is useful to provide more specific ids for certain items, e.g.</span>
</span><span id="Metafunc.parametrize-1196"><a href="#Metafunc.parametrize-1196"><span class="linenos">1196</span></a><span class="sd">            dates.  Returning ``None`` will use an auto-generated id.</span>
</span><span id="Metafunc.parametrize-1197"><a href="#Metafunc.parametrize-1197"><span class="linenos">1197</span></a>
</span><span id="Metafunc.parametrize-1198"><a href="#Metafunc.parametrize-1198"><span class="linenos">1198</span></a><span class="sd">            If no ids are provided they will be generated automatically from</span>
</span><span id="Metafunc.parametrize-1199"><a href="#Metafunc.parametrize-1199"><span class="linenos">1199</span></a><span class="sd">            the argvalues.</span>
</span><span id="Metafunc.parametrize-1200"><a href="#Metafunc.parametrize-1200"><span class="linenos">1200</span></a>
</span><span id="Metafunc.parametrize-1201"><a href="#Metafunc.parametrize-1201"><span class="linenos">1201</span></a><span class="sd">        :param scope:</span>
</span><span id="Metafunc.parametrize-1202"><a href="#Metafunc.parametrize-1202"><span class="linenos">1202</span></a><span class="sd">            If specified it denotes the scope of the parameters.</span>
</span><span id="Metafunc.parametrize-1203"><a href="#Metafunc.parametrize-1203"><span class="linenos">1203</span></a><span class="sd">            The scope is used for grouping tests by parameter instances.</span>
</span><span id="Metafunc.parametrize-1204"><a href="#Metafunc.parametrize-1204"><span class="linenos">1204</span></a><span class="sd">            It will also override any fixture-function defined scope, allowing</span>
</span><span id="Metafunc.parametrize-1205"><a href="#Metafunc.parametrize-1205"><span class="linenos">1205</span></a><span class="sd">            to set a dynamic scope using test context or configuration.</span>
</span><span id="Metafunc.parametrize-1206"><a href="#Metafunc.parametrize-1206"><span class="linenos">1206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Metafunc.parametrize-1207"><a href="#Metafunc.parametrize-1207"><span class="linenos">1207</span></a>        <span class="n">argnames</span><span class="p">,</span> <span class="n">parametersets</span> <span class="o">=</span> <span class="n">ParameterSet</span><span class="o">.</span><span class="n">_for_parametrize</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1208"><a href="#Metafunc.parametrize-1208"><span class="linenos">1208</span></a>            <span class="n">argnames</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1209"><a href="#Metafunc.parametrize-1209"><span class="linenos">1209</span></a>            <span class="n">argvalues</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1210"><a href="#Metafunc.parametrize-1210"><span class="linenos">1210</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1211"><a href="#Metafunc.parametrize-1211"><span class="linenos">1211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1212"><a href="#Metafunc.parametrize-1212"><span class="linenos">1212</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1213"><a href="#Metafunc.parametrize-1213"><span class="linenos">1213</span></a>        <span class="p">)</span>
</span><span id="Metafunc.parametrize-1214"><a href="#Metafunc.parametrize-1214"><span class="linenos">1214</span></a>        <span class="k">del</span> <span class="n">argvalues</span>
</span><span id="Metafunc.parametrize-1215"><a href="#Metafunc.parametrize-1215"><span class="linenos">1215</span></a>
</span><span id="Metafunc.parametrize-1216"><a href="#Metafunc.parametrize-1216"><span class="linenos">1216</span></a>        <span class="k">if</span> <span class="s2">&quot;request&quot;</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1217"><a href="#Metafunc.parametrize-1217"><span class="linenos">1217</span></a>            <span class="n">fail</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1218"><a href="#Metafunc.parametrize-1218"><span class="linenos">1218</span></a>                <span class="s2">&quot;&#39;request&#39; is a reserved name and cannot be used in @pytest.mark.parametrize&quot;</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1219"><a href="#Metafunc.parametrize-1219"><span class="linenos">1219</span></a>                <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1220"><a href="#Metafunc.parametrize-1220"><span class="linenos">1220</span></a>            <span class="p">)</span>
</span><span id="Metafunc.parametrize-1221"><a href="#Metafunc.parametrize-1221"><span class="linenos">1221</span></a>
</span><span id="Metafunc.parametrize-1222"><a href="#Metafunc.parametrize-1222"><span class="linenos">1222</span></a>        <span class="k">if</span> <span class="n">scope</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1223"><a href="#Metafunc.parametrize-1223"><span class="linenos">1223</span></a>            <span class="n">scope_</span> <span class="o">=</span> <span class="n">Scope</span><span class="o">.</span><span class="n">from_user</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1224"><a href="#Metafunc.parametrize-1224"><span class="linenos">1224</span></a>                <span class="n">scope</span><span class="p">,</span> <span class="n">descr</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;parametrize() call in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Metafunc.parametrize-1225"><a href="#Metafunc.parametrize-1225"><span class="linenos">1225</span></a>            <span class="p">)</span>
</span><span id="Metafunc.parametrize-1226"><a href="#Metafunc.parametrize-1226"><span class="linenos">1226</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1227"><a href="#Metafunc.parametrize-1227"><span class="linenos">1227</span></a>            <span class="n">scope_</span> <span class="o">=</span> <span class="n">_find_parametrized_scope</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="p">,</span> <span class="n">indirect</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1228"><a href="#Metafunc.parametrize-1228"><span class="linenos">1228</span></a>
</span><span id="Metafunc.parametrize-1229"><a href="#Metafunc.parametrize-1229"><span class="linenos">1229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_if_using_arg_names</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="n">indirect</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1230"><a href="#Metafunc.parametrize-1230"><span class="linenos">1230</span></a>
</span><span id="Metafunc.parametrize-1231"><a href="#Metafunc.parametrize-1231"><span class="linenos">1231</span></a>        <span class="c1"># Use any already (possibly) generated ids with parametrize Marks.</span>
</span><span id="Metafunc.parametrize-1232"><a href="#Metafunc.parametrize-1232"><span class="linenos">1232</span></a>        <span class="k">if</span> <span class="n">_param_mark</span> <span class="ow">and</span> <span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1233"><a href="#Metafunc.parametrize-1233"><span class="linenos">1233</span></a>            <span class="n">generated_ids</span> <span class="o">=</span> <span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span><span class="o">.</span><span class="n">_param_ids_generated</span>
</span><span id="Metafunc.parametrize-1234"><a href="#Metafunc.parametrize-1234"><span class="linenos">1234</span></a>            <span class="k">if</span> <span class="n">generated_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1235"><a href="#Metafunc.parametrize-1235"><span class="linenos">1235</span></a>                <span class="n">ids</span> <span class="o">=</span> <span class="n">generated_ids</span>
</span><span id="Metafunc.parametrize-1236"><a href="#Metafunc.parametrize-1236"><span class="linenos">1236</span></a>
</span><span id="Metafunc.parametrize-1237"><a href="#Metafunc.parametrize-1237"><span class="linenos">1237</span></a>        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_parameter_set_ids</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1238"><a href="#Metafunc.parametrize-1238"><span class="linenos">1238</span></a>            <span class="n">argnames</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">parametersets</span><span class="p">,</span> <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">nodeid</span>
</span><span id="Metafunc.parametrize-1239"><a href="#Metafunc.parametrize-1239"><span class="linenos">1239</span></a>        <span class="p">)</span>
</span><span id="Metafunc.parametrize-1240"><a href="#Metafunc.parametrize-1240"><span class="linenos">1240</span></a>
</span><span id="Metafunc.parametrize-1241"><a href="#Metafunc.parametrize-1241"><span class="linenos">1241</span></a>        <span class="c1"># Store used (possibly generated) ids with parametrize Marks.</span>
</span><span id="Metafunc.parametrize-1242"><a href="#Metafunc.parametrize-1242"><span class="linenos">1242</span></a>        <span class="k">if</span> <span class="n">_param_mark</span> <span class="ow">and</span> <span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span> <span class="ow">and</span> <span class="n">generated_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1243"><a href="#Metafunc.parametrize-1243"><span class="linenos">1243</span></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">_param_mark</span><span class="o">.</span><span class="n">_param_ids_from</span><span class="p">,</span> <span class="s2">&quot;_param_ids_generated&quot;</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1244"><a href="#Metafunc.parametrize-1244"><span class="linenos">1244</span></a>
</span><span id="Metafunc.parametrize-1245"><a href="#Metafunc.parametrize-1245"><span class="linenos">1245</span></a>        <span class="c1"># Add funcargs as fixturedefs to fixtureinfo.arg2fixturedefs by registering</span>
</span><span id="Metafunc.parametrize-1246"><a href="#Metafunc.parametrize-1246"><span class="linenos">1246</span></a>        <span class="c1"># artificial &quot;pseudo&quot; FixtureDef&#39;s so that later at test execution time we can</span>
</span><span id="Metafunc.parametrize-1247"><a href="#Metafunc.parametrize-1247"><span class="linenos">1247</span></a>        <span class="c1"># rely on a proper FixtureDef to exist for fixture setup.</span>
</span><span id="Metafunc.parametrize-1248"><a href="#Metafunc.parametrize-1248"><span class="linenos">1248</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc.parametrize-1249"><a href="#Metafunc.parametrize-1249"><span class="linenos">1249</span></a>        <span class="c1"># If we have a scope that is higher than function, we need</span>
</span><span id="Metafunc.parametrize-1250"><a href="#Metafunc.parametrize-1250"><span class="linenos">1250</span></a>        <span class="c1"># to make sure we only ever create an according fixturedef on</span>
</span><span id="Metafunc.parametrize-1251"><a href="#Metafunc.parametrize-1251"><span class="linenos">1251</span></a>        <span class="c1"># a per-scope basis. We thus store and cache the fixturedef on the</span>
</span><span id="Metafunc.parametrize-1252"><a href="#Metafunc.parametrize-1252"><span class="linenos">1252</span></a>        <span class="c1"># node related to the scope.</span>
</span><span id="Metafunc.parametrize-1253"><a href="#Metafunc.parametrize-1253"><span class="linenos">1253</span></a>        <span class="k">if</span> <span class="n">scope_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Function</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1254"><a href="#Metafunc.parametrize-1254"><span class="linenos">1254</span></a>            <span class="n">collector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">parent</span>
</span><span id="Metafunc.parametrize-1255"><a href="#Metafunc.parametrize-1255"><span class="linenos">1255</span></a>            <span class="k">assert</span> <span class="n">collector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Metafunc.parametrize-1256"><a href="#Metafunc.parametrize-1256"><span class="linenos">1256</span></a>            <span class="n">node</span> <span class="o">=</span> <span class="n">get_scope_node</span><span class="p">(</span><span class="n">collector</span><span class="p">,</span> <span class="n">scope_</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1257"><a href="#Metafunc.parametrize-1257"><span class="linenos">1257</span></a>            <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1258"><a href="#Metafunc.parametrize-1258"><span class="linenos">1258</span></a>                <span class="c1"># If used class scope and there is no class, use module-level</span>
</span><span id="Metafunc.parametrize-1259"><a href="#Metafunc.parametrize-1259"><span class="linenos">1259</span></a>                <span class="c1"># collector (for now).</span>
</span><span id="Metafunc.parametrize-1260"><a href="#Metafunc.parametrize-1260"><span class="linenos">1260</span></a>                <span class="k">if</span> <span class="n">scope_</span> <span class="ow">is</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Class</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1261"><a href="#Metafunc.parametrize-1261"><span class="linenos">1261</span></a>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collector</span><span class="p">,</span> <span class="n">Module</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1262"><a href="#Metafunc.parametrize-1262"><span class="linenos">1262</span></a>                    <span class="n">node</span> <span class="o">=</span> <span class="n">collector</span>
</span><span id="Metafunc.parametrize-1263"><a href="#Metafunc.parametrize-1263"><span class="linenos">1263</span></a>                <span class="c1"># If used package scope and there is no package, use session</span>
</span><span id="Metafunc.parametrize-1264"><a href="#Metafunc.parametrize-1264"><span class="linenos">1264</span></a>                <span class="c1"># (for now).</span>
</span><span id="Metafunc.parametrize-1265"><a href="#Metafunc.parametrize-1265"><span class="linenos">1265</span></a>                <span class="k">elif</span> <span class="n">scope_</span> <span class="ow">is</span> <span class="n">Scope</span><span class="o">.</span><span class="n">Package</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1266"><a href="#Metafunc.parametrize-1266"><span class="linenos">1266</span></a>                    <span class="n">node</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="n">session</span>
</span><span id="Metafunc.parametrize-1267"><a href="#Metafunc.parametrize-1267"><span class="linenos">1267</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1268"><a href="#Metafunc.parametrize-1268"><span class="linenos">1268</span></a>                    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Unhandled missing scope: </span><span class="si">{</span><span class="n">scope</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Metafunc.parametrize-1269"><a href="#Metafunc.parametrize-1269"><span class="linenos">1269</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1270"><a href="#Metafunc.parametrize-1270"><span class="linenos">1270</span></a>            <span class="n">name2pseudofixturedef</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Metafunc.parametrize-1271"><a href="#Metafunc.parametrize-1271"><span class="linenos">1271</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1272"><a href="#Metafunc.parametrize-1272"><span class="linenos">1272</span></a>            <span class="n">default</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FixtureDef</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Metafunc.parametrize-1273"><a href="#Metafunc.parametrize-1273"><span class="linenos">1273</span></a>            <span class="n">name2pseudofixturedef</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">stash</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1274"><a href="#Metafunc.parametrize-1274"><span class="linenos">1274</span></a>                <span class="n">name2pseudofixturedef_key</span><span class="p">,</span> <span class="n">default</span>
</span><span id="Metafunc.parametrize-1275"><a href="#Metafunc.parametrize-1275"><span class="linenos">1275</span></a>            <span class="p">)</span>
</span><span id="Metafunc.parametrize-1276"><a href="#Metafunc.parametrize-1276"><span class="linenos">1276</span></a>        <span class="n">arg_directness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_args_directness</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="n">indirect</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1277"><a href="#Metafunc.parametrize-1277"><span class="linenos">1277</span></a>        <span class="k">for</span> <span class="n">argname</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1278"><a href="#Metafunc.parametrize-1278"><span class="linenos">1278</span></a>            <span class="k">if</span> <span class="n">arg_directness</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;indirect&quot;</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1279"><a href="#Metafunc.parametrize-1279"><span class="linenos">1279</span></a>                <span class="k">continue</span>
</span><span id="Metafunc.parametrize-1280"><a href="#Metafunc.parametrize-1280"><span class="linenos">1280</span></a>            <span class="k">if</span> <span class="n">name2pseudofixturedef</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">argname</span> <span class="ow">in</span> <span class="n">name2pseudofixturedef</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1281"><a href="#Metafunc.parametrize-1281"><span class="linenos">1281</span></a>                <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">name2pseudofixturedef</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span>
</span><span id="Metafunc.parametrize-1282"><a href="#Metafunc.parametrize-1282"><span class="linenos">1282</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1283"><a href="#Metafunc.parametrize-1283"><span class="linenos">1283</span></a>                <span class="n">fixturedef</span> <span class="o">=</span> <span class="n">FixtureDef</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1284"><a href="#Metafunc.parametrize-1284"><span class="linenos">1284</span></a>                    <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1285"><a href="#Metafunc.parametrize-1285"><span class="linenos">1285</span></a>                    <span class="n">baseid</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1286"><a href="#Metafunc.parametrize-1286"><span class="linenos">1286</span></a>                    <span class="n">argname</span><span class="o">=</span><span class="n">argname</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1287"><a href="#Metafunc.parametrize-1287"><span class="linenos">1287</span></a>                    <span class="n">func</span><span class="o">=</span><span class="n">get_direct_param_fixture_func</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1288"><a href="#Metafunc.parametrize-1288"><span class="linenos">1288</span></a>                    <span class="n">scope</span><span class="o">=</span><span class="n">scope_</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1289"><a href="#Metafunc.parametrize-1289"><span class="linenos">1289</span></a>                    <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1290"><a href="#Metafunc.parametrize-1290"><span class="linenos">1290</span></a>                    <span class="n">ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1291"><a href="#Metafunc.parametrize-1291"><span class="linenos">1291</span></a>                    <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1292"><a href="#Metafunc.parametrize-1292"><span class="linenos">1292</span></a>                <span class="p">)</span>
</span><span id="Metafunc.parametrize-1293"><a href="#Metafunc.parametrize-1293"><span class="linenos">1293</span></a>                <span class="k">if</span> <span class="n">name2pseudofixturedef</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Metafunc.parametrize-1294"><a href="#Metafunc.parametrize-1294"><span class="linenos">1294</span></a>                    <span class="n">name2pseudofixturedef</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">=</span> <span class="n">fixturedef</span>
</span><span id="Metafunc.parametrize-1295"><a href="#Metafunc.parametrize-1295"><span class="linenos">1295</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_arg2fixturedefs</span><span class="p">[</span><span class="n">argname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">fixturedef</span><span class="p">]</span>
</span><span id="Metafunc.parametrize-1296"><a href="#Metafunc.parametrize-1296"><span class="linenos">1296</span></a>
</span><span id="Metafunc.parametrize-1297"><a href="#Metafunc.parametrize-1297"><span class="linenos">1297</span></a>        <span class="c1"># Create the new calls: if we are parametrize() multiple times (by applying the decorator</span>
</span><span id="Metafunc.parametrize-1298"><a href="#Metafunc.parametrize-1298"><span class="linenos">1298</span></a>        <span class="c1"># more than once) then we accumulate those calls generating the cartesian product</span>
</span><span id="Metafunc.parametrize-1299"><a href="#Metafunc.parametrize-1299"><span class="linenos">1299</span></a>        <span class="c1"># of all calls.</span>
</span><span id="Metafunc.parametrize-1300"><a href="#Metafunc.parametrize-1300"><span class="linenos">1300</span></a>        <span class="n">newcalls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Metafunc.parametrize-1301"><a href="#Metafunc.parametrize-1301"><span class="linenos">1301</span></a>        <span class="k">for</span> <span class="n">callspec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calls</span> <span class="ow">or</span> <span class="p">[</span><span class="n">CallSpec2</span><span class="p">()]:</span>
</span><span id="Metafunc.parametrize-1302"><a href="#Metafunc.parametrize-1302"><span class="linenos">1302</span></a>            <span class="k">for</span> <span class="n">param_index</span><span class="p">,</span> <span class="p">(</span><span class="n">param_id</span><span class="p">,</span> <span class="n">param_set</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1303"><a href="#Metafunc.parametrize-1303"><span class="linenos">1303</span></a>                <span class="nb">zip</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">parametersets</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1304"><a href="#Metafunc.parametrize-1304"><span class="linenos">1304</span></a>            <span class="p">):</span>
</span><span id="Metafunc.parametrize-1305"><a href="#Metafunc.parametrize-1305"><span class="linenos">1305</span></a>                <span class="n">newcallspec</span> <span class="o">=</span> <span class="n">callspec</span><span class="o">.</span><span class="n">setmulti</span><span class="p">(</span>
</span><span id="Metafunc.parametrize-1306"><a href="#Metafunc.parametrize-1306"><span class="linenos">1306</span></a>                    <span class="n">argnames</span><span class="o">=</span><span class="n">argnames</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1307"><a href="#Metafunc.parametrize-1307"><span class="linenos">1307</span></a>                    <span class="n">valset</span><span class="o">=</span><span class="n">param_set</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1308"><a href="#Metafunc.parametrize-1308"><span class="linenos">1308</span></a>                    <span class="nb">id</span><span class="o">=</span><span class="n">param_id</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1309"><a href="#Metafunc.parametrize-1309"><span class="linenos">1309</span></a>                    <span class="n">marks</span><span class="o">=</span><span class="n">param_set</span><span class="o">.</span><span class="n">marks</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1310"><a href="#Metafunc.parametrize-1310"><span class="linenos">1310</span></a>                    <span class="n">scope</span><span class="o">=</span><span class="n">scope_</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1311"><a href="#Metafunc.parametrize-1311"><span class="linenos">1311</span></a>                    <span class="n">param_index</span><span class="o">=</span><span class="n">param_index</span><span class="p">,</span>
</span><span id="Metafunc.parametrize-1312"><a href="#Metafunc.parametrize-1312"><span class="linenos">1312</span></a>                <span class="p">)</span>
</span><span id="Metafunc.parametrize-1313"><a href="#Metafunc.parametrize-1313"><span class="linenos">1313</span></a>                <span class="n">newcalls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newcallspec</span><span class="p">)</span>
</span><span id="Metafunc.parametrize-1314"><a href="#Metafunc.parametrize-1314"><span class="linenos">1314</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calls</span> <span class="o">=</span> <span class="n">newcalls</span>
</span></pre></div>


            <div class="docstring"><p>Add new invocations to the underlying test function using the list
of argvalues for the given argnames. Parametrization is performed
during the collection phase. If you need to setup expensive resources
see about setting indirect to do it rather than at test setup time.</p>

<p>Can be called multiple times per test function (but only on different
argument names), in which case each call parametrizes all previous
parametrizations, e.g.</p>

<p>::</p>

<pre><code>unparametrized:         t
parametrize ["x", "y"]: t[x], t[y]
parametrize [1, 2]:     t[x-1], t[x-2], t[y-1], t[y-2]
</code></pre>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>argnames</strong>: 
A comma-separated string denoting one or more argument names, or
a list/tuple of argument strings.</p></li>
<li><p><strong>argvalues</strong>: 
The list of argvalues determines how often a test is invoked with
different argument values.</p>

<p>If only one argname was specified argvalues is a list of values.
If N argnames were specified, argvalues must be a list of
N-tuples, where each tuple-element specifies a value for its
respective argname.</p></li>
<li><p><strong>indirect</strong>: 
A list of arguments' names (subset of argnames) or a boolean.
If True the list contains all names from the argnames. Each
argvalue corresponding to an argname in this list will
be passed as request.param to its respective argname fixture
function so that it can perform more expensive setups during the
setup phase of a test rather than at collection time.</p></li>
<li><p><strong>ids</strong>: 
Sequence of (or generator for) ids for <code>argvalues</code>,
or a callable to return part of the id for each argvalue.</p>

<p>With sequences (and generators like <code>itertools.count()</code>) the
returned ids should be of type <code>string</code>, <code>int</code>, <code>float</code>,
<code>bool</code>, or <code>None</code>.
They are mapped to the corresponding index in <code>argvalues</code>.
<code>None</code> means to use the auto-generated id.</p>

<p>If it is a callable it will be called for each entry in
<code>argvalues</code>, and the return value is used as part of the
auto-generated id for the whole set (where parts are joined with
dashes ("-")).
This is useful to provide more specific ids for certain items, e.g.
dates.  Returning <code>None</code> will use an auto-generated id.</p>

<p>If no ids are provided they will be generated automatically from
the argvalues.</p></li>
<li><p><strong>scope</strong>: 
If specified it denotes the scope of the parameters.
The scope is used for grouping tests by parameter instances.
It will also override any fixture-function defined scope, allowing
to set a dynamic scope using test context or configuration.</p></li>
</ul>
</div>


                            </div>
                </section>
                <section id="Module">
                            <input id="Module-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Module</span><wbr>(<span class="base"><a href="#File">pytest.File</a></span>, <span class="base">_pytest.python.PyCollector</span>):

                <label class="view-source-button" for="Module-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Module"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Module-543"><a href="#Module-543"><span class="linenos">543</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Module</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">File</span><span class="p">,</span> <span class="n">PyCollector</span><span class="p">):</span>
</span><span id="Module-544"><a href="#Module-544"><span class="linenos">544</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Collector for test classes and functions in a Python module.&quot;&quot;&quot;</span>
</span><span id="Module-545"><a href="#Module-545"><span class="linenos">545</span></a>
</span><span id="Module-546"><a href="#Module-546"><span class="linenos">546</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getobj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Module-547"><a href="#Module-547"><span class="linenos">547</span></a>        <span class="k">return</span> <span class="n">importtestmodule</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
</span><span id="Module-548"><a href="#Module-548"><span class="linenos">548</span></a>
</span><span id="Module-549"><a href="#Module-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Module-550"><a href="#Module-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_module_fixture</span><span class="p">()</span>
</span><span id="Module-551"><a href="#Module-551"><span class="linenos">551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_function_fixture</span><span class="p">()</span>
</span><span id="Module-552"><a href="#Module-552"><span class="linenos">552</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">parsefactories</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Module-553"><a href="#Module-553"><span class="linenos">553</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span><span id="Module-554"><a href="#Module-554"><span class="linenos">554</span></a>
</span><span id="Module-555"><a href="#Module-555"><span class="linenos">555</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_register_setup_module_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-556"><a href="#Module-556"><span class="linenos">556</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an autouse, module-scoped fixture for the collected module object</span>
</span><span id="Module-557"><a href="#Module-557"><span class="linenos">557</span></a><span class="sd">        that invokes setUpModule/tearDownModule if either or both are available.</span>
</span><span id="Module-558"><a href="#Module-558"><span class="linenos">558</span></a>
</span><span id="Module-559"><a href="#Module-559"><span class="linenos">559</span></a><span class="sd">        Using a fixture to invoke this methods ensures we play nicely and unsurprisingly with</span>
</span><span id="Module-560"><a href="#Module-560"><span class="linenos">560</span></a><span class="sd">        other fixtures (#517).</span>
</span><span id="Module-561"><a href="#Module-561"><span class="linenos">561</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Module-562"><a href="#Module-562"><span class="linenos">562</span></a>        <span class="n">setup_module</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Module-563"><a href="#Module-563"><span class="linenos">563</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;setUpModule&quot;</span><span class="p">,</span> <span class="s2">&quot;setup_module&quot;</span><span class="p">)</span>
</span><span id="Module-564"><a href="#Module-564"><span class="linenos">564</span></a>        <span class="p">)</span>
</span><span id="Module-565"><a href="#Module-565"><span class="linenos">565</span></a>        <span class="n">teardown_module</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Module-566"><a href="#Module-566"><span class="linenos">566</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;tearDownModule&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown_module&quot;</span><span class="p">)</span>
</span><span id="Module-567"><a href="#Module-567"><span class="linenos">567</span></a>        <span class="p">)</span>
</span><span id="Module-568"><a href="#Module-568"><span class="linenos">568</span></a>
</span><span id="Module-569"><a href="#Module-569"><span class="linenos">569</span></a>        <span class="k">if</span> <span class="n">setup_module</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">teardown_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-570"><a href="#Module-570"><span class="linenos">570</span></a>            <span class="k">return</span>
</span><span id="Module-571"><a href="#Module-571"><span class="linenos">571</span></a>
</span><span id="Module-572"><a href="#Module-572"><span class="linenos">572</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">xunit_setup_module_fixture</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="Module-573"><a href="#Module-573"><span class="linenos">573</span></a>            <span class="n">module</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">module</span>
</span><span id="Module-574"><a href="#Module-574"><span class="linenos">574</span></a>            <span class="k">if</span> <span class="n">setup_module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-575"><a href="#Module-575"><span class="linenos">575</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">setup_module</span><span class="p">,</span> <span class="n">module</span><span class="p">)</span>
</span><span id="Module-576"><a href="#Module-576"><span class="linenos">576</span></a>            <span class="k">yield</span>
</span><span id="Module-577"><a href="#Module-577"><span class="linenos">577</span></a>            <span class="k">if</span> <span class="n">teardown_module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-578"><a href="#Module-578"><span class="linenos">578</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">teardown_module</span><span class="p">,</span> <span class="n">module</span><span class="p">)</span>
</span><span id="Module-579"><a href="#Module-579"><span class="linenos">579</span></a>
</span><span id="Module-580"><a href="#Module-580"><span class="linenos">580</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">_register_fixture</span><span class="p">(</span>
</span><span id="Module-581"><a href="#Module-581"><span class="linenos">581</span></a>            <span class="c1"># Use a unique name to speed up lookup.</span>
</span><span id="Module-582"><a href="#Module-582"><span class="linenos">582</span></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;_xunit_setup_module_fixture_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Module-583"><a href="#Module-583"><span class="linenos">583</span></a>            <span class="n">func</span><span class="o">=</span><span class="n">xunit_setup_module_fixture</span><span class="p">,</span>
</span><span id="Module-584"><a href="#Module-584"><span class="linenos">584</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Module-585"><a href="#Module-585"><span class="linenos">585</span></a>            <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
</span><span id="Module-586"><a href="#Module-586"><span class="linenos">586</span></a>            <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Module-587"><a href="#Module-587"><span class="linenos">587</span></a>        <span class="p">)</span>
</span><span id="Module-588"><a href="#Module-588"><span class="linenos">588</span></a>
</span><span id="Module-589"><a href="#Module-589"><span class="linenos">589</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_register_setup_function_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-590"><a href="#Module-590"><span class="linenos">590</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an autouse, function-scoped fixture for the collected module object</span>
</span><span id="Module-591"><a href="#Module-591"><span class="linenos">591</span></a><span class="sd">        that invokes setup_function/teardown_function if either or both are available.</span>
</span><span id="Module-592"><a href="#Module-592"><span class="linenos">592</span></a>
</span><span id="Module-593"><a href="#Module-593"><span class="linenos">593</span></a><span class="sd">        Using a fixture to invoke this methods ensures we play nicely and unsurprisingly with</span>
</span><span id="Module-594"><a href="#Module-594"><span class="linenos">594</span></a><span class="sd">        other fixtures (#517).</span>
</span><span id="Module-595"><a href="#Module-595"><span class="linenos">595</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Module-596"><a href="#Module-596"><span class="linenos">596</span></a>        <span class="n">setup_function</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;setup_function&quot;</span><span class="p">,))</span>
</span><span id="Module-597"><a href="#Module-597"><span class="linenos">597</span></a>        <span class="n">teardown_function</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Module-598"><a href="#Module-598"><span class="linenos">598</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;teardown_function&quot;</span><span class="p">,)</span>
</span><span id="Module-599"><a href="#Module-599"><span class="linenos">599</span></a>        <span class="p">)</span>
</span><span id="Module-600"><a href="#Module-600"><span class="linenos">600</span></a>        <span class="k">if</span> <span class="n">setup_function</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">teardown_function</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-601"><a href="#Module-601"><span class="linenos">601</span></a>            <span class="k">return</span>
</span><span id="Module-602"><a href="#Module-602"><span class="linenos">602</span></a>
</span><span id="Module-603"><a href="#Module-603"><span class="linenos">603</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">xunit_setup_function_fixture</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
</span><span id="Module-604"><a href="#Module-604"><span class="linenos">604</span></a>            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-605"><a href="#Module-605"><span class="linenos">605</span></a>                <span class="c1"># in this case we are bound to an instance, so we need to let</span>
</span><span id="Module-606"><a href="#Module-606"><span class="linenos">606</span></a>                <span class="c1"># setup_method handle this</span>
</span><span id="Module-607"><a href="#Module-607"><span class="linenos">607</span></a>                <span class="k">yield</span>
</span><span id="Module-608"><a href="#Module-608"><span class="linenos">608</span></a>                <span class="k">return</span>
</span><span id="Module-609"><a href="#Module-609"><span class="linenos">609</span></a>            <span class="n">function</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">function</span>
</span><span id="Module-610"><a href="#Module-610"><span class="linenos">610</span></a>            <span class="k">if</span> <span class="n">setup_function</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-611"><a href="#Module-611"><span class="linenos">611</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">setup_function</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>
</span><span id="Module-612"><a href="#Module-612"><span class="linenos">612</span></a>            <span class="k">yield</span>
</span><span id="Module-613"><a href="#Module-613"><span class="linenos">613</span></a>            <span class="k">if</span> <span class="n">teardown_function</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Module-614"><a href="#Module-614"><span class="linenos">614</span></a>                <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">teardown_function</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>
</span><span id="Module-615"><a href="#Module-615"><span class="linenos">615</span></a>
</span><span id="Module-616"><a href="#Module-616"><span class="linenos">616</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">_register_fixture</span><span class="p">(</span>
</span><span id="Module-617"><a href="#Module-617"><span class="linenos">617</span></a>            <span class="c1"># Use a unique name to speed up lookup.</span>
</span><span id="Module-618"><a href="#Module-618"><span class="linenos">618</span></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;_xunit_setup_function_fixture_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="Module-619"><a href="#Module-619"><span class="linenos">619</span></a>            <span class="n">func</span><span class="o">=</span><span class="n">xunit_setup_function_fixture</span><span class="p">,</span>
</span><span id="Module-620"><a href="#Module-620"><span class="linenos">620</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Module-621"><a href="#Module-621"><span class="linenos">621</span></a>            <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="Module-622"><a href="#Module-622"><span class="linenos">622</span></a>            <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Module-623"><a href="#Module-623"><span class="linenos">623</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Collector for test classes and functions in a Python module.</p>
</div>


                            <div id="Module.collect" class="classattr">
                                        <input id="Module.collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Module.collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Module.collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Module.collect-549"><a href="#Module.collect-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Module.collect-550"><a href="#Module.collect-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_module_fixture</span><span class="p">()</span>
</span><span id="Module.collect-551"><a href="#Module.collect-551"><span class="linenos">551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_setup_function_fixture</span><span class="p">()</span>
</span><span id="Module.collect-552"><a href="#Module.collect-552"><span class="linenos">552</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_fixturemanager</span><span class="o">.</span><span class="n">parsefactories</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Module.collect-553"><a href="#Module.collect-553"><span class="linenos">553</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Collect children (items and collectors) for this collector.</p>
</div>


                            </div>
                </section>
                <section id="MonkeyPatch">
                            <input id="MonkeyPatch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">MonkeyPatch</span>:

                <label class="view-source-button" for="MonkeyPatch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch-117"><a href="#MonkeyPatch-117"><span class="linenos">117</span></a><span class="nd">@final</span>
</span><span id="MonkeyPatch-118"><a href="#MonkeyPatch-118"><span class="linenos">118</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MonkeyPatch</span><span class="p">:</span>
</span><span id="MonkeyPatch-119"><a href="#MonkeyPatch-119"><span class="linenos">119</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper to conveniently monkeypatch attributes/items/environment</span>
</span><span id="MonkeyPatch-120"><a href="#MonkeyPatch-120"><span class="linenos">120</span></a><span class="sd">    variables/syspath.</span>
</span><span id="MonkeyPatch-121"><a href="#MonkeyPatch-121"><span class="linenos">121</span></a>
</span><span id="MonkeyPatch-122"><a href="#MonkeyPatch-122"><span class="linenos">122</span></a><span class="sd">    Returned by the :fixture:`monkeypatch` fixture.</span>
</span><span id="MonkeyPatch-123"><a href="#MonkeyPatch-123"><span class="linenos">123</span></a>
</span><span id="MonkeyPatch-124"><a href="#MonkeyPatch-124"><span class="linenos">124</span></a><span class="sd">    .. versionchanged:: 6.2</span>
</span><span id="MonkeyPatch-125"><a href="#MonkeyPatch-125"><span class="linenos">125</span></a><span class="sd">        Can now also be used directly as `pytest.MonkeyPatch()`, for when</span>
</span><span id="MonkeyPatch-126"><a href="#MonkeyPatch-126"><span class="linenos">126</span></a><span class="sd">        the fixture is not available. In this case, use</span>
</span><span id="MonkeyPatch-127"><a href="#MonkeyPatch-127"><span class="linenos">127</span></a><span class="sd">        :meth:`with MonkeyPatch.context() as mp: &lt;context&gt;` or remember to call</span>
</span><span id="MonkeyPatch-128"><a href="#MonkeyPatch-128"><span class="linenos">128</span></a><span class="sd">        :meth:`undo` explicitly.</span>
</span><span id="MonkeyPatch-129"><a href="#MonkeyPatch-129"><span class="linenos">129</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-130"><a href="#MonkeyPatch-130"><span class="linenos">130</span></a>
</span><span id="MonkeyPatch-131"><a href="#MonkeyPatch-131"><span class="linenos">131</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-132"><a href="#MonkeyPatch-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">object</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MonkeyPatch-133"><a href="#MonkeyPatch-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MonkeyPatch-134"><a href="#MonkeyPatch-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MonkeyPatch-135"><a href="#MonkeyPatch-135"><span class="linenos">135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MonkeyPatch-136"><a href="#MonkeyPatch-136"><span class="linenos">136</span></a>
</span><span id="MonkeyPatch-137"><a href="#MonkeyPatch-137"><span class="linenos">137</span></a>    <span class="nd">@classmethod</span>
</span><span id="MonkeyPatch-138"><a href="#MonkeyPatch-138"><span class="linenos">138</span></a>    <span class="nd">@contextmanager</span>
</span><span id="MonkeyPatch-139"><a href="#MonkeyPatch-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">MonkeyPatch</span><span class="p">]:</span>
</span><span id="MonkeyPatch-140"><a href="#MonkeyPatch-140"><span class="linenos">140</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context manager that returns a new :class:`MonkeyPatch` object</span>
</span><span id="MonkeyPatch-141"><a href="#MonkeyPatch-141"><span class="linenos">141</span></a><span class="sd">        which undoes any patching done inside the ``with`` block upon exit.</span>
</span><span id="MonkeyPatch-142"><a href="#MonkeyPatch-142"><span class="linenos">142</span></a>
</span><span id="MonkeyPatch-143"><a href="#MonkeyPatch-143"><span class="linenos">143</span></a><span class="sd">        Example:</span>
</span><span id="MonkeyPatch-144"><a href="#MonkeyPatch-144"><span class="linenos">144</span></a>
</span><span id="MonkeyPatch-145"><a href="#MonkeyPatch-145"><span class="linenos">145</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="MonkeyPatch-146"><a href="#MonkeyPatch-146"><span class="linenos">146</span></a>
</span><span id="MonkeyPatch-147"><a href="#MonkeyPatch-147"><span class="linenos">147</span></a><span class="sd">            import functools</span>
</span><span id="MonkeyPatch-148"><a href="#MonkeyPatch-148"><span class="linenos">148</span></a>
</span><span id="MonkeyPatch-149"><a href="#MonkeyPatch-149"><span class="linenos">149</span></a>
</span><span id="MonkeyPatch-150"><a href="#MonkeyPatch-150"><span class="linenos">150</span></a><span class="sd">            def test_partial(monkeypatch):</span>
</span><span id="MonkeyPatch-151"><a href="#MonkeyPatch-151"><span class="linenos">151</span></a><span class="sd">                with monkeypatch.context() as m:</span>
</span><span id="MonkeyPatch-152"><a href="#MonkeyPatch-152"><span class="linenos">152</span></a><span class="sd">                    m.setattr(functools, &quot;partial&quot;, 3)</span>
</span><span id="MonkeyPatch-153"><a href="#MonkeyPatch-153"><span class="linenos">153</span></a>
</span><span id="MonkeyPatch-154"><a href="#MonkeyPatch-154"><span class="linenos">154</span></a><span class="sd">        Useful in situations where it is desired to undo some patches before the test ends,</span>
</span><span id="MonkeyPatch-155"><a href="#MonkeyPatch-155"><span class="linenos">155</span></a><span class="sd">        such as mocking ``stdlib`` functions that might break pytest itself if mocked (for examples</span>
</span><span id="MonkeyPatch-156"><a href="#MonkeyPatch-156"><span class="linenos">156</span></a><span class="sd">        of this see :issue:`3290`).</span>
</span><span id="MonkeyPatch-157"><a href="#MonkeyPatch-157"><span class="linenos">157</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-158"><a href="#MonkeyPatch-158"><span class="linenos">158</span></a>        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
</span><span id="MonkeyPatch-159"><a href="#MonkeyPatch-159"><span class="linenos">159</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="MonkeyPatch-160"><a href="#MonkeyPatch-160"><span class="linenos">160</span></a>            <span class="k">yield</span> <span class="n">m</span>
</span><span id="MonkeyPatch-161"><a href="#MonkeyPatch-161"><span class="linenos">161</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="MonkeyPatch-162"><a href="#MonkeyPatch-162"><span class="linenos">162</span></a>            <span class="n">m</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
</span><span id="MonkeyPatch-163"><a href="#MonkeyPatch-163"><span class="linenos">163</span></a>
</span><span id="MonkeyPatch-164"><a href="#MonkeyPatch-164"><span class="linenos">164</span></a>    <span class="nd">@overload</span>
</span><span id="MonkeyPatch-165"><a href="#MonkeyPatch-165"><span class="linenos">165</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setattr</span><span class="p">(</span>
</span><span id="MonkeyPatch-166"><a href="#MonkeyPatch-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MonkeyPatch-167"><a href="#MonkeyPatch-167"><span class="linenos">167</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="MonkeyPatch-168"><a href="#MonkeyPatch-168"><span class="linenos">168</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="MonkeyPatch-169"><a href="#MonkeyPatch-169"><span class="linenos">169</span></a>        <span class="n">value</span><span class="p">:</span> <span class="n">Notset</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
</span><span id="MonkeyPatch-170"><a href="#MonkeyPatch-170"><span class="linenos">170</span></a>        <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
</span><span id="MonkeyPatch-171"><a href="#MonkeyPatch-171"><span class="linenos">171</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>
</span><span id="MonkeyPatch-172"><a href="#MonkeyPatch-172"><span class="linenos">172</span></a>
</span><span id="MonkeyPatch-173"><a href="#MonkeyPatch-173"><span class="linenos">173</span></a>    <span class="nd">@overload</span>
</span><span id="MonkeyPatch-174"><a href="#MonkeyPatch-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setattr</span><span class="p">(</span>
</span><span id="MonkeyPatch-175"><a href="#MonkeyPatch-175"><span class="linenos">175</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MonkeyPatch-176"><a href="#MonkeyPatch-176"><span class="linenos">176</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="MonkeyPatch-177"><a href="#MonkeyPatch-177"><span class="linenos">177</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="MonkeyPatch-178"><a href="#MonkeyPatch-178"><span class="linenos">178</span></a>        <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="MonkeyPatch-179"><a href="#MonkeyPatch-179"><span class="linenos">179</span></a>        <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
</span><span id="MonkeyPatch-180"><a href="#MonkeyPatch-180"><span class="linenos">180</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>
</span><span id="MonkeyPatch-181"><a href="#MonkeyPatch-181"><span class="linenos">181</span></a>
</span><span id="MonkeyPatch-182"><a href="#MonkeyPatch-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setattr</span><span class="p">(</span>
</span><span id="MonkeyPatch-183"><a href="#MonkeyPatch-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MonkeyPatch-184"><a href="#MonkeyPatch-184"><span class="linenos">184</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="MonkeyPatch-185"><a href="#MonkeyPatch-185"><span class="linenos">185</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="MonkeyPatch-186"><a href="#MonkeyPatch-186"><span class="linenos">186</span></a>        <span class="n">value</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">notset</span><span class="p">,</span>
</span><span id="MonkeyPatch-187"><a href="#MonkeyPatch-187"><span class="linenos">187</span></a>        <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="MonkeyPatch-188"><a href="#MonkeyPatch-188"><span class="linenos">188</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-189"><a href="#MonkeyPatch-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-190"><a href="#MonkeyPatch-190"><span class="linenos">190</span></a><span class="sd">        Set attribute value on target, memorizing the old value.</span>
</span><span id="MonkeyPatch-191"><a href="#MonkeyPatch-191"><span class="linenos">191</span></a>
</span><span id="MonkeyPatch-192"><a href="#MonkeyPatch-192"><span class="linenos">192</span></a><span class="sd">        For example:</span>
</span><span id="MonkeyPatch-193"><a href="#MonkeyPatch-193"><span class="linenos">193</span></a>
</span><span id="MonkeyPatch-194"><a href="#MonkeyPatch-194"><span class="linenos">194</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="MonkeyPatch-195"><a href="#MonkeyPatch-195"><span class="linenos">195</span></a>
</span><span id="MonkeyPatch-196"><a href="#MonkeyPatch-196"><span class="linenos">196</span></a><span class="sd">            import os</span>
</span><span id="MonkeyPatch-197"><a href="#MonkeyPatch-197"><span class="linenos">197</span></a>
</span><span id="MonkeyPatch-198"><a href="#MonkeyPatch-198"><span class="linenos">198</span></a><span class="sd">            monkeypatch.setattr(os, &quot;getcwd&quot;, lambda: &quot;/&quot;)</span>
</span><span id="MonkeyPatch-199"><a href="#MonkeyPatch-199"><span class="linenos">199</span></a>
</span><span id="MonkeyPatch-200"><a href="#MonkeyPatch-200"><span class="linenos">200</span></a><span class="sd">        The code above replaces the :func:`os.getcwd` function by a ``lambda`` which</span>
</span><span id="MonkeyPatch-201"><a href="#MonkeyPatch-201"><span class="linenos">201</span></a><span class="sd">        always returns ``&quot;/&quot;``.</span>
</span><span id="MonkeyPatch-202"><a href="#MonkeyPatch-202"><span class="linenos">202</span></a>
</span><span id="MonkeyPatch-203"><a href="#MonkeyPatch-203"><span class="linenos">203</span></a><span class="sd">        For convenience, you can specify a string as ``target`` which</span>
</span><span id="MonkeyPatch-204"><a href="#MonkeyPatch-204"><span class="linenos">204</span></a><span class="sd">        will be interpreted as a dotted import path, with the last part</span>
</span><span id="MonkeyPatch-205"><a href="#MonkeyPatch-205"><span class="linenos">205</span></a><span class="sd">        being the attribute name:</span>
</span><span id="MonkeyPatch-206"><a href="#MonkeyPatch-206"><span class="linenos">206</span></a>
</span><span id="MonkeyPatch-207"><a href="#MonkeyPatch-207"><span class="linenos">207</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="MonkeyPatch-208"><a href="#MonkeyPatch-208"><span class="linenos">208</span></a>
</span><span id="MonkeyPatch-209"><a href="#MonkeyPatch-209"><span class="linenos">209</span></a><span class="sd">            monkeypatch.setattr(&quot;os.getcwd&quot;, lambda: &quot;/&quot;)</span>
</span><span id="MonkeyPatch-210"><a href="#MonkeyPatch-210"><span class="linenos">210</span></a>
</span><span id="MonkeyPatch-211"><a href="#MonkeyPatch-211"><span class="linenos">211</span></a><span class="sd">        Raises :class:`AttributeError` if the attribute does not exist, unless</span>
</span><span id="MonkeyPatch-212"><a href="#MonkeyPatch-212"><span class="linenos">212</span></a><span class="sd">        ``raising`` is set to False.</span>
</span><span id="MonkeyPatch-213"><a href="#MonkeyPatch-213"><span class="linenos">213</span></a>
</span><span id="MonkeyPatch-214"><a href="#MonkeyPatch-214"><span class="linenos">214</span></a><span class="sd">        **Where to patch**</span>
</span><span id="MonkeyPatch-215"><a href="#MonkeyPatch-215"><span class="linenos">215</span></a>
</span><span id="MonkeyPatch-216"><a href="#MonkeyPatch-216"><span class="linenos">216</span></a><span class="sd">        ``monkeypatch.setattr`` works by (temporarily) changing the object that a name points to with another one.</span>
</span><span id="MonkeyPatch-217"><a href="#MonkeyPatch-217"><span class="linenos">217</span></a><span class="sd">        There can be many names pointing to any individual object, so for patching to work you must ensure</span>
</span><span id="MonkeyPatch-218"><a href="#MonkeyPatch-218"><span class="linenos">218</span></a><span class="sd">        that you patch the name used by the system under test.</span>
</span><span id="MonkeyPatch-219"><a href="#MonkeyPatch-219"><span class="linenos">219</span></a>
</span><span id="MonkeyPatch-220"><a href="#MonkeyPatch-220"><span class="linenos">220</span></a><span class="sd">        See the section :ref:`Where to patch &lt;python:where-to-patch&gt;` in the :mod:`unittest.mock`</span>
</span><span id="MonkeyPatch-221"><a href="#MonkeyPatch-221"><span class="linenos">221</span></a><span class="sd">        docs for a complete explanation, which is meant for :func:`unittest.mock.patch` but</span>
</span><span id="MonkeyPatch-222"><a href="#MonkeyPatch-222"><span class="linenos">222</span></a><span class="sd">        applies to ``monkeypatch.setattr`` as well.</span>
</span><span id="MonkeyPatch-223"><a href="#MonkeyPatch-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-224"><a href="#MonkeyPatch-224"><span class="linenos">224</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="MonkeyPatch-225"><a href="#MonkeyPatch-225"><span class="linenos">225</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
</span><span id="MonkeyPatch-226"><a href="#MonkeyPatch-226"><span class="linenos">226</span></a>
</span><span id="MonkeyPatch-227"><a href="#MonkeyPatch-227"><span class="linenos">227</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Notset</span><span class="p">):</span>
</span><span id="MonkeyPatch-228"><a href="#MonkeyPatch-228"><span class="linenos">228</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch-229"><a href="#MonkeyPatch-229"><span class="linenos">229</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="MonkeyPatch-230"><a href="#MonkeyPatch-230"><span class="linenos">230</span></a>                    <span class="s2">&quot;use setattr(target, name, value) or &quot;</span>
</span><span id="MonkeyPatch-231"><a href="#MonkeyPatch-231"><span class="linenos">231</span></a>                    <span class="s2">&quot;setattr(target, value) with target being a dotted &quot;</span>
</span><span id="MonkeyPatch-232"><a href="#MonkeyPatch-232"><span class="linenos">232</span></a>                    <span class="s2">&quot;import string&quot;</span>
</span><span id="MonkeyPatch-233"><a href="#MonkeyPatch-233"><span class="linenos">233</span></a>                <span class="p">)</span>
</span><span id="MonkeyPatch-234"><a href="#MonkeyPatch-234"><span class="linenos">234</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="MonkeyPatch-235"><a href="#MonkeyPatch-235"><span class="linenos">235</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">derive_importpath</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">raising</span><span class="p">)</span>
</span><span id="MonkeyPatch-236"><a href="#MonkeyPatch-236"><span class="linenos">236</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch-237"><a href="#MonkeyPatch-237"><span class="linenos">237</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch-238"><a href="#MonkeyPatch-238"><span class="linenos">238</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="MonkeyPatch-239"><a href="#MonkeyPatch-239"><span class="linenos">239</span></a>                    <span class="s2">&quot;use setattr(target, name, value) with name being a string or &quot;</span>
</span><span id="MonkeyPatch-240"><a href="#MonkeyPatch-240"><span class="linenos">240</span></a>                    <span class="s2">&quot;setattr(target, value) with target being a dotted &quot;</span>
</span><span id="MonkeyPatch-241"><a href="#MonkeyPatch-241"><span class="linenos">241</span></a>                    <span class="s2">&quot;import string&quot;</span>
</span><span id="MonkeyPatch-242"><a href="#MonkeyPatch-242"><span class="linenos">242</span></a>                <span class="p">)</span>
</span><span id="MonkeyPatch-243"><a href="#MonkeyPatch-243"><span class="linenos">243</span></a>
</span><span id="MonkeyPatch-244"><a href="#MonkeyPatch-244"><span class="linenos">244</span></a>        <span class="n">oldval</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch-245"><a href="#MonkeyPatch-245"><span class="linenos">245</span></a>        <span class="k">if</span> <span class="n">raising</span> <span class="ow">and</span> <span class="n">oldval</span> <span class="ow">is</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="MonkeyPatch-246"><a href="#MonkeyPatch-246"><span class="linenos">246</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">target</span><span class="si">!r}</span><span class="s2"> has no attribute </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="MonkeyPatch-247"><a href="#MonkeyPatch-247"><span class="linenos">247</span></a>
</span><span id="MonkeyPatch-248"><a href="#MonkeyPatch-248"><span class="linenos">248</span></a>        <span class="c1"># avoid class descriptors like staticmethod/classmethod</span>
</span><span id="MonkeyPatch-249"><a href="#MonkeyPatch-249"><span class="linenos">249</span></a>        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
</span><span id="MonkeyPatch-250"><a href="#MonkeyPatch-250"><span class="linenos">250</span></a>            <span class="n">oldval</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch-251"><a href="#MonkeyPatch-251"><span class="linenos">251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">oldval</span><span class="p">))</span>
</span><span id="MonkeyPatch-252"><a href="#MonkeyPatch-252"><span class="linenos">252</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="MonkeyPatch-253"><a href="#MonkeyPatch-253"><span class="linenos">253</span></a>
</span><span id="MonkeyPatch-254"><a href="#MonkeyPatch-254"><span class="linenos">254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delattr</span><span class="p">(</span>
</span><span id="MonkeyPatch-255"><a href="#MonkeyPatch-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MonkeyPatch-256"><a href="#MonkeyPatch-256"><span class="linenos">256</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="MonkeyPatch-257"><a href="#MonkeyPatch-257"><span class="linenos">257</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Notset</span> <span class="o">=</span> <span class="n">notset</span><span class="p">,</span>
</span><span id="MonkeyPatch-258"><a href="#MonkeyPatch-258"><span class="linenos">258</span></a>        <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="MonkeyPatch-259"><a href="#MonkeyPatch-259"><span class="linenos">259</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-260"><a href="#MonkeyPatch-260"><span class="linenos">260</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete attribute ``name`` from ``target``.</span>
</span><span id="MonkeyPatch-261"><a href="#MonkeyPatch-261"><span class="linenos">261</span></a>
</span><span id="MonkeyPatch-262"><a href="#MonkeyPatch-262"><span class="linenos">262</span></a><span class="sd">        If no ``name`` is specified and ``target`` is a string</span>
</span><span id="MonkeyPatch-263"><a href="#MonkeyPatch-263"><span class="linenos">263</span></a><span class="sd">        it will be interpreted as a dotted import path with the</span>
</span><span id="MonkeyPatch-264"><a href="#MonkeyPatch-264"><span class="linenos">264</span></a><span class="sd">        last part being the attribute name.</span>
</span><span id="MonkeyPatch-265"><a href="#MonkeyPatch-265"><span class="linenos">265</span></a>
</span><span id="MonkeyPatch-266"><a href="#MonkeyPatch-266"><span class="linenos">266</span></a><span class="sd">        Raises AttributeError it the attribute does not exist, unless</span>
</span><span id="MonkeyPatch-267"><a href="#MonkeyPatch-267"><span class="linenos">267</span></a><span class="sd">        ``raising`` is set to False.</span>
</span><span id="MonkeyPatch-268"><a href="#MonkeyPatch-268"><span class="linenos">268</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-269"><a href="#MonkeyPatch-269"><span class="linenos">269</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="MonkeyPatch-270"><a href="#MonkeyPatch-270"><span class="linenos">270</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
</span><span id="MonkeyPatch-271"><a href="#MonkeyPatch-271"><span class="linenos">271</span></a>
</span><span id="MonkeyPatch-272"><a href="#MonkeyPatch-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">Notset</span><span class="p">):</span>
</span><span id="MonkeyPatch-273"><a href="#MonkeyPatch-273"><span class="linenos">273</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch-274"><a href="#MonkeyPatch-274"><span class="linenos">274</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="MonkeyPatch-275"><a href="#MonkeyPatch-275"><span class="linenos">275</span></a>                    <span class="s2">&quot;use delattr(target, name) or &quot;</span>
</span><span id="MonkeyPatch-276"><a href="#MonkeyPatch-276"><span class="linenos">276</span></a>                    <span class="s2">&quot;delattr(target) with target being a dotted &quot;</span>
</span><span id="MonkeyPatch-277"><a href="#MonkeyPatch-277"><span class="linenos">277</span></a>                    <span class="s2">&quot;import string&quot;</span>
</span><span id="MonkeyPatch-278"><a href="#MonkeyPatch-278"><span class="linenos">278</span></a>                <span class="p">)</span>
</span><span id="MonkeyPatch-279"><a href="#MonkeyPatch-279"><span class="linenos">279</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">derive_importpath</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">raising</span><span class="p">)</span>
</span><span id="MonkeyPatch-280"><a href="#MonkeyPatch-280"><span class="linenos">280</span></a>
</span><span id="MonkeyPatch-281"><a href="#MonkeyPatch-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="MonkeyPatch-282"><a href="#MonkeyPatch-282"><span class="linenos">282</span></a>            <span class="k">if</span> <span class="n">raising</span><span class="p">:</span>
</span><span id="MonkeyPatch-283"><a href="#MonkeyPatch-283"><span class="linenos">283</span></a>                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch-284"><a href="#MonkeyPatch-284"><span class="linenos">284</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch-285"><a href="#MonkeyPatch-285"><span class="linenos">285</span></a>            <span class="n">oldval</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch-286"><a href="#MonkeyPatch-286"><span class="linenos">286</span></a>            <span class="c1"># Avoid class descriptors like staticmethod/classmethod.</span>
</span><span id="MonkeyPatch-287"><a href="#MonkeyPatch-287"><span class="linenos">287</span></a>            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
</span><span id="MonkeyPatch-288"><a href="#MonkeyPatch-288"><span class="linenos">288</span></a>                <span class="n">oldval</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch-289"><a href="#MonkeyPatch-289"><span class="linenos">289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">oldval</span><span class="p">))</span>
</span><span id="MonkeyPatch-290"><a href="#MonkeyPatch-290"><span class="linenos">290</span></a>            <span class="nb">delattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch-291"><a href="#MonkeyPatch-291"><span class="linenos">291</span></a>
</span><span id="MonkeyPatch-292"><a href="#MonkeyPatch-292"><span class="linenos">292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="n">K</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">V</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-293"><a href="#MonkeyPatch-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set dictionary entry ``name`` to value.&quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-294"><a href="#MonkeyPatch-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">dic</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)))</span>
</span><span id="MonkeyPatch-295"><a href="#MonkeyPatch-295"><span class="linenos">295</span></a>        <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch-296"><a href="#MonkeyPatch-296"><span class="linenos">296</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># type: ignore[index]</span>
</span><span id="MonkeyPatch-297"><a href="#MonkeyPatch-297"><span class="linenos">297</span></a>
</span><span id="MonkeyPatch-298"><a href="#MonkeyPatch-298"><span class="linenos">298</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="n">K</span><span class="p">,</span> <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-299"><a href="#MonkeyPatch-299"><span class="linenos">299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete ``name`` from dict.</span>
</span><span id="MonkeyPatch-300"><a href="#MonkeyPatch-300"><span class="linenos">300</span></a>
</span><span id="MonkeyPatch-301"><a href="#MonkeyPatch-301"><span class="linenos">301</span></a><span class="sd">        Raises ``KeyError`` if it doesn&#39;t exist, unless ``raising`` is set to</span>
</span><span id="MonkeyPatch-302"><a href="#MonkeyPatch-302"><span class="linenos">302</span></a><span class="sd">        False.</span>
</span><span id="MonkeyPatch-303"><a href="#MonkeyPatch-303"><span class="linenos">303</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-304"><a href="#MonkeyPatch-304"><span class="linenos">304</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
</span><span id="MonkeyPatch-305"><a href="#MonkeyPatch-305"><span class="linenos">305</span></a>            <span class="k">if</span> <span class="n">raising</span><span class="p">:</span>
</span><span id="MonkeyPatch-306"><a href="#MonkeyPatch-306"><span class="linenos">306</span></a>                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch-307"><a href="#MonkeyPatch-307"><span class="linenos">307</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch-308"><a href="#MonkeyPatch-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">dic</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)))</span>
</span><span id="MonkeyPatch-309"><a href="#MonkeyPatch-309"><span class="linenos">309</span></a>            <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch-310"><a href="#MonkeyPatch-310"><span class="linenos">310</span></a>            <span class="k">del</span> <span class="n">dic</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="MonkeyPatch-311"><a href="#MonkeyPatch-311"><span class="linenos">311</span></a>
</span><span id="MonkeyPatch-312"><a href="#MonkeyPatch-312"><span class="linenos">312</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prepend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-313"><a href="#MonkeyPatch-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set environment variable ``name`` to ``value``.</span>
</span><span id="MonkeyPatch-314"><a href="#MonkeyPatch-314"><span class="linenos">314</span></a>
</span><span id="MonkeyPatch-315"><a href="#MonkeyPatch-315"><span class="linenos">315</span></a><span class="sd">        If ``prepend`` is a character, read the current environment variable</span>
</span><span id="MonkeyPatch-316"><a href="#MonkeyPatch-316"><span class="linenos">316</span></a><span class="sd">        value and prepend the ``value`` adjoined with the ``prepend``</span>
</span><span id="MonkeyPatch-317"><a href="#MonkeyPatch-317"><span class="linenos">317</span></a><span class="sd">        character.</span>
</span><span id="MonkeyPatch-318"><a href="#MonkeyPatch-318"><span class="linenos">318</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-319"><a href="#MonkeyPatch-319"><span class="linenos">319</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch-320"><a href="#MonkeyPatch-320"><span class="linenos">320</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>  <span class="c1"># type: ignore[unreachable]</span>
</span><span id="MonkeyPatch-321"><a href="#MonkeyPatch-321"><span class="linenos">321</span></a>                <span class="n">PytestWarning</span><span class="p">(</span>
</span><span id="MonkeyPatch-322"><a href="#MonkeyPatch-322"><span class="linenos">322</span></a>                    <span class="sa">f</span><span class="s2">&quot;Value of environment variable </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> type should be str, but got &quot;</span>
</span><span id="MonkeyPatch-323"><a href="#MonkeyPatch-323"><span class="linenos">323</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">); converted to str implicitly&quot;</span>
</span><span id="MonkeyPatch-324"><a href="#MonkeyPatch-324"><span class="linenos">324</span></a>                <span class="p">),</span>
</span><span id="MonkeyPatch-325"><a href="#MonkeyPatch-325"><span class="linenos">325</span></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MonkeyPatch-326"><a href="#MonkeyPatch-326"><span class="linenos">326</span></a>            <span class="p">)</span>
</span><span id="MonkeyPatch-327"><a href="#MonkeyPatch-327"><span class="linenos">327</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="MonkeyPatch-328"><a href="#MonkeyPatch-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="n">prepend</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
</span><span id="MonkeyPatch-329"><a href="#MonkeyPatch-329"><span class="linenos">329</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="n">prepend</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="MonkeyPatch-330"><a href="#MonkeyPatch-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="MonkeyPatch-331"><a href="#MonkeyPatch-331"><span class="linenos">331</span></a>
</span><span id="MonkeyPatch-332"><a href="#MonkeyPatch-332"><span class="linenos">332</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-333"><a href="#MonkeyPatch-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete ``name`` from the environment.</span>
</span><span id="MonkeyPatch-334"><a href="#MonkeyPatch-334"><span class="linenos">334</span></a>
</span><span id="MonkeyPatch-335"><a href="#MonkeyPatch-335"><span class="linenos">335</span></a><span class="sd">        Raises ``KeyError`` if it does not exist, unless ``raising`` is set to</span>
</span><span id="MonkeyPatch-336"><a href="#MonkeyPatch-336"><span class="linenos">336</span></a><span class="sd">        False.</span>
</span><span id="MonkeyPatch-337"><a href="#MonkeyPatch-337"><span class="linenos">337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-338"><a href="#MonkeyPatch-338"><span class="linenos">338</span></a>        <span class="n">environ</span><span class="p">:</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span>
</span><span id="MonkeyPatch-339"><a href="#MonkeyPatch-339"><span class="linenos">339</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delitem</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="n">raising</span><span class="p">)</span>
</span><span id="MonkeyPatch-340"><a href="#MonkeyPatch-340"><span class="linenos">340</span></a>
</span><span id="MonkeyPatch-341"><a href="#MonkeyPatch-341"><span class="linenos">341</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">syspath_prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-342"><a href="#MonkeyPatch-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepend ``path`` to ``sys.path`` list of import locations.&quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-343"><a href="#MonkeyPatch-343"><span class="linenos">343</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-344"><a href="#MonkeyPatch-344"><span class="linenos">344</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[:]</span>
</span><span id="MonkeyPatch-345"><a href="#MonkeyPatch-345"><span class="linenos">345</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="MonkeyPatch-346"><a href="#MonkeyPatch-346"><span class="linenos">346</span></a>
</span><span id="MonkeyPatch-347"><a href="#MonkeyPatch-347"><span class="linenos">347</span></a>        <span class="c1"># https://github.com/pypa/setuptools/blob/d8b901bc/docs/pkg_resources.txt#L162-L171</span>
</span><span id="MonkeyPatch-348"><a href="#MonkeyPatch-348"><span class="linenos">348</span></a>        <span class="c1"># this is only needed when pkg_resources was already loaded by the namespace package</span>
</span><span id="MonkeyPatch-349"><a href="#MonkeyPatch-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="s2">&quot;pkg_resources&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
</span><span id="MonkeyPatch-350"><a href="#MonkeyPatch-350"><span class="linenos">350</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">pkg_resources</span><span class="w"> </span><span class="kn">import</span> <span class="n">fixup_namespace_packages</span>
</span><span id="MonkeyPatch-351"><a href="#MonkeyPatch-351"><span class="linenos">351</span></a>
</span><span id="MonkeyPatch-352"><a href="#MonkeyPatch-352"><span class="linenos">352</span></a>            <span class="n">fixup_namespace_packages</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="MonkeyPatch-353"><a href="#MonkeyPatch-353"><span class="linenos">353</span></a>
</span><span id="MonkeyPatch-354"><a href="#MonkeyPatch-354"><span class="linenos">354</span></a>        <span class="c1"># A call to syspathinsert() usually means that the caller wants to</span>
</span><span id="MonkeyPatch-355"><a href="#MonkeyPatch-355"><span class="linenos">355</span></a>        <span class="c1"># import some dynamically created files, thus with python3 we</span>
</span><span id="MonkeyPatch-356"><a href="#MonkeyPatch-356"><span class="linenos">356</span></a>        <span class="c1"># invalidate its import caches.</span>
</span><span id="MonkeyPatch-357"><a href="#MonkeyPatch-357"><span class="linenos">357</span></a>        <span class="c1"># This is especially important when any namespace package is in use,</span>
</span><span id="MonkeyPatch-358"><a href="#MonkeyPatch-358"><span class="linenos">358</span></a>        <span class="c1"># since then the mtime based FileFinder cache (that gets created in</span>
</span><span id="MonkeyPatch-359"><a href="#MonkeyPatch-359"><span class="linenos">359</span></a>        <span class="c1"># this case already) gets not invalidated when writing the new files</span>
</span><span id="MonkeyPatch-360"><a href="#MonkeyPatch-360"><span class="linenos">360</span></a>        <span class="c1"># quickly afterwards.</span>
</span><span id="MonkeyPatch-361"><a href="#MonkeyPatch-361"><span class="linenos">361</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">importlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">invalidate_caches</span>
</span><span id="MonkeyPatch-362"><a href="#MonkeyPatch-362"><span class="linenos">362</span></a>
</span><span id="MonkeyPatch-363"><a href="#MonkeyPatch-363"><span class="linenos">363</span></a>        <span class="n">invalidate_caches</span><span class="p">()</span>
</span><span id="MonkeyPatch-364"><a href="#MonkeyPatch-364"><span class="linenos">364</span></a>
</span><span id="MonkeyPatch-365"><a href="#MonkeyPatch-365"><span class="linenos">365</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-366"><a href="#MonkeyPatch-366"><span class="linenos">366</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the current working directory to the specified path.</span>
</span><span id="MonkeyPatch-367"><a href="#MonkeyPatch-367"><span class="linenos">367</span></a>
</span><span id="MonkeyPatch-368"><a href="#MonkeyPatch-368"><span class="linenos">368</span></a><span class="sd">        :param path:</span>
</span><span id="MonkeyPatch-369"><a href="#MonkeyPatch-369"><span class="linenos">369</span></a><span class="sd">            The path to change into.</span>
</span><span id="MonkeyPatch-370"><a href="#MonkeyPatch-370"><span class="linenos">370</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-371"><a href="#MonkeyPatch-371"><span class="linenos">371</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-372"><a href="#MonkeyPatch-372"><span class="linenos">372</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</span><span id="MonkeyPatch-373"><a href="#MonkeyPatch-373"><span class="linenos">373</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="MonkeyPatch-374"><a href="#MonkeyPatch-374"><span class="linenos">374</span></a>
</span><span id="MonkeyPatch-375"><a href="#MonkeyPatch-375"><span class="linenos">375</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">undo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-376"><a href="#MonkeyPatch-376"><span class="linenos">376</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Undo previous changes.</span>
</span><span id="MonkeyPatch-377"><a href="#MonkeyPatch-377"><span class="linenos">377</span></a>
</span><span id="MonkeyPatch-378"><a href="#MonkeyPatch-378"><span class="linenos">378</span></a><span class="sd">        This call consumes the undo stack. Calling it a second time has no</span>
</span><span id="MonkeyPatch-379"><a href="#MonkeyPatch-379"><span class="linenos">379</span></a><span class="sd">        effect unless you do more monkeypatching after the undo call.</span>
</span><span id="MonkeyPatch-380"><a href="#MonkeyPatch-380"><span class="linenos">380</span></a>
</span><span id="MonkeyPatch-381"><a href="#MonkeyPatch-381"><span class="linenos">381</span></a><span class="sd">        There is generally no need to call `undo()`, since it is</span>
</span><span id="MonkeyPatch-382"><a href="#MonkeyPatch-382"><span class="linenos">382</span></a><span class="sd">        called automatically during tear-down.</span>
</span><span id="MonkeyPatch-383"><a href="#MonkeyPatch-383"><span class="linenos">383</span></a>
</span><span id="MonkeyPatch-384"><a href="#MonkeyPatch-384"><span class="linenos">384</span></a><span class="sd">        .. note::</span>
</span><span id="MonkeyPatch-385"><a href="#MonkeyPatch-385"><span class="linenos">385</span></a><span class="sd">            The same `monkeypatch` fixture is used across a</span>
</span><span id="MonkeyPatch-386"><a href="#MonkeyPatch-386"><span class="linenos">386</span></a><span class="sd">            single test function invocation. If `monkeypatch` is used both by</span>
</span><span id="MonkeyPatch-387"><a href="#MonkeyPatch-387"><span class="linenos">387</span></a><span class="sd">            the test function itself and one of the test fixtures,</span>
</span><span id="MonkeyPatch-388"><a href="#MonkeyPatch-388"><span class="linenos">388</span></a><span class="sd">            calling `undo()` will undo all of the changes made in</span>
</span><span id="MonkeyPatch-389"><a href="#MonkeyPatch-389"><span class="linenos">389</span></a><span class="sd">            both functions.</span>
</span><span id="MonkeyPatch-390"><a href="#MonkeyPatch-390"><span class="linenos">390</span></a>
</span><span id="MonkeyPatch-391"><a href="#MonkeyPatch-391"><span class="linenos">391</span></a><span class="sd">            Prefer to use :meth:`context() &lt;pytest.MonkeyPatch.context&gt;` instead.</span>
</span><span id="MonkeyPatch-392"><a href="#MonkeyPatch-392"><span class="linenos">392</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch-393"><a href="#MonkeyPatch-393"><span class="linenos">393</span></a>        <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="p">):</span>
</span><span id="MonkeyPatch-394"><a href="#MonkeyPatch-394"><span class="linenos">394</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="MonkeyPatch-395"><a href="#MonkeyPatch-395"><span class="linenos">395</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="MonkeyPatch-396"><a href="#MonkeyPatch-396"><span class="linenos">396</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch-397"><a href="#MonkeyPatch-397"><span class="linenos">397</span></a>                <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch-398"><a href="#MonkeyPatch-398"><span class="linenos">398</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MonkeyPatch-399"><a href="#MonkeyPatch-399"><span class="linenos">399</span></a>        <span class="k">for</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="p">):</span>
</span><span id="MonkeyPatch-400"><a href="#MonkeyPatch-400"><span class="linenos">400</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="MonkeyPatch-401"><a href="#MonkeyPatch-401"><span class="linenos">401</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="MonkeyPatch-402"><a href="#MonkeyPatch-402"><span class="linenos">402</span></a>                    <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch-403"><a href="#MonkeyPatch-403"><span class="linenos">403</span></a>                    <span class="k">del</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="MonkeyPatch-404"><a href="#MonkeyPatch-404"><span class="linenos">404</span></a>                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="MonkeyPatch-405"><a href="#MonkeyPatch-405"><span class="linenos">405</span></a>                    <span class="k">pass</span>  <span class="c1"># Was already deleted, so we have the desired state.</span>
</span><span id="MonkeyPatch-406"><a href="#MonkeyPatch-406"><span class="linenos">406</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch-407"><a href="#MonkeyPatch-407"><span class="linenos">407</span></a>                <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch-408"><a href="#MonkeyPatch-408"><span class="linenos">408</span></a>                <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># type: ignore[index]</span>
</span><span id="MonkeyPatch-409"><a href="#MonkeyPatch-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MonkeyPatch-410"><a href="#MonkeyPatch-410"><span class="linenos">410</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-411"><a href="#MonkeyPatch-411"><span class="linenos">411</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span>
</span><span id="MonkeyPatch-412"><a href="#MonkeyPatch-412"><span class="linenos">412</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MonkeyPatch-413"><a href="#MonkeyPatch-413"><span class="linenos">413</span></a>
</span><span id="MonkeyPatch-414"><a href="#MonkeyPatch-414"><span class="linenos">414</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch-415"><a href="#MonkeyPatch-415"><span class="linenos">415</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span><span class="p">)</span>
</span><span id="MonkeyPatch-416"><a href="#MonkeyPatch-416"><span class="linenos">416</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Helper to conveniently monkeypatch attributes/items/environment
variables/syspath.</p>

<p>Returned by the :fixture:<code>monkeypatch</code> fixture.</p>

<p><em>Changed in version 6.2:</em>
Can now also be used directly as <code><a href="#MonkeyPatch">pytest.MonkeyPatch()</a></code>, for when
the fixture is not available. In this case, use
<code>with <a href="#MonkeyPatch.context">MonkeyPatch.context()</a> as mp: &lt;context&gt;()</code> or remember to call
<code><a href="#MonkeyPatch.undo">undo()</a></code> explicitly.</p>
</div>


                            <div id="MonkeyPatch.context" class="classattr">
                                        <input id="MonkeyPatch.context-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>
        <div class="decorator decorator-contextmanager">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">context</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="n">Generator</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">monkeypatch</span><span class="o">.</span><span class="n">MonkeyPatch</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.context-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.context"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.context-137"><a href="#MonkeyPatch.context-137"><span class="linenos">137</span></a>    <span class="nd">@classmethod</span>
</span><span id="MonkeyPatch.context-138"><a href="#MonkeyPatch.context-138"><span class="linenos">138</span></a>    <span class="nd">@contextmanager</span>
</span><span id="MonkeyPatch.context-139"><a href="#MonkeyPatch.context-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">MonkeyPatch</span><span class="p">]:</span>
</span><span id="MonkeyPatch.context-140"><a href="#MonkeyPatch.context-140"><span class="linenos">140</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context manager that returns a new :class:`MonkeyPatch` object</span>
</span><span id="MonkeyPatch.context-141"><a href="#MonkeyPatch.context-141"><span class="linenos">141</span></a><span class="sd">        which undoes any patching done inside the ``with`` block upon exit.</span>
</span><span id="MonkeyPatch.context-142"><a href="#MonkeyPatch.context-142"><span class="linenos">142</span></a>
</span><span id="MonkeyPatch.context-143"><a href="#MonkeyPatch.context-143"><span class="linenos">143</span></a><span class="sd">        Example:</span>
</span><span id="MonkeyPatch.context-144"><a href="#MonkeyPatch.context-144"><span class="linenos">144</span></a>
</span><span id="MonkeyPatch.context-145"><a href="#MonkeyPatch.context-145"><span class="linenos">145</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="MonkeyPatch.context-146"><a href="#MonkeyPatch.context-146"><span class="linenos">146</span></a>
</span><span id="MonkeyPatch.context-147"><a href="#MonkeyPatch.context-147"><span class="linenos">147</span></a><span class="sd">            import functools</span>
</span><span id="MonkeyPatch.context-148"><a href="#MonkeyPatch.context-148"><span class="linenos">148</span></a>
</span><span id="MonkeyPatch.context-149"><a href="#MonkeyPatch.context-149"><span class="linenos">149</span></a>
</span><span id="MonkeyPatch.context-150"><a href="#MonkeyPatch.context-150"><span class="linenos">150</span></a><span class="sd">            def test_partial(monkeypatch):</span>
</span><span id="MonkeyPatch.context-151"><a href="#MonkeyPatch.context-151"><span class="linenos">151</span></a><span class="sd">                with monkeypatch.context() as m:</span>
</span><span id="MonkeyPatch.context-152"><a href="#MonkeyPatch.context-152"><span class="linenos">152</span></a><span class="sd">                    m.setattr(functools, &quot;partial&quot;, 3)</span>
</span><span id="MonkeyPatch.context-153"><a href="#MonkeyPatch.context-153"><span class="linenos">153</span></a>
</span><span id="MonkeyPatch.context-154"><a href="#MonkeyPatch.context-154"><span class="linenos">154</span></a><span class="sd">        Useful in situations where it is desired to undo some patches before the test ends,</span>
</span><span id="MonkeyPatch.context-155"><a href="#MonkeyPatch.context-155"><span class="linenos">155</span></a><span class="sd">        such as mocking ``stdlib`` functions that might break pytest itself if mocked (for examples</span>
</span><span id="MonkeyPatch.context-156"><a href="#MonkeyPatch.context-156"><span class="linenos">156</span></a><span class="sd">        of this see :issue:`3290`).</span>
</span><span id="MonkeyPatch.context-157"><a href="#MonkeyPatch.context-157"><span class="linenos">157</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.context-158"><a href="#MonkeyPatch.context-158"><span class="linenos">158</span></a>        <span class="n">m</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
</span><span id="MonkeyPatch.context-159"><a href="#MonkeyPatch.context-159"><span class="linenos">159</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="MonkeyPatch.context-160"><a href="#MonkeyPatch.context-160"><span class="linenos">160</span></a>            <span class="k">yield</span> <span class="n">m</span>
</span><span id="MonkeyPatch.context-161"><a href="#MonkeyPatch.context-161"><span class="linenos">161</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="MonkeyPatch.context-162"><a href="#MonkeyPatch.context-162"><span class="linenos">162</span></a>            <span class="n">m</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Context manager that returns a new <code><a href="#MonkeyPatch">MonkeyPatch</a></code> object
which undoes any patching done inside the <code>with</code> block upon exit.</p>

<p>Example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">functools</span>


<span class="k">def</span><span class="w"> </span><span class="nf">test_partial</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">monkeypatch</span><span class="o">.</span><span class="n">context</span><span class="p">()</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">functools</span><span class="p">,</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre>
</div>

<p>Useful in situations where it is desired to undo some patches before the test ends,
such as mocking <code>stdlib</code> functions that might break pytest itself if mocked (for examples
of this see :issue:<code>3290</code>).</p>
</div>


                            </div>
                            <div id="MonkeyPatch.setattr" class="classattr">
                                        <input id="MonkeyPatch.setattr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setattr</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">target</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">object</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">value</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">notset</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.setattr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.setattr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.setattr-182"><a href="#MonkeyPatch.setattr-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setattr</span><span class="p">(</span>
</span><span id="MonkeyPatch.setattr-183"><a href="#MonkeyPatch.setattr-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MonkeyPatch.setattr-184"><a href="#MonkeyPatch.setattr-184"><span class="linenos">184</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="MonkeyPatch.setattr-185"><a href="#MonkeyPatch.setattr-185"><span class="linenos">185</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="MonkeyPatch.setattr-186"><a href="#MonkeyPatch.setattr-186"><span class="linenos">186</span></a>        <span class="n">value</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">notset</span><span class="p">,</span>
</span><span id="MonkeyPatch.setattr-187"><a href="#MonkeyPatch.setattr-187"><span class="linenos">187</span></a>        <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="MonkeyPatch.setattr-188"><a href="#MonkeyPatch.setattr-188"><span class="linenos">188</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.setattr-189"><a href="#MonkeyPatch.setattr-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.setattr-190"><a href="#MonkeyPatch.setattr-190"><span class="linenos">190</span></a><span class="sd">        Set attribute value on target, memorizing the old value.</span>
</span><span id="MonkeyPatch.setattr-191"><a href="#MonkeyPatch.setattr-191"><span class="linenos">191</span></a>
</span><span id="MonkeyPatch.setattr-192"><a href="#MonkeyPatch.setattr-192"><span class="linenos">192</span></a><span class="sd">        For example:</span>
</span><span id="MonkeyPatch.setattr-193"><a href="#MonkeyPatch.setattr-193"><span class="linenos">193</span></a>
</span><span id="MonkeyPatch.setattr-194"><a href="#MonkeyPatch.setattr-194"><span class="linenos">194</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="MonkeyPatch.setattr-195"><a href="#MonkeyPatch.setattr-195"><span class="linenos">195</span></a>
</span><span id="MonkeyPatch.setattr-196"><a href="#MonkeyPatch.setattr-196"><span class="linenos">196</span></a><span class="sd">            import os</span>
</span><span id="MonkeyPatch.setattr-197"><a href="#MonkeyPatch.setattr-197"><span class="linenos">197</span></a>
</span><span id="MonkeyPatch.setattr-198"><a href="#MonkeyPatch.setattr-198"><span class="linenos">198</span></a><span class="sd">            monkeypatch.setattr(os, &quot;getcwd&quot;, lambda: &quot;/&quot;)</span>
</span><span id="MonkeyPatch.setattr-199"><a href="#MonkeyPatch.setattr-199"><span class="linenos">199</span></a>
</span><span id="MonkeyPatch.setattr-200"><a href="#MonkeyPatch.setattr-200"><span class="linenos">200</span></a><span class="sd">        The code above replaces the :func:`os.getcwd` function by a ``lambda`` which</span>
</span><span id="MonkeyPatch.setattr-201"><a href="#MonkeyPatch.setattr-201"><span class="linenos">201</span></a><span class="sd">        always returns ``&quot;/&quot;``.</span>
</span><span id="MonkeyPatch.setattr-202"><a href="#MonkeyPatch.setattr-202"><span class="linenos">202</span></a>
</span><span id="MonkeyPatch.setattr-203"><a href="#MonkeyPatch.setattr-203"><span class="linenos">203</span></a><span class="sd">        For convenience, you can specify a string as ``target`` which</span>
</span><span id="MonkeyPatch.setattr-204"><a href="#MonkeyPatch.setattr-204"><span class="linenos">204</span></a><span class="sd">        will be interpreted as a dotted import path, with the last part</span>
</span><span id="MonkeyPatch.setattr-205"><a href="#MonkeyPatch.setattr-205"><span class="linenos">205</span></a><span class="sd">        being the attribute name:</span>
</span><span id="MonkeyPatch.setattr-206"><a href="#MonkeyPatch.setattr-206"><span class="linenos">206</span></a>
</span><span id="MonkeyPatch.setattr-207"><a href="#MonkeyPatch.setattr-207"><span class="linenos">207</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="MonkeyPatch.setattr-208"><a href="#MonkeyPatch.setattr-208"><span class="linenos">208</span></a>
</span><span id="MonkeyPatch.setattr-209"><a href="#MonkeyPatch.setattr-209"><span class="linenos">209</span></a><span class="sd">            monkeypatch.setattr(&quot;os.getcwd&quot;, lambda: &quot;/&quot;)</span>
</span><span id="MonkeyPatch.setattr-210"><a href="#MonkeyPatch.setattr-210"><span class="linenos">210</span></a>
</span><span id="MonkeyPatch.setattr-211"><a href="#MonkeyPatch.setattr-211"><span class="linenos">211</span></a><span class="sd">        Raises :class:`AttributeError` if the attribute does not exist, unless</span>
</span><span id="MonkeyPatch.setattr-212"><a href="#MonkeyPatch.setattr-212"><span class="linenos">212</span></a><span class="sd">        ``raising`` is set to False.</span>
</span><span id="MonkeyPatch.setattr-213"><a href="#MonkeyPatch.setattr-213"><span class="linenos">213</span></a>
</span><span id="MonkeyPatch.setattr-214"><a href="#MonkeyPatch.setattr-214"><span class="linenos">214</span></a><span class="sd">        **Where to patch**</span>
</span><span id="MonkeyPatch.setattr-215"><a href="#MonkeyPatch.setattr-215"><span class="linenos">215</span></a>
</span><span id="MonkeyPatch.setattr-216"><a href="#MonkeyPatch.setattr-216"><span class="linenos">216</span></a><span class="sd">        ``monkeypatch.setattr`` works by (temporarily) changing the object that a name points to with another one.</span>
</span><span id="MonkeyPatch.setattr-217"><a href="#MonkeyPatch.setattr-217"><span class="linenos">217</span></a><span class="sd">        There can be many names pointing to any individual object, so for patching to work you must ensure</span>
</span><span id="MonkeyPatch.setattr-218"><a href="#MonkeyPatch.setattr-218"><span class="linenos">218</span></a><span class="sd">        that you patch the name used by the system under test.</span>
</span><span id="MonkeyPatch.setattr-219"><a href="#MonkeyPatch.setattr-219"><span class="linenos">219</span></a>
</span><span id="MonkeyPatch.setattr-220"><a href="#MonkeyPatch.setattr-220"><span class="linenos">220</span></a><span class="sd">        See the section :ref:`Where to patch &lt;python:where-to-patch&gt;` in the :mod:`unittest.mock`</span>
</span><span id="MonkeyPatch.setattr-221"><a href="#MonkeyPatch.setattr-221"><span class="linenos">221</span></a><span class="sd">        docs for a complete explanation, which is meant for :func:`unittest.mock.patch` but</span>
</span><span id="MonkeyPatch.setattr-222"><a href="#MonkeyPatch.setattr-222"><span class="linenos">222</span></a><span class="sd">        applies to ``monkeypatch.setattr`` as well.</span>
</span><span id="MonkeyPatch.setattr-223"><a href="#MonkeyPatch.setattr-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.setattr-224"><a href="#MonkeyPatch.setattr-224"><span class="linenos">224</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="MonkeyPatch.setattr-225"><a href="#MonkeyPatch.setattr-225"><span class="linenos">225</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
</span><span id="MonkeyPatch.setattr-226"><a href="#MonkeyPatch.setattr-226"><span class="linenos">226</span></a>
</span><span id="MonkeyPatch.setattr-227"><a href="#MonkeyPatch.setattr-227"><span class="linenos">227</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Notset</span><span class="p">):</span>
</span><span id="MonkeyPatch.setattr-228"><a href="#MonkeyPatch.setattr-228"><span class="linenos">228</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch.setattr-229"><a href="#MonkeyPatch.setattr-229"><span class="linenos">229</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="MonkeyPatch.setattr-230"><a href="#MonkeyPatch.setattr-230"><span class="linenos">230</span></a>                    <span class="s2">&quot;use setattr(target, name, value) or &quot;</span>
</span><span id="MonkeyPatch.setattr-231"><a href="#MonkeyPatch.setattr-231"><span class="linenos">231</span></a>                    <span class="s2">&quot;setattr(target, value) with target being a dotted &quot;</span>
</span><span id="MonkeyPatch.setattr-232"><a href="#MonkeyPatch.setattr-232"><span class="linenos">232</span></a>                    <span class="s2">&quot;import string&quot;</span>
</span><span id="MonkeyPatch.setattr-233"><a href="#MonkeyPatch.setattr-233"><span class="linenos">233</span></a>                <span class="p">)</span>
</span><span id="MonkeyPatch.setattr-234"><a href="#MonkeyPatch.setattr-234"><span class="linenos">234</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="MonkeyPatch.setattr-235"><a href="#MonkeyPatch.setattr-235"><span class="linenos">235</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">derive_importpath</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">raising</span><span class="p">)</span>
</span><span id="MonkeyPatch.setattr-236"><a href="#MonkeyPatch.setattr-236"><span class="linenos">236</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch.setattr-237"><a href="#MonkeyPatch.setattr-237"><span class="linenos">237</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch.setattr-238"><a href="#MonkeyPatch.setattr-238"><span class="linenos">238</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="MonkeyPatch.setattr-239"><a href="#MonkeyPatch.setattr-239"><span class="linenos">239</span></a>                    <span class="s2">&quot;use setattr(target, name, value) with name being a string or &quot;</span>
</span><span id="MonkeyPatch.setattr-240"><a href="#MonkeyPatch.setattr-240"><span class="linenos">240</span></a>                    <span class="s2">&quot;setattr(target, value) with target being a dotted &quot;</span>
</span><span id="MonkeyPatch.setattr-241"><a href="#MonkeyPatch.setattr-241"><span class="linenos">241</span></a>                    <span class="s2">&quot;import string&quot;</span>
</span><span id="MonkeyPatch.setattr-242"><a href="#MonkeyPatch.setattr-242"><span class="linenos">242</span></a>                <span class="p">)</span>
</span><span id="MonkeyPatch.setattr-243"><a href="#MonkeyPatch.setattr-243"><span class="linenos">243</span></a>
</span><span id="MonkeyPatch.setattr-244"><a href="#MonkeyPatch.setattr-244"><span class="linenos">244</span></a>        <span class="n">oldval</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch.setattr-245"><a href="#MonkeyPatch.setattr-245"><span class="linenos">245</span></a>        <span class="k">if</span> <span class="n">raising</span> <span class="ow">and</span> <span class="n">oldval</span> <span class="ow">is</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="MonkeyPatch.setattr-246"><a href="#MonkeyPatch.setattr-246"><span class="linenos">246</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">target</span><span class="si">!r}</span><span class="s2"> has no attribute </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="MonkeyPatch.setattr-247"><a href="#MonkeyPatch.setattr-247"><span class="linenos">247</span></a>
</span><span id="MonkeyPatch.setattr-248"><a href="#MonkeyPatch.setattr-248"><span class="linenos">248</span></a>        <span class="c1"># avoid class descriptors like staticmethod/classmethod</span>
</span><span id="MonkeyPatch.setattr-249"><a href="#MonkeyPatch.setattr-249"><span class="linenos">249</span></a>        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
</span><span id="MonkeyPatch.setattr-250"><a href="#MonkeyPatch.setattr-250"><span class="linenos">250</span></a>            <span class="n">oldval</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch.setattr-251"><a href="#MonkeyPatch.setattr-251"><span class="linenos">251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">oldval</span><span class="p">))</span>
</span><span id="MonkeyPatch.setattr-252"><a href="#MonkeyPatch.setattr-252"><span class="linenos">252</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set attribute value on target, memorizing the old value.</p>

<p>For example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s2">&quot;getcwd&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>The code above replaces the <code>os.getcwd()</code> function by a <code>lambda</code> which
always returns <code>"/"</code>.</p>

<p>For convenience, you can specify a string as <code>target</code> which
will be interpreted as a dotted import path, with the last part
being the attribute name:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="s2">&quot;os.getcwd&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>Raises <code>AttributeError</code> if the attribute does not exist, unless
<code>raising</code> is set to False.</p>

<p><strong>Where to patch</strong></p>

<p><code>monkeypatch.setattr</code> works by (temporarily) changing the object that a name points to with another one.
There can be many names pointing to any individual object, so for patching to work you must ensure
that you patch the name used by the system under test.</p>

<p>See the section :ref:<code>Where to patch &lt;python:where-to-patch&gt;</code> in the <code>unittest.mock</code>
docs for a complete explanation, which is meant for <code>unittest.mock.patch()</code> but
applies to <code>monkeypatch.setattr</code> as well.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.delattr" class="classattr">
                                        <input id="MonkeyPatch.delattr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delattr</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">target</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">monkeypatch</span><span class="o">.</span><span class="n">Notset</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">notset</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.delattr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.delattr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.delattr-254"><a href="#MonkeyPatch.delattr-254"><span class="linenos">254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delattr</span><span class="p">(</span>
</span><span id="MonkeyPatch.delattr-255"><a href="#MonkeyPatch.delattr-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MonkeyPatch.delattr-256"><a href="#MonkeyPatch.delattr-256"><span class="linenos">256</span></a>        <span class="n">target</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="MonkeyPatch.delattr-257"><a href="#MonkeyPatch.delattr-257"><span class="linenos">257</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Notset</span> <span class="o">=</span> <span class="n">notset</span><span class="p">,</span>
</span><span id="MonkeyPatch.delattr-258"><a href="#MonkeyPatch.delattr-258"><span class="linenos">258</span></a>        <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="MonkeyPatch.delattr-259"><a href="#MonkeyPatch.delattr-259"><span class="linenos">259</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.delattr-260"><a href="#MonkeyPatch.delattr-260"><span class="linenos">260</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete attribute ``name`` from ``target``.</span>
</span><span id="MonkeyPatch.delattr-261"><a href="#MonkeyPatch.delattr-261"><span class="linenos">261</span></a>
</span><span id="MonkeyPatch.delattr-262"><a href="#MonkeyPatch.delattr-262"><span class="linenos">262</span></a><span class="sd">        If no ``name`` is specified and ``target`` is a string</span>
</span><span id="MonkeyPatch.delattr-263"><a href="#MonkeyPatch.delattr-263"><span class="linenos">263</span></a><span class="sd">        it will be interpreted as a dotted import path with the</span>
</span><span id="MonkeyPatch.delattr-264"><a href="#MonkeyPatch.delattr-264"><span class="linenos">264</span></a><span class="sd">        last part being the attribute name.</span>
</span><span id="MonkeyPatch.delattr-265"><a href="#MonkeyPatch.delattr-265"><span class="linenos">265</span></a>
</span><span id="MonkeyPatch.delattr-266"><a href="#MonkeyPatch.delattr-266"><span class="linenos">266</span></a><span class="sd">        Raises AttributeError it the attribute does not exist, unless</span>
</span><span id="MonkeyPatch.delattr-267"><a href="#MonkeyPatch.delattr-267"><span class="linenos">267</span></a><span class="sd">        ``raising`` is set to False.</span>
</span><span id="MonkeyPatch.delattr-268"><a href="#MonkeyPatch.delattr-268"><span class="linenos">268</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.delattr-269"><a href="#MonkeyPatch.delattr-269"><span class="linenos">269</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="MonkeyPatch.delattr-270"><a href="#MonkeyPatch.delattr-270"><span class="linenos">270</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
</span><span id="MonkeyPatch.delattr-271"><a href="#MonkeyPatch.delattr-271"><span class="linenos">271</span></a>
</span><span id="MonkeyPatch.delattr-272"><a href="#MonkeyPatch.delattr-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">Notset</span><span class="p">):</span>
</span><span id="MonkeyPatch.delattr-273"><a href="#MonkeyPatch.delattr-273"><span class="linenos">273</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch.delattr-274"><a href="#MonkeyPatch.delattr-274"><span class="linenos">274</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="MonkeyPatch.delattr-275"><a href="#MonkeyPatch.delattr-275"><span class="linenos">275</span></a>                    <span class="s2">&quot;use delattr(target, name) or &quot;</span>
</span><span id="MonkeyPatch.delattr-276"><a href="#MonkeyPatch.delattr-276"><span class="linenos">276</span></a>                    <span class="s2">&quot;delattr(target) with target being a dotted &quot;</span>
</span><span id="MonkeyPatch.delattr-277"><a href="#MonkeyPatch.delattr-277"><span class="linenos">277</span></a>                    <span class="s2">&quot;import string&quot;</span>
</span><span id="MonkeyPatch.delattr-278"><a href="#MonkeyPatch.delattr-278"><span class="linenos">278</span></a>                <span class="p">)</span>
</span><span id="MonkeyPatch.delattr-279"><a href="#MonkeyPatch.delattr-279"><span class="linenos">279</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">derive_importpath</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">raising</span><span class="p">)</span>
</span><span id="MonkeyPatch.delattr-280"><a href="#MonkeyPatch.delattr-280"><span class="linenos">280</span></a>
</span><span id="MonkeyPatch.delattr-281"><a href="#MonkeyPatch.delattr-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="MonkeyPatch.delattr-282"><a href="#MonkeyPatch.delattr-282"><span class="linenos">282</span></a>            <span class="k">if</span> <span class="n">raising</span><span class="p">:</span>
</span><span id="MonkeyPatch.delattr-283"><a href="#MonkeyPatch.delattr-283"><span class="linenos">283</span></a>                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch.delattr-284"><a href="#MonkeyPatch.delattr-284"><span class="linenos">284</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch.delattr-285"><a href="#MonkeyPatch.delattr-285"><span class="linenos">285</span></a>            <span class="n">oldval</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch.delattr-286"><a href="#MonkeyPatch.delattr-286"><span class="linenos">286</span></a>            <span class="c1"># Avoid class descriptors like staticmethod/classmethod.</span>
</span><span id="MonkeyPatch.delattr-287"><a href="#MonkeyPatch.delattr-287"><span class="linenos">287</span></a>            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
</span><span id="MonkeyPatch.delattr-288"><a href="#MonkeyPatch.delattr-288"><span class="linenos">288</span></a>                <span class="n">oldval</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)</span>
</span><span id="MonkeyPatch.delattr-289"><a href="#MonkeyPatch.delattr-289"><span class="linenos">289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">oldval</span><span class="p">))</span>
</span><span id="MonkeyPatch.delattr-290"><a href="#MonkeyPatch.delattr-290"><span class="linenos">290</span></a>            <span class="nb">delattr</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Delete attribute <code>name</code> from <code>target</code>.</p>

<p>If no <code>name</code> is specified and <code>target</code> is a string
it will be interpreted as a dotted import path with the
last part being the attribute name.</p>

<p>Raises AttributeError it the attribute does not exist, unless
<code>raising</code> is set to False.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.setitem" class="classattr">
                                        <input id="MonkeyPatch.setitem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setitem</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">dic</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="o">~</span><span class="n">K</span><span class="p">,</span> <span class="o">~</span><span class="n">V</span><span class="p">]</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="o">~</span><span class="n">K</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="o">~</span><span class="n">V</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.setitem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.setitem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.setitem-292"><a href="#MonkeyPatch.setitem-292"><span class="linenos">292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="n">K</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">V</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.setitem-293"><a href="#MonkeyPatch.setitem-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set dictionary entry ``name`` to value.&quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.setitem-294"><a href="#MonkeyPatch.setitem-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">dic</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)))</span>
</span><span id="MonkeyPatch.setitem-295"><a href="#MonkeyPatch.setitem-295"><span class="linenos">295</span></a>        <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch.setitem-296"><a href="#MonkeyPatch.setitem-296"><span class="linenos">296</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># type: ignore[index]</span>
</span></pre></div>


            <div class="docstring"><p>Set dictionary entry <code>name</code> to value.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.delitem" class="classattr">
                                        <input id="MonkeyPatch.delitem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delitem</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">dic</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="o">~</span><span class="n">K</span><span class="p">,</span> <span class="o">~</span><span class="n">V</span><span class="p">]</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="o">~</span><span class="n">K</span>, </span><span class="param"><span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.delitem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.delitem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.delitem-298"><a href="#MonkeyPatch.delitem-298"><span class="linenos">298</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="n">K</span><span class="p">,</span> <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.delitem-299"><a href="#MonkeyPatch.delitem-299"><span class="linenos">299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete ``name`` from dict.</span>
</span><span id="MonkeyPatch.delitem-300"><a href="#MonkeyPatch.delitem-300"><span class="linenos">300</span></a>
</span><span id="MonkeyPatch.delitem-301"><a href="#MonkeyPatch.delitem-301"><span class="linenos">301</span></a><span class="sd">        Raises ``KeyError`` if it doesn&#39;t exist, unless ``raising`` is set to</span>
</span><span id="MonkeyPatch.delitem-302"><a href="#MonkeyPatch.delitem-302"><span class="linenos">302</span></a><span class="sd">        False.</span>
</span><span id="MonkeyPatch.delitem-303"><a href="#MonkeyPatch.delitem-303"><span class="linenos">303</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.delitem-304"><a href="#MonkeyPatch.delitem-304"><span class="linenos">304</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
</span><span id="MonkeyPatch.delitem-305"><a href="#MonkeyPatch.delitem-305"><span class="linenos">305</span></a>            <span class="k">if</span> <span class="n">raising</span><span class="p">:</span>
</span><span id="MonkeyPatch.delitem-306"><a href="#MonkeyPatch.delitem-306"><span class="linenos">306</span></a>                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch.delitem-307"><a href="#MonkeyPatch.delitem-307"><span class="linenos">307</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch.delitem-308"><a href="#MonkeyPatch.delitem-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">dic</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">notset</span><span class="p">)))</span>
</span><span id="MonkeyPatch.delitem-309"><a href="#MonkeyPatch.delitem-309"><span class="linenos">309</span></a>            <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch.delitem-310"><a href="#MonkeyPatch.delitem-310"><span class="linenos">310</span></a>            <span class="k">del</span> <span class="n">dic</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span></pre></div>


            <div class="docstring"><p>Delete <code>name</code> from dict.</p>

<p>Raises <code>KeyError</code> if it doesn't exist, unless <code>raising</code> is set to
False.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.setenv" class="classattr">
                                        <input id="MonkeyPatch.setenv-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setenv</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">prepend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.setenv-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.setenv"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.setenv-312"><a href="#MonkeyPatch.setenv-312"><span class="linenos">312</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prepend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.setenv-313"><a href="#MonkeyPatch.setenv-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set environment variable ``name`` to ``value``.</span>
</span><span id="MonkeyPatch.setenv-314"><a href="#MonkeyPatch.setenv-314"><span class="linenos">314</span></a>
</span><span id="MonkeyPatch.setenv-315"><a href="#MonkeyPatch.setenv-315"><span class="linenos">315</span></a><span class="sd">        If ``prepend`` is a character, read the current environment variable</span>
</span><span id="MonkeyPatch.setenv-316"><a href="#MonkeyPatch.setenv-316"><span class="linenos">316</span></a><span class="sd">        value and prepend the ``value`` adjoined with the ``prepend``</span>
</span><span id="MonkeyPatch.setenv-317"><a href="#MonkeyPatch.setenv-317"><span class="linenos">317</span></a><span class="sd">        character.</span>
</span><span id="MonkeyPatch.setenv-318"><a href="#MonkeyPatch.setenv-318"><span class="linenos">318</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.setenv-319"><a href="#MonkeyPatch.setenv-319"><span class="linenos">319</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="MonkeyPatch.setenv-320"><a href="#MonkeyPatch.setenv-320"><span class="linenos">320</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>  <span class="c1"># type: ignore[unreachable]</span>
</span><span id="MonkeyPatch.setenv-321"><a href="#MonkeyPatch.setenv-321"><span class="linenos">321</span></a>                <span class="n">PytestWarning</span><span class="p">(</span>
</span><span id="MonkeyPatch.setenv-322"><a href="#MonkeyPatch.setenv-322"><span class="linenos">322</span></a>                    <span class="sa">f</span><span class="s2">&quot;Value of environment variable </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> type should be str, but got &quot;</span>
</span><span id="MonkeyPatch.setenv-323"><a href="#MonkeyPatch.setenv-323"><span class="linenos">323</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">); converted to str implicitly&quot;</span>
</span><span id="MonkeyPatch.setenv-324"><a href="#MonkeyPatch.setenv-324"><span class="linenos">324</span></a>                <span class="p">),</span>
</span><span id="MonkeyPatch.setenv-325"><a href="#MonkeyPatch.setenv-325"><span class="linenos">325</span></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MonkeyPatch.setenv-326"><a href="#MonkeyPatch.setenv-326"><span class="linenos">326</span></a>            <span class="p">)</span>
</span><span id="MonkeyPatch.setenv-327"><a href="#MonkeyPatch.setenv-327"><span class="linenos">327</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="MonkeyPatch.setenv-328"><a href="#MonkeyPatch.setenv-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="n">prepend</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
</span><span id="MonkeyPatch.setenv-329"><a href="#MonkeyPatch.setenv-329"><span class="linenos">329</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="n">prepend</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="MonkeyPatch.setenv-330"><a href="#MonkeyPatch.setenv-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set environment variable <code>name</code> to <code>value</code>.</p>

<p>If <code>prepend</code> is a character, read the current environment variable
value and prepend the <code>value</code> adjoined with the <code>prepend</code>
character.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.delenv" class="classattr">
                                        <input id="MonkeyPatch.delenv-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delenv</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.delenv-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.delenv"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.delenv-332"><a href="#MonkeyPatch.delenv-332"><span class="linenos">332</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raising</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.delenv-333"><a href="#MonkeyPatch.delenv-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete ``name`` from the environment.</span>
</span><span id="MonkeyPatch.delenv-334"><a href="#MonkeyPatch.delenv-334"><span class="linenos">334</span></a>
</span><span id="MonkeyPatch.delenv-335"><a href="#MonkeyPatch.delenv-335"><span class="linenos">335</span></a><span class="sd">        Raises ``KeyError`` if it does not exist, unless ``raising`` is set to</span>
</span><span id="MonkeyPatch.delenv-336"><a href="#MonkeyPatch.delenv-336"><span class="linenos">336</span></a><span class="sd">        False.</span>
</span><span id="MonkeyPatch.delenv-337"><a href="#MonkeyPatch.delenv-337"><span class="linenos">337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.delenv-338"><a href="#MonkeyPatch.delenv-338"><span class="linenos">338</span></a>        <span class="n">environ</span><span class="p">:</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span>
</span><span id="MonkeyPatch.delenv-339"><a href="#MonkeyPatch.delenv-339"><span class="linenos">339</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delitem</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="n">raising</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Delete <code>name</code> from the environment.</p>

<p>Raises <code>KeyError</code> if it does not exist, unless <code>raising</code> is set to
False.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.syspath_prepend" class="classattr">
                                        <input id="MonkeyPatch.syspath_prepend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">syspath_prepend</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.syspath_prepend-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.syspath_prepend"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.syspath_prepend-341"><a href="#MonkeyPatch.syspath_prepend-341"><span class="linenos">341</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">syspath_prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.syspath_prepend-342"><a href="#MonkeyPatch.syspath_prepend-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepend ``path`` to ``sys.path`` list of import locations.&quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.syspath_prepend-343"><a href="#MonkeyPatch.syspath_prepend-343"><span class="linenos">343</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.syspath_prepend-344"><a href="#MonkeyPatch.syspath_prepend-344"><span class="linenos">344</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[:]</span>
</span><span id="MonkeyPatch.syspath_prepend-345"><a href="#MonkeyPatch.syspath_prepend-345"><span class="linenos">345</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="MonkeyPatch.syspath_prepend-346"><a href="#MonkeyPatch.syspath_prepend-346"><span class="linenos">346</span></a>
</span><span id="MonkeyPatch.syspath_prepend-347"><a href="#MonkeyPatch.syspath_prepend-347"><span class="linenos">347</span></a>        <span class="c1"># https://github.com/pypa/setuptools/blob/d8b901bc/docs/pkg_resources.txt#L162-L171</span>
</span><span id="MonkeyPatch.syspath_prepend-348"><a href="#MonkeyPatch.syspath_prepend-348"><span class="linenos">348</span></a>        <span class="c1"># this is only needed when pkg_resources was already loaded by the namespace package</span>
</span><span id="MonkeyPatch.syspath_prepend-349"><a href="#MonkeyPatch.syspath_prepend-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="s2">&quot;pkg_resources&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
</span><span id="MonkeyPatch.syspath_prepend-350"><a href="#MonkeyPatch.syspath_prepend-350"><span class="linenos">350</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">pkg_resources</span><span class="w"> </span><span class="kn">import</span> <span class="n">fixup_namespace_packages</span>
</span><span id="MonkeyPatch.syspath_prepend-351"><a href="#MonkeyPatch.syspath_prepend-351"><span class="linenos">351</span></a>
</span><span id="MonkeyPatch.syspath_prepend-352"><a href="#MonkeyPatch.syspath_prepend-352"><span class="linenos">352</span></a>            <span class="n">fixup_namespace_packages</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="MonkeyPatch.syspath_prepend-353"><a href="#MonkeyPatch.syspath_prepend-353"><span class="linenos">353</span></a>
</span><span id="MonkeyPatch.syspath_prepend-354"><a href="#MonkeyPatch.syspath_prepend-354"><span class="linenos">354</span></a>        <span class="c1"># A call to syspathinsert() usually means that the caller wants to</span>
</span><span id="MonkeyPatch.syspath_prepend-355"><a href="#MonkeyPatch.syspath_prepend-355"><span class="linenos">355</span></a>        <span class="c1"># import some dynamically created files, thus with python3 we</span>
</span><span id="MonkeyPatch.syspath_prepend-356"><a href="#MonkeyPatch.syspath_prepend-356"><span class="linenos">356</span></a>        <span class="c1"># invalidate its import caches.</span>
</span><span id="MonkeyPatch.syspath_prepend-357"><a href="#MonkeyPatch.syspath_prepend-357"><span class="linenos">357</span></a>        <span class="c1"># This is especially important when any namespace package is in use,</span>
</span><span id="MonkeyPatch.syspath_prepend-358"><a href="#MonkeyPatch.syspath_prepend-358"><span class="linenos">358</span></a>        <span class="c1"># since then the mtime based FileFinder cache (that gets created in</span>
</span><span id="MonkeyPatch.syspath_prepend-359"><a href="#MonkeyPatch.syspath_prepend-359"><span class="linenos">359</span></a>        <span class="c1"># this case already) gets not invalidated when writing the new files</span>
</span><span id="MonkeyPatch.syspath_prepend-360"><a href="#MonkeyPatch.syspath_prepend-360"><span class="linenos">360</span></a>        <span class="c1"># quickly afterwards.</span>
</span><span id="MonkeyPatch.syspath_prepend-361"><a href="#MonkeyPatch.syspath_prepend-361"><span class="linenos">361</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">importlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">invalidate_caches</span>
</span><span id="MonkeyPatch.syspath_prepend-362"><a href="#MonkeyPatch.syspath_prepend-362"><span class="linenos">362</span></a>
</span><span id="MonkeyPatch.syspath_prepend-363"><a href="#MonkeyPatch.syspath_prepend-363"><span class="linenos">363</span></a>        <span class="n">invalidate_caches</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Prepend <code>path</code> to <code>sys.path</code> list of import locations.</p>
</div>


                            </div>
                            <div id="MonkeyPatch.chdir" class="classattr">
                                        <input id="MonkeyPatch.chdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.chdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.chdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.chdir-365"><a href="#MonkeyPatch.chdir-365"><span class="linenos">365</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.chdir-366"><a href="#MonkeyPatch.chdir-366"><span class="linenos">366</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the current working directory to the specified path.</span>
</span><span id="MonkeyPatch.chdir-367"><a href="#MonkeyPatch.chdir-367"><span class="linenos">367</span></a>
</span><span id="MonkeyPatch.chdir-368"><a href="#MonkeyPatch.chdir-368"><span class="linenos">368</span></a><span class="sd">        :param path:</span>
</span><span id="MonkeyPatch.chdir-369"><a href="#MonkeyPatch.chdir-369"><span class="linenos">369</span></a><span class="sd">            The path to change into.</span>
</span><span id="MonkeyPatch.chdir-370"><a href="#MonkeyPatch.chdir-370"><span class="linenos">370</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.chdir-371"><a href="#MonkeyPatch.chdir-371"><span class="linenos">371</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.chdir-372"><a href="#MonkeyPatch.chdir-372"><span class="linenos">372</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</span><span id="MonkeyPatch.chdir-373"><a href="#MonkeyPatch.chdir-373"><span class="linenos">373</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Change the current working directory to the specified path.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>path</strong>: 
The path to change into.</li>
</ul>
</div>


                            </div>
                            <div id="MonkeyPatch.undo" class="classattr">
                                        <input id="MonkeyPatch.undo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">undo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MonkeyPatch.undo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MonkeyPatch.undo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MonkeyPatch.undo-375"><a href="#MonkeyPatch.undo-375"><span class="linenos">375</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">undo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-376"><a href="#MonkeyPatch.undo-376"><span class="linenos">376</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Undo previous changes.</span>
</span><span id="MonkeyPatch.undo-377"><a href="#MonkeyPatch.undo-377"><span class="linenos">377</span></a>
</span><span id="MonkeyPatch.undo-378"><a href="#MonkeyPatch.undo-378"><span class="linenos">378</span></a><span class="sd">        This call consumes the undo stack. Calling it a second time has no</span>
</span><span id="MonkeyPatch.undo-379"><a href="#MonkeyPatch.undo-379"><span class="linenos">379</span></a><span class="sd">        effect unless you do more monkeypatching after the undo call.</span>
</span><span id="MonkeyPatch.undo-380"><a href="#MonkeyPatch.undo-380"><span class="linenos">380</span></a>
</span><span id="MonkeyPatch.undo-381"><a href="#MonkeyPatch.undo-381"><span class="linenos">381</span></a><span class="sd">        There is generally no need to call `undo()`, since it is</span>
</span><span id="MonkeyPatch.undo-382"><a href="#MonkeyPatch.undo-382"><span class="linenos">382</span></a><span class="sd">        called automatically during tear-down.</span>
</span><span id="MonkeyPatch.undo-383"><a href="#MonkeyPatch.undo-383"><span class="linenos">383</span></a>
</span><span id="MonkeyPatch.undo-384"><a href="#MonkeyPatch.undo-384"><span class="linenos">384</span></a><span class="sd">        .. note::</span>
</span><span id="MonkeyPatch.undo-385"><a href="#MonkeyPatch.undo-385"><span class="linenos">385</span></a><span class="sd">            The same `monkeypatch` fixture is used across a</span>
</span><span id="MonkeyPatch.undo-386"><a href="#MonkeyPatch.undo-386"><span class="linenos">386</span></a><span class="sd">            single test function invocation. If `monkeypatch` is used both by</span>
</span><span id="MonkeyPatch.undo-387"><a href="#MonkeyPatch.undo-387"><span class="linenos">387</span></a><span class="sd">            the test function itself and one of the test fixtures,</span>
</span><span id="MonkeyPatch.undo-388"><a href="#MonkeyPatch.undo-388"><span class="linenos">388</span></a><span class="sd">            calling `undo()` will undo all of the changes made in</span>
</span><span id="MonkeyPatch.undo-389"><a href="#MonkeyPatch.undo-389"><span class="linenos">389</span></a><span class="sd">            both functions.</span>
</span><span id="MonkeyPatch.undo-390"><a href="#MonkeyPatch.undo-390"><span class="linenos">390</span></a>
</span><span id="MonkeyPatch.undo-391"><a href="#MonkeyPatch.undo-391"><span class="linenos">391</span></a><span class="sd">            Prefer to use :meth:`context() &lt;pytest.MonkeyPatch.context&gt;` instead.</span>
</span><span id="MonkeyPatch.undo-392"><a href="#MonkeyPatch.undo-392"><span class="linenos">392</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MonkeyPatch.undo-393"><a href="#MonkeyPatch.undo-393"><span class="linenos">393</span></a>        <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="p">):</span>
</span><span id="MonkeyPatch.undo-394"><a href="#MonkeyPatch.undo-394"><span class="linenos">394</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-395"><a href="#MonkeyPatch.undo-395"><span class="linenos">395</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="MonkeyPatch.undo-396"><a href="#MonkeyPatch.undo-396"><span class="linenos">396</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-397"><a href="#MonkeyPatch.undo-397"><span class="linenos">397</span></a>                <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="MonkeyPatch.undo-398"><a href="#MonkeyPatch.undo-398"><span class="linenos">398</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setattr</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MonkeyPatch.undo-399"><a href="#MonkeyPatch.undo-399"><span class="linenos">399</span></a>        <span class="k">for</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="p">):</span>
</span><span id="MonkeyPatch.undo-400"><a href="#MonkeyPatch.undo-400"><span class="linenos">400</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">notset</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-401"><a href="#MonkeyPatch.undo-401"><span class="linenos">401</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-402"><a href="#MonkeyPatch.undo-402"><span class="linenos">402</span></a>                    <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch.undo-403"><a href="#MonkeyPatch.undo-403"><span class="linenos">403</span></a>                    <span class="k">del</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="MonkeyPatch.undo-404"><a href="#MonkeyPatch.undo-404"><span class="linenos">404</span></a>                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-405"><a href="#MonkeyPatch.undo-405"><span class="linenos">405</span></a>                    <span class="k">pass</span>  <span class="c1"># Was already deleted, so we have the desired state.</span>
</span><span id="MonkeyPatch.undo-406"><a href="#MonkeyPatch.undo-406"><span class="linenos">406</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-407"><a href="#MonkeyPatch.undo-407"><span class="linenos">407</span></a>                <span class="c1"># Not all Mapping types support indexing, but MutableMapping doesn&#39;t support TypedDict</span>
</span><span id="MonkeyPatch.undo-408"><a href="#MonkeyPatch.undo-408"><span class="linenos">408</span></a>                <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># type: ignore[index]</span>
</span><span id="MonkeyPatch.undo-409"><a href="#MonkeyPatch.undo-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_setitem</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MonkeyPatch.undo-410"><a href="#MonkeyPatch.undo-410"><span class="linenos">410</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-411"><a href="#MonkeyPatch.undo-411"><span class="linenos">411</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span>
</span><span id="MonkeyPatch.undo-412"><a href="#MonkeyPatch.undo-412"><span class="linenos">412</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_savesyspath</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MonkeyPatch.undo-413"><a href="#MonkeyPatch.undo-413"><span class="linenos">413</span></a>
</span><span id="MonkeyPatch.undo-414"><a href="#MonkeyPatch.undo-414"><span class="linenos">414</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MonkeyPatch.undo-415"><a href="#MonkeyPatch.undo-415"><span class="linenos">415</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span><span class="p">)</span>
</span><span id="MonkeyPatch.undo-416"><a href="#MonkeyPatch.undo-416"><span class="linenos">416</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cwd</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Undo previous changes.</p>

<p>This call consumes the undo stack. Calling it a second time has no
effect unless you do more monkeypatching after the undo call.</p>

<p>There is generally no need to call <code><a href="#MonkeyPatch.undo">undo()</a></code>, since it is
called automatically during tear-down.</p>

<div class="alert note">

<p>The same <code>monkeypatch</code> fixture is used across a
single test function invocation. If <code>monkeypatch</code> is used both by
the test function itself and one of the test fixtures,
calling <code><a href="#MonkeyPatch.undo">undo()</a></code> will undo all of the changes made in
both functions.</p>

<p>Prefer to use <code>context() &lt;<a href="#MonkeyPatch.context">pytest.MonkeyPatch.context</a>&gt;()</code> instead.</p>

</div>
</div>


                            </div>
                </section>
                <section id="OptionGroup">
                            <input id="OptionGroup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OptionGroup</span>:

                <label class="view-source-button" for="OptionGroup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OptionGroup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OptionGroup-349"><a href="#OptionGroup-349"><span class="linenos">349</span></a><span class="k">class</span><span class="w"> </span><span class="nc">OptionGroup</span><span class="p">:</span>
</span><span id="OptionGroup-350"><a href="#OptionGroup-350"><span class="linenos">350</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of options shown in its own section.&quot;&quot;&quot;</span>
</span><span id="OptionGroup-351"><a href="#OptionGroup-351"><span class="linenos">351</span></a>
</span><span id="OptionGroup-352"><a href="#OptionGroup-352"><span class="linenos">352</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="OptionGroup-353"><a href="#OptionGroup-353"><span class="linenos">353</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="OptionGroup-354"><a href="#OptionGroup-354"><span class="linenos">354</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OptionGroup-355"><a href="#OptionGroup-355"><span class="linenos">355</span></a>        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="OptionGroup-356"><a href="#OptionGroup-356"><span class="linenos">356</span></a>        <span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="OptionGroup-357"><a href="#OptionGroup-357"><span class="linenos">357</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="OptionGroup-358"><a href="#OptionGroup-358"><span class="linenos">358</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="OptionGroup-359"><a href="#OptionGroup-359"><span class="linenos">359</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OptionGroup-360"><a href="#OptionGroup-360"><span class="linenos">360</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="OptionGroup-361"><a href="#OptionGroup-361"><span class="linenos">361</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="OptionGroup-362"><a href="#OptionGroup-362"><span class="linenos">362</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</span><span id="OptionGroup-363"><a href="#OptionGroup-363"><span class="linenos">363</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Argument</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OptionGroup-364"><a href="#OptionGroup-364"><span class="linenos">364</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">parser</span>
</span><span id="OptionGroup-365"><a href="#OptionGroup-365"><span class="linenos">365</span></a>
</span><span id="OptionGroup-366"><a href="#OptionGroup-366"><span class="linenos">366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OptionGroup-367"><a href="#OptionGroup-367"><span class="linenos">367</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an option to this group.</span>
</span><span id="OptionGroup-368"><a href="#OptionGroup-368"><span class="linenos">368</span></a>
</span><span id="OptionGroup-369"><a href="#OptionGroup-369"><span class="linenos">369</span></a><span class="sd">        If a shortened version of a long option is specified, it will</span>
</span><span id="OptionGroup-370"><a href="#OptionGroup-370"><span class="linenos">370</span></a><span class="sd">        be suppressed in the help. ``addoption(&#39;--twowords&#39;, &#39;--two-words&#39;)``</span>
</span><span id="OptionGroup-371"><a href="#OptionGroup-371"><span class="linenos">371</span></a><span class="sd">        results in help showing ``--two-words`` only, but ``--twowords`` gets</span>
</span><span id="OptionGroup-372"><a href="#OptionGroup-372"><span class="linenos">372</span></a><span class="sd">        accepted **and** the automatic destination is in ``args.twowords``.</span>
</span><span id="OptionGroup-373"><a href="#OptionGroup-373"><span class="linenos">373</span></a>
</span><span id="OptionGroup-374"><a href="#OptionGroup-374"><span class="linenos">374</span></a><span class="sd">        :param opts:</span>
</span><span id="OptionGroup-375"><a href="#OptionGroup-375"><span class="linenos">375</span></a><span class="sd">            Option names, can be short or long options.</span>
</span><span id="OptionGroup-376"><a href="#OptionGroup-376"><span class="linenos">376</span></a><span class="sd">        :param attrs:</span>
</span><span id="OptionGroup-377"><a href="#OptionGroup-377"><span class="linenos">377</span></a><span class="sd">            Same attributes as the argparse library&#39;s :meth:`add_argument()</span>
</span><span id="OptionGroup-378"><a href="#OptionGroup-378"><span class="linenos">378</span></a><span class="sd">            &lt;argparse.ArgumentParser.add_argument&gt;` function accepts.</span>
</span><span id="OptionGroup-379"><a href="#OptionGroup-379"><span class="linenos">379</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OptionGroup-380"><a href="#OptionGroup-380"><span class="linenos">380</span></a>        <span class="n">conflict</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">opts</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
</span><span id="OptionGroup-381"><a href="#OptionGroup-381"><span class="linenos">381</span></a>            <span class="n">name</span> <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">opt</span><span class="o">.</span><span class="n">names</span><span class="p">()</span>
</span><span id="OptionGroup-382"><a href="#OptionGroup-382"><span class="linenos">382</span></a>        <span class="p">)</span>
</span><span id="OptionGroup-383"><a href="#OptionGroup-383"><span class="linenos">383</span></a>        <span class="k">if</span> <span class="n">conflict</span><span class="p">:</span>
</span><span id="OptionGroup-384"><a href="#OptionGroup-384"><span class="linenos">384</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;option names </span><span class="si">{</span><span class="n">conflict</span><span class="si">}</span><span class="s2"> already added&quot;</span><span class="p">)</span>
</span><span id="OptionGroup-385"><a href="#OptionGroup-385"><span class="linenos">385</span></a>        <span class="n">option</span> <span class="o">=</span> <span class="n">Argument</span><span class="p">(</span><span class="o">*</span><span class="n">opts</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</span><span id="OptionGroup-386"><a href="#OptionGroup-386"><span class="linenos">386</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addoption_instance</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">shortupper</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="OptionGroup-387"><a href="#OptionGroup-387"><span class="linenos">387</span></a>
</span><span id="OptionGroup-388"><a href="#OptionGroup-388"><span class="linenos">388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_addoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OptionGroup-389"><a href="#OptionGroup-389"><span class="linenos">389</span></a>        <span class="n">option</span> <span class="o">=</span> <span class="n">Argument</span><span class="p">(</span><span class="o">*</span><span class="n">opts</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</span><span id="OptionGroup-390"><a href="#OptionGroup-390"><span class="linenos">390</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addoption_instance</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">shortupper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="OptionGroup-391"><a href="#OptionGroup-391"><span class="linenos">391</span></a>
</span><span id="OptionGroup-392"><a href="#OptionGroup-392"><span class="linenos">392</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_addoption_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option</span><span class="p">:</span> <span class="n">Argument</span><span class="p">,</span> <span class="n">shortupper</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OptionGroup-393"><a href="#OptionGroup-393"><span class="linenos">393</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">shortupper</span><span class="p">:</span>
</span><span id="OptionGroup-394"><a href="#OptionGroup-394"><span class="linenos">394</span></a>            <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">_short_opts</span><span class="p">:</span>
</span><span id="OptionGroup-395"><a href="#OptionGroup-395"><span class="linenos">395</span></a>                <span class="k">if</span> <span class="n">opt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-&quot;</span> <span class="ow">and</span> <span class="n">opt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">islower</span><span class="p">():</span>
</span><span id="OptionGroup-396"><a href="#OptionGroup-396"><span class="linenos">396</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;lowercase shortoptions reserved&quot;</span><span class="p">)</span>
</span><span id="OptionGroup-397"><a href="#OptionGroup-397"><span class="linenos">397</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">:</span>
</span><span id="OptionGroup-398"><a href="#OptionGroup-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">processoption</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
</span><span id="OptionGroup-399"><a href="#OptionGroup-399"><span class="linenos">399</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A group of options shown in its own section.</p>
</div>


                            <div id="OptionGroup.__init__" class="classattr">
                                        <input id="OptionGroup.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OptionGroup</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">parser</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">argparsing</span><span class="o">.</span><span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="OptionGroup.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OptionGroup.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OptionGroup.__init__-352"><a href="#OptionGroup.__init__-352"><span class="linenos">352</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="OptionGroup.__init__-353"><a href="#OptionGroup.__init__-353"><span class="linenos">353</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="OptionGroup.__init__-354"><a href="#OptionGroup.__init__-354"><span class="linenos">354</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OptionGroup.__init__-355"><a href="#OptionGroup.__init__-355"><span class="linenos">355</span></a>        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="OptionGroup.__init__-356"><a href="#OptionGroup.__init__-356"><span class="linenos">356</span></a>        <span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="OptionGroup.__init__-357"><a href="#OptionGroup.__init__-357"><span class="linenos">357</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="OptionGroup.__init__-358"><a href="#OptionGroup.__init__-358"><span class="linenos">358</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="OptionGroup.__init__-359"><a href="#OptionGroup.__init__-359"><span class="linenos">359</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OptionGroup.__init__-360"><a href="#OptionGroup.__init__-360"><span class="linenos">360</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="OptionGroup.__init__-361"><a href="#OptionGroup.__init__-361"><span class="linenos">361</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="OptionGroup.__init__-362"><a href="#OptionGroup.__init__-362"><span class="linenos">362</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</span><span id="OptionGroup.__init__-363"><a href="#OptionGroup.__init__-363"><span class="linenos">363</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Argument</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OptionGroup.__init__-364"><a href="#OptionGroup.__init__-364"><span class="linenos">364</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">parser</span>
</span></pre></div>


    

                            </div>
                            <div id="OptionGroup.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span>

        
    </div>
    <a class="headerlink" href="#OptionGroup.name"></a>
    
    

                            </div>
                            <div id="OptionGroup.description" class="classattr">
                                <div class="attr variable">
            <span class="name">description</span>

        
    </div>
    <a class="headerlink" href="#OptionGroup.description"></a>
    
    

                            </div>
                            <div id="OptionGroup.options" class="classattr">
                                <div class="attr variable">
            <span class="name">options</span><span class="annotation">: list[_pytest.config.argparsing.Argument]</span>

        
    </div>
    <a class="headerlink" href="#OptionGroup.options"></a>
    
    

                            </div>
                            <div id="OptionGroup.parser" class="classattr">
                                <div class="attr variable">
            <span class="name">parser</span>

        
    </div>
    <a class="headerlink" href="#OptionGroup.parser"></a>
    
    

                            </div>
                            <div id="OptionGroup.addoption" class="classattr">
                                        <input id="OptionGroup.addoption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addoption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="OptionGroup.addoption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OptionGroup.addoption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OptionGroup.addoption-366"><a href="#OptionGroup.addoption-366"><span class="linenos">366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OptionGroup.addoption-367"><a href="#OptionGroup.addoption-367"><span class="linenos">367</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an option to this group.</span>
</span><span id="OptionGroup.addoption-368"><a href="#OptionGroup.addoption-368"><span class="linenos">368</span></a>
</span><span id="OptionGroup.addoption-369"><a href="#OptionGroup.addoption-369"><span class="linenos">369</span></a><span class="sd">        If a shortened version of a long option is specified, it will</span>
</span><span id="OptionGroup.addoption-370"><a href="#OptionGroup.addoption-370"><span class="linenos">370</span></a><span class="sd">        be suppressed in the help. ``addoption(&#39;--twowords&#39;, &#39;--two-words&#39;)``</span>
</span><span id="OptionGroup.addoption-371"><a href="#OptionGroup.addoption-371"><span class="linenos">371</span></a><span class="sd">        results in help showing ``--two-words`` only, but ``--twowords`` gets</span>
</span><span id="OptionGroup.addoption-372"><a href="#OptionGroup.addoption-372"><span class="linenos">372</span></a><span class="sd">        accepted **and** the automatic destination is in ``args.twowords``.</span>
</span><span id="OptionGroup.addoption-373"><a href="#OptionGroup.addoption-373"><span class="linenos">373</span></a>
</span><span id="OptionGroup.addoption-374"><a href="#OptionGroup.addoption-374"><span class="linenos">374</span></a><span class="sd">        :param opts:</span>
</span><span id="OptionGroup.addoption-375"><a href="#OptionGroup.addoption-375"><span class="linenos">375</span></a><span class="sd">            Option names, can be short or long options.</span>
</span><span id="OptionGroup.addoption-376"><a href="#OptionGroup.addoption-376"><span class="linenos">376</span></a><span class="sd">        :param attrs:</span>
</span><span id="OptionGroup.addoption-377"><a href="#OptionGroup.addoption-377"><span class="linenos">377</span></a><span class="sd">            Same attributes as the argparse library&#39;s :meth:`add_argument()</span>
</span><span id="OptionGroup.addoption-378"><a href="#OptionGroup.addoption-378"><span class="linenos">378</span></a><span class="sd">            &lt;argparse.ArgumentParser.add_argument&gt;` function accepts.</span>
</span><span id="OptionGroup.addoption-379"><a href="#OptionGroup.addoption-379"><span class="linenos">379</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OptionGroup.addoption-380"><a href="#OptionGroup.addoption-380"><span class="linenos">380</span></a>        <span class="n">conflict</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">opts</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
</span><span id="OptionGroup.addoption-381"><a href="#OptionGroup.addoption-381"><span class="linenos">381</span></a>            <span class="n">name</span> <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">opt</span><span class="o">.</span><span class="n">names</span><span class="p">()</span>
</span><span id="OptionGroup.addoption-382"><a href="#OptionGroup.addoption-382"><span class="linenos">382</span></a>        <span class="p">)</span>
</span><span id="OptionGroup.addoption-383"><a href="#OptionGroup.addoption-383"><span class="linenos">383</span></a>        <span class="k">if</span> <span class="n">conflict</span><span class="p">:</span>
</span><span id="OptionGroup.addoption-384"><a href="#OptionGroup.addoption-384"><span class="linenos">384</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;option names </span><span class="si">{</span><span class="n">conflict</span><span class="si">}</span><span class="s2"> already added&quot;</span><span class="p">)</span>
</span><span id="OptionGroup.addoption-385"><a href="#OptionGroup.addoption-385"><span class="linenos">385</span></a>        <span class="n">option</span> <span class="o">=</span> <span class="n">Argument</span><span class="p">(</span><span class="o">*</span><span class="n">opts</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</span><span id="OptionGroup.addoption-386"><a href="#OptionGroup.addoption-386"><span class="linenos">386</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addoption_instance</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">shortupper</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add an option to this group.</p>

<p>If a shortened version of a long option is specified, it will
be suppressed in the help. <code>addoption('--twowords', '--two-words')</code>
results in help showing <code>--two-words</code> only, but <code>--twowords</code> gets
accepted <strong>and</strong> the automatic destination is in <code>args.twowords</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>opts</strong>: 
Option names, can be short or long options.</li>
<li><strong>attrs</strong>: 
Same attributes as the argparse library's <code>add_argument()
&lt;argparse.ArgumentParser.add_argument&gt;()</code> function accepts.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="Package">
                            <input id="Package-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Package</span><wbr>(<span class="base"><a href="#Directory">pytest.Directory</a></span>):

                <label class="view-source-button" for="Package-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Package"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Package-626"><a href="#Package-626"><span class="linenos">626</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Package</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Directory</span><span class="p">):</span>
</span><span id="Package-627"><a href="#Package-627"><span class="linenos">627</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Collector for files and directories in a Python packages -- directories</span>
</span><span id="Package-628"><a href="#Package-628"><span class="linenos">628</span></a><span class="sd">    with an `__init__.py` file.</span>
</span><span id="Package-629"><a href="#Package-629"><span class="linenos">629</span></a>
</span><span id="Package-630"><a href="#Package-630"><span class="linenos">630</span></a><span class="sd">    .. note::</span>
</span><span id="Package-631"><a href="#Package-631"><span class="linenos">631</span></a>
</span><span id="Package-632"><a href="#Package-632"><span class="linenos">632</span></a><span class="sd">        Directories without an `__init__.py` file are instead collected by</span>
</span><span id="Package-633"><a href="#Package-633"><span class="linenos">633</span></a><span class="sd">        :class:`~pytest.Dir` by default. Both are :class:`~pytest.Directory`</span>
</span><span id="Package-634"><a href="#Package-634"><span class="linenos">634</span></a><span class="sd">        collectors.</span>
</span><span id="Package-635"><a href="#Package-635"><span class="linenos">635</span></a>
</span><span id="Package-636"><a href="#Package-636"><span class="linenos">636</span></a><span class="sd">    .. versionchanged:: 8.0</span>
</span><span id="Package-637"><a href="#Package-637"><span class="linenos">637</span></a>
</span><span id="Package-638"><a href="#Package-638"><span class="linenos">638</span></a><span class="sd">        Now inherits from :class:`~pytest.Directory`.</span>
</span><span id="Package-639"><a href="#Package-639"><span class="linenos">639</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Package-640"><a href="#Package-640"><span class="linenos">640</span></a>
</span><span id="Package-641"><a href="#Package-641"><span class="linenos">641</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Package-642"><a href="#Package-642"><span class="linenos">642</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Package-643"><a href="#Package-643"><span class="linenos">643</span></a>        <span class="n">fspath</span><span class="p">:</span> <span class="n">LEGACY_PATH</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Package-644"><a href="#Package-644"><span class="linenos">644</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span>
</span><span id="Package-645"><a href="#Package-645"><span class="linenos">645</span></a>        <span class="c1"># NOTE: following args are unused:</span>
</span><span id="Package-646"><a href="#Package-646"><span class="linenos">646</span></a>        <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Package-647"><a href="#Package-647"><span class="linenos">647</span></a>        <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Package-648"><a href="#Package-648"><span class="linenos">648</span></a>        <span class="n">nodeid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Package-649"><a href="#Package-649"><span class="linenos">649</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Package-650"><a href="#Package-650"><span class="linenos">650</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package-651"><a href="#Package-651"><span class="linenos">651</span></a>        <span class="c1"># NOTE: Could be just the following, but kept as-is for compat.</span>
</span><span id="Package-652"><a href="#Package-652"><span class="linenos">652</span></a>        <span class="c1"># super().__init__(self, fspath, parent=parent)</span>
</span><span id="Package-653"><a href="#Package-653"><span class="linenos">653</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">session</span>
</span><span id="Package-654"><a href="#Package-654"><span class="linenos">654</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Package-655"><a href="#Package-655"><span class="linenos">655</span></a>            <span class="n">fspath</span><span class="o">=</span><span class="n">fspath</span><span class="p">,</span>
</span><span id="Package-656"><a href="#Package-656"><span class="linenos">656</span></a>            <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
</span><span id="Package-657"><a href="#Package-657"><span class="linenos">657</span></a>            <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
</span><span id="Package-658"><a href="#Package-658"><span class="linenos">658</span></a>            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="Package-659"><a href="#Package-659"><span class="linenos">659</span></a>            <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
</span><span id="Package-660"><a href="#Package-660"><span class="linenos">660</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Package-661"><a href="#Package-661"><span class="linenos">661</span></a>        <span class="p">)</span>
</span><span id="Package-662"><a href="#Package-662"><span class="linenos">662</span></a>
</span><span id="Package-663"><a href="#Package-663"><span class="linenos">663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package-664"><a href="#Package-664"><span class="linenos">664</span></a>        <span class="n">init_mod</span> <span class="o">=</span> <span class="n">importtestmodule</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
</span><span id="Package-665"><a href="#Package-665"><span class="linenos">665</span></a>
</span><span id="Package-666"><a href="#Package-666"><span class="linenos">666</span></a>        <span class="c1"># Not using fixtures to call setup_module here because autouse fixtures</span>
</span><span id="Package-667"><a href="#Package-667"><span class="linenos">667</span></a>        <span class="c1"># from packages are not called automatically (#4085).</span>
</span><span id="Package-668"><a href="#Package-668"><span class="linenos">668</span></a>        <span class="n">setup_module</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Package-669"><a href="#Package-669"><span class="linenos">669</span></a>            <span class="n">init_mod</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;setUpModule&quot;</span><span class="p">,</span> <span class="s2">&quot;setup_module&quot;</span><span class="p">)</span>
</span><span id="Package-670"><a href="#Package-670"><span class="linenos">670</span></a>        <span class="p">)</span>
</span><span id="Package-671"><a href="#Package-671"><span class="linenos">671</span></a>        <span class="k">if</span> <span class="n">setup_module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package-672"><a href="#Package-672"><span class="linenos">672</span></a>            <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">setup_module</span><span class="p">,</span> <span class="n">init_mod</span><span class="p">)</span>
</span><span id="Package-673"><a href="#Package-673"><span class="linenos">673</span></a>
</span><span id="Package-674"><a href="#Package-674"><span class="linenos">674</span></a>        <span class="n">teardown_module</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Package-675"><a href="#Package-675"><span class="linenos">675</span></a>            <span class="n">init_mod</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;tearDownModule&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown_module&quot;</span><span class="p">)</span>
</span><span id="Package-676"><a href="#Package-676"><span class="linenos">676</span></a>        <span class="p">)</span>
</span><span id="Package-677"><a href="#Package-677"><span class="linenos">677</span></a>        <span class="k">if</span> <span class="n">teardown_module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package-678"><a href="#Package-678"><span class="linenos">678</span></a>            <span class="n">func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">_call_with_optional_argument</span><span class="p">,</span> <span class="n">teardown_module</span><span class="p">,</span> <span class="n">init_mod</span><span class="p">)</span>
</span><span id="Package-679"><a href="#Package-679"><span class="linenos">679</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="Package-680"><a href="#Package-680"><span class="linenos">680</span></a>
</span><span id="Package-681"><a href="#Package-681"><span class="linenos">681</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Package-682"><a href="#Package-682"><span class="linenos">682</span></a>        <span class="c1"># Always collect __init__.py first.</span>
</span><span id="Package-683"><a href="#Package-683"><span class="linenos">683</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">sort_key</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">DirEntry</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
</span><span id="Package-684"><a href="#Package-684"><span class="linenos">684</span></a>            <span class="k">return</span> <span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="Package-685"><a href="#Package-685"><span class="linenos">685</span></a>
</span><span id="Package-686"><a href="#Package-686"><span class="linenos">686</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
</span><span id="Package-687"><a href="#Package-687"><span class="linenos">687</span></a>        <span class="n">col</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="Package-688"><a href="#Package-688"><span class="linenos">688</span></a>        <span class="n">cols</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>
</span><span id="Package-689"><a href="#Package-689"><span class="linenos">689</span></a>        <span class="n">ihook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span>
</span><span id="Package-690"><a href="#Package-690"><span class="linenos">690</span></a>        <span class="k">for</span> <span class="n">direntry</span> <span class="ow">in</span> <span class="n">scandir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">sort_key</span><span class="p">):</span>
</span><span id="Package-691"><a href="#Package-691"><span class="linenos">691</span></a>            <span class="k">if</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Package-692"><a href="#Package-692"><span class="linenos">692</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Package-693"><a href="#Package-693"><span class="linenos">693</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">with_parents</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Package-694"><a href="#Package-694"><span class="linenos">694</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Package-695"><a href="#Package-695"><span class="linenos">695</span></a>                        <span class="k">continue</span>
</span><span id="Package-696"><a href="#Package-696"><span class="linenos">696</span></a>                <span class="n">col</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_directory</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Package-697"><a href="#Package-697"><span class="linenos">697</span></a>                <span class="k">if</span> <span class="n">col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package-698"><a href="#Package-698"><span class="linenos">698</span></a>                    <span class="k">yield</span> <span class="n">col</span>
</span><span id="Package-699"><a href="#Package-699"><span class="linenos">699</span></a>
</span><span id="Package-700"><a href="#Package-700"><span class="linenos">700</span></a>            <span class="k">elif</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Package-701"><a href="#Package-701"><span class="linenos">701</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Package-702"><a href="#Package-702"><span class="linenos">702</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="Package-703"><a href="#Package-703"><span class="linenos">703</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Package-704"><a href="#Package-704"><span class="linenos">704</span></a>                        <span class="k">continue</span>
</span><span id="Package-705"><a href="#Package-705"><span class="linenos">705</span></a>                <span class="n">cols</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Package-706"><a href="#Package-706"><span class="linenos">706</span></a>                <span class="k">yield from</span> <span class="n">cols</span>
</span></pre></div>


            <div class="docstring"><p>Collector for files and directories in a Python packages -- directories
with an <code>__init__.py</code> file.</p>

<div class="alert note">

<p>Directories without an <code>__init__.py</code> file are instead collected by
<code>~<a href="#Dir">pytest.Dir</a></code> by default. Both are <code>~<a href="#Directory">pytest.Directory</a></code>
collectors.</p>

</div>

<p><em>Changed in version 8.0:</em>
Now inherits from <code>~<a href="#Directory">pytest.Directory</a></code>.</p>
</div>


                            <div id="Package.__init__" class="classattr">
                                        <input id="Package.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Package</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">fspath</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">parent</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span>,</span><span class="param">	<span class="n">config</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">session</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">nodeid</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Package.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Package.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Package.__init__-641"><a href="#Package.__init__-641"><span class="linenos">641</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Package.__init__-642"><a href="#Package.__init__-642"><span class="linenos">642</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Package.__init__-643"><a href="#Package.__init__-643"><span class="linenos">643</span></a>        <span class="n">fspath</span><span class="p">:</span> <span class="n">LEGACY_PATH</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Package.__init__-644"><a href="#Package.__init__-644"><span class="linenos">644</span></a>        <span class="n">parent</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span>
</span><span id="Package.__init__-645"><a href="#Package.__init__-645"><span class="linenos">645</span></a>        <span class="c1"># NOTE: following args are unused:</span>
</span><span id="Package.__init__-646"><a href="#Package.__init__-646"><span class="linenos">646</span></a>        <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Package.__init__-647"><a href="#Package.__init__-647"><span class="linenos">647</span></a>        <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Package.__init__-648"><a href="#Package.__init__-648"><span class="linenos">648</span></a>        <span class="n">nodeid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Package.__init__-649"><a href="#Package.__init__-649"><span class="linenos">649</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Package.__init__-650"><a href="#Package.__init__-650"><span class="linenos">650</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package.__init__-651"><a href="#Package.__init__-651"><span class="linenos">651</span></a>        <span class="c1"># NOTE: Could be just the following, but kept as-is for compat.</span>
</span><span id="Package.__init__-652"><a href="#Package.__init__-652"><span class="linenos">652</span></a>        <span class="c1"># super().__init__(self, fspath, parent=parent)</span>
</span><span id="Package.__init__-653"><a href="#Package.__init__-653"><span class="linenos">653</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">session</span>
</span><span id="Package.__init__-654"><a href="#Package.__init__-654"><span class="linenos">654</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Package.__init__-655"><a href="#Package.__init__-655"><span class="linenos">655</span></a>            <span class="n">fspath</span><span class="o">=</span><span class="n">fspath</span><span class="p">,</span>
</span><span id="Package.__init__-656"><a href="#Package.__init__-656"><span class="linenos">656</span></a>            <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
</span><span id="Package.__init__-657"><a href="#Package.__init__-657"><span class="linenos">657</span></a>            <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
</span><span id="Package.__init__-658"><a href="#Package.__init__-658"><span class="linenos">658</span></a>            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="Package.__init__-659"><a href="#Package.__init__-659"><span class="linenos">659</span></a>            <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
</span><span id="Package.__init__-660"><a href="#Package.__init__-660"><span class="linenos">660</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="Package.__init__-661"><a href="#Package.__init__-661"><span class="linenos">661</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Package.setup" class="classattr">
                                        <input id="Package.setup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Package.setup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Package.setup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Package.setup-663"><a href="#Package.setup-663"><span class="linenos">663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package.setup-664"><a href="#Package.setup-664"><span class="linenos">664</span></a>        <span class="n">init_mod</span> <span class="o">=</span> <span class="n">importtestmodule</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
</span><span id="Package.setup-665"><a href="#Package.setup-665"><span class="linenos">665</span></a>
</span><span id="Package.setup-666"><a href="#Package.setup-666"><span class="linenos">666</span></a>        <span class="c1"># Not using fixtures to call setup_module here because autouse fixtures</span>
</span><span id="Package.setup-667"><a href="#Package.setup-667"><span class="linenos">667</span></a>        <span class="c1"># from packages are not called automatically (#4085).</span>
</span><span id="Package.setup-668"><a href="#Package.setup-668"><span class="linenos">668</span></a>        <span class="n">setup_module</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Package.setup-669"><a href="#Package.setup-669"><span class="linenos">669</span></a>            <span class="n">init_mod</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;setUpModule&quot;</span><span class="p">,</span> <span class="s2">&quot;setup_module&quot;</span><span class="p">)</span>
</span><span id="Package.setup-670"><a href="#Package.setup-670"><span class="linenos">670</span></a>        <span class="p">)</span>
</span><span id="Package.setup-671"><a href="#Package.setup-671"><span class="linenos">671</span></a>        <span class="k">if</span> <span class="n">setup_module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package.setup-672"><a href="#Package.setup-672"><span class="linenos">672</span></a>            <span class="n">_call_with_optional_argument</span><span class="p">(</span><span class="n">setup_module</span><span class="p">,</span> <span class="n">init_mod</span><span class="p">)</span>
</span><span id="Package.setup-673"><a href="#Package.setup-673"><span class="linenos">673</span></a>
</span><span id="Package.setup-674"><a href="#Package.setup-674"><span class="linenos">674</span></a>        <span class="n">teardown_module</span> <span class="o">=</span> <span class="n">_get_first_non_fixture_func</span><span class="p">(</span>
</span><span id="Package.setup-675"><a href="#Package.setup-675"><span class="linenos">675</span></a>            <span class="n">init_mod</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;tearDownModule&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown_module&quot;</span><span class="p">)</span>
</span><span id="Package.setup-676"><a href="#Package.setup-676"><span class="linenos">676</span></a>        <span class="p">)</span>
</span><span id="Package.setup-677"><a href="#Package.setup-677"><span class="linenos">677</span></a>        <span class="k">if</span> <span class="n">teardown_module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package.setup-678"><a href="#Package.setup-678"><span class="linenos">678</span></a>            <span class="n">func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">_call_with_optional_argument</span><span class="p">,</span> <span class="n">teardown_module</span><span class="p">,</span> <span class="n">init_mod</span><span class="p">)</span>
</span><span id="Package.setup-679"><a href="#Package.setup-679"><span class="linenos">679</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Package.collect" class="classattr">
                                        <input id="Package.collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Package.collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Package.collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Package.collect-681"><a href="#Package.collect-681"><span class="linenos">681</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Package.collect-682"><a href="#Package.collect-682"><span class="linenos">682</span></a>        <span class="c1"># Always collect __init__.py first.</span>
</span><span id="Package.collect-683"><a href="#Package.collect-683"><span class="linenos">683</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">sort_key</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">DirEntry</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
</span><span id="Package.collect-684"><a href="#Package.collect-684"><span class="linenos">684</span></a>            <span class="k">return</span> <span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="Package.collect-685"><a href="#Package.collect-685"><span class="linenos">685</span></a>
</span><span id="Package.collect-686"><a href="#Package.collect-686"><span class="linenos">686</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
</span><span id="Package.collect-687"><a href="#Package.collect-687"><span class="linenos">687</span></a>        <span class="n">col</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="Package.collect-688"><a href="#Package.collect-688"><span class="linenos">688</span></a>        <span class="n">cols</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>
</span><span id="Package.collect-689"><a href="#Package.collect-689"><span class="linenos">689</span></a>        <span class="n">ihook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span>
</span><span id="Package.collect-690"><a href="#Package.collect-690"><span class="linenos">690</span></a>        <span class="k">for</span> <span class="n">direntry</span> <span class="ow">in</span> <span class="n">scandir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">sort_key</span><span class="p">):</span>
</span><span id="Package.collect-691"><a href="#Package.collect-691"><span class="linenos">691</span></a>            <span class="k">if</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Package.collect-692"><a href="#Package.collect-692"><span class="linenos">692</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Package.collect-693"><a href="#Package.collect-693"><span class="linenos">693</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">with_parents</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Package.collect-694"><a href="#Package.collect-694"><span class="linenos">694</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Package.collect-695"><a href="#Package.collect-695"><span class="linenos">695</span></a>                        <span class="k">continue</span>
</span><span id="Package.collect-696"><a href="#Package.collect-696"><span class="linenos">696</span></a>                <span class="n">col</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_directory</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Package.collect-697"><a href="#Package.collect-697"><span class="linenos">697</span></a>                <span class="k">if</span> <span class="n">col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Package.collect-698"><a href="#Package.collect-698"><span class="linenos">698</span></a>                    <span class="k">yield</span> <span class="n">col</span>
</span><span id="Package.collect-699"><a href="#Package.collect-699"><span class="linenos">699</span></a>
</span><span id="Package.collect-700"><a href="#Package.collect-700"><span class="linenos">700</span></a>            <span class="k">elif</span> <span class="n">direntry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Package.collect-701"><a href="#Package.collect-701"><span class="linenos">701</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">direntry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Package.collect-702"><a href="#Package.collect-702"><span class="linenos">702</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">isinitpath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="Package.collect-703"><a href="#Package.collect-703"><span class="linenos">703</span></a>                    <span class="k">if</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_ignore_collect</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">):</span>
</span><span id="Package.collect-704"><a href="#Package.collect-704"><span class="linenos">704</span></a>                        <span class="k">continue</span>
</span><span id="Package.collect-705"><a href="#Package.collect-705"><span class="linenos">705</span></a>                <span class="n">cols</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Package.collect-706"><a href="#Package.collect-706"><span class="linenos">706</span></a>                <span class="k">yield from</span> <span class="n">cols</span>
</span></pre></div>


            <div class="docstring"><p>Collect children (items and collectors) for this collector.</p>
</div>


                            </div>
                </section>
                <section id="param">
                            <input id="param-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">param</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span><span class="n">values</span><span class="p">:</span> <span class="nb">object</span>,</span><span class="param">	<span class="n">marks</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">MarkDecorator</span><span class="p">,</span> <span class="n">Collection</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">MarkDecorator</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">Mark</span><span class="p">]]</span> <span class="o">=</span> <span class="p">()</span>,</span><span class="param">	<span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">ParameterSet</span>:</span></span>

                <label class="view-source-button" for="param-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#param"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="param-49"><a href="#param-49"><span class="linenos">49</span></a><span class="k">def</span><span class="w"> </span><span class="nf">param</span><span class="p">(</span>
</span><span id="param-50"><a href="#param-50"><span class="linenos">50</span></a>    <span class="o">*</span><span class="n">values</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="param-51"><a href="#param-51"><span class="linenos">51</span></a>    <span class="n">marks</span><span class="p">:</span> <span class="n">MarkDecorator</span> <span class="o">|</span> <span class="n">Collection</span><span class="p">[</span><span class="n">MarkDecorator</span> <span class="o">|</span> <span class="n">Mark</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
</span><span id="param-52"><a href="#param-52"><span class="linenos">52</span></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="param-53"><a href="#param-53"><span class="linenos">53</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParameterSet</span><span class="p">:</span>
</span><span id="param-54"><a href="#param-54"><span class="linenos">54</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Specify a parameter in `pytest.mark.parametrize`_ calls or</span>
</span><span id="param-55"><a href="#param-55"><span class="linenos">55</span></a><span class="sd">    :ref:`parametrized fixtures &lt;fixture-parametrize-marks&gt;`.</span>
</span><span id="param-56"><a href="#param-56"><span class="linenos">56</span></a>
</span><span id="param-57"><a href="#param-57"><span class="linenos">57</span></a><span class="sd">    .. code-block:: python</span>
</span><span id="param-58"><a href="#param-58"><span class="linenos">58</span></a>
</span><span id="param-59"><a href="#param-59"><span class="linenos">59</span></a><span class="sd">        @pytest.mark.parametrize(</span>
</span><span id="param-60"><a href="#param-60"><span class="linenos">60</span></a><span class="sd">            &quot;test_input,expected&quot;,</span>
</span><span id="param-61"><a href="#param-61"><span class="linenos">61</span></a><span class="sd">            [</span>
</span><span id="param-62"><a href="#param-62"><span class="linenos">62</span></a><span class="sd">                (&quot;3+5&quot;, 8),</span>
</span><span id="param-63"><a href="#param-63"><span class="linenos">63</span></a><span class="sd">                pytest.param(&quot;6*9&quot;, 42, marks=pytest.mark.xfail),</span>
</span><span id="param-64"><a href="#param-64"><span class="linenos">64</span></a><span class="sd">            ],</span>
</span><span id="param-65"><a href="#param-65"><span class="linenos">65</span></a><span class="sd">        )</span>
</span><span id="param-66"><a href="#param-66"><span class="linenos">66</span></a><span class="sd">        def test_eval(test_input, expected):</span>
</span><span id="param-67"><a href="#param-67"><span class="linenos">67</span></a><span class="sd">            assert eval(test_input) == expected</span>
</span><span id="param-68"><a href="#param-68"><span class="linenos">68</span></a>
</span><span id="param-69"><a href="#param-69"><span class="linenos">69</span></a><span class="sd">    :param values: Variable args of the values of the parameter set, in order.</span>
</span><span id="param-70"><a href="#param-70"><span class="linenos">70</span></a><span class="sd">    :param marks: A single mark or a list of marks to be applied to this parameter set.</span>
</span><span id="param-71"><a href="#param-71"><span class="linenos">71</span></a><span class="sd">    :param id: The id to attribute to this parameter set.</span>
</span><span id="param-72"><a href="#param-72"><span class="linenos">72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="param-73"><a href="#param-73"><span class="linenos">73</span></a>    <span class="k">return</span> <span class="n">ParameterSet</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">marks</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Specify a parameter in <code>pytest.mark.parametrize</code>_ calls or
:ref:<code>parametrized fixtures &lt;fixture-parametrize-marks&gt;</code>.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n"><a href="#param">pytest.param</a></span><span class="p">(</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n"><a href="#xfail">pytest.mark.xfail</a></span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</code></pre>
</div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>values</strong>:  Variable args of the values of the parameter set, in order.</li>
<li><strong>marks</strong>:  A single mark or a list of marks to be applied to this parameter set.</li>
<li><strong>id</strong>:  The id to attribute to this parameter set.</li>
</ul>
</div>


                </section>
                <section id="Parser">
                            <input id="Parser-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Parser</span>:

                <label class="view-source-button" for="Parser-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser-35"><a href="#Parser-35"><span class="linenos"> 35</span></a><span class="nd">@final</span>
</span><span id="Parser-36"><a href="#Parser-36"><span class="linenos"> 36</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Parser</span><span class="p">:</span>
</span><span id="Parser-37"><a href="#Parser-37"><span class="linenos"> 37</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Parser for command line arguments and ini-file values.</span>
</span><span id="Parser-38"><a href="#Parser-38"><span class="linenos"> 38</span></a>
</span><span id="Parser-39"><a href="#Parser-39"><span class="linenos"> 39</span></a><span class="sd">    :ivar extra_info: Dict of generic param -&gt; value to display in case</span>
</span><span id="Parser-40"><a href="#Parser-40"><span class="linenos"> 40</span></a><span class="sd">        there&#39;s an error processing the command line arguments.</span>
</span><span id="Parser-41"><a href="#Parser-41"><span class="linenos"> 41</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Parser-42"><a href="#Parser-42"><span class="linenos"> 42</span></a>
</span><span id="Parser-43"><a href="#Parser-43"><span class="linenos"> 43</span></a>    <span class="n">prog</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parser-44"><a href="#Parser-44"><span class="linenos"> 44</span></a>
</span><span id="Parser-45"><a href="#Parser-45"><span class="linenos"> 45</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Parser-46"><a href="#Parser-46"><span class="linenos"> 46</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser-47"><a href="#Parser-47"><span class="linenos"> 47</span></a>        <span class="n">usage</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-48"><a href="#Parser-48"><span class="linenos"> 48</span></a>        <span class="n">processopt</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Argument</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-49"><a href="#Parser-49"><span class="linenos"> 49</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Parser-50"><a href="#Parser-50"><span class="linenos"> 50</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Parser-51"><a href="#Parser-51"><span class="linenos"> 51</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser-52"><a href="#Parser-52"><span class="linenos"> 52</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Parser-53"><a href="#Parser-53"><span class="linenos"> 53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_anonymous</span> <span class="o">=</span> <span class="n">OptionGroup</span><span class="p">(</span><span class="s2">&quot;Custom options&quot;</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Parser-54"><a href="#Parser-54"><span class="linenos"> 54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">OptionGroup</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Parser-55"><a href="#Parser-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span> <span class="o">=</span> <span class="n">processopt</span>
</span><span id="Parser-56"><a href="#Parser-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_usage</span> <span class="o">=</span> <span class="n">usage</span>
</span><span id="Parser-57"><a href="#Parser-57"><span class="linenos"> 57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inidict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Parser-58"><a href="#Parser-58"><span class="linenos"> 58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ininames</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Parser-59"><a href="#Parser-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Parser-60"><a href="#Parser-60"><span class="linenos"> 60</span></a>
</span><span id="Parser-61"><a href="#Parser-61"><span class="linenos"> 61</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">processoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option</span><span class="p">:</span> <span class="n">Argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser-62"><a href="#Parser-62"><span class="linenos"> 62</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span><span class="p">:</span>
</span><span id="Parser-63"><a href="#Parser-63"><span class="linenos"> 63</span></a>            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">dest</span><span class="p">:</span>
</span><span id="Parser-64"><a href="#Parser-64"><span class="linenos"> 64</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
</span><span id="Parser-65"><a href="#Parser-65"><span class="linenos"> 65</span></a>
</span><span id="Parser-66"><a href="#Parser-66"><span class="linenos"> 66</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getgroup</span><span class="p">(</span>
</span><span id="Parser-67"><a href="#Parser-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">after</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parser-68"><a href="#Parser-68"><span class="linenos"> 68</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OptionGroup</span><span class="p">:</span>
</span><span id="Parser-69"><a href="#Parser-69"><span class="linenos"> 69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get (or create) a named option Group.</span>
</span><span id="Parser-70"><a href="#Parser-70"><span class="linenos"> 70</span></a>
</span><span id="Parser-71"><a href="#Parser-71"><span class="linenos"> 71</span></a><span class="sd">        :param name: Name of the option group.</span>
</span><span id="Parser-72"><a href="#Parser-72"><span class="linenos"> 72</span></a><span class="sd">        :param description: Long description for --help output.</span>
</span><span id="Parser-73"><a href="#Parser-73"><span class="linenos"> 73</span></a><span class="sd">        :param after: Name of another group, used for ordering --help output.</span>
</span><span id="Parser-74"><a href="#Parser-74"><span class="linenos"> 74</span></a><span class="sd">        :returns: The option group.</span>
</span><span id="Parser-75"><a href="#Parser-75"><span class="linenos"> 75</span></a>
</span><span id="Parser-76"><a href="#Parser-76"><span class="linenos"> 76</span></a><span class="sd">        The returned group object has an ``addoption`` method with the same</span>
</span><span id="Parser-77"><a href="#Parser-77"><span class="linenos"> 77</span></a><span class="sd">        signature as :func:`parser.addoption &lt;pytest.Parser.addoption&gt;` but</span>
</span><span id="Parser-78"><a href="#Parser-78"><span class="linenos"> 78</span></a><span class="sd">        will be shown in the respective group in the output of</span>
</span><span id="Parser-79"><a href="#Parser-79"><span class="linenos"> 79</span></a><span class="sd">        ``pytest --help``.</span>
</span><span id="Parser-80"><a href="#Parser-80"><span class="linenos"> 80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-81"><a href="#Parser-81"><span class="linenos"> 81</span></a>        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">:</span>
</span><span id="Parser-82"><a href="#Parser-82"><span class="linenos"> 82</span></a>            <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Parser-83"><a href="#Parser-83"><span class="linenos"> 83</span></a>                <span class="k">return</span> <span class="n">group</span>
</span><span id="Parser-84"><a href="#Parser-84"><span class="linenos"> 84</span></a>        <span class="n">group</span> <span class="o">=</span> <span class="n">OptionGroup</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Parser-85"><a href="#Parser-85"><span class="linenos"> 85</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Parser-86"><a href="#Parser-86"><span class="linenos"> 86</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">grp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">):</span>
</span><span id="Parser-87"><a href="#Parser-87"><span class="linenos"> 87</span></a>            <span class="k">if</span> <span class="n">grp</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">after</span><span class="p">:</span>
</span><span id="Parser-88"><a href="#Parser-88"><span class="linenos"> 88</span></a>                <span class="k">break</span>
</span><span id="Parser-89"><a href="#Parser-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
</span><span id="Parser-90"><a href="#Parser-90"><span class="linenos"> 90</span></a>        <span class="k">return</span> <span class="n">group</span>
</span><span id="Parser-91"><a href="#Parser-91"><span class="linenos"> 91</span></a>
</span><span id="Parser-92"><a href="#Parser-92"><span class="linenos"> 92</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser-93"><a href="#Parser-93"><span class="linenos"> 93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a command line option.</span>
</span><span id="Parser-94"><a href="#Parser-94"><span class="linenos"> 94</span></a>
</span><span id="Parser-95"><a href="#Parser-95"><span class="linenos"> 95</span></a><span class="sd">        :param opts:</span>
</span><span id="Parser-96"><a href="#Parser-96"><span class="linenos"> 96</span></a><span class="sd">            Option names, can be short or long options.</span>
</span><span id="Parser-97"><a href="#Parser-97"><span class="linenos"> 97</span></a><span class="sd">        :param attrs:</span>
</span><span id="Parser-98"><a href="#Parser-98"><span class="linenos"> 98</span></a><span class="sd">            Same attributes as the argparse library&#39;s :meth:`add_argument()</span>
</span><span id="Parser-99"><a href="#Parser-99"><span class="linenos"> 99</span></a><span class="sd">            &lt;argparse.ArgumentParser.add_argument&gt;` function accepts.</span>
</span><span id="Parser-100"><a href="#Parser-100"><span class="linenos">100</span></a>
</span><span id="Parser-101"><a href="#Parser-101"><span class="linenos">101</span></a><span class="sd">        After command line parsing, options are available on the pytest config</span>
</span><span id="Parser-102"><a href="#Parser-102"><span class="linenos">102</span></a><span class="sd">        object via ``config.option.NAME`` where ``NAME`` is usually set</span>
</span><span id="Parser-103"><a href="#Parser-103"><span class="linenos">103</span></a><span class="sd">        by passing a ``dest`` attribute, for example</span>
</span><span id="Parser-104"><a href="#Parser-104"><span class="linenos">104</span></a><span class="sd">        ``addoption(&quot;--long&quot;, dest=&quot;NAME&quot;, ...)``.</span>
</span><span id="Parser-105"><a href="#Parser-105"><span class="linenos">105</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-106"><a href="#Parser-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_anonymous</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span><span class="o">*</span><span class="n">opts</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</span><span id="Parser-107"><a href="#Parser-107"><span class="linenos">107</span></a>
</span><span id="Parser-108"><a href="#Parser-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
</span><span id="Parser-109"><a href="#Parser-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser-110"><a href="#Parser-110"><span class="linenos">110</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser-111"><a href="#Parser-111"><span class="linenos">111</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-112"><a href="#Parser-112"><span class="linenos">112</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
</span><span id="Parser-113"><a href="#Parser-113"><span class="linenos">113</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest._argcomplete</span><span class="w"> </span><span class="kn">import</span> <span class="n">try_argcomplete</span>
</span><span id="Parser-114"><a href="#Parser-114"><span class="linenos">114</span></a>
</span><span id="Parser-115"><a href="#Parser-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">optparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getparser</span><span class="p">()</span>
</span><span id="Parser-116"><a href="#Parser-116"><span class="linenos">116</span></a>        <span class="n">try_argcomplete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">optparser</span><span class="p">)</span>
</span><span id="Parser-117"><a href="#Parser-117"><span class="linenos">117</span></a>        <span class="n">strargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
</span><span id="Parser-118"><a href="#Parser-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">optparser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">strargs</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</span><span id="Parser-119"><a href="#Parser-119"><span class="linenos">119</span></a>
</span><span id="Parser-120"><a href="#Parser-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getparser</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MyOptionParser</span><span class="p">:</span>
</span><span id="Parser-121"><a href="#Parser-121"><span class="linenos">121</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest._argcomplete</span><span class="w"> </span><span class="kn">import</span> <span class="n">filescompleter</span>
</span><span id="Parser-122"><a href="#Parser-122"><span class="linenos">122</span></a>
</span><span id="Parser-123"><a href="#Parser-123"><span class="linenos">123</span></a>        <span class="n">optparser</span> <span class="o">=</span> <span class="n">MyOptionParser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_info</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">prog</span><span class="p">)</span>
</span><span id="Parser-124"><a href="#Parser-124"><span class="linenos">124</span></a>        <span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anonymous</span><span class="p">]</span>
</span><span id="Parser-125"><a href="#Parser-125"><span class="linenos">125</span></a>        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
</span><span id="Parser-126"><a href="#Parser-126"><span class="linenos">126</span></a>            <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
</span><span id="Parser-127"><a href="#Parser-127"><span class="linenos">127</span></a>                <span class="n">desc</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">description</span> <span class="ow">or</span> <span class="n">group</span><span class="o">.</span><span class="n">name</span>
</span><span id="Parser-128"><a href="#Parser-128"><span class="linenos">128</span></a>                <span class="n">arggroup</span> <span class="o">=</span> <span class="n">optparser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span>
</span><span id="Parser-129"><a href="#Parser-129"><span class="linenos">129</span></a>                <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
</span><span id="Parser-130"><a href="#Parser-130"><span class="linenos">130</span></a>                    <span class="n">n</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">names</span><span class="p">()</span>
</span><span id="Parser-131"><a href="#Parser-131"><span class="linenos">131</span></a>                    <span class="n">a</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">attrs</span><span class="p">()</span>
</span><span id="Parser-132"><a href="#Parser-132"><span class="linenos">132</span></a>                    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="o">**</span><span class="n">a</span><span class="p">)</span>
</span><span id="Parser-133"><a href="#Parser-133"><span class="linenos">133</span></a>        <span class="n">file_or_dir_arg</span> <span class="o">=</span> <span class="n">optparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="n">FILE_OR_DIR</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>
</span><span id="Parser-134"><a href="#Parser-134"><span class="linenos">134</span></a>        <span class="c1"># bash like autocompletion for dirs (appending &#39;/&#39;)</span>
</span><span id="Parser-135"><a href="#Parser-135"><span class="linenos">135</span></a>        <span class="c1"># Type ignored because typeshed doesn&#39;t know about argcomplete.</span>
</span><span id="Parser-136"><a href="#Parser-136"><span class="linenos">136</span></a>        <span class="n">file_or_dir_arg</span><span class="o">.</span><span class="n">completer</span> <span class="o">=</span> <span class="n">filescompleter</span>  <span class="c1"># type: ignore</span>
</span><span id="Parser-137"><a href="#Parser-137"><span class="linenos">137</span></a>        <span class="k">return</span> <span class="n">optparser</span>
</span><span id="Parser-138"><a href="#Parser-138"><span class="linenos">138</span></a>
</span><span id="Parser-139"><a href="#Parser-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_setoption</span><span class="p">(</span>
</span><span id="Parser-140"><a href="#Parser-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser-141"><a href="#Parser-141"><span class="linenos">141</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser-142"><a href="#Parser-142"><span class="linenos">142</span></a>        <span class="n">option</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span>
</span><span id="Parser-143"><a href="#Parser-143"><span class="linenos">143</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-144"><a href="#Parser-144"><span class="linenos">144</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Parser-145"><a href="#Parser-145"><span class="linenos">145</span></a>        <span class="n">parsedoption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</span><span id="Parser-146"><a href="#Parser-146"><span class="linenos">146</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">parsedoption</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Parser-147"><a href="#Parser-147"><span class="linenos">147</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Parser-148"><a href="#Parser-148"><span class="linenos">148</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parsedoption</span><span class="p">,</span> <span class="n">FILE_OR_DIR</span><span class="p">))</span>
</span><span id="Parser-149"><a href="#Parser-149"><span class="linenos">149</span></a>
</span><span id="Parser-150"><a href="#Parser-150"><span class="linenos">150</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_known_args</span><span class="p">(</span>
</span><span id="Parser-151"><a href="#Parser-151"><span class="linenos">151</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser-152"><a href="#Parser-152"><span class="linenos">152</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser-153"><a href="#Parser-153"><span class="linenos">153</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-154"><a href="#Parser-154"><span class="linenos">154</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
</span><span id="Parser-155"><a href="#Parser-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the known arguments at this point.</span>
</span><span id="Parser-156"><a href="#Parser-156"><span class="linenos">156</span></a>
</span><span id="Parser-157"><a href="#Parser-157"><span class="linenos">157</span></a><span class="sd">        :returns: An argparse namespace object.</span>
</span><span id="Parser-158"><a href="#Parser-158"><span class="linenos">158</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-159"><a href="#Parser-159"><span class="linenos">159</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_known_and_unknown_args</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Parser-160"><a href="#Parser-160"><span class="linenos">160</span></a>
</span><span id="Parser-161"><a href="#Parser-161"><span class="linenos">161</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_known_and_unknown_args</span><span class="p">(</span>
</span><span id="Parser-162"><a href="#Parser-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser-163"><a href="#Parser-163"><span class="linenos">163</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser-164"><a href="#Parser-164"><span class="linenos">164</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-165"><a href="#Parser-165"><span class="linenos">165</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
</span><span id="Parser-166"><a href="#Parser-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the known arguments at this point, and also return the</span>
</span><span id="Parser-167"><a href="#Parser-167"><span class="linenos">167</span></a><span class="sd">        remaining unknown arguments.</span>
</span><span id="Parser-168"><a href="#Parser-168"><span class="linenos">168</span></a>
</span><span id="Parser-169"><a href="#Parser-169"><span class="linenos">169</span></a><span class="sd">        :returns:</span>
</span><span id="Parser-170"><a href="#Parser-170"><span class="linenos">170</span></a><span class="sd">            A tuple containing an argparse namespace object for the known</span>
</span><span id="Parser-171"><a href="#Parser-171"><span class="linenos">171</span></a><span class="sd">            arguments, and a list of the unknown arguments.</span>
</span><span id="Parser-172"><a href="#Parser-172"><span class="linenos">172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-173"><a href="#Parser-173"><span class="linenos">173</span></a>        <span class="n">optparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getparser</span><span class="p">()</span>
</span><span id="Parser-174"><a href="#Parser-174"><span class="linenos">174</span></a>        <span class="n">strargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
</span><span id="Parser-175"><a href="#Parser-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="n">optparser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="n">strargs</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</span><span id="Parser-176"><a href="#Parser-176"><span class="linenos">176</span></a>
</span><span id="Parser-177"><a href="#Parser-177"><span class="linenos">177</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addini</span><span class="p">(</span>
</span><span id="Parser-178"><a href="#Parser-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser-179"><a href="#Parser-179"><span class="linenos">179</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Parser-180"><a href="#Parser-180"><span class="linenos">180</span></a>        <span class="n">help</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Parser-181"><a href="#Parser-181"><span class="linenos">181</span></a>        <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;paths&quot;</span><span class="p">,</span> <span class="s2">&quot;pathlist&quot;</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="s2">&quot;linelist&quot;</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">]</span>
</span><span id="Parser-182"><a href="#Parser-182"><span class="linenos">182</span></a>        <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser-183"><a href="#Parser-183"><span class="linenos">183</span></a>        <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOT_SET</span><span class="p">,</span>
</span><span id="Parser-184"><a href="#Parser-184"><span class="linenos">184</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser-185"><a href="#Parser-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an ini-file option.</span>
</span><span id="Parser-186"><a href="#Parser-186"><span class="linenos">186</span></a>
</span><span id="Parser-187"><a href="#Parser-187"><span class="linenos">187</span></a><span class="sd">        :param name:</span>
</span><span id="Parser-188"><a href="#Parser-188"><span class="linenos">188</span></a><span class="sd">            Name of the ini-variable.</span>
</span><span id="Parser-189"><a href="#Parser-189"><span class="linenos">189</span></a><span class="sd">        :param type:</span>
</span><span id="Parser-190"><a href="#Parser-190"><span class="linenos">190</span></a><span class="sd">            Type of the variable. Can be:</span>
</span><span id="Parser-191"><a href="#Parser-191"><span class="linenos">191</span></a>
</span><span id="Parser-192"><a href="#Parser-192"><span class="linenos">192</span></a><span class="sd">                * ``string``: a string</span>
</span><span id="Parser-193"><a href="#Parser-193"><span class="linenos">193</span></a><span class="sd">                * ``bool``: a boolean</span>
</span><span id="Parser-194"><a href="#Parser-194"><span class="linenos">194</span></a><span class="sd">                * ``args``: a list of strings, separated as in a shell</span>
</span><span id="Parser-195"><a href="#Parser-195"><span class="linenos">195</span></a><span class="sd">                * ``linelist``: a list of strings, separated by line breaks</span>
</span><span id="Parser-196"><a href="#Parser-196"><span class="linenos">196</span></a><span class="sd">                * ``paths``: a list of :class:`pathlib.Path`, separated as in a shell</span>
</span><span id="Parser-197"><a href="#Parser-197"><span class="linenos">197</span></a><span class="sd">                * ``pathlist``: a list of ``py.path``, separated as in a shell</span>
</span><span id="Parser-198"><a href="#Parser-198"><span class="linenos">198</span></a>
</span><span id="Parser-199"><a href="#Parser-199"><span class="linenos">199</span></a><span class="sd">            For ``paths`` and ``pathlist`` types, they are considered relative to the ini-file.</span>
</span><span id="Parser-200"><a href="#Parser-200"><span class="linenos">200</span></a><span class="sd">            In case the execution is happening without an ini-file defined,</span>
</span><span id="Parser-201"><a href="#Parser-201"><span class="linenos">201</span></a><span class="sd">            they will be considered relative to the current working directory (for example with ``--override-ini``).</span>
</span><span id="Parser-202"><a href="#Parser-202"><span class="linenos">202</span></a>
</span><span id="Parser-203"><a href="#Parser-203"><span class="linenos">203</span></a><span class="sd">            .. versionadded:: 7.0</span>
</span><span id="Parser-204"><a href="#Parser-204"><span class="linenos">204</span></a><span class="sd">                The ``paths`` variable type.</span>
</span><span id="Parser-205"><a href="#Parser-205"><span class="linenos">205</span></a>
</span><span id="Parser-206"><a href="#Parser-206"><span class="linenos">206</span></a><span class="sd">            .. versionadded:: 8.1</span>
</span><span id="Parser-207"><a href="#Parser-207"><span class="linenos">207</span></a><span class="sd">                Use the current working directory to resolve ``paths`` and ``pathlist`` in the absence of an ini-file.</span>
</span><span id="Parser-208"><a href="#Parser-208"><span class="linenos">208</span></a>
</span><span id="Parser-209"><a href="#Parser-209"><span class="linenos">209</span></a><span class="sd">            Defaults to ``string`` if ``None`` or not passed.</span>
</span><span id="Parser-210"><a href="#Parser-210"><span class="linenos">210</span></a><span class="sd">        :param default:</span>
</span><span id="Parser-211"><a href="#Parser-211"><span class="linenos">211</span></a><span class="sd">            Default value if no ini-file option exists but is queried.</span>
</span><span id="Parser-212"><a href="#Parser-212"><span class="linenos">212</span></a>
</span><span id="Parser-213"><a href="#Parser-213"><span class="linenos">213</span></a><span class="sd">        The value of ini-variables can be retrieved via a call to</span>
</span><span id="Parser-214"><a href="#Parser-214"><span class="linenos">214</span></a><span class="sd">        :py:func:`config.getini(name) &lt;pytest.Config.getini&gt;`.</span>
</span><span id="Parser-215"><a href="#Parser-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-216"><a href="#Parser-216"><span class="linenos">216</span></a>        <span class="k">assert</span> <span class="nb">type</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;paths&quot;</span><span class="p">,</span> <span class="s2">&quot;pathlist&quot;</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="s2">&quot;linelist&quot;</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">)</span>
</span><span id="Parser-217"><a href="#Parser-217"><span class="linenos">217</span></a>        <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">NOT_SET</span><span class="p">:</span>
</span><span id="Parser-218"><a href="#Parser-218"><span class="linenos">218</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="n">get_ini_default_for_type</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
</span><span id="Parser-219"><a href="#Parser-219"><span class="linenos">219</span></a>
</span><span id="Parser-220"><a href="#Parser-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inidict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">help</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
</span><span id="Parser-221"><a href="#Parser-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ininames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Parser for command line arguments and ini-file values.</p>

<p>:ivar extra_info: Dict of generic param -> value to display in case
    there's an error processing the command line arguments.</p>
</div>


                            <div id="Parser.__init__" class="classattr">
                                        <input id="Parser.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Parser</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">usage</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">processopt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">argparsing</span><span class="o">.</span><span class="n">Argument</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Parser.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.__init__-45"><a href="#Parser.__init__-45"><span class="linenos">45</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Parser.__init__-46"><a href="#Parser.__init__-46"><span class="linenos">46</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser.__init__-47"><a href="#Parser.__init__-47"><span class="linenos">47</span></a>        <span class="n">usage</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.__init__-48"><a href="#Parser.__init__-48"><span class="linenos">48</span></a>        <span class="n">processopt</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Argument</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.__init__-49"><a href="#Parser.__init__-49"><span class="linenos">49</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Parser.__init__-50"><a href="#Parser.__init__-50"><span class="linenos">50</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Parser.__init__-51"><a href="#Parser.__init__-51"><span class="linenos">51</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser.__init__-52"><a href="#Parser.__init__-52"><span class="linenos">52</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Parser.__init__-53"><a href="#Parser.__init__-53"><span class="linenos">53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_anonymous</span> <span class="o">=</span> <span class="n">OptionGroup</span><span class="p">(</span><span class="s2">&quot;Custom options&quot;</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Parser.__init__-54"><a href="#Parser.__init__-54"><span class="linenos">54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">OptionGroup</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Parser.__init__-55"><a href="#Parser.__init__-55"><span class="linenos">55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span> <span class="o">=</span> <span class="n">processopt</span>
</span><span id="Parser.__init__-56"><a href="#Parser.__init__-56"><span class="linenos">56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_usage</span> <span class="o">=</span> <span class="n">usage</span>
</span><span id="Parser.__init__-57"><a href="#Parser.__init__-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inidict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Parser.__init__-58"><a href="#Parser.__init__-58"><span class="linenos">58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ininames</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Parser.__init__-59"><a href="#Parser.__init__-59"><span class="linenos">59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span></pre></div>


    

                            </div>
                            <div id="Parser.prog" class="classattr">
                                <div class="attr variable">
            <span class="name">prog</span><span class="annotation">: str | None</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Parser.prog"></a>
    
    

                            </div>
                            <div id="Parser.extra_info" class="classattr">
                                <div class="attr variable">
            <span class="name">extra_info</span><span class="annotation">: dict[str, typing.Any]</span>

        
    </div>
    <a class="headerlink" href="#Parser.extra_info"></a>
    
    

                            </div>
                            <div id="Parser.processoption" class="classattr">
                                        <input id="Parser.processoption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">processoption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">option</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">argparsing</span><span class="o">.</span><span class="n">Argument</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Parser.processoption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.processoption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.processoption-61"><a href="#Parser.processoption-61"><span class="linenos">61</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">processoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option</span><span class="p">:</span> <span class="n">Argument</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser.processoption-62"><a href="#Parser.processoption-62"><span class="linenos">62</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span><span class="p">:</span>
</span><span id="Parser.processoption-63"><a href="#Parser.processoption-63"><span class="linenos">63</span></a>            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">dest</span><span class="p">:</span>
</span><span id="Parser.processoption-64"><a href="#Parser.processoption-64"><span class="linenos">64</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_processopt</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Parser.getgroup" class="classattr">
                                        <input id="Parser.getgroup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getgroup</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">after</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">argparsing</span><span class="o">.</span><span class="n">OptionGroup</span>:</span></span>

                <label class="view-source-button" for="Parser.getgroup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.getgroup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.getgroup-66"><a href="#Parser.getgroup-66"><span class="linenos">66</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getgroup</span><span class="p">(</span>
</span><span id="Parser.getgroup-67"><a href="#Parser.getgroup-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">after</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parser.getgroup-68"><a href="#Parser.getgroup-68"><span class="linenos">68</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OptionGroup</span><span class="p">:</span>
</span><span id="Parser.getgroup-69"><a href="#Parser.getgroup-69"><span class="linenos">69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get (or create) a named option Group.</span>
</span><span id="Parser.getgroup-70"><a href="#Parser.getgroup-70"><span class="linenos">70</span></a>
</span><span id="Parser.getgroup-71"><a href="#Parser.getgroup-71"><span class="linenos">71</span></a><span class="sd">        :param name: Name of the option group.</span>
</span><span id="Parser.getgroup-72"><a href="#Parser.getgroup-72"><span class="linenos">72</span></a><span class="sd">        :param description: Long description for --help output.</span>
</span><span id="Parser.getgroup-73"><a href="#Parser.getgroup-73"><span class="linenos">73</span></a><span class="sd">        :param after: Name of another group, used for ordering --help output.</span>
</span><span id="Parser.getgroup-74"><a href="#Parser.getgroup-74"><span class="linenos">74</span></a><span class="sd">        :returns: The option group.</span>
</span><span id="Parser.getgroup-75"><a href="#Parser.getgroup-75"><span class="linenos">75</span></a>
</span><span id="Parser.getgroup-76"><a href="#Parser.getgroup-76"><span class="linenos">76</span></a><span class="sd">        The returned group object has an ``addoption`` method with the same</span>
</span><span id="Parser.getgroup-77"><a href="#Parser.getgroup-77"><span class="linenos">77</span></a><span class="sd">        signature as :func:`parser.addoption &lt;pytest.Parser.addoption&gt;` but</span>
</span><span id="Parser.getgroup-78"><a href="#Parser.getgroup-78"><span class="linenos">78</span></a><span class="sd">        will be shown in the respective group in the output of</span>
</span><span id="Parser.getgroup-79"><a href="#Parser.getgroup-79"><span class="linenos">79</span></a><span class="sd">        ``pytest --help``.</span>
</span><span id="Parser.getgroup-80"><a href="#Parser.getgroup-80"><span class="linenos">80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.getgroup-81"><a href="#Parser.getgroup-81"><span class="linenos">81</span></a>        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">:</span>
</span><span id="Parser.getgroup-82"><a href="#Parser.getgroup-82"><span class="linenos">82</span></a>            <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Parser.getgroup-83"><a href="#Parser.getgroup-83"><span class="linenos">83</span></a>                <span class="k">return</span> <span class="n">group</span>
</span><span id="Parser.getgroup-84"><a href="#Parser.getgroup-84"><span class="linenos">84</span></a>        <span class="n">group</span> <span class="o">=</span> <span class="n">OptionGroup</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Parser.getgroup-85"><a href="#Parser.getgroup-85"><span class="linenos">85</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Parser.getgroup-86"><a href="#Parser.getgroup-86"><span class="linenos">86</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">grp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">):</span>
</span><span id="Parser.getgroup-87"><a href="#Parser.getgroup-87"><span class="linenos">87</span></a>            <span class="k">if</span> <span class="n">grp</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">after</span><span class="p">:</span>
</span><span id="Parser.getgroup-88"><a href="#Parser.getgroup-88"><span class="linenos">88</span></a>                <span class="k">break</span>
</span><span id="Parser.getgroup-89"><a href="#Parser.getgroup-89"><span class="linenos">89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
</span><span id="Parser.getgroup-90"><a href="#Parser.getgroup-90"><span class="linenos">90</span></a>        <span class="k">return</span> <span class="n">group</span>
</span></pre></div>


            <div class="docstring"><p>Get (or create) a named option Group.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>:  Name of the option group.</li>
<li><strong>description</strong>:  Long description for --help output.</li>
<li><strong>after</strong>:  Name of another group, used for ordering --help output.
:returns: The option group.</li>
</ul>

<p>The returned group object has an <code><a href="#Parser.addoption">addoption</a></code> method with the same
signature as <code>parser.addoption &lt;<a href="#Parser.addoption">pytest.Parser.addoption</a>&gt;()</code> but
will be shown in the respective group in the output of
<code>pytest --help</code>.</p>
</div>


                            </div>
                            <div id="Parser.addoption" class="classattr">
                                        <input id="Parser.addoption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addoption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Parser.addoption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.addoption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.addoption-92"><a href="#Parser.addoption-92"><span class="linenos"> 92</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addoption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">opts</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser.addoption-93"><a href="#Parser.addoption-93"><span class="linenos"> 93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a command line option.</span>
</span><span id="Parser.addoption-94"><a href="#Parser.addoption-94"><span class="linenos"> 94</span></a>
</span><span id="Parser.addoption-95"><a href="#Parser.addoption-95"><span class="linenos"> 95</span></a><span class="sd">        :param opts:</span>
</span><span id="Parser.addoption-96"><a href="#Parser.addoption-96"><span class="linenos"> 96</span></a><span class="sd">            Option names, can be short or long options.</span>
</span><span id="Parser.addoption-97"><a href="#Parser.addoption-97"><span class="linenos"> 97</span></a><span class="sd">        :param attrs:</span>
</span><span id="Parser.addoption-98"><a href="#Parser.addoption-98"><span class="linenos"> 98</span></a><span class="sd">            Same attributes as the argparse library&#39;s :meth:`add_argument()</span>
</span><span id="Parser.addoption-99"><a href="#Parser.addoption-99"><span class="linenos"> 99</span></a><span class="sd">            &lt;argparse.ArgumentParser.add_argument&gt;` function accepts.</span>
</span><span id="Parser.addoption-100"><a href="#Parser.addoption-100"><span class="linenos">100</span></a>
</span><span id="Parser.addoption-101"><a href="#Parser.addoption-101"><span class="linenos">101</span></a><span class="sd">        After command line parsing, options are available on the pytest config</span>
</span><span id="Parser.addoption-102"><a href="#Parser.addoption-102"><span class="linenos">102</span></a><span class="sd">        object via ``config.option.NAME`` where ``NAME`` is usually set</span>
</span><span id="Parser.addoption-103"><a href="#Parser.addoption-103"><span class="linenos">103</span></a><span class="sd">        by passing a ``dest`` attribute, for example</span>
</span><span id="Parser.addoption-104"><a href="#Parser.addoption-104"><span class="linenos">104</span></a><span class="sd">        ``addoption(&quot;--long&quot;, dest=&quot;NAME&quot;, ...)``.</span>
</span><span id="Parser.addoption-105"><a href="#Parser.addoption-105"><span class="linenos">105</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.addoption-106"><a href="#Parser.addoption-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_anonymous</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span><span class="o">*</span><span class="n">opts</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Register a command line option.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>opts</strong>: 
Option names, can be short or long options.</li>
<li><strong>attrs</strong>: 
Same attributes as the argparse library's <code>add_argument()
&lt;argparse.ArgumentParser.add_argument&gt;()</code> function accepts.</li>
</ul>

<p>After command line parsing, options are available on the pytest config
object via <code>config.option.NAME</code> where <code>NAME</code> is usually set
by passing a <code>dest</code> attribute, for example
<code>addoption("--long", dest="NAME", ...)</code>.</p>
</div>


                            </div>
                            <div id="Parser.parse" class="classattr">
                                        <input id="Parser.parse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span>:</span></span>

                <label class="view-source-button" for="Parser.parse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.parse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.parse-108"><a href="#Parser.parse-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
</span><span id="Parser.parse-109"><a href="#Parser.parse-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser.parse-110"><a href="#Parser.parse-110"><span class="linenos">110</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser.parse-111"><a href="#Parser.parse-111"><span class="linenos">111</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.parse-112"><a href="#Parser.parse-112"><span class="linenos">112</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
</span><span id="Parser.parse-113"><a href="#Parser.parse-113"><span class="linenos">113</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest._argcomplete</span><span class="w"> </span><span class="kn">import</span> <span class="n">try_argcomplete</span>
</span><span id="Parser.parse-114"><a href="#Parser.parse-114"><span class="linenos">114</span></a>
</span><span id="Parser.parse-115"><a href="#Parser.parse-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">optparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getparser</span><span class="p">()</span>
</span><span id="Parser.parse-116"><a href="#Parser.parse-116"><span class="linenos">116</span></a>        <span class="n">try_argcomplete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">optparser</span><span class="p">)</span>
</span><span id="Parser.parse-117"><a href="#Parser.parse-117"><span class="linenos">117</span></a>        <span class="n">strargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
</span><span id="Parser.parse-118"><a href="#Parser.parse-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">optparser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">strargs</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Parser.parse_setoption" class="classattr">
                                        <input id="Parser.parse_setoption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse_setoption</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">option</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span>,</span><span class="param">	<span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Parser.parse_setoption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.parse_setoption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.parse_setoption-139"><a href="#Parser.parse_setoption-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_setoption</span><span class="p">(</span>
</span><span id="Parser.parse_setoption-140"><a href="#Parser.parse_setoption-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser.parse_setoption-141"><a href="#Parser.parse_setoption-141"><span class="linenos">141</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser.parse_setoption-142"><a href="#Parser.parse_setoption-142"><span class="linenos">142</span></a>        <span class="n">option</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span>
</span><span id="Parser.parse_setoption-143"><a href="#Parser.parse_setoption-143"><span class="linenos">143</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.parse_setoption-144"><a href="#Parser.parse_setoption-144"><span class="linenos">144</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Parser.parse_setoption-145"><a href="#Parser.parse_setoption-145"><span class="linenos">145</span></a>        <span class="n">parsedoption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</span><span id="Parser.parse_setoption-146"><a href="#Parser.parse_setoption-146"><span class="linenos">146</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">parsedoption</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Parser.parse_setoption-147"><a href="#Parser.parse_setoption-147"><span class="linenos">147</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Parser.parse_setoption-148"><a href="#Parser.parse_setoption-148"><span class="linenos">148</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parsedoption</span><span class="p">,</span> <span class="n">FILE_OR_DIR</span><span class="p">))</span>
</span></pre></div>


    

                            </div>
                            <div id="Parser.parse_known_args" class="classattr">
                                        <input id="Parser.parse_known_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse_known_args</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span>:</span></span>

                <label class="view-source-button" for="Parser.parse_known_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.parse_known_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.parse_known_args-150"><a href="#Parser.parse_known_args-150"><span class="linenos">150</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_known_args</span><span class="p">(</span>
</span><span id="Parser.parse_known_args-151"><a href="#Parser.parse_known_args-151"><span class="linenos">151</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser.parse_known_args-152"><a href="#Parser.parse_known_args-152"><span class="linenos">152</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser.parse_known_args-153"><a href="#Parser.parse_known_args-153"><span class="linenos">153</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.parse_known_args-154"><a href="#Parser.parse_known_args-154"><span class="linenos">154</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
</span><span id="Parser.parse_known_args-155"><a href="#Parser.parse_known_args-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the known arguments at this point.</span>
</span><span id="Parser.parse_known_args-156"><a href="#Parser.parse_known_args-156"><span class="linenos">156</span></a>
</span><span id="Parser.parse_known_args-157"><a href="#Parser.parse_known_args-157"><span class="linenos">157</span></a><span class="sd">        :returns: An argparse namespace object.</span>
</span><span id="Parser.parse_known_args-158"><a href="#Parser.parse_known_args-158"><span class="linenos">158</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.parse_known_args-159"><a href="#Parser.parse_known_args-159"><span class="linenos">159</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_known_and_unknown_args</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Parse the known arguments at this point.</p>

<p>:returns: An argparse namespace object.</p>
</div>


                            </div>
                            <div id="Parser.parse_known_and_unknown_args" class="classattr">
                                        <input id="Parser.parse_known_and_unknown_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse_known_and_unknown_args</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="Parser.parse_known_and_unknown_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.parse_known_and_unknown_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.parse_known_and_unknown_args-161"><a href="#Parser.parse_known_and_unknown_args-161"><span class="linenos">161</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_known_and_unknown_args</span><span class="p">(</span>
</span><span id="Parser.parse_known_and_unknown_args-162"><a href="#Parser.parse_known_and_unknown_args-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser.parse_known_and_unknown_args-163"><a href="#Parser.parse_known_and_unknown_args-163"><span class="linenos">163</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Parser.parse_known_and_unknown_args-164"><a href="#Parser.parse_known_and_unknown_args-164"><span class="linenos">164</span></a>        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.parse_known_and_unknown_args-165"><a href="#Parser.parse_known_and_unknown_args-165"><span class="linenos">165</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
</span><span id="Parser.parse_known_and_unknown_args-166"><a href="#Parser.parse_known_and_unknown_args-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the known arguments at this point, and also return the</span>
</span><span id="Parser.parse_known_and_unknown_args-167"><a href="#Parser.parse_known_and_unknown_args-167"><span class="linenos">167</span></a><span class="sd">        remaining unknown arguments.</span>
</span><span id="Parser.parse_known_and_unknown_args-168"><a href="#Parser.parse_known_and_unknown_args-168"><span class="linenos">168</span></a>
</span><span id="Parser.parse_known_and_unknown_args-169"><a href="#Parser.parse_known_and_unknown_args-169"><span class="linenos">169</span></a><span class="sd">        :returns:</span>
</span><span id="Parser.parse_known_and_unknown_args-170"><a href="#Parser.parse_known_and_unknown_args-170"><span class="linenos">170</span></a><span class="sd">            A tuple containing an argparse namespace object for the known</span>
</span><span id="Parser.parse_known_and_unknown_args-171"><a href="#Parser.parse_known_and_unknown_args-171"><span class="linenos">171</span></a><span class="sd">            arguments, and a list of the unknown arguments.</span>
</span><span id="Parser.parse_known_and_unknown_args-172"><a href="#Parser.parse_known_and_unknown_args-172"><span class="linenos">172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.parse_known_and_unknown_args-173"><a href="#Parser.parse_known_and_unknown_args-173"><span class="linenos">173</span></a>        <span class="n">optparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getparser</span><span class="p">()</span>
</span><span id="Parser.parse_known_and_unknown_args-174"><a href="#Parser.parse_known_and_unknown_args-174"><span class="linenos">174</span></a>        <span class="n">strargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
</span><span id="Parser.parse_known_and_unknown_args-175"><a href="#Parser.parse_known_and_unknown_args-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="n">optparser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="n">strargs</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Parse the known arguments at this point, and also return the
remaining unknown arguments.</p>

<p>:returns:
    A tuple containing an argparse namespace object for the known
    arguments, and a list of the unknown arguments.</p>
</div>


                            </div>
                            <div id="Parser.addini" class="classattr">
                                        <input id="Parser.addini-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addini</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">help</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="nb">type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;paths&#39;</span><span class="p">,</span> <span class="s1">&#39;pathlist&#39;</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">,</span> <span class="s1">&#39;linelist&#39;</span><span class="p">,</span> <span class="s1">&#39;bool&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">notset</span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Parser.addini-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.addini"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.addini-177"><a href="#Parser.addini-177"><span class="linenos">177</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">addini</span><span class="p">(</span>
</span><span id="Parser.addini-178"><a href="#Parser.addini-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parser.addini-179"><a href="#Parser.addini-179"><span class="linenos">179</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Parser.addini-180"><a href="#Parser.addini-180"><span class="linenos">180</span></a>        <span class="n">help</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Parser.addini-181"><a href="#Parser.addini-181"><span class="linenos">181</span></a>        <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;paths&quot;</span><span class="p">,</span> <span class="s2">&quot;pathlist&quot;</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="s2">&quot;linelist&quot;</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">]</span>
</span><span id="Parser.addini-182"><a href="#Parser.addini-182"><span class="linenos">182</span></a>        <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parser.addini-183"><a href="#Parser.addini-183"><span class="linenos">183</span></a>        <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOT_SET</span><span class="p">,</span>
</span><span id="Parser.addini-184"><a href="#Parser.addini-184"><span class="linenos">184</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser.addini-185"><a href="#Parser.addini-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an ini-file option.</span>
</span><span id="Parser.addini-186"><a href="#Parser.addini-186"><span class="linenos">186</span></a>
</span><span id="Parser.addini-187"><a href="#Parser.addini-187"><span class="linenos">187</span></a><span class="sd">        :param name:</span>
</span><span id="Parser.addini-188"><a href="#Parser.addini-188"><span class="linenos">188</span></a><span class="sd">            Name of the ini-variable.</span>
</span><span id="Parser.addini-189"><a href="#Parser.addini-189"><span class="linenos">189</span></a><span class="sd">        :param type:</span>
</span><span id="Parser.addini-190"><a href="#Parser.addini-190"><span class="linenos">190</span></a><span class="sd">            Type of the variable. Can be:</span>
</span><span id="Parser.addini-191"><a href="#Parser.addini-191"><span class="linenos">191</span></a>
</span><span id="Parser.addini-192"><a href="#Parser.addini-192"><span class="linenos">192</span></a><span class="sd">                * ``string``: a string</span>
</span><span id="Parser.addini-193"><a href="#Parser.addini-193"><span class="linenos">193</span></a><span class="sd">                * ``bool``: a boolean</span>
</span><span id="Parser.addini-194"><a href="#Parser.addini-194"><span class="linenos">194</span></a><span class="sd">                * ``args``: a list of strings, separated as in a shell</span>
</span><span id="Parser.addini-195"><a href="#Parser.addini-195"><span class="linenos">195</span></a><span class="sd">                * ``linelist``: a list of strings, separated by line breaks</span>
</span><span id="Parser.addini-196"><a href="#Parser.addini-196"><span class="linenos">196</span></a><span class="sd">                * ``paths``: a list of :class:`pathlib.Path`, separated as in a shell</span>
</span><span id="Parser.addini-197"><a href="#Parser.addini-197"><span class="linenos">197</span></a><span class="sd">                * ``pathlist``: a list of ``py.path``, separated as in a shell</span>
</span><span id="Parser.addini-198"><a href="#Parser.addini-198"><span class="linenos">198</span></a>
</span><span id="Parser.addini-199"><a href="#Parser.addini-199"><span class="linenos">199</span></a><span class="sd">            For ``paths`` and ``pathlist`` types, they are considered relative to the ini-file.</span>
</span><span id="Parser.addini-200"><a href="#Parser.addini-200"><span class="linenos">200</span></a><span class="sd">            In case the execution is happening without an ini-file defined,</span>
</span><span id="Parser.addini-201"><a href="#Parser.addini-201"><span class="linenos">201</span></a><span class="sd">            they will be considered relative to the current working directory (for example with ``--override-ini``).</span>
</span><span id="Parser.addini-202"><a href="#Parser.addini-202"><span class="linenos">202</span></a>
</span><span id="Parser.addini-203"><a href="#Parser.addini-203"><span class="linenos">203</span></a><span class="sd">            .. versionadded:: 7.0</span>
</span><span id="Parser.addini-204"><a href="#Parser.addini-204"><span class="linenos">204</span></a><span class="sd">                The ``paths`` variable type.</span>
</span><span id="Parser.addini-205"><a href="#Parser.addini-205"><span class="linenos">205</span></a>
</span><span id="Parser.addini-206"><a href="#Parser.addini-206"><span class="linenos">206</span></a><span class="sd">            .. versionadded:: 8.1</span>
</span><span id="Parser.addini-207"><a href="#Parser.addini-207"><span class="linenos">207</span></a><span class="sd">                Use the current working directory to resolve ``paths`` and ``pathlist`` in the absence of an ini-file.</span>
</span><span id="Parser.addini-208"><a href="#Parser.addini-208"><span class="linenos">208</span></a>
</span><span id="Parser.addini-209"><a href="#Parser.addini-209"><span class="linenos">209</span></a><span class="sd">            Defaults to ``string`` if ``None`` or not passed.</span>
</span><span id="Parser.addini-210"><a href="#Parser.addini-210"><span class="linenos">210</span></a><span class="sd">        :param default:</span>
</span><span id="Parser.addini-211"><a href="#Parser.addini-211"><span class="linenos">211</span></a><span class="sd">            Default value if no ini-file option exists but is queried.</span>
</span><span id="Parser.addini-212"><a href="#Parser.addini-212"><span class="linenos">212</span></a>
</span><span id="Parser.addini-213"><a href="#Parser.addini-213"><span class="linenos">213</span></a><span class="sd">        The value of ini-variables can be retrieved via a call to</span>
</span><span id="Parser.addini-214"><a href="#Parser.addini-214"><span class="linenos">214</span></a><span class="sd">        :py:func:`config.getini(name) &lt;pytest.Config.getini&gt;`.</span>
</span><span id="Parser.addini-215"><a href="#Parser.addini-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.addini-216"><a href="#Parser.addini-216"><span class="linenos">216</span></a>        <span class="k">assert</span> <span class="nb">type</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;paths&quot;</span><span class="p">,</span> <span class="s2">&quot;pathlist&quot;</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="s2">&quot;linelist&quot;</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">)</span>
</span><span id="Parser.addini-217"><a href="#Parser.addini-217"><span class="linenos">217</span></a>        <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">NOT_SET</span><span class="p">:</span>
</span><span id="Parser.addini-218"><a href="#Parser.addini-218"><span class="linenos">218</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="n">get_ini_default_for_type</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
</span><span id="Parser.addini-219"><a href="#Parser.addini-219"><span class="linenos">219</span></a>
</span><span id="Parser.addini-220"><a href="#Parser.addini-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inidict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">help</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
</span><span id="Parser.addini-221"><a href="#Parser.addini-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ininames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Register an ini-file option.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>: 
Name of the ini-variable.</li>
<li><p><strong>type</strong>: 
Type of the variable. Can be:</p>

<pre><code>* ``string``: a string
* ``bool``: a boolean
* ``args``: a list of strings, separated as in a shell
* ``linelist``: a list of strings, separated by line breaks
* ``paths``: a list of `pathlib.Path`, separated as in a shell
* ``pathlist``: a list of ``py.path``, separated as in a shell
</code></pre>

<p>For <code>paths</code> and <code>pathlist</code> types, they are considered relative to the ini-file.
In case the execution is happening without an ini-file defined,
they will be considered relative to the current working directory (for example with <code>--override-ini</code>).</p>

<p><em>New in version 7.0:</em>
The <code>paths</code> variable type.</p>

<p><em>New in version 8.1:</em>
Use the current working directory to resolve <code>paths</code> and <code>pathlist</code> in the absence of an ini-file.</p>

<p>Defaults to <code>string</code> if <code>None</code> or not passed.</p></li>
<li><strong>default</strong>: 
Default value if no ini-file option exists but is queried.</li>
</ul>

<p>The value of ini-variables can be retrieved via a call to
<code>config.getini(name) &lt;<a href="#Config.getini">pytest.Config.getini</a>&gt;()</code>.</p>
</div>


                            </div>
                </section>
                <section id="PytestAssertRewriteWarning">
                            <input id="PytestAssertRewriteWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestAssertRewriteWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestAssertRewriteWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestAssertRewriteWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestAssertRewriteWarning-20"><a href="#PytestAssertRewriteWarning-20"><span class="linenos">20</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestPluginManager</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted by the pytest assert rewrite module.</p>
</div>


                </section>
                <section id="PytestCacheWarning">
                            <input id="PytestCacheWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestCacheWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestCacheWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestCacheWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestCacheWarning-27"><a href="#PytestCacheWarning-27"><span class="linenos">27</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.fixtures</span><span class="w"> </span><span class="kn">import</span> <span class="n">FixtureDef</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted by the cache plugin in various situations.</p>
</div>


                </section>
                <section id="PytestCollectionWarning">
                            <input id="PytestCollectionWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestCollectionWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestCollectionWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestCollectionWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestCollectionWarning-41"><a href="#PytestCollectionWarning-41"><span class="linenos">41</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.mark</span><span class="w"> </span><span class="kn">import</span> <span class="n">param</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted when pytest is not able to collect a file or symbol in a module.</p>
</div>


                </section>
                <section id="PytestConfigWarning">
                            <input id="PytestConfigWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestConfigWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestConfigWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestConfigWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestConfigWarning-34"><a href="#PytestConfigWarning-34"><span class="linenos">34</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogCaptureFixture</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted for configuration issues.</p>
</div>


                </section>
                <section id="PytestDeprecationWarning">
                            <input id="PytestDeprecationWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestDeprecationWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>, <span class="base">builtins.DeprecationWarning</span>):

                <label class="view-source-button" for="PytestDeprecationWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestDeprecationWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestDeprecationWarning-48"><a href="#PytestDeprecationWarning-48"><span class="linenos">48</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.outcomes</span><span class="w"> </span><span class="kn">import</span> <span class="n">fail</span>
</span></pre></div>


            <div class="docstring"><p>Warning class for features that will be removed in a future version.</p>
</div>


                </section>
                <section id="PytestExperimentalApiWarning">
                            <input id="PytestExperimentalApiWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestExperimentalApiWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>, <span class="base">builtins.FutureWarning</span>):

                <label class="view-source-button" for="PytestExperimentalApiWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestExperimentalApiWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestExperimentalApiWarning-66"><a href="#PytestExperimentalApiWarning-66"><span class="linenos">66</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.recwarn</span><span class="w"> </span><span class="kn">import</span> <span class="n">warns</span>
</span></pre></div>


            <div class="docstring"><p>Warning category used to denote experiments in pytest.</p>

<p>Use sparingly as the API might change or even be removed completely in a
future version.</p>
</div>


                            <div id="PytestExperimentalApiWarning.simple" class="classattr">
                                        <input id="PytestExperimentalApiWarning.simple-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">simple</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">apiname</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="#PytestExperimentalApiWarning">PytestExperimentalApiWarning</a></span>:</span></span>

                <label class="view-source-button" for="PytestExperimentalApiWarning.simple-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestExperimentalApiWarning.simple"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestExperimentalApiWarning.simple-76"><a href="#PytestExperimentalApiWarning.simple-76"><span class="linenos">76</span></a>    <span class="nd">@classmethod</span>
</span><span id="PytestExperimentalApiWarning.simple-77"><a href="#PytestExperimentalApiWarning.simple-77"><span class="linenos">77</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">simple</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">apiname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PytestExperimentalApiWarning</span><span class="p">:</span>
</span><span id="PytestExperimentalApiWarning.simple-78"><a href="#PytestExperimentalApiWarning.simple-78"><span class="linenos">78</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">apiname</span><span class="si">}</span><span class="s2"> is an experimental api that may change over time&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="PytestRemovedIn9Warning">
                            <input id="PytestRemovedIn9Warning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestRemovedIn9Warning</span><wbr>(<span class="base"><a href="#PytestDeprecationWarning">PytestDeprecationWarning</a></span>):

                <label class="view-source-button" for="PytestRemovedIn9Warning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestRemovedIn9Warning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestRemovedIn9Warning-54"><a href="#PytestRemovedIn9Warning-54"><span class="linenos">54</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pytester</span>
</span></pre></div>


            <div class="docstring"><p>Warning class for features that will be removed in pytest 9.</p>
</div>


                </section>
                <section id="PytestReturnNotNoneWarning">
                            <input id="PytestReturnNotNoneWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestReturnNotNoneWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestReturnNotNoneWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestReturnNotNoneWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestReturnNotNoneWarning-60"><a href="#PytestReturnNotNoneWarning-60"><span class="linenos">60</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.python</span><span class="w"> </span><span class="kn">import</span> <span class="n">Module</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted when a test function is returning value other than None.</p>
</div>


                </section>
                <section id="Pytester">
                            <input id="Pytester-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Pytester</span>:

                <label class="view-source-button" for="Pytester-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester-647"><a href="#Pytester-647"><span class="linenos"> 647</span></a><span class="nd">@final</span>
</span><span id="Pytester-648"><a href="#Pytester-648"><span class="linenos"> 648</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Pytester</span><span class="p">:</span>
</span><span id="Pytester-649"><a href="#Pytester-649"><span class="linenos"> 649</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Pytester-650"><a href="#Pytester-650"><span class="linenos"> 650</span></a><span class="sd">    Facilities to write tests/configuration files, execute pytest in isolation, and match</span>
</span><span id="Pytester-651"><a href="#Pytester-651"><span class="linenos"> 651</span></a><span class="sd">    against expected output, perfect for black-box testing of pytest plugins.</span>
</span><span id="Pytester-652"><a href="#Pytester-652"><span class="linenos"> 652</span></a>
</span><span id="Pytester-653"><a href="#Pytester-653"><span class="linenos"> 653</span></a><span class="sd">    It attempts to isolate the test run from external factors as much as possible, modifying</span>
</span><span id="Pytester-654"><a href="#Pytester-654"><span class="linenos"> 654</span></a><span class="sd">    the current working directory to :attr:`path` and environment variables during initialization.</span>
</span><span id="Pytester-655"><a href="#Pytester-655"><span class="linenos"> 655</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Pytester-656"><a href="#Pytester-656"><span class="linenos"> 656</span></a>
</span><span id="Pytester-657"><a href="#Pytester-657"><span class="linenos"> 657</span></a>    <span class="n">__test__</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Pytester-658"><a href="#Pytester-658"><span class="linenos"> 658</span></a>
</span><span id="Pytester-659"><a href="#Pytester-659"><span class="linenos"> 659</span></a>    <span class="n">CLOSE_STDIN</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">NOTSET</span>
</span><span id="Pytester-660"><a href="#Pytester-660"><span class="linenos"> 660</span></a>
</span><span id="Pytester-661"><a href="#Pytester-661"><span class="linenos"> 661</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">TimeoutExpired</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="Pytester-662"><a href="#Pytester-662"><span class="linenos"> 662</span></a>        <span class="k">pass</span>
</span><span id="Pytester-663"><a href="#Pytester-663"><span class="linenos"> 663</span></a>
</span><span id="Pytester-664"><a href="#Pytester-664"><span class="linenos"> 664</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Pytester-665"><a href="#Pytester-665"><span class="linenos"> 665</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester-666"><a href="#Pytester-666"><span class="linenos"> 666</span></a>        <span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span><span class="p">,</span>
</span><span id="Pytester-667"><a href="#Pytester-667"><span class="linenos"> 667</span></a>        <span class="n">tmp_path_factory</span><span class="p">:</span> <span class="n">TempPathFactory</span><span class="p">,</span>
</span><span id="Pytester-668"><a href="#Pytester-668"><span class="linenos"> 668</span></a>        <span class="n">monkeypatch</span><span class="p">:</span> <span class="n">MonkeyPatch</span><span class="p">,</span>
</span><span id="Pytester-669"><a href="#Pytester-669"><span class="linenos"> 669</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Pytester-670"><a href="#Pytester-670"><span class="linenos"> 670</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Pytester-671"><a href="#Pytester-671"><span class="linenos"> 671</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-672"><a href="#Pytester-672"><span class="linenos"> 672</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Pytester-673"><a href="#Pytester-673"><span class="linenos"> 673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="n">request</span>
</span><span id="Pytester-674"><a href="#Pytester-674"><span class="linenos"> 674</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">:</span> <span class="n">WeakKeyDictionary</span><span class="p">[</span><span class="n">Collector</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Pytester-675"><a href="#Pytester-675"><span class="linenos"> 675</span></a>            <span class="n">WeakKeyDictionary</span><span class="p">()</span>
</span><span id="Pytester-676"><a href="#Pytester-676"><span class="linenos"> 676</span></a>        <span class="p">)</span>
</span><span id="Pytester-677"><a href="#Pytester-677"><span class="linenos"> 677</span></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
</span><span id="Pytester-678"><a href="#Pytester-678"><span class="linenos"> 678</span></a>            <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="Pytester-679"><a href="#Pytester-679"><span class="linenos"> 679</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-680"><a href="#Pytester-680"><span class="linenos"> 680</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span>
</span><span id="Pytester-681"><a href="#Pytester-681"><span class="linenos"> 681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Pytester-682"><a href="#Pytester-682"><span class="linenos"> 682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">tmp_path_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">numbered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester-683"><a href="#Pytester-683"><span class="linenos"> 683</span></a>        <span class="c1">#: A list of plugins to use with :py:meth:`parseconfig` and</span>
</span><span id="Pytester-684"><a href="#Pytester-684"><span class="linenos"> 684</span></a>        <span class="c1">#: :py:meth:`runpytest`.  Initially this is an empty list but plugins can</span>
</span><span id="Pytester-685"><a href="#Pytester-685"><span class="linenos"> 685</span></a>        <span class="c1">#: be added to the list.  The type of items to add to the list depends on</span>
</span><span id="Pytester-686"><a href="#Pytester-686"><span class="linenos"> 686</span></a>        <span class="c1">#: the method using them so refer to them for details.</span>
</span><span id="Pytester-687"><a href="#Pytester-687"><span class="linenos"> 687</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester-688"><a href="#Pytester-688"><span class="linenos"> 688</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sys_path_snapshot</span> <span class="o">=</span> <span class="n">SysPathsSnapshot</span><span class="p">()</span>
</span><span id="Pytester-689"><a href="#Pytester-689"><span class="linenos"> 689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sys_modules_snapshot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__take_sys_modules_snapshot</span><span class="p">()</span>
</span><span id="Pytester-690"><a href="#Pytester-690"><span class="linenos"> 690</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_finalize</span><span class="p">)</span>
</span><span id="Pytester-691"><a href="#Pytester-691"><span class="linenos"> 691</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--runpytest&quot;</span><span class="p">)</span>
</span><span id="Pytester-692"><a href="#Pytester-692"><span class="linenos"> 692</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_test_tmproot</span> <span class="o">=</span> <span class="n">tmp_path_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tmp-</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">numbered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester-693"><a href="#Pytester-693"><span class="linenos"> 693</span></a>
</span><span id="Pytester-694"><a href="#Pytester-694"><span class="linenos"> 694</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_monkeypatch</span> <span class="o">=</span> <span class="n">mp</span> <span class="o">=</span> <span class="n">monkeypatch</span>
</span><span id="Pytester-695"><a href="#Pytester-695"><span class="linenos"> 695</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chdir</span><span class="p">()</span>
</span><span id="Pytester-696"><a href="#Pytester-696"><span class="linenos"> 696</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;PYTEST_DEBUG_TEMPROOT&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_test_tmproot</span><span class="p">))</span>
</span><span id="Pytester-697"><a href="#Pytester-697"><span class="linenos"> 697</span></a>        <span class="c1"># Ensure no unexpected caching via tox.</span>
</span><span id="Pytester-698"><a href="#Pytester-698"><span class="linenos"> 698</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">delenv</span><span class="p">(</span><span class="s2">&quot;TOX_ENV_DIR&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Pytester-699"><a href="#Pytester-699"><span class="linenos"> 699</span></a>        <span class="c1"># Discard outer pytest options.</span>
</span><span id="Pytester-700"><a href="#Pytester-700"><span class="linenos"> 700</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">delenv</span><span class="p">(</span><span class="s2">&quot;PYTEST_ADDOPTS&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Pytester-701"><a href="#Pytester-701"><span class="linenos"> 701</span></a>        <span class="c1"># Ensure no user config is used.</span>
</span><span id="Pytester-702"><a href="#Pytester-702"><span class="linenos"> 702</span></a>        <span class="n">tmphome</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester-703"><a href="#Pytester-703"><span class="linenos"> 703</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;HOME&quot;</span><span class="p">,</span> <span class="n">tmphome</span><span class="p">)</span>
</span><span id="Pytester-704"><a href="#Pytester-704"><span class="linenos"> 704</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;USERPROFILE&quot;</span><span class="p">,</span> <span class="n">tmphome</span><span class="p">)</span>
</span><span id="Pytester-705"><a href="#Pytester-705"><span class="linenos"> 705</span></a>        <span class="c1"># Do not use colors for inner runs by default.</span>
</span><span id="Pytester-706"><a href="#Pytester-706"><span class="linenos"> 706</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;PY_COLORS&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">)</span>
</span><span id="Pytester-707"><a href="#Pytester-707"><span class="linenos"> 707</span></a>
</span><span id="Pytester-708"><a href="#Pytester-708"><span class="linenos"> 708</span></a>    <span class="nd">@property</span>
</span><span id="Pytester-709"><a href="#Pytester-709"><span class="linenos"> 709</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-710"><a href="#Pytester-710"><span class="linenos"> 710</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporary directory path used to create files/run tests from, etc.&quot;&quot;&quot;</span>
</span><span id="Pytester-711"><a href="#Pytester-711"><span class="linenos"> 711</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>
</span><span id="Pytester-712"><a href="#Pytester-712"><span class="linenos"> 712</span></a>
</span><span id="Pytester-713"><a href="#Pytester-713"><span class="linenos"> 713</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pytester-714"><a href="#Pytester-714"><span class="linenos"> 714</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Pytester </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="Pytester-715"><a href="#Pytester-715"><span class="linenos"> 715</span></a>
</span><span id="Pytester-716"><a href="#Pytester-716"><span class="linenos"> 716</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-717"><a href="#Pytester-717"><span class="linenos"> 717</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Pytester-718"><a href="#Pytester-718"><span class="linenos"> 718</span></a><span class="sd">        Clean up global state artifacts.</span>
</span><span id="Pytester-719"><a href="#Pytester-719"><span class="linenos"> 719</span></a>
</span><span id="Pytester-720"><a href="#Pytester-720"><span class="linenos"> 720</span></a><span class="sd">        Some methods modify the global interpreter state and this tries to</span>
</span><span id="Pytester-721"><a href="#Pytester-721"><span class="linenos"> 721</span></a><span class="sd">        clean this up. It does not remove the temporary directory however so</span>
</span><span id="Pytester-722"><a href="#Pytester-722"><span class="linenos"> 722</span></a><span class="sd">        it can be looked at after the test run has finished.</span>
</span><span id="Pytester-723"><a href="#Pytester-723"><span class="linenos"> 723</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-724"><a href="#Pytester-724"><span class="linenos"> 724</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sys_modules_snapshot</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
</span><span id="Pytester-725"><a href="#Pytester-725"><span class="linenos"> 725</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sys_path_snapshot</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
</span><span id="Pytester-726"><a href="#Pytester-726"><span class="linenos"> 726</span></a>
</span><span id="Pytester-727"><a href="#Pytester-727"><span class="linenos"> 727</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__take_sys_modules_snapshot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SysModulesSnapshot</span><span class="p">:</span>
</span><span id="Pytester-728"><a href="#Pytester-728"><span class="linenos"> 728</span></a>        <span class="c1"># Some zope modules used by twisted-related tests keep internal state</span>
</span><span id="Pytester-729"><a href="#Pytester-729"><span class="linenos"> 729</span></a>        <span class="c1"># and can&#39;t be deleted; we had some trouble in the past with</span>
</span><span id="Pytester-730"><a href="#Pytester-730"><span class="linenos"> 730</span></a>        <span class="c1"># `zope.interface` for example.</span>
</span><span id="Pytester-731"><a href="#Pytester-731"><span class="linenos"> 731</span></a>        <span class="c1">#</span>
</span><span id="Pytester-732"><a href="#Pytester-732"><span class="linenos"> 732</span></a>        <span class="c1"># Preserve readline due to https://bugs.python.org/issue41033.</span>
</span><span id="Pytester-733"><a href="#Pytester-733"><span class="linenos"> 733</span></a>        <span class="c1"># pexpect issues a SIGWINCH.</span>
</span><span id="Pytester-734"><a href="#Pytester-734"><span class="linenos"> 734</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">preserve_module</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span><span id="Pytester-735"><a href="#Pytester-735"><span class="linenos"> 735</span></a>            <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;zope&quot;</span><span class="p">,</span> <span class="s2">&quot;readline&quot;</span><span class="p">))</span>
</span><span id="Pytester-736"><a href="#Pytester-736"><span class="linenos"> 736</span></a>
</span><span id="Pytester-737"><a href="#Pytester-737"><span class="linenos"> 737</span></a>        <span class="k">return</span> <span class="n">SysModulesSnapshot</span><span class="p">(</span><span class="n">preserve</span><span class="o">=</span><span class="n">preserve_module</span><span class="p">)</span>
</span><span id="Pytester-738"><a href="#Pytester-738"><span class="linenos"> 738</span></a>
</span><span id="Pytester-739"><a href="#Pytester-739"><span class="linenos"> 739</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">make_hook_recorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Pytester-740"><a href="#Pytester-740"><span class="linenos"> 740</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new :class:`HookRecorder` for a :class:`PytestPluginManager`.&quot;&quot;&quot;</span>
</span><span id="Pytester-741"><a href="#Pytester-741"><span class="linenos"> 741</span></a>        <span class="n">pluginmanager</span><span class="o">.</span><span class="n">reprec</span> <span class="o">=</span> <span class="n">reprec</span> <span class="o">=</span> <span class="n">HookRecorder</span><span class="p">(</span><span class="n">pluginmanager</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="Pytester-742"><a href="#Pytester-742"><span class="linenos"> 742</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">reprec</span><span class="o">.</span><span class="n">finish_recording</span><span class="p">)</span>
</span><span id="Pytester-743"><a href="#Pytester-743"><span class="linenos"> 743</span></a>        <span class="k">return</span> <span class="n">reprec</span>
</span><span id="Pytester-744"><a href="#Pytester-744"><span class="linenos"> 744</span></a>
</span><span id="Pytester-745"><a href="#Pytester-745"><span class="linenos"> 745</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-746"><a href="#Pytester-746"><span class="linenos"> 746</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cd into the temporary directory.</span>
</span><span id="Pytester-747"><a href="#Pytester-747"><span class="linenos"> 747</span></a>
</span><span id="Pytester-748"><a href="#Pytester-748"><span class="linenos"> 748</span></a><span class="sd">        This is done automatically upon instantiation.</span>
</span><span id="Pytester-749"><a href="#Pytester-749"><span class="linenos"> 749</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-750"><a href="#Pytester-750"><span class="linenos"> 750</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_monkeypatch</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester-751"><a href="#Pytester-751"><span class="linenos"> 751</span></a>
</span><span id="Pytester-752"><a href="#Pytester-752"><span class="linenos"> 752</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_makefile</span><span class="p">(</span>
</span><span id="Pytester-753"><a href="#Pytester-753"><span class="linenos"> 753</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester-754"><a href="#Pytester-754"><span class="linenos"> 754</span></a>        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Pytester-755"><a href="#Pytester-755"><span class="linenos"> 755</span></a>        <span class="n">lines</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Any</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">],</span>
</span><span id="Pytester-756"><a href="#Pytester-756"><span class="linenos"> 756</span></a>        <span class="n">files</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester-757"><a href="#Pytester-757"><span class="linenos"> 757</span></a>        <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
</span><span id="Pytester-758"><a href="#Pytester-758"><span class="linenos"> 758</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-759"><a href="#Pytester-759"><span class="linenos"> 759</span></a>        <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</span><span id="Pytester-760"><a href="#Pytester-760"><span class="linenos"> 760</span></a>
</span><span id="Pytester-761"><a href="#Pytester-761"><span class="linenos"> 761</span></a>        <span class="k">if</span> <span class="n">ext</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-762"><a href="#Pytester-762"><span class="linenos"> 762</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;ext must not be None&quot;</span><span class="p">)</span>
</span><span id="Pytester-763"><a href="#Pytester-763"><span class="linenos"> 763</span></a>
</span><span id="Pytester-764"><a href="#Pytester-764"><span class="linenos"> 764</span></a>        <span class="k">if</span> <span class="n">ext</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ext</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
</span><span id="Pytester-765"><a href="#Pytester-765"><span class="linenos"> 765</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Pytester-766"><a href="#Pytester-766"><span class="linenos"> 766</span></a>                <span class="sa">f</span><span class="s2">&quot;pytester.makefile expects a file extension, try .</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2"> instead of </span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester-767"><a href="#Pytester-767"><span class="linenos"> 767</span></a>            <span class="p">)</span>
</span><span id="Pytester-768"><a href="#Pytester-768"><span class="linenos"> 768</span></a>
</span><span id="Pytester-769"><a href="#Pytester-769"><span class="linenos"> 769</span></a>        <span class="k">def</span><span class="w"> </span><span class="nf">to_text</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pytester-770"><a href="#Pytester-770"><span class="linenos"> 770</span></a>            <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span><span id="Pytester-771"><a href="#Pytester-771"><span class="linenos"> 771</span></a>
</span><span id="Pytester-772"><a href="#Pytester-772"><span class="linenos"> 772</span></a>        <span class="k">if</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="Pytester-773"><a href="#Pytester-773"><span class="linenos"> 773</span></a>            <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_text</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)</span>
</span><span id="Pytester-774"><a href="#Pytester-774"><span class="linenos"> 774</span></a>            <span class="n">basename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Pytester-775"><a href="#Pytester-775"><span class="linenos"> 775</span></a>            <span class="n">items</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">source</span><span class="p">))</span>
</span><span id="Pytester-776"><a href="#Pytester-776"><span class="linenos"> 776</span></a>
</span><span id="Pytester-777"><a href="#Pytester-777"><span class="linenos"> 777</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Pytester-778"><a href="#Pytester-778"><span class="linenos"> 778</span></a>        <span class="k">for</span> <span class="n">basename</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
</span><span id="Pytester-779"><a href="#Pytester-779"><span class="linenos"> 779</span></a>            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
</span><span id="Pytester-780"><a href="#Pytester-780"><span class="linenos"> 780</span></a>            <span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester-781"><a href="#Pytester-781"><span class="linenos"> 781</span></a>            <span class="n">source_</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="Pytester-782"><a href="#Pytester-782"><span class="linenos"> 782</span></a>            <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_text</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">source_</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
</span><span id="Pytester-783"><a href="#Pytester-783"><span class="linenos"> 783</span></a>            <span class="n">p</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span>
</span><span id="Pytester-784"><a href="#Pytester-784"><span class="linenos"> 784</span></a>            <span class="k">if</span> <span class="n">ret</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-785"><a href="#Pytester-785"><span class="linenos"> 785</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="n">p</span>
</span><span id="Pytester-786"><a href="#Pytester-786"><span class="linenos"> 786</span></a>        <span class="k">assert</span> <span class="n">ret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester-787"><a href="#Pytester-787"><span class="linenos"> 787</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span><span id="Pytester-788"><a href="#Pytester-788"><span class="linenos"> 788</span></a>
</span><span id="Pytester-789"><a href="#Pytester-789"><span class="linenos"> 789</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-790"><a href="#Pytester-790"><span class="linenos"> 790</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Create new text file(s) in the test directory.</span>
</span><span id="Pytester-791"><a href="#Pytester-791"><span class="linenos"> 791</span></a>
</span><span id="Pytester-792"><a href="#Pytester-792"><span class="linenos"> 792</span></a><span class="sd">        :param ext:</span>
</span><span id="Pytester-793"><a href="#Pytester-793"><span class="linenos"> 793</span></a><span class="sd">            The extension the file(s) should use, including the dot, e.g. `.py`.</span>
</span><span id="Pytester-794"><a href="#Pytester-794"><span class="linenos"> 794</span></a><span class="sd">        :param args:</span>
</span><span id="Pytester-795"><a href="#Pytester-795"><span class="linenos"> 795</span></a><span class="sd">            All args are treated as strings and joined using newlines.</span>
</span><span id="Pytester-796"><a href="#Pytester-796"><span class="linenos"> 796</span></a><span class="sd">            The result is written as contents to the file.  The name of the</span>
</span><span id="Pytester-797"><a href="#Pytester-797"><span class="linenos"> 797</span></a><span class="sd">            file is based on the test function requesting this fixture.</span>
</span><span id="Pytester-798"><a href="#Pytester-798"><span class="linenos"> 798</span></a><span class="sd">        :param kwargs:</span>
</span><span id="Pytester-799"><a href="#Pytester-799"><span class="linenos"> 799</span></a><span class="sd">            Each keyword is the name of a file, while the value of it will</span>
</span><span id="Pytester-800"><a href="#Pytester-800"><span class="linenos"> 800</span></a><span class="sd">            be written as contents of the file.</span>
</span><span id="Pytester-801"><a href="#Pytester-801"><span class="linenos"> 801</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-802"><a href="#Pytester-802"><span class="linenos"> 802</span></a><span class="sd">            The first created file.</span>
</span><span id="Pytester-803"><a href="#Pytester-803"><span class="linenos"> 803</span></a>
</span><span id="Pytester-804"><a href="#Pytester-804"><span class="linenos"> 804</span></a><span class="sd">        Examples:</span>
</span><span id="Pytester-805"><a href="#Pytester-805"><span class="linenos"> 805</span></a>
</span><span id="Pytester-806"><a href="#Pytester-806"><span class="linenos"> 806</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester-807"><a href="#Pytester-807"><span class="linenos"> 807</span></a>
</span><span id="Pytester-808"><a href="#Pytester-808"><span class="linenos"> 808</span></a><span class="sd">            pytester.makefile(&quot;.txt&quot;, &quot;line1&quot;, &quot;line2&quot;)</span>
</span><span id="Pytester-809"><a href="#Pytester-809"><span class="linenos"> 809</span></a>
</span><span id="Pytester-810"><a href="#Pytester-810"><span class="linenos"> 810</span></a><span class="sd">            pytester.makefile(&quot;.ini&quot;, pytest=&quot;[pytest]\naddopts=-rs\n&quot;)</span>
</span><span id="Pytester-811"><a href="#Pytester-811"><span class="linenos"> 811</span></a>
</span><span id="Pytester-812"><a href="#Pytester-812"><span class="linenos"> 812</span></a><span class="sd">        To create binary files, use :meth:`pathlib.Path.write_bytes` directly:</span>
</span><span id="Pytester-813"><a href="#Pytester-813"><span class="linenos"> 813</span></a>
</span><span id="Pytester-814"><a href="#Pytester-814"><span class="linenos"> 814</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester-815"><a href="#Pytester-815"><span class="linenos"> 815</span></a>
</span><span id="Pytester-816"><a href="#Pytester-816"><span class="linenos"> 816</span></a><span class="sd">            filename = pytester.path.joinpath(&quot;foo.bin&quot;)</span>
</span><span id="Pytester-817"><a href="#Pytester-817"><span class="linenos"> 817</span></a><span class="sd">            filename.write_bytes(b&quot;...&quot;)</span>
</span><span id="Pytester-818"><a href="#Pytester-818"><span class="linenos"> 818</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-819"><a href="#Pytester-819"><span class="linenos"> 819</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefile</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester-820"><a href="#Pytester-820"><span class="linenos"> 820</span></a>
</span><span id="Pytester-821"><a href="#Pytester-821"><span class="linenos"> 821</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeconftest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-822"><a href="#Pytester-822"><span class="linenos"> 822</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a conftest.py file.</span>
</span><span id="Pytester-823"><a href="#Pytester-823"><span class="linenos"> 823</span></a>
</span><span id="Pytester-824"><a href="#Pytester-824"><span class="linenos"> 824</span></a><span class="sd">        :param source: The contents.</span>
</span><span id="Pytester-825"><a href="#Pytester-825"><span class="linenos"> 825</span></a><span class="sd">        :returns: The conftest.py file.</span>
</span><span id="Pytester-826"><a href="#Pytester-826"><span class="linenos"> 826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-827"><a href="#Pytester-827"><span class="linenos"> 827</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">conftest</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-828"><a href="#Pytester-828"><span class="linenos"> 828</span></a>
</span><span id="Pytester-829"><a href="#Pytester-829"><span class="linenos"> 829</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-830"><a href="#Pytester-830"><span class="linenos"> 830</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a tox.ini file.</span>
</span><span id="Pytester-831"><a href="#Pytester-831"><span class="linenos"> 831</span></a>
</span><span id="Pytester-832"><a href="#Pytester-832"><span class="linenos"> 832</span></a><span class="sd">        :param source: The contents.</span>
</span><span id="Pytester-833"><a href="#Pytester-833"><span class="linenos"> 833</span></a><span class="sd">        :returns: The tox.ini file.</span>
</span><span id="Pytester-834"><a href="#Pytester-834"><span class="linenos"> 834</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-835"><a href="#Pytester-835"><span class="linenos"> 835</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="n">tox</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-836"><a href="#Pytester-836"><span class="linenos"> 836</span></a>
</span><span id="Pytester-837"><a href="#Pytester-837"><span class="linenos"> 837</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getinicfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SectionWrapper</span><span class="p">:</span>
</span><span id="Pytester-838"><a href="#Pytester-838"><span class="linenos"> 838</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the pytest section from the tox.ini config file.&quot;&quot;&quot;</span>
</span><span id="Pytester-839"><a href="#Pytester-839"><span class="linenos"> 839</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeini</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-840"><a href="#Pytester-840"><span class="linenos"> 840</span></a>        <span class="k">return</span> <span class="n">IniConfig</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">))[</span><span class="s2">&quot;pytest&quot;</span><span class="p">]</span>
</span><span id="Pytester-841"><a href="#Pytester-841"><span class="linenos"> 841</span></a>
</span><span id="Pytester-842"><a href="#Pytester-842"><span class="linenos"> 842</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyprojecttoml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-843"><a href="#Pytester-843"><span class="linenos"> 843</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a pyproject.toml file.</span>
</span><span id="Pytester-844"><a href="#Pytester-844"><span class="linenos"> 844</span></a>
</span><span id="Pytester-845"><a href="#Pytester-845"><span class="linenos"> 845</span></a><span class="sd">        :param source: The contents.</span>
</span><span id="Pytester-846"><a href="#Pytester-846"><span class="linenos"> 846</span></a><span class="sd">        :returns: The pyproject.ini file.</span>
</span><span id="Pytester-847"><a href="#Pytester-847"><span class="linenos"> 847</span></a>
</span><span id="Pytester-848"><a href="#Pytester-848"><span class="linenos"> 848</span></a><span class="sd">        .. versionadded:: 6.0</span>
</span><span id="Pytester-849"><a href="#Pytester-849"><span class="linenos"> 849</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-850"><a href="#Pytester-850"><span class="linenos"> 850</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.toml&quot;</span><span class="p">,</span> <span class="n">pyproject</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-851"><a href="#Pytester-851"><span class="linenos"> 851</span></a>
</span><span id="Pytester-852"><a href="#Pytester-852"><span class="linenos"> 852</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-853"><a href="#Pytester-853"><span class="linenos"> 853</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Shortcut for .makefile() with a .py extension.</span>
</span><span id="Pytester-854"><a href="#Pytester-854"><span class="linenos"> 854</span></a>
</span><span id="Pytester-855"><a href="#Pytester-855"><span class="linenos"> 855</span></a><span class="sd">        Defaults to the test name with a &#39;.py&#39; extension, e.g test_foobar.py, overwriting</span>
</span><span id="Pytester-856"><a href="#Pytester-856"><span class="linenos"> 856</span></a><span class="sd">        existing files.</span>
</span><span id="Pytester-857"><a href="#Pytester-857"><span class="linenos"> 857</span></a>
</span><span id="Pytester-858"><a href="#Pytester-858"><span class="linenos"> 858</span></a><span class="sd">        Examples:</span>
</span><span id="Pytester-859"><a href="#Pytester-859"><span class="linenos"> 859</span></a>
</span><span id="Pytester-860"><a href="#Pytester-860"><span class="linenos"> 860</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester-861"><a href="#Pytester-861"><span class="linenos"> 861</span></a>
</span><span id="Pytester-862"><a href="#Pytester-862"><span class="linenos"> 862</span></a><span class="sd">            def test_something(pytester):</span>
</span><span id="Pytester-863"><a href="#Pytester-863"><span class="linenos"> 863</span></a><span class="sd">                # Initial file is created test_something.py.</span>
</span><span id="Pytester-864"><a href="#Pytester-864"><span class="linenos"> 864</span></a><span class="sd">                pytester.makepyfile(&quot;foobar&quot;)</span>
</span><span id="Pytester-865"><a href="#Pytester-865"><span class="linenos"> 865</span></a><span class="sd">                # To create multiple files, pass kwargs accordingly.</span>
</span><span id="Pytester-866"><a href="#Pytester-866"><span class="linenos"> 866</span></a><span class="sd">                pytester.makepyfile(custom=&quot;foobar&quot;)</span>
</span><span id="Pytester-867"><a href="#Pytester-867"><span class="linenos"> 867</span></a><span class="sd">                # At this point, both &#39;test_something.py&#39; &amp; &#39;custom.py&#39; exist in the test directory.</span>
</span><span id="Pytester-868"><a href="#Pytester-868"><span class="linenos"> 868</span></a>
</span><span id="Pytester-869"><a href="#Pytester-869"><span class="linenos"> 869</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-870"><a href="#Pytester-870"><span class="linenos"> 870</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefile</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester-871"><a href="#Pytester-871"><span class="linenos"> 871</span></a>
</span><span id="Pytester-872"><a href="#Pytester-872"><span class="linenos"> 872</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maketxtfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-873"><a href="#Pytester-873"><span class="linenos"> 873</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Shortcut for .makefile() with a .txt extension.</span>
</span><span id="Pytester-874"><a href="#Pytester-874"><span class="linenos"> 874</span></a>
</span><span id="Pytester-875"><a href="#Pytester-875"><span class="linenos"> 875</span></a><span class="sd">        Defaults to the test name with a &#39;.txt&#39; extension, e.g test_foobar.txt, overwriting</span>
</span><span id="Pytester-876"><a href="#Pytester-876"><span class="linenos"> 876</span></a><span class="sd">        existing files.</span>
</span><span id="Pytester-877"><a href="#Pytester-877"><span class="linenos"> 877</span></a>
</span><span id="Pytester-878"><a href="#Pytester-878"><span class="linenos"> 878</span></a><span class="sd">        Examples:</span>
</span><span id="Pytester-879"><a href="#Pytester-879"><span class="linenos"> 879</span></a>
</span><span id="Pytester-880"><a href="#Pytester-880"><span class="linenos"> 880</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester-881"><a href="#Pytester-881"><span class="linenos"> 881</span></a>
</span><span id="Pytester-882"><a href="#Pytester-882"><span class="linenos"> 882</span></a><span class="sd">            def test_something(pytester):</span>
</span><span id="Pytester-883"><a href="#Pytester-883"><span class="linenos"> 883</span></a><span class="sd">                # Initial file is created test_something.txt.</span>
</span><span id="Pytester-884"><a href="#Pytester-884"><span class="linenos"> 884</span></a><span class="sd">                pytester.maketxtfile(&quot;foobar&quot;)</span>
</span><span id="Pytester-885"><a href="#Pytester-885"><span class="linenos"> 885</span></a><span class="sd">                # To create multiple files, pass kwargs accordingly.</span>
</span><span id="Pytester-886"><a href="#Pytester-886"><span class="linenos"> 886</span></a><span class="sd">                pytester.maketxtfile(custom=&quot;foobar&quot;)</span>
</span><span id="Pytester-887"><a href="#Pytester-887"><span class="linenos"> 887</span></a><span class="sd">                # At this point, both &#39;test_something.txt&#39; &amp; &#39;custom.txt&#39; exist in the test directory.</span>
</span><span id="Pytester-888"><a href="#Pytester-888"><span class="linenos"> 888</span></a>
</span><span id="Pytester-889"><a href="#Pytester-889"><span class="linenos"> 889</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-890"><a href="#Pytester-890"><span class="linenos"> 890</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefile</span><span class="p">(</span><span class="s2">&quot;.txt&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester-891"><a href="#Pytester-891"><span class="linenos"> 891</span></a>
</span><span id="Pytester-892"><a href="#Pytester-892"><span class="linenos"> 892</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">syspathinsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-893"><a href="#Pytester-893"><span class="linenos"> 893</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepend a directory to sys.path, defaults to :attr:`path`.</span>
</span><span id="Pytester-894"><a href="#Pytester-894"><span class="linenos"> 894</span></a>
</span><span id="Pytester-895"><a href="#Pytester-895"><span class="linenos"> 895</span></a><span class="sd">        This is undone automatically when this object dies at the end of each</span>
</span><span id="Pytester-896"><a href="#Pytester-896"><span class="linenos"> 896</span></a><span class="sd">        test.</span>
</span><span id="Pytester-897"><a href="#Pytester-897"><span class="linenos"> 897</span></a>
</span><span id="Pytester-898"><a href="#Pytester-898"><span class="linenos"> 898</span></a><span class="sd">        :param path:</span>
</span><span id="Pytester-899"><a href="#Pytester-899"><span class="linenos"> 899</span></a><span class="sd">            The path.</span>
</span><span id="Pytester-900"><a href="#Pytester-900"><span class="linenos"> 900</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-901"><a href="#Pytester-901"><span class="linenos"> 901</span></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-902"><a href="#Pytester-902"><span class="linenos"> 902</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
</span><span id="Pytester-903"><a href="#Pytester-903"><span class="linenos"> 903</span></a>
</span><span id="Pytester-904"><a href="#Pytester-904"><span class="linenos"> 904</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_monkeypatch</span><span class="o">.</span><span class="n">syspath_prepend</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="Pytester-905"><a href="#Pytester-905"><span class="linenos"> 905</span></a>
</span><span id="Pytester-906"><a href="#Pytester-906"><span class="linenos"> 906</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-907"><a href="#Pytester-907"><span class="linenos"> 907</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new (sub)directory.</span>
</span><span id="Pytester-908"><a href="#Pytester-908"><span class="linenos"> 908</span></a>
</span><span id="Pytester-909"><a href="#Pytester-909"><span class="linenos"> 909</span></a><span class="sd">        :param name:</span>
</span><span id="Pytester-910"><a href="#Pytester-910"><span class="linenos"> 910</span></a><span class="sd">            The name of the directory, relative to the pytester path.</span>
</span><span id="Pytester-911"><a href="#Pytester-911"><span class="linenos"> 911</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-912"><a href="#Pytester-912"><span class="linenos"> 912</span></a><span class="sd">            The created directory.</span>
</span><span id="Pytester-913"><a href="#Pytester-913"><span class="linenos"> 913</span></a><span class="sd">        :rtype: pathlib.Path</span>
</span><span id="Pytester-914"><a href="#Pytester-914"><span class="linenos"> 914</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-915"><a href="#Pytester-915"><span class="linenos"> 915</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="n">name</span>
</span><span id="Pytester-916"><a href="#Pytester-916"><span class="linenos"> 916</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</span><span id="Pytester-917"><a href="#Pytester-917"><span class="linenos"> 917</span></a>        <span class="k">return</span> <span class="n">p</span>
</span><span id="Pytester-918"><a href="#Pytester-918"><span class="linenos"> 918</span></a>
</span><span id="Pytester-919"><a href="#Pytester-919"><span class="linenos"> 919</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkpydir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-920"><a href="#Pytester-920"><span class="linenos"> 920</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new python package.</span>
</span><span id="Pytester-921"><a href="#Pytester-921"><span class="linenos"> 921</span></a>
</span><span id="Pytester-922"><a href="#Pytester-922"><span class="linenos"> 922</span></a><span class="sd">        This creates a (sub)directory with an empty ``__init__.py`` file so it</span>
</span><span id="Pytester-923"><a href="#Pytester-923"><span class="linenos"> 923</span></a><span class="sd">        gets recognised as a Python package.</span>
</span><span id="Pytester-924"><a href="#Pytester-924"><span class="linenos"> 924</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-925"><a href="#Pytester-925"><span class="linenos"> 925</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="n">name</span>
</span><span id="Pytester-926"><a href="#Pytester-926"><span class="linenos"> 926</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</span><span id="Pytester-927"><a href="#Pytester-927"><span class="linenos"> 927</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
</span><span id="Pytester-928"><a href="#Pytester-928"><span class="linenos"> 928</span></a>        <span class="k">return</span> <span class="n">p</span>
</span><span id="Pytester-929"><a href="#Pytester-929"><span class="linenos"> 929</span></a>
</span><span id="Pytester-930"><a href="#Pytester-930"><span class="linenos"> 930</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_example</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester-931"><a href="#Pytester-931"><span class="linenos"> 931</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Copy file from project&#39;s directory into the testdir.</span>
</span><span id="Pytester-932"><a href="#Pytester-932"><span class="linenos"> 932</span></a>
</span><span id="Pytester-933"><a href="#Pytester-933"><span class="linenos"> 933</span></a><span class="sd">        :param name:</span>
</span><span id="Pytester-934"><a href="#Pytester-934"><span class="linenos"> 934</span></a><span class="sd">            The name of the file to copy.</span>
</span><span id="Pytester-935"><a href="#Pytester-935"><span class="linenos"> 935</span></a><span class="sd">        :return:</span>
</span><span id="Pytester-936"><a href="#Pytester-936"><span class="linenos"> 936</span></a><span class="sd">            Path to the copied directory (inside ``self.path``).</span>
</span><span id="Pytester-937"><a href="#Pytester-937"><span class="linenos"> 937</span></a><span class="sd">        :rtype: pathlib.Path</span>
</span><span id="Pytester-938"><a href="#Pytester-938"><span class="linenos"> 938</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-939"><a href="#Pytester-939"><span class="linenos"> 939</span></a>        <span class="n">example_dir_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;pytester_example_dir&quot;</span><span class="p">)</span>
</span><span id="Pytester-940"><a href="#Pytester-940"><span class="linenos"> 940</span></a>        <span class="k">if</span> <span class="n">example_dir_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-941"><a href="#Pytester-941"><span class="linenos"> 941</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;pytester_example_dir is unset, can&#39;t copy examples&quot;</span><span class="p">)</span>
</span><span id="Pytester-942"><a href="#Pytester-942"><span class="linenos"> 942</span></a>        <span class="n">example_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span> <span class="o">/</span> <span class="n">example_dir_</span>
</span><span id="Pytester-943"><a href="#Pytester-943"><span class="linenos"> 943</span></a>
</span><span id="Pytester-944"><a href="#Pytester-944"><span class="linenos"> 944</span></a>        <span class="k">for</span> <span class="n">extra_element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">(</span><span class="s2">&quot;pytester_example_path&quot;</span><span class="p">):</span>
</span><span id="Pytester-945"><a href="#Pytester-945"><span class="linenos"> 945</span></a>            <span class="k">assert</span> <span class="n">extra_element</span><span class="o">.</span><span class="n">args</span>
</span><span id="Pytester-946"><a href="#Pytester-946"><span class="linenos"> 946</span></a>            <span class="n">example_dir</span> <span class="o">=</span> <span class="n">example_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="o">*</span><span class="n">extra_element</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-947"><a href="#Pytester-947"><span class="linenos"> 947</span></a>
</span><span id="Pytester-948"><a href="#Pytester-948"><span class="linenos"> 948</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-949"><a href="#Pytester-949"><span class="linenos"> 949</span></a>            <span class="n">func_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Pytester-950"><a href="#Pytester-950"><span class="linenos"> 950</span></a>            <span class="n">maybe_dir</span> <span class="o">=</span> <span class="n">example_dir</span> <span class="o">/</span> <span class="n">func_name</span>
</span><span id="Pytester-951"><a href="#Pytester-951"><span class="linenos"> 951</span></a>            <span class="n">maybe_file</span> <span class="o">=</span> <span class="n">example_dir</span> <span class="o">/</span> <span class="p">(</span><span class="n">func_name</span> <span class="o">+</span> <span class="s2">&quot;.py&quot;</span><span class="p">)</span>
</span><span id="Pytester-952"><a href="#Pytester-952"><span class="linenos"> 952</span></a>
</span><span id="Pytester-953"><a href="#Pytester-953"><span class="linenos"> 953</span></a>            <span class="k">if</span> <span class="n">maybe_dir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Pytester-954"><a href="#Pytester-954"><span class="linenos"> 954</span></a>                <span class="n">example_path</span> <span class="o">=</span> <span class="n">maybe_dir</span>
</span><span id="Pytester-955"><a href="#Pytester-955"><span class="linenos"> 955</span></a>            <span class="k">elif</span> <span class="n">maybe_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Pytester-956"><a href="#Pytester-956"><span class="linenos"> 956</span></a>                <span class="n">example_path</span> <span class="o">=</span> <span class="n">maybe_file</span>
</span><span id="Pytester-957"><a href="#Pytester-957"><span class="linenos"> 957</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-958"><a href="#Pytester-958"><span class="linenos"> 958</span></a>                <span class="k">raise</span> <span class="ne">LookupError</span><span class="p">(</span>
</span><span id="Pytester-959"><a href="#Pytester-959"><span class="linenos"> 959</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2"> can&#39;t be found as module or package in </span><span class="si">{</span><span class="n">example_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester-960"><a href="#Pytester-960"><span class="linenos"> 960</span></a>                <span class="p">)</span>
</span><span id="Pytester-961"><a href="#Pytester-961"><span class="linenos"> 961</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-962"><a href="#Pytester-962"><span class="linenos"> 962</span></a>            <span class="n">example_path</span> <span class="o">=</span> <span class="n">example_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Pytester-963"><a href="#Pytester-963"><span class="linenos"> 963</span></a>
</span><span id="Pytester-964"><a href="#Pytester-964"><span class="linenos"> 964</span></a>        <span class="k">if</span> <span class="n">example_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">example_path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Pytester-965"><a href="#Pytester-965"><span class="linenos"> 965</span></a>            <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">symlinks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dirs_exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester-966"><a href="#Pytester-966"><span class="linenos"> 966</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
</span><span id="Pytester-967"><a href="#Pytester-967"><span class="linenos"> 967</span></a>        <span class="k">elif</span> <span class="n">example_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Pytester-968"><a href="#Pytester-968"><span class="linenos"> 968</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">example_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="Pytester-969"><a href="#Pytester-969"><span class="linenos"> 969</span></a>            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</span><span id="Pytester-970"><a href="#Pytester-970"><span class="linenos"> 970</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="Pytester-971"><a href="#Pytester-971"><span class="linenos"> 971</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-972"><a href="#Pytester-972"><span class="linenos"> 972</span></a>            <span class="k">raise</span> <span class="ne">LookupError</span><span class="p">(</span>
</span><span id="Pytester-973"><a href="#Pytester-973"><span class="linenos"> 973</span></a>                <span class="sa">f</span><span class="s1">&#39;example &quot;</span><span class="si">{</span><span class="n">example_path</span><span class="si">}</span><span class="s1">&quot; is not found as a file or directory&#39;</span>
</span><span id="Pytester-974"><a href="#Pytester-974"><span class="linenos"> 974</span></a>            <span class="p">)</span>
</span><span id="Pytester-975"><a href="#Pytester-975"><span class="linenos"> 975</span></a>
</span><span id="Pytester-976"><a href="#Pytester-976"><span class="linenos"> 976</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Collector</span> <span class="o">|</span> <span class="n">Item</span><span class="p">:</span>
</span><span id="Pytester-977"><a href="#Pytester-977"><span class="linenos"> 977</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the collection node of a file.</span>
</span><span id="Pytester-978"><a href="#Pytester-978"><span class="linenos"> 978</span></a>
</span><span id="Pytester-979"><a href="#Pytester-979"><span class="linenos"> 979</span></a><span class="sd">        :param config:</span>
</span><span id="Pytester-980"><a href="#Pytester-980"><span class="linenos"> 980</span></a><span class="sd">           A pytest config.</span>
</span><span id="Pytester-981"><a href="#Pytester-981"><span class="linenos"> 981</span></a><span class="sd">           See :py:meth:`parseconfig` and :py:meth:`parseconfigure` for creating it.</span>
</span><span id="Pytester-982"><a href="#Pytester-982"><span class="linenos"> 982</span></a><span class="sd">        :param arg:</span>
</span><span id="Pytester-983"><a href="#Pytester-983"><span class="linenos"> 983</span></a><span class="sd">            Path to the file.</span>
</span><span id="Pytester-984"><a href="#Pytester-984"><span class="linenos"> 984</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-985"><a href="#Pytester-985"><span class="linenos"> 985</span></a><span class="sd">            The node.</span>
</span><span id="Pytester-986"><a href="#Pytester-986"><span class="linenos"> 986</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-987"><a href="#Pytester-987"><span class="linenos"> 987</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="Pytester-988"><a href="#Pytester-988"><span class="linenos"> 988</span></a>        <span class="k">assert</span> <span class="s2">&quot;::&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="Pytester-989"><a href="#Pytester-989"><span class="linenos"> 989</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span><span id="Pytester-990"><a href="#Pytester-990"><span class="linenos"> 990</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionstart</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</span><span id="Pytester-991"><a href="#Pytester-991"><span class="linenos"> 991</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">perform_collect</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)],</span> <span class="n">genitems</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Pytester-992"><a href="#Pytester-992"><span class="linenos"> 992</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionfinish</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">exitstatus</span><span class="o">=</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
</span><span id="Pytester-993"><a href="#Pytester-993"><span class="linenos"> 993</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Pytester-994"><a href="#Pytester-994"><span class="linenos"> 994</span></a>
</span><span id="Pytester-995"><a href="#Pytester-995"><span class="linenos"> 995</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getpathnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Collector</span> <span class="o">|</span> <span class="n">Item</span><span class="p">:</span>
</span><span id="Pytester-996"><a href="#Pytester-996"><span class="linenos"> 996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the collection node of a file.</span>
</span><span id="Pytester-997"><a href="#Pytester-997"><span class="linenos"> 997</span></a>
</span><span id="Pytester-998"><a href="#Pytester-998"><span class="linenos"> 998</span></a><span class="sd">        This is like :py:meth:`getnode` but uses :py:meth:`parseconfigure` to</span>
</span><span id="Pytester-999"><a href="#Pytester-999"><span class="linenos"> 999</span></a><span class="sd">        create the (configured) pytest Config instance.</span>
</span><span id="Pytester-1000"><a href="#Pytester-1000"><span class="linenos">1000</span></a>
</span><span id="Pytester-1001"><a href="#Pytester-1001"><span class="linenos">1001</span></a><span class="sd">        :param path:</span>
</span><span id="Pytester-1002"><a href="#Pytester-1002"><span class="linenos">1002</span></a><span class="sd">            Path to the file.</span>
</span><span id="Pytester-1003"><a href="#Pytester-1003"><span class="linenos">1003</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-1004"><a href="#Pytester-1004"><span class="linenos">1004</span></a><span class="sd">            The node.</span>
</span><span id="Pytester-1005"><a href="#Pytester-1005"><span class="linenos">1005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1006"><a href="#Pytester-1006"><span class="linenos">1006</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester-1007"><a href="#Pytester-1007"><span class="linenos">1007</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseconfigure</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester-1008"><a href="#Pytester-1008"><span class="linenos">1008</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="Pytester-1009"><a href="#Pytester-1009"><span class="linenos">1009</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">bestrelpath</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Pytester-1010"><a href="#Pytester-1010"><span class="linenos">1010</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionstart</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</span><span id="Pytester-1011"><a href="#Pytester-1011"><span class="linenos">1011</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">perform_collect</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="n">genitems</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Pytester-1012"><a href="#Pytester-1012"><span class="linenos">1012</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionfinish</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">exitstatus</span><span class="o">=</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
</span><span id="Pytester-1013"><a href="#Pytester-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Pytester-1014"><a href="#Pytester-1014"><span class="linenos">1014</span></a>
</span><span id="Pytester-1015"><a href="#Pytester-1015"><span class="linenos">1015</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colitems</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Pytester-1016"><a href="#Pytester-1016"><span class="linenos">1016</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate all test items from a collection node.</span>
</span><span id="Pytester-1017"><a href="#Pytester-1017"><span class="linenos">1017</span></a>
</span><span id="Pytester-1018"><a href="#Pytester-1018"><span class="linenos">1018</span></a><span class="sd">        This recurses into the collection node and returns a list of all the</span>
</span><span id="Pytester-1019"><a href="#Pytester-1019"><span class="linenos">1019</span></a><span class="sd">        test items contained within.</span>
</span><span id="Pytester-1020"><a href="#Pytester-1020"><span class="linenos">1020</span></a>
</span><span id="Pytester-1021"><a href="#Pytester-1021"><span class="linenos">1021</span></a><span class="sd">        :param colitems:</span>
</span><span id="Pytester-1022"><a href="#Pytester-1022"><span class="linenos">1022</span></a><span class="sd">            The collection nodes.</span>
</span><span id="Pytester-1023"><a href="#Pytester-1023"><span class="linenos">1023</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-1024"><a href="#Pytester-1024"><span class="linenos">1024</span></a><span class="sd">            The collected items.</span>
</span><span id="Pytester-1025"><a href="#Pytester-1025"><span class="linenos">1025</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1026"><a href="#Pytester-1026"><span class="linenos">1026</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">colitems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">session</span>
</span><span id="Pytester-1027"><a href="#Pytester-1027"><span class="linenos">1027</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester-1028"><a href="#Pytester-1028"><span class="linenos">1028</span></a>        <span class="k">for</span> <span class="n">colitem</span> <span class="ow">in</span> <span class="n">colitems</span><span class="p">:</span>
</span><span id="Pytester-1029"><a href="#Pytester-1029"><span class="linenos">1029</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">colitem</span><span class="p">))</span>
</span><span id="Pytester-1030"><a href="#Pytester-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="Pytester-1031"><a href="#Pytester-1031"><span class="linenos">1031</span></a>
</span><span id="Pytester-1032"><a href="#Pytester-1032"><span class="linenos">1032</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Pytester-1033"><a href="#Pytester-1033"><span class="linenos">1033</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the &quot;test_func&quot; Item.</span>
</span><span id="Pytester-1034"><a href="#Pytester-1034"><span class="linenos">1034</span></a>
</span><span id="Pytester-1035"><a href="#Pytester-1035"><span class="linenos">1035</span></a><span class="sd">        The calling test instance (class containing the test method) must</span>
</span><span id="Pytester-1036"><a href="#Pytester-1036"><span class="linenos">1036</span></a><span class="sd">        provide a ``.getrunner()`` method which should return a runner which</span>
</span><span id="Pytester-1037"><a href="#Pytester-1037"><span class="linenos">1037</span></a><span class="sd">        can run the test protocol for a single item, e.g.</span>
</span><span id="Pytester-1038"><a href="#Pytester-1038"><span class="linenos">1038</span></a><span class="sd">        ``_pytest.runner.runtestprotocol``.</span>
</span><span id="Pytester-1039"><a href="#Pytester-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1040"><a href="#Pytester-1040"><span class="linenos">1040</span></a>        <span class="c1"># used from runner functional tests</span>
</span><span id="Pytester-1041"><a href="#Pytester-1041"><span class="linenos">1041</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getitem</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-1042"><a href="#Pytester-1042"><span class="linenos">1042</span></a>        <span class="c1"># the test class where we are called from wants to provide the runner</span>
</span><span id="Pytester-1043"><a href="#Pytester-1043"><span class="linenos">1043</span></a>        <span class="n">testclassinstance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">instance</span>
</span><span id="Pytester-1044"><a href="#Pytester-1044"><span class="linenos">1044</span></a>        <span class="n">runner</span> <span class="o">=</span> <span class="n">testclassinstance</span><span class="o">.</span><span class="n">getrunner</span><span class="p">()</span>
</span><span id="Pytester-1045"><a href="#Pytester-1045"><span class="linenos">1045</span></a>        <span class="k">return</span> <span class="n">runner</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="Pytester-1046"><a href="#Pytester-1046"><span class="linenos">1046</span></a>
</span><span id="Pytester-1047"><a href="#Pytester-1047"><span class="linenos">1047</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_runsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdlineargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Pytester-1048"><a href="#Pytester-1048"><span class="linenos">1048</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a test module in process using ``pytest.main()``.</span>
</span><span id="Pytester-1049"><a href="#Pytester-1049"><span class="linenos">1049</span></a>
</span><span id="Pytester-1050"><a href="#Pytester-1050"><span class="linenos">1050</span></a><span class="sd">        This run writes &quot;source&quot; into a temporary file and runs</span>
</span><span id="Pytester-1051"><a href="#Pytester-1051"><span class="linenos">1051</span></a><span class="sd">        ``pytest.main()`` on it, returning a :py:class:`HookRecorder` instance</span>
</span><span id="Pytester-1052"><a href="#Pytester-1052"><span class="linenos">1052</span></a><span class="sd">        for the result.</span>
</span><span id="Pytester-1053"><a href="#Pytester-1053"><span class="linenos">1053</span></a>
</span><span id="Pytester-1054"><a href="#Pytester-1054"><span class="linenos">1054</span></a><span class="sd">        :param source: The source code of the test module.</span>
</span><span id="Pytester-1055"><a href="#Pytester-1055"><span class="linenos">1055</span></a><span class="sd">        :param cmdlineargs: Any extra command line arguments to use.</span>
</span><span id="Pytester-1056"><a href="#Pytester-1056"><span class="linenos">1056</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1057"><a href="#Pytester-1057"><span class="linenos">1057</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-1058"><a href="#Pytester-1058"><span class="linenos">1058</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">cmdlineargs</span><span class="p">),</span> <span class="n">p</span><span class="p">]</span>
</span><span id="Pytester-1059"><a href="#Pytester-1059"><span class="linenos">1059</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
</span><span id="Pytester-1060"><a href="#Pytester-1060"><span class="linenos">1060</span></a>
</span><span id="Pytester-1061"><a href="#Pytester-1061"><span class="linenos">1061</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">],</span> <span class="n">HookRecorder</span><span class="p">]:</span>
</span><span id="Pytester-1062"><a href="#Pytester-1062"><span class="linenos">1062</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run ``pytest.main([&#39;--collect-only&#39;])`` in-process.</span>
</span><span id="Pytester-1063"><a href="#Pytester-1063"><span class="linenos">1063</span></a>
</span><span id="Pytester-1064"><a href="#Pytester-1064"><span class="linenos">1064</span></a><span class="sd">        Runs the :py:func:`pytest.main` function to run all of pytest inside</span>
</span><span id="Pytester-1065"><a href="#Pytester-1065"><span class="linenos">1065</span></a><span class="sd">        the test process itself like :py:meth:`inline_run`, but returns a</span>
</span><span id="Pytester-1066"><a href="#Pytester-1066"><span class="linenos">1066</span></a><span class="sd">        tuple of the collected items and a :py:class:`HookRecorder` instance.</span>
</span><span id="Pytester-1067"><a href="#Pytester-1067"><span class="linenos">1067</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1068"><a href="#Pytester-1068"><span class="linenos">1068</span></a>        <span class="n">rec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span><span class="s2">&quot;--collect-only&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1069"><a href="#Pytester-1069"><span class="linenos">1069</span></a>        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">item</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rec</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_itemcollected&quot;</span><span class="p">)]</span>
</span><span id="Pytester-1070"><a href="#Pytester-1070"><span class="linenos">1070</span></a>        <span class="k">return</span> <span class="n">items</span><span class="p">,</span> <span class="n">rec</span>
</span><span id="Pytester-1071"><a href="#Pytester-1071"><span class="linenos">1071</span></a>
</span><span id="Pytester-1072"><a href="#Pytester-1072"><span class="linenos">1072</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_run</span><span class="p">(</span>
</span><span id="Pytester-1073"><a href="#Pytester-1073"><span class="linenos">1073</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester-1074"><a href="#Pytester-1074"><span class="linenos">1074</span></a>        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester-1075"><a href="#Pytester-1075"><span class="linenos">1075</span></a>        <span class="n">plugins</span><span class="o">=</span><span class="p">(),</span>
</span><span id="Pytester-1076"><a href="#Pytester-1076"><span class="linenos">1076</span></a>        <span class="n">no_reraise_ctrlc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Pytester-1077"><a href="#Pytester-1077"><span class="linenos">1077</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Pytester-1078"><a href="#Pytester-1078"><span class="linenos">1078</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run ``pytest.main()`` in-process, returning a HookRecorder.</span>
</span><span id="Pytester-1079"><a href="#Pytester-1079"><span class="linenos">1079</span></a>
</span><span id="Pytester-1080"><a href="#Pytester-1080"><span class="linenos">1080</span></a><span class="sd">        Runs the :py:func:`pytest.main` function to run all of pytest inside</span>
</span><span id="Pytester-1081"><a href="#Pytester-1081"><span class="linenos">1081</span></a><span class="sd">        the test process itself.  This means it can return a</span>
</span><span id="Pytester-1082"><a href="#Pytester-1082"><span class="linenos">1082</span></a><span class="sd">        :py:class:`HookRecorder` instance which gives more detailed results</span>
</span><span id="Pytester-1083"><a href="#Pytester-1083"><span class="linenos">1083</span></a><span class="sd">        from that run than can be done by matching stdout/stderr from</span>
</span><span id="Pytester-1084"><a href="#Pytester-1084"><span class="linenos">1084</span></a><span class="sd">        :py:meth:`runpytest`.</span>
</span><span id="Pytester-1085"><a href="#Pytester-1085"><span class="linenos">1085</span></a>
</span><span id="Pytester-1086"><a href="#Pytester-1086"><span class="linenos">1086</span></a><span class="sd">        :param args:</span>
</span><span id="Pytester-1087"><a href="#Pytester-1087"><span class="linenos">1087</span></a><span class="sd">            Command line arguments to pass to :py:func:`pytest.main`.</span>
</span><span id="Pytester-1088"><a href="#Pytester-1088"><span class="linenos">1088</span></a><span class="sd">        :param plugins:</span>
</span><span id="Pytester-1089"><a href="#Pytester-1089"><span class="linenos">1089</span></a><span class="sd">            Extra plugin instances the ``pytest.main()`` instance should use.</span>
</span><span id="Pytester-1090"><a href="#Pytester-1090"><span class="linenos">1090</span></a><span class="sd">        :param no_reraise_ctrlc:</span>
</span><span id="Pytester-1091"><a href="#Pytester-1091"><span class="linenos">1091</span></a><span class="sd">            Typically we reraise keyboard interrupts from the child run. If</span>
</span><span id="Pytester-1092"><a href="#Pytester-1092"><span class="linenos">1092</span></a><span class="sd">            True, the KeyboardInterrupt exception is captured.</span>
</span><span id="Pytester-1093"><a href="#Pytester-1093"><span class="linenos">1093</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1094"><a href="#Pytester-1094"><span class="linenos">1094</span></a>        <span class="c1"># (maybe a cpython bug?) the importlib cache sometimes isn&#39;t updated</span>
</span><span id="Pytester-1095"><a href="#Pytester-1095"><span class="linenos">1095</span></a>        <span class="c1"># properly between file creation and inline_run (especially if imports</span>
</span><span id="Pytester-1096"><a href="#Pytester-1096"><span class="linenos">1096</span></a>        <span class="c1"># are interspersed with file creation)</span>
</span><span id="Pytester-1097"><a href="#Pytester-1097"><span class="linenos">1097</span></a>        <span class="n">importlib</span><span class="o">.</span><span class="n">invalidate_caches</span><span class="p">()</span>
</span><span id="Pytester-1098"><a href="#Pytester-1098"><span class="linenos">1098</span></a>
</span><span id="Pytester-1099"><a href="#Pytester-1099"><span class="linenos">1099</span></a>        <span class="n">plugins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">plugins</span><span class="p">)</span>
</span><span id="Pytester-1100"><a href="#Pytester-1100"><span class="linenos">1100</span></a>        <span class="n">finalizers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester-1101"><a href="#Pytester-1101"><span class="linenos">1101</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester-1102"><a href="#Pytester-1102"><span class="linenos">1102</span></a>            <span class="c1"># Any sys.module or sys.path changes done while running pytest</span>
</span><span id="Pytester-1103"><a href="#Pytester-1103"><span class="linenos">1103</span></a>            <span class="c1"># inline should be reverted after the test run completes to avoid</span>
</span><span id="Pytester-1104"><a href="#Pytester-1104"><span class="linenos">1104</span></a>            <span class="c1"># clashing with later inline tests run within the same pytest test,</span>
</span><span id="Pytester-1105"><a href="#Pytester-1105"><span class="linenos">1105</span></a>            <span class="c1"># e.g. just because they use matching test module names.</span>
</span><span id="Pytester-1106"><a href="#Pytester-1106"><span class="linenos">1106</span></a>            <span class="n">finalizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__take_sys_modules_snapshot</span><span class="p">()</span><span class="o">.</span><span class="n">restore</span><span class="p">)</span>
</span><span id="Pytester-1107"><a href="#Pytester-1107"><span class="linenos">1107</span></a>            <span class="n">finalizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SysPathsSnapshot</span><span class="p">()</span><span class="o">.</span><span class="n">restore</span><span class="p">)</span>
</span><span id="Pytester-1108"><a href="#Pytester-1108"><span class="linenos">1108</span></a>
</span><span id="Pytester-1109"><a href="#Pytester-1109"><span class="linenos">1109</span></a>            <span class="c1"># Important note:</span>
</span><span id="Pytester-1110"><a href="#Pytester-1110"><span class="linenos">1110</span></a>            <span class="c1"># - our tests should not leave any other references/registrations</span>
</span><span id="Pytester-1111"><a href="#Pytester-1111"><span class="linenos">1111</span></a>            <span class="c1">#   laying around other than possibly loaded test modules</span>
</span><span id="Pytester-1112"><a href="#Pytester-1112"><span class="linenos">1112</span></a>            <span class="c1">#   referenced from sys.modules, as nothing will clean those up</span>
</span><span id="Pytester-1113"><a href="#Pytester-1113"><span class="linenos">1113</span></a>            <span class="c1">#   automatically</span>
</span><span id="Pytester-1114"><a href="#Pytester-1114"><span class="linenos">1114</span></a>
</span><span id="Pytester-1115"><a href="#Pytester-1115"><span class="linenos">1115</span></a>            <span class="n">rec</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester-1116"><a href="#Pytester-1116"><span class="linenos">1116</span></a>
</span><span id="Pytester-1117"><a href="#Pytester-1117"><span class="linenos">1117</span></a>            <span class="k">class</span><span class="w"> </span><span class="nc">Collect</span><span class="p">:</span>
</span><span id="Pytester-1118"><a href="#Pytester-1118"><span class="linenos">1118</span></a>                <span class="k">def</span><span class="w"> </span><span class="nf">pytest_configure</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-1119"><a href="#Pytester-1119"><span class="linenos">1119</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_hook_recorder</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="p">))</span>
</span><span id="Pytester-1120"><a href="#Pytester-1120"><span class="linenos">1120</span></a>
</span><span id="Pytester-1121"><a href="#Pytester-1121"><span class="linenos">1121</span></a>            <span class="n">plugins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Collect</span><span class="p">())</span>
</span><span id="Pytester-1122"><a href="#Pytester-1122"><span class="linenos">1122</span></a>            <span class="n">ret</span> <span class="o">=</span> <span class="n">main</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="n">plugins</span><span class="p">)</span>
</span><span id="Pytester-1123"><a href="#Pytester-1123"><span class="linenos">1123</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Pytester-1124"><a href="#Pytester-1124"><span class="linenos">1124</span></a>                <span class="n">reprec</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Pytester-1125"><a href="#Pytester-1125"><span class="linenos">1125</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-1126"><a href="#Pytester-1126"><span class="linenos">1126</span></a>
</span><span id="Pytester-1127"><a href="#Pytester-1127"><span class="linenos">1127</span></a>                <span class="k">class</span><span class="w"> </span><span class="nc">reprec</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester-1128"><a href="#Pytester-1128"><span class="linenos">1128</span></a>                    <span class="k">pass</span>
</span><span id="Pytester-1129"><a href="#Pytester-1129"><span class="linenos">1129</span></a>
</span><span id="Pytester-1130"><a href="#Pytester-1130"><span class="linenos">1130</span></a>            <span class="n">reprec</span><span class="o">.</span><span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span>
</span><span id="Pytester-1131"><a href="#Pytester-1131"><span class="linenos">1131</span></a>
</span><span id="Pytester-1132"><a href="#Pytester-1132"><span class="linenos">1132</span></a>            <span class="c1"># Typically we reraise keyboard interrupts from the child run</span>
</span><span id="Pytester-1133"><a href="#Pytester-1133"><span class="linenos">1133</span></a>            <span class="c1"># because it&#39;s our user requesting interruption of the testing.</span>
</span><span id="Pytester-1134"><a href="#Pytester-1134"><span class="linenos">1134</span></a>            <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">ExitCode</span><span class="o">.</span><span class="n">INTERRUPTED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">no_reraise_ctrlc</span><span class="p">:</span>
</span><span id="Pytester-1135"><a href="#Pytester-1135"><span class="linenos">1135</span></a>                <span class="n">calls</span> <span class="o">=</span> <span class="n">reprec</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_keyboard_interrupt&quot;</span><span class="p">)</span>
</span><span id="Pytester-1136"><a href="#Pytester-1136"><span class="linenos">1136</span></a>                <span class="k">if</span> <span class="n">calls</span> <span class="ow">and</span> <span class="n">calls</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">excinfo</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span><span id="Pytester-1137"><a href="#Pytester-1137"><span class="linenos">1137</span></a>                    <span class="k">raise</span> <span class="ne">KeyboardInterrupt</span><span class="p">()</span>
</span><span id="Pytester-1138"><a href="#Pytester-1138"><span class="linenos">1138</span></a>            <span class="k">return</span> <span class="n">reprec</span>
</span><span id="Pytester-1139"><a href="#Pytester-1139"><span class="linenos">1139</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Pytester-1140"><a href="#Pytester-1140"><span class="linenos">1140</span></a>            <span class="k">for</span> <span class="n">finalizer</span> <span class="ow">in</span> <span class="n">finalizers</span><span class="p">:</span>
</span><span id="Pytester-1141"><a href="#Pytester-1141"><span class="linenos">1141</span></a>                <span class="n">finalizer</span><span class="p">()</span>
</span><span id="Pytester-1142"><a href="#Pytester-1142"><span class="linenos">1142</span></a>
</span><span id="Pytester-1143"><a href="#Pytester-1143"><span class="linenos">1143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_inprocess</span><span class="p">(</span>
</span><span id="Pytester-1144"><a href="#Pytester-1144"><span class="linenos">1144</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="Pytester-1145"><a href="#Pytester-1145"><span class="linenos">1145</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester-1146"><a href="#Pytester-1146"><span class="linenos">1146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return result of running pytest in-process, providing a similar</span>
</span><span id="Pytester-1147"><a href="#Pytester-1147"><span class="linenos">1147</span></a><span class="sd">        interface to what self.runpytest() provides.&quot;&quot;&quot;</span>
</span><span id="Pytester-1148"><a href="#Pytester-1148"><span class="linenos">1148</span></a>        <span class="n">syspathinsert</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;syspathinsert&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="Pytester-1149"><a href="#Pytester-1149"><span class="linenos">1149</span></a>
</span><span id="Pytester-1150"><a href="#Pytester-1150"><span class="linenos">1150</span></a>        <span class="k">if</span> <span class="n">syspathinsert</span><span class="p">:</span>
</span><span id="Pytester-1151"><a href="#Pytester-1151"><span class="linenos">1151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">syspathinsert</span><span class="p">()</span>
</span><span id="Pytester-1152"><a href="#Pytester-1152"><span class="linenos">1152</span></a>        <span class="n">now</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="Pytester-1153"><a href="#Pytester-1153"><span class="linenos">1153</span></a>        <span class="n">capture</span> <span class="o">=</span> <span class="n">_get_multicapture</span><span class="p">(</span><span class="s2">&quot;sys&quot;</span><span class="p">)</span>
</span><span id="Pytester-1154"><a href="#Pytester-1154"><span class="linenos">1154</span></a>        <span class="n">capture</span><span class="o">.</span><span class="n">start_capturing</span><span class="p">()</span>
</span><span id="Pytester-1155"><a href="#Pytester-1155"><span class="linenos">1155</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester-1156"><a href="#Pytester-1156"><span class="linenos">1156</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester-1157"><a href="#Pytester-1157"><span class="linenos">1157</span></a>                <span class="n">reprec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester-1158"><a href="#Pytester-1158"><span class="linenos">1158</span></a>            <span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Pytester-1159"><a href="#Pytester-1159"><span class="linenos">1159</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Pytester-1160"><a href="#Pytester-1160"><span class="linenos">1160</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester-1161"><a href="#Pytester-1161"><span class="linenos">1161</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Pytester-1162"><a href="#Pytester-1162"><span class="linenos">1162</span></a>                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="Pytester-1163"><a href="#Pytester-1163"><span class="linenos">1163</span></a>                    <span class="k">pass</span>
</span><span id="Pytester-1164"><a href="#Pytester-1164"><span class="linenos">1164</span></a>
</span><span id="Pytester-1165"><a href="#Pytester-1165"><span class="linenos">1165</span></a>                <span class="k">class</span><span class="w"> </span><span class="nc">reprec</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester-1166"><a href="#Pytester-1166"><span class="linenos">1166</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span>
</span><span id="Pytester-1167"><a href="#Pytester-1167"><span class="linenos">1167</span></a>
</span><span id="Pytester-1168"><a href="#Pytester-1168"><span class="linenos">1168</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="Pytester-1169"><a href="#Pytester-1169"><span class="linenos">1169</span></a>                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span id="Pytester-1170"><a href="#Pytester-1170"><span class="linenos">1170</span></a>
</span><span id="Pytester-1171"><a href="#Pytester-1171"><span class="linenos">1171</span></a>                <span class="k">class</span><span class="w"> </span><span class="nc">reprec</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester-1172"><a href="#Pytester-1172"><span class="linenos">1172</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="Pytester-1173"><a href="#Pytester-1173"><span class="linenos">1173</span></a>
</span><span id="Pytester-1174"><a href="#Pytester-1174"><span class="linenos">1174</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Pytester-1175"><a href="#Pytester-1175"><span class="linenos">1175</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capture</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
</span><span id="Pytester-1176"><a href="#Pytester-1176"><span class="linenos">1176</span></a>            <span class="n">capture</span><span class="o">.</span><span class="n">stop_capturing</span><span class="p">()</span>
</span><span id="Pytester-1177"><a href="#Pytester-1177"><span class="linenos">1177</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</span><span id="Pytester-1178"><a href="#Pytester-1178"><span class="linenos">1178</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="Pytester-1179"><a href="#Pytester-1179"><span class="linenos">1179</span></a>
</span><span id="Pytester-1180"><a href="#Pytester-1180"><span class="linenos">1180</span></a>        <span class="k">assert</span> <span class="n">reprec</span><span class="o">.</span><span class="n">ret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester-1181"><a href="#Pytester-1181"><span class="linenos">1181</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">RunResult</span><span class="p">(</span>
</span><span id="Pytester-1182"><a href="#Pytester-1182"><span class="linenos">1182</span></a>            <span class="n">reprec</span><span class="o">.</span><span class="n">ret</span><span class="p">,</span> <span class="n">out</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span> <span class="n">err</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">now</span>
</span><span id="Pytester-1183"><a href="#Pytester-1183"><span class="linenos">1183</span></a>        <span class="p">)</span>
</span><span id="Pytester-1184"><a href="#Pytester-1184"><span class="linenos">1184</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">reprec</span> <span class="o">=</span> <span class="n">reprec</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester-1185"><a href="#Pytester-1185"><span class="linenos">1185</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Pytester-1186"><a href="#Pytester-1186"><span class="linenos">1186</span></a>
</span><span id="Pytester-1187"><a href="#Pytester-1187"><span class="linenos">1187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester-1188"><a href="#Pytester-1188"><span class="linenos">1188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pytest inline or in a subprocess, depending on the command line</span>
</span><span id="Pytester-1189"><a href="#Pytester-1189"><span class="linenos">1189</span></a><span class="sd">        option &quot;--runpytest&quot; and return a :py:class:`~pytest.RunResult`.&quot;&quot;&quot;</span>
</span><span id="Pytester-1190"><a href="#Pytester-1190"><span class="linenos">1190</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_basetemp</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1191"><a href="#Pytester-1191"><span class="linenos">1191</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">==</span> <span class="s2">&quot;inprocess&quot;</span><span class="p">:</span>
</span><span id="Pytester-1192"><a href="#Pytester-1192"><span class="linenos">1192</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">runpytest_inprocess</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester-1193"><a href="#Pytester-1193"><span class="linenos">1193</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">==</span> <span class="s2">&quot;subprocess&quot;</span><span class="p">:</span>
</span><span id="Pytester-1194"><a href="#Pytester-1194"><span class="linenos">1194</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">runpytest_subprocess</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester-1195"><a href="#Pytester-1195"><span class="linenos">1195</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unrecognized runpytest option: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Pytester-1196"><a href="#Pytester-1196"><span class="linenos">1196</span></a>
</span><span id="Pytester-1197"><a href="#Pytester-1197"><span class="linenos">1197</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_basetemp</span><span class="p">(</span>
</span><span id="Pytester-1198"><a href="#Pytester-1198"><span class="linenos">1198</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
</span><span id="Pytester-1199"><a href="#Pytester-1199"><span class="linenos">1199</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
</span><span id="Pytester-1200"><a href="#Pytester-1200"><span class="linenos">1200</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1201"><a href="#Pytester-1201"><span class="linenos">1201</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">new_args</span><span class="p">:</span>
</span><span id="Pytester-1202"><a href="#Pytester-1202"><span class="linenos">1202</span></a>            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;--basetemp&quot;</span><span class="p">):</span>
</span><span id="Pytester-1203"><a href="#Pytester-1203"><span class="linenos">1203</span></a>                <span class="k">break</span>
</span><span id="Pytester-1204"><a href="#Pytester-1204"><span class="linenos">1204</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-1205"><a href="#Pytester-1205"><span class="linenos">1205</span></a>            <span class="n">new_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Pytester-1206"><a href="#Pytester-1206"><span class="linenos">1206</span></a>                <span class="s2">&quot;--basetemp=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;basetemp&quot;</span><span class="p">))</span>
</span><span id="Pytester-1207"><a href="#Pytester-1207"><span class="linenos">1207</span></a>            <span class="p">)</span>
</span><span id="Pytester-1208"><a href="#Pytester-1208"><span class="linenos">1208</span></a>        <span class="k">return</span> <span class="n">new_args</span>
</span><span id="Pytester-1209"><a href="#Pytester-1209"><span class="linenos">1209</span></a>
</span><span id="Pytester-1210"><a href="#Pytester-1210"><span class="linenos">1210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Pytester-1211"><a href="#Pytester-1211"><span class="linenos">1211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new pytest :class:`pytest.Config` instance from given</span>
</span><span id="Pytester-1212"><a href="#Pytester-1212"><span class="linenos">1212</span></a><span class="sd">        commandline args.</span>
</span><span id="Pytester-1213"><a href="#Pytester-1213"><span class="linenos">1213</span></a>
</span><span id="Pytester-1214"><a href="#Pytester-1214"><span class="linenos">1214</span></a><span class="sd">        This invokes the pytest bootstrapping code in _pytest.config to create a</span>
</span><span id="Pytester-1215"><a href="#Pytester-1215"><span class="linenos">1215</span></a><span class="sd">        new :py:class:`pytest.PytestPluginManager` and call the</span>
</span><span id="Pytester-1216"><a href="#Pytester-1216"><span class="linenos">1216</span></a><span class="sd">        :hook:`pytest_cmdline_parse` hook to create a new :class:`pytest.Config`</span>
</span><span id="Pytester-1217"><a href="#Pytester-1217"><span class="linenos">1217</span></a><span class="sd">        instance.</span>
</span><span id="Pytester-1218"><a href="#Pytester-1218"><span class="linenos">1218</span></a>
</span><span id="Pytester-1219"><a href="#Pytester-1219"><span class="linenos">1219</span></a><span class="sd">        If :attr:`plugins` has been populated they should be plugin modules</span>
</span><span id="Pytester-1220"><a href="#Pytester-1220"><span class="linenos">1220</span></a><span class="sd">        to be registered with the plugin manager.</span>
</span><span id="Pytester-1221"><a href="#Pytester-1221"><span class="linenos">1221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1222"><a href="#Pytester-1222"><span class="linenos">1222</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">_pytest.config</span>
</span><span id="Pytester-1223"><a href="#Pytester-1223"><span class="linenos">1223</span></a>
</span><span id="Pytester-1224"><a href="#Pytester-1224"><span class="linenos">1224</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_basetemp</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1225"><a href="#Pytester-1225"><span class="linenos">1225</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">new_args</span><span class="p">]</span>
</span><span id="Pytester-1226"><a href="#Pytester-1226"><span class="linenos">1226</span></a>
</span><span id="Pytester-1227"><a href="#Pytester-1227"><span class="linenos">1227</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">_prepareconfig</span><span class="p">(</span><span class="n">new_args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="Pytester-1228"><a href="#Pytester-1228"><span class="linenos">1228</span></a>        <span class="c1"># we don&#39;t know what the test will do with this half-setup config</span>
</span><span id="Pytester-1229"><a href="#Pytester-1229"><span class="linenos">1229</span></a>        <span class="c1"># object and thus we make sure it gets unconfigured properly in any</span>
</span><span id="Pytester-1230"><a href="#Pytester-1230"><span class="linenos">1230</span></a>        <span class="c1"># case (otherwise capturing could still be active, for example)</span>
</span><span id="Pytester-1231"><a href="#Pytester-1231"><span class="linenos">1231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">_ensure_unconfigure</span><span class="p">)</span>
</span><span id="Pytester-1232"><a href="#Pytester-1232"><span class="linenos">1232</span></a>        <span class="k">return</span> <span class="n">config</span>
</span><span id="Pytester-1233"><a href="#Pytester-1233"><span class="linenos">1233</span></a>
</span><span id="Pytester-1234"><a href="#Pytester-1234"><span class="linenos">1234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Pytester-1235"><a href="#Pytester-1235"><span class="linenos">1235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new pytest configured Config instance.</span>
</span><span id="Pytester-1236"><a href="#Pytester-1236"><span class="linenos">1236</span></a>
</span><span id="Pytester-1237"><a href="#Pytester-1237"><span class="linenos">1237</span></a><span class="sd">        Returns a new :py:class:`pytest.Config` instance like</span>
</span><span id="Pytester-1238"><a href="#Pytester-1238"><span class="linenos">1238</span></a><span class="sd">        :py:meth:`parseconfig`, but also calls the :hook:`pytest_configure`</span>
</span><span id="Pytester-1239"><a href="#Pytester-1239"><span class="linenos">1239</span></a><span class="sd">        hook.</span>
</span><span id="Pytester-1240"><a href="#Pytester-1240"><span class="linenos">1240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1241"><a href="#Pytester-1241"><span class="linenos">1241</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseconfig</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1242"><a href="#Pytester-1242"><span class="linenos">1242</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">_do_configure</span><span class="p">()</span>
</span><span id="Pytester-1243"><a href="#Pytester-1243"><span class="linenos">1243</span></a>        <span class="k">return</span> <span class="n">config</span>
</span><span id="Pytester-1244"><a href="#Pytester-1244"><span class="linenos">1244</span></a>
</span><span id="Pytester-1245"><a href="#Pytester-1245"><span class="linenos">1245</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitem</span><span class="p">(</span>
</span><span id="Pytester-1246"><a href="#Pytester-1246"><span class="linenos">1246</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">funcname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;test_func&quot;</span>
</span><span id="Pytester-1247"><a href="#Pytester-1247"><span class="linenos">1247</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span><span class="p">:</span>
</span><span id="Pytester-1248"><a href="#Pytester-1248"><span class="linenos">1248</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the test item for a test function.</span>
</span><span id="Pytester-1249"><a href="#Pytester-1249"><span class="linenos">1249</span></a>
</span><span id="Pytester-1250"><a href="#Pytester-1250"><span class="linenos">1250</span></a><span class="sd">        Writes the source to a python file and runs pytest&#39;s collection on</span>
</span><span id="Pytester-1251"><a href="#Pytester-1251"><span class="linenos">1251</span></a><span class="sd">        the resulting module, returning the test item for the requested</span>
</span><span id="Pytester-1252"><a href="#Pytester-1252"><span class="linenos">1252</span></a><span class="sd">        function name.</span>
</span><span id="Pytester-1253"><a href="#Pytester-1253"><span class="linenos">1253</span></a>
</span><span id="Pytester-1254"><a href="#Pytester-1254"><span class="linenos">1254</span></a><span class="sd">        :param source:</span>
</span><span id="Pytester-1255"><a href="#Pytester-1255"><span class="linenos">1255</span></a><span class="sd">            The module source.</span>
</span><span id="Pytester-1256"><a href="#Pytester-1256"><span class="linenos">1256</span></a><span class="sd">        :param funcname:</span>
</span><span id="Pytester-1257"><a href="#Pytester-1257"><span class="linenos">1257</span></a><span class="sd">            The name of the test function for which to return a test item.</span>
</span><span id="Pytester-1258"><a href="#Pytester-1258"><span class="linenos">1258</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-1259"><a href="#Pytester-1259"><span class="linenos">1259</span></a><span class="sd">            The test item.</span>
</span><span id="Pytester-1260"><a href="#Pytester-1260"><span class="linenos">1260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1261"><a href="#Pytester-1261"><span class="linenos">1261</span></a>        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getitems</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-1262"><a href="#Pytester-1262"><span class="linenos">1262</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
</span><span id="Pytester-1263"><a href="#Pytester-1263"><span class="linenos">1263</span></a>            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">funcname</span><span class="p">:</span>
</span><span id="Pytester-1264"><a href="#Pytester-1264"><span class="linenos">1264</span></a>                <span class="k">return</span> <span class="n">item</span>
</span><span id="Pytester-1265"><a href="#Pytester-1265"><span class="linenos">1265</span></a>        <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">funcname</span><span class="si">!r}</span><span class="s2"> item not found in module:</span><span class="se">\n</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="se">\n</span><span class="s2">items: </span><span class="si">{</span><span class="n">items</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester-1266"><a href="#Pytester-1266"><span class="linenos">1266</span></a>
</span><span id="Pytester-1267"><a href="#Pytester-1267"><span class="linenos">1267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Pytester-1268"><a href="#Pytester-1268"><span class="linenos">1268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return all test items collected from the module.</span>
</span><span id="Pytester-1269"><a href="#Pytester-1269"><span class="linenos">1269</span></a>
</span><span id="Pytester-1270"><a href="#Pytester-1270"><span class="linenos">1270</span></a><span class="sd">        Writes the source to a Python file and runs pytest&#39;s collection on</span>
</span><span id="Pytester-1271"><a href="#Pytester-1271"><span class="linenos">1271</span></a><span class="sd">        the resulting module, returning all test items contained within.</span>
</span><span id="Pytester-1272"><a href="#Pytester-1272"><span class="linenos">1272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1273"><a href="#Pytester-1273"><span class="linenos">1273</span></a>        <span class="n">modcol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getmodulecol</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-1274"><a href="#Pytester-1274"><span class="linenos">1274</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">genitems</span><span class="p">([</span><span class="n">modcol</span><span class="p">])</span>
</span><span id="Pytester-1275"><a href="#Pytester-1275"><span class="linenos">1275</span></a>
</span><span id="Pytester-1276"><a href="#Pytester-1276"><span class="linenos">1276</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getmodulecol</span><span class="p">(</span>
</span><span id="Pytester-1277"><a href="#Pytester-1277"><span class="linenos">1277</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester-1278"><a href="#Pytester-1278"><span class="linenos">1278</span></a>        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester-1279"><a href="#Pytester-1279"><span class="linenos">1279</span></a>        <span class="n">configargs</span><span class="o">=</span><span class="p">(),</span>
</span><span id="Pytester-1280"><a href="#Pytester-1280"><span class="linenos">1280</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Pytester-1281"><a href="#Pytester-1281"><span class="linenos">1281</span></a>        <span class="n">withinit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Pytester-1282"><a href="#Pytester-1282"><span class="linenos">1282</span></a>    <span class="p">):</span>
</span><span id="Pytester-1283"><a href="#Pytester-1283"><span class="linenos">1283</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the module collection node for ``source``.</span>
</span><span id="Pytester-1284"><a href="#Pytester-1284"><span class="linenos">1284</span></a>
</span><span id="Pytester-1285"><a href="#Pytester-1285"><span class="linenos">1285</span></a><span class="sd">        Writes ``source`` to a file using :py:meth:`makepyfile` and then</span>
</span><span id="Pytester-1286"><a href="#Pytester-1286"><span class="linenos">1286</span></a><span class="sd">        runs the pytest collection on it, returning the collection node for the</span>
</span><span id="Pytester-1287"><a href="#Pytester-1287"><span class="linenos">1287</span></a><span class="sd">        test module.</span>
</span><span id="Pytester-1288"><a href="#Pytester-1288"><span class="linenos">1288</span></a>
</span><span id="Pytester-1289"><a href="#Pytester-1289"><span class="linenos">1289</span></a><span class="sd">        :param source:</span>
</span><span id="Pytester-1290"><a href="#Pytester-1290"><span class="linenos">1290</span></a><span class="sd">            The source code of the module to collect.</span>
</span><span id="Pytester-1291"><a href="#Pytester-1291"><span class="linenos">1291</span></a>
</span><span id="Pytester-1292"><a href="#Pytester-1292"><span class="linenos">1292</span></a><span class="sd">        :param configargs:</span>
</span><span id="Pytester-1293"><a href="#Pytester-1293"><span class="linenos">1293</span></a><span class="sd">            Any extra arguments to pass to :py:meth:`parseconfigure`.</span>
</span><span id="Pytester-1294"><a href="#Pytester-1294"><span class="linenos">1294</span></a>
</span><span id="Pytester-1295"><a href="#Pytester-1295"><span class="linenos">1295</span></a><span class="sd">        :param withinit:</span>
</span><span id="Pytester-1296"><a href="#Pytester-1296"><span class="linenos">1296</span></a><span class="sd">            Whether to also write an ``__init__.py`` file to the same</span>
</span><span id="Pytester-1297"><a href="#Pytester-1297"><span class="linenos">1297</span></a><span class="sd">            directory to ensure it is a package.</span>
</span><span id="Pytester-1298"><a href="#Pytester-1298"><span class="linenos">1298</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1299"><a href="#Pytester-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">):</span>
</span><span id="Pytester-1300"><a href="#Pytester-1300"><span class="linenos">1300</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester-1301"><a href="#Pytester-1301"><span class="linenos">1301</span></a>            <span class="k">assert</span> <span class="ow">not</span> <span class="n">withinit</span><span class="p">,</span> <span class="s2">&quot;not supported for paths&quot;</span>
</span><span id="Pytester-1302"><a href="#Pytester-1302"><span class="linenos">1302</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-1303"><a href="#Pytester-1303"><span class="linenos">1303</span></a>            <span class="n">kw</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">)}</span>
</span><span id="Pytester-1304"><a href="#Pytester-1304"><span class="linenos">1304</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Pytester-1305"><a href="#Pytester-1305"><span class="linenos">1305</span></a>        <span class="k">if</span> <span class="n">withinit</span><span class="p">:</span>
</span><span id="Pytester-1306"><a href="#Pytester-1306"><span class="linenos">1306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="fm">__init__</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
</span><span id="Pytester-1307"><a href="#Pytester-1307"><span class="linenos">1307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseconfigure</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="n">configargs</span><span class="p">)</span>
</span><span id="Pytester-1308"><a href="#Pytester-1308"><span class="linenos">1308</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getnode</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Pytester-1309"><a href="#Pytester-1309"><span class="linenos">1309</span></a>
</span><span id="Pytester-1310"><a href="#Pytester-1310"><span class="linenos">1310</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modcol</span><span class="p">:</span> <span class="n">Collector</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-1311"><a href="#Pytester-1311"><span class="linenos">1311</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the collection node for name from the module collection.</span>
</span><span id="Pytester-1312"><a href="#Pytester-1312"><span class="linenos">1312</span></a>
</span><span id="Pytester-1313"><a href="#Pytester-1313"><span class="linenos">1313</span></a><span class="sd">        Searches a module collection node for a collection node matching the</span>
</span><span id="Pytester-1314"><a href="#Pytester-1314"><span class="linenos">1314</span></a><span class="sd">        given name.</span>
</span><span id="Pytester-1315"><a href="#Pytester-1315"><span class="linenos">1315</span></a>
</span><span id="Pytester-1316"><a href="#Pytester-1316"><span class="linenos">1316</span></a><span class="sd">        :param modcol: A module collection node; see :py:meth:`getmodulecol`.</span>
</span><span id="Pytester-1317"><a href="#Pytester-1317"><span class="linenos">1317</span></a><span class="sd">        :param name: The name of the node to return.</span>
</span><span id="Pytester-1318"><a href="#Pytester-1318"><span class="linenos">1318</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1319"><a href="#Pytester-1319"><span class="linenos">1319</span></a>        <span class="k">if</span> <span class="n">modcol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">:</span>
</span><span id="Pytester-1320"><a href="#Pytester-1320"><span class="linenos">1320</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">[</span><span class="n">modcol</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">modcol</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</span><span id="Pytester-1321"><a href="#Pytester-1321"><span class="linenos">1321</span></a>        <span class="k">for</span> <span class="n">colitem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">[</span><span class="n">modcol</span><span class="p">]:</span>
</span><span id="Pytester-1322"><a href="#Pytester-1322"><span class="linenos">1322</span></a>            <span class="k">if</span> <span class="n">colitem</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Pytester-1323"><a href="#Pytester-1323"><span class="linenos">1323</span></a>                <span class="k">return</span> <span class="n">colitem</span>
</span><span id="Pytester-1324"><a href="#Pytester-1324"><span class="linenos">1324</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="Pytester-1325"><a href="#Pytester-1325"><span class="linenos">1325</span></a>
</span><span id="Pytester-1326"><a href="#Pytester-1326"><span class="linenos">1326</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">popen</span><span class="p">(</span>
</span><span id="Pytester-1327"><a href="#Pytester-1327"><span class="linenos">1327</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester-1328"><a href="#Pytester-1328"><span class="linenos">1328</span></a>        <span class="n">cmdargs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Pytester-1329"><a href="#Pytester-1329"><span class="linenos">1329</span></a>        <span class="n">stdout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">TextIO</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Pytester-1330"><a href="#Pytester-1330"><span class="linenos">1330</span></a>        <span class="n">stderr</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">TextIO</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Pytester-1331"><a href="#Pytester-1331"><span class="linenos">1331</span></a>        <span class="n">stdin</span><span class="p">:</span> <span class="n">NotSetType</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">IO</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">CLOSE_STDIN</span><span class="p">,</span>
</span><span id="Pytester-1332"><a href="#Pytester-1332"><span class="linenos">1332</span></a>        <span class="o">**</span><span class="n">kw</span><span class="p">,</span>
</span><span id="Pytester-1333"><a href="#Pytester-1333"><span class="linenos">1333</span></a>    <span class="p">):</span>
</span><span id="Pytester-1334"><a href="#Pytester-1334"><span class="linenos">1334</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke :py:class:`subprocess.Popen`.</span>
</span><span id="Pytester-1335"><a href="#Pytester-1335"><span class="linenos">1335</span></a>
</span><span id="Pytester-1336"><a href="#Pytester-1336"><span class="linenos">1336</span></a><span class="sd">        Calls :py:class:`subprocess.Popen` making sure the current working</span>
</span><span id="Pytester-1337"><a href="#Pytester-1337"><span class="linenos">1337</span></a><span class="sd">        directory is in ``PYTHONPATH``.</span>
</span><span id="Pytester-1338"><a href="#Pytester-1338"><span class="linenos">1338</span></a>
</span><span id="Pytester-1339"><a href="#Pytester-1339"><span class="linenos">1339</span></a><span class="sd">        You probably want to use :py:meth:`run` instead.</span>
</span><span id="Pytester-1340"><a href="#Pytester-1340"><span class="linenos">1340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1341"><a href="#Pytester-1341"><span class="linenos">1341</span></a>        <span class="n">env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Pytester-1342"><a href="#Pytester-1342"><span class="linenos">1342</span></a>        <span class="n">env</span><span class="p">[</span><span class="s2">&quot;PYTHONPATH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="Pytester-1343"><a href="#Pytester-1343"><span class="linenos">1343</span></a>            <span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">env</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTHONPATH&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)])</span>
</span><span id="Pytester-1344"><a href="#Pytester-1344"><span class="linenos">1344</span></a>        <span class="p">)</span>
</span><span id="Pytester-1345"><a href="#Pytester-1345"><span class="linenos">1345</span></a>        <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;env&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">env</span>
</span><span id="Pytester-1346"><a href="#Pytester-1346"><span class="linenos">1346</span></a>
</span><span id="Pytester-1347"><a href="#Pytester-1347"><span class="linenos">1347</span></a>        <span class="k">if</span> <span class="n">stdin</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">CLOSE_STDIN</span><span class="p">:</span>
</span><span id="Pytester-1348"><a href="#Pytester-1348"><span class="linenos">1348</span></a>            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;stdin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
</span><span id="Pytester-1349"><a href="#Pytester-1349"><span class="linenos">1349</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="Pytester-1350"><a href="#Pytester-1350"><span class="linenos">1350</span></a>            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;stdin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
</span><span id="Pytester-1351"><a href="#Pytester-1351"><span class="linenos">1351</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-1352"><a href="#Pytester-1352"><span class="linenos">1352</span></a>            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;stdin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stdin</span>
</span><span id="Pytester-1353"><a href="#Pytester-1353"><span class="linenos">1353</span></a>
</span><span id="Pytester-1354"><a href="#Pytester-1354"><span class="linenos">1354</span></a>        <span class="n">popen</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">stderr</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Pytester-1355"><a href="#Pytester-1355"><span class="linenos">1355</span></a>        <span class="k">if</span> <span class="n">stdin</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">CLOSE_STDIN</span><span class="p">:</span>
</span><span id="Pytester-1356"><a href="#Pytester-1356"><span class="linenos">1356</span></a>            <span class="k">assert</span> <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester-1357"><a href="#Pytester-1357"><span class="linenos">1357</span></a>            <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Pytester-1358"><a href="#Pytester-1358"><span class="linenos">1358</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="Pytester-1359"><a href="#Pytester-1359"><span class="linenos">1359</span></a>            <span class="k">assert</span> <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester-1360"><a href="#Pytester-1360"><span class="linenos">1360</span></a>            <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>
</span><span id="Pytester-1361"><a href="#Pytester-1361"><span class="linenos">1361</span></a>
</span><span id="Pytester-1362"><a href="#Pytester-1362"><span class="linenos">1362</span></a>        <span class="k">return</span> <span class="n">popen</span>
</span><span id="Pytester-1363"><a href="#Pytester-1363"><span class="linenos">1363</span></a>
</span><span id="Pytester-1364"><a href="#Pytester-1364"><span class="linenos">1364</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span>
</span><span id="Pytester-1365"><a href="#Pytester-1365"><span class="linenos">1365</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester-1366"><a href="#Pytester-1366"><span class="linenos">1366</span></a>        <span class="o">*</span><span class="n">cmdargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester-1367"><a href="#Pytester-1367"><span class="linenos">1367</span></a>        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Pytester-1368"><a href="#Pytester-1368"><span class="linenos">1368</span></a>        <span class="n">stdin</span><span class="p">:</span> <span class="n">NotSetType</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">IO</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">CLOSE_STDIN</span><span class="p">,</span>
</span><span id="Pytester-1369"><a href="#Pytester-1369"><span class="linenos">1369</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester-1370"><a href="#Pytester-1370"><span class="linenos">1370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a command with arguments.</span>
</span><span id="Pytester-1371"><a href="#Pytester-1371"><span class="linenos">1371</span></a>
</span><span id="Pytester-1372"><a href="#Pytester-1372"><span class="linenos">1372</span></a><span class="sd">        Run a process using :py:class:`subprocess.Popen` saving the stdout and</span>
</span><span id="Pytester-1373"><a href="#Pytester-1373"><span class="linenos">1373</span></a><span class="sd">        stderr.</span>
</span><span id="Pytester-1374"><a href="#Pytester-1374"><span class="linenos">1374</span></a>
</span><span id="Pytester-1375"><a href="#Pytester-1375"><span class="linenos">1375</span></a><span class="sd">        :param cmdargs:</span>
</span><span id="Pytester-1376"><a href="#Pytester-1376"><span class="linenos">1376</span></a><span class="sd">            The sequence of arguments to pass to :py:class:`subprocess.Popen`,</span>
</span><span id="Pytester-1377"><a href="#Pytester-1377"><span class="linenos">1377</span></a><span class="sd">            with path-like objects being converted to :py:class:`str`</span>
</span><span id="Pytester-1378"><a href="#Pytester-1378"><span class="linenos">1378</span></a><span class="sd">            automatically.</span>
</span><span id="Pytester-1379"><a href="#Pytester-1379"><span class="linenos">1379</span></a><span class="sd">        :param timeout:</span>
</span><span id="Pytester-1380"><a href="#Pytester-1380"><span class="linenos">1380</span></a><span class="sd">            The period in seconds after which to timeout and raise</span>
</span><span id="Pytester-1381"><a href="#Pytester-1381"><span class="linenos">1381</span></a><span class="sd">            :py:class:`Pytester.TimeoutExpired`.</span>
</span><span id="Pytester-1382"><a href="#Pytester-1382"><span class="linenos">1382</span></a><span class="sd">        :param stdin:</span>
</span><span id="Pytester-1383"><a href="#Pytester-1383"><span class="linenos">1383</span></a><span class="sd">            Optional standard input.</span>
</span><span id="Pytester-1384"><a href="#Pytester-1384"><span class="linenos">1384</span></a>
</span><span id="Pytester-1385"><a href="#Pytester-1385"><span class="linenos">1385</span></a><span class="sd">            - If it is ``CLOSE_STDIN`` (Default), then this method calls</span>
</span><span id="Pytester-1386"><a href="#Pytester-1386"><span class="linenos">1386</span></a><span class="sd">              :py:class:`subprocess.Popen` with ``stdin=subprocess.PIPE``, and</span>
</span><span id="Pytester-1387"><a href="#Pytester-1387"><span class="linenos">1387</span></a><span class="sd">              the standard input is closed immediately after the new command is</span>
</span><span id="Pytester-1388"><a href="#Pytester-1388"><span class="linenos">1388</span></a><span class="sd">              started.</span>
</span><span id="Pytester-1389"><a href="#Pytester-1389"><span class="linenos">1389</span></a>
</span><span id="Pytester-1390"><a href="#Pytester-1390"><span class="linenos">1390</span></a><span class="sd">            - If it is of type :py:class:`bytes`, these bytes are sent to the</span>
</span><span id="Pytester-1391"><a href="#Pytester-1391"><span class="linenos">1391</span></a><span class="sd">              standard input of the command.</span>
</span><span id="Pytester-1392"><a href="#Pytester-1392"><span class="linenos">1392</span></a>
</span><span id="Pytester-1393"><a href="#Pytester-1393"><span class="linenos">1393</span></a><span class="sd">            - Otherwise, it is passed through to :py:class:`subprocess.Popen`.</span>
</span><span id="Pytester-1394"><a href="#Pytester-1394"><span class="linenos">1394</span></a><span class="sd">              For further information in this case, consult the document of the</span>
</span><span id="Pytester-1395"><a href="#Pytester-1395"><span class="linenos">1395</span></a><span class="sd">              ``stdin`` parameter in :py:class:`subprocess.Popen`.</span>
</span><span id="Pytester-1396"><a href="#Pytester-1396"><span class="linenos">1396</span></a><span class="sd">        :type stdin: _pytest.compat.NotSetType | bytes | IO[Any] | int</span>
</span><span id="Pytester-1397"><a href="#Pytester-1397"><span class="linenos">1397</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-1398"><a href="#Pytester-1398"><span class="linenos">1398</span></a><span class="sd">            The result.</span>
</span><span id="Pytester-1399"><a href="#Pytester-1399"><span class="linenos">1399</span></a>
</span><span id="Pytester-1400"><a href="#Pytester-1400"><span class="linenos">1400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1401"><a href="#Pytester-1401"><span class="linenos">1401</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Pytester-1402"><a href="#Pytester-1402"><span class="linenos">1402</span></a>
</span><span id="Pytester-1403"><a href="#Pytester-1403"><span class="linenos">1403</span></a>        <span class="n">cmdargs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">cmdargs</span><span class="p">)</span>
</span><span id="Pytester-1404"><a href="#Pytester-1404"><span class="linenos">1404</span></a>        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;stdout&quot;</span><span class="p">)</span>
</span><span id="Pytester-1405"><a href="#Pytester-1405"><span class="linenos">1405</span></a>        <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;stderr&quot;</span><span class="p">)</span>
</span><span id="Pytester-1406"><a href="#Pytester-1406"><span class="linenos">1406</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running:&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdargs</span><span class="p">)</span>
</span><span id="Pytester-1407"><a href="#Pytester-1407"><span class="linenos">1407</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;     in:&quot;</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">())</span>
</span><span id="Pytester-1408"><a href="#Pytester-1408"><span class="linenos">1408</span></a>
</span><span id="Pytester-1409"><a href="#Pytester-1409"><span class="linenos">1409</span></a>        <span class="k">with</span> <span class="n">p1</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f2</span><span class="p">:</span>
</span><span id="Pytester-1410"><a href="#Pytester-1410"><span class="linenos">1410</span></a>            <span class="n">now</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="Pytester-1411"><a href="#Pytester-1411"><span class="linenos">1411</span></a>            <span class="n">popen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span>
</span><span id="Pytester-1412"><a href="#Pytester-1412"><span class="linenos">1412</span></a>                <span class="n">cmdargs</span><span class="p">,</span>
</span><span id="Pytester-1413"><a href="#Pytester-1413"><span class="linenos">1413</span></a>                <span class="n">stdin</span><span class="o">=</span><span class="n">stdin</span><span class="p">,</span>
</span><span id="Pytester-1414"><a href="#Pytester-1414"><span class="linenos">1414</span></a>                <span class="n">stdout</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span>
</span><span id="Pytester-1415"><a href="#Pytester-1415"><span class="linenos">1415</span></a>                <span class="n">stderr</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span>
</span><span id="Pytester-1416"><a href="#Pytester-1416"><span class="linenos">1416</span></a>                <span class="n">close_fds</span><span class="o">=</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">!=</span> <span class="s2">&quot;win32&quot;</span><span class="p">),</span>
</span><span id="Pytester-1417"><a href="#Pytester-1417"><span class="linenos">1417</span></a>            <span class="p">)</span>
</span><span id="Pytester-1418"><a href="#Pytester-1418"><span class="linenos">1418</span></a>            <span class="k">if</span> <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-1419"><a href="#Pytester-1419"><span class="linenos">1419</span></a>                <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Pytester-1420"><a href="#Pytester-1420"><span class="linenos">1420</span></a>
</span><span id="Pytester-1421"><a href="#Pytester-1421"><span class="linenos">1421</span></a>            <span class="k">def</span><span class="w"> </span><span class="nf">handle_timeout</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-1422"><a href="#Pytester-1422"><span class="linenos">1422</span></a>                <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Pytester-1423"><a href="#Pytester-1423"><span class="linenos">1423</span></a>
</span><span id="Pytester-1424"><a href="#Pytester-1424"><span class="linenos">1424</span></a>                <span class="n">timeout_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timeout</span><span class="si">}</span><span class="s2"> second timeout expired running: </span><span class="si">{</span><span class="n">cmdargs</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester-1425"><a href="#Pytester-1425"><span class="linenos">1425</span></a>
</span><span id="Pytester-1426"><a href="#Pytester-1426"><span class="linenos">1426</span></a>                <span class="n">popen</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
</span><span id="Pytester-1427"><a href="#Pytester-1427"><span class="linenos">1427</span></a>                <span class="n">popen</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</span><span id="Pytester-1428"><a href="#Pytester-1428"><span class="linenos">1428</span></a>                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeoutExpired</span><span class="p">(</span><span class="n">timeout_message</span><span class="p">)</span>
</span><span id="Pytester-1429"><a href="#Pytester-1429"><span class="linenos">1429</span></a>
</span><span id="Pytester-1430"><a href="#Pytester-1430"><span class="linenos">1430</span></a>            <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester-1431"><a href="#Pytester-1431"><span class="linenos">1431</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="n">popen</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</span><span id="Pytester-1432"><a href="#Pytester-1432"><span class="linenos">1432</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester-1433"><a href="#Pytester-1433"><span class="linenos">1433</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester-1434"><a href="#Pytester-1434"><span class="linenos">1434</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">popen</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="Pytester-1435"><a href="#Pytester-1435"><span class="linenos">1435</span></a>                <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
</span><span id="Pytester-1436"><a href="#Pytester-1436"><span class="linenos">1436</span></a>                    <span class="n">handle_timeout</span><span class="p">()</span>
</span><span id="Pytester-1437"><a href="#Pytester-1437"><span class="linenos">1437</span></a>
</span><span id="Pytester-1438"><a href="#Pytester-1438"><span class="linenos">1438</span></a>        <span class="k">with</span> <span class="n">p1</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f2</span><span class="p">:</span>
</span><span id="Pytester-1439"><a href="#Pytester-1439"><span class="linenos">1439</span></a>            <span class="n">out</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="Pytester-1440"><a href="#Pytester-1440"><span class="linenos">1440</span></a>            <span class="n">err</span> <span class="o">=</span> <span class="n">f2</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="Pytester-1441"><a href="#Pytester-1441"><span class="linenos">1441</span></a>
</span><span id="Pytester-1442"><a href="#Pytester-1442"><span class="linenos">1442</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_lines</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span id="Pytester-1443"><a href="#Pytester-1443"><span class="linenos">1443</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_lines</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="Pytester-1444"><a href="#Pytester-1444"><span class="linenos">1444</span></a>
</span><span id="Pytester-1445"><a href="#Pytester-1445"><span class="linenos">1445</span></a>        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span><span id="Pytester-1446"><a href="#Pytester-1446"><span class="linenos">1446</span></a>            <span class="n">ret</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span><span id="Pytester-1447"><a href="#Pytester-1447"><span class="linenos">1447</span></a>        <span class="k">return</span> <span class="n">RunResult</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">now</span><span class="p">)</span>
</span><span id="Pytester-1448"><a href="#Pytester-1448"><span class="linenos">1448</span></a>
</span><span id="Pytester-1449"><a href="#Pytester-1449"><span class="linenos">1449</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_dump_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
</span><span id="Pytester-1450"><a href="#Pytester-1450"><span class="linenos">1450</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester-1451"><a href="#Pytester-1451"><span class="linenos">1451</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="Pytester-1452"><a href="#Pytester-1452"><span class="linenos">1452</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">fp</span><span class="p">)</span>
</span><span id="Pytester-1453"><a href="#Pytester-1453"><span class="linenos">1453</span></a>        <span class="k">except</span> <span class="ne">UnicodeEncodeError</span><span class="p">:</span>
</span><span id="Pytester-1454"><a href="#Pytester-1454"><span class="linenos">1454</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;couldn&#39;t print to </span><span class="si">{</span><span class="n">fp</span><span class="si">}</span><span class="s2"> because of encoding&quot;</span><span class="p">)</span>
</span><span id="Pytester-1455"><a href="#Pytester-1455"><span class="linenos">1455</span></a>
</span><span id="Pytester-1456"><a href="#Pytester-1456"><span class="linenos">1456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getpytestargs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="Pytester-1457"><a href="#Pytester-1457"><span class="linenos">1457</span></a>        <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s2">&quot;-mpytest&quot;</span>
</span><span id="Pytester-1458"><a href="#Pytester-1458"><span class="linenos">1458</span></a>
</span><span id="Pytester-1459"><a href="#Pytester-1459"><span class="linenos">1459</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester-1460"><a href="#Pytester-1460"><span class="linenos">1460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a python script using sys.executable as interpreter.&quot;&quot;&quot;</span>
</span><span id="Pytester-1461"><a href="#Pytester-1461"><span class="linenos">1461</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="n">script</span><span class="p">)</span>
</span><span id="Pytester-1462"><a href="#Pytester-1462"><span class="linenos">1462</span></a>
</span><span id="Pytester-1463"><a href="#Pytester-1463"><span class="linenos">1463</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython_c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester-1464"><a href="#Pytester-1464"><span class="linenos">1464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run ``python -c &quot;command&quot;``.&quot;&quot;&quot;</span>
</span><span id="Pytester-1465"><a href="#Pytester-1465"><span class="linenos">1465</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>
</span><span id="Pytester-1466"><a href="#Pytester-1466"><span class="linenos">1466</span></a>
</span><span id="Pytester-1467"><a href="#Pytester-1467"><span class="linenos">1467</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_subprocess</span><span class="p">(</span>
</span><span id="Pytester-1468"><a href="#Pytester-1468"><span class="linenos">1468</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Pytester-1469"><a href="#Pytester-1469"><span class="linenos">1469</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester-1470"><a href="#Pytester-1470"><span class="linenos">1470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pytest as a subprocess with given arguments.</span>
</span><span id="Pytester-1471"><a href="#Pytester-1471"><span class="linenos">1471</span></a>
</span><span id="Pytester-1472"><a href="#Pytester-1472"><span class="linenos">1472</span></a><span class="sd">        Any plugins added to the :py:attr:`plugins` list will be added using the</span>
</span><span id="Pytester-1473"><a href="#Pytester-1473"><span class="linenos">1473</span></a><span class="sd">        ``-p`` command line option.  Additionally ``--basetemp`` is used to put</span>
</span><span id="Pytester-1474"><a href="#Pytester-1474"><span class="linenos">1474</span></a><span class="sd">        any temporary files and directories in a numbered directory prefixed</span>
</span><span id="Pytester-1475"><a href="#Pytester-1475"><span class="linenos">1475</span></a><span class="sd">        with &quot;runpytest-&quot; to not conflict with the normal numbered pytest</span>
</span><span id="Pytester-1476"><a href="#Pytester-1476"><span class="linenos">1476</span></a><span class="sd">        location for temporary files and directories.</span>
</span><span id="Pytester-1477"><a href="#Pytester-1477"><span class="linenos">1477</span></a>
</span><span id="Pytester-1478"><a href="#Pytester-1478"><span class="linenos">1478</span></a><span class="sd">        :param args:</span>
</span><span id="Pytester-1479"><a href="#Pytester-1479"><span class="linenos">1479</span></a><span class="sd">            The sequence of arguments to pass to the pytest subprocess.</span>
</span><span id="Pytester-1480"><a href="#Pytester-1480"><span class="linenos">1480</span></a><span class="sd">        :param timeout:</span>
</span><span id="Pytester-1481"><a href="#Pytester-1481"><span class="linenos">1481</span></a><span class="sd">            The period in seconds after which to timeout and raise</span>
</span><span id="Pytester-1482"><a href="#Pytester-1482"><span class="linenos">1482</span></a><span class="sd">            :py:class:`Pytester.TimeoutExpired`.</span>
</span><span id="Pytester-1483"><a href="#Pytester-1483"><span class="linenos">1483</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester-1484"><a href="#Pytester-1484"><span class="linenos">1484</span></a><span class="sd">            The result.</span>
</span><span id="Pytester-1485"><a href="#Pytester-1485"><span class="linenos">1485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1486"><a href="#Pytester-1486"><span class="linenos">1486</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Pytester-1487"><a href="#Pytester-1487"><span class="linenos">1487</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">make_numbered_dir</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;runpytest-&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="Pytester-1488"><a href="#Pytester-1488"><span class="linenos">1488</span></a>        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--basetemp=</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1489"><a href="#Pytester-1489"><span class="linenos">1489</span></a>        <span class="n">plugins</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]</span>
</span><span id="Pytester-1490"><a href="#Pytester-1490"><span class="linenos">1490</span></a>        <span class="k">if</span> <span class="n">plugins</span><span class="p">:</span>
</span><span id="Pytester-1491"><a href="#Pytester-1491"><span class="linenos">1491</span></a>            <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">plugins</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester-1492"><a href="#Pytester-1492"><span class="linenos">1492</span></a>        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getpytestargs</span><span class="p">()</span> <span class="o">+</span> <span class="n">args</span>
</span><span id="Pytester-1493"><a href="#Pytester-1493"><span class="linenos">1493</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="Pytester-1494"><a href="#Pytester-1494"><span class="linenos">1494</span></a>
</span><span id="Pytester-1495"><a href="#Pytester-1495"><span class="linenos">1495</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn_pytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Pytester-1496"><a href="#Pytester-1496"><span class="linenos">1496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pytest using pexpect.</span>
</span><span id="Pytester-1497"><a href="#Pytester-1497"><span class="linenos">1497</span></a>
</span><span id="Pytester-1498"><a href="#Pytester-1498"><span class="linenos">1498</span></a><span class="sd">        This makes sure to use the right pytest and sets up the temporary</span>
</span><span id="Pytester-1499"><a href="#Pytester-1499"><span class="linenos">1499</span></a><span class="sd">        directory locations.</span>
</span><span id="Pytester-1500"><a href="#Pytester-1500"><span class="linenos">1500</span></a>
</span><span id="Pytester-1501"><a href="#Pytester-1501"><span class="linenos">1501</span></a><span class="sd">        The pexpect child is returned.</span>
</span><span id="Pytester-1502"><a href="#Pytester-1502"><span class="linenos">1502</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1503"><a href="#Pytester-1503"><span class="linenos">1503</span></a>        <span class="n">basetemp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;temp-pexpect&quot;</span>
</span><span id="Pytester-1504"><a href="#Pytester-1504"><span class="linenos">1504</span></a>        <span class="n">basetemp</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="Pytester-1505"><a href="#Pytester-1505"><span class="linenos">1505</span></a>        <span class="n">invoke</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getpytestargs</span><span class="p">()))</span>
</span><span id="Pytester-1506"><a href="#Pytester-1506"><span class="linenos">1506</span></a>        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">invoke</span><span class="si">}</span><span class="s2"> --basetemp=</span><span class="si">{</span><span class="n">basetemp</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester-1507"><a href="#Pytester-1507"><span class="linenos">1507</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span><span id="Pytester-1508"><a href="#Pytester-1508"><span class="linenos">1508</span></a>
</span><span id="Pytester-1509"><a href="#Pytester-1509"><span class="linenos">1509</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Pytester-1510"><a href="#Pytester-1510"><span class="linenos">1510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a command using pexpect.</span>
</span><span id="Pytester-1511"><a href="#Pytester-1511"><span class="linenos">1511</span></a>
</span><span id="Pytester-1512"><a href="#Pytester-1512"><span class="linenos">1512</span></a><span class="sd">        The pexpect child is returned.</span>
</span><span id="Pytester-1513"><a href="#Pytester-1513"><span class="linenos">1513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester-1514"><a href="#Pytester-1514"><span class="linenos">1514</span></a>        <span class="n">pexpect</span> <span class="o">=</span> <span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;pexpect&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">)</span>
</span><span id="Pytester-1515"><a href="#Pytester-1515"><span class="linenos">1515</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s2">&quot;pypy_version_info&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;64&quot;</span> <span class="ow">in</span> <span class="n">platform</span><span class="o">.</span><span class="n">machine</span><span class="p">():</span>
</span><span id="Pytester-1516"><a href="#Pytester-1516"><span class="linenos">1516</span></a>            <span class="n">skip</span><span class="p">(</span><span class="s2">&quot;pypy-64 bit not supported&quot;</span><span class="p">)</span>
</span><span id="Pytester-1517"><a href="#Pytester-1517"><span class="linenos">1517</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pexpect</span><span class="p">,</span> <span class="s2">&quot;spawn&quot;</span><span class="p">):</span>
</span><span id="Pytester-1518"><a href="#Pytester-1518"><span class="linenos">1518</span></a>            <span class="n">skip</span><span class="p">(</span><span class="s2">&quot;pexpect.spawn not available&quot;</span><span class="p">)</span>
</span><span id="Pytester-1519"><a href="#Pytester-1519"><span class="linenos">1519</span></a>        <span class="n">logfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;spawn.out&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span>
</span><span id="Pytester-1520"><a href="#Pytester-1520"><span class="linenos">1520</span></a>
</span><span id="Pytester-1521"><a href="#Pytester-1521"><span class="linenos">1521</span></a>        <span class="n">child</span> <span class="o">=</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">logfile</span><span class="o">=</span><span class="n">logfile</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span><span id="Pytester-1522"><a href="#Pytester-1522"><span class="linenos">1522</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">logfile</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</span><span id="Pytester-1523"><a href="#Pytester-1523"><span class="linenos">1523</span></a>        <span class="k">return</span> <span class="n">child</span>
</span></pre></div>


            <div class="docstring"><p>Facilities to write tests/configuration files, execute pytest in isolation, and match
against expected output, perfect for black-box testing of pytest plugins.</p>

<p>It attempts to isolate the test run from external factors as much as possible, modifying
the current working directory to <code><a href="#Pytester.path">path</a></code> and environment variables during initialization.</p>
</div>


                            <div id="Pytester.__init__" class="classattr">
                                        <input id="Pytester.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Pytester</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">fixtures</span><span class="o">.</span><span class="n">FixtureRequest</span>,</span><span class="param">	<span class="n">tmp_path_factory</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">tmpdir</span><span class="o">.</span><span class="n">TempPathFactory</span>,</span><span class="param">	<span class="n">monkeypatch</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">monkeypatch</span><span class="o">.</span><span class="n">MonkeyPatch</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Pytester.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.__init__-664"><a href="#Pytester.__init__-664"><span class="linenos">664</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Pytester.__init__-665"><a href="#Pytester.__init__-665"><span class="linenos">665</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester.__init__-666"><a href="#Pytester.__init__-666"><span class="linenos">666</span></a>        <span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span><span class="p">,</span>
</span><span id="Pytester.__init__-667"><a href="#Pytester.__init__-667"><span class="linenos">667</span></a>        <span class="n">tmp_path_factory</span><span class="p">:</span> <span class="n">TempPathFactory</span><span class="p">,</span>
</span><span id="Pytester.__init__-668"><a href="#Pytester.__init__-668"><span class="linenos">668</span></a>        <span class="n">monkeypatch</span><span class="p">:</span> <span class="n">MonkeyPatch</span><span class="p">,</span>
</span><span id="Pytester.__init__-669"><a href="#Pytester.__init__-669"><span class="linenos">669</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Pytester.__init__-670"><a href="#Pytester.__init__-670"><span class="linenos">670</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Pytester.__init__-671"><a href="#Pytester.__init__-671"><span class="linenos">671</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.__init__-672"><a href="#Pytester.__init__-672"><span class="linenos">672</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Pytester.__init__-673"><a href="#Pytester.__init__-673"><span class="linenos">673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="n">request</span>
</span><span id="Pytester.__init__-674"><a href="#Pytester.__init__-674"><span class="linenos">674</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">:</span> <span class="n">WeakKeyDictionary</span><span class="p">[</span><span class="n">Collector</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Pytester.__init__-675"><a href="#Pytester.__init__-675"><span class="linenos">675</span></a>            <span class="n">WeakKeyDictionary</span><span class="p">()</span>
</span><span id="Pytester.__init__-676"><a href="#Pytester.__init__-676"><span class="linenos">676</span></a>        <span class="p">)</span>
</span><span id="Pytester.__init__-677"><a href="#Pytester.__init__-677"><span class="linenos">677</span></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
</span><span id="Pytester.__init__-678"><a href="#Pytester.__init__-678"><span class="linenos">678</span></a>            <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="Pytester.__init__-679"><a href="#Pytester.__init__-679"><span class="linenos">679</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.__init__-680"><a href="#Pytester.__init__-680"><span class="linenos">680</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span>
</span><span id="Pytester.__init__-681"><a href="#Pytester.__init__-681"><span class="linenos">681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Pytester.__init__-682"><a href="#Pytester.__init__-682"><span class="linenos">682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">tmp_path_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">numbered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester.__init__-683"><a href="#Pytester.__init__-683"><span class="linenos">683</span></a>        <span class="c1">#: A list of plugins to use with :py:meth:`parseconfig` and</span>
</span><span id="Pytester.__init__-684"><a href="#Pytester.__init__-684"><span class="linenos">684</span></a>        <span class="c1">#: :py:meth:`runpytest`.  Initially this is an empty list but plugins can</span>
</span><span id="Pytester.__init__-685"><a href="#Pytester.__init__-685"><span class="linenos">685</span></a>        <span class="c1">#: be added to the list.  The type of items to add to the list depends on</span>
</span><span id="Pytester.__init__-686"><a href="#Pytester.__init__-686"><span class="linenos">686</span></a>        <span class="c1">#: the method using them so refer to them for details.</span>
</span><span id="Pytester.__init__-687"><a href="#Pytester.__init__-687"><span class="linenos">687</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">_PluggyPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester.__init__-688"><a href="#Pytester.__init__-688"><span class="linenos">688</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sys_path_snapshot</span> <span class="o">=</span> <span class="n">SysPathsSnapshot</span><span class="p">()</span>
</span><span id="Pytester.__init__-689"><a href="#Pytester.__init__-689"><span class="linenos">689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sys_modules_snapshot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__take_sys_modules_snapshot</span><span class="p">()</span>
</span><span id="Pytester.__init__-690"><a href="#Pytester.__init__-690"><span class="linenos">690</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_finalize</span><span class="p">)</span>
</span><span id="Pytester.__init__-691"><a href="#Pytester.__init__-691"><span class="linenos">691</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--runpytest&quot;</span><span class="p">)</span>
</span><span id="Pytester.__init__-692"><a href="#Pytester.__init__-692"><span class="linenos">692</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_test_tmproot</span> <span class="o">=</span> <span class="n">tmp_path_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tmp-</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">numbered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester.__init__-693"><a href="#Pytester.__init__-693"><span class="linenos">693</span></a>
</span><span id="Pytester.__init__-694"><a href="#Pytester.__init__-694"><span class="linenos">694</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_monkeypatch</span> <span class="o">=</span> <span class="n">mp</span> <span class="o">=</span> <span class="n">monkeypatch</span>
</span><span id="Pytester.__init__-695"><a href="#Pytester.__init__-695"><span class="linenos">695</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chdir</span><span class="p">()</span>
</span><span id="Pytester.__init__-696"><a href="#Pytester.__init__-696"><span class="linenos">696</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;PYTEST_DEBUG_TEMPROOT&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_test_tmproot</span><span class="p">))</span>
</span><span id="Pytester.__init__-697"><a href="#Pytester.__init__-697"><span class="linenos">697</span></a>        <span class="c1"># Ensure no unexpected caching via tox.</span>
</span><span id="Pytester.__init__-698"><a href="#Pytester.__init__-698"><span class="linenos">698</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">delenv</span><span class="p">(</span><span class="s2">&quot;TOX_ENV_DIR&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Pytester.__init__-699"><a href="#Pytester.__init__-699"><span class="linenos">699</span></a>        <span class="c1"># Discard outer pytest options.</span>
</span><span id="Pytester.__init__-700"><a href="#Pytester.__init__-700"><span class="linenos">700</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">delenv</span><span class="p">(</span><span class="s2">&quot;PYTEST_ADDOPTS&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Pytester.__init__-701"><a href="#Pytester.__init__-701"><span class="linenos">701</span></a>        <span class="c1"># Ensure no user config is used.</span>
</span><span id="Pytester.__init__-702"><a href="#Pytester.__init__-702"><span class="linenos">702</span></a>        <span class="n">tmphome</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester.__init__-703"><a href="#Pytester.__init__-703"><span class="linenos">703</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;HOME&quot;</span><span class="p">,</span> <span class="n">tmphome</span><span class="p">)</span>
</span><span id="Pytester.__init__-704"><a href="#Pytester.__init__-704"><span class="linenos">704</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;USERPROFILE&quot;</span><span class="p">,</span> <span class="n">tmphome</span><span class="p">)</span>
</span><span id="Pytester.__init__-705"><a href="#Pytester.__init__-705"><span class="linenos">705</span></a>        <span class="c1"># Do not use colors for inner runs by default.</span>
</span><span id="Pytester.__init__-706"><a href="#Pytester.__init__-706"><span class="linenos">706</span></a>        <span class="n">mp</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;PY_COLORS&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Pytester.CLOSE_STDIN" class="classattr">
                                <div class="attr variable">
            <span class="name">CLOSE_STDIN</span><span class="annotation">: Final</span>        =
<span class="default_value">&lt;NotSetType.token: 0&gt;</span>

        
    </div>
    <a class="headerlink" href="#Pytester.CLOSE_STDIN"></a>
    
    

                            </div>
                            <div id="Pytester.plugins" class="classattr">
                                <div class="attr variable">
            <span class="name">plugins</span><span class="annotation">: list[str | object]</span>

        
    </div>
    <a class="headerlink" href="#Pytester.plugins"></a>
    
    

                            </div>
                            <div id="Pytester.path" class="classattr">
                                        <input id="Pytester.path-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">path</span><span class="annotation">: pathlib._local.Path</span>

                <label class="view-source-button" for="Pytester.path-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.path"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.path-708"><a href="#Pytester.path-708"><span class="linenos">708</span></a>    <span class="nd">@property</span>
</span><span id="Pytester.path-709"><a href="#Pytester.path-709"><span class="linenos">709</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.path-710"><a href="#Pytester.path-710"><span class="linenos">710</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporary directory path used to create files/run tests from, etc.&quot;&quot;&quot;</span>
</span><span id="Pytester.path-711"><a href="#Pytester.path-711"><span class="linenos">711</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>
</span></pre></div>


            <div class="docstring"><p>Temporary directory path used to create files/run tests from, etc.</p>
</div>


                            </div>
                            <div id="Pytester.make_hook_recorder" class="classattr">
                                        <input id="Pytester.make_hook_recorder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">make_hook_recorder</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">pluginmanager</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">PytestPluginManager</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">HookRecorder</span>:</span></span>

                <label class="view-source-button" for="Pytester.make_hook_recorder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.make_hook_recorder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.make_hook_recorder-739"><a href="#Pytester.make_hook_recorder-739"><span class="linenos">739</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">make_hook_recorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">:</span> <span class="n">PytestPluginManager</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Pytester.make_hook_recorder-740"><a href="#Pytester.make_hook_recorder-740"><span class="linenos">740</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new :class:`HookRecorder` for a :class:`PytestPluginManager`.&quot;&quot;&quot;</span>
</span><span id="Pytester.make_hook_recorder-741"><a href="#Pytester.make_hook_recorder-741"><span class="linenos">741</span></a>        <span class="n">pluginmanager</span><span class="o">.</span><span class="n">reprec</span> <span class="o">=</span> <span class="n">reprec</span> <span class="o">=</span> <span class="n">HookRecorder</span><span class="p">(</span><span class="n">pluginmanager</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="Pytester.make_hook_recorder-742"><a href="#Pytester.make_hook_recorder-742"><span class="linenos">742</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">reprec</span><span class="o">.</span><span class="n">finish_recording</span><span class="p">)</span>
</span><span id="Pytester.make_hook_recorder-743"><a href="#Pytester.make_hook_recorder-743"><span class="linenos">743</span></a>        <span class="k">return</span> <span class="n">reprec</span>
</span></pre></div>


            <div class="docstring"><p>Create a new <code><a href="#HookRecorder">HookRecorder</a></code> for a <code><a href="#PytestPluginManager">PytestPluginManager</a></code>.</p>
</div>


                            </div>
                            <div id="Pytester.chdir" class="classattr">
                                        <input id="Pytester.chdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Pytester.chdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.chdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.chdir-745"><a href="#Pytester.chdir-745"><span class="linenos">745</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.chdir-746"><a href="#Pytester.chdir-746"><span class="linenos">746</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cd into the temporary directory.</span>
</span><span id="Pytester.chdir-747"><a href="#Pytester.chdir-747"><span class="linenos">747</span></a>
</span><span id="Pytester.chdir-748"><a href="#Pytester.chdir-748"><span class="linenos">748</span></a><span class="sd">        This is done automatically upon instantiation.</span>
</span><span id="Pytester.chdir-749"><a href="#Pytester.chdir-749"><span class="linenos">749</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.chdir-750"><a href="#Pytester.chdir-750"><span class="linenos">750</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_monkeypatch</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Cd into the temporary directory.</p>

<p>This is done automatically upon instantiation.</p>
</div>


                            </div>
                            <div id="Pytester.makefile" class="classattr">
                                        <input id="Pytester.makefile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makefile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">ext</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.makefile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.makefile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.makefile-789"><a href="#Pytester.makefile-789"><span class="linenos">789</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.makefile-790"><a href="#Pytester.makefile-790"><span class="linenos">790</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Create new text file(s) in the test directory.</span>
</span><span id="Pytester.makefile-791"><a href="#Pytester.makefile-791"><span class="linenos">791</span></a>
</span><span id="Pytester.makefile-792"><a href="#Pytester.makefile-792"><span class="linenos">792</span></a><span class="sd">        :param ext:</span>
</span><span id="Pytester.makefile-793"><a href="#Pytester.makefile-793"><span class="linenos">793</span></a><span class="sd">            The extension the file(s) should use, including the dot, e.g. `.py`.</span>
</span><span id="Pytester.makefile-794"><a href="#Pytester.makefile-794"><span class="linenos">794</span></a><span class="sd">        :param args:</span>
</span><span id="Pytester.makefile-795"><a href="#Pytester.makefile-795"><span class="linenos">795</span></a><span class="sd">            All args are treated as strings and joined using newlines.</span>
</span><span id="Pytester.makefile-796"><a href="#Pytester.makefile-796"><span class="linenos">796</span></a><span class="sd">            The result is written as contents to the file.  The name of the</span>
</span><span id="Pytester.makefile-797"><a href="#Pytester.makefile-797"><span class="linenos">797</span></a><span class="sd">            file is based on the test function requesting this fixture.</span>
</span><span id="Pytester.makefile-798"><a href="#Pytester.makefile-798"><span class="linenos">798</span></a><span class="sd">        :param kwargs:</span>
</span><span id="Pytester.makefile-799"><a href="#Pytester.makefile-799"><span class="linenos">799</span></a><span class="sd">            Each keyword is the name of a file, while the value of it will</span>
</span><span id="Pytester.makefile-800"><a href="#Pytester.makefile-800"><span class="linenos">800</span></a><span class="sd">            be written as contents of the file.</span>
</span><span id="Pytester.makefile-801"><a href="#Pytester.makefile-801"><span class="linenos">801</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.makefile-802"><a href="#Pytester.makefile-802"><span class="linenos">802</span></a><span class="sd">            The first created file.</span>
</span><span id="Pytester.makefile-803"><a href="#Pytester.makefile-803"><span class="linenos">803</span></a>
</span><span id="Pytester.makefile-804"><a href="#Pytester.makefile-804"><span class="linenos">804</span></a><span class="sd">        Examples:</span>
</span><span id="Pytester.makefile-805"><a href="#Pytester.makefile-805"><span class="linenos">805</span></a>
</span><span id="Pytester.makefile-806"><a href="#Pytester.makefile-806"><span class="linenos">806</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester.makefile-807"><a href="#Pytester.makefile-807"><span class="linenos">807</span></a>
</span><span id="Pytester.makefile-808"><a href="#Pytester.makefile-808"><span class="linenos">808</span></a><span class="sd">            pytester.makefile(&quot;.txt&quot;, &quot;line1&quot;, &quot;line2&quot;)</span>
</span><span id="Pytester.makefile-809"><a href="#Pytester.makefile-809"><span class="linenos">809</span></a>
</span><span id="Pytester.makefile-810"><a href="#Pytester.makefile-810"><span class="linenos">810</span></a><span class="sd">            pytester.makefile(&quot;.ini&quot;, pytest=&quot;[pytest]\naddopts=-rs\n&quot;)</span>
</span><span id="Pytester.makefile-811"><a href="#Pytester.makefile-811"><span class="linenos">811</span></a>
</span><span id="Pytester.makefile-812"><a href="#Pytester.makefile-812"><span class="linenos">812</span></a><span class="sd">        To create binary files, use :meth:`pathlib.Path.write_bytes` directly:</span>
</span><span id="Pytester.makefile-813"><a href="#Pytester.makefile-813"><span class="linenos">813</span></a>
</span><span id="Pytester.makefile-814"><a href="#Pytester.makefile-814"><span class="linenos">814</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester.makefile-815"><a href="#Pytester.makefile-815"><span class="linenos">815</span></a>
</span><span id="Pytester.makefile-816"><a href="#Pytester.makefile-816"><span class="linenos">816</span></a><span class="sd">            filename = pytester.path.joinpath(&quot;foo.bin&quot;)</span>
</span><span id="Pytester.makefile-817"><a href="#Pytester.makefile-817"><span class="linenos">817</span></a><span class="sd">            filename.write_bytes(b&quot;...&quot;)</span>
</span><span id="Pytester.makefile-818"><a href="#Pytester.makefile-818"><span class="linenos">818</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.makefile-819"><a href="#Pytester.makefile-819"><span class="linenos">819</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefile</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create new text file(s) in the test directory.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ext</strong>: 
The extension the file(s) should use, including the dot, e.g. <code>.py</code>.</li>
<li><strong>args</strong>: 
All args are treated as strings and joined using newlines.
The result is written as contents to the file.  The name of the
file is based on the test function requesting this fixture.</li>
<li><strong>kwargs</strong>: 
Each keyword is the name of a file, while the value of it will
be written as contents of the file.
:returns:
The first created file.</li>
</ul>

<p>Examples:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">)</span>

<span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="n">pytest</span><span class="o">=</span><span class="s2">&quot;[pytest]</span><span class="se">\n</span><span class="s2">addopts=-rs</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>To create binary files, use <code>pathlib.Path.write_bytes()</code> directly:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">filename</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;foo.bin&quot;</span><span class="p">)</span>
<span class="n">filename</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="Pytester.makeconftest" class="classattr">
                                        <input id="Pytester.makeconftest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makeconftest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.makeconftest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.makeconftest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.makeconftest-821"><a href="#Pytester.makeconftest-821"><span class="linenos">821</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeconftest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.makeconftest-822"><a href="#Pytester.makeconftest-822"><span class="linenos">822</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a conftest.py file.</span>
</span><span id="Pytester.makeconftest-823"><a href="#Pytester.makeconftest-823"><span class="linenos">823</span></a>
</span><span id="Pytester.makeconftest-824"><a href="#Pytester.makeconftest-824"><span class="linenos">824</span></a><span class="sd">        :param source: The contents.</span>
</span><span id="Pytester.makeconftest-825"><a href="#Pytester.makeconftest-825"><span class="linenos">825</span></a><span class="sd">        :returns: The conftest.py file.</span>
</span><span id="Pytester.makeconftest-826"><a href="#Pytester.makeconftest-826"><span class="linenos">826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.makeconftest-827"><a href="#Pytester.makeconftest-827"><span class="linenos">827</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">conftest</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Write a conftest.py file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>source</strong>:  The contents.
:returns: The conftest.py file.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.makeini" class="classattr">
                                        <input id="Pytester.makeini-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makeini</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.makeini-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.makeini"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.makeini-829"><a href="#Pytester.makeini-829"><span class="linenos">829</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.makeini-830"><a href="#Pytester.makeini-830"><span class="linenos">830</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a tox.ini file.</span>
</span><span id="Pytester.makeini-831"><a href="#Pytester.makeini-831"><span class="linenos">831</span></a>
</span><span id="Pytester.makeini-832"><a href="#Pytester.makeini-832"><span class="linenos">832</span></a><span class="sd">        :param source: The contents.</span>
</span><span id="Pytester.makeini-833"><a href="#Pytester.makeini-833"><span class="linenos">833</span></a><span class="sd">        :returns: The tox.ini file.</span>
</span><span id="Pytester.makeini-834"><a href="#Pytester.makeini-834"><span class="linenos">834</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.makeini-835"><a href="#Pytester.makeini-835"><span class="linenos">835</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="n">tox</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Write a tox.ini file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>source</strong>:  The contents.
:returns: The tox.ini file.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.getinicfg" class="classattr">
                                        <input id="Pytester.getinicfg-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getinicfg</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">iniconfig</span><span class="o">.</span><span class="n">SectionWrapper</span>:</span></span>

                <label class="view-source-button" for="Pytester.getinicfg-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.getinicfg"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.getinicfg-837"><a href="#Pytester.getinicfg-837"><span class="linenos">837</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getinicfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SectionWrapper</span><span class="p">:</span>
</span><span id="Pytester.getinicfg-838"><a href="#Pytester.getinicfg-838"><span class="linenos">838</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the pytest section from the tox.ini config file.&quot;&quot;&quot;</span>
</span><span id="Pytester.getinicfg-839"><a href="#Pytester.getinicfg-839"><span class="linenos">839</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeini</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester.getinicfg-840"><a href="#Pytester.getinicfg-840"><span class="linenos">840</span></a>        <span class="k">return</span> <span class="n">IniConfig</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">))[</span><span class="s2">&quot;pytest&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Return the pytest section from the tox.ini config file.</p>
</div>


                            </div>
                            <div id="Pytester.makepyprojecttoml" class="classattr">
                                        <input id="Pytester.makepyprojecttoml-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makepyprojecttoml</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.makepyprojecttoml-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.makepyprojecttoml"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.makepyprojecttoml-842"><a href="#Pytester.makepyprojecttoml-842"><span class="linenos">842</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyprojecttoml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.makepyprojecttoml-843"><a href="#Pytester.makepyprojecttoml-843"><span class="linenos">843</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a pyproject.toml file.</span>
</span><span id="Pytester.makepyprojecttoml-844"><a href="#Pytester.makepyprojecttoml-844"><span class="linenos">844</span></a>
</span><span id="Pytester.makepyprojecttoml-845"><a href="#Pytester.makepyprojecttoml-845"><span class="linenos">845</span></a><span class="sd">        :param source: The contents.</span>
</span><span id="Pytester.makepyprojecttoml-846"><a href="#Pytester.makepyprojecttoml-846"><span class="linenos">846</span></a><span class="sd">        :returns: The pyproject.ini file.</span>
</span><span id="Pytester.makepyprojecttoml-847"><a href="#Pytester.makepyprojecttoml-847"><span class="linenos">847</span></a>
</span><span id="Pytester.makepyprojecttoml-848"><a href="#Pytester.makepyprojecttoml-848"><span class="linenos">848</span></a><span class="sd">        .. versionadded:: 6.0</span>
</span><span id="Pytester.makepyprojecttoml-849"><a href="#Pytester.makepyprojecttoml-849"><span class="linenos">849</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.makepyprojecttoml-850"><a href="#Pytester.makepyprojecttoml-850"><span class="linenos">850</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.toml&quot;</span><span class="p">,</span> <span class="n">pyproject</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Write a pyproject.toml file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>source</strong>:  The contents.
:returns: The pyproject.ini file.</li>
</ul>

<p><em>New in version 6.0.</em></p>
</div>


                            </div>
                            <div id="Pytester.makepyfile" class="classattr">
                                        <input id="Pytester.makepyfile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makepyfile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.makepyfile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.makepyfile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.makepyfile-852"><a href="#Pytester.makepyfile-852"><span class="linenos">852</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.makepyfile-853"><a href="#Pytester.makepyfile-853"><span class="linenos">853</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Shortcut for .makefile() with a .py extension.</span>
</span><span id="Pytester.makepyfile-854"><a href="#Pytester.makepyfile-854"><span class="linenos">854</span></a>
</span><span id="Pytester.makepyfile-855"><a href="#Pytester.makepyfile-855"><span class="linenos">855</span></a><span class="sd">        Defaults to the test name with a &#39;.py&#39; extension, e.g test_foobar.py, overwriting</span>
</span><span id="Pytester.makepyfile-856"><a href="#Pytester.makepyfile-856"><span class="linenos">856</span></a><span class="sd">        existing files.</span>
</span><span id="Pytester.makepyfile-857"><a href="#Pytester.makepyfile-857"><span class="linenos">857</span></a>
</span><span id="Pytester.makepyfile-858"><a href="#Pytester.makepyfile-858"><span class="linenos">858</span></a><span class="sd">        Examples:</span>
</span><span id="Pytester.makepyfile-859"><a href="#Pytester.makepyfile-859"><span class="linenos">859</span></a>
</span><span id="Pytester.makepyfile-860"><a href="#Pytester.makepyfile-860"><span class="linenos">860</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester.makepyfile-861"><a href="#Pytester.makepyfile-861"><span class="linenos">861</span></a>
</span><span id="Pytester.makepyfile-862"><a href="#Pytester.makepyfile-862"><span class="linenos">862</span></a><span class="sd">            def test_something(pytester):</span>
</span><span id="Pytester.makepyfile-863"><a href="#Pytester.makepyfile-863"><span class="linenos">863</span></a><span class="sd">                # Initial file is created test_something.py.</span>
</span><span id="Pytester.makepyfile-864"><a href="#Pytester.makepyfile-864"><span class="linenos">864</span></a><span class="sd">                pytester.makepyfile(&quot;foobar&quot;)</span>
</span><span id="Pytester.makepyfile-865"><a href="#Pytester.makepyfile-865"><span class="linenos">865</span></a><span class="sd">                # To create multiple files, pass kwargs accordingly.</span>
</span><span id="Pytester.makepyfile-866"><a href="#Pytester.makepyfile-866"><span class="linenos">866</span></a><span class="sd">                pytester.makepyfile(custom=&quot;foobar&quot;)</span>
</span><span id="Pytester.makepyfile-867"><a href="#Pytester.makepyfile-867"><span class="linenos">867</span></a><span class="sd">                # At this point, both &#39;test_something.py&#39; &amp; &#39;custom.py&#39; exist in the test directory.</span>
</span><span id="Pytester.makepyfile-868"><a href="#Pytester.makepyfile-868"><span class="linenos">868</span></a>
</span><span id="Pytester.makepyfile-869"><a href="#Pytester.makepyfile-869"><span class="linenos">869</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.makepyfile-870"><a href="#Pytester.makepyfile-870"><span class="linenos">870</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefile</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Shortcut for .makefile() with a .py extension.</p>

<p>Defaults to the test name with a '.py' extension, e.g test_foobar.py, overwriting
existing files.</p>

<p>Examples:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.py.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.py&#39; &amp; &#39;custom.py&#39; exist in the test directory.</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="Pytester.maketxtfile" class="classattr">
                                        <input id="Pytester.maketxtfile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">maketxtfile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.maketxtfile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.maketxtfile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.maketxtfile-872"><a href="#Pytester.maketxtfile-872"><span class="linenos">872</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maketxtfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.maketxtfile-873"><a href="#Pytester.maketxtfile-873"><span class="linenos">873</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Shortcut for .makefile() with a .txt extension.</span>
</span><span id="Pytester.maketxtfile-874"><a href="#Pytester.maketxtfile-874"><span class="linenos">874</span></a>
</span><span id="Pytester.maketxtfile-875"><a href="#Pytester.maketxtfile-875"><span class="linenos">875</span></a><span class="sd">        Defaults to the test name with a &#39;.txt&#39; extension, e.g test_foobar.txt, overwriting</span>
</span><span id="Pytester.maketxtfile-876"><a href="#Pytester.maketxtfile-876"><span class="linenos">876</span></a><span class="sd">        existing files.</span>
</span><span id="Pytester.maketxtfile-877"><a href="#Pytester.maketxtfile-877"><span class="linenos">877</span></a>
</span><span id="Pytester.maketxtfile-878"><a href="#Pytester.maketxtfile-878"><span class="linenos">878</span></a><span class="sd">        Examples:</span>
</span><span id="Pytester.maketxtfile-879"><a href="#Pytester.maketxtfile-879"><span class="linenos">879</span></a>
</span><span id="Pytester.maketxtfile-880"><a href="#Pytester.maketxtfile-880"><span class="linenos">880</span></a><span class="sd">        .. code-block:: python</span>
</span><span id="Pytester.maketxtfile-881"><a href="#Pytester.maketxtfile-881"><span class="linenos">881</span></a>
</span><span id="Pytester.maketxtfile-882"><a href="#Pytester.maketxtfile-882"><span class="linenos">882</span></a><span class="sd">            def test_something(pytester):</span>
</span><span id="Pytester.maketxtfile-883"><a href="#Pytester.maketxtfile-883"><span class="linenos">883</span></a><span class="sd">                # Initial file is created test_something.txt.</span>
</span><span id="Pytester.maketxtfile-884"><a href="#Pytester.maketxtfile-884"><span class="linenos">884</span></a><span class="sd">                pytester.maketxtfile(&quot;foobar&quot;)</span>
</span><span id="Pytester.maketxtfile-885"><a href="#Pytester.maketxtfile-885"><span class="linenos">885</span></a><span class="sd">                # To create multiple files, pass kwargs accordingly.</span>
</span><span id="Pytester.maketxtfile-886"><a href="#Pytester.maketxtfile-886"><span class="linenos">886</span></a><span class="sd">                pytester.maketxtfile(custom=&quot;foobar&quot;)</span>
</span><span id="Pytester.maketxtfile-887"><a href="#Pytester.maketxtfile-887"><span class="linenos">887</span></a><span class="sd">                # At this point, both &#39;test_something.txt&#39; &amp; &#39;custom.txt&#39; exist in the test directory.</span>
</span><span id="Pytester.maketxtfile-888"><a href="#Pytester.maketxtfile-888"><span class="linenos">888</span></a>
</span><span id="Pytester.maketxtfile-889"><a href="#Pytester.maketxtfile-889"><span class="linenos">889</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.maketxtfile-890"><a href="#Pytester.maketxtfile-890"><span class="linenos">890</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefile</span><span class="p">(</span><span class="s2">&quot;.txt&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Shortcut for .makefile() with a .txt extension.</p>

<p>Defaults to the test name with a '.txt' extension, e.g test_foobar.txt, overwriting
existing files.</p>

<p>Examples:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.txt.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.txt&#39; &amp; &#39;custom.txt&#39; exist in the test directory.</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="Pytester.syspathinsert" class="classattr">
                                        <input id="Pytester.syspathinsert-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">syspathinsert</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Pytester.syspathinsert-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.syspathinsert"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.syspathinsert-892"><a href="#Pytester.syspathinsert-892"><span class="linenos">892</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">syspathinsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.syspathinsert-893"><a href="#Pytester.syspathinsert-893"><span class="linenos">893</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepend a directory to sys.path, defaults to :attr:`path`.</span>
</span><span id="Pytester.syspathinsert-894"><a href="#Pytester.syspathinsert-894"><span class="linenos">894</span></a>
</span><span id="Pytester.syspathinsert-895"><a href="#Pytester.syspathinsert-895"><span class="linenos">895</span></a><span class="sd">        This is undone automatically when this object dies at the end of each</span>
</span><span id="Pytester.syspathinsert-896"><a href="#Pytester.syspathinsert-896"><span class="linenos">896</span></a><span class="sd">        test.</span>
</span><span id="Pytester.syspathinsert-897"><a href="#Pytester.syspathinsert-897"><span class="linenos">897</span></a>
</span><span id="Pytester.syspathinsert-898"><a href="#Pytester.syspathinsert-898"><span class="linenos">898</span></a><span class="sd">        :param path:</span>
</span><span id="Pytester.syspathinsert-899"><a href="#Pytester.syspathinsert-899"><span class="linenos">899</span></a><span class="sd">            The path.</span>
</span><span id="Pytester.syspathinsert-900"><a href="#Pytester.syspathinsert-900"><span class="linenos">900</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.syspathinsert-901"><a href="#Pytester.syspathinsert-901"><span class="linenos">901</span></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.syspathinsert-902"><a href="#Pytester.syspathinsert-902"><span class="linenos">902</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
</span><span id="Pytester.syspathinsert-903"><a href="#Pytester.syspathinsert-903"><span class="linenos">903</span></a>
</span><span id="Pytester.syspathinsert-904"><a href="#Pytester.syspathinsert-904"><span class="linenos">904</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_monkeypatch</span><span class="o">.</span><span class="n">syspath_prepend</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Prepend a directory to sys.path, defaults to <code><a href="#Pytester.path">path</a></code>.</p>

<p>This is undone automatically when this object dies at the end of each
test.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>path</strong>: 
The path.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.mkdir" class="classattr">
                                        <input id="Pytester.mkdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mkdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.mkdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.mkdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.mkdir-906"><a href="#Pytester.mkdir-906"><span class="linenos">906</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.mkdir-907"><a href="#Pytester.mkdir-907"><span class="linenos">907</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new (sub)directory.</span>
</span><span id="Pytester.mkdir-908"><a href="#Pytester.mkdir-908"><span class="linenos">908</span></a>
</span><span id="Pytester.mkdir-909"><a href="#Pytester.mkdir-909"><span class="linenos">909</span></a><span class="sd">        :param name:</span>
</span><span id="Pytester.mkdir-910"><a href="#Pytester.mkdir-910"><span class="linenos">910</span></a><span class="sd">            The name of the directory, relative to the pytester path.</span>
</span><span id="Pytester.mkdir-911"><a href="#Pytester.mkdir-911"><span class="linenos">911</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.mkdir-912"><a href="#Pytester.mkdir-912"><span class="linenos">912</span></a><span class="sd">            The created directory.</span>
</span><span id="Pytester.mkdir-913"><a href="#Pytester.mkdir-913"><span class="linenos">913</span></a><span class="sd">        :rtype: pathlib.Path</span>
</span><span id="Pytester.mkdir-914"><a href="#Pytester.mkdir-914"><span class="linenos">914</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.mkdir-915"><a href="#Pytester.mkdir-915"><span class="linenos">915</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="n">name</span>
</span><span id="Pytester.mkdir-916"><a href="#Pytester.mkdir-916"><span class="linenos">916</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</span><span id="Pytester.mkdir-917"><a href="#Pytester.mkdir-917"><span class="linenos">917</span></a>        <span class="k">return</span> <span class="n">p</span>
</span></pre></div>


            <div class="docstring"><p>Create a new (sub)directory.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>: 
The name of the directory, relative to the pytester path.
:returns:
The created directory.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.mkpydir" class="classattr">
                                        <input id="Pytester.mkpydir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mkpydir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.mkpydir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.mkpydir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.mkpydir-919"><a href="#Pytester.mkpydir-919"><span class="linenos">919</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkpydir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.mkpydir-920"><a href="#Pytester.mkpydir-920"><span class="linenos">920</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new python package.</span>
</span><span id="Pytester.mkpydir-921"><a href="#Pytester.mkpydir-921"><span class="linenos">921</span></a>
</span><span id="Pytester.mkpydir-922"><a href="#Pytester.mkpydir-922"><span class="linenos">922</span></a><span class="sd">        This creates a (sub)directory with an empty ``__init__.py`` file so it</span>
</span><span id="Pytester.mkpydir-923"><a href="#Pytester.mkpydir-923"><span class="linenos">923</span></a><span class="sd">        gets recognised as a Python package.</span>
</span><span id="Pytester.mkpydir-924"><a href="#Pytester.mkpydir-924"><span class="linenos">924</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.mkpydir-925"><a href="#Pytester.mkpydir-925"><span class="linenos">925</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="n">name</span>
</span><span id="Pytester.mkpydir-926"><a href="#Pytester.mkpydir-926"><span class="linenos">926</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</span><span id="Pytester.mkpydir-927"><a href="#Pytester.mkpydir-927"><span class="linenos">927</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
</span><span id="Pytester.mkpydir-928"><a href="#Pytester.mkpydir-928"><span class="linenos">928</span></a>        <span class="k">return</span> <span class="n">p</span>
</span></pre></div>


            <div class="docstring"><p>Create a new python package.</p>

<p>This creates a (sub)directory with an empty <code>__init__.py</code> file so it
gets recognised as a Python package.</p>
</div>


                            </div>
                            <div id="Pytester.copy_example" class="classattr">
                                        <input id="Pytester.copy_example-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_example</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="Pytester.copy_example-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.copy_example"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.copy_example-930"><a href="#Pytester.copy_example-930"><span class="linenos">930</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_example</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Pytester.copy_example-931"><a href="#Pytester.copy_example-931"><span class="linenos">931</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Copy file from project&#39;s directory into the testdir.</span>
</span><span id="Pytester.copy_example-932"><a href="#Pytester.copy_example-932"><span class="linenos">932</span></a>
</span><span id="Pytester.copy_example-933"><a href="#Pytester.copy_example-933"><span class="linenos">933</span></a><span class="sd">        :param name:</span>
</span><span id="Pytester.copy_example-934"><a href="#Pytester.copy_example-934"><span class="linenos">934</span></a><span class="sd">            The name of the file to copy.</span>
</span><span id="Pytester.copy_example-935"><a href="#Pytester.copy_example-935"><span class="linenos">935</span></a><span class="sd">        :return:</span>
</span><span id="Pytester.copy_example-936"><a href="#Pytester.copy_example-936"><span class="linenos">936</span></a><span class="sd">            Path to the copied directory (inside ``self.path``).</span>
</span><span id="Pytester.copy_example-937"><a href="#Pytester.copy_example-937"><span class="linenos">937</span></a><span class="sd">        :rtype: pathlib.Path</span>
</span><span id="Pytester.copy_example-938"><a href="#Pytester.copy_example-938"><span class="linenos">938</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.copy_example-939"><a href="#Pytester.copy_example-939"><span class="linenos">939</span></a>        <span class="n">example_dir_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;pytester_example_dir&quot;</span><span class="p">)</span>
</span><span id="Pytester.copy_example-940"><a href="#Pytester.copy_example-940"><span class="linenos">940</span></a>        <span class="k">if</span> <span class="n">example_dir_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.copy_example-941"><a href="#Pytester.copy_example-941"><span class="linenos">941</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;pytester_example_dir is unset, can&#39;t copy examples&quot;</span><span class="p">)</span>
</span><span id="Pytester.copy_example-942"><a href="#Pytester.copy_example-942"><span class="linenos">942</span></a>        <span class="n">example_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span> <span class="o">/</span> <span class="n">example_dir_</span>
</span><span id="Pytester.copy_example-943"><a href="#Pytester.copy_example-943"><span class="linenos">943</span></a>
</span><span id="Pytester.copy_example-944"><a href="#Pytester.copy_example-944"><span class="linenos">944</span></a>        <span class="k">for</span> <span class="n">extra_element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">(</span><span class="s2">&quot;pytester_example_path&quot;</span><span class="p">):</span>
</span><span id="Pytester.copy_example-945"><a href="#Pytester.copy_example-945"><span class="linenos">945</span></a>            <span class="k">assert</span> <span class="n">extra_element</span><span class="o">.</span><span class="n">args</span>
</span><span id="Pytester.copy_example-946"><a href="#Pytester.copy_example-946"><span class="linenos">946</span></a>            <span class="n">example_dir</span> <span class="o">=</span> <span class="n">example_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="o">*</span><span class="n">extra_element</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.copy_example-947"><a href="#Pytester.copy_example-947"><span class="linenos">947</span></a>
</span><span id="Pytester.copy_example-948"><a href="#Pytester.copy_example-948"><span class="linenos">948</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.copy_example-949"><a href="#Pytester.copy_example-949"><span class="linenos">949</span></a>            <span class="n">func_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Pytester.copy_example-950"><a href="#Pytester.copy_example-950"><span class="linenos">950</span></a>            <span class="n">maybe_dir</span> <span class="o">=</span> <span class="n">example_dir</span> <span class="o">/</span> <span class="n">func_name</span>
</span><span id="Pytester.copy_example-951"><a href="#Pytester.copy_example-951"><span class="linenos">951</span></a>            <span class="n">maybe_file</span> <span class="o">=</span> <span class="n">example_dir</span> <span class="o">/</span> <span class="p">(</span><span class="n">func_name</span> <span class="o">+</span> <span class="s2">&quot;.py&quot;</span><span class="p">)</span>
</span><span id="Pytester.copy_example-952"><a href="#Pytester.copy_example-952"><span class="linenos">952</span></a>
</span><span id="Pytester.copy_example-953"><a href="#Pytester.copy_example-953"><span class="linenos">953</span></a>            <span class="k">if</span> <span class="n">maybe_dir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Pytester.copy_example-954"><a href="#Pytester.copy_example-954"><span class="linenos">954</span></a>                <span class="n">example_path</span> <span class="o">=</span> <span class="n">maybe_dir</span>
</span><span id="Pytester.copy_example-955"><a href="#Pytester.copy_example-955"><span class="linenos">955</span></a>            <span class="k">elif</span> <span class="n">maybe_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Pytester.copy_example-956"><a href="#Pytester.copy_example-956"><span class="linenos">956</span></a>                <span class="n">example_path</span> <span class="o">=</span> <span class="n">maybe_file</span>
</span><span id="Pytester.copy_example-957"><a href="#Pytester.copy_example-957"><span class="linenos">957</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.copy_example-958"><a href="#Pytester.copy_example-958"><span class="linenos">958</span></a>                <span class="k">raise</span> <span class="ne">LookupError</span><span class="p">(</span>
</span><span id="Pytester.copy_example-959"><a href="#Pytester.copy_example-959"><span class="linenos">959</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2"> can&#39;t be found as module or package in </span><span class="si">{</span><span class="n">example_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester.copy_example-960"><a href="#Pytester.copy_example-960"><span class="linenos">960</span></a>                <span class="p">)</span>
</span><span id="Pytester.copy_example-961"><a href="#Pytester.copy_example-961"><span class="linenos">961</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.copy_example-962"><a href="#Pytester.copy_example-962"><span class="linenos">962</span></a>            <span class="n">example_path</span> <span class="o">=</span> <span class="n">example_dir</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Pytester.copy_example-963"><a href="#Pytester.copy_example-963"><span class="linenos">963</span></a>
</span><span id="Pytester.copy_example-964"><a href="#Pytester.copy_example-964"><span class="linenos">964</span></a>        <span class="k">if</span> <span class="n">example_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">example_path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Pytester.copy_example-965"><a href="#Pytester.copy_example-965"><span class="linenos">965</span></a>            <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">symlinks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dirs_exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Pytester.copy_example-966"><a href="#Pytester.copy_example-966"><span class="linenos">966</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
</span><span id="Pytester.copy_example-967"><a href="#Pytester.copy_example-967"><span class="linenos">967</span></a>        <span class="k">elif</span> <span class="n">example_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Pytester.copy_example-968"><a href="#Pytester.copy_example-968"><span class="linenos">968</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">example_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="Pytester.copy_example-969"><a href="#Pytester.copy_example-969"><span class="linenos">969</span></a>            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</span><span id="Pytester.copy_example-970"><a href="#Pytester.copy_example-970"><span class="linenos">970</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="Pytester.copy_example-971"><a href="#Pytester.copy_example-971"><span class="linenos">971</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.copy_example-972"><a href="#Pytester.copy_example-972"><span class="linenos">972</span></a>            <span class="k">raise</span> <span class="ne">LookupError</span><span class="p">(</span>
</span><span id="Pytester.copy_example-973"><a href="#Pytester.copy_example-973"><span class="linenos">973</span></a>                <span class="sa">f</span><span class="s1">&#39;example &quot;</span><span class="si">{</span><span class="n">example_path</span><span class="si">}</span><span class="s1">&quot; is not found as a file or directory&#39;</span>
</span><span id="Pytester.copy_example-974"><a href="#Pytester.copy_example-974"><span class="linenos">974</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy file from project's directory into the testdir.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>: 
The name of the file to copy.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
<pre><code>Path to the copied directory (inside ``self.path``).
</code></pre>
</blockquote>
</div>


                            </div>
                            <div id="Pytester.getnode" class="classattr">
                                        <input id="Pytester.getnode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getnode</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span>:</span></span>

                <label class="view-source-button" for="Pytester.getnode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.getnode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.getnode-976"><a href="#Pytester.getnode-976"><span class="linenos">976</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Collector</span> <span class="o">|</span> <span class="n">Item</span><span class="p">:</span>
</span><span id="Pytester.getnode-977"><a href="#Pytester.getnode-977"><span class="linenos">977</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the collection node of a file.</span>
</span><span id="Pytester.getnode-978"><a href="#Pytester.getnode-978"><span class="linenos">978</span></a>
</span><span id="Pytester.getnode-979"><a href="#Pytester.getnode-979"><span class="linenos">979</span></a><span class="sd">        :param config:</span>
</span><span id="Pytester.getnode-980"><a href="#Pytester.getnode-980"><span class="linenos">980</span></a><span class="sd">           A pytest config.</span>
</span><span id="Pytester.getnode-981"><a href="#Pytester.getnode-981"><span class="linenos">981</span></a><span class="sd">           See :py:meth:`parseconfig` and :py:meth:`parseconfigure` for creating it.</span>
</span><span id="Pytester.getnode-982"><a href="#Pytester.getnode-982"><span class="linenos">982</span></a><span class="sd">        :param arg:</span>
</span><span id="Pytester.getnode-983"><a href="#Pytester.getnode-983"><span class="linenos">983</span></a><span class="sd">            Path to the file.</span>
</span><span id="Pytester.getnode-984"><a href="#Pytester.getnode-984"><span class="linenos">984</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.getnode-985"><a href="#Pytester.getnode-985"><span class="linenos">985</span></a><span class="sd">            The node.</span>
</span><span id="Pytester.getnode-986"><a href="#Pytester.getnode-986"><span class="linenos">986</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.getnode-987"><a href="#Pytester.getnode-987"><span class="linenos">987</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="Pytester.getnode-988"><a href="#Pytester.getnode-988"><span class="linenos">988</span></a>        <span class="k">assert</span> <span class="s2">&quot;::&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="Pytester.getnode-989"><a href="#Pytester.getnode-989"><span class="linenos">989</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span><span id="Pytester.getnode-990"><a href="#Pytester.getnode-990"><span class="linenos">990</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionstart</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</span><span id="Pytester.getnode-991"><a href="#Pytester.getnode-991"><span class="linenos">991</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">perform_collect</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)],</span> <span class="n">genitems</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Pytester.getnode-992"><a href="#Pytester.getnode-992"><span class="linenos">992</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionfinish</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">exitstatus</span><span class="o">=</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
</span><span id="Pytester.getnode-993"><a href="#Pytester.getnode-993"><span class="linenos">993</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Get the collection node of a file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>config</strong>: 
A pytest config.
See <code><a href="#Pytester.parseconfig">parseconfig()</a></code> and <code><a href="#Pytester.parseconfigure">parseconfigure()</a></code> for creating it.</li>
<li><strong>arg</strong>: 
Path to the file.
:returns:
The node.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.getpathnode" class="classattr">
                                        <input id="Pytester.getpathnode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getpathnode</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span>:</span></span>

                <label class="view-source-button" for="Pytester.getpathnode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.getpathnode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.getpathnode-995"><a href="#Pytester.getpathnode-995"><span class="linenos"> 995</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getpathnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Collector</span> <span class="o">|</span> <span class="n">Item</span><span class="p">:</span>
</span><span id="Pytester.getpathnode-996"><a href="#Pytester.getpathnode-996"><span class="linenos"> 996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the collection node of a file.</span>
</span><span id="Pytester.getpathnode-997"><a href="#Pytester.getpathnode-997"><span class="linenos"> 997</span></a>
</span><span id="Pytester.getpathnode-998"><a href="#Pytester.getpathnode-998"><span class="linenos"> 998</span></a><span class="sd">        This is like :py:meth:`getnode` but uses :py:meth:`parseconfigure` to</span>
</span><span id="Pytester.getpathnode-999"><a href="#Pytester.getpathnode-999"><span class="linenos"> 999</span></a><span class="sd">        create the (configured) pytest Config instance.</span>
</span><span id="Pytester.getpathnode-1000"><a href="#Pytester.getpathnode-1000"><span class="linenos">1000</span></a>
</span><span id="Pytester.getpathnode-1001"><a href="#Pytester.getpathnode-1001"><span class="linenos">1001</span></a><span class="sd">        :param path:</span>
</span><span id="Pytester.getpathnode-1002"><a href="#Pytester.getpathnode-1002"><span class="linenos">1002</span></a><span class="sd">            Path to the file.</span>
</span><span id="Pytester.getpathnode-1003"><a href="#Pytester.getpathnode-1003"><span class="linenos">1003</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.getpathnode-1004"><a href="#Pytester.getpathnode-1004"><span class="linenos">1004</span></a><span class="sd">            The node.</span>
</span><span id="Pytester.getpathnode-1005"><a href="#Pytester.getpathnode-1005"><span class="linenos">1005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.getpathnode-1006"><a href="#Pytester.getpathnode-1006"><span class="linenos">1006</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester.getpathnode-1007"><a href="#Pytester.getpathnode-1007"><span class="linenos">1007</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseconfigure</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Pytester.getpathnode-1008"><a href="#Pytester.getpathnode-1008"><span class="linenos">1008</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="Pytester.getpathnode-1009"><a href="#Pytester.getpathnode-1009"><span class="linenos">1009</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">bestrelpath</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Pytester.getpathnode-1010"><a href="#Pytester.getpathnode-1010"><span class="linenos">1010</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionstart</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</span><span id="Pytester.getpathnode-1011"><a href="#Pytester.getpathnode-1011"><span class="linenos">1011</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">perform_collect</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="n">genitems</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Pytester.getpathnode-1012"><a href="#Pytester.getpathnode-1012"><span class="linenos">1012</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_sessionfinish</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">exitstatus</span><span class="o">=</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
</span><span id="Pytester.getpathnode-1013"><a href="#Pytester.getpathnode-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Return the collection node of a file.</p>

<p>This is like <code><a href="#Pytester.getnode">getnode()</a></code> but uses <code><a href="#Pytester.parseconfigure">parseconfigure()</a></code> to
create the (configured) pytest Config instance.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>path</strong>: 
Path to the file.
:returns:
The node.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.genitems" class="classattr">
                                        <input id="Pytester.genitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genitems</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">colitems</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Pytester.genitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.genitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.genitems-1015"><a href="#Pytester.genitems-1015"><span class="linenos">1015</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colitems</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Pytester.genitems-1016"><a href="#Pytester.genitems-1016"><span class="linenos">1016</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate all test items from a collection node.</span>
</span><span id="Pytester.genitems-1017"><a href="#Pytester.genitems-1017"><span class="linenos">1017</span></a>
</span><span id="Pytester.genitems-1018"><a href="#Pytester.genitems-1018"><span class="linenos">1018</span></a><span class="sd">        This recurses into the collection node and returns a list of all the</span>
</span><span id="Pytester.genitems-1019"><a href="#Pytester.genitems-1019"><span class="linenos">1019</span></a><span class="sd">        test items contained within.</span>
</span><span id="Pytester.genitems-1020"><a href="#Pytester.genitems-1020"><span class="linenos">1020</span></a>
</span><span id="Pytester.genitems-1021"><a href="#Pytester.genitems-1021"><span class="linenos">1021</span></a><span class="sd">        :param colitems:</span>
</span><span id="Pytester.genitems-1022"><a href="#Pytester.genitems-1022"><span class="linenos">1022</span></a><span class="sd">            The collection nodes.</span>
</span><span id="Pytester.genitems-1023"><a href="#Pytester.genitems-1023"><span class="linenos">1023</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.genitems-1024"><a href="#Pytester.genitems-1024"><span class="linenos">1024</span></a><span class="sd">            The collected items.</span>
</span><span id="Pytester.genitems-1025"><a href="#Pytester.genitems-1025"><span class="linenos">1025</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.genitems-1026"><a href="#Pytester.genitems-1026"><span class="linenos">1026</span></a>        <span class="n">session</span> <span class="o">=</span> <span class="n">colitems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">session</span>
</span><span id="Pytester.genitems-1027"><a href="#Pytester.genitems-1027"><span class="linenos">1027</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester.genitems-1028"><a href="#Pytester.genitems-1028"><span class="linenos">1028</span></a>        <span class="k">for</span> <span class="n">colitem</span> <span class="ow">in</span> <span class="n">colitems</span><span class="p">:</span>
</span><span id="Pytester.genitems-1029"><a href="#Pytester.genitems-1029"><span class="linenos">1029</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">colitem</span><span class="p">))</span>
</span><span id="Pytester.genitems-1030"><a href="#Pytester.genitems-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Generate all test items from a collection node.</p>

<p>This recurses into the collection node and returns a list of all the
test items contained within.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>colitems</strong>: 
The collection nodes.
:returns:
The collected items.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.runitem" class="classattr">
                                        <input id="Pytester.runitem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runitem</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="Pytester.runitem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.runitem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.runitem-1032"><a href="#Pytester.runitem-1032"><span class="linenos">1032</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Pytester.runitem-1033"><a href="#Pytester.runitem-1033"><span class="linenos">1033</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the &quot;test_func&quot; Item.</span>
</span><span id="Pytester.runitem-1034"><a href="#Pytester.runitem-1034"><span class="linenos">1034</span></a>
</span><span id="Pytester.runitem-1035"><a href="#Pytester.runitem-1035"><span class="linenos">1035</span></a><span class="sd">        The calling test instance (class containing the test method) must</span>
</span><span id="Pytester.runitem-1036"><a href="#Pytester.runitem-1036"><span class="linenos">1036</span></a><span class="sd">        provide a ``.getrunner()`` method which should return a runner which</span>
</span><span id="Pytester.runitem-1037"><a href="#Pytester.runitem-1037"><span class="linenos">1037</span></a><span class="sd">        can run the test protocol for a single item, e.g.</span>
</span><span id="Pytester.runitem-1038"><a href="#Pytester.runitem-1038"><span class="linenos">1038</span></a><span class="sd">        ``_pytest.runner.runtestprotocol``.</span>
</span><span id="Pytester.runitem-1039"><a href="#Pytester.runitem-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.runitem-1040"><a href="#Pytester.runitem-1040"><span class="linenos">1040</span></a>        <span class="c1"># used from runner functional tests</span>
</span><span id="Pytester.runitem-1041"><a href="#Pytester.runitem-1041"><span class="linenos">1041</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getitem</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester.runitem-1042"><a href="#Pytester.runitem-1042"><span class="linenos">1042</span></a>        <span class="c1"># the test class where we are called from wants to provide the runner</span>
</span><span id="Pytester.runitem-1043"><a href="#Pytester.runitem-1043"><span class="linenos">1043</span></a>        <span class="n">testclassinstance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">instance</span>
</span><span id="Pytester.runitem-1044"><a href="#Pytester.runitem-1044"><span class="linenos">1044</span></a>        <span class="n">runner</span> <span class="o">=</span> <span class="n">testclassinstance</span><span class="o">.</span><span class="n">getrunner</span><span class="p">()</span>
</span><span id="Pytester.runitem-1045"><a href="#Pytester.runitem-1045"><span class="linenos">1045</span></a>        <span class="k">return</span> <span class="n">runner</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run the "test_func" Item.</p>

<p>The calling test instance (class containing the test method) must
provide a <code>.getrunner()</code> method which should return a runner which
can run the test protocol for a single item, e.g.
<code>_pytest.runner.runtestprotocol</code>.</p>
</div>


                            </div>
                            <div id="Pytester.inline_runsource" class="classattr">
                                        <input id="Pytester.inline_runsource-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inline_runsource</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">*</span><span class="n">cmdlineargs</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">HookRecorder</span>:</span></span>

                <label class="view-source-button" for="Pytester.inline_runsource-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.inline_runsource"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.inline_runsource-1047"><a href="#Pytester.inline_runsource-1047"><span class="linenos">1047</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_runsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdlineargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Pytester.inline_runsource-1048"><a href="#Pytester.inline_runsource-1048"><span class="linenos">1048</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a test module in process using ``pytest.main()``.</span>
</span><span id="Pytester.inline_runsource-1049"><a href="#Pytester.inline_runsource-1049"><span class="linenos">1049</span></a>
</span><span id="Pytester.inline_runsource-1050"><a href="#Pytester.inline_runsource-1050"><span class="linenos">1050</span></a><span class="sd">        This run writes &quot;source&quot; into a temporary file and runs</span>
</span><span id="Pytester.inline_runsource-1051"><a href="#Pytester.inline_runsource-1051"><span class="linenos">1051</span></a><span class="sd">        ``pytest.main()`` on it, returning a :py:class:`HookRecorder` instance</span>
</span><span id="Pytester.inline_runsource-1052"><a href="#Pytester.inline_runsource-1052"><span class="linenos">1052</span></a><span class="sd">        for the result.</span>
</span><span id="Pytester.inline_runsource-1053"><a href="#Pytester.inline_runsource-1053"><span class="linenos">1053</span></a>
</span><span id="Pytester.inline_runsource-1054"><a href="#Pytester.inline_runsource-1054"><span class="linenos">1054</span></a><span class="sd">        :param source: The source code of the test module.</span>
</span><span id="Pytester.inline_runsource-1055"><a href="#Pytester.inline_runsource-1055"><span class="linenos">1055</span></a><span class="sd">        :param cmdlineargs: Any extra command line arguments to use.</span>
</span><span id="Pytester.inline_runsource-1056"><a href="#Pytester.inline_runsource-1056"><span class="linenos">1056</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.inline_runsource-1057"><a href="#Pytester.inline_runsource-1057"><span class="linenos">1057</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester.inline_runsource-1058"><a href="#Pytester.inline_runsource-1058"><span class="linenos">1058</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">cmdlineargs</span><span class="p">),</span> <span class="n">p</span><span class="p">]</span>
</span><span id="Pytester.inline_runsource-1059"><a href="#Pytester.inline_runsource-1059"><span class="linenos">1059</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run a test module in process using <code><a href="#main">pytest.main()</a></code>.</p>

<p>This run writes "source" into a temporary file and runs
<code><a href="#main">pytest.main()</a></code> on it, returning a <code><a href="#HookRecorder">HookRecorder</a></code> instance
for the result.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>source</strong>:  The source code of the test module.</li>
<li><strong>cmdlineargs</strong>:  Any extra command line arguments to use.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.inline_genitems" class="classattr">
                                        <input id="Pytester.inline_genitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inline_genitems</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">],</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">HookRecorder</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Pytester.inline_genitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.inline_genitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.inline_genitems-1061"><a href="#Pytester.inline_genitems-1061"><span class="linenos">1061</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">],</span> <span class="n">HookRecorder</span><span class="p">]:</span>
</span><span id="Pytester.inline_genitems-1062"><a href="#Pytester.inline_genitems-1062"><span class="linenos">1062</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run ``pytest.main([&#39;--collect-only&#39;])`` in-process.</span>
</span><span id="Pytester.inline_genitems-1063"><a href="#Pytester.inline_genitems-1063"><span class="linenos">1063</span></a>
</span><span id="Pytester.inline_genitems-1064"><a href="#Pytester.inline_genitems-1064"><span class="linenos">1064</span></a><span class="sd">        Runs the :py:func:`pytest.main` function to run all of pytest inside</span>
</span><span id="Pytester.inline_genitems-1065"><a href="#Pytester.inline_genitems-1065"><span class="linenos">1065</span></a><span class="sd">        the test process itself like :py:meth:`inline_run`, but returns a</span>
</span><span id="Pytester.inline_genitems-1066"><a href="#Pytester.inline_genitems-1066"><span class="linenos">1066</span></a><span class="sd">        tuple of the collected items and a :py:class:`HookRecorder` instance.</span>
</span><span id="Pytester.inline_genitems-1067"><a href="#Pytester.inline_genitems-1067"><span class="linenos">1067</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.inline_genitems-1068"><a href="#Pytester.inline_genitems-1068"><span class="linenos">1068</span></a>        <span class="n">rec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span><span class="s2">&quot;--collect-only&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.inline_genitems-1069"><a href="#Pytester.inline_genitems-1069"><span class="linenos">1069</span></a>        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">item</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rec</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_itemcollected&quot;</span><span class="p">)]</span>
</span><span id="Pytester.inline_genitems-1070"><a href="#Pytester.inline_genitems-1070"><span class="linenos">1070</span></a>        <span class="k">return</span> <span class="n">items</span><span class="p">,</span> <span class="n">rec</span>
</span></pre></div>


            <div class="docstring"><p>Run <code><a href="#main">pytest.main</a>(['--collect-only'])</code> in-process.</p>

<p>Runs the <code><a href="#main">pytest.main()</a></code> function to run all of pytest inside
the test process itself like <code><a href="#Pytester.inline_run">inline_run()</a></code>, but returns a
tuple of the collected items and a <code><a href="#HookRecorder">HookRecorder</a></code> instance.</p>
</div>


                            </div>
                            <div id="Pytester.inline_run" class="classattr">
                                        <input id="Pytester.inline_run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inline_run</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">plugins</span><span class="o">=</span><span class="p">()</span>,</span><span class="param">	<span class="n">no_reraise_ctrlc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">HookRecorder</span>:</span></span>

                <label class="view-source-button" for="Pytester.inline_run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.inline_run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.inline_run-1072"><a href="#Pytester.inline_run-1072"><span class="linenos">1072</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_run</span><span class="p">(</span>
</span><span id="Pytester.inline_run-1073"><a href="#Pytester.inline_run-1073"><span class="linenos">1073</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester.inline_run-1074"><a href="#Pytester.inline_run-1074"><span class="linenos">1074</span></a>        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester.inline_run-1075"><a href="#Pytester.inline_run-1075"><span class="linenos">1075</span></a>        <span class="n">plugins</span><span class="o">=</span><span class="p">(),</span>
</span><span id="Pytester.inline_run-1076"><a href="#Pytester.inline_run-1076"><span class="linenos">1076</span></a>        <span class="n">no_reraise_ctrlc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Pytester.inline_run-1077"><a href="#Pytester.inline_run-1077"><span class="linenos">1077</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1078"><a href="#Pytester.inline_run-1078"><span class="linenos">1078</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run ``pytest.main()`` in-process, returning a HookRecorder.</span>
</span><span id="Pytester.inline_run-1079"><a href="#Pytester.inline_run-1079"><span class="linenos">1079</span></a>
</span><span id="Pytester.inline_run-1080"><a href="#Pytester.inline_run-1080"><span class="linenos">1080</span></a><span class="sd">        Runs the :py:func:`pytest.main` function to run all of pytest inside</span>
</span><span id="Pytester.inline_run-1081"><a href="#Pytester.inline_run-1081"><span class="linenos">1081</span></a><span class="sd">        the test process itself.  This means it can return a</span>
</span><span id="Pytester.inline_run-1082"><a href="#Pytester.inline_run-1082"><span class="linenos">1082</span></a><span class="sd">        :py:class:`HookRecorder` instance which gives more detailed results</span>
</span><span id="Pytester.inline_run-1083"><a href="#Pytester.inline_run-1083"><span class="linenos">1083</span></a><span class="sd">        from that run than can be done by matching stdout/stderr from</span>
</span><span id="Pytester.inline_run-1084"><a href="#Pytester.inline_run-1084"><span class="linenos">1084</span></a><span class="sd">        :py:meth:`runpytest`.</span>
</span><span id="Pytester.inline_run-1085"><a href="#Pytester.inline_run-1085"><span class="linenos">1085</span></a>
</span><span id="Pytester.inline_run-1086"><a href="#Pytester.inline_run-1086"><span class="linenos">1086</span></a><span class="sd">        :param args:</span>
</span><span id="Pytester.inline_run-1087"><a href="#Pytester.inline_run-1087"><span class="linenos">1087</span></a><span class="sd">            Command line arguments to pass to :py:func:`pytest.main`.</span>
</span><span id="Pytester.inline_run-1088"><a href="#Pytester.inline_run-1088"><span class="linenos">1088</span></a><span class="sd">        :param plugins:</span>
</span><span id="Pytester.inline_run-1089"><a href="#Pytester.inline_run-1089"><span class="linenos">1089</span></a><span class="sd">            Extra plugin instances the ``pytest.main()`` instance should use.</span>
</span><span id="Pytester.inline_run-1090"><a href="#Pytester.inline_run-1090"><span class="linenos">1090</span></a><span class="sd">        :param no_reraise_ctrlc:</span>
</span><span id="Pytester.inline_run-1091"><a href="#Pytester.inline_run-1091"><span class="linenos">1091</span></a><span class="sd">            Typically we reraise keyboard interrupts from the child run. If</span>
</span><span id="Pytester.inline_run-1092"><a href="#Pytester.inline_run-1092"><span class="linenos">1092</span></a><span class="sd">            True, the KeyboardInterrupt exception is captured.</span>
</span><span id="Pytester.inline_run-1093"><a href="#Pytester.inline_run-1093"><span class="linenos">1093</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.inline_run-1094"><a href="#Pytester.inline_run-1094"><span class="linenos">1094</span></a>        <span class="c1"># (maybe a cpython bug?) the importlib cache sometimes isn&#39;t updated</span>
</span><span id="Pytester.inline_run-1095"><a href="#Pytester.inline_run-1095"><span class="linenos">1095</span></a>        <span class="c1"># properly between file creation and inline_run (especially if imports</span>
</span><span id="Pytester.inline_run-1096"><a href="#Pytester.inline_run-1096"><span class="linenos">1096</span></a>        <span class="c1"># are interspersed with file creation)</span>
</span><span id="Pytester.inline_run-1097"><a href="#Pytester.inline_run-1097"><span class="linenos">1097</span></a>        <span class="n">importlib</span><span class="o">.</span><span class="n">invalidate_caches</span><span class="p">()</span>
</span><span id="Pytester.inline_run-1098"><a href="#Pytester.inline_run-1098"><span class="linenos">1098</span></a>
</span><span id="Pytester.inline_run-1099"><a href="#Pytester.inline_run-1099"><span class="linenos">1099</span></a>        <span class="n">plugins</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">plugins</span><span class="p">)</span>
</span><span id="Pytester.inline_run-1100"><a href="#Pytester.inline_run-1100"><span class="linenos">1100</span></a>        <span class="n">finalizers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester.inline_run-1101"><a href="#Pytester.inline_run-1101"><span class="linenos">1101</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1102"><a href="#Pytester.inline_run-1102"><span class="linenos">1102</span></a>            <span class="c1"># Any sys.module or sys.path changes done while running pytest</span>
</span><span id="Pytester.inline_run-1103"><a href="#Pytester.inline_run-1103"><span class="linenos">1103</span></a>            <span class="c1"># inline should be reverted after the test run completes to avoid</span>
</span><span id="Pytester.inline_run-1104"><a href="#Pytester.inline_run-1104"><span class="linenos">1104</span></a>            <span class="c1"># clashing with later inline tests run within the same pytest test,</span>
</span><span id="Pytester.inline_run-1105"><a href="#Pytester.inline_run-1105"><span class="linenos">1105</span></a>            <span class="c1"># e.g. just because they use matching test module names.</span>
</span><span id="Pytester.inline_run-1106"><a href="#Pytester.inline_run-1106"><span class="linenos">1106</span></a>            <span class="n">finalizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__take_sys_modules_snapshot</span><span class="p">()</span><span class="o">.</span><span class="n">restore</span><span class="p">)</span>
</span><span id="Pytester.inline_run-1107"><a href="#Pytester.inline_run-1107"><span class="linenos">1107</span></a>            <span class="n">finalizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SysPathsSnapshot</span><span class="p">()</span><span class="o">.</span><span class="n">restore</span><span class="p">)</span>
</span><span id="Pytester.inline_run-1108"><a href="#Pytester.inline_run-1108"><span class="linenos">1108</span></a>
</span><span id="Pytester.inline_run-1109"><a href="#Pytester.inline_run-1109"><span class="linenos">1109</span></a>            <span class="c1"># Important note:</span>
</span><span id="Pytester.inline_run-1110"><a href="#Pytester.inline_run-1110"><span class="linenos">1110</span></a>            <span class="c1"># - our tests should not leave any other references/registrations</span>
</span><span id="Pytester.inline_run-1111"><a href="#Pytester.inline_run-1111"><span class="linenos">1111</span></a>            <span class="c1">#   laying around other than possibly loaded test modules</span>
</span><span id="Pytester.inline_run-1112"><a href="#Pytester.inline_run-1112"><span class="linenos">1112</span></a>            <span class="c1">#   referenced from sys.modules, as nothing will clean those up</span>
</span><span id="Pytester.inline_run-1113"><a href="#Pytester.inline_run-1113"><span class="linenos">1113</span></a>            <span class="c1">#   automatically</span>
</span><span id="Pytester.inline_run-1114"><a href="#Pytester.inline_run-1114"><span class="linenos">1114</span></a>
</span><span id="Pytester.inline_run-1115"><a href="#Pytester.inline_run-1115"><span class="linenos">1115</span></a>            <span class="n">rec</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Pytester.inline_run-1116"><a href="#Pytester.inline_run-1116"><span class="linenos">1116</span></a>
</span><span id="Pytester.inline_run-1117"><a href="#Pytester.inline_run-1117"><span class="linenos">1117</span></a>            <span class="k">class</span><span class="w"> </span><span class="nc">Collect</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1118"><a href="#Pytester.inline_run-1118"><span class="linenos">1118</span></a>                <span class="k">def</span><span class="w"> </span><span class="nf">pytest_configure</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1119"><a href="#Pytester.inline_run-1119"><span class="linenos">1119</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_hook_recorder</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="p">))</span>
</span><span id="Pytester.inline_run-1120"><a href="#Pytester.inline_run-1120"><span class="linenos">1120</span></a>
</span><span id="Pytester.inline_run-1121"><a href="#Pytester.inline_run-1121"><span class="linenos">1121</span></a>            <span class="n">plugins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Collect</span><span class="p">())</span>
</span><span id="Pytester.inline_run-1122"><a href="#Pytester.inline_run-1122"><span class="linenos">1122</span></a>            <span class="n">ret</span> <span class="o">=</span> <span class="n">main</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="n">plugins</span><span class="p">)</span>
</span><span id="Pytester.inline_run-1123"><a href="#Pytester.inline_run-1123"><span class="linenos">1123</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1124"><a href="#Pytester.inline_run-1124"><span class="linenos">1124</span></a>                <span class="n">reprec</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Pytester.inline_run-1125"><a href="#Pytester.inline_run-1125"><span class="linenos">1125</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1126"><a href="#Pytester.inline_run-1126"><span class="linenos">1126</span></a>
</span><span id="Pytester.inline_run-1127"><a href="#Pytester.inline_run-1127"><span class="linenos">1127</span></a>                <span class="k">class</span><span class="w"> </span><span class="nc">reprec</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester.inline_run-1128"><a href="#Pytester.inline_run-1128"><span class="linenos">1128</span></a>                    <span class="k">pass</span>
</span><span id="Pytester.inline_run-1129"><a href="#Pytester.inline_run-1129"><span class="linenos">1129</span></a>
</span><span id="Pytester.inline_run-1130"><a href="#Pytester.inline_run-1130"><span class="linenos">1130</span></a>            <span class="n">reprec</span><span class="o">.</span><span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span>
</span><span id="Pytester.inline_run-1131"><a href="#Pytester.inline_run-1131"><span class="linenos">1131</span></a>
</span><span id="Pytester.inline_run-1132"><a href="#Pytester.inline_run-1132"><span class="linenos">1132</span></a>            <span class="c1"># Typically we reraise keyboard interrupts from the child run</span>
</span><span id="Pytester.inline_run-1133"><a href="#Pytester.inline_run-1133"><span class="linenos">1133</span></a>            <span class="c1"># because it&#39;s our user requesting interruption of the testing.</span>
</span><span id="Pytester.inline_run-1134"><a href="#Pytester.inline_run-1134"><span class="linenos">1134</span></a>            <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">ExitCode</span><span class="o">.</span><span class="n">INTERRUPTED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">no_reraise_ctrlc</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1135"><a href="#Pytester.inline_run-1135"><span class="linenos">1135</span></a>                <span class="n">calls</span> <span class="o">=</span> <span class="n">reprec</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_keyboard_interrupt&quot;</span><span class="p">)</span>
</span><span id="Pytester.inline_run-1136"><a href="#Pytester.inline_run-1136"><span class="linenos">1136</span></a>                <span class="k">if</span> <span class="n">calls</span> <span class="ow">and</span> <span class="n">calls</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">excinfo</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1137"><a href="#Pytester.inline_run-1137"><span class="linenos">1137</span></a>                    <span class="k">raise</span> <span class="ne">KeyboardInterrupt</span><span class="p">()</span>
</span><span id="Pytester.inline_run-1138"><a href="#Pytester.inline_run-1138"><span class="linenos">1138</span></a>            <span class="k">return</span> <span class="n">reprec</span>
</span><span id="Pytester.inline_run-1139"><a href="#Pytester.inline_run-1139"><span class="linenos">1139</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1140"><a href="#Pytester.inline_run-1140"><span class="linenos">1140</span></a>            <span class="k">for</span> <span class="n">finalizer</span> <span class="ow">in</span> <span class="n">finalizers</span><span class="p">:</span>
</span><span id="Pytester.inline_run-1141"><a href="#Pytester.inline_run-1141"><span class="linenos">1141</span></a>                <span class="n">finalizer</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Run <code><a href="#main">pytest.main()</a></code> in-process, returning a HookRecorder.</p>

<p>Runs the <code><a href="#main">pytest.main()</a></code> function to run all of pytest inside
the test process itself.  This means it can return a
<code><a href="#HookRecorder">HookRecorder</a></code> instance which gives more detailed results
from that run than can be done by matching stdout/stderr from
<code><a href="#Pytester.runpytest">runpytest()</a></code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>args</strong>: 
Command line arguments to pass to <code><a href="#main">pytest.main()</a></code>.</li>
<li><strong>plugins</strong>: 
Extra plugin instances the <code><a href="#main">pytest.main()</a></code> instance should use.</li>
<li><strong>no_reraise_ctrlc</strong>: 
Typically we reraise keyboard interrupts from the child run. If
True, the KeyboardInterrupt exception is captured.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.runpytest_inprocess" class="classattr">
                                        <input id="Pytester.runpytest_inprocess-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpytest_inprocess</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Pytester.runpytest_inprocess-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.runpytest_inprocess"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.runpytest_inprocess-1143"><a href="#Pytester.runpytest_inprocess-1143"><span class="linenos">1143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_inprocess</span><span class="p">(</span>
</span><span id="Pytester.runpytest_inprocess-1144"><a href="#Pytester.runpytest_inprocess-1144"><span class="linenos">1144</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="Pytester.runpytest_inprocess-1145"><a href="#Pytester.runpytest_inprocess-1145"><span class="linenos">1145</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1146"><a href="#Pytester.runpytest_inprocess-1146"><span class="linenos">1146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return result of running pytest in-process, providing a similar</span>
</span><span id="Pytester.runpytest_inprocess-1147"><a href="#Pytester.runpytest_inprocess-1147"><span class="linenos">1147</span></a><span class="sd">        interface to what self.runpytest() provides.&quot;&quot;&quot;</span>
</span><span id="Pytester.runpytest_inprocess-1148"><a href="#Pytester.runpytest_inprocess-1148"><span class="linenos">1148</span></a>        <span class="n">syspathinsert</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;syspathinsert&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1149"><a href="#Pytester.runpytest_inprocess-1149"><span class="linenos">1149</span></a>
</span><span id="Pytester.runpytest_inprocess-1150"><a href="#Pytester.runpytest_inprocess-1150"><span class="linenos">1150</span></a>        <span class="k">if</span> <span class="n">syspathinsert</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1151"><a href="#Pytester.runpytest_inprocess-1151"><span class="linenos">1151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">syspathinsert</span><span class="p">()</span>
</span><span id="Pytester.runpytest_inprocess-1152"><a href="#Pytester.runpytest_inprocess-1152"><span class="linenos">1152</span></a>        <span class="n">now</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="Pytester.runpytest_inprocess-1153"><a href="#Pytester.runpytest_inprocess-1153"><span class="linenos">1153</span></a>        <span class="n">capture</span> <span class="o">=</span> <span class="n">_get_multicapture</span><span class="p">(</span><span class="s2">&quot;sys&quot;</span><span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1154"><a href="#Pytester.runpytest_inprocess-1154"><span class="linenos">1154</span></a>        <span class="n">capture</span><span class="o">.</span><span class="n">start_capturing</span><span class="p">()</span>
</span><span id="Pytester.runpytest_inprocess-1155"><a href="#Pytester.runpytest_inprocess-1155"><span class="linenos">1155</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1156"><a href="#Pytester.runpytest_inprocess-1156"><span class="linenos">1156</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1157"><a href="#Pytester.runpytest_inprocess-1157"><span class="linenos">1157</span></a>                <span class="n">reprec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1158"><a href="#Pytester.runpytest_inprocess-1158"><span class="linenos">1158</span></a>            <span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1159"><a href="#Pytester.runpytest_inprocess-1159"><span class="linenos">1159</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Pytester.runpytest_inprocess-1160"><a href="#Pytester.runpytest_inprocess-1160"><span class="linenos">1160</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1161"><a href="#Pytester.runpytest_inprocess-1161"><span class="linenos">1161</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Pytester.runpytest_inprocess-1162"><a href="#Pytester.runpytest_inprocess-1162"><span class="linenos">1162</span></a>                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1163"><a href="#Pytester.runpytest_inprocess-1163"><span class="linenos">1163</span></a>                    <span class="k">pass</span>
</span><span id="Pytester.runpytest_inprocess-1164"><a href="#Pytester.runpytest_inprocess-1164"><span class="linenos">1164</span></a>
</span><span id="Pytester.runpytest_inprocess-1165"><a href="#Pytester.runpytest_inprocess-1165"><span class="linenos">1165</span></a>                <span class="k">class</span><span class="w"> </span><span class="nc">reprec</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester.runpytest_inprocess-1166"><a href="#Pytester.runpytest_inprocess-1166"><span class="linenos">1166</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span>
</span><span id="Pytester.runpytest_inprocess-1167"><a href="#Pytester.runpytest_inprocess-1167"><span class="linenos">1167</span></a>
</span><span id="Pytester.runpytest_inprocess-1168"><a href="#Pytester.runpytest_inprocess-1168"><span class="linenos">1168</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1169"><a href="#Pytester.runpytest_inprocess-1169"><span class="linenos">1169</span></a>                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span id="Pytester.runpytest_inprocess-1170"><a href="#Pytester.runpytest_inprocess-1170"><span class="linenos">1170</span></a>
</span><span id="Pytester.runpytest_inprocess-1171"><a href="#Pytester.runpytest_inprocess-1171"><span class="linenos">1171</span></a>                <span class="k">class</span><span class="w"> </span><span class="nc">reprec</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester.runpytest_inprocess-1172"><a href="#Pytester.runpytest_inprocess-1172"><span class="linenos">1172</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1173"><a href="#Pytester.runpytest_inprocess-1173"><span class="linenos">1173</span></a>
</span><span id="Pytester.runpytest_inprocess-1174"><a href="#Pytester.runpytest_inprocess-1174"><span class="linenos">1174</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Pytester.runpytest_inprocess-1175"><a href="#Pytester.runpytest_inprocess-1175"><span class="linenos">1175</span></a>            <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capture</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
</span><span id="Pytester.runpytest_inprocess-1176"><a href="#Pytester.runpytest_inprocess-1176"><span class="linenos">1176</span></a>            <span class="n">capture</span><span class="o">.</span><span class="n">stop_capturing</span><span class="p">()</span>
</span><span id="Pytester.runpytest_inprocess-1177"><a href="#Pytester.runpytest_inprocess-1177"><span class="linenos">1177</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1178"><a href="#Pytester.runpytest_inprocess-1178"><span class="linenos">1178</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1179"><a href="#Pytester.runpytest_inprocess-1179"><span class="linenos">1179</span></a>
</span><span id="Pytester.runpytest_inprocess-1180"><a href="#Pytester.runpytest_inprocess-1180"><span class="linenos">1180</span></a>        <span class="k">assert</span> <span class="n">reprec</span><span class="o">.</span><span class="n">ret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester.runpytest_inprocess-1181"><a href="#Pytester.runpytest_inprocess-1181"><span class="linenos">1181</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">RunResult</span><span class="p">(</span>
</span><span id="Pytester.runpytest_inprocess-1182"><a href="#Pytester.runpytest_inprocess-1182"><span class="linenos">1182</span></a>            <span class="n">reprec</span><span class="o">.</span><span class="n">ret</span><span class="p">,</span> <span class="n">out</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span> <span class="n">err</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">now</span>
</span><span id="Pytester.runpytest_inprocess-1183"><a href="#Pytester.runpytest_inprocess-1183"><span class="linenos">1183</span></a>        <span class="p">)</span>
</span><span id="Pytester.runpytest_inprocess-1184"><a href="#Pytester.runpytest_inprocess-1184"><span class="linenos">1184</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">reprec</span> <span class="o">=</span> <span class="n">reprec</span>  <span class="c1"># type: ignore</span>
</span><span id="Pytester.runpytest_inprocess-1185"><a href="#Pytester.runpytest_inprocess-1185"><span class="linenos">1185</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Return result of running pytest in-process, providing a similar
interface to what self.runpytest() provides.</p>
</div>


                            </div>
                            <div id="Pytester.runpytest" class="classattr">
                                        <input id="Pytester.runpytest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpytest</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Pytester.runpytest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.runpytest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.runpytest-1187"><a href="#Pytester.runpytest-1187"><span class="linenos">1187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester.runpytest-1188"><a href="#Pytester.runpytest-1188"><span class="linenos">1188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pytest inline or in a subprocess, depending on the command line</span>
</span><span id="Pytester.runpytest-1189"><a href="#Pytester.runpytest-1189"><span class="linenos">1189</span></a><span class="sd">        option &quot;--runpytest&quot; and return a :py:class:`~pytest.RunResult`.&quot;&quot;&quot;</span>
</span><span id="Pytester.runpytest-1190"><a href="#Pytester.runpytest-1190"><span class="linenos">1190</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_basetemp</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.runpytest-1191"><a href="#Pytester.runpytest-1191"><span class="linenos">1191</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">==</span> <span class="s2">&quot;inprocess&quot;</span><span class="p">:</span>
</span><span id="Pytester.runpytest-1192"><a href="#Pytester.runpytest-1192"><span class="linenos">1192</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">runpytest_inprocess</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester.runpytest-1193"><a href="#Pytester.runpytest-1193"><span class="linenos">1193</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">==</span> <span class="s2">&quot;subprocess&quot;</span><span class="p">:</span>
</span><span id="Pytester.runpytest-1194"><a href="#Pytester.runpytest-1194"><span class="linenos">1194</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">runpytest_subprocess</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Pytester.runpytest-1195"><a href="#Pytester.runpytest-1195"><span class="linenos">1195</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unrecognized runpytest option: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run pytest inline or in a subprocess, depending on the command line
option "--runpytest" and return a <code>~<a href="#RunResult">pytest.RunResult</a></code>.</p>
</div>


                            </div>
                            <div id="Pytester.parseconfig" class="classattr">
                                        <input id="Pytester.parseconfig-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parseconfig</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>:</span></span>

                <label class="view-source-button" for="Pytester.parseconfig-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.parseconfig"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.parseconfig-1210"><a href="#Pytester.parseconfig-1210"><span class="linenos">1210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Pytester.parseconfig-1211"><a href="#Pytester.parseconfig-1211"><span class="linenos">1211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new pytest :class:`pytest.Config` instance from given</span>
</span><span id="Pytester.parseconfig-1212"><a href="#Pytester.parseconfig-1212"><span class="linenos">1212</span></a><span class="sd">        commandline args.</span>
</span><span id="Pytester.parseconfig-1213"><a href="#Pytester.parseconfig-1213"><span class="linenos">1213</span></a>
</span><span id="Pytester.parseconfig-1214"><a href="#Pytester.parseconfig-1214"><span class="linenos">1214</span></a><span class="sd">        This invokes the pytest bootstrapping code in _pytest.config to create a</span>
</span><span id="Pytester.parseconfig-1215"><a href="#Pytester.parseconfig-1215"><span class="linenos">1215</span></a><span class="sd">        new :py:class:`pytest.PytestPluginManager` and call the</span>
</span><span id="Pytester.parseconfig-1216"><a href="#Pytester.parseconfig-1216"><span class="linenos">1216</span></a><span class="sd">        :hook:`pytest_cmdline_parse` hook to create a new :class:`pytest.Config`</span>
</span><span id="Pytester.parseconfig-1217"><a href="#Pytester.parseconfig-1217"><span class="linenos">1217</span></a><span class="sd">        instance.</span>
</span><span id="Pytester.parseconfig-1218"><a href="#Pytester.parseconfig-1218"><span class="linenos">1218</span></a>
</span><span id="Pytester.parseconfig-1219"><a href="#Pytester.parseconfig-1219"><span class="linenos">1219</span></a><span class="sd">        If :attr:`plugins` has been populated they should be plugin modules</span>
</span><span id="Pytester.parseconfig-1220"><a href="#Pytester.parseconfig-1220"><span class="linenos">1220</span></a><span class="sd">        to be registered with the plugin manager.</span>
</span><span id="Pytester.parseconfig-1221"><a href="#Pytester.parseconfig-1221"><span class="linenos">1221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.parseconfig-1222"><a href="#Pytester.parseconfig-1222"><span class="linenos">1222</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">_pytest.config</span>
</span><span id="Pytester.parseconfig-1223"><a href="#Pytester.parseconfig-1223"><span class="linenos">1223</span></a>
</span><span id="Pytester.parseconfig-1224"><a href="#Pytester.parseconfig-1224"><span class="linenos">1224</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_basetemp</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.parseconfig-1225"><a href="#Pytester.parseconfig-1225"><span class="linenos">1225</span></a>        <span class="n">new_args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">new_args</span><span class="p">]</span>
</span><span id="Pytester.parseconfig-1226"><a href="#Pytester.parseconfig-1226"><span class="linenos">1226</span></a>
</span><span id="Pytester.parseconfig-1227"><a href="#Pytester.parseconfig-1227"><span class="linenos">1227</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">_prepareconfig</span><span class="p">(</span><span class="n">new_args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="Pytester.parseconfig-1228"><a href="#Pytester.parseconfig-1228"><span class="linenos">1228</span></a>        <span class="c1"># we don&#39;t know what the test will do with this half-setup config</span>
</span><span id="Pytester.parseconfig-1229"><a href="#Pytester.parseconfig-1229"><span class="linenos">1229</span></a>        <span class="c1"># object and thus we make sure it gets unconfigured properly in any</span>
</span><span id="Pytester.parseconfig-1230"><a href="#Pytester.parseconfig-1230"><span class="linenos">1230</span></a>        <span class="c1"># case (otherwise capturing could still be active, for example)</span>
</span><span id="Pytester.parseconfig-1231"><a href="#Pytester.parseconfig-1231"><span class="linenos">1231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">_ensure_unconfigure</span><span class="p">)</span>
</span><span id="Pytester.parseconfig-1232"><a href="#Pytester.parseconfig-1232"><span class="linenos">1232</span></a>        <span class="k">return</span> <span class="n">config</span>
</span></pre></div>


            <div class="docstring"><p>Return a new pytest <code><a href="#Config">pytest.Config</a></code> instance from given
commandline args.</p>

<p>This invokes the pytest bootstrapping code in _pytest.config to create a
new <code><a href="#PytestPluginManager">pytest.PytestPluginManager</a></code> and call the
:hook:<code>pytest_cmdline_parse</code> hook to create a new <code><a href="#Config">pytest.Config</a></code>
instance.</p>

<p>If <code><a href="#Pytester.plugins">plugins</a></code> has been populated they should be plugin modules
to be registered with the plugin manager.</p>
</div>


                            </div>
                            <div id="Pytester.parseconfigure" class="classattr">
                                        <input id="Pytester.parseconfigure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parseconfigure</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>:</span></span>

                <label class="view-source-button" for="Pytester.parseconfigure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.parseconfigure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.parseconfigure-1234"><a href="#Pytester.parseconfigure-1234"><span class="linenos">1234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Pytester.parseconfigure-1235"><a href="#Pytester.parseconfigure-1235"><span class="linenos">1235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new pytest configured Config instance.</span>
</span><span id="Pytester.parseconfigure-1236"><a href="#Pytester.parseconfigure-1236"><span class="linenos">1236</span></a>
</span><span id="Pytester.parseconfigure-1237"><a href="#Pytester.parseconfigure-1237"><span class="linenos">1237</span></a><span class="sd">        Returns a new :py:class:`pytest.Config` instance like</span>
</span><span id="Pytester.parseconfigure-1238"><a href="#Pytester.parseconfigure-1238"><span class="linenos">1238</span></a><span class="sd">        :py:meth:`parseconfig`, but also calls the :hook:`pytest_configure`</span>
</span><span id="Pytester.parseconfigure-1239"><a href="#Pytester.parseconfigure-1239"><span class="linenos">1239</span></a><span class="sd">        hook.</span>
</span><span id="Pytester.parseconfigure-1240"><a href="#Pytester.parseconfigure-1240"><span class="linenos">1240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.parseconfigure-1241"><a href="#Pytester.parseconfigure-1241"><span class="linenos">1241</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseconfig</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.parseconfigure-1242"><a href="#Pytester.parseconfigure-1242"><span class="linenos">1242</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">_do_configure</span><span class="p">()</span>
</span><span id="Pytester.parseconfigure-1243"><a href="#Pytester.parseconfigure-1243"><span class="linenos">1243</span></a>        <span class="k">return</span> <span class="n">config</span>
</span></pre></div>


            <div class="docstring"><p>Return a new pytest configured Config instance.</p>

<p>Returns a new <code><a href="#Config">pytest.Config</a></code> instance like
<code><a href="#Pytester.parseconfig">parseconfig()</a></code>, but also calls the :hook:<code>pytest_configure</code>
hook.</p>
</div>


                            </div>
                            <div id="Pytester.getitem" class="classattr">
                                        <input id="Pytester.getitem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getitem</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">funcname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;test_func&#39;</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span>:</span></span>

                <label class="view-source-button" for="Pytester.getitem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.getitem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.getitem-1245"><a href="#Pytester.getitem-1245"><span class="linenos">1245</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitem</span><span class="p">(</span>
</span><span id="Pytester.getitem-1246"><a href="#Pytester.getitem-1246"><span class="linenos">1246</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">funcname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;test_func&quot;</span>
</span><span id="Pytester.getitem-1247"><a href="#Pytester.getitem-1247"><span class="linenos">1247</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span><span class="p">:</span>
</span><span id="Pytester.getitem-1248"><a href="#Pytester.getitem-1248"><span class="linenos">1248</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the test item for a test function.</span>
</span><span id="Pytester.getitem-1249"><a href="#Pytester.getitem-1249"><span class="linenos">1249</span></a>
</span><span id="Pytester.getitem-1250"><a href="#Pytester.getitem-1250"><span class="linenos">1250</span></a><span class="sd">        Writes the source to a python file and runs pytest&#39;s collection on</span>
</span><span id="Pytester.getitem-1251"><a href="#Pytester.getitem-1251"><span class="linenos">1251</span></a><span class="sd">        the resulting module, returning the test item for the requested</span>
</span><span id="Pytester.getitem-1252"><a href="#Pytester.getitem-1252"><span class="linenos">1252</span></a><span class="sd">        function name.</span>
</span><span id="Pytester.getitem-1253"><a href="#Pytester.getitem-1253"><span class="linenos">1253</span></a>
</span><span id="Pytester.getitem-1254"><a href="#Pytester.getitem-1254"><span class="linenos">1254</span></a><span class="sd">        :param source:</span>
</span><span id="Pytester.getitem-1255"><a href="#Pytester.getitem-1255"><span class="linenos">1255</span></a><span class="sd">            The module source.</span>
</span><span id="Pytester.getitem-1256"><a href="#Pytester.getitem-1256"><span class="linenos">1256</span></a><span class="sd">        :param funcname:</span>
</span><span id="Pytester.getitem-1257"><a href="#Pytester.getitem-1257"><span class="linenos">1257</span></a><span class="sd">            The name of the test function for which to return a test item.</span>
</span><span id="Pytester.getitem-1258"><a href="#Pytester.getitem-1258"><span class="linenos">1258</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.getitem-1259"><a href="#Pytester.getitem-1259"><span class="linenos">1259</span></a><span class="sd">            The test item.</span>
</span><span id="Pytester.getitem-1260"><a href="#Pytester.getitem-1260"><span class="linenos">1260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.getitem-1261"><a href="#Pytester.getitem-1261"><span class="linenos">1261</span></a>        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getitems</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester.getitem-1262"><a href="#Pytester.getitem-1262"><span class="linenos">1262</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
</span><span id="Pytester.getitem-1263"><a href="#Pytester.getitem-1263"><span class="linenos">1263</span></a>            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">funcname</span><span class="p">:</span>
</span><span id="Pytester.getitem-1264"><a href="#Pytester.getitem-1264"><span class="linenos">1264</span></a>                <span class="k">return</span> <span class="n">item</span>
</span><span id="Pytester.getitem-1265"><a href="#Pytester.getitem-1265"><span class="linenos">1265</span></a>        <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">funcname</span><span class="si">!r}</span><span class="s2"> item not found in module:</span><span class="se">\n</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="se">\n</span><span class="s2">items: </span><span class="si">{</span><span class="n">items</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Return the test item for a test function.</p>

<p>Writes the source to a python file and runs pytest's collection on
the resulting module, returning the test item for the requested
function name.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>source</strong>: 
The module source.</li>
<li><strong>funcname</strong>: 
The name of the test function for which to return a test item.
:returns:
The test item.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.getitems" class="classattr">
                                        <input id="Pytester.getitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getitems</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Pytester.getitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.getitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.getitems-1267"><a href="#Pytester.getitems-1267"><span class="linenos">1267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Pytester.getitems-1268"><a href="#Pytester.getitems-1268"><span class="linenos">1268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return all test items collected from the module.</span>
</span><span id="Pytester.getitems-1269"><a href="#Pytester.getitems-1269"><span class="linenos">1269</span></a>
</span><span id="Pytester.getitems-1270"><a href="#Pytester.getitems-1270"><span class="linenos">1270</span></a><span class="sd">        Writes the source to a Python file and runs pytest&#39;s collection on</span>
</span><span id="Pytester.getitems-1271"><a href="#Pytester.getitems-1271"><span class="linenos">1271</span></a><span class="sd">        the resulting module, returning all test items contained within.</span>
</span><span id="Pytester.getitems-1272"><a href="#Pytester.getitems-1272"><span class="linenos">1272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.getitems-1273"><a href="#Pytester.getitems-1273"><span class="linenos">1273</span></a>        <span class="n">modcol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getmodulecol</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester.getitems-1274"><a href="#Pytester.getitems-1274"><span class="linenos">1274</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">genitems</span><span class="p">([</span><span class="n">modcol</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Return all test items collected from the module.</p>

<p>Writes the source to a Python file and runs pytest's collection on
the resulting module, returning all test items contained within.</p>
</div>


                            </div>
                            <div id="Pytester.getmodulecol" class="classattr">
                                        <input id="Pytester.getmodulecol-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getmodulecol</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">configargs</span><span class="o">=</span><span class="p">()</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">withinit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Pytester.getmodulecol-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.getmodulecol"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.getmodulecol-1276"><a href="#Pytester.getmodulecol-1276"><span class="linenos">1276</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getmodulecol</span><span class="p">(</span>
</span><span id="Pytester.getmodulecol-1277"><a href="#Pytester.getmodulecol-1277"><span class="linenos">1277</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester.getmodulecol-1278"><a href="#Pytester.getmodulecol-1278"><span class="linenos">1278</span></a>        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester.getmodulecol-1279"><a href="#Pytester.getmodulecol-1279"><span class="linenos">1279</span></a>        <span class="n">configargs</span><span class="o">=</span><span class="p">(),</span>
</span><span id="Pytester.getmodulecol-1280"><a href="#Pytester.getmodulecol-1280"><span class="linenos">1280</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Pytester.getmodulecol-1281"><a href="#Pytester.getmodulecol-1281"><span class="linenos">1281</span></a>        <span class="n">withinit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Pytester.getmodulecol-1282"><a href="#Pytester.getmodulecol-1282"><span class="linenos">1282</span></a>    <span class="p">):</span>
</span><span id="Pytester.getmodulecol-1283"><a href="#Pytester.getmodulecol-1283"><span class="linenos">1283</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the module collection node for ``source``.</span>
</span><span id="Pytester.getmodulecol-1284"><a href="#Pytester.getmodulecol-1284"><span class="linenos">1284</span></a>
</span><span id="Pytester.getmodulecol-1285"><a href="#Pytester.getmodulecol-1285"><span class="linenos">1285</span></a><span class="sd">        Writes ``source`` to a file using :py:meth:`makepyfile` and then</span>
</span><span id="Pytester.getmodulecol-1286"><a href="#Pytester.getmodulecol-1286"><span class="linenos">1286</span></a><span class="sd">        runs the pytest collection on it, returning the collection node for the</span>
</span><span id="Pytester.getmodulecol-1287"><a href="#Pytester.getmodulecol-1287"><span class="linenos">1287</span></a><span class="sd">        test module.</span>
</span><span id="Pytester.getmodulecol-1288"><a href="#Pytester.getmodulecol-1288"><span class="linenos">1288</span></a>
</span><span id="Pytester.getmodulecol-1289"><a href="#Pytester.getmodulecol-1289"><span class="linenos">1289</span></a><span class="sd">        :param source:</span>
</span><span id="Pytester.getmodulecol-1290"><a href="#Pytester.getmodulecol-1290"><span class="linenos">1290</span></a><span class="sd">            The source code of the module to collect.</span>
</span><span id="Pytester.getmodulecol-1291"><a href="#Pytester.getmodulecol-1291"><span class="linenos">1291</span></a>
</span><span id="Pytester.getmodulecol-1292"><a href="#Pytester.getmodulecol-1292"><span class="linenos">1292</span></a><span class="sd">        :param configargs:</span>
</span><span id="Pytester.getmodulecol-1293"><a href="#Pytester.getmodulecol-1293"><span class="linenos">1293</span></a><span class="sd">            Any extra arguments to pass to :py:meth:`parseconfigure`.</span>
</span><span id="Pytester.getmodulecol-1294"><a href="#Pytester.getmodulecol-1294"><span class="linenos">1294</span></a>
</span><span id="Pytester.getmodulecol-1295"><a href="#Pytester.getmodulecol-1295"><span class="linenos">1295</span></a><span class="sd">        :param withinit:</span>
</span><span id="Pytester.getmodulecol-1296"><a href="#Pytester.getmodulecol-1296"><span class="linenos">1296</span></a><span class="sd">            Whether to also write an ``__init__.py`` file to the same</span>
</span><span id="Pytester.getmodulecol-1297"><a href="#Pytester.getmodulecol-1297"><span class="linenos">1297</span></a><span class="sd">            directory to ensure it is a package.</span>
</span><span id="Pytester.getmodulecol-1298"><a href="#Pytester.getmodulecol-1298"><span class="linenos">1298</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.getmodulecol-1299"><a href="#Pytester.getmodulecol-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">):</span>
</span><span id="Pytester.getmodulecol-1300"><a href="#Pytester.getmodulecol-1300"><span class="linenos">1300</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Pytester.getmodulecol-1301"><a href="#Pytester.getmodulecol-1301"><span class="linenos">1301</span></a>            <span class="k">assert</span> <span class="ow">not</span> <span class="n">withinit</span><span class="p">,</span> <span class="s2">&quot;not supported for paths&quot;</span>
</span><span id="Pytester.getmodulecol-1302"><a href="#Pytester.getmodulecol-1302"><span class="linenos">1302</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.getmodulecol-1303"><a href="#Pytester.getmodulecol-1303"><span class="linenos">1303</span></a>            <span class="n">kw</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">)}</span>
</span><span id="Pytester.getmodulecol-1304"><a href="#Pytester.getmodulecol-1304"><span class="linenos">1304</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Pytester.getmodulecol-1305"><a href="#Pytester.getmodulecol-1305"><span class="linenos">1305</span></a>        <span class="k">if</span> <span class="n">withinit</span><span class="p">:</span>
</span><span id="Pytester.getmodulecol-1306"><a href="#Pytester.getmodulecol-1306"><span class="linenos">1306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="fm">__init__</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
</span><span id="Pytester.getmodulecol-1307"><a href="#Pytester.getmodulecol-1307"><span class="linenos">1307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseconfigure</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="n">configargs</span><span class="p">)</span>
</span><span id="Pytester.getmodulecol-1308"><a href="#Pytester.getmodulecol-1308"><span class="linenos">1308</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getnode</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return the module collection node for <code>source</code>.</p>

<p>Writes <code>source</code> to a file using <code><a href="#Pytester.makepyfile">makepyfile()</a></code> and then
runs the pytest collection on it, returning the collection node for the
test module.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>source</strong>: 
The source code of the module to collect.</p></li>
<li><p><strong>configargs</strong>: 
Any extra arguments to pass to <code><a href="#Pytester.parseconfigure">parseconfigure()</a></code>.</p></li>
<li><p><strong>withinit</strong>: 
Whether to also write an <code>__init__.py</code> file to the same
directory to ensure it is a package.</p></li>
</ul>
</div>


                            </div>
                            <div id="Pytester.collect_by_name" class="classattr">
                                        <input id="Pytester.collect_by_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect_by_name</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">modcol</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Pytester.collect_by_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.collect_by_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.collect_by_name-1310"><a href="#Pytester.collect_by_name-1310"><span class="linenos">1310</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modcol</span><span class="p">:</span> <span class="n">Collector</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.collect_by_name-1311"><a href="#Pytester.collect_by_name-1311"><span class="linenos">1311</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the collection node for name from the module collection.</span>
</span><span id="Pytester.collect_by_name-1312"><a href="#Pytester.collect_by_name-1312"><span class="linenos">1312</span></a>
</span><span id="Pytester.collect_by_name-1313"><a href="#Pytester.collect_by_name-1313"><span class="linenos">1313</span></a><span class="sd">        Searches a module collection node for a collection node matching the</span>
</span><span id="Pytester.collect_by_name-1314"><a href="#Pytester.collect_by_name-1314"><span class="linenos">1314</span></a><span class="sd">        given name.</span>
</span><span id="Pytester.collect_by_name-1315"><a href="#Pytester.collect_by_name-1315"><span class="linenos">1315</span></a>
</span><span id="Pytester.collect_by_name-1316"><a href="#Pytester.collect_by_name-1316"><span class="linenos">1316</span></a><span class="sd">        :param modcol: A module collection node; see :py:meth:`getmodulecol`.</span>
</span><span id="Pytester.collect_by_name-1317"><a href="#Pytester.collect_by_name-1317"><span class="linenos">1317</span></a><span class="sd">        :param name: The name of the node to return.</span>
</span><span id="Pytester.collect_by_name-1318"><a href="#Pytester.collect_by_name-1318"><span class="linenos">1318</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.collect_by_name-1319"><a href="#Pytester.collect_by_name-1319"><span class="linenos">1319</span></a>        <span class="k">if</span> <span class="n">modcol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">:</span>
</span><span id="Pytester.collect_by_name-1320"><a href="#Pytester.collect_by_name-1320"><span class="linenos">1320</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">[</span><span class="n">modcol</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">modcol</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</span><span id="Pytester.collect_by_name-1321"><a href="#Pytester.collect_by_name-1321"><span class="linenos">1321</span></a>        <span class="k">for</span> <span class="n">colitem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mod_collections</span><span class="p">[</span><span class="n">modcol</span><span class="p">]:</span>
</span><span id="Pytester.collect_by_name-1322"><a href="#Pytester.collect_by_name-1322"><span class="linenos">1322</span></a>            <span class="k">if</span> <span class="n">colitem</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Pytester.collect_by_name-1323"><a href="#Pytester.collect_by_name-1323"><span class="linenos">1323</span></a>                <span class="k">return</span> <span class="n">colitem</span>
</span><span id="Pytester.collect_by_name-1324"><a href="#Pytester.collect_by_name-1324"><span class="linenos">1324</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Return the collection node for name from the module collection.</p>

<p>Searches a module collection node for a collection node matching the
given name.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>modcol</strong>:  A module collection node; see <code><a href="#Pytester.getmodulecol">getmodulecol()</a></code>.</li>
<li><strong>name</strong>:  The name of the node to return.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.popen" class="classattr">
                                        <input id="Pytester.popen-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">popen</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">cmdargs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">stdout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">TextIO</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>,</span><span class="param">	<span class="n">stderr</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">TextIO</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>,</span><span class="param">	<span class="n">stdin</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">NotSetType</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">IO</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">NotSetType</span><span class="o">.</span><span class="n">token</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span>,</span><span class="param">	<span class="o">**</span><span class="n">kw</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Pytester.popen-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.popen"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.popen-1326"><a href="#Pytester.popen-1326"><span class="linenos">1326</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">popen</span><span class="p">(</span>
</span><span id="Pytester.popen-1327"><a href="#Pytester.popen-1327"><span class="linenos">1327</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester.popen-1328"><a href="#Pytester.popen-1328"><span class="linenos">1328</span></a>        <span class="n">cmdargs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
</span><span id="Pytester.popen-1329"><a href="#Pytester.popen-1329"><span class="linenos">1329</span></a>        <span class="n">stdout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">TextIO</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Pytester.popen-1330"><a href="#Pytester.popen-1330"><span class="linenos">1330</span></a>        <span class="n">stderr</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">TextIO</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Pytester.popen-1331"><a href="#Pytester.popen-1331"><span class="linenos">1331</span></a>        <span class="n">stdin</span><span class="p">:</span> <span class="n">NotSetType</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">IO</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">CLOSE_STDIN</span><span class="p">,</span>
</span><span id="Pytester.popen-1332"><a href="#Pytester.popen-1332"><span class="linenos">1332</span></a>        <span class="o">**</span><span class="n">kw</span><span class="p">,</span>
</span><span id="Pytester.popen-1333"><a href="#Pytester.popen-1333"><span class="linenos">1333</span></a>    <span class="p">):</span>
</span><span id="Pytester.popen-1334"><a href="#Pytester.popen-1334"><span class="linenos">1334</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke :py:class:`subprocess.Popen`.</span>
</span><span id="Pytester.popen-1335"><a href="#Pytester.popen-1335"><span class="linenos">1335</span></a>
</span><span id="Pytester.popen-1336"><a href="#Pytester.popen-1336"><span class="linenos">1336</span></a><span class="sd">        Calls :py:class:`subprocess.Popen` making sure the current working</span>
</span><span id="Pytester.popen-1337"><a href="#Pytester.popen-1337"><span class="linenos">1337</span></a><span class="sd">        directory is in ``PYTHONPATH``.</span>
</span><span id="Pytester.popen-1338"><a href="#Pytester.popen-1338"><span class="linenos">1338</span></a>
</span><span id="Pytester.popen-1339"><a href="#Pytester.popen-1339"><span class="linenos">1339</span></a><span class="sd">        You probably want to use :py:meth:`run` instead.</span>
</span><span id="Pytester.popen-1340"><a href="#Pytester.popen-1340"><span class="linenos">1340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.popen-1341"><a href="#Pytester.popen-1341"><span class="linenos">1341</span></a>        <span class="n">env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Pytester.popen-1342"><a href="#Pytester.popen-1342"><span class="linenos">1342</span></a>        <span class="n">env</span><span class="p">[</span><span class="s2">&quot;PYTHONPATH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="Pytester.popen-1343"><a href="#Pytester.popen-1343"><span class="linenos">1343</span></a>            <span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">env</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTHONPATH&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)])</span>
</span><span id="Pytester.popen-1344"><a href="#Pytester.popen-1344"><span class="linenos">1344</span></a>        <span class="p">)</span>
</span><span id="Pytester.popen-1345"><a href="#Pytester.popen-1345"><span class="linenos">1345</span></a>        <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;env&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">env</span>
</span><span id="Pytester.popen-1346"><a href="#Pytester.popen-1346"><span class="linenos">1346</span></a>
</span><span id="Pytester.popen-1347"><a href="#Pytester.popen-1347"><span class="linenos">1347</span></a>        <span class="k">if</span> <span class="n">stdin</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">CLOSE_STDIN</span><span class="p">:</span>
</span><span id="Pytester.popen-1348"><a href="#Pytester.popen-1348"><span class="linenos">1348</span></a>            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;stdin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
</span><span id="Pytester.popen-1349"><a href="#Pytester.popen-1349"><span class="linenos">1349</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="Pytester.popen-1350"><a href="#Pytester.popen-1350"><span class="linenos">1350</span></a>            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;stdin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
</span><span id="Pytester.popen-1351"><a href="#Pytester.popen-1351"><span class="linenos">1351</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.popen-1352"><a href="#Pytester.popen-1352"><span class="linenos">1352</span></a>            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;stdin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stdin</span>
</span><span id="Pytester.popen-1353"><a href="#Pytester.popen-1353"><span class="linenos">1353</span></a>
</span><span id="Pytester.popen-1354"><a href="#Pytester.popen-1354"><span class="linenos">1354</span></a>        <span class="n">popen</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">stderr</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Pytester.popen-1355"><a href="#Pytester.popen-1355"><span class="linenos">1355</span></a>        <span class="k">if</span> <span class="n">stdin</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">CLOSE_STDIN</span><span class="p">:</span>
</span><span id="Pytester.popen-1356"><a href="#Pytester.popen-1356"><span class="linenos">1356</span></a>            <span class="k">assert</span> <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester.popen-1357"><a href="#Pytester.popen-1357"><span class="linenos">1357</span></a>            <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Pytester.popen-1358"><a href="#Pytester.popen-1358"><span class="linenos">1358</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="Pytester.popen-1359"><a href="#Pytester.popen-1359"><span class="linenos">1359</span></a>            <span class="k">assert</span> <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="Pytester.popen-1360"><a href="#Pytester.popen-1360"><span class="linenos">1360</span></a>            <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>
</span><span id="Pytester.popen-1361"><a href="#Pytester.popen-1361"><span class="linenos">1361</span></a>
</span><span id="Pytester.popen-1362"><a href="#Pytester.popen-1362"><span class="linenos">1362</span></a>        <span class="k">return</span> <span class="n">popen</span>
</span></pre></div>


            <div class="docstring"><p>Invoke <code>subprocess.Popen</code>.</p>

<p>Calls <code>subprocess.Popen</code> making sure the current working
directory is in <code>PYTHONPATH</code>.</p>

<p>You probably want to use <code><a href="#Pytester.run">run()</a></code> instead.</p>
</div>


                            </div>
                            <div id="Pytester.run" class="classattr">
                                        <input id="Pytester.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">cmdargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">stdin</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">NotSetType</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">IO</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">NotSetType</span><span class="o">.</span><span class="n">token</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Pytester.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.run-1364"><a href="#Pytester.run-1364"><span class="linenos">1364</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span>
</span><span id="Pytester.run-1365"><a href="#Pytester.run-1365"><span class="linenos">1365</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Pytester.run-1366"><a href="#Pytester.run-1366"><span class="linenos">1366</span></a>        <span class="o">*</span><span class="n">cmdargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Pytester.run-1367"><a href="#Pytester.run-1367"><span class="linenos">1367</span></a>        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Pytester.run-1368"><a href="#Pytester.run-1368"><span class="linenos">1368</span></a>        <span class="n">stdin</span><span class="p">:</span> <span class="n">NotSetType</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">IO</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">CLOSE_STDIN</span><span class="p">,</span>
</span><span id="Pytester.run-1369"><a href="#Pytester.run-1369"><span class="linenos">1369</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester.run-1370"><a href="#Pytester.run-1370"><span class="linenos">1370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a command with arguments.</span>
</span><span id="Pytester.run-1371"><a href="#Pytester.run-1371"><span class="linenos">1371</span></a>
</span><span id="Pytester.run-1372"><a href="#Pytester.run-1372"><span class="linenos">1372</span></a><span class="sd">        Run a process using :py:class:`subprocess.Popen` saving the stdout and</span>
</span><span id="Pytester.run-1373"><a href="#Pytester.run-1373"><span class="linenos">1373</span></a><span class="sd">        stderr.</span>
</span><span id="Pytester.run-1374"><a href="#Pytester.run-1374"><span class="linenos">1374</span></a>
</span><span id="Pytester.run-1375"><a href="#Pytester.run-1375"><span class="linenos">1375</span></a><span class="sd">        :param cmdargs:</span>
</span><span id="Pytester.run-1376"><a href="#Pytester.run-1376"><span class="linenos">1376</span></a><span class="sd">            The sequence of arguments to pass to :py:class:`subprocess.Popen`,</span>
</span><span id="Pytester.run-1377"><a href="#Pytester.run-1377"><span class="linenos">1377</span></a><span class="sd">            with path-like objects being converted to :py:class:`str`</span>
</span><span id="Pytester.run-1378"><a href="#Pytester.run-1378"><span class="linenos">1378</span></a><span class="sd">            automatically.</span>
</span><span id="Pytester.run-1379"><a href="#Pytester.run-1379"><span class="linenos">1379</span></a><span class="sd">        :param timeout:</span>
</span><span id="Pytester.run-1380"><a href="#Pytester.run-1380"><span class="linenos">1380</span></a><span class="sd">            The period in seconds after which to timeout and raise</span>
</span><span id="Pytester.run-1381"><a href="#Pytester.run-1381"><span class="linenos">1381</span></a><span class="sd">            :py:class:`Pytester.TimeoutExpired`.</span>
</span><span id="Pytester.run-1382"><a href="#Pytester.run-1382"><span class="linenos">1382</span></a><span class="sd">        :param stdin:</span>
</span><span id="Pytester.run-1383"><a href="#Pytester.run-1383"><span class="linenos">1383</span></a><span class="sd">            Optional standard input.</span>
</span><span id="Pytester.run-1384"><a href="#Pytester.run-1384"><span class="linenos">1384</span></a>
</span><span id="Pytester.run-1385"><a href="#Pytester.run-1385"><span class="linenos">1385</span></a><span class="sd">            - If it is ``CLOSE_STDIN`` (Default), then this method calls</span>
</span><span id="Pytester.run-1386"><a href="#Pytester.run-1386"><span class="linenos">1386</span></a><span class="sd">              :py:class:`subprocess.Popen` with ``stdin=subprocess.PIPE``, and</span>
</span><span id="Pytester.run-1387"><a href="#Pytester.run-1387"><span class="linenos">1387</span></a><span class="sd">              the standard input is closed immediately after the new command is</span>
</span><span id="Pytester.run-1388"><a href="#Pytester.run-1388"><span class="linenos">1388</span></a><span class="sd">              started.</span>
</span><span id="Pytester.run-1389"><a href="#Pytester.run-1389"><span class="linenos">1389</span></a>
</span><span id="Pytester.run-1390"><a href="#Pytester.run-1390"><span class="linenos">1390</span></a><span class="sd">            - If it is of type :py:class:`bytes`, these bytes are sent to the</span>
</span><span id="Pytester.run-1391"><a href="#Pytester.run-1391"><span class="linenos">1391</span></a><span class="sd">              standard input of the command.</span>
</span><span id="Pytester.run-1392"><a href="#Pytester.run-1392"><span class="linenos">1392</span></a>
</span><span id="Pytester.run-1393"><a href="#Pytester.run-1393"><span class="linenos">1393</span></a><span class="sd">            - Otherwise, it is passed through to :py:class:`subprocess.Popen`.</span>
</span><span id="Pytester.run-1394"><a href="#Pytester.run-1394"><span class="linenos">1394</span></a><span class="sd">              For further information in this case, consult the document of the</span>
</span><span id="Pytester.run-1395"><a href="#Pytester.run-1395"><span class="linenos">1395</span></a><span class="sd">              ``stdin`` parameter in :py:class:`subprocess.Popen`.</span>
</span><span id="Pytester.run-1396"><a href="#Pytester.run-1396"><span class="linenos">1396</span></a><span class="sd">        :type stdin: _pytest.compat.NotSetType | bytes | IO[Any] | int</span>
</span><span id="Pytester.run-1397"><a href="#Pytester.run-1397"><span class="linenos">1397</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.run-1398"><a href="#Pytester.run-1398"><span class="linenos">1398</span></a><span class="sd">            The result.</span>
</span><span id="Pytester.run-1399"><a href="#Pytester.run-1399"><span class="linenos">1399</span></a>
</span><span id="Pytester.run-1400"><a href="#Pytester.run-1400"><span class="linenos">1400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.run-1401"><a href="#Pytester.run-1401"><span class="linenos">1401</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Pytester.run-1402"><a href="#Pytester.run-1402"><span class="linenos">1402</span></a>
</span><span id="Pytester.run-1403"><a href="#Pytester.run-1403"><span class="linenos">1403</span></a>        <span class="n">cmdargs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">cmdargs</span><span class="p">)</span>
</span><span id="Pytester.run-1404"><a href="#Pytester.run-1404"><span class="linenos">1404</span></a>        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;stdout&quot;</span><span class="p">)</span>
</span><span id="Pytester.run-1405"><a href="#Pytester.run-1405"><span class="linenos">1405</span></a>        <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;stderr&quot;</span><span class="p">)</span>
</span><span id="Pytester.run-1406"><a href="#Pytester.run-1406"><span class="linenos">1406</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running:&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdargs</span><span class="p">)</span>
</span><span id="Pytester.run-1407"><a href="#Pytester.run-1407"><span class="linenos">1407</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;     in:&quot;</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">())</span>
</span><span id="Pytester.run-1408"><a href="#Pytester.run-1408"><span class="linenos">1408</span></a>
</span><span id="Pytester.run-1409"><a href="#Pytester.run-1409"><span class="linenos">1409</span></a>        <span class="k">with</span> <span class="n">p1</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f2</span><span class="p">:</span>
</span><span id="Pytester.run-1410"><a href="#Pytester.run-1410"><span class="linenos">1410</span></a>            <span class="n">now</span> <span class="o">=</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="Pytester.run-1411"><a href="#Pytester.run-1411"><span class="linenos">1411</span></a>            <span class="n">popen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span>
</span><span id="Pytester.run-1412"><a href="#Pytester.run-1412"><span class="linenos">1412</span></a>                <span class="n">cmdargs</span><span class="p">,</span>
</span><span id="Pytester.run-1413"><a href="#Pytester.run-1413"><span class="linenos">1413</span></a>                <span class="n">stdin</span><span class="o">=</span><span class="n">stdin</span><span class="p">,</span>
</span><span id="Pytester.run-1414"><a href="#Pytester.run-1414"><span class="linenos">1414</span></a>                <span class="n">stdout</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span>
</span><span id="Pytester.run-1415"><a href="#Pytester.run-1415"><span class="linenos">1415</span></a>                <span class="n">stderr</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span>
</span><span id="Pytester.run-1416"><a href="#Pytester.run-1416"><span class="linenos">1416</span></a>                <span class="n">close_fds</span><span class="o">=</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">!=</span> <span class="s2">&quot;win32&quot;</span><span class="p">),</span>
</span><span id="Pytester.run-1417"><a href="#Pytester.run-1417"><span class="linenos">1417</span></a>            <span class="p">)</span>
</span><span id="Pytester.run-1418"><a href="#Pytester.run-1418"><span class="linenos">1418</span></a>            <span class="k">if</span> <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.run-1419"><a href="#Pytester.run-1419"><span class="linenos">1419</span></a>                <span class="n">popen</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Pytester.run-1420"><a href="#Pytester.run-1420"><span class="linenos">1420</span></a>
</span><span id="Pytester.run-1421"><a href="#Pytester.run-1421"><span class="linenos">1421</span></a>            <span class="k">def</span><span class="w"> </span><span class="nf">handle_timeout</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.run-1422"><a href="#Pytester.run-1422"><span class="linenos">1422</span></a>                <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Pytester.run-1423"><a href="#Pytester.run-1423"><span class="linenos">1423</span></a>
</span><span id="Pytester.run-1424"><a href="#Pytester.run-1424"><span class="linenos">1424</span></a>                <span class="n">timeout_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timeout</span><span class="si">}</span><span class="s2"> second timeout expired running: </span><span class="si">{</span><span class="n">cmdargs</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester.run-1425"><a href="#Pytester.run-1425"><span class="linenos">1425</span></a>
</span><span id="Pytester.run-1426"><a href="#Pytester.run-1426"><span class="linenos">1426</span></a>                <span class="n">popen</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
</span><span id="Pytester.run-1427"><a href="#Pytester.run-1427"><span class="linenos">1427</span></a>                <span class="n">popen</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</span><span id="Pytester.run-1428"><a href="#Pytester.run-1428"><span class="linenos">1428</span></a>                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeoutExpired</span><span class="p">(</span><span class="n">timeout_message</span><span class="p">)</span>
</span><span id="Pytester.run-1429"><a href="#Pytester.run-1429"><span class="linenos">1429</span></a>
</span><span id="Pytester.run-1430"><a href="#Pytester.run-1430"><span class="linenos">1430</span></a>            <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Pytester.run-1431"><a href="#Pytester.run-1431"><span class="linenos">1431</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="n">popen</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</span><span id="Pytester.run-1432"><a href="#Pytester.run-1432"><span class="linenos">1432</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Pytester.run-1433"><a href="#Pytester.run-1433"><span class="linenos">1433</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Pytester.run-1434"><a href="#Pytester.run-1434"><span class="linenos">1434</span></a>                    <span class="n">ret</span> <span class="o">=</span> <span class="n">popen</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="Pytester.run-1435"><a href="#Pytester.run-1435"><span class="linenos">1435</span></a>                <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
</span><span id="Pytester.run-1436"><a href="#Pytester.run-1436"><span class="linenos">1436</span></a>                    <span class="n">handle_timeout</span><span class="p">()</span>
</span><span id="Pytester.run-1437"><a href="#Pytester.run-1437"><span class="linenos">1437</span></a>
</span><span id="Pytester.run-1438"><a href="#Pytester.run-1438"><span class="linenos">1438</span></a>        <span class="k">with</span> <span class="n">p1</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f2</span><span class="p">:</span>
</span><span id="Pytester.run-1439"><a href="#Pytester.run-1439"><span class="linenos">1439</span></a>            <span class="n">out</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="Pytester.run-1440"><a href="#Pytester.run-1440"><span class="linenos">1440</span></a>            <span class="n">err</span> <span class="o">=</span> <span class="n">f2</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="Pytester.run-1441"><a href="#Pytester.run-1441"><span class="linenos">1441</span></a>
</span><span id="Pytester.run-1442"><a href="#Pytester.run-1442"><span class="linenos">1442</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_lines</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span id="Pytester.run-1443"><a href="#Pytester.run-1443"><span class="linenos">1443</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_lines</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="Pytester.run-1444"><a href="#Pytester.run-1444"><span class="linenos">1444</span></a>
</span><span id="Pytester.run-1445"><a href="#Pytester.run-1445"><span class="linenos">1445</span></a>        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span><span id="Pytester.run-1446"><a href="#Pytester.run-1446"><span class="linenos">1446</span></a>            <span class="n">ret</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span><span id="Pytester.run-1447"><a href="#Pytester.run-1447"><span class="linenos">1447</span></a>        <span class="k">return</span> <span class="n">RunResult</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">timing</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">now</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run a command with arguments.</p>

<p>Run a process using <code>subprocess.Popen</code> saving the stdout and
stderr.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cmdargs</strong>: 
The sequence of arguments to pass to <code>subprocess.Popen</code>,
with path-like objects being converted to <code>str</code>
automatically.</li>
<li><strong>timeout</strong>: 
The period in seconds after which to timeout and raise
<code><a href="#Pytester.TimeoutExpired">Pytester.TimeoutExpired</a></code>.</li>
<li><p><strong>stdin</strong>: 
Optional standard input.</p>

<ul>
<li><p>If it is <code><a href="#Pytester.CLOSE_STDIN">CLOSE_STDIN</a></code> (Default), then this method calls
<code>subprocess.Popen</code> with <code>stdin=subprocess.PIPE</code>, and
the standard input is closed immediately after the new command is
started.</p></li>
<li><p>If it is of type <code>bytes</code>, these bytes are sent to the
standard input of the command.</p></li>
<li><p>Otherwise, it is passed through to <code>subprocess.Popen</code>.
For further information in this case, consult the document of the
<code>stdin</code> parameter in <code>subprocess.Popen</code>.
:returns:
The result.</p></li>
</ul></li>
</ul>
</div>


                            </div>
                            <div id="Pytester.runpython" class="classattr">
                                        <input id="Pytester.runpython-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpython</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">script</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Pytester.runpython-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.runpython"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.runpython-1459"><a href="#Pytester.runpython-1459"><span class="linenos">1459</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester.runpython-1460"><a href="#Pytester.runpython-1460"><span class="linenos">1460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a python script using sys.executable as interpreter.&quot;&quot;&quot;</span>
</span><span id="Pytester.runpython-1461"><a href="#Pytester.runpython-1461"><span class="linenos">1461</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="n">script</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run a python script using sys.executable as interpreter.</p>
</div>


                            </div>
                            <div id="Pytester.runpython_c" class="classattr">
                                        <input id="Pytester.runpython_c-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpython_c</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">command</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Pytester.runpython_c-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.runpython_c"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.runpython_c-1463"><a href="#Pytester.runpython_c-1463"><span class="linenos">1463</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython_c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester.runpython_c-1464"><a href="#Pytester.runpython_c-1464"><span class="linenos">1464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run ``python -c &quot;command&quot;``.&quot;&quot;&quot;</span>
</span><span id="Pytester.runpython_c-1465"><a href="#Pytester.runpython_c-1465"><span class="linenos">1465</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run <code>python -c "command"</code>.</p>
</div>


                            </div>
                            <div id="Pytester.runpytest_subprocess" class="classattr">
                                        <input id="Pytester.runpytest_subprocess-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpytest_subprocess</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Pytester.runpytest_subprocess-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.runpytest_subprocess"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.runpytest_subprocess-1467"><a href="#Pytester.runpytest_subprocess-1467"><span class="linenos">1467</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_subprocess</span><span class="p">(</span>
</span><span id="Pytester.runpytest_subprocess-1468"><a href="#Pytester.runpytest_subprocess-1468"><span class="linenos">1468</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Pytester.runpytest_subprocess-1469"><a href="#Pytester.runpytest_subprocess-1469"><span class="linenos">1469</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Pytester.runpytest_subprocess-1470"><a href="#Pytester.runpytest_subprocess-1470"><span class="linenos">1470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pytest as a subprocess with given arguments.</span>
</span><span id="Pytester.runpytest_subprocess-1471"><a href="#Pytester.runpytest_subprocess-1471"><span class="linenos">1471</span></a>
</span><span id="Pytester.runpytest_subprocess-1472"><a href="#Pytester.runpytest_subprocess-1472"><span class="linenos">1472</span></a><span class="sd">        Any plugins added to the :py:attr:`plugins` list will be added using the</span>
</span><span id="Pytester.runpytest_subprocess-1473"><a href="#Pytester.runpytest_subprocess-1473"><span class="linenos">1473</span></a><span class="sd">        ``-p`` command line option.  Additionally ``--basetemp`` is used to put</span>
</span><span id="Pytester.runpytest_subprocess-1474"><a href="#Pytester.runpytest_subprocess-1474"><span class="linenos">1474</span></a><span class="sd">        any temporary files and directories in a numbered directory prefixed</span>
</span><span id="Pytester.runpytest_subprocess-1475"><a href="#Pytester.runpytest_subprocess-1475"><span class="linenos">1475</span></a><span class="sd">        with &quot;runpytest-&quot; to not conflict with the normal numbered pytest</span>
</span><span id="Pytester.runpytest_subprocess-1476"><a href="#Pytester.runpytest_subprocess-1476"><span class="linenos">1476</span></a><span class="sd">        location for temporary files and directories.</span>
</span><span id="Pytester.runpytest_subprocess-1477"><a href="#Pytester.runpytest_subprocess-1477"><span class="linenos">1477</span></a>
</span><span id="Pytester.runpytest_subprocess-1478"><a href="#Pytester.runpytest_subprocess-1478"><span class="linenos">1478</span></a><span class="sd">        :param args:</span>
</span><span id="Pytester.runpytest_subprocess-1479"><a href="#Pytester.runpytest_subprocess-1479"><span class="linenos">1479</span></a><span class="sd">            The sequence of arguments to pass to the pytest subprocess.</span>
</span><span id="Pytester.runpytest_subprocess-1480"><a href="#Pytester.runpytest_subprocess-1480"><span class="linenos">1480</span></a><span class="sd">        :param timeout:</span>
</span><span id="Pytester.runpytest_subprocess-1481"><a href="#Pytester.runpytest_subprocess-1481"><span class="linenos">1481</span></a><span class="sd">            The period in seconds after which to timeout and raise</span>
</span><span id="Pytester.runpytest_subprocess-1482"><a href="#Pytester.runpytest_subprocess-1482"><span class="linenos">1482</span></a><span class="sd">            :py:class:`Pytester.TimeoutExpired`.</span>
</span><span id="Pytester.runpytest_subprocess-1483"><a href="#Pytester.runpytest_subprocess-1483"><span class="linenos">1483</span></a><span class="sd">        :returns:</span>
</span><span id="Pytester.runpytest_subprocess-1484"><a href="#Pytester.runpytest_subprocess-1484"><span class="linenos">1484</span></a><span class="sd">            The result.</span>
</span><span id="Pytester.runpytest_subprocess-1485"><a href="#Pytester.runpytest_subprocess-1485"><span class="linenos">1485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.runpytest_subprocess-1486"><a href="#Pytester.runpytest_subprocess-1486"><span class="linenos">1486</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Pytester.runpytest_subprocess-1487"><a href="#Pytester.runpytest_subprocess-1487"><span class="linenos">1487</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">make_numbered_dir</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;runpytest-&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="Pytester.runpytest_subprocess-1488"><a href="#Pytester.runpytest_subprocess-1488"><span class="linenos">1488</span></a>        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--basetemp=</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.runpytest_subprocess-1489"><a href="#Pytester.runpytest_subprocess-1489"><span class="linenos">1489</span></a>        <span class="n">plugins</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]</span>
</span><span id="Pytester.runpytest_subprocess-1490"><a href="#Pytester.runpytest_subprocess-1490"><span class="linenos">1490</span></a>        <span class="k">if</span> <span class="n">plugins</span><span class="p">:</span>
</span><span id="Pytester.runpytest_subprocess-1491"><a href="#Pytester.runpytest_subprocess-1491"><span class="linenos">1491</span></a>            <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">plugins</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Pytester.runpytest_subprocess-1492"><a href="#Pytester.runpytest_subprocess-1492"><span class="linenos">1492</span></a>        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getpytestargs</span><span class="p">()</span> <span class="o">+</span> <span class="n">args</span>
</span><span id="Pytester.runpytest_subprocess-1493"><a href="#Pytester.runpytest_subprocess-1493"><span class="linenos">1493</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run pytest as a subprocess with given arguments.</p>

<p>Any plugins added to the <code><a href="#Pytester.plugins">plugins</a></code> list will be added using the
<code>-p</code> command line option.  Additionally <code>--basetemp</code> is used to put
any temporary files and directories in a numbered directory prefixed
with "runpytest-" to not conflict with the normal numbered pytest
location for temporary files and directories.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>args</strong>: 
The sequence of arguments to pass to the pytest subprocess.</li>
<li><strong>timeout</strong>: 
The period in seconds after which to timeout and raise
<code><a href="#Pytester.TimeoutExpired">Pytester.TimeoutExpired</a></code>.
:returns:
The result.</li>
</ul>
</div>


                            </div>
                            <div id="Pytester.spawn_pytest" class="classattr">
                                        <input id="Pytester.spawn_pytest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">spawn_pytest</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">string</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span></span><span class="return-annotation">) -> <span class="n">pexpect</span><span class="o">.</span><span class="n">pty_spawn</span><span class="o">.</span><span class="n">spawn</span>:</span></span>

                <label class="view-source-button" for="Pytester.spawn_pytest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.spawn_pytest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.spawn_pytest-1495"><a href="#Pytester.spawn_pytest-1495"><span class="linenos">1495</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn_pytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Pytester.spawn_pytest-1496"><a href="#Pytester.spawn_pytest-1496"><span class="linenos">1496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run pytest using pexpect.</span>
</span><span id="Pytester.spawn_pytest-1497"><a href="#Pytester.spawn_pytest-1497"><span class="linenos">1497</span></a>
</span><span id="Pytester.spawn_pytest-1498"><a href="#Pytester.spawn_pytest-1498"><span class="linenos">1498</span></a><span class="sd">        This makes sure to use the right pytest and sets up the temporary</span>
</span><span id="Pytester.spawn_pytest-1499"><a href="#Pytester.spawn_pytest-1499"><span class="linenos">1499</span></a><span class="sd">        directory locations.</span>
</span><span id="Pytester.spawn_pytest-1500"><a href="#Pytester.spawn_pytest-1500"><span class="linenos">1500</span></a>
</span><span id="Pytester.spawn_pytest-1501"><a href="#Pytester.spawn_pytest-1501"><span class="linenos">1501</span></a><span class="sd">        The pexpect child is returned.</span>
</span><span id="Pytester.spawn_pytest-1502"><a href="#Pytester.spawn_pytest-1502"><span class="linenos">1502</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.spawn_pytest-1503"><a href="#Pytester.spawn_pytest-1503"><span class="linenos">1503</span></a>        <span class="n">basetemp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">/</span> <span class="s2">&quot;temp-pexpect&quot;</span>
</span><span id="Pytester.spawn_pytest-1504"><a href="#Pytester.spawn_pytest-1504"><span class="linenos">1504</span></a>        <span class="n">basetemp</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="Pytester.spawn_pytest-1505"><a href="#Pytester.spawn_pytest-1505"><span class="linenos">1505</span></a>        <span class="n">invoke</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getpytestargs</span><span class="p">()))</span>
</span><span id="Pytester.spawn_pytest-1506"><a href="#Pytester.spawn_pytest-1506"><span class="linenos">1506</span></a>        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">invoke</span><span class="si">}</span><span class="s2"> --basetemp=</span><span class="si">{</span><span class="n">basetemp</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pytester.spawn_pytest-1507"><a href="#Pytester.spawn_pytest-1507"><span class="linenos">1507</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Run pytest using pexpect.</p>

<p>This makes sure to use the right pytest and sets up the temporary
directory locations.</p>

<p>The pexpect child is returned.</p>
</div>


                            </div>
                            <div id="Pytester.spawn" class="classattr">
                                        <input id="Pytester.spawn-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">spawn</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span></span><span class="return-annotation">) -> <span class="n">pexpect</span><span class="o">.</span><span class="n">pty_spawn</span><span class="o">.</span><span class="n">spawn</span>:</span></span>

                <label class="view-source-button" for="Pytester.spawn-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.spawn"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.spawn-1509"><a href="#Pytester.spawn-1509"><span class="linenos">1509</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Pytester.spawn-1510"><a href="#Pytester.spawn-1510"><span class="linenos">1510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a command using pexpect.</span>
</span><span id="Pytester.spawn-1511"><a href="#Pytester.spawn-1511"><span class="linenos">1511</span></a>
</span><span id="Pytester.spawn-1512"><a href="#Pytester.spawn-1512"><span class="linenos">1512</span></a><span class="sd">        The pexpect child is returned.</span>
</span><span id="Pytester.spawn-1513"><a href="#Pytester.spawn-1513"><span class="linenos">1513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Pytester.spawn-1514"><a href="#Pytester.spawn-1514"><span class="linenos">1514</span></a>        <span class="n">pexpect</span> <span class="o">=</span> <span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;pexpect&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">)</span>
</span><span id="Pytester.spawn-1515"><a href="#Pytester.spawn-1515"><span class="linenos">1515</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s2">&quot;pypy_version_info&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;64&quot;</span> <span class="ow">in</span> <span class="n">platform</span><span class="o">.</span><span class="n">machine</span><span class="p">():</span>
</span><span id="Pytester.spawn-1516"><a href="#Pytester.spawn-1516"><span class="linenos">1516</span></a>            <span class="n">skip</span><span class="p">(</span><span class="s2">&quot;pypy-64 bit not supported&quot;</span><span class="p">)</span>
</span><span id="Pytester.spawn-1517"><a href="#Pytester.spawn-1517"><span class="linenos">1517</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pexpect</span><span class="p">,</span> <span class="s2">&quot;spawn&quot;</span><span class="p">):</span>
</span><span id="Pytester.spawn-1518"><a href="#Pytester.spawn-1518"><span class="linenos">1518</span></a>            <span class="n">skip</span><span class="p">(</span><span class="s2">&quot;pexpect.spawn not available&quot;</span><span class="p">)</span>
</span><span id="Pytester.spawn-1519"><a href="#Pytester.spawn-1519"><span class="linenos">1519</span></a>        <span class="n">logfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;spawn.out&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span>
</span><span id="Pytester.spawn-1520"><a href="#Pytester.spawn-1520"><span class="linenos">1520</span></a>
</span><span id="Pytester.spawn-1521"><a href="#Pytester.spawn-1521"><span class="linenos">1521</span></a>        <span class="n">child</span> <span class="o">=</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">logfile</span><span class="o">=</span><span class="n">logfile</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span><span id="Pytester.spawn-1522"><a href="#Pytester.spawn-1522"><span class="linenos">1522</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">logfile</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</span><span id="Pytester.spawn-1523"><a href="#Pytester.spawn-1523"><span class="linenos">1523</span></a>        <span class="k">return</span> <span class="n">child</span>
</span></pre></div>


            <div class="docstring"><p>Run a command using pexpect.</p>

<p>The pexpect child is returned.</p>
</div>


                            </div>
                </section>
                <section id="Pytester.TimeoutExpired">
                            <input id="Pytester.TimeoutExpired-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Pytester.TimeoutExpired</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="Pytester.TimeoutExpired-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pytester.TimeoutExpired"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pytester.TimeoutExpired-661"><a href="#Pytester.TimeoutExpired-661"><span class="linenos">661</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">TimeoutExpired</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="Pytester.TimeoutExpired-662"><a href="#Pytester.TimeoutExpired-662"><span class="linenos">662</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Common base class for all non-exit exceptions.</p>
</div>


                </section>
                <section id="PytestPluginManager">
                            <input id="PytestPluginManager-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">PytestPluginManager</span><wbr>(<span class="base">pluggy._manager.PluginManager</span>):

                <label class="view-source-button" for="PytestPluginManager-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager-391"><a href="#PytestPluginManager-391"><span class="linenos">391</span></a><span class="nd">@final</span>
</span><span id="PytestPluginManager-392"><a href="#PytestPluginManager-392"><span class="linenos">392</span></a><span class="k">class</span><span class="w"> </span><span class="nc">PytestPluginManager</span><span class="p">(</span><span class="n">PluginManager</span><span class="p">):</span>
</span><span id="PytestPluginManager-393"><a href="#PytestPluginManager-393"><span class="linenos">393</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A :py:class:`pluggy.PluginManager &lt;pluggy.PluginManager&gt;` with</span>
</span><span id="PytestPluginManager-394"><a href="#PytestPluginManager-394"><span class="linenos">394</span></a><span class="sd">    additional pytest-specific functionality:</span>
</span><span id="PytestPluginManager-395"><a href="#PytestPluginManager-395"><span class="linenos">395</span></a>
</span><span id="PytestPluginManager-396"><a href="#PytestPluginManager-396"><span class="linenos">396</span></a><span class="sd">    * Loading plugins from the command line, ``PYTEST_PLUGINS`` env variable and</span>
</span><span id="PytestPluginManager-397"><a href="#PytestPluginManager-397"><span class="linenos">397</span></a><span class="sd">      ``pytest_plugins`` global variables found in plugins being loaded.</span>
</span><span id="PytestPluginManager-398"><a href="#PytestPluginManager-398"><span class="linenos">398</span></a><span class="sd">    * ``conftest.py`` loading during start-up.</span>
</span><span id="PytestPluginManager-399"><a href="#PytestPluginManager-399"><span class="linenos">399</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-400"><a href="#PytestPluginManager-400"><span class="linenos">400</span></a>
</span><span id="PytestPluginManager-401"><a href="#PytestPluginManager-401"><span class="linenos">401</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-402"><a href="#PytestPluginManager-402"><span class="linenos">402</span></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">_pytest.assertion</span>
</span><span id="PytestPluginManager-403"><a href="#PytestPluginManager-403"><span class="linenos">403</span></a>
</span><span id="PytestPluginManager-404"><a href="#PytestPluginManager-404"><span class="linenos">404</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;pytest&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-405"><a href="#PytestPluginManager-405"><span class="linenos">405</span></a>
</span><span id="PytestPluginManager-406"><a href="#PytestPluginManager-406"><span class="linenos">406</span></a>        <span class="c1"># -- State related to local conftest plugins.</span>
</span><span id="PytestPluginManager-407"><a href="#PytestPluginManager-407"><span class="linenos">407</span></a>        <span class="c1"># All loaded conftest modules.</span>
</span><span id="PytestPluginManager-408"><a href="#PytestPluginManager-408"><span class="linenos">408</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_conftest_plugins</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="PytestPluginManager-409"><a href="#PytestPluginManager-409"><span class="linenos">409</span></a>        <span class="c1"># All conftest modules applicable for a directory.</span>
</span><span id="PytestPluginManager-410"><a href="#PytestPluginManager-410"><span class="linenos">410</span></a>        <span class="c1"># This includes the directory&#39;s own conftest modules as well</span>
</span><span id="PytestPluginManager-411"><a href="#PytestPluginManager-411"><span class="linenos">411</span></a>        <span class="c1"># as those of its parent directories.</span>
</span><span id="PytestPluginManager-412"><a href="#PytestPluginManager-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dirpath2confmods</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PytestPluginManager-413"><a href="#PytestPluginManager-413"><span class="linenos">413</span></a>        <span class="c1"># Cutoff directory above which conftests are no longer discovered.</span>
</span><span id="PytestPluginManager-414"><a href="#PytestPluginManager-414"><span class="linenos">414</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_confcutdir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-415"><a href="#PytestPluginManager-415"><span class="linenos">415</span></a>        <span class="c1"># If set, conftest loading is skipped.</span>
</span><span id="PytestPluginManager-416"><a href="#PytestPluginManager-416"><span class="linenos">416</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_noconftest</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PytestPluginManager-417"><a href="#PytestPluginManager-417"><span class="linenos">417</span></a>
</span><span id="PytestPluginManager-418"><a href="#PytestPluginManager-418"><span class="linenos">418</span></a>        <span class="c1"># _getconftestmodules()&#39;s call to _get_directory() causes a stat</span>
</span><span id="PytestPluginManager-419"><a href="#PytestPluginManager-419"><span class="linenos">419</span></a>        <span class="c1"># storm when it&#39;s called potentially thousands of times in a test</span>
</span><span id="PytestPluginManager-420"><a href="#PytestPluginManager-420"><span class="linenos">420</span></a>        <span class="c1"># session (#9478), often with the same path, so cache it.</span>
</span><span id="PytestPluginManager-421"><a href="#PytestPluginManager-421"><span class="linenos">421</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_get_directory</span> <span class="o">=</span> <span class="n">lru_cache</span><span class="p">(</span><span class="mi">256</span><span class="p">)(</span><span class="n">_get_directory</span><span class="p">)</span>
</span><span id="PytestPluginManager-422"><a href="#PytestPluginManager-422"><span class="linenos">422</span></a>
</span><span id="PytestPluginManager-423"><a href="#PytestPluginManager-423"><span class="linenos">423</span></a>        <span class="c1"># plugins that were explicitly skipped with pytest.skip</span>
</span><span id="PytestPluginManager-424"><a href="#PytestPluginManager-424"><span class="linenos">424</span></a>        <span class="c1"># list of (module name, skip reason)</span>
</span><span id="PytestPluginManager-425"><a href="#PytestPluginManager-425"><span class="linenos">425</span></a>        <span class="c1"># previously we would issue a warning when a plugin was skipped, but</span>
</span><span id="PytestPluginManager-426"><a href="#PytestPluginManager-426"><span class="linenos">426</span></a>        <span class="c1"># since we refactored warnings as first citizens of Config, they are</span>
</span><span id="PytestPluginManager-427"><a href="#PytestPluginManager-427"><span class="linenos">427</span></a>        <span class="c1"># just stored here to be used later.</span>
</span><span id="PytestPluginManager-428"><a href="#PytestPluginManager-428"><span class="linenos">428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">skipped_plugins</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PytestPluginManager-429"><a href="#PytestPluginManager-429"><span class="linenos">429</span></a>
</span><span id="PytestPluginManager-430"><a href="#PytestPluginManager-430"><span class="linenos">430</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">add_hookspecs</span><span class="p">(</span><span class="n">_pytest</span><span class="o">.</span><span class="n">hookspec</span><span class="p">)</span>
</span><span id="PytestPluginManager-431"><a href="#PytestPluginManager-431"><span class="linenos">431</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="PytestPluginManager-432"><a href="#PytestPluginManager-432"><span class="linenos">432</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_DEBUG&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-433"><a href="#PytestPluginManager-433"><span class="linenos">433</span></a>            <span class="n">err</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span>
</span><span id="PytestPluginManager-434"><a href="#PytestPluginManager-434"><span class="linenos">434</span></a>            <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="s2">&quot;encoding&quot;</span><span class="p">,</span> <span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-435"><a href="#PytestPluginManager-435"><span class="linenos">435</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager-436"><a href="#PytestPluginManager-436"><span class="linenos">436</span></a>                <span class="n">err</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span>
</span><span id="PytestPluginManager-437"><a href="#PytestPluginManager-437"><span class="linenos">437</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">dup</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">fileno</span><span class="p">()),</span>
</span><span id="PytestPluginManager-438"><a href="#PytestPluginManager-438"><span class="linenos">438</span></a>                    <span class="n">mode</span><span class="o">=</span><span class="n">err</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span>
</span><span id="PytestPluginManager-439"><a href="#PytestPluginManager-439"><span class="linenos">439</span></a>                    <span class="n">buffering</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="PytestPluginManager-440"><a href="#PytestPluginManager-440"><span class="linenos">440</span></a>                    <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
</span><span id="PytestPluginManager-441"><a href="#PytestPluginManager-441"><span class="linenos">441</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager-442"><a href="#PytestPluginManager-442"><span class="linenos">442</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="PytestPluginManager-443"><a href="#PytestPluginManager-443"><span class="linenos">443</span></a>                <span class="k">pass</span>
</span><span id="PytestPluginManager-444"><a href="#PytestPluginManager-444"><span class="linenos">444</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">setwriter</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
</span><span id="PytestPluginManager-445"><a href="#PytestPluginManager-445"><span class="linenos">445</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">enable_tracing</span><span class="p">()</span>
</span><span id="PytestPluginManager-446"><a href="#PytestPluginManager-446"><span class="linenos">446</span></a>
</span><span id="PytestPluginManager-447"><a href="#PytestPluginManager-447"><span class="linenos">447</span></a>        <span class="c1"># Config._consider_importhook will set a real object if required.</span>
</span><span id="PytestPluginManager-448"><a href="#PytestPluginManager-448"><span class="linenos">448</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rewrite_hook</span> <span class="o">=</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">assertion</span><span class="o">.</span><span class="n">DummyRewriteHook</span><span class="p">()</span>
</span><span id="PytestPluginManager-449"><a href="#PytestPluginManager-449"><span class="linenos">449</span></a>        <span class="c1"># Used to know when we are importing conftests after the pytest_configure stage.</span>
</span><span id="PytestPluginManager-450"><a href="#PytestPluginManager-450"><span class="linenos">450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PytestPluginManager-451"><a href="#PytestPluginManager-451"><span class="linenos">451</span></a>
</span><span id="PytestPluginManager-452"><a href="#PytestPluginManager-452"><span class="linenos">452</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_hookimpl_opts</span><span class="p">(</span>
</span><span id="PytestPluginManager-453"><a href="#PytestPluginManager-453"><span class="linenos">453</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">_PluggyPlugin</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="PytestPluginManager-454"><a href="#PytestPluginManager-454"><span class="linenos">454</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookimplOpts</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-455"><a href="#PytestPluginManager-455"><span class="linenos">455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-456"><a href="#PytestPluginManager-456"><span class="linenos">456</span></a>        <span class="c1"># pytest hooks are always prefixed with &quot;pytest_&quot;,</span>
</span><span id="PytestPluginManager-457"><a href="#PytestPluginManager-457"><span class="linenos">457</span></a>        <span class="c1"># so we avoid accessing possibly non-readable attributes</span>
</span><span id="PytestPluginManager-458"><a href="#PytestPluginManager-458"><span class="linenos">458</span></a>        <span class="c1"># (see issue #1073).</span>
</span><span id="PytestPluginManager-459"><a href="#PytestPluginManager-459"><span class="linenos">459</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-460"><a href="#PytestPluginManager-460"><span class="linenos">460</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-461"><a href="#PytestPluginManager-461"><span class="linenos">461</span></a>        <span class="c1"># Ignore names which cannot be hooks.</span>
</span><span id="PytestPluginManager-462"><a href="#PytestPluginManager-462"><span class="linenos">462</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;pytest_plugins&quot;</span><span class="p">:</span>
</span><span id="PytestPluginManager-463"><a href="#PytestPluginManager-463"><span class="linenos">463</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-464"><a href="#PytestPluginManager-464"><span class="linenos">464</span></a>
</span><span id="PytestPluginManager-465"><a href="#PytestPluginManager-465"><span class="linenos">465</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">parse_hookimpl_opts</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-466"><a href="#PytestPluginManager-466"><span class="linenos">466</span></a>        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-467"><a href="#PytestPluginManager-467"><span class="linenos">467</span></a>            <span class="k">return</span> <span class="n">opts</span>
</span><span id="PytestPluginManager-468"><a href="#PytestPluginManager-468"><span class="linenos">468</span></a>
</span><span id="PytestPluginManager-469"><a href="#PytestPluginManager-469"><span class="linenos">469</span></a>        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-470"><a href="#PytestPluginManager-470"><span class="linenos">470</span></a>        <span class="c1"># Consider only actual functions for hooks (#3775).</span>
</span><span id="PytestPluginManager-471"><a href="#PytestPluginManager-471"><span class="linenos">471</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isroutine</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
</span><span id="PytestPluginManager-472"><a href="#PytestPluginManager-472"><span class="linenos">472</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-473"><a href="#PytestPluginManager-473"><span class="linenos">473</span></a>        <span class="c1"># Collect unmarked hooks as long as they have the `pytest_&#39; prefix.</span>
</span><span id="PytestPluginManager-474"><a href="#PytestPluginManager-474"><span class="linenos">474</span></a>        <span class="k">return</span> <span class="n">_get_legacy_hook_marks</span><span class="p">(</span>  <span class="c1"># type: ignore[return-value]</span>
</span><span id="PytestPluginManager-475"><a href="#PytestPluginManager-475"><span class="linenos">475</span></a>            <span class="n">method</span><span class="p">,</span> <span class="s2">&quot;impl&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;tryfirst&quot;</span><span class="p">,</span> <span class="s2">&quot;trylast&quot;</span><span class="p">,</span> <span class="s2">&quot;optionalhook&quot;</span><span class="p">,</span> <span class="s2">&quot;hookwrapper&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-476"><a href="#PytestPluginManager-476"><span class="linenos">476</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager-477"><a href="#PytestPluginManager-477"><span class="linenos">477</span></a>
</span><span id="PytestPluginManager-478"><a href="#PytestPluginManager-478"><span class="linenos">478</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_hookspec_opts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_or_class</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookspecOpts</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-479"><a href="#PytestPluginManager-479"><span class="linenos">479</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-480"><a href="#PytestPluginManager-480"><span class="linenos">480</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">parse_hookspec_opts</span><span class="p">(</span><span class="n">module_or_class</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-481"><a href="#PytestPluginManager-481"><span class="linenos">481</span></a>        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-482"><a href="#PytestPluginManager-482"><span class="linenos">482</span></a>            <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module_or_class</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-483"><a href="#PytestPluginManager-483"><span class="linenos">483</span></a>            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-484"><a href="#PytestPluginManager-484"><span class="linenos">484</span></a>                <span class="n">opts</span> <span class="o">=</span> <span class="n">_get_legacy_hook_marks</span><span class="p">(</span>  <span class="c1"># type: ignore[assignment]</span>
</span><span id="PytestPluginManager-485"><a href="#PytestPluginManager-485"><span class="linenos">485</span></a>                    <span class="n">method</span><span class="p">,</span>
</span><span id="PytestPluginManager-486"><a href="#PytestPluginManager-486"><span class="linenos">486</span></a>                    <span class="s2">&quot;spec&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager-487"><a href="#PytestPluginManager-487"><span class="linenos">487</span></a>                    <span class="p">(</span><span class="s2">&quot;firstresult&quot;</span><span class="p">,</span> <span class="s2">&quot;historic&quot;</span><span class="p">),</span>
</span><span id="PytestPluginManager-488"><a href="#PytestPluginManager-488"><span class="linenos">488</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager-489"><a href="#PytestPluginManager-489"><span class="linenos">489</span></a>        <span class="k">return</span> <span class="n">opts</span>
</span><span id="PytestPluginManager-490"><a href="#PytestPluginManager-490"><span class="linenos">490</span></a>
</span><span id="PytestPluginManager-491"><a href="#PytestPluginManager-491"><span class="linenos">491</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">_PluggyPlugin</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-492"><a href="#PytestPluginManager-492"><span class="linenos">492</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">deprecated</span><span class="o">.</span><span class="n">DEPRECATED_EXTERNAL_PLUGINS</span><span class="p">:</span>
</span><span id="PytestPluginManager-493"><a href="#PytestPluginManager-493"><span class="linenos">493</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="PytestPluginManager-494"><a href="#PytestPluginManager-494"><span class="linenos">494</span></a>                <span class="n">PytestConfigWarning</span><span class="p">(</span>
</span><span id="PytestPluginManager-495"><a href="#PytestPluginManager-495"><span class="linenos">495</span></a>                    <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> plugin has been merged into the core, &quot;</span>
</span><span id="PytestPluginManager-496"><a href="#PytestPluginManager-496"><span class="linenos">496</span></a>                    <span class="s2">&quot;please remove it from your requirements.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PytestPluginManager-497"><a href="#PytestPluginManager-497"><span class="linenos">497</span></a>                        <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-498"><a href="#PytestPluginManager-498"><span class="linenos">498</span></a>                    <span class="p">)</span>
</span><span id="PytestPluginManager-499"><a href="#PytestPluginManager-499"><span class="linenos">499</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager-500"><a href="#PytestPluginManager-500"><span class="linenos">500</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager-501"><a href="#PytestPluginManager-501"><span class="linenos">501</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-502"><a href="#PytestPluginManager-502"><span class="linenos">502</span></a>        <span class="n">plugin_name</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-503"><a href="#PytestPluginManager-503"><span class="linenos">503</span></a>        <span class="k">if</span> <span class="n">plugin_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-504"><a href="#PytestPluginManager-504"><span class="linenos">504</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_plugin_registered</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="PytestPluginManager-505"><a href="#PytestPluginManager-505"><span class="linenos">505</span></a>                <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
</span><span id="PytestPluginManager-506"><a href="#PytestPluginManager-506"><span class="linenos">506</span></a>                    <span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span>
</span><span id="PytestPluginManager-507"><a href="#PytestPluginManager-507"><span class="linenos">507</span></a>                    <span class="n">plugin_name</span><span class="o">=</span><span class="n">plugin_name</span><span class="p">,</span>
</span><span id="PytestPluginManager-508"><a href="#PytestPluginManager-508"><span class="linenos">508</span></a>                    <span class="n">manager</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-509"><a href="#PytestPluginManager-509"><span class="linenos">509</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager-510"><a href="#PytestPluginManager-510"><span class="linenos">510</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager-511"><a href="#PytestPluginManager-511"><span class="linenos">511</span></a>
</span><span id="PytestPluginManager-512"><a href="#PytestPluginManager-512"><span class="linenos">512</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">):</span>
</span><span id="PytestPluginManager-513"><a href="#PytestPluginManager-513"><span class="linenos">513</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">consider_module</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
</span><span id="PytestPluginManager-514"><a href="#PytestPluginManager-514"><span class="linenos">514</span></a>        <span class="k">return</span> <span class="n">plugin_name</span>
</span><span id="PytestPluginManager-515"><a href="#PytestPluginManager-515"><span class="linenos">515</span></a>
</span><span id="PytestPluginManager-516"><a href="#PytestPluginManager-516"><span class="linenos">516</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getplugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="PytestPluginManager-517"><a href="#PytestPluginManager-517"><span class="linenos">517</span></a>        <span class="c1"># Support deprecated naming because plugins (xdist e.g.) use it.</span>
</span><span id="PytestPluginManager-518"><a href="#PytestPluginManager-518"><span class="linenos">518</span></a>        <span class="n">plugin</span><span class="p">:</span> <span class="n">_PluggyPlugin</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-519"><a href="#PytestPluginManager-519"><span class="linenos">519</span></a>        <span class="k">return</span> <span class="n">plugin</span>
</span><span id="PytestPluginManager-520"><a href="#PytestPluginManager-520"><span class="linenos">520</span></a>
</span><span id="PytestPluginManager-521"><a href="#PytestPluginManager-521"><span class="linenos">521</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hasplugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PytestPluginManager-522"><a href="#PytestPluginManager-522"><span class="linenos">522</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether a plugin with the given name is registered.&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-523"><a href="#PytestPluginManager-523"><span class="linenos">523</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span><span id="PytestPluginManager-524"><a href="#PytestPluginManager-524"><span class="linenos">524</span></a>
</span><span id="PytestPluginManager-525"><a href="#PytestPluginManager-525"><span class="linenos">525</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-526"><a href="#PytestPluginManager-526"><span class="linenos">526</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-527"><a href="#PytestPluginManager-527"><span class="linenos">527</span></a>        <span class="c1"># XXX now that the pluginmanager exposes hookimpl(tryfirst...)</span>
</span><span id="PytestPluginManager-528"><a href="#PytestPluginManager-528"><span class="linenos">528</span></a>        <span class="c1"># we should remove tryfirst/trylast as markers.</span>
</span><span id="PytestPluginManager-529"><a href="#PytestPluginManager-529"><span class="linenos">529</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
</span><span id="PytestPluginManager-530"><a href="#PytestPluginManager-530"><span class="linenos">530</span></a>            <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager-531"><a href="#PytestPluginManager-531"><span class="linenos">531</span></a>            <span class="s2">&quot;tryfirst: mark a hook implementation function such that the &quot;</span>
</span><span id="PytestPluginManager-532"><a href="#PytestPluginManager-532"><span class="linenos">532</span></a>            <span class="s2">&quot;plugin machinery will try to call it first/as early as possible. &quot;</span>
</span><span id="PytestPluginManager-533"><a href="#PytestPluginManager-533"><span class="linenos">533</span></a>            <span class="s2">&quot;DEPRECATED, use @pytest.hookimpl(tryfirst=True) instead.&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager-534"><a href="#PytestPluginManager-534"><span class="linenos">534</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager-535"><a href="#PytestPluginManager-535"><span class="linenos">535</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
</span><span id="PytestPluginManager-536"><a href="#PytestPluginManager-536"><span class="linenos">536</span></a>            <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager-537"><a href="#PytestPluginManager-537"><span class="linenos">537</span></a>            <span class="s2">&quot;trylast: mark a hook implementation function such that the &quot;</span>
</span><span id="PytestPluginManager-538"><a href="#PytestPluginManager-538"><span class="linenos">538</span></a>            <span class="s2">&quot;plugin machinery will try to call it last/as late as possible. &quot;</span>
</span><span id="PytestPluginManager-539"><a href="#PytestPluginManager-539"><span class="linenos">539</span></a>            <span class="s2">&quot;DEPRECATED, use @pytest.hookimpl(trylast=True) instead.&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager-540"><a href="#PytestPluginManager-540"><span class="linenos">540</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager-541"><a href="#PytestPluginManager-541"><span class="linenos">541</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PytestPluginManager-542"><a href="#PytestPluginManager-542"><span class="linenos">542</span></a>
</span><span id="PytestPluginManager-543"><a href="#PytestPluginManager-543"><span class="linenos">543</span></a>    <span class="c1">#</span>
</span><span id="PytestPluginManager-544"><a href="#PytestPluginManager-544"><span class="linenos">544</span></a>    <span class="c1"># Internal API for local conftest plugin handling.</span>
</span><span id="PytestPluginManager-545"><a href="#PytestPluginManager-545"><span class="linenos">545</span></a>    <span class="c1">#</span>
</span><span id="PytestPluginManager-546"><a href="#PytestPluginManager-546"><span class="linenos">546</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_initial_conftests</span><span class="p">(</span>
</span><span id="PytestPluginManager-547"><a href="#PytestPluginManager-547"><span class="linenos">547</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-548"><a href="#PytestPluginManager-548"><span class="linenos">548</span></a>        <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span>
</span><span id="PytestPluginManager-549"><a href="#PytestPluginManager-549"><span class="linenos">549</span></a>        <span class="n">pyargs</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="PytestPluginManager-550"><a href="#PytestPluginManager-550"><span class="linenos">550</span></a>        <span class="n">noconftest</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="PytestPluginManager-551"><a href="#PytestPluginManager-551"><span class="linenos">551</span></a>        <span class="n">rootpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-552"><a href="#PytestPluginManager-552"><span class="linenos">552</span></a>        <span class="n">confcutdir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="PytestPluginManager-553"><a href="#PytestPluginManager-553"><span class="linenos">553</span></a>        <span class="n">invocation_dir</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-554"><a href="#PytestPluginManager-554"><span class="linenos">554</span></a>        <span class="n">importmode</span><span class="p">:</span> <span class="n">ImportMode</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="PytestPluginManager-555"><a href="#PytestPluginManager-555"><span class="linenos">555</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="PytestPluginManager-556"><a href="#PytestPluginManager-556"><span class="linenos">556</span></a>        <span class="n">consider_namespace_packages</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="PytestPluginManager-557"><a href="#PytestPluginManager-557"><span class="linenos">557</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-558"><a href="#PytestPluginManager-558"><span class="linenos">558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load initial conftest files given a preparsed &quot;namespace&quot;.</span>
</span><span id="PytestPluginManager-559"><a href="#PytestPluginManager-559"><span class="linenos">559</span></a>
</span><span id="PytestPluginManager-560"><a href="#PytestPluginManager-560"><span class="linenos">560</span></a><span class="sd">        As conftest files may add their own command line options which have</span>
</span><span id="PytestPluginManager-561"><a href="#PytestPluginManager-561"><span class="linenos">561</span></a><span class="sd">        arguments (&#39;--my-opt somepath&#39;) we might get some false positives.</span>
</span><span id="PytestPluginManager-562"><a href="#PytestPluginManager-562"><span class="linenos">562</span></a><span class="sd">        All builtin and 3rd party plugins will have been loaded, however, so</span>
</span><span id="PytestPluginManager-563"><a href="#PytestPluginManager-563"><span class="linenos">563</span></a><span class="sd">        common options will not confuse our logic here.</span>
</span><span id="PytestPluginManager-564"><a href="#PytestPluginManager-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-565"><a href="#PytestPluginManager-565"><span class="linenos">565</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_confcutdir</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PytestPluginManager-566"><a href="#PytestPluginManager-566"><span class="linenos">566</span></a>            <span class="n">absolutepath</span><span class="p">(</span><span class="n">invocation_dir</span> <span class="o">/</span> <span class="n">confcutdir</span><span class="p">)</span> <span class="k">if</span> <span class="n">confcutdir</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-567"><a href="#PytestPluginManager-567"><span class="linenos">567</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager-568"><a href="#PytestPluginManager-568"><span class="linenos">568</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_noconftest</span> <span class="o">=</span> <span class="n">noconftest</span>
</span><span id="PytestPluginManager-569"><a href="#PytestPluginManager-569"><span class="linenos">569</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_using_pyargs</span> <span class="o">=</span> <span class="n">pyargs</span>
</span><span id="PytestPluginManager-570"><a href="#PytestPluginManager-570"><span class="linenos">570</span></a>        <span class="n">foundanchor</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PytestPluginManager-571"><a href="#PytestPluginManager-571"><span class="linenos">571</span></a>        <span class="k">for</span> <span class="n">initial_path</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="PytestPluginManager-572"><a href="#PytestPluginManager-572"><span class="linenos">572</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">initial_path</span><span class="p">)</span>
</span><span id="PytestPluginManager-573"><a href="#PytestPluginManager-573"><span class="linenos">573</span></a>            <span class="c1"># remove node-id syntax</span>
</span><span id="PytestPluginManager-574"><a href="#PytestPluginManager-574"><span class="linenos">574</span></a>            <span class="n">i</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-575"><a href="#PytestPluginManager-575"><span class="linenos">575</span></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="PytestPluginManager-576"><a href="#PytestPluginManager-576"><span class="linenos">576</span></a>                <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span>
</span><span id="PytestPluginManager-577"><a href="#PytestPluginManager-577"><span class="linenos">577</span></a>            <span class="n">anchor</span> <span class="o">=</span> <span class="n">absolutepath</span><span class="p">(</span><span class="n">invocation_dir</span> <span class="o">/</span> <span class="n">path</span><span class="p">)</span>
</span><span id="PytestPluginManager-578"><a href="#PytestPluginManager-578"><span class="linenos">578</span></a>
</span><span id="PytestPluginManager-579"><a href="#PytestPluginManager-579"><span class="linenos">579</span></a>            <span class="c1"># Ensure we do not break if what appears to be an anchor</span>
</span><span id="PytestPluginManager-580"><a href="#PytestPluginManager-580"><span class="linenos">580</span></a>            <span class="c1"># is in fact a very long option (#10169, #11394).</span>
</span><span id="PytestPluginManager-581"><a href="#PytestPluginManager-581"><span class="linenos">581</span></a>            <span class="k">if</span> <span class="n">safe_exists</span><span class="p">(</span><span class="n">anchor</span><span class="p">):</span>
</span><span id="PytestPluginManager-582"><a href="#PytestPluginManager-582"><span class="linenos">582</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_try_load_conftest</span><span class="p">(</span>
</span><span id="PytestPluginManager-583"><a href="#PytestPluginManager-583"><span class="linenos">583</span></a>                    <span class="n">anchor</span><span class="p">,</span>
</span><span id="PytestPluginManager-584"><a href="#PytestPluginManager-584"><span class="linenos">584</span></a>                    <span class="n">importmode</span><span class="p">,</span>
</span><span id="PytestPluginManager-585"><a href="#PytestPluginManager-585"><span class="linenos">585</span></a>                    <span class="n">rootpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-586"><a href="#PytestPluginManager-586"><span class="linenos">586</span></a>                    <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">consider_namespace_packages</span><span class="p">,</span>
</span><span id="PytestPluginManager-587"><a href="#PytestPluginManager-587"><span class="linenos">587</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager-588"><a href="#PytestPluginManager-588"><span class="linenos">588</span></a>                <span class="n">foundanchor</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PytestPluginManager-589"><a href="#PytestPluginManager-589"><span class="linenos">589</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">foundanchor</span><span class="p">:</span>
</span><span id="PytestPluginManager-590"><a href="#PytestPluginManager-590"><span class="linenos">590</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_try_load_conftest</span><span class="p">(</span>
</span><span id="PytestPluginManager-591"><a href="#PytestPluginManager-591"><span class="linenos">591</span></a>                <span class="n">invocation_dir</span><span class="p">,</span>
</span><span id="PytestPluginManager-592"><a href="#PytestPluginManager-592"><span class="linenos">592</span></a>                <span class="n">importmode</span><span class="p">,</span>
</span><span id="PytestPluginManager-593"><a href="#PytestPluginManager-593"><span class="linenos">593</span></a>                <span class="n">rootpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-594"><a href="#PytestPluginManager-594"><span class="linenos">594</span></a>                <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">consider_namespace_packages</span><span class="p">,</span>
</span><span id="PytestPluginManager-595"><a href="#PytestPluginManager-595"><span class="linenos">595</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager-596"><a href="#PytestPluginManager-596"><span class="linenos">596</span></a>
</span><span id="PytestPluginManager-597"><a href="#PytestPluginManager-597"><span class="linenos">597</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_is_in_confcutdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PytestPluginManager-598"><a href="#PytestPluginManager-598"><span class="linenos">598</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether to consider the given path to load conftests from.&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-599"><a href="#PytestPluginManager-599"><span class="linenos">599</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confcutdir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-600"><a href="#PytestPluginManager-600"><span class="linenos">600</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="PytestPluginManager-601"><a href="#PytestPluginManager-601"><span class="linenos">601</span></a>        <span class="c1"># The semantics here are literally:</span>
</span><span id="PytestPluginManager-602"><a href="#PytestPluginManager-602"><span class="linenos">602</span></a>        <span class="c1">#   Do not load a conftest if it is found upwards from confcut dir.</span>
</span><span id="PytestPluginManager-603"><a href="#PytestPluginManager-603"><span class="linenos">603</span></a>        <span class="c1"># But this is *not* the same as:</span>
</span><span id="PytestPluginManager-604"><a href="#PytestPluginManager-604"><span class="linenos">604</span></a>        <span class="c1">#   Load only conftests from confcutdir or below.</span>
</span><span id="PytestPluginManager-605"><a href="#PytestPluginManager-605"><span class="linenos">605</span></a>        <span class="c1"># At first glance they might seem the same thing, however we do support use cases where</span>
</span><span id="PytestPluginManager-606"><a href="#PytestPluginManager-606"><span class="linenos">606</span></a>        <span class="c1"># we want to load conftests that are not found in confcutdir or below, but are found</span>
</span><span id="PytestPluginManager-607"><a href="#PytestPluginManager-607"><span class="linenos">607</span></a>        <span class="c1"># in completely different directory hierarchies like packages installed</span>
</span><span id="PytestPluginManager-608"><a href="#PytestPluginManager-608"><span class="linenos">608</span></a>        <span class="c1"># in out-of-source trees.</span>
</span><span id="PytestPluginManager-609"><a href="#PytestPluginManager-609"><span class="linenos">609</span></a>        <span class="c1"># (see #9767 for a regression where the logic was inverted).</span>
</span><span id="PytestPluginManager-610"><a href="#PytestPluginManager-610"><span class="linenos">610</span></a>        <span class="k">return</span> <span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confcutdir</span><span class="o">.</span><span class="n">parents</span>
</span><span id="PytestPluginManager-611"><a href="#PytestPluginManager-611"><span class="linenos">611</span></a>
</span><span id="PytestPluginManager-612"><a href="#PytestPluginManager-612"><span class="linenos">612</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_try_load_conftest</span><span class="p">(</span>
</span><span id="PytestPluginManager-613"><a href="#PytestPluginManager-613"><span class="linenos">613</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-614"><a href="#PytestPluginManager-614"><span class="linenos">614</span></a>        <span class="n">anchor</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-615"><a href="#PytestPluginManager-615"><span class="linenos">615</span></a>        <span class="n">importmode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ImportMode</span><span class="p">,</span>
</span><span id="PytestPluginManager-616"><a href="#PytestPluginManager-616"><span class="linenos">616</span></a>        <span class="n">rootpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-617"><a href="#PytestPluginManager-617"><span class="linenos">617</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="PytestPluginManager-618"><a href="#PytestPluginManager-618"><span class="linenos">618</span></a>        <span class="n">consider_namespace_packages</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="PytestPluginManager-619"><a href="#PytestPluginManager-619"><span class="linenos">619</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-620"><a href="#PytestPluginManager-620"><span class="linenos">620</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_loadconftestmodules</span><span class="p">(</span>
</span><span id="PytestPluginManager-621"><a href="#PytestPluginManager-621"><span class="linenos">621</span></a>            <span class="n">anchor</span><span class="p">,</span>
</span><span id="PytestPluginManager-622"><a href="#PytestPluginManager-622"><span class="linenos">622</span></a>            <span class="n">importmode</span><span class="p">,</span>
</span><span id="PytestPluginManager-623"><a href="#PytestPluginManager-623"><span class="linenos">623</span></a>            <span class="n">rootpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-624"><a href="#PytestPluginManager-624"><span class="linenos">624</span></a>            <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">consider_namespace_packages</span><span class="p">,</span>
</span><span id="PytestPluginManager-625"><a href="#PytestPluginManager-625"><span class="linenos">625</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager-626"><a href="#PytestPluginManager-626"><span class="linenos">626</span></a>        <span class="c1"># let&#39;s also consider test* subdirs</span>
</span><span id="PytestPluginManager-627"><a href="#PytestPluginManager-627"><span class="linenos">627</span></a>        <span class="k">if</span> <span class="n">anchor</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="PytestPluginManager-628"><a href="#PytestPluginManager-628"><span class="linenos">628</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">anchor</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;test*&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-629"><a href="#PytestPluginManager-629"><span class="linenos">629</span></a>                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="PytestPluginManager-630"><a href="#PytestPluginManager-630"><span class="linenos">630</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_loadconftestmodules</span><span class="p">(</span>
</span><span id="PytestPluginManager-631"><a href="#PytestPluginManager-631"><span class="linenos">631</span></a>                        <span class="n">x</span><span class="p">,</span>
</span><span id="PytestPluginManager-632"><a href="#PytestPluginManager-632"><span class="linenos">632</span></a>                        <span class="n">importmode</span><span class="p">,</span>
</span><span id="PytestPluginManager-633"><a href="#PytestPluginManager-633"><span class="linenos">633</span></a>                        <span class="n">rootpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-634"><a href="#PytestPluginManager-634"><span class="linenos">634</span></a>                        <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">consider_namespace_packages</span><span class="p">,</span>
</span><span id="PytestPluginManager-635"><a href="#PytestPluginManager-635"><span class="linenos">635</span></a>                    <span class="p">)</span>
</span><span id="PytestPluginManager-636"><a href="#PytestPluginManager-636"><span class="linenos">636</span></a>
</span><span id="PytestPluginManager-637"><a href="#PytestPluginManager-637"><span class="linenos">637</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_loadconftestmodules</span><span class="p">(</span>
</span><span id="PytestPluginManager-638"><a href="#PytestPluginManager-638"><span class="linenos">638</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-639"><a href="#PytestPluginManager-639"><span class="linenos">639</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-640"><a href="#PytestPluginManager-640"><span class="linenos">640</span></a>        <span class="n">importmode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ImportMode</span><span class="p">,</span>
</span><span id="PytestPluginManager-641"><a href="#PytestPluginManager-641"><span class="linenos">641</span></a>        <span class="n">rootpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-642"><a href="#PytestPluginManager-642"><span class="linenos">642</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="PytestPluginManager-643"><a href="#PytestPluginManager-643"><span class="linenos">643</span></a>        <span class="n">consider_namespace_packages</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="PytestPluginManager-644"><a href="#PytestPluginManager-644"><span class="linenos">644</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-645"><a href="#PytestPluginManager-645"><span class="linenos">645</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_noconftest</span><span class="p">:</span>
</span><span id="PytestPluginManager-646"><a href="#PytestPluginManager-646"><span class="linenos">646</span></a>            <span class="k">return</span>
</span><span id="PytestPluginManager-647"><a href="#PytestPluginManager-647"><span class="linenos">647</span></a>
</span><span id="PytestPluginManager-648"><a href="#PytestPluginManager-648"><span class="linenos">648</span></a>        <span class="n">directory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_directory</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="PytestPluginManager-649"><a href="#PytestPluginManager-649"><span class="linenos">649</span></a>
</span><span id="PytestPluginManager-650"><a href="#PytestPluginManager-650"><span class="linenos">650</span></a>        <span class="c1"># Optimization: avoid repeated searches in the same directory.</span>
</span><span id="PytestPluginManager-651"><a href="#PytestPluginManager-651"><span class="linenos">651</span></a>        <span class="c1"># Assumes always called with same importmode and rootpath.</span>
</span><span id="PytestPluginManager-652"><a href="#PytestPluginManager-652"><span class="linenos">652</span></a>        <span class="k">if</span> <span class="n">directory</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dirpath2confmods</span><span class="p">:</span>
</span><span id="PytestPluginManager-653"><a href="#PytestPluginManager-653"><span class="linenos">653</span></a>            <span class="k">return</span>
</span><span id="PytestPluginManager-654"><a href="#PytestPluginManager-654"><span class="linenos">654</span></a>
</span><span id="PytestPluginManager-655"><a href="#PytestPluginManager-655"><span class="linenos">655</span></a>        <span class="n">clist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PytestPluginManager-656"><a href="#PytestPluginManager-656"><span class="linenos">656</span></a>        <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">((</span><span class="n">directory</span><span class="p">,</span> <span class="o">*</span><span class="n">directory</span><span class="o">.</span><span class="n">parents</span><span class="p">)):</span>
</span><span id="PytestPluginManager-657"><a href="#PytestPluginManager-657"><span class="linenos">657</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_in_confcutdir</span><span class="p">(</span><span class="n">parent</span><span class="p">):</span>
</span><span id="PytestPluginManager-658"><a href="#PytestPluginManager-658"><span class="linenos">658</span></a>                <span class="n">conftestpath</span> <span class="o">=</span> <span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;conftest.py&quot;</span>
</span><span id="PytestPluginManager-659"><a href="#PytestPluginManager-659"><span class="linenos">659</span></a>                <span class="k">if</span> <span class="n">conftestpath</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="PytestPluginManager-660"><a href="#PytestPluginManager-660"><span class="linenos">660</span></a>                    <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_importconftest</span><span class="p">(</span>
</span><span id="PytestPluginManager-661"><a href="#PytestPluginManager-661"><span class="linenos">661</span></a>                        <span class="n">conftestpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-662"><a href="#PytestPluginManager-662"><span class="linenos">662</span></a>                        <span class="n">importmode</span><span class="p">,</span>
</span><span id="PytestPluginManager-663"><a href="#PytestPluginManager-663"><span class="linenos">663</span></a>                        <span class="n">rootpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-664"><a href="#PytestPluginManager-664"><span class="linenos">664</span></a>                        <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">consider_namespace_packages</span><span class="p">,</span>
</span><span id="PytestPluginManager-665"><a href="#PytestPluginManager-665"><span class="linenos">665</span></a>                    <span class="p">)</span>
</span><span id="PytestPluginManager-666"><a href="#PytestPluginManager-666"><span class="linenos">666</span></a>                    <span class="n">clist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
</span><span id="PytestPluginManager-667"><a href="#PytestPluginManager-667"><span class="linenos">667</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dirpath2confmods</span><span class="p">[</span><span class="n">directory</span><span class="p">]</span> <span class="o">=</span> <span class="n">clist</span>
</span><span id="PytestPluginManager-668"><a href="#PytestPluginManager-668"><span class="linenos">668</span></a>
</span><span id="PytestPluginManager-669"><a href="#PytestPluginManager-669"><span class="linenos">669</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_getconftestmodules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">]:</span>
</span><span id="PytestPluginManager-670"><a href="#PytestPluginManager-670"><span class="linenos">670</span></a>        <span class="n">directory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_directory</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="PytestPluginManager-671"><a href="#PytestPluginManager-671"><span class="linenos">671</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dirpath2confmods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="p">())</span>
</span><span id="PytestPluginManager-672"><a href="#PytestPluginManager-672"><span class="linenos">672</span></a>
</span><span id="PytestPluginManager-673"><a href="#PytestPluginManager-673"><span class="linenos">673</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_rget_with_confmod</span><span class="p">(</span>
</span><span id="PytestPluginManager-674"><a href="#PytestPluginManager-674"><span class="linenos">674</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-675"><a href="#PytestPluginManager-675"><span class="linenos">675</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="PytestPluginManager-676"><a href="#PytestPluginManager-676"><span class="linenos">676</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-677"><a href="#PytestPluginManager-677"><span class="linenos">677</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="PytestPluginManager-678"><a href="#PytestPluginManager-678"><span class="linenos">678</span></a>        <span class="n">modules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getconftestmodules</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="PytestPluginManager-679"><a href="#PytestPluginManager-679"><span class="linenos">679</span></a>        <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">modules</span><span class="p">):</span>
</span><span id="PytestPluginManager-680"><a href="#PytestPluginManager-680"><span class="linenos">680</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager-681"><a href="#PytestPluginManager-681"><span class="linenos">681</span></a>                <span class="k">return</span> <span class="n">mod</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-682"><a href="#PytestPluginManager-682"><span class="linenos">682</span></a>            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="PytestPluginManager-683"><a href="#PytestPluginManager-683"><span class="linenos">683</span></a>                <span class="k">continue</span>
</span><span id="PytestPluginManager-684"><a href="#PytestPluginManager-684"><span class="linenos">684</span></a>        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-685"><a href="#PytestPluginManager-685"><span class="linenos">685</span></a>
</span><span id="PytestPluginManager-686"><a href="#PytestPluginManager-686"><span class="linenos">686</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_importconftest</span><span class="p">(</span>
</span><span id="PytestPluginManager-687"><a href="#PytestPluginManager-687"><span class="linenos">687</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-688"><a href="#PytestPluginManager-688"><span class="linenos">688</span></a>        <span class="n">conftestpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-689"><a href="#PytestPluginManager-689"><span class="linenos">689</span></a>        <span class="n">importmode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ImportMode</span><span class="p">,</span>
</span><span id="PytestPluginManager-690"><a href="#PytestPluginManager-690"><span class="linenos">690</span></a>        <span class="n">rootpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-691"><a href="#PytestPluginManager-691"><span class="linenos">691</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="PytestPluginManager-692"><a href="#PytestPluginManager-692"><span class="linenos">692</span></a>        <span class="n">consider_namespace_packages</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="PytestPluginManager-693"><a href="#PytestPluginManager-693"><span class="linenos">693</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">:</span>
</span><span id="PytestPluginManager-694"><a href="#PytestPluginManager-694"><span class="linenos">694</span></a>        <span class="n">conftestpath_plugin_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">conftestpath</span><span class="p">)</span>
</span><span id="PytestPluginManager-695"><a href="#PytestPluginManager-695"><span class="linenos">695</span></a>        <span class="n">existing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">conftestpath_plugin_name</span><span class="p">)</span>
</span><span id="PytestPluginManager-696"><a href="#PytestPluginManager-696"><span class="linenos">696</span></a>        <span class="k">if</span> <span class="n">existing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-697"><a href="#PytestPluginManager-697"><span class="linenos">697</span></a>            <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">,</span> <span class="n">existing</span><span class="p">)</span>
</span><span id="PytestPluginManager-698"><a href="#PytestPluginManager-698"><span class="linenos">698</span></a>
</span><span id="PytestPluginManager-699"><a href="#PytestPluginManager-699"><span class="linenos">699</span></a>        <span class="c1"># conftest.py files there are not in a Python package all have module</span>
</span><span id="PytestPluginManager-700"><a href="#PytestPluginManager-700"><span class="linenos">700</span></a>        <span class="c1"># name &quot;conftest&quot;, and thus conflict with each other. Clear the existing</span>
</span><span id="PytestPluginManager-701"><a href="#PytestPluginManager-701"><span class="linenos">701</span></a>        <span class="c1"># before loading the new one, otherwise the existing one will be</span>
</span><span id="PytestPluginManager-702"><a href="#PytestPluginManager-702"><span class="linenos">702</span></a>        <span class="c1"># returned from the module cache.</span>
</span><span id="PytestPluginManager-703"><a href="#PytestPluginManager-703"><span class="linenos">703</span></a>        <span class="n">pkgpath</span> <span class="o">=</span> <span class="n">resolve_package_path</span><span class="p">(</span><span class="n">conftestpath</span><span class="p">)</span>
</span><span id="PytestPluginManager-704"><a href="#PytestPluginManager-704"><span class="linenos">704</span></a>        <span class="k">if</span> <span class="n">pkgpath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-705"><a href="#PytestPluginManager-705"><span class="linenos">705</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager-706"><a href="#PytestPluginManager-706"><span class="linenos">706</span></a>                <span class="k">del</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">conftestpath</span><span class="o">.</span><span class="n">stem</span><span class="p">]</span>
</span><span id="PytestPluginManager-707"><a href="#PytestPluginManager-707"><span class="linenos">707</span></a>            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="PytestPluginManager-708"><a href="#PytestPluginManager-708"><span class="linenos">708</span></a>                <span class="k">pass</span>
</span><span id="PytestPluginManager-709"><a href="#PytestPluginManager-709"><span class="linenos">709</span></a>
</span><span id="PytestPluginManager-710"><a href="#PytestPluginManager-710"><span class="linenos">710</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager-711"><a href="#PytestPluginManager-711"><span class="linenos">711</span></a>            <span class="n">mod</span> <span class="o">=</span> <span class="n">import_path</span><span class="p">(</span>
</span><span id="PytestPluginManager-712"><a href="#PytestPluginManager-712"><span class="linenos">712</span></a>                <span class="n">conftestpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-713"><a href="#PytestPluginManager-713"><span class="linenos">713</span></a>                <span class="n">mode</span><span class="o">=</span><span class="n">importmode</span><span class="p">,</span>
</span><span id="PytestPluginManager-714"><a href="#PytestPluginManager-714"><span class="linenos">714</span></a>                <span class="n">root</span><span class="o">=</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="PytestPluginManager-715"><a href="#PytestPluginManager-715"><span class="linenos">715</span></a>                <span class="n">consider_namespace_packages</span><span class="o">=</span><span class="n">consider_namespace_packages</span><span class="p">,</span>
</span><span id="PytestPluginManager-716"><a href="#PytestPluginManager-716"><span class="linenos">716</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager-717"><a href="#PytestPluginManager-717"><span class="linenos">717</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PytestPluginManager-718"><a href="#PytestPluginManager-718"><span class="linenos">718</span></a>            <span class="k">assert</span> <span class="n">e</span><span class="o">.</span><span class="n">__traceback__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="PytestPluginManager-719"><a href="#PytestPluginManager-719"><span class="linenos">719</span></a>            <span class="k">raise</span> <span class="n">ConftestImportFailure</span><span class="p">(</span><span class="n">conftestpath</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">e</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="PytestPluginManager-720"><a href="#PytestPluginManager-720"><span class="linenos">720</span></a>
</span><span id="PytestPluginManager-721"><a href="#PytestPluginManager-721"><span class="linenos">721</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_check_non_top_pytest_plugins</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">conftestpath</span><span class="p">)</span>
</span><span id="PytestPluginManager-722"><a href="#PytestPluginManager-722"><span class="linenos">722</span></a>
</span><span id="PytestPluginManager-723"><a href="#PytestPluginManager-723"><span class="linenos">723</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_conftest_plugins</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
</span><span id="PytestPluginManager-724"><a href="#PytestPluginManager-724"><span class="linenos">724</span></a>        <span class="n">dirpath</span> <span class="o">=</span> <span class="n">conftestpath</span><span class="o">.</span><span class="n">parent</span>
</span><span id="PytestPluginManager-725"><a href="#PytestPluginManager-725"><span class="linenos">725</span></a>        <span class="k">if</span> <span class="n">dirpath</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dirpath2confmods</span><span class="p">:</span>
</span><span id="PytestPluginManager-726"><a href="#PytestPluginManager-726"><span class="linenos">726</span></a>            <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">mods</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dirpath2confmods</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PytestPluginManager-727"><a href="#PytestPluginManager-727"><span class="linenos">727</span></a>                <span class="k">if</span> <span class="n">dirpath</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">parents</span> <span class="ow">or</span> <span class="n">path</span> <span class="o">==</span> <span class="n">dirpath</span><span class="p">:</span>
</span><span id="PytestPluginManager-728"><a href="#PytestPluginManager-728"><span class="linenos">728</span></a>                    <span class="k">if</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">mods</span><span class="p">:</span>
</span><span id="PytestPluginManager-729"><a href="#PytestPluginManager-729"><span class="linenos">729</span></a>                        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span>
</span><span id="PytestPluginManager-730"><a href="#PytestPluginManager-730"><span class="linenos">730</span></a>                            <span class="sa">f</span><span class="s2">&quot;While trying to load conftest path </span><span class="si">{</span><span class="n">conftestpath</span><span class="si">!s}</span><span class="s2">, &quot;</span>
</span><span id="PytestPluginManager-731"><a href="#PytestPluginManager-731"><span class="linenos">731</span></a>                            <span class="sa">f</span><span class="s2">&quot;found that the module </span><span class="si">{</span><span class="n">mod</span><span class="si">}</span><span class="s2"> is already loaded with path </span><span class="si">{</span><span class="n">mod</span><span class="o">.</span><span class="vm">__file__</span><span class="si">}</span><span class="s2">. &quot;</span>
</span><span id="PytestPluginManager-732"><a href="#PytestPluginManager-732"><span class="linenos">732</span></a>                            <span class="s2">&quot;This is not supposed to happen. Please report this issue to pytest.&quot;</span>
</span><span id="PytestPluginManager-733"><a href="#PytestPluginManager-733"><span class="linenos">733</span></a>                        <span class="p">)</span>
</span><span id="PytestPluginManager-734"><a href="#PytestPluginManager-734"><span class="linenos">734</span></a>                    <span class="n">mods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
</span><span id="PytestPluginManager-735"><a href="#PytestPluginManager-735"><span class="linenos">735</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;loading conftestmodule </span><span class="si">{</span><span class="n">mod</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-736"><a href="#PytestPluginManager-736"><span class="linenos">736</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consider_conftest</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">registration_name</span><span class="o">=</span><span class="n">conftestpath_plugin_name</span><span class="p">)</span>
</span><span id="PytestPluginManager-737"><a href="#PytestPluginManager-737"><span class="linenos">737</span></a>        <span class="k">return</span> <span class="n">mod</span>
</span><span id="PytestPluginManager-738"><a href="#PytestPluginManager-738"><span class="linenos">738</span></a>
</span><span id="PytestPluginManager-739"><a href="#PytestPluginManager-739"><span class="linenos">739</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_non_top_pytest_plugins</span><span class="p">(</span>
</span><span id="PytestPluginManager-740"><a href="#PytestPluginManager-740"><span class="linenos">740</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager-741"><a href="#PytestPluginManager-741"><span class="linenos">741</span></a>        <span class="n">mod</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">,</span>
</span><span id="PytestPluginManager-742"><a href="#PytestPluginManager-742"><span class="linenos">742</span></a>        <span class="n">conftestpath</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
</span><span id="PytestPluginManager-743"><a href="#PytestPluginManager-743"><span class="linenos">743</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-744"><a href="#PytestPluginManager-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="PytestPluginManager-745"><a href="#PytestPluginManager-745"><span class="linenos">745</span></a>            <span class="nb">hasattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s2">&quot;pytest_plugins&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-746"><a href="#PytestPluginManager-746"><span class="linenos">746</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span>
</span><span id="PytestPluginManager-747"><a href="#PytestPluginManager-747"><span class="linenos">747</span></a>            <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_using_pyargs</span>
</span><span id="PytestPluginManager-748"><a href="#PytestPluginManager-748"><span class="linenos">748</span></a>        <span class="p">):</span>
</span><span id="PytestPluginManager-749"><a href="#PytestPluginManager-749"><span class="linenos">749</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PytestPluginManager-750"><a href="#PytestPluginManager-750"><span class="linenos">750</span></a>                <span class="s2">&quot;Defining &#39;pytest_plugins&#39; in a non-top-level conftest is no longer supported:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-751"><a href="#PytestPluginManager-751"><span class="linenos">751</span></a>                <span class="s2">&quot;It affects the entire test suite instead of just below the conftest as expected.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-752"><a href="#PytestPluginManager-752"><span class="linenos">752</span></a>                <span class="s2">&quot;  </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-753"><a href="#PytestPluginManager-753"><span class="linenos">753</span></a>                <span class="s2">&quot;Please move it to a top level conftest file at the rootdir:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-754"><a href="#PytestPluginManager-754"><span class="linenos">754</span></a>                <span class="s2">&quot;  </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-755"><a href="#PytestPluginManager-755"><span class="linenos">755</span></a>                <span class="s2">&quot;For more information, visit:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-756"><a href="#PytestPluginManager-756"><span class="linenos">756</span></a>                <span class="s2">&quot;  https://docs.pytest.org/en/stable/deprecations.html#pytest-plugins-in-non-top-level-conftest-files&quot;</span>
</span><span id="PytestPluginManager-757"><a href="#PytestPluginManager-757"><span class="linenos">757</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager-758"><a href="#PytestPluginManager-758"><span class="linenos">758</span></a>            <span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">conftestpath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confcutdir</span><span class="p">),</span> <span class="n">pytrace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="PytestPluginManager-759"><a href="#PytestPluginManager-759"><span class="linenos">759</span></a>
</span><span id="PytestPluginManager-760"><a href="#PytestPluginManager-760"><span class="linenos">760</span></a>    <span class="c1">#</span>
</span><span id="PytestPluginManager-761"><a href="#PytestPluginManager-761"><span class="linenos">761</span></a>    <span class="c1"># API for bootstrapping plugin loading</span>
</span><span id="PytestPluginManager-762"><a href="#PytestPluginManager-762"><span class="linenos">762</span></a>    <span class="c1">#</span>
</span><span id="PytestPluginManager-763"><a href="#PytestPluginManager-763"><span class="linenos">763</span></a>    <span class="c1">#</span>
</span><span id="PytestPluginManager-764"><a href="#PytestPluginManager-764"><span class="linenos">764</span></a>
</span><span id="PytestPluginManager-765"><a href="#PytestPluginManager-765"><span class="linenos">765</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_preparse</span><span class="p">(</span>
</span><span id="PytestPluginManager-766"><a href="#PytestPluginManager-766"><span class="linenos">766</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">exclude_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PytestPluginManager-767"><a href="#PytestPluginManager-767"><span class="linenos">767</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-768"><a href="#PytestPluginManager-768"><span class="linenos">768</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-769"><a href="#PytestPluginManager-769"><span class="linenos">769</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="PytestPluginManager-770"><a href="#PytestPluginManager-770"><span class="linenos">770</span></a>        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="PytestPluginManager-771"><a href="#PytestPluginManager-771"><span class="linenos">771</span></a>        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
</span><span id="PytestPluginManager-772"><a href="#PytestPluginManager-772"><span class="linenos">772</span></a>            <span class="n">opt</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="PytestPluginManager-773"><a href="#PytestPluginManager-773"><span class="linenos">773</span></a>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="PytestPluginManager-774"><a href="#PytestPluginManager-774"><span class="linenos">774</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">opt</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="PytestPluginManager-775"><a href="#PytestPluginManager-775"><span class="linenos">775</span></a>                <span class="k">if</span> <span class="n">opt</span> <span class="o">==</span> <span class="s2">&quot;-p&quot;</span><span class="p">:</span>
</span><span id="PytestPluginManager-776"><a href="#PytestPluginManager-776"><span class="linenos">776</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager-777"><a href="#PytestPluginManager-777"><span class="linenos">777</span></a>                        <span class="n">parg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="PytestPluginManager-778"><a href="#PytestPluginManager-778"><span class="linenos">778</span></a>                    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
</span><span id="PytestPluginManager-779"><a href="#PytestPluginManager-779"><span class="linenos">779</span></a>                        <span class="k">return</span>
</span><span id="PytestPluginManager-780"><a href="#PytestPluginManager-780"><span class="linenos">780</span></a>                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="PytestPluginManager-781"><a href="#PytestPluginManager-781"><span class="linenos">781</span></a>                <span class="k">elif</span> <span class="n">opt</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-782"><a href="#PytestPluginManager-782"><span class="linenos">782</span></a>                    <span class="n">parg</span> <span class="o">=</span> <span class="n">opt</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
</span><span id="PytestPluginManager-783"><a href="#PytestPluginManager-783"><span class="linenos">783</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PytestPluginManager-784"><a href="#PytestPluginManager-784"><span class="linenos">784</span></a>                    <span class="k">continue</span>
</span><span id="PytestPluginManager-785"><a href="#PytestPluginManager-785"><span class="linenos">785</span></a>                <span class="n">parg</span> <span class="o">=</span> <span class="n">parg</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="PytestPluginManager-786"><a href="#PytestPluginManager-786"><span class="linenos">786</span></a>                <span class="k">if</span> <span class="n">exclude_only</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">parg</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;no:&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-787"><a href="#PytestPluginManager-787"><span class="linenos">787</span></a>                    <span class="k">continue</span>
</span><span id="PytestPluginManager-788"><a href="#PytestPluginManager-788"><span class="linenos">788</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">consider_pluginarg</span><span class="p">(</span><span class="n">parg</span><span class="p">)</span>
</span><span id="PytestPluginManager-789"><a href="#PytestPluginManager-789"><span class="linenos">789</span></a>
</span><span id="PytestPluginManager-790"><a href="#PytestPluginManager-790"><span class="linenos">790</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_pluginarg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-791"><a href="#PytestPluginManager-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-792"><a href="#PytestPluginManager-792"><span class="linenos">792</span></a>        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;no:&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-793"><a href="#PytestPluginManager-793"><span class="linenos">793</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">arg</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="PytestPluginManager-794"><a href="#PytestPluginManager-794"><span class="linenos">794</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">essential_plugins</span><span class="p">:</span>
</span><span id="PytestPluginManager-795"><a href="#PytestPluginManager-795"><span class="linenos">795</span></a>                <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;plugin </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> cannot be disabled&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-796"><a href="#PytestPluginManager-796"><span class="linenos">796</span></a>
</span><span id="PytestPluginManager-797"><a href="#PytestPluginManager-797"><span class="linenos">797</span></a>            <span class="c1"># PR #4304: remove stepwise if cacheprovider is blocked.</span>
</span><span id="PytestPluginManager-798"><a href="#PytestPluginManager-798"><span class="linenos">798</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cacheprovider&quot;</span><span class="p">:</span>
</span><span id="PytestPluginManager-799"><a href="#PytestPluginManager-799"><span class="linenos">799</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="s2">&quot;stepwise&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-800"><a href="#PytestPluginManager-800"><span class="linenos">800</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="s2">&quot;pytest_stepwise&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager-801"><a href="#PytestPluginManager-801"><span class="linenos">801</span></a>
</span><span id="PytestPluginManager-802"><a href="#PytestPluginManager-802"><span class="linenos">802</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-803"><a href="#PytestPluginManager-803"><span class="linenos">803</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-804"><a href="#PytestPluginManager-804"><span class="linenos">804</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-805"><a href="#PytestPluginManager-805"><span class="linenos">805</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PytestPluginManager-806"><a href="#PytestPluginManager-806"><span class="linenos">806</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="PytestPluginManager-807"><a href="#PytestPluginManager-807"><span class="linenos">807</span></a>            <span class="c1"># Unblock the plugin.</span>
</span><span id="PytestPluginManager-808"><a href="#PytestPluginManager-808"><span class="linenos">808</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">unblock</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-809"><a href="#PytestPluginManager-809"><span class="linenos">809</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager-810"><a href="#PytestPluginManager-810"><span class="linenos">810</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unblock</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager-811"><a href="#PytestPluginManager-811"><span class="linenos">811</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">import_plugin</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">consider_entry_points</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="PytestPluginManager-812"><a href="#PytestPluginManager-812"><span class="linenos">812</span></a>
</span><span id="PytestPluginManager-813"><a href="#PytestPluginManager-813"><span class="linenos">813</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_conftest</span><span class="p">(</span>
</span><span id="PytestPluginManager-814"><a href="#PytestPluginManager-814"><span class="linenos">814</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">conftestmodule</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">,</span> <span class="n">registration_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="PytestPluginManager-815"><a href="#PytestPluginManager-815"><span class="linenos">815</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-816"><a href="#PytestPluginManager-816"><span class="linenos">816</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-817"><a href="#PytestPluginManager-817"><span class="linenos">817</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">conftestmodule</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">registration_name</span><span class="p">)</span>
</span><span id="PytestPluginManager-818"><a href="#PytestPluginManager-818"><span class="linenos">818</span></a>
</span><span id="PytestPluginManager-819"><a href="#PytestPluginManager-819"><span class="linenos">819</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_env</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-820"><a href="#PytestPluginManager-820"><span class="linenos">820</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-821"><a href="#PytestPluginManager-821"><span class="linenos">821</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_import_plugin_specs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_PLUGINS&quot;</span><span class="p">))</span>
</span><span id="PytestPluginManager-822"><a href="#PytestPluginManager-822"><span class="linenos">822</span></a>
</span><span id="PytestPluginManager-823"><a href="#PytestPluginManager-823"><span class="linenos">823</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-824"><a href="#PytestPluginManager-824"><span class="linenos">824</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-825"><a href="#PytestPluginManager-825"><span class="linenos">825</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_import_plugin_specs</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s2">&quot;pytest_plugins&quot;</span><span class="p">,</span> <span class="p">[]))</span>
</span><span id="PytestPluginManager-826"><a href="#PytestPluginManager-826"><span class="linenos">826</span></a>
</span><span id="PytestPluginManager-827"><a href="#PytestPluginManager-827"><span class="linenos">827</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_import_plugin_specs</span><span class="p">(</span>
</span><span id="PytestPluginManager-828"><a href="#PytestPluginManager-828"><span class="linenos">828</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="PytestPluginManager-829"><a href="#PytestPluginManager-829"><span class="linenos">829</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-830"><a href="#PytestPluginManager-830"><span class="linenos">830</span></a>        <span class="n">plugins</span> <span class="o">=</span> <span class="n">_get_plugin_specs_as_list</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
</span><span id="PytestPluginManager-831"><a href="#PytestPluginManager-831"><span class="linenos">831</span></a>        <span class="k">for</span> <span class="n">import_spec</span> <span class="ow">in</span> <span class="n">plugins</span><span class="p">:</span>
</span><span id="PytestPluginManager-832"><a href="#PytestPluginManager-832"><span class="linenos">832</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">import_plugin</span><span class="p">(</span><span class="n">import_spec</span><span class="p">)</span>
</span><span id="PytestPluginManager-833"><a href="#PytestPluginManager-833"><span class="linenos">833</span></a>
</span><span id="PytestPluginManager-834"><a href="#PytestPluginManager-834"><span class="linenos">834</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">import_plugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">consider_entry_points</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-835"><a href="#PytestPluginManager-835"><span class="linenos">835</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Import a plugin with ``modname``.</span>
</span><span id="PytestPluginManager-836"><a href="#PytestPluginManager-836"><span class="linenos">836</span></a>
</span><span id="PytestPluginManager-837"><a href="#PytestPluginManager-837"><span class="linenos">837</span></a><span class="sd">        If ``consider_entry_points`` is True, entry point names are also</span>
</span><span id="PytestPluginManager-838"><a href="#PytestPluginManager-838"><span class="linenos">838</span></a><span class="sd">        considered to find a plugin.</span>
</span><span id="PytestPluginManager-839"><a href="#PytestPluginManager-839"><span class="linenos">839</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PytestPluginManager-840"><a href="#PytestPluginManager-840"><span class="linenos">840</span></a>        <span class="c1"># Most often modname refers to builtin modules, e.g. &quot;pytester&quot;,</span>
</span><span id="PytestPluginManager-841"><a href="#PytestPluginManager-841"><span class="linenos">841</span></a>        <span class="c1"># &quot;terminal&quot; or &quot;capture&quot;.  Those plugins are registered under their</span>
</span><span id="PytestPluginManager-842"><a href="#PytestPluginManager-842"><span class="linenos">842</span></a>        <span class="c1"># basename for historic purposes but must be imported with the</span>
</span><span id="PytestPluginManager-843"><a href="#PytestPluginManager-843"><span class="linenos">843</span></a>        <span class="c1"># _pytest prefix.</span>
</span><span id="PytestPluginManager-844"><a href="#PytestPluginManager-844"><span class="linenos">844</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PytestPluginManager-845"><a href="#PytestPluginManager-845"><span class="linenos">845</span></a>            <span class="n">modname</span><span class="p">,</span> <span class="nb">str</span>
</span><span id="PytestPluginManager-846"><a href="#PytestPluginManager-846"><span class="linenos">846</span></a>        <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;module name as text required, got </span><span class="si">{</span><span class="n">modname</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager-847"><a href="#PytestPluginManager-847"><span class="linenos">847</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_blocked</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager-848"><a href="#PytestPluginManager-848"><span class="linenos">848</span></a>            <span class="k">return</span>
</span><span id="PytestPluginManager-849"><a href="#PytestPluginManager-849"><span class="linenos">849</span></a>
</span><span id="PytestPluginManager-850"><a href="#PytestPluginManager-850"><span class="linenos">850</span></a>        <span class="n">importspec</span> <span class="o">=</span> <span class="s2">&quot;_pytest.&quot;</span> <span class="o">+</span> <span class="n">modname</span> <span class="k">if</span> <span class="n">modname</span> <span class="ow">in</span> <span class="n">builtin_plugins</span> <span class="k">else</span> <span class="n">modname</span>
</span><span id="PytestPluginManager-851"><a href="#PytestPluginManager-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rewrite_hook</span><span class="o">.</span><span class="n">mark_rewrite</span><span class="p">(</span><span class="n">importspec</span><span class="p">)</span>
</span><span id="PytestPluginManager-852"><a href="#PytestPluginManager-852"><span class="linenos">852</span></a>
</span><span id="PytestPluginManager-853"><a href="#PytestPluginManager-853"><span class="linenos">853</span></a>        <span class="k">if</span> <span class="n">consider_entry_points</span><span class="p">:</span>
</span><span id="PytestPluginManager-854"><a href="#PytestPluginManager-854"><span class="linenos">854</span></a>            <span class="n">loaded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_setuptools_entrypoints</span><span class="p">(</span><span class="s2">&quot;pytest11&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">modname</span><span class="p">)</span>
</span><span id="PytestPluginManager-855"><a href="#PytestPluginManager-855"><span class="linenos">855</span></a>            <span class="k">if</span> <span class="n">loaded</span><span class="p">:</span>
</span><span id="PytestPluginManager-856"><a href="#PytestPluginManager-856"><span class="linenos">856</span></a>                <span class="k">return</span>
</span><span id="PytestPluginManager-857"><a href="#PytestPluginManager-857"><span class="linenos">857</span></a>
</span><span id="PytestPluginManager-858"><a href="#PytestPluginManager-858"><span class="linenos">858</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager-859"><a href="#PytestPluginManager-859"><span class="linenos">859</span></a>            <span class="nb">__import__</span><span class="p">(</span><span class="n">importspec</span><span class="p">)</span>
</span><span id="PytestPluginManager-860"><a href="#PytestPluginManager-860"><span class="linenos">860</span></a>        <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PytestPluginManager-861"><a href="#PytestPluginManager-861"><span class="linenos">861</span></a>            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
</span><span id="PytestPluginManager-862"><a href="#PytestPluginManager-862"><span class="linenos">862</span></a>                <span class="sa">f</span><span class="s1">&#39;Error importing plugin &quot;</span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s1">&quot;: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="PytestPluginManager-863"><a href="#PytestPluginManager-863"><span class="linenos">863</span></a>            <span class="p">)</span><span class="o">.</span><span class="n">with_traceback</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="PytestPluginManager-864"><a href="#PytestPluginManager-864"><span class="linenos">864</span></a>
</span><span id="PytestPluginManager-865"><a href="#PytestPluginManager-865"><span class="linenos">865</span></a>        <span class="k">except</span> <span class="n">Skipped</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PytestPluginManager-866"><a href="#PytestPluginManager-866"><span class="linenos">866</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">skipped_plugins</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">modname</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">msg</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="PytestPluginManager-867"><a href="#PytestPluginManager-867"><span class="linenos">867</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PytestPluginManager-868"><a href="#PytestPluginManager-868"><span class="linenos">868</span></a>            <span class="n">mod</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">importspec</span><span class="p">]</span>
</span><span id="PytestPluginManager-869"><a href="#PytestPluginManager-869"><span class="linenos">869</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">modname</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A <code>pluggy.PluginManager &lt;pluggy.PluginManager&gt;</code> with
additional pytest-specific functionality:</p>

<ul>
<li>Loading plugins from the command line, <code>PYTEST_PLUGINS</code> env variable and
<code>pytest_plugins</code> global variables found in plugins being loaded.</li>
<li><code>conftest.py</code> loading during start-up.</li>
</ul>
</div>


                            <div id="PytestPluginManager.skipped_plugins" class="classattr">
                                <div class="attr variable">
            <span class="name">skipped_plugins</span><span class="annotation">: list[tuple[str, str]]</span>

        
    </div>
    <a class="headerlink" href="#PytestPluginManager.skipped_plugins"></a>
    
    

                            </div>
                            <div id="PytestPluginManager.rewrite_hook" class="classattr">
                                <div class="attr variable">
            <span class="name">rewrite_hook</span>

        
    </div>
    <a class="headerlink" href="#PytestPluginManager.rewrite_hook"></a>
    
    

                            </div>
                            <div id="PytestPluginManager.parse_hookimpl_opts" class="classattr">
                                        <input id="PytestPluginManager.parse_hookimpl_opts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse_hookimpl_opts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">plugin</span><span class="p">:</span> <span class="nb">object</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pluggy</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">HookimplOpts</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.parse_hookimpl_opts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.parse_hookimpl_opts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.parse_hookimpl_opts-452"><a href="#PytestPluginManager.parse_hookimpl_opts-452"><span class="linenos">452</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_hookimpl_opts</span><span class="p">(</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-453"><a href="#PytestPluginManager.parse_hookimpl_opts-453"><span class="linenos">453</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">_PluggyPlugin</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-454"><a href="#PytestPluginManager.parse_hookimpl_opts-454"><span class="linenos">454</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookimplOpts</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-455"><a href="#PytestPluginManager.parse_hookimpl_opts-455"><span class="linenos">455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-456"><a href="#PytestPluginManager.parse_hookimpl_opts-456"><span class="linenos">456</span></a>        <span class="c1"># pytest hooks are always prefixed with &quot;pytest_&quot;,</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-457"><a href="#PytestPluginManager.parse_hookimpl_opts-457"><span class="linenos">457</span></a>        <span class="c1"># so we avoid accessing possibly non-readable attributes</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-458"><a href="#PytestPluginManager.parse_hookimpl_opts-458"><span class="linenos">458</span></a>        <span class="c1"># (see issue #1073).</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-459"><a href="#PytestPluginManager.parse_hookimpl_opts-459"><span class="linenos">459</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-460"><a href="#PytestPluginManager.parse_hookimpl_opts-460"><span class="linenos">460</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-461"><a href="#PytestPluginManager.parse_hookimpl_opts-461"><span class="linenos">461</span></a>        <span class="c1"># Ignore names which cannot be hooks.</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-462"><a href="#PytestPluginManager.parse_hookimpl_opts-462"><span class="linenos">462</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;pytest_plugins&quot;</span><span class="p">:</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-463"><a href="#PytestPluginManager.parse_hookimpl_opts-463"><span class="linenos">463</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-464"><a href="#PytestPluginManager.parse_hookimpl_opts-464"><span class="linenos">464</span></a>
</span><span id="PytestPluginManager.parse_hookimpl_opts-465"><a href="#PytestPluginManager.parse_hookimpl_opts-465"><span class="linenos">465</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">parse_hookimpl_opts</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-466"><a href="#PytestPluginManager.parse_hookimpl_opts-466"><span class="linenos">466</span></a>        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-467"><a href="#PytestPluginManager.parse_hookimpl_opts-467"><span class="linenos">467</span></a>            <span class="k">return</span> <span class="n">opts</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-468"><a href="#PytestPluginManager.parse_hookimpl_opts-468"><span class="linenos">468</span></a>
</span><span id="PytestPluginManager.parse_hookimpl_opts-469"><a href="#PytestPluginManager.parse_hookimpl_opts-469"><span class="linenos">469</span></a>        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-470"><a href="#PytestPluginManager.parse_hookimpl_opts-470"><span class="linenos">470</span></a>        <span class="c1"># Consider only actual functions for hooks (#3775).</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-471"><a href="#PytestPluginManager.parse_hookimpl_opts-471"><span class="linenos">471</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isroutine</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-472"><a href="#PytestPluginManager.parse_hookimpl_opts-472"><span class="linenos">472</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-473"><a href="#PytestPluginManager.parse_hookimpl_opts-473"><span class="linenos">473</span></a>        <span class="c1"># Collect unmarked hooks as long as they have the `pytest_&#39; prefix.</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-474"><a href="#PytestPluginManager.parse_hookimpl_opts-474"><span class="linenos">474</span></a>        <span class="k">return</span> <span class="n">_get_legacy_hook_marks</span><span class="p">(</span>  <span class="c1"># type: ignore[return-value]</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-475"><a href="#PytestPluginManager.parse_hookimpl_opts-475"><span class="linenos">475</span></a>            <span class="n">method</span><span class="p">,</span> <span class="s2">&quot;impl&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;tryfirst&quot;</span><span class="p">,</span> <span class="s2">&quot;trylast&quot;</span><span class="p">,</span> <span class="s2">&quot;optionalhook&quot;</span><span class="p">,</span> <span class="s2">&quot;hookwrapper&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager.parse_hookimpl_opts-476"><a href="#PytestPluginManager.parse_hookimpl_opts-476"><span class="linenos">476</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.parse_hookspec_opts" class="classattr">
                                        <input id="PytestPluginManager.parse_hookspec_opts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse_hookspec_opts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">module_or_class</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">pluggy</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">HookspecOpts</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.parse_hookspec_opts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.parse_hookspec_opts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.parse_hookspec_opts-478"><a href="#PytestPluginManager.parse_hookspec_opts-478"><span class="linenos">478</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_hookspec_opts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_or_class</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookspecOpts</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-479"><a href="#PytestPluginManager.parse_hookspec_opts-479"><span class="linenos">479</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-480"><a href="#PytestPluginManager.parse_hookspec_opts-480"><span class="linenos">480</span></a>        <span class="n">opts</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">parse_hookspec_opts</span><span class="p">(</span><span class="n">module_or_class</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-481"><a href="#PytestPluginManager.parse_hookspec_opts-481"><span class="linenos">481</span></a>        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-482"><a href="#PytestPluginManager.parse_hookspec_opts-482"><span class="linenos">482</span></a>            <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module_or_class</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-483"><a href="#PytestPluginManager.parse_hookspec_opts-483"><span class="linenos">483</span></a>            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-484"><a href="#PytestPluginManager.parse_hookspec_opts-484"><span class="linenos">484</span></a>                <span class="n">opts</span> <span class="o">=</span> <span class="n">_get_legacy_hook_marks</span><span class="p">(</span>  <span class="c1"># type: ignore[assignment]</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-485"><a href="#PytestPluginManager.parse_hookspec_opts-485"><span class="linenos">485</span></a>                    <span class="n">method</span><span class="p">,</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-486"><a href="#PytestPluginManager.parse_hookspec_opts-486"><span class="linenos">486</span></a>                    <span class="s2">&quot;spec&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-487"><a href="#PytestPluginManager.parse_hookspec_opts-487"><span class="linenos">487</span></a>                    <span class="p">(</span><span class="s2">&quot;firstresult&quot;</span><span class="p">,</span> <span class="s2">&quot;historic&quot;</span><span class="p">),</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-488"><a href="#PytestPluginManager.parse_hookspec_opts-488"><span class="linenos">488</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager.parse_hookspec_opts-489"><a href="#PytestPluginManager.parse_hookspec_opts-489"><span class="linenos">489</span></a>        <span class="k">return</span> <span class="n">opts</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.register" class="classattr">
                                        <input id="PytestPluginManager.register-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">register</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">plugin</span><span class="p">:</span> <span class="nb">object</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.register-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.register"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.register-491"><a href="#PytestPluginManager.register-491"><span class="linenos">491</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">_PluggyPlugin</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.register-492"><a href="#PytestPluginManager.register-492"><span class="linenos">492</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">deprecated</span><span class="o">.</span><span class="n">DEPRECATED_EXTERNAL_PLUGINS</span><span class="p">:</span>
</span><span id="PytestPluginManager.register-493"><a href="#PytestPluginManager.register-493"><span class="linenos">493</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="PytestPluginManager.register-494"><a href="#PytestPluginManager.register-494"><span class="linenos">494</span></a>                <span class="n">PytestConfigWarning</span><span class="p">(</span>
</span><span id="PytestPluginManager.register-495"><a href="#PytestPluginManager.register-495"><span class="linenos">495</span></a>                    <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> plugin has been merged into the core, &quot;</span>
</span><span id="PytestPluginManager.register-496"><a href="#PytestPluginManager.register-496"><span class="linenos">496</span></a>                    <span class="s2">&quot;please remove it from your requirements.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PytestPluginManager.register-497"><a href="#PytestPluginManager.register-497"><span class="linenos">497</span></a>                        <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager.register-498"><a href="#PytestPluginManager.register-498"><span class="linenos">498</span></a>                    <span class="p">)</span>
</span><span id="PytestPluginManager.register-499"><a href="#PytestPluginManager.register-499"><span class="linenos">499</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager.register-500"><a href="#PytestPluginManager.register-500"><span class="linenos">500</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager.register-501"><a href="#PytestPluginManager.register-501"><span class="linenos">501</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="PytestPluginManager.register-502"><a href="#PytestPluginManager.register-502"><span class="linenos">502</span></a>        <span class="n">plugin_name</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.register-503"><a href="#PytestPluginManager.register-503"><span class="linenos">503</span></a>        <span class="k">if</span> <span class="n">plugin_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.register-504"><a href="#PytestPluginManager.register-504"><span class="linenos">504</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_plugin_registered</span><span class="o">.</span><span class="n">call_historic</span><span class="p">(</span>
</span><span id="PytestPluginManager.register-505"><a href="#PytestPluginManager.register-505"><span class="linenos">505</span></a>                <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
</span><span id="PytestPluginManager.register-506"><a href="#PytestPluginManager.register-506"><span class="linenos">506</span></a>                    <span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span>
</span><span id="PytestPluginManager.register-507"><a href="#PytestPluginManager.register-507"><span class="linenos">507</span></a>                    <span class="n">plugin_name</span><span class="o">=</span><span class="n">plugin_name</span><span class="p">,</span>
</span><span id="PytestPluginManager.register-508"><a href="#PytestPluginManager.register-508"><span class="linenos">508</span></a>                    <span class="n">manager</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
</span><span id="PytestPluginManager.register-509"><a href="#PytestPluginManager.register-509"><span class="linenos">509</span></a>                <span class="p">)</span>
</span><span id="PytestPluginManager.register-510"><a href="#PytestPluginManager.register-510"><span class="linenos">510</span></a>            <span class="p">)</span>
</span><span id="PytestPluginManager.register-511"><a href="#PytestPluginManager.register-511"><span class="linenos">511</span></a>
</span><span id="PytestPluginManager.register-512"><a href="#PytestPluginManager.register-512"><span class="linenos">512</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">):</span>
</span><span id="PytestPluginManager.register-513"><a href="#PytestPluginManager.register-513"><span class="linenos">513</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">consider_module</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
</span><span id="PytestPluginManager.register-514"><a href="#PytestPluginManager.register-514"><span class="linenos">514</span></a>        <span class="k">return</span> <span class="n">plugin_name</span>
</span></pre></div>


            <div class="docstring"><p>Register a plugin and return its name.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>: 
The name under which to register the plugin. If not specified, a
name is generated using <code><a href="#PytestPluginManager.get_canonical_name">get_canonical_name()</a></code>.</li>
</ul>

<p>:returns:
    The plugin name. If the name is blocked from registering, returns
    <code>None</code>.</p>

<p>If the plugin is already registered, raises a <code>ValueError</code>.</p>
</div>


                            </div>
                            <div id="PytestPluginManager.getplugin" class="classattr">
                                        <input id="PytestPluginManager.getplugin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getplugin</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="PytestPluginManager.getplugin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.getplugin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.getplugin-516"><a href="#PytestPluginManager.getplugin-516"><span class="linenos">516</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getplugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="PytestPluginManager.getplugin-517"><a href="#PytestPluginManager.getplugin-517"><span class="linenos">517</span></a>        <span class="c1"># Support deprecated naming because plugins (xdist e.g.) use it.</span>
</span><span id="PytestPluginManager.getplugin-518"><a href="#PytestPluginManager.getplugin-518"><span class="linenos">518</span></a>        <span class="n">plugin</span><span class="p">:</span> <span class="n">_PluggyPlugin</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.getplugin-519"><a href="#PytestPluginManager.getplugin-519"><span class="linenos">519</span></a>        <span class="k">return</span> <span class="n">plugin</span>
</span></pre></div>


    

                            </div>
                            <div id="PytestPluginManager.hasplugin" class="classattr">
                                        <input id="PytestPluginManager.hasplugin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">hasplugin</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.hasplugin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.hasplugin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.hasplugin-521"><a href="#PytestPluginManager.hasplugin-521"><span class="linenos">521</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hasplugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PytestPluginManager.hasplugin-522"><a href="#PytestPluginManager.hasplugin-522"><span class="linenos">522</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether a plugin with the given name is registered.&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.hasplugin-523"><a href="#PytestPluginManager.hasplugin-523"><span class="linenos">523</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Return whether a plugin with the given name is registered.</p>
</div>


                            </div>
                            <div id="PytestPluginManager.pytest_configure" class="classattr">
                                        <input id="PytestPluginManager.pytest_configure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pytest_configure</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.pytest_configure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.pytest_configure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.pytest_configure-525"><a href="#PytestPluginManager.pytest_configure-525"><span class="linenos">525</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.pytest_configure-526"><a href="#PytestPluginManager.pytest_configure-526"><span class="linenos">526</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.pytest_configure-527"><a href="#PytestPluginManager.pytest_configure-527"><span class="linenos">527</span></a>        <span class="c1"># XXX now that the pluginmanager exposes hookimpl(tryfirst...)</span>
</span><span id="PytestPluginManager.pytest_configure-528"><a href="#PytestPluginManager.pytest_configure-528"><span class="linenos">528</span></a>        <span class="c1"># we should remove tryfirst/trylast as markers.</span>
</span><span id="PytestPluginManager.pytest_configure-529"><a href="#PytestPluginManager.pytest_configure-529"><span class="linenos">529</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
</span><span id="PytestPluginManager.pytest_configure-530"><a href="#PytestPluginManager.pytest_configure-530"><span class="linenos">530</span></a>            <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager.pytest_configure-531"><a href="#PytestPluginManager.pytest_configure-531"><span class="linenos">531</span></a>            <span class="s2">&quot;tryfirst: mark a hook implementation function such that the &quot;</span>
</span><span id="PytestPluginManager.pytest_configure-532"><a href="#PytestPluginManager.pytest_configure-532"><span class="linenos">532</span></a>            <span class="s2">&quot;plugin machinery will try to call it first/as early as possible. &quot;</span>
</span><span id="PytestPluginManager.pytest_configure-533"><a href="#PytestPluginManager.pytest_configure-533"><span class="linenos">533</span></a>            <span class="s2">&quot;DEPRECATED, use @pytest.hookimpl(tryfirst=True) instead.&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager.pytest_configure-534"><a href="#PytestPluginManager.pytest_configure-534"><span class="linenos">534</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager.pytest_configure-535"><a href="#PytestPluginManager.pytest_configure-535"><span class="linenos">535</span></a>        <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
</span><span id="PytestPluginManager.pytest_configure-536"><a href="#PytestPluginManager.pytest_configure-536"><span class="linenos">536</span></a>            <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager.pytest_configure-537"><a href="#PytestPluginManager.pytest_configure-537"><span class="linenos">537</span></a>            <span class="s2">&quot;trylast: mark a hook implementation function such that the &quot;</span>
</span><span id="PytestPluginManager.pytest_configure-538"><a href="#PytestPluginManager.pytest_configure-538"><span class="linenos">538</span></a>            <span class="s2">&quot;plugin machinery will try to call it last/as late as possible. &quot;</span>
</span><span id="PytestPluginManager.pytest_configure-539"><a href="#PytestPluginManager.pytest_configure-539"><span class="linenos">539</span></a>            <span class="s2">&quot;DEPRECATED, use @pytest.hookimpl(trylast=True) instead.&quot;</span><span class="p">,</span>
</span><span id="PytestPluginManager.pytest_configure-540"><a href="#PytestPluginManager.pytest_configure-540"><span class="linenos">540</span></a>        <span class="p">)</span>
</span><span id="PytestPluginManager.pytest_configure-541"><a href="#PytestPluginManager.pytest_configure-541"><span class="linenos">541</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_configured</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.consider_preparse" class="classattr">
                                        <input id="PytestPluginManager.consider_preparse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consider_preparse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">exclude_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.consider_preparse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.consider_preparse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.consider_preparse-765"><a href="#PytestPluginManager.consider_preparse-765"><span class="linenos">765</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_preparse</span><span class="p">(</span>
</span><span id="PytestPluginManager.consider_preparse-766"><a href="#PytestPluginManager.consider_preparse-766"><span class="linenos">766</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">exclude_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PytestPluginManager.consider_preparse-767"><a href="#PytestPluginManager.consider_preparse-767"><span class="linenos">767</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_preparse-768"><a href="#PytestPluginManager.consider_preparse-768"><span class="linenos">768</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.consider_preparse-769"><a href="#PytestPluginManager.consider_preparse-769"><span class="linenos">769</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="PytestPluginManager.consider_preparse-770"><a href="#PytestPluginManager.consider_preparse-770"><span class="linenos">770</span></a>        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_preparse-771"><a href="#PytestPluginManager.consider_preparse-771"><span class="linenos">771</span></a>        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_preparse-772"><a href="#PytestPluginManager.consider_preparse-772"><span class="linenos">772</span></a>            <span class="n">opt</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="PytestPluginManager.consider_preparse-773"><a href="#PytestPluginManager.consider_preparse-773"><span class="linenos">773</span></a>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="PytestPluginManager.consider_preparse-774"><a href="#PytestPluginManager.consider_preparse-774"><span class="linenos">774</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">opt</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="PytestPluginManager.consider_preparse-775"><a href="#PytestPluginManager.consider_preparse-775"><span class="linenos">775</span></a>                <span class="k">if</span> <span class="n">opt</span> <span class="o">==</span> <span class="s2">&quot;-p&quot;</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_preparse-776"><a href="#PytestPluginManager.consider_preparse-776"><span class="linenos">776</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_preparse-777"><a href="#PytestPluginManager.consider_preparse-777"><span class="linenos">777</span></a>                        <span class="n">parg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="PytestPluginManager.consider_preparse-778"><a href="#PytestPluginManager.consider_preparse-778"><span class="linenos">778</span></a>                    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_preparse-779"><a href="#PytestPluginManager.consider_preparse-779"><span class="linenos">779</span></a>                        <span class="k">return</span>
</span><span id="PytestPluginManager.consider_preparse-780"><a href="#PytestPluginManager.consider_preparse-780"><span class="linenos">780</span></a>                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="PytestPluginManager.consider_preparse-781"><a href="#PytestPluginManager.consider_preparse-781"><span class="linenos">781</span></a>                <span class="k">elif</span> <span class="n">opt</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.consider_preparse-782"><a href="#PytestPluginManager.consider_preparse-782"><span class="linenos">782</span></a>                    <span class="n">parg</span> <span class="o">=</span> <span class="n">opt</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
</span><span id="PytestPluginManager.consider_preparse-783"><a href="#PytestPluginManager.consider_preparse-783"><span class="linenos">783</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_preparse-784"><a href="#PytestPluginManager.consider_preparse-784"><span class="linenos">784</span></a>                    <span class="k">continue</span>
</span><span id="PytestPluginManager.consider_preparse-785"><a href="#PytestPluginManager.consider_preparse-785"><span class="linenos">785</span></a>                <span class="n">parg</span> <span class="o">=</span> <span class="n">parg</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="PytestPluginManager.consider_preparse-786"><a href="#PytestPluginManager.consider_preparse-786"><span class="linenos">786</span></a>                <span class="k">if</span> <span class="n">exclude_only</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">parg</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;no:&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.consider_preparse-787"><a href="#PytestPluginManager.consider_preparse-787"><span class="linenos">787</span></a>                    <span class="k">continue</span>
</span><span id="PytestPluginManager.consider_preparse-788"><a href="#PytestPluginManager.consider_preparse-788"><span class="linenos">788</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">consider_pluginarg</span><span class="p">(</span><span class="n">parg</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.consider_pluginarg" class="classattr">
                                        <input id="PytestPluginManager.consider_pluginarg-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consider_pluginarg</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.consider_pluginarg-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.consider_pluginarg"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.consider_pluginarg-790"><a href="#PytestPluginManager.consider_pluginarg-790"><span class="linenos">790</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_pluginarg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_pluginarg-791"><a href="#PytestPluginManager.consider_pluginarg-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.consider_pluginarg-792"><a href="#PytestPluginManager.consider_pluginarg-792"><span class="linenos">792</span></a>        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;no:&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.consider_pluginarg-793"><a href="#PytestPluginManager.consider_pluginarg-793"><span class="linenos">793</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">arg</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="PytestPluginManager.consider_pluginarg-794"><a href="#PytestPluginManager.consider_pluginarg-794"><span class="linenos">794</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">essential_plugins</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_pluginarg-795"><a href="#PytestPluginManager.consider_pluginarg-795"><span class="linenos">795</span></a>                <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;plugin </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> cannot be disabled&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-796"><a href="#PytestPluginManager.consider_pluginarg-796"><span class="linenos">796</span></a>
</span><span id="PytestPluginManager.consider_pluginarg-797"><a href="#PytestPluginManager.consider_pluginarg-797"><span class="linenos">797</span></a>            <span class="c1"># PR #4304: remove stepwise if cacheprovider is blocked.</span>
</span><span id="PytestPluginManager.consider_pluginarg-798"><a href="#PytestPluginManager.consider_pluginarg-798"><span class="linenos">798</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cacheprovider&quot;</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_pluginarg-799"><a href="#PytestPluginManager.consider_pluginarg-799"><span class="linenos">799</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="s2">&quot;stepwise&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-800"><a href="#PytestPluginManager.consider_pluginarg-800"><span class="linenos">800</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="s2">&quot;pytest_stepwise&quot;</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-801"><a href="#PytestPluginManager.consider_pluginarg-801"><span class="linenos">801</span></a>
</span><span id="PytestPluginManager.consider_pluginarg-802"><a href="#PytestPluginManager.consider_pluginarg-802"><span class="linenos">802</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-803"><a href="#PytestPluginManager.consider_pluginarg-803"><span class="linenos">803</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.consider_pluginarg-804"><a href="#PytestPluginManager.consider_pluginarg-804"><span class="linenos">804</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_blocked</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-805"><a href="#PytestPluginManager.consider_pluginarg-805"><span class="linenos">805</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_pluginarg-806"><a href="#PytestPluginManager.consider_pluginarg-806"><span class="linenos">806</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="PytestPluginManager.consider_pluginarg-807"><a href="#PytestPluginManager.consider_pluginarg-807"><span class="linenos">807</span></a>            <span class="c1"># Unblock the plugin.</span>
</span><span id="PytestPluginManager.consider_pluginarg-808"><a href="#PytestPluginManager.consider_pluginarg-808"><span class="linenos">808</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">unblock</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-809"><a href="#PytestPluginManager.consider_pluginarg-809"><span class="linenos">809</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span><span class="p">):</span>
</span><span id="PytestPluginManager.consider_pluginarg-810"><a href="#PytestPluginManager.consider_pluginarg-810"><span class="linenos">810</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unblock</span><span class="p">(</span><span class="s2">&quot;pytest_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
</span><span id="PytestPluginManager.consider_pluginarg-811"><a href="#PytestPluginManager.consider_pluginarg-811"><span class="linenos">811</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">import_plugin</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">consider_entry_points</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.consider_conftest" class="classattr">
                                        <input id="PytestPluginManager.consider_conftest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consider_conftest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">conftestmodule</span><span class="p">:</span> <span class="n">module</span>, </span><span class="param"><span class="n">registration_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.consider_conftest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.consider_conftest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.consider_conftest-813"><a href="#PytestPluginManager.consider_conftest-813"><span class="linenos">813</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_conftest</span><span class="p">(</span>
</span><span id="PytestPluginManager.consider_conftest-814"><a href="#PytestPluginManager.consider_conftest-814"><span class="linenos">814</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">conftestmodule</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">,</span> <span class="n">registration_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="PytestPluginManager.consider_conftest-815"><a href="#PytestPluginManager.consider_conftest-815"><span class="linenos">815</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_conftest-816"><a href="#PytestPluginManager.consider_conftest-816"><span class="linenos">816</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.consider_conftest-817"><a href="#PytestPluginManager.consider_conftest-817"><span class="linenos">817</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">conftestmodule</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">registration_name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.consider_env" class="classattr">
                                        <input id="PytestPluginManager.consider_env-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consider_env</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.consider_env-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.consider_env"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.consider_env-819"><a href="#PytestPluginManager.consider_env-819"><span class="linenos">819</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_env</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_env-820"><a href="#PytestPluginManager.consider_env-820"><span class="linenos">820</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.consider_env-821"><a href="#PytestPluginManager.consider_env-821"><span class="linenos">821</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_import_plugin_specs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_PLUGINS&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.consider_module" class="classattr">
                                        <input id="PytestPluginManager.consider_module-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consider_module</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mod</span><span class="p">:</span> <span class="n">module</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.consider_module-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.consider_module"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.consider_module-823"><a href="#PytestPluginManager.consider_module-823"><span class="linenos">823</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">consider_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.consider_module-824"><a href="#PytestPluginManager.consider_module-824"><span class="linenos">824</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:meta private:&quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.consider_module-825"><a href="#PytestPluginManager.consider_module-825"><span class="linenos">825</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_import_plugin_specs</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s2">&quot;pytest_plugins&quot;</span><span class="p">,</span> <span class="p">[]))</span>
</span></pre></div>


            <div class="docstring"><p>:meta private:</p>
</div>


                            </div>
                            <div id="PytestPluginManager.import_plugin" class="classattr">
                                        <input id="PytestPluginManager.import_plugin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">import_plugin</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">modname</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">consider_entry_points</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="PytestPluginManager.import_plugin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestPluginManager.import_plugin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestPluginManager.import_plugin-834"><a href="#PytestPluginManager.import_plugin-834"><span class="linenos">834</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">import_plugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">consider_entry_points</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-835"><a href="#PytestPluginManager.import_plugin-835"><span class="linenos">835</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Import a plugin with ``modname``.</span>
</span><span id="PytestPluginManager.import_plugin-836"><a href="#PytestPluginManager.import_plugin-836"><span class="linenos">836</span></a>
</span><span id="PytestPluginManager.import_plugin-837"><a href="#PytestPluginManager.import_plugin-837"><span class="linenos">837</span></a><span class="sd">        If ``consider_entry_points`` is True, entry point names are also</span>
</span><span id="PytestPluginManager.import_plugin-838"><a href="#PytestPluginManager.import_plugin-838"><span class="linenos">838</span></a><span class="sd">        considered to find a plugin.</span>
</span><span id="PytestPluginManager.import_plugin-839"><a href="#PytestPluginManager.import_plugin-839"><span class="linenos">839</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PytestPluginManager.import_plugin-840"><a href="#PytestPluginManager.import_plugin-840"><span class="linenos">840</span></a>        <span class="c1"># Most often modname refers to builtin modules, e.g. &quot;pytester&quot;,</span>
</span><span id="PytestPluginManager.import_plugin-841"><a href="#PytestPluginManager.import_plugin-841"><span class="linenos">841</span></a>        <span class="c1"># &quot;terminal&quot; or &quot;capture&quot;.  Those plugins are registered under their</span>
</span><span id="PytestPluginManager.import_plugin-842"><a href="#PytestPluginManager.import_plugin-842"><span class="linenos">842</span></a>        <span class="c1"># basename for historic purposes but must be imported with the</span>
</span><span id="PytestPluginManager.import_plugin-843"><a href="#PytestPluginManager.import_plugin-843"><span class="linenos">843</span></a>        <span class="c1"># _pytest prefix.</span>
</span><span id="PytestPluginManager.import_plugin-844"><a href="#PytestPluginManager.import_plugin-844"><span class="linenos">844</span></a>        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PytestPluginManager.import_plugin-845"><a href="#PytestPluginManager.import_plugin-845"><span class="linenos">845</span></a>            <span class="n">modname</span><span class="p">,</span> <span class="nb">str</span>
</span><span id="PytestPluginManager.import_plugin-846"><a href="#PytestPluginManager.import_plugin-846"><span class="linenos">846</span></a>        <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;module name as text required, got </span><span class="si">{</span><span class="n">modname</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="PytestPluginManager.import_plugin-847"><a href="#PytestPluginManager.import_plugin-847"><span class="linenos">847</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_blocked</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-848"><a href="#PytestPluginManager.import_plugin-848"><span class="linenos">848</span></a>            <span class="k">return</span>
</span><span id="PytestPluginManager.import_plugin-849"><a href="#PytestPluginManager.import_plugin-849"><span class="linenos">849</span></a>
</span><span id="PytestPluginManager.import_plugin-850"><a href="#PytestPluginManager.import_plugin-850"><span class="linenos">850</span></a>        <span class="n">importspec</span> <span class="o">=</span> <span class="s2">&quot;_pytest.&quot;</span> <span class="o">+</span> <span class="n">modname</span> <span class="k">if</span> <span class="n">modname</span> <span class="ow">in</span> <span class="n">builtin_plugins</span> <span class="k">else</span> <span class="n">modname</span>
</span><span id="PytestPluginManager.import_plugin-851"><a href="#PytestPluginManager.import_plugin-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rewrite_hook</span><span class="o">.</span><span class="n">mark_rewrite</span><span class="p">(</span><span class="n">importspec</span><span class="p">)</span>
</span><span id="PytestPluginManager.import_plugin-852"><a href="#PytestPluginManager.import_plugin-852"><span class="linenos">852</span></a>
</span><span id="PytestPluginManager.import_plugin-853"><a href="#PytestPluginManager.import_plugin-853"><span class="linenos">853</span></a>        <span class="k">if</span> <span class="n">consider_entry_points</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-854"><a href="#PytestPluginManager.import_plugin-854"><span class="linenos">854</span></a>            <span class="n">loaded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_setuptools_entrypoints</span><span class="p">(</span><span class="s2">&quot;pytest11&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">modname</span><span class="p">)</span>
</span><span id="PytestPluginManager.import_plugin-855"><a href="#PytestPluginManager.import_plugin-855"><span class="linenos">855</span></a>            <span class="k">if</span> <span class="n">loaded</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-856"><a href="#PytestPluginManager.import_plugin-856"><span class="linenos">856</span></a>                <span class="k">return</span>
</span><span id="PytestPluginManager.import_plugin-857"><a href="#PytestPluginManager.import_plugin-857"><span class="linenos">857</span></a>
</span><span id="PytestPluginManager.import_plugin-858"><a href="#PytestPluginManager.import_plugin-858"><span class="linenos">858</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-859"><a href="#PytestPluginManager.import_plugin-859"><span class="linenos">859</span></a>            <span class="nb">__import__</span><span class="p">(</span><span class="n">importspec</span><span class="p">)</span>
</span><span id="PytestPluginManager.import_plugin-860"><a href="#PytestPluginManager.import_plugin-860"><span class="linenos">860</span></a>        <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-861"><a href="#PytestPluginManager.import_plugin-861"><span class="linenos">861</span></a>            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
</span><span id="PytestPluginManager.import_plugin-862"><a href="#PytestPluginManager.import_plugin-862"><span class="linenos">862</span></a>                <span class="sa">f</span><span class="s1">&#39;Error importing plugin &quot;</span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s1">&quot;: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="PytestPluginManager.import_plugin-863"><a href="#PytestPluginManager.import_plugin-863"><span class="linenos">863</span></a>            <span class="p">)</span><span class="o">.</span><span class="n">with_traceback</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="PytestPluginManager.import_plugin-864"><a href="#PytestPluginManager.import_plugin-864"><span class="linenos">864</span></a>
</span><span id="PytestPluginManager.import_plugin-865"><a href="#PytestPluginManager.import_plugin-865"><span class="linenos">865</span></a>        <span class="k">except</span> <span class="n">Skipped</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-866"><a href="#PytestPluginManager.import_plugin-866"><span class="linenos">866</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">skipped_plugins</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">modname</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">msg</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="PytestPluginManager.import_plugin-867"><a href="#PytestPluginManager.import_plugin-867"><span class="linenos">867</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PytestPluginManager.import_plugin-868"><a href="#PytestPluginManager.import_plugin-868"><span class="linenos">868</span></a>            <span class="n">mod</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">importspec</span><span class="p">]</span>
</span><span id="PytestPluginManager.import_plugin-869"><a href="#PytestPluginManager.import_plugin-869"><span class="linenos">869</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">modname</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Import a plugin with <code>modname</code>.</p>

<p>If <code>consider_entry_points</code> is True, entry point names are also
considered to find a plugin.</p>
</div>


                            </div>
                </section>
                <section id="PytestUnhandledCoroutineWarning">
                            <input id="PytestUnhandledCoroutineWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestUnhandledCoroutineWarning</span><wbr>(<span class="base"><a href="#PytestReturnNotNoneWarning">PytestReturnNotNoneWarning</a></span>):

                <label class="view-source-button" for="PytestUnhandledCoroutineWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestUnhandledCoroutineWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestUnhandledCoroutineWarning-81"><a href="#PytestUnhandledCoroutineWarning-81"><span class="linenos">81</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.warning_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">PytestReturnNotNoneWarning</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted for an unhandled coroutine.</p>

<p>A coroutine was encountered when collecting test functions, but was not
handled by any async-aware plugin.
Coroutine test functions are not natively supported.</p>
</div>


                </section>
                <section id="PytestUnhandledThreadExceptionWarning">
                            <input id="PytestUnhandledThreadExceptionWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestUnhandledThreadExceptionWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestUnhandledThreadExceptionWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestUnhandledThreadExceptionWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestUnhandledThreadExceptionWarning-115"><a href="#PytestUnhandledThreadExceptionWarning-115"><span class="linenos">115</span></a>    <span class="s2">&quot;FixtureLookupError&quot;</span><span class="p">,</span>
</span></pre></div>


            <div class="docstring"><p>An unhandled exception occurred in a <code>~threading.Thread</code>.</p>

<p>Such exceptions don't propagate normally.</p>
</div>


                </section>
                <section id="PytestUnknownMarkWarning">
                            <input id="PytestUnknownMarkWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestUnknownMarkWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestUnknownMarkWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestUnknownMarkWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestUnknownMarkWarning-93"><a href="#PytestUnknownMarkWarning-93"><span class="linenos">93</span></a>    <span class="s2">&quot;__version__&quot;</span><span class="p">,</span>
</span></pre></div>


            <div class="docstring"><p>Warning emitted on use of unknown markers.</p>

<p>See :ref:<code><a href="#mark">mark</a></code> for details.</p>
</div>


                </section>
                <section id="PytestUnraisableExceptionWarning">
                            <input id="PytestUnraisableExceptionWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestUnraisableExceptionWarning</span><wbr>(<span class="base"><a href="#PytestWarning">PytestWarning</a></span>):

                <label class="view-source-button" for="PytestUnraisableExceptionWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestUnraisableExceptionWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestUnraisableExceptionWarning-103"><a href="#PytestUnraisableExceptionWarning-103"><span class="linenos">103</span></a>    <span class="s2">&quot;console_main&quot;</span><span class="p">,</span>
</span></pre></div>


            <div class="docstring"><p>An unraisable exception was reported.</p>

<p>Unraisable exceptions are exceptions raised in <code>__del__ &lt;object.__del__&gt;()</code>
implementations and similar situations when the exception cannot be raised
as normal.</p>
</div>


                </section>
                <section id="PytestWarning">
                            <input id="PytestWarning-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PytestWarning</span><wbr>(<span class="base">builtins.UserWarning</span>):

                <label class="view-source-button" for="PytestWarning-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PytestWarning"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PytestWarning-14"><a href="#PytestWarning-14"><span class="linenos">14</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">Config</span>
</span></pre></div>


            <div class="docstring"><p>Base class for all warnings emitted by pytest.</p>
</div>


                </section>
                <section id="raises">
                            <input id="raises-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">raises</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">expected_exception</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="o">~</span><span class="n">E</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="o">~</span><span class="n">E</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">python_api</span><span class="o">.</span><span class="n">RaisesContext</span><span class="p">[</span><span class="o">~</span><span class="n">E</span><span class="p">],</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="o">~</span><span class="n">E</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="raises-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#raises"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="raises-803"><a href="#raises-803"><span class="linenos">803</span></a><span class="k">def</span><span class="w"> </span><span class="nf">raises</span><span class="p">(</span>
</span><span id="raises-804"><a href="#raises-804"><span class="linenos">804</span></a>    <span class="n">expected_exception</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="raises-805"><a href="#raises-805"><span class="linenos">805</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RaisesContext</span><span class="p">[</span><span class="n">E</span><span class="p">]</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="n">E</span><span class="p">]:</span>
</span><span id="raises-806"><a href="#raises-806"><span class="linenos">806</span></a><span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Assert that a code block/function call raises an exception type, or one of its subclasses.</span>
</span><span id="raises-807"><a href="#raises-807"><span class="linenos">807</span></a>
</span><span id="raises-808"><a href="#raises-808"><span class="linenos">808</span></a><span class="sd">    :param expected_exception:</span>
</span><span id="raises-809"><a href="#raises-809"><span class="linenos">809</span></a><span class="sd">        The expected exception type, or a tuple if one of multiple possible</span>
</span><span id="raises-810"><a href="#raises-810"><span class="linenos">810</span></a><span class="sd">        exception types are expected. Note that subclasses of the passed exceptions</span>
</span><span id="raises-811"><a href="#raises-811"><span class="linenos">811</span></a><span class="sd">        will also match.</span>
</span><span id="raises-812"><a href="#raises-812"><span class="linenos">812</span></a>
</span><span id="raises-813"><a href="#raises-813"><span class="linenos">813</span></a><span class="sd">    :kwparam str | re.Pattern[str] | None match:</span>
</span><span id="raises-814"><a href="#raises-814"><span class="linenos">814</span></a><span class="sd">        If specified, a string containing a regular expression,</span>
</span><span id="raises-815"><a href="#raises-815"><span class="linenos">815</span></a><span class="sd">        or a regular expression object, that is tested against the string</span>
</span><span id="raises-816"><a href="#raises-816"><span class="linenos">816</span></a><span class="sd">        representation of the exception and its :pep:`678` `__notes__`</span>
</span><span id="raises-817"><a href="#raises-817"><span class="linenos">817</span></a><span class="sd">        using :func:`re.search`.</span>
</span><span id="raises-818"><a href="#raises-818"><span class="linenos">818</span></a>
</span><span id="raises-819"><a href="#raises-819"><span class="linenos">819</span></a><span class="sd">        To match a literal string that may contain :ref:`special characters</span>
</span><span id="raises-820"><a href="#raises-820"><span class="linenos">820</span></a><span class="sd">        &lt;re-syntax&gt;`, the pattern can first be escaped with :func:`re.escape`.</span>
</span><span id="raises-821"><a href="#raises-821"><span class="linenos">821</span></a>
</span><span id="raises-822"><a href="#raises-822"><span class="linenos">822</span></a><span class="sd">        (This is only used when ``pytest.raises`` is used as a context manager,</span>
</span><span id="raises-823"><a href="#raises-823"><span class="linenos">823</span></a><span class="sd">        and passed through to the function otherwise.</span>
</span><span id="raises-824"><a href="#raises-824"><span class="linenos">824</span></a><span class="sd">        When using ``pytest.raises`` as a function, you can use:</span>
</span><span id="raises-825"><a href="#raises-825"><span class="linenos">825</span></a><span class="sd">        ``pytest.raises(Exc, func, match=&quot;passed on&quot;).match(&quot;my pattern&quot;)``.)</span>
</span><span id="raises-826"><a href="#raises-826"><span class="linenos">826</span></a>
</span><span id="raises-827"><a href="#raises-827"><span class="linenos">827</span></a><span class="sd">    Use ``pytest.raises`` as a context manager, which will capture the exception of the given</span>
</span><span id="raises-828"><a href="#raises-828"><span class="linenos">828</span></a><span class="sd">    type, or any of its subclasses::</span>
</span><span id="raises-829"><a href="#raises-829"><span class="linenos">829</span></a>
</span><span id="raises-830"><a href="#raises-830"><span class="linenos">830</span></a><span class="sd">        &gt;&gt;&gt; import pytest</span>
</span><span id="raises-831"><a href="#raises-831"><span class="linenos">831</span></a><span class="sd">        &gt;&gt;&gt; with pytest.raises(ZeroDivisionError):</span>
</span><span id="raises-832"><a href="#raises-832"><span class="linenos">832</span></a><span class="sd">        ...    1/0</span>
</span><span id="raises-833"><a href="#raises-833"><span class="linenos">833</span></a>
</span><span id="raises-834"><a href="#raises-834"><span class="linenos">834</span></a><span class="sd">    If the code block does not raise the expected exception (:class:`ZeroDivisionError` in the example</span>
</span><span id="raises-835"><a href="#raises-835"><span class="linenos">835</span></a><span class="sd">    above), or no exception at all, the check will fail instead.</span>
</span><span id="raises-836"><a href="#raises-836"><span class="linenos">836</span></a>
</span><span id="raises-837"><a href="#raises-837"><span class="linenos">837</span></a><span class="sd">    You can also use the keyword argument ``match`` to assert that the</span>
</span><span id="raises-838"><a href="#raises-838"><span class="linenos">838</span></a><span class="sd">    exception matches a text or regex::</span>
</span><span id="raises-839"><a href="#raises-839"><span class="linenos">839</span></a>
</span><span id="raises-840"><a href="#raises-840"><span class="linenos">840</span></a><span class="sd">        &gt;&gt;&gt; with pytest.raises(ValueError, match=&#39;must be 0 or None&#39;):</span>
</span><span id="raises-841"><a href="#raises-841"><span class="linenos">841</span></a><span class="sd">        ...     raise ValueError(&quot;value must be 0 or None&quot;)</span>
</span><span id="raises-842"><a href="#raises-842"><span class="linenos">842</span></a>
</span><span id="raises-843"><a href="#raises-843"><span class="linenos">843</span></a><span class="sd">        &gt;&gt;&gt; with pytest.raises(ValueError, match=r&#39;must be \d+$&#39;):</span>
</span><span id="raises-844"><a href="#raises-844"><span class="linenos">844</span></a><span class="sd">        ...     raise ValueError(&quot;value must be 42&quot;)</span>
</span><span id="raises-845"><a href="#raises-845"><span class="linenos">845</span></a>
</span><span id="raises-846"><a href="#raises-846"><span class="linenos">846</span></a><span class="sd">    The ``match`` argument searches the formatted exception string, which includes any</span>
</span><span id="raises-847"><a href="#raises-847"><span class="linenos">847</span></a><span class="sd">    `PEP-678 &lt;https://peps.python.org/pep-0678/&gt;`__ ``__notes__``:</span>
</span><span id="raises-848"><a href="#raises-848"><span class="linenos">848</span></a>
</span><span id="raises-849"><a href="#raises-849"><span class="linenos">849</span></a><span class="sd">        &gt;&gt;&gt; with pytest.raises(ValueError, match=r&quot;had a note added&quot;):  # doctest: +SKIP</span>
</span><span id="raises-850"><a href="#raises-850"><span class="linenos">850</span></a><span class="sd">        ...     e = ValueError(&quot;value must be 42&quot;)</span>
</span><span id="raises-851"><a href="#raises-851"><span class="linenos">851</span></a><span class="sd">        ...     e.add_note(&quot;had a note added&quot;)</span>
</span><span id="raises-852"><a href="#raises-852"><span class="linenos">852</span></a><span class="sd">        ...     raise e</span>
</span><span id="raises-853"><a href="#raises-853"><span class="linenos">853</span></a>
</span><span id="raises-854"><a href="#raises-854"><span class="linenos">854</span></a><span class="sd">    The context manager produces an :class:`ExceptionInfo` object which can be used to inspect the</span>
</span><span id="raises-855"><a href="#raises-855"><span class="linenos">855</span></a><span class="sd">    details of the captured exception::</span>
</span><span id="raises-856"><a href="#raises-856"><span class="linenos">856</span></a>
</span><span id="raises-857"><a href="#raises-857"><span class="linenos">857</span></a><span class="sd">        &gt;&gt;&gt; with pytest.raises(ValueError) as exc_info:</span>
</span><span id="raises-858"><a href="#raises-858"><span class="linenos">858</span></a><span class="sd">        ...     raise ValueError(&quot;value must be 42&quot;)</span>
</span><span id="raises-859"><a href="#raises-859"><span class="linenos">859</span></a><span class="sd">        &gt;&gt;&gt; assert exc_info.type is ValueError</span>
</span><span id="raises-860"><a href="#raises-860"><span class="linenos">860</span></a><span class="sd">        &gt;&gt;&gt; assert exc_info.value.args[0] == &quot;value must be 42&quot;</span>
</span><span id="raises-861"><a href="#raises-861"><span class="linenos">861</span></a>
</span><span id="raises-862"><a href="#raises-862"><span class="linenos">862</span></a><span class="sd">    .. warning::</span>
</span><span id="raises-863"><a href="#raises-863"><span class="linenos">863</span></a>
</span><span id="raises-864"><a href="#raises-864"><span class="linenos">864</span></a><span class="sd">       Given that ``pytest.raises`` matches subclasses, be wary of using it to match :class:`Exception` like this::</span>
</span><span id="raises-865"><a href="#raises-865"><span class="linenos">865</span></a>
</span><span id="raises-866"><a href="#raises-866"><span class="linenos">866</span></a><span class="sd">           with pytest.raises(Exception):  # Careful, this will catch ANY exception raised.</span>
</span><span id="raises-867"><a href="#raises-867"><span class="linenos">867</span></a><span class="sd">               some_function()</span>
</span><span id="raises-868"><a href="#raises-868"><span class="linenos">868</span></a>
</span><span id="raises-869"><a href="#raises-869"><span class="linenos">869</span></a><span class="sd">       Because :class:`Exception` is the base class of almost all exceptions, it is easy for this to hide</span>
</span><span id="raises-870"><a href="#raises-870"><span class="linenos">870</span></a><span class="sd">       real bugs, where the user wrote this expecting a specific exception, but some other exception is being</span>
</span><span id="raises-871"><a href="#raises-871"><span class="linenos">871</span></a><span class="sd">       raised due to a bug introduced during a refactoring.</span>
</span><span id="raises-872"><a href="#raises-872"><span class="linenos">872</span></a>
</span><span id="raises-873"><a href="#raises-873"><span class="linenos">873</span></a><span class="sd">       Avoid using ``pytest.raises`` to catch :class:`Exception` unless certain that you really want to catch</span>
</span><span id="raises-874"><a href="#raises-874"><span class="linenos">874</span></a><span class="sd">       **any** exception raised.</span>
</span><span id="raises-875"><a href="#raises-875"><span class="linenos">875</span></a>
</span><span id="raises-876"><a href="#raises-876"><span class="linenos">876</span></a><span class="sd">    .. note::</span>
</span><span id="raises-877"><a href="#raises-877"><span class="linenos">877</span></a>
</span><span id="raises-878"><a href="#raises-878"><span class="linenos">878</span></a><span class="sd">       When using ``pytest.raises`` as a context manager, it&#39;s worthwhile to</span>
</span><span id="raises-879"><a href="#raises-879"><span class="linenos">879</span></a><span class="sd">       note that normal context manager rules apply and that the exception</span>
</span><span id="raises-880"><a href="#raises-880"><span class="linenos">880</span></a><span class="sd">       raised *must* be the final line in the scope of the context manager.</span>
</span><span id="raises-881"><a href="#raises-881"><span class="linenos">881</span></a><span class="sd">       Lines of code after that, within the scope of the context manager will</span>
</span><span id="raises-882"><a href="#raises-882"><span class="linenos">882</span></a><span class="sd">       not be executed. For example::</span>
</span><span id="raises-883"><a href="#raises-883"><span class="linenos">883</span></a>
</span><span id="raises-884"><a href="#raises-884"><span class="linenos">884</span></a><span class="sd">           &gt;&gt;&gt; value = 15</span>
</span><span id="raises-885"><a href="#raises-885"><span class="linenos">885</span></a><span class="sd">           &gt;&gt;&gt; with pytest.raises(ValueError) as exc_info:</span>
</span><span id="raises-886"><a href="#raises-886"><span class="linenos">886</span></a><span class="sd">           ...     if value &gt; 10:</span>
</span><span id="raises-887"><a href="#raises-887"><span class="linenos">887</span></a><span class="sd">           ...         raise ValueError(&quot;value must be &lt;= 10&quot;)</span>
</span><span id="raises-888"><a href="#raises-888"><span class="linenos">888</span></a><span class="sd">           ...     assert exc_info.type is ValueError  # This will not execute.</span>
</span><span id="raises-889"><a href="#raises-889"><span class="linenos">889</span></a>
</span><span id="raises-890"><a href="#raises-890"><span class="linenos">890</span></a><span class="sd">       Instead, the following approach must be taken (note the difference in</span>
</span><span id="raises-891"><a href="#raises-891"><span class="linenos">891</span></a><span class="sd">       scope)::</span>
</span><span id="raises-892"><a href="#raises-892"><span class="linenos">892</span></a>
</span><span id="raises-893"><a href="#raises-893"><span class="linenos">893</span></a><span class="sd">           &gt;&gt;&gt; with pytest.raises(ValueError) as exc_info:</span>
</span><span id="raises-894"><a href="#raises-894"><span class="linenos">894</span></a><span class="sd">           ...     if value &gt; 10:</span>
</span><span id="raises-895"><a href="#raises-895"><span class="linenos">895</span></a><span class="sd">           ...         raise ValueError(&quot;value must be &lt;= 10&quot;)</span>
</span><span id="raises-896"><a href="#raises-896"><span class="linenos">896</span></a><span class="sd">           ...</span>
</span><span id="raises-897"><a href="#raises-897"><span class="linenos">897</span></a><span class="sd">           &gt;&gt;&gt; assert exc_info.type is ValueError</span>
</span><span id="raises-898"><a href="#raises-898"><span class="linenos">898</span></a>
</span><span id="raises-899"><a href="#raises-899"><span class="linenos">899</span></a><span class="sd">    **Using with** ``pytest.mark.parametrize``</span>
</span><span id="raises-900"><a href="#raises-900"><span class="linenos">900</span></a>
</span><span id="raises-901"><a href="#raises-901"><span class="linenos">901</span></a><span class="sd">    When using :ref:`pytest.mark.parametrize ref`</span>
</span><span id="raises-902"><a href="#raises-902"><span class="linenos">902</span></a><span class="sd">    it is possible to parametrize tests such that</span>
</span><span id="raises-903"><a href="#raises-903"><span class="linenos">903</span></a><span class="sd">    some runs raise an exception and others do not.</span>
</span><span id="raises-904"><a href="#raises-904"><span class="linenos">904</span></a>
</span><span id="raises-905"><a href="#raises-905"><span class="linenos">905</span></a><span class="sd">    See :ref:`parametrizing_conditional_raising` for an example.</span>
</span><span id="raises-906"><a href="#raises-906"><span class="linenos">906</span></a>
</span><span id="raises-907"><a href="#raises-907"><span class="linenos">907</span></a><span class="sd">    .. seealso::</span>
</span><span id="raises-908"><a href="#raises-908"><span class="linenos">908</span></a>
</span><span id="raises-909"><a href="#raises-909"><span class="linenos">909</span></a><span class="sd">        :ref:`assertraises` for more examples and detailed discussion.</span>
</span><span id="raises-910"><a href="#raises-910"><span class="linenos">910</span></a>
</span><span id="raises-911"><a href="#raises-911"><span class="linenos">911</span></a><span class="sd">    **Legacy form**</span>
</span><span id="raises-912"><a href="#raises-912"><span class="linenos">912</span></a>
</span><span id="raises-913"><a href="#raises-913"><span class="linenos">913</span></a><span class="sd">    It is possible to specify a callable by passing a to-be-called lambda::</span>
</span><span id="raises-914"><a href="#raises-914"><span class="linenos">914</span></a>
</span><span id="raises-915"><a href="#raises-915"><span class="linenos">915</span></a><span class="sd">        &gt;&gt;&gt; raises(ZeroDivisionError, lambda: 1/0)</span>
</span><span id="raises-916"><a href="#raises-916"><span class="linenos">916</span></a><span class="sd">        &lt;ExceptionInfo ...&gt;</span>
</span><span id="raises-917"><a href="#raises-917"><span class="linenos">917</span></a>
</span><span id="raises-918"><a href="#raises-918"><span class="linenos">918</span></a><span class="sd">    or you can specify an arbitrary callable with arguments::</span>
</span><span id="raises-919"><a href="#raises-919"><span class="linenos">919</span></a>
</span><span id="raises-920"><a href="#raises-920"><span class="linenos">920</span></a><span class="sd">        &gt;&gt;&gt; def f(x): return 1/x</span>
</span><span id="raises-921"><a href="#raises-921"><span class="linenos">921</span></a><span class="sd">        ...</span>
</span><span id="raises-922"><a href="#raises-922"><span class="linenos">922</span></a><span class="sd">        &gt;&gt;&gt; raises(ZeroDivisionError, f, 0)</span>
</span><span id="raises-923"><a href="#raises-923"><span class="linenos">923</span></a><span class="sd">        &lt;ExceptionInfo ...&gt;</span>
</span><span id="raises-924"><a href="#raises-924"><span class="linenos">924</span></a><span class="sd">        &gt;&gt;&gt; raises(ZeroDivisionError, f, x=0)</span>
</span><span id="raises-925"><a href="#raises-925"><span class="linenos">925</span></a><span class="sd">        &lt;ExceptionInfo ...&gt;</span>
</span><span id="raises-926"><a href="#raises-926"><span class="linenos">926</span></a>
</span><span id="raises-927"><a href="#raises-927"><span class="linenos">927</span></a><span class="sd">    The form above is fully supported but discouraged for new code because the</span>
</span><span id="raises-928"><a href="#raises-928"><span class="linenos">928</span></a><span class="sd">    context manager form is regarded as more readable and less error-prone.</span>
</span><span id="raises-929"><a href="#raises-929"><span class="linenos">929</span></a>
</span><span id="raises-930"><a href="#raises-930"><span class="linenos">930</span></a><span class="sd">    .. note::</span>
</span><span id="raises-931"><a href="#raises-931"><span class="linenos">931</span></a><span class="sd">        Similar to caught exception objects in Python, explicitly clearing</span>
</span><span id="raises-932"><a href="#raises-932"><span class="linenos">932</span></a><span class="sd">        local references to returned ``ExceptionInfo`` objects can</span>
</span><span id="raises-933"><a href="#raises-933"><span class="linenos">933</span></a><span class="sd">        help the Python interpreter speed up its garbage collection.</span>
</span><span id="raises-934"><a href="#raises-934"><span class="linenos">934</span></a>
</span><span id="raises-935"><a href="#raises-935"><span class="linenos">935</span></a><span class="sd">        Clearing those references breaks a reference cycle</span>
</span><span id="raises-936"><a href="#raises-936"><span class="linenos">936</span></a><span class="sd">        (``ExceptionInfo`` --&gt; caught exception --&gt; frame stack raising</span>
</span><span id="raises-937"><a href="#raises-937"><span class="linenos">937</span></a><span class="sd">        the exception --&gt; current frame stack --&gt; local variables --&gt;</span>
</span><span id="raises-938"><a href="#raises-938"><span class="linenos">938</span></a><span class="sd">        ``ExceptionInfo``) which makes Python keep all objects referenced</span>
</span><span id="raises-939"><a href="#raises-939"><span class="linenos">939</span></a><span class="sd">        from that cycle (including all local variables in the current</span>
</span><span id="raises-940"><a href="#raises-940"><span class="linenos">940</span></a><span class="sd">        frame) alive until the next cyclic garbage collection run.</span>
</span><span id="raises-941"><a href="#raises-941"><span class="linenos">941</span></a><span class="sd">        More detailed information can be found in the official Python</span>
</span><span id="raises-942"><a href="#raises-942"><span class="linenos">942</span></a><span class="sd">        documentation for :ref:`the try statement &lt;python:try&gt;`.</span>
</span><span id="raises-943"><a href="#raises-943"><span class="linenos">943</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="raises-944"><a href="#raises-944"><span class="linenos">944</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="raises-945"><a href="#raises-945"><span class="linenos">945</span></a>
</span><span id="raises-946"><a href="#raises-946"><span class="linenos">946</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">expected_exception</span><span class="p">:</span>
</span><span id="raises-947"><a href="#raises-947"><span class="linenos">947</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="raises-948"><a href="#raises-948"><span class="linenos">948</span></a>            <span class="sa">f</span><span class="s2">&quot;Expected an exception type or a tuple of exception types, but got `</span><span class="si">{</span><span class="n">expected_exception</span><span class="si">!r}</span><span class="s2">`. &quot;</span>
</span><span id="raises-949"><a href="#raises-949"><span class="linenos">949</span></a>            <span class="sa">f</span><span class="s2">&quot;Raising exceptions is already understood as failing the test, so you don&#39;t need &quot;</span>
</span><span id="raises-950"><a href="#raises-950"><span class="linenos">950</span></a>            <span class="sa">f</span><span class="s2">&quot;any special code to say &#39;this should never raise an exception&#39;.&quot;</span>
</span><span id="raises-951"><a href="#raises-951"><span class="linenos">951</span></a>        <span class="p">)</span>
</span><span id="raises-952"><a href="#raises-952"><span class="linenos">952</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expected_exception</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
</span><span id="raises-953"><a href="#raises-953"><span class="linenos">953</span></a>        <span class="n">expected_exceptions</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">E</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">expected_exception</span><span class="p">,)</span>
</span><span id="raises-954"><a href="#raises-954"><span class="linenos">954</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="raises-955"><a href="#raises-955"><span class="linenos">955</span></a>        <span class="n">expected_exceptions</span> <span class="o">=</span> <span class="n">expected_exception</span>
</span><span id="raises-956"><a href="#raises-956"><span class="linenos">956</span></a>    <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">expected_exceptions</span><span class="p">:</span>
</span><span id="raises-957"><a href="#raises-957"><span class="linenos">957</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="ne">BaseException</span><span class="p">):</span>
</span><span id="raises-958"><a href="#raises-958"><span class="linenos">958</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;expected exception must be a BaseException type, not </span><span class="si">{}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore[unreachable]</span>
</span><span id="raises-959"><a href="#raises-959"><span class="linenos">959</span></a>            <span class="n">not_a</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="k">else</span> <span class="nb">type</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="raises-960"><a href="#raises-960"><span class="linenos">960</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">not_a</span><span class="p">))</span>
</span><span id="raises-961"><a href="#raises-961"><span class="linenos">961</span></a>
</span><span id="raises-962"><a href="#raises-962"><span class="linenos">962</span></a>    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;DID NOT RAISE </span><span class="si">{</span><span class="n">expected_exception</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="raises-963"><a href="#raises-963"><span class="linenos">963</span></a>
</span><span id="raises-964"><a href="#raises-964"><span class="linenos">964</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
</span><span id="raises-965"><a href="#raises-965"><span class="linenos">965</span></a>        <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;match&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="raises-966"><a href="#raises-966"><span class="linenos">966</span></a>        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
</span><span id="raises-967"><a href="#raises-967"><span class="linenos">967</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unexpected keyword arguments passed to pytest.raises: &quot;</span>
</span><span id="raises-968"><a href="#raises-968"><span class="linenos">968</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="raises-969"><a href="#raises-969"><span class="linenos">969</span></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Use context-manager form instead?&quot;</span>
</span><span id="raises-970"><a href="#raises-970"><span class="linenos">970</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="raises-971"><a href="#raises-971"><span class="linenos">971</span></a>        <span class="k">return</span> <span class="n">RaisesContext</span><span class="p">(</span><span class="n">expected_exception</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">match</span><span class="p">)</span>
</span><span id="raises-972"><a href="#raises-972"><span class="linenos">972</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="raises-973"><a href="#raises-973"><span class="linenos">973</span></a>        <span class="n">func</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="raises-974"><a href="#raises-974"><span class="linenos">974</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="raises-975"><a href="#raises-975"><span class="linenos">975</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="si">!r}</span><span class="s2"> object (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="si">}</span><span class="s2">) must be callable&quot;</span><span class="p">)</span>
</span><span id="raises-976"><a href="#raises-976"><span class="linenos">976</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="raises-977"><a href="#raises-977"><span class="linenos">977</span></a>            <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="raises-978"><a href="#raises-978"><span class="linenos">978</span></a>        <span class="k">except</span> <span class="n">expected_exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="raises-979"><a href="#raises-979"><span class="linenos">979</span></a>            <span class="k">return</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="o">.</span><span class="n">from_exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="raises-980"><a href="#raises-980"><span class="linenos">980</span></a>    <span class="n">fail</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Assert that a code block/function call raises an exception type, or one of its subclasses.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>expected_exception</strong>: 
The expected exception type, or a tuple if one of multiple possible
exception types are expected. Note that subclasses of the passed exceptions
will also match.</li>
</ul>

<p>:kwparam str | re.Pattern[str] | None match:
    If specified, a string containing a regular expression,
    or a regular expression object, that is tested against the string
    representation of the exception and its :pep:<code>678</code> <code>__notes__</code>
    using <code>re.search()</code>.</p>

<pre><code>To match a literal string that may contain :ref:`special characters
&lt;re-syntax&gt;`, the pattern can first be escaped with `re.escape()`.

(This is only used when ``<a href="#raises">pytest.raises</a>`` is used as a context manager,
and passed through to the function otherwise.
When using ``<a href="#raises">pytest.raises</a>`` as a function, you can use:
``<a href="#raises">pytest.raises</a>(Exc, func, match="passed on").match("my pattern")``.)
</code></pre>

<p>Use <code><a href="#raises">pytest.raises</a></code> as a context manager, which will capture the exception of the given
type, or any of its subclasses::</p>

<pre><code>&gt;&gt;&gt; import pytest
&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ZeroDivisionError):
...    1/0
</code></pre>

<p>If the code block does not raise the expected exception (<code>ZeroDivisionError</code> in the example
above), or no exception at all, the check will fail instead.</p>

<p>You can also use the keyword argument <code>match</code> to assert that the
exception matches a text or regex::</p>

<pre><code>&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ValueError, match='must be 0 or None'):
...     raise ValueError("value must be 0 or None")

&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ValueError, match=r'must be \d+$'):
...     raise ValueError("value must be 42")
</code></pre>

<p>The <code>match</code> argument searches the formatted exception string, which includes any
<a href="https://peps.python.org/pep-0678/">PEP-678 </a>_ <code>__notes__</code>:</p>

<pre><code>&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ValueError, match=r"had a note added"):  # doctest: +SKIP
...     e = ValueError("value must be 42")
...     e.add_note("had a note added")
...     raise e
</code></pre>

<p>The context manager produces an <code><a href="#ExceptionInfo">ExceptionInfo</a></code> object which can be used to inspect the
details of the captured exception::</p>

<pre><code>&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ValueError) as exc_info:
...     raise ValueError("value must be 42")
&gt;&gt;&gt; assert exc_info.type is ValueError
&gt;&gt;&gt; assert exc_info.value.args[0] == "value must be 42"
</code></pre>

<div class="alert warning">

<p>Given that <code><a href="#raises">pytest.raises</a></code> matches subclasses, be wary of using it to match <code>Exception</code> like this::</p>

<pre><code>with <a href="#raises">pytest.raises</a>(Exception):  # Careful, this will catch ANY exception raised.
    some_function()
</code></pre>

<p>Because <code>Exception</code> is the base class of almost all exceptions, it is easy for this to hide
real bugs, where the user wrote this expecting a specific exception, but some other exception is being
raised due to a bug introduced during a refactoring.</p>

<p>Avoid using <code><a href="#raises">pytest.raises</a></code> to catch <code>Exception</code> unless certain that you really want to catch
<strong>any</strong> exception raised.</p>

</div>

<div class="alert note">

<p>When using <code><a href="#raises">pytest.raises</a></code> as a context manager, it's worthwhile to
note that normal context manager rules apply and that the exception
raised <em>must</em> be the final line in the scope of the context manager.
Lines of code after that, within the scope of the context manager will
not be executed. For example::</p>

<pre><code>&gt;&gt;&gt; value = 15
&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ValueError) as exc_info:
...     if value &gt; 10:
...         raise ValueError("value must be &lt;= 10")
...     assert exc_info.type is ValueError  # This will not execute.
</code></pre>

<p>Instead, the following approach must be taken (note the difference in
scope)::</p>

<pre><code>&gt;&gt;&gt; with <a href="#raises">pytest.raises</a>(ValueError) as exc_info:
...     if value &gt; 10:
...         raise ValueError("value must be &lt;= 10")
...
&gt;&gt;&gt; assert exc_info.type is ValueError
</code></pre>

</div>

<p><strong>Using with</strong> <code>pytest.mark.parametrize</code></p>

<p>When using :ref:<code>pytest.mark.parametrize ref</code>
it is possible to parametrize tests such that
some runs raise an exception and others do not.</p>

<p>See :ref:<code>parametrizing_conditional_raising</code> for an example.</p>

<p><em>seealso.</em></p>

<p><strong>Legacy form</strong></p>

<p>It is possible to specify a callable by passing a to-be-called lambda::</p>

<pre><code>&gt;&gt;&gt; raises(ZeroDivisionError, lambda: 1/0)
&lt;ExceptionInfo ...&gt;
</code></pre>

<p>or you can specify an arbitrary callable with arguments::</p>

<pre><code>&gt;&gt;&gt; def f(x): return 1/x
...
&gt;&gt;&gt; raises(ZeroDivisionError, f, 0)
&lt;ExceptionInfo ...&gt;
&gt;&gt;&gt; raises(ZeroDivisionError, f, x=0)
&lt;ExceptionInfo ...&gt;
</code></pre>

<p>The form above is fully supported but discouraged for new code because the
context manager form is regarded as more readable and less error-prone.</p>

<div class="alert note">

<p>Similar to caught exception objects in Python, explicitly clearing
local references to returned <code><a href="#ExceptionInfo">ExceptionInfo</a></code> objects can
help the Python interpreter speed up its garbage collection.</p>

<p>Clearing those references breaks a reference cycle
(<code><a href="#ExceptionInfo">ExceptionInfo</a></code> --> caught exception --> frame stack raising
the exception --> current frame stack --> local variables -->
<code><a href="#ExceptionInfo">ExceptionInfo</a></code>) which makes Python keep all objects referenced
from that cycle (including all local variables in the current
frame) alive until the next cyclic garbage collection run.
More detailed information can be found in the official Python
documentation for :ref:<code>the try statement &lt;python:try&gt;</code>.</p>

</div>
</div>


                </section>
                <section id="RecordedHookCall">
                            <input id="RecordedHookCall-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">RecordedHookCall</span>:

                <label class="view-source-button" for="RecordedHookCall-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RecordedHookCall"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RecordedHookCall-221"><a href="#RecordedHookCall-221"><span class="linenos">221</span></a><span class="nd">@final</span>
</span><span id="RecordedHookCall-222"><a href="#RecordedHookCall-222"><span class="linenos">222</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RecordedHookCall</span><span class="p">:</span>
</span><span id="RecordedHookCall-223"><a href="#RecordedHookCall-223"><span class="linenos">223</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A recorded call to a hook.</span>
</span><span id="RecordedHookCall-224"><a href="#RecordedHookCall-224"><span class="linenos">224</span></a>
</span><span id="RecordedHookCall-225"><a href="#RecordedHookCall-225"><span class="linenos">225</span></a><span class="sd">    The arguments to the hook call are set as attributes.</span>
</span><span id="RecordedHookCall-226"><a href="#RecordedHookCall-226"><span class="linenos">226</span></a><span class="sd">    For example:</span>
</span><span id="RecordedHookCall-227"><a href="#RecordedHookCall-227"><span class="linenos">227</span></a>
</span><span id="RecordedHookCall-228"><a href="#RecordedHookCall-228"><span class="linenos">228</span></a><span class="sd">    .. code-block:: python</span>
</span><span id="RecordedHookCall-229"><a href="#RecordedHookCall-229"><span class="linenos">229</span></a>
</span><span id="RecordedHookCall-230"><a href="#RecordedHookCall-230"><span class="linenos">230</span></a><span class="sd">        calls = hook_recorder.getcalls(&quot;pytest_runtest_setup&quot;)</span>
</span><span id="RecordedHookCall-231"><a href="#RecordedHookCall-231"><span class="linenos">231</span></a><span class="sd">        # Suppose pytest_runtest_setup was called once with `item=an_item`.</span>
</span><span id="RecordedHookCall-232"><a href="#RecordedHookCall-232"><span class="linenos">232</span></a><span class="sd">        assert calls[0].item is an_item</span>
</span><span id="RecordedHookCall-233"><a href="#RecordedHookCall-233"><span class="linenos">233</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RecordedHookCall-234"><a href="#RecordedHookCall-234"><span class="linenos">234</span></a>
</span><span id="RecordedHookCall-235"><a href="#RecordedHookCall-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RecordedHookCall-236"><a href="#RecordedHookCall-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="RecordedHookCall-237"><a href="#RecordedHookCall-237"><span class="linenos">237</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="RecordedHookCall-238"><a href="#RecordedHookCall-238"><span class="linenos">238</span></a>
</span><span id="RecordedHookCall-239"><a href="#RecordedHookCall-239"><span class="linenos">239</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RecordedHookCall-240"><a href="#RecordedHookCall-240"><span class="linenos">240</span></a>        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="RecordedHookCall-241"><a href="#RecordedHookCall-241"><span class="linenos">241</span></a>        <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;_name&quot;</span><span class="p">]</span>
</span><span id="RecordedHookCall-242"><a href="#RecordedHookCall-242"><span class="linenos">242</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;RecordedHookCall </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">!r}</span><span class="s2">(**</span><span class="si">{</span><span class="n">d</span><span class="si">!r}</span><span class="s2">)&gt;&quot;</span>
</span><span id="RecordedHookCall-243"><a href="#RecordedHookCall-243"><span class="linenos">243</span></a>
</span><span id="RecordedHookCall-244"><a href="#RecordedHookCall-244"><span class="linenos">244</span></a>    <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
</span><span id="RecordedHookCall-245"><a href="#RecordedHookCall-245"><span class="linenos">245</span></a>        <span class="c1"># The class has undetermined attributes, this tells mypy about it.</span>
</span><span id="RecordedHookCall-246"><a href="#RecordedHookCall-246"><span class="linenos">246</span></a>        <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span> <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A recorded call to a hook.</p>

<p>The arguments to the hook call are set as attributes.
For example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">calls</span> <span class="o">=</span> <span class="n">hook_recorder</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_runtest_setup&quot;</span><span class="p">)</span>
<span class="c1"># Suppose pytest_runtest_setup was called once with `item=an_item`.</span>
<span class="k">assert</span> <span class="n">calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span> <span class="ow">is</span> <span class="n">an_item</span>
</code></pre>
</div>
</div>


                            <div id="RecordedHookCall.__init__" class="classattr">
                                        <input id="RecordedHookCall.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RecordedHookCall</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="RecordedHookCall.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RecordedHookCall.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RecordedHookCall.__init__-235"><a href="#RecordedHookCall.__init__-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RecordedHookCall.__init__-236"><a href="#RecordedHookCall.__init__-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="RecordedHookCall.__init__-237"><a href="#RecordedHookCall.__init__-237"><span class="linenos">237</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="register_assert_rewrite">
                            <input id="register_assert_rewrite-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">register_assert_rewrite</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span><span class="n">names</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="register_assert_rewrite-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#register_assert_rewrite"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="register_assert_rewrite-59"><a href="#register_assert_rewrite-59"><span class="linenos">59</span></a><span class="k">def</span><span class="w"> </span><span class="nf">register_assert_rewrite</span><span class="p">(</span><span class="o">*</span><span class="n">names</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="register_assert_rewrite-60"><a href="#register_assert_rewrite-60"><span class="linenos">60</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Register one or more module names to be rewritten on import.</span>
</span><span id="register_assert_rewrite-61"><a href="#register_assert_rewrite-61"><span class="linenos">61</span></a>
</span><span id="register_assert_rewrite-62"><a href="#register_assert_rewrite-62"><span class="linenos">62</span></a><span class="sd">    This function will make sure that this module or all modules inside</span>
</span><span id="register_assert_rewrite-63"><a href="#register_assert_rewrite-63"><span class="linenos">63</span></a><span class="sd">    the package will get their assert statements rewritten.</span>
</span><span id="register_assert_rewrite-64"><a href="#register_assert_rewrite-64"><span class="linenos">64</span></a><span class="sd">    Thus you should make sure to call this before the module is</span>
</span><span id="register_assert_rewrite-65"><a href="#register_assert_rewrite-65"><span class="linenos">65</span></a><span class="sd">    actually imported, usually in your __init__.py if you are a plugin</span>
</span><span id="register_assert_rewrite-66"><a href="#register_assert_rewrite-66"><span class="linenos">66</span></a><span class="sd">    using a package.</span>
</span><span id="register_assert_rewrite-67"><a href="#register_assert_rewrite-67"><span class="linenos">67</span></a>
</span><span id="register_assert_rewrite-68"><a href="#register_assert_rewrite-68"><span class="linenos">68</span></a><span class="sd">    :param names: The module names to register.</span>
</span><span id="register_assert_rewrite-69"><a href="#register_assert_rewrite-69"><span class="linenos">69</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="register_assert_rewrite-70"><a href="#register_assert_rewrite-70"><span class="linenos">70</span></a>    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
</span><span id="register_assert_rewrite-71"><a href="#register_assert_rewrite-71"><span class="linenos">71</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="register_assert_rewrite-72"><a href="#register_assert_rewrite-72"><span class="linenos">72</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;expected module names as *args, got </span><span class="si">{0}</span><span class="s2"> instead&quot;</span>  <span class="c1"># type: ignore[unreachable]</span>
</span><span id="register_assert_rewrite-73"><a href="#register_assert_rewrite-73"><span class="linenos">73</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">names</span><span class="p">)))</span>
</span><span id="register_assert_rewrite-74"><a href="#register_assert_rewrite-74"><span class="linenos">74</span></a>    <span class="k">for</span> <span class="n">hook</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">meta_path</span><span class="p">:</span>
</span><span id="register_assert_rewrite-75"><a href="#register_assert_rewrite-75"><span class="linenos">75</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hook</span><span class="p">,</span> <span class="n">rewrite</span><span class="o">.</span><span class="n">AssertionRewritingHook</span><span class="p">):</span>
</span><span id="register_assert_rewrite-76"><a href="#register_assert_rewrite-76"><span class="linenos">76</span></a>            <span class="n">importhook</span> <span class="o">=</span> <span class="n">hook</span>
</span><span id="register_assert_rewrite-77"><a href="#register_assert_rewrite-77"><span class="linenos">77</span></a>            <span class="k">break</span>
</span><span id="register_assert_rewrite-78"><a href="#register_assert_rewrite-78"><span class="linenos">78</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="register_assert_rewrite-79"><a href="#register_assert_rewrite-79"><span class="linenos">79</span></a>        <span class="c1"># TODO(typing): Add a protocol for mark_rewrite() and use it</span>
</span><span id="register_assert_rewrite-80"><a href="#register_assert_rewrite-80"><span class="linenos">80</span></a>        <span class="c1"># for importhook and for PytestPluginManager.rewrite_hook.</span>
</span><span id="register_assert_rewrite-81"><a href="#register_assert_rewrite-81"><span class="linenos">81</span></a>        <span class="n">importhook</span> <span class="o">=</span> <span class="n">DummyRewriteHook</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
</span><span id="register_assert_rewrite-82"><a href="#register_assert_rewrite-82"><span class="linenos">82</span></a>    <span class="n">importhook</span><span class="o">.</span><span class="n">mark_rewrite</span><span class="p">(</span><span class="o">*</span><span class="n">names</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Register one or more module names to be rewritten on import.</p>

<p>This function will make sure that this module or all modules inside
the package will get their assert statements rewritten.
Thus you should make sure to call this before the module is
actually imported, usually in your __init__.py if you are a plugin
using a package.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>names</strong>:  The module names to register.</li>
</ul>
</div>


                </section>
                <section id="RunResult">
                            <input id="RunResult-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">RunResult</span>:

                <label class="view-source-button" for="RunResult-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunResult"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunResult-518"><a href="#RunResult-518"><span class="linenos">518</span></a><span class="nd">@final</span>
</span><span id="RunResult-519"><a href="#RunResult-519"><span class="linenos">519</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunResult</span><span class="p">:</span>
</span><span id="RunResult-520"><a href="#RunResult-520"><span class="linenos">520</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The result of running a command from :class:`~pytest.Pytester`.&quot;&quot;&quot;</span>
</span><span id="RunResult-521"><a href="#RunResult-521"><span class="linenos">521</span></a>
</span><span id="RunResult-522"><a href="#RunResult-522"><span class="linenos">522</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="RunResult-523"><a href="#RunResult-523"><span class="linenos">523</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="RunResult-524"><a href="#RunResult-524"><span class="linenos">524</span></a>        <span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span><span class="p">,</span>
</span><span id="RunResult-525"><a href="#RunResult-525"><span class="linenos">525</span></a>        <span class="n">outlines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="RunResult-526"><a href="#RunResult-526"><span class="linenos">526</span></a>        <span class="n">errlines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="RunResult-527"><a href="#RunResult-527"><span class="linenos">527</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="RunResult-528"><a href="#RunResult-528"><span class="linenos">528</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RunResult-529"><a href="#RunResult-529"><span class="linenos">529</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="RunResult-530"><a href="#RunResult-530"><span class="linenos">530</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span><span id="RunResult-531"><a href="#RunResult-531"><span class="linenos">531</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;The return value.&quot;&quot;&quot;</span>
</span><span id="RunResult-532"><a href="#RunResult-532"><span class="linenos">532</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="RunResult-533"><a href="#RunResult-533"><span class="linenos">533</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span>
</span><span id="RunResult-534"><a href="#RunResult-534"><span class="linenos">534</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">outlines</span> <span class="o">=</span> <span class="n">outlines</span>
</span><span id="RunResult-535"><a href="#RunResult-535"><span class="linenos">535</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of lines captured from stdout.&quot;&quot;&quot;</span>
</span><span id="RunResult-536"><a href="#RunResult-536"><span class="linenos">536</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">errlines</span> <span class="o">=</span> <span class="n">errlines</span>
</span><span id="RunResult-537"><a href="#RunResult-537"><span class="linenos">537</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of lines captured from stderr.&quot;&quot;&quot;</span>
</span><span id="RunResult-538"><a href="#RunResult-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">LineMatcher</span><span class="p">(</span><span class="n">outlines</span><span class="p">)</span>
</span><span id="RunResult-539"><a href="#RunResult-539"><span class="linenos">539</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`~pytest.LineMatcher` of stdout.</span>
</span><span id="RunResult-540"><a href="#RunResult-540"><span class="linenos">540</span></a>
</span><span id="RunResult-541"><a href="#RunResult-541"><span class="linenos">541</span></a><span class="sd">        Use e.g. :func:`str(stdout) &lt;pytest.LineMatcher.__str__()&gt;` to reconstruct stdout, or the commonly used</span>
</span><span id="RunResult-542"><a href="#RunResult-542"><span class="linenos">542</span></a><span class="sd">        :func:`stdout.fnmatch_lines() &lt;pytest.LineMatcher.fnmatch_lines()&gt;` method.</span>
</span><span id="RunResult-543"><a href="#RunResult-543"><span class="linenos">543</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult-544"><a href="#RunResult-544"><span class="linenos">544</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stderr</span> <span class="o">=</span> <span class="n">LineMatcher</span><span class="p">(</span><span class="n">errlines</span><span class="p">)</span>
</span><span id="RunResult-545"><a href="#RunResult-545"><span class="linenos">545</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`~pytest.LineMatcher` of stderr.&quot;&quot;&quot;</span>
</span><span id="RunResult-546"><a href="#RunResult-546"><span class="linenos">546</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>
</span><span id="RunResult-547"><a href="#RunResult-547"><span class="linenos">547</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Duration in seconds.&quot;&quot;&quot;</span>
</span><span id="RunResult-548"><a href="#RunResult-548"><span class="linenos">548</span></a>
</span><span id="RunResult-549"><a href="#RunResult-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunResult-550"><a href="#RunResult-550"><span class="linenos">550</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="RunResult-551"><a href="#RunResult-551"><span class="linenos">551</span></a>            <span class="s2">&quot;&lt;RunResult ret=</span><span class="si">%s</span><span class="s2"> len(stdout.lines)=</span><span class="si">%d</span><span class="s2"> len(stderr.lines)=</span><span class="si">%d</span><span class="s2"> duration=</span><span class="si">%.2f</span><span class="s2">s&gt;&quot;</span>
</span><span id="RunResult-552"><a href="#RunResult-552"><span class="linenos">552</span></a>            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ret</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">lines</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">lines</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
</span><span id="RunResult-553"><a href="#RunResult-553"><span class="linenos">553</span></a>        <span class="p">)</span>
</span><span id="RunResult-554"><a href="#RunResult-554"><span class="linenos">554</span></a>
</span><span id="RunResult-555"><a href="#RunResult-555"><span class="linenos">555</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseoutcomes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="RunResult-556"><a href="#RunResult-556"><span class="linenos">556</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a dictionary of outcome noun -&gt; count from parsing the terminal</span>
</span><span id="RunResult-557"><a href="#RunResult-557"><span class="linenos">557</span></a><span class="sd">        output that the test process produced.</span>
</span><span id="RunResult-558"><a href="#RunResult-558"><span class="linenos">558</span></a>
</span><span id="RunResult-559"><a href="#RunResult-559"><span class="linenos">559</span></a><span class="sd">        The returned nouns will always be in plural form::</span>
</span><span id="RunResult-560"><a href="#RunResult-560"><span class="linenos">560</span></a>
</span><span id="RunResult-561"><a href="#RunResult-561"><span class="linenos">561</span></a><span class="sd">            ======= 1 failed, 1 passed, 1 warning, 1 error in 0.13s ====</span>
</span><span id="RunResult-562"><a href="#RunResult-562"><span class="linenos">562</span></a>
</span><span id="RunResult-563"><a href="#RunResult-563"><span class="linenos">563</span></a><span class="sd">        Will return ``{&quot;failed&quot;: 1, &quot;passed&quot;: 1, &quot;warnings&quot;: 1, &quot;errors&quot;: 1}``.</span>
</span><span id="RunResult-564"><a href="#RunResult-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult-565"><a href="#RunResult-565"><span class="linenos">565</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_summary_nouns</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outlines</span><span class="p">)</span>
</span><span id="RunResult-566"><a href="#RunResult-566"><span class="linenos">566</span></a>
</span><span id="RunResult-567"><a href="#RunResult-567"><span class="linenos">567</span></a>    <span class="nd">@classmethod</span>
</span><span id="RunResult-568"><a href="#RunResult-568"><span class="linenos">568</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_summary_nouns</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lines</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="RunResult-569"><a href="#RunResult-569"><span class="linenos">569</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract the nouns from a pytest terminal summary line.</span>
</span><span id="RunResult-570"><a href="#RunResult-570"><span class="linenos">570</span></a>
</span><span id="RunResult-571"><a href="#RunResult-571"><span class="linenos">571</span></a><span class="sd">        It always returns the plural noun for consistency::</span>
</span><span id="RunResult-572"><a href="#RunResult-572"><span class="linenos">572</span></a>
</span><span id="RunResult-573"><a href="#RunResult-573"><span class="linenos">573</span></a><span class="sd">            ======= 1 failed, 1 passed, 1 warning, 1 error in 0.13s ====</span>
</span><span id="RunResult-574"><a href="#RunResult-574"><span class="linenos">574</span></a>
</span><span id="RunResult-575"><a href="#RunResult-575"><span class="linenos">575</span></a><span class="sd">        Will return ``{&quot;failed&quot;: 1, &quot;passed&quot;: 1, &quot;warnings&quot;: 1, &quot;errors&quot;: 1}``.</span>
</span><span id="RunResult-576"><a href="#RunResult-576"><span class="linenos">576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult-577"><a href="#RunResult-577"><span class="linenos">577</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
</span><span id="RunResult-578"><a href="#RunResult-578"><span class="linenos">578</span></a>            <span class="k">if</span> <span class="n">rex_session_duration</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span id="RunResult-579"><a href="#RunResult-579"><span class="linenos">579</span></a>                <span class="n">outcomes</span> <span class="o">=</span> <span class="n">rex_outcome</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="RunResult-580"><a href="#RunResult-580"><span class="linenos">580</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="n">noun</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">noun</span><span class="p">)</span> <span class="ow">in</span> <span class="n">outcomes</span><span class="p">}</span>
</span><span id="RunResult-581"><a href="#RunResult-581"><span class="linenos">581</span></a>                <span class="k">break</span>
</span><span id="RunResult-582"><a href="#RunResult-582"><span class="linenos">582</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RunResult-583"><a href="#RunResult-583"><span class="linenos">583</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pytest terminal summary report not found&quot;</span><span class="p">)</span>
</span><span id="RunResult-584"><a href="#RunResult-584"><span class="linenos">584</span></a>
</span><span id="RunResult-585"><a href="#RunResult-585"><span class="linenos">585</span></a>        <span class="n">to_plural</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="RunResult-586"><a href="#RunResult-586"><span class="linenos">586</span></a>            <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="s2">&quot;warnings&quot;</span><span class="p">,</span>
</span><span id="RunResult-587"><a href="#RunResult-587"><span class="linenos">587</span></a>            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;errors&quot;</span><span class="p">,</span>
</span><span id="RunResult-588"><a href="#RunResult-588"><span class="linenos">588</span></a>        <span class="p">}</span>
</span><span id="RunResult-589"><a href="#RunResult-589"><span class="linenos">589</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">to_plural</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ret</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="RunResult-590"><a href="#RunResult-590"><span class="linenos">590</span></a>
</span><span id="RunResult-591"><a href="#RunResult-591"><span class="linenos">591</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">assert_outcomes</span><span class="p">(</span>
</span><span id="RunResult-592"><a href="#RunResult-592"><span class="linenos">592</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="RunResult-593"><a href="#RunResult-593"><span class="linenos">593</span></a>        <span class="n">passed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult-594"><a href="#RunResult-594"><span class="linenos">594</span></a>        <span class="n">skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult-595"><a href="#RunResult-595"><span class="linenos">595</span></a>        <span class="n">failed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult-596"><a href="#RunResult-596"><span class="linenos">596</span></a>        <span class="n">errors</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult-597"><a href="#RunResult-597"><span class="linenos">597</span></a>        <span class="n">xpassed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult-598"><a href="#RunResult-598"><span class="linenos">598</span></a>        <span class="n">xfailed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult-599"><a href="#RunResult-599"><span class="linenos">599</span></a>        <span class="n">warnings</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="RunResult-600"><a href="#RunResult-600"><span class="linenos">600</span></a>        <span class="n">deselected</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="RunResult-601"><a href="#RunResult-601"><span class="linenos">601</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RunResult-602"><a href="#RunResult-602"><span class="linenos">602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunResult-603"><a href="#RunResult-603"><span class="linenos">603</span></a><span class="sd">        Assert that the specified outcomes appear with the respective</span>
</span><span id="RunResult-604"><a href="#RunResult-604"><span class="linenos">604</span></a><span class="sd">        numbers (0 means it didn&#39;t occur) in the text output from a test run.</span>
</span><span id="RunResult-605"><a href="#RunResult-605"><span class="linenos">605</span></a>
</span><span id="RunResult-606"><a href="#RunResult-606"><span class="linenos">606</span></a><span class="sd">        ``warnings`` and ``deselected`` are only checked if not None.</span>
</span><span id="RunResult-607"><a href="#RunResult-607"><span class="linenos">607</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult-608"><a href="#RunResult-608"><span class="linenos">608</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunResult-609"><a href="#RunResult-609"><span class="linenos">609</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester_assertions</span><span class="w"> </span><span class="kn">import</span> <span class="n">assert_outcomes</span>
</span><span id="RunResult-610"><a href="#RunResult-610"><span class="linenos">610</span></a>
</span><span id="RunResult-611"><a href="#RunResult-611"><span class="linenos">611</span></a>        <span class="n">outcomes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseoutcomes</span><span class="p">()</span>
</span><span id="RunResult-612"><a href="#RunResult-612"><span class="linenos">612</span></a>        <span class="n">assert_outcomes</span><span class="p">(</span>
</span><span id="RunResult-613"><a href="#RunResult-613"><span class="linenos">613</span></a>            <span class="n">outcomes</span><span class="p">,</span>
</span><span id="RunResult-614"><a href="#RunResult-614"><span class="linenos">614</span></a>            <span class="n">passed</span><span class="o">=</span><span class="n">passed</span><span class="p">,</span>
</span><span id="RunResult-615"><a href="#RunResult-615"><span class="linenos">615</span></a>            <span class="n">skipped</span><span class="o">=</span><span class="n">skipped</span><span class="p">,</span>
</span><span id="RunResult-616"><a href="#RunResult-616"><span class="linenos">616</span></a>            <span class="n">failed</span><span class="o">=</span><span class="n">failed</span><span class="p">,</span>
</span><span id="RunResult-617"><a href="#RunResult-617"><span class="linenos">617</span></a>            <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
</span><span id="RunResult-618"><a href="#RunResult-618"><span class="linenos">618</span></a>            <span class="n">xpassed</span><span class="o">=</span><span class="n">xpassed</span><span class="p">,</span>
</span><span id="RunResult-619"><a href="#RunResult-619"><span class="linenos">619</span></a>            <span class="n">xfailed</span><span class="o">=</span><span class="n">xfailed</span><span class="p">,</span>
</span><span id="RunResult-620"><a href="#RunResult-620"><span class="linenos">620</span></a>            <span class="n">warnings</span><span class="o">=</span><span class="n">warnings</span><span class="p">,</span>
</span><span id="RunResult-621"><a href="#RunResult-621"><span class="linenos">621</span></a>            <span class="n">deselected</span><span class="o">=</span><span class="n">deselected</span><span class="p">,</span>
</span><span id="RunResult-622"><a href="#RunResult-622"><span class="linenos">622</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The result of running a command from <code>~<a href="#Pytester">pytest.Pytester</a></code>.</p>
</div>


                            <div id="RunResult.__init__" class="classattr">
                                        <input id="RunResult.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RunResult</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">ExitCode</span>,</span><span class="param">	<span class="n">outlines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">errlines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">duration</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="RunResult.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunResult.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunResult.__init__-522"><a href="#RunResult.__init__-522"><span class="linenos">522</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="RunResult.__init__-523"><a href="#RunResult.__init__-523"><span class="linenos">523</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="RunResult.__init__-524"><a href="#RunResult.__init__-524"><span class="linenos">524</span></a>        <span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span><span class="p">,</span>
</span><span id="RunResult.__init__-525"><a href="#RunResult.__init__-525"><span class="linenos">525</span></a>        <span class="n">outlines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="RunResult.__init__-526"><a href="#RunResult.__init__-526"><span class="linenos">526</span></a>        <span class="n">errlines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="RunResult.__init__-527"><a href="#RunResult.__init__-527"><span class="linenos">527</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="RunResult.__init__-528"><a href="#RunResult.__init__-528"><span class="linenos">528</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RunResult.__init__-529"><a href="#RunResult.__init__-529"><span class="linenos">529</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="RunResult.__init__-530"><a href="#RunResult.__init__-530"><span class="linenos">530</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ret</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span> <span class="o">=</span> <span class="n">ExitCode</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span><span id="RunResult.__init__-531"><a href="#RunResult.__init__-531"><span class="linenos">531</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;The return value.&quot;&quot;&quot;</span>
</span><span id="RunResult.__init__-532"><a href="#RunResult.__init__-532"><span class="linenos">532</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="RunResult.__init__-533"><a href="#RunResult.__init__-533"><span class="linenos">533</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span>
</span><span id="RunResult.__init__-534"><a href="#RunResult.__init__-534"><span class="linenos">534</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">outlines</span> <span class="o">=</span> <span class="n">outlines</span>
</span><span id="RunResult.__init__-535"><a href="#RunResult.__init__-535"><span class="linenos">535</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of lines captured from stdout.&quot;&quot;&quot;</span>
</span><span id="RunResult.__init__-536"><a href="#RunResult.__init__-536"><span class="linenos">536</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">errlines</span> <span class="o">=</span> <span class="n">errlines</span>
</span><span id="RunResult.__init__-537"><a href="#RunResult.__init__-537"><span class="linenos">537</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of lines captured from stderr.&quot;&quot;&quot;</span>
</span><span id="RunResult.__init__-538"><a href="#RunResult.__init__-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">LineMatcher</span><span class="p">(</span><span class="n">outlines</span><span class="p">)</span>
</span><span id="RunResult.__init__-539"><a href="#RunResult.__init__-539"><span class="linenos">539</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`~pytest.LineMatcher` of stdout.</span>
</span><span id="RunResult.__init__-540"><a href="#RunResult.__init__-540"><span class="linenos">540</span></a>
</span><span id="RunResult.__init__-541"><a href="#RunResult.__init__-541"><span class="linenos">541</span></a><span class="sd">        Use e.g. :func:`str(stdout) &lt;pytest.LineMatcher.__str__()&gt;` to reconstruct stdout, or the commonly used</span>
</span><span id="RunResult.__init__-542"><a href="#RunResult.__init__-542"><span class="linenos">542</span></a><span class="sd">        :func:`stdout.fnmatch_lines() &lt;pytest.LineMatcher.fnmatch_lines()&gt;` method.</span>
</span><span id="RunResult.__init__-543"><a href="#RunResult.__init__-543"><span class="linenos">543</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult.__init__-544"><a href="#RunResult.__init__-544"><span class="linenos">544</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stderr</span> <span class="o">=</span> <span class="n">LineMatcher</span><span class="p">(</span><span class="n">errlines</span><span class="p">)</span>
</span><span id="RunResult.__init__-545"><a href="#RunResult.__init__-545"><span class="linenos">545</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`~pytest.LineMatcher` of stderr.&quot;&quot;&quot;</span>
</span><span id="RunResult.__init__-546"><a href="#RunResult.__init__-546"><span class="linenos">546</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>
</span><span id="RunResult.__init__-547"><a href="#RunResult.__init__-547"><span class="linenos">547</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Duration in seconds.&quot;&quot;&quot;</span>
</span></pre></div>


    

                            </div>
                            <div id="RunResult.outlines" class="classattr">
                                <div class="attr variable">
            <span class="name">outlines</span>

        
    </div>
    <a class="headerlink" href="#RunResult.outlines"></a>
    
            <div class="docstring"><p>List of lines captured from stdout.</p>
</div>


                            </div>
                            <div id="RunResult.errlines" class="classattr">
                                <div class="attr variable">
            <span class="name">errlines</span>

        
    </div>
    <a class="headerlink" href="#RunResult.errlines"></a>
    
            <div class="docstring"><p>List of lines captured from stderr.</p>
</div>


                            </div>
                            <div id="RunResult.stdout" class="classattr">
                                <div class="attr variable">
            <span class="name">stdout</span>

        
    </div>
    <a class="headerlink" href="#RunResult.stdout"></a>
    
            <div class="docstring"><p><code>~<a href="#LineMatcher">pytest.LineMatcher</a></code> of stdout.</p>

<p>Use e.g. <code>str(stdout) &lt;pytest.LineMatcher.__str__()&gt;()</code> to reconstruct stdout, or the commonly used
<code>stdout.fnmatch_lines() &lt;<a href="#LineMatcher.fnmatch_lines">pytest.LineMatcher.fnmatch_lines()</a>&gt;()</code> method.</p>
</div>


                            </div>
                            <div id="RunResult.stderr" class="classattr">
                                <div class="attr variable">
            <span class="name">stderr</span>

        
    </div>
    <a class="headerlink" href="#RunResult.stderr"></a>
    
            <div class="docstring"><p><code>~<a href="#LineMatcher">pytest.LineMatcher</a></code> of stderr.</p>
</div>


                            </div>
                            <div id="RunResult.duration" class="classattr">
                                <div class="attr variable">
            <span class="name">duration</span>

        
    </div>
    <a class="headerlink" href="#RunResult.duration"></a>
    
            <div class="docstring"><p>Duration in seconds.</p>
</div>


                            </div>
                            <div id="RunResult.parseoutcomes" class="classattr">
                                        <input id="RunResult.parseoutcomes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parseoutcomes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="RunResult.parseoutcomes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunResult.parseoutcomes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunResult.parseoutcomes-555"><a href="#RunResult.parseoutcomes-555"><span class="linenos">555</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseoutcomes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="RunResult.parseoutcomes-556"><a href="#RunResult.parseoutcomes-556"><span class="linenos">556</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a dictionary of outcome noun -&gt; count from parsing the terminal</span>
</span><span id="RunResult.parseoutcomes-557"><a href="#RunResult.parseoutcomes-557"><span class="linenos">557</span></a><span class="sd">        output that the test process produced.</span>
</span><span id="RunResult.parseoutcomes-558"><a href="#RunResult.parseoutcomes-558"><span class="linenos">558</span></a>
</span><span id="RunResult.parseoutcomes-559"><a href="#RunResult.parseoutcomes-559"><span class="linenos">559</span></a><span class="sd">        The returned nouns will always be in plural form::</span>
</span><span id="RunResult.parseoutcomes-560"><a href="#RunResult.parseoutcomes-560"><span class="linenos">560</span></a>
</span><span id="RunResult.parseoutcomes-561"><a href="#RunResult.parseoutcomes-561"><span class="linenos">561</span></a><span class="sd">            ======= 1 failed, 1 passed, 1 warning, 1 error in 0.13s ====</span>
</span><span id="RunResult.parseoutcomes-562"><a href="#RunResult.parseoutcomes-562"><span class="linenos">562</span></a>
</span><span id="RunResult.parseoutcomes-563"><a href="#RunResult.parseoutcomes-563"><span class="linenos">563</span></a><span class="sd">        Will return ``{&quot;failed&quot;: 1, &quot;passed&quot;: 1, &quot;warnings&quot;: 1, &quot;errors&quot;: 1}``.</span>
</span><span id="RunResult.parseoutcomes-564"><a href="#RunResult.parseoutcomes-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult.parseoutcomes-565"><a href="#RunResult.parseoutcomes-565"><span class="linenos">565</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_summary_nouns</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outlines</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return a dictionary of outcome noun -> count from parsing the terminal
output that the test process produced.</p>

<p>The returned nouns will always be in plural form::</p>

<pre><code>======= 1 failed, 1 passed, 1 warning, 1 error in 0.13s ====
</code></pre>

<p>Will return <code>{"failed": 1, "passed": 1, "warnings": 1, "errors": 1}</code>.</p>
</div>


                            </div>
                            <div id="RunResult.parse_summary_nouns" class="classattr">
                                        <input id="RunResult.parse_summary_nouns-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">parse_summary_nouns</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">lines</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="RunResult.parse_summary_nouns-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunResult.parse_summary_nouns"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunResult.parse_summary_nouns-567"><a href="#RunResult.parse_summary_nouns-567"><span class="linenos">567</span></a>    <span class="nd">@classmethod</span>
</span><span id="RunResult.parse_summary_nouns-568"><a href="#RunResult.parse_summary_nouns-568"><span class="linenos">568</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_summary_nouns</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lines</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="RunResult.parse_summary_nouns-569"><a href="#RunResult.parse_summary_nouns-569"><span class="linenos">569</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract the nouns from a pytest terminal summary line.</span>
</span><span id="RunResult.parse_summary_nouns-570"><a href="#RunResult.parse_summary_nouns-570"><span class="linenos">570</span></a>
</span><span id="RunResult.parse_summary_nouns-571"><a href="#RunResult.parse_summary_nouns-571"><span class="linenos">571</span></a><span class="sd">        It always returns the plural noun for consistency::</span>
</span><span id="RunResult.parse_summary_nouns-572"><a href="#RunResult.parse_summary_nouns-572"><span class="linenos">572</span></a>
</span><span id="RunResult.parse_summary_nouns-573"><a href="#RunResult.parse_summary_nouns-573"><span class="linenos">573</span></a><span class="sd">            ======= 1 failed, 1 passed, 1 warning, 1 error in 0.13s ====</span>
</span><span id="RunResult.parse_summary_nouns-574"><a href="#RunResult.parse_summary_nouns-574"><span class="linenos">574</span></a>
</span><span id="RunResult.parse_summary_nouns-575"><a href="#RunResult.parse_summary_nouns-575"><span class="linenos">575</span></a><span class="sd">        Will return ``{&quot;failed&quot;: 1, &quot;passed&quot;: 1, &quot;warnings&quot;: 1, &quot;errors&quot;: 1}``.</span>
</span><span id="RunResult.parse_summary_nouns-576"><a href="#RunResult.parse_summary_nouns-576"><span class="linenos">576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult.parse_summary_nouns-577"><a href="#RunResult.parse_summary_nouns-577"><span class="linenos">577</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
</span><span id="RunResult.parse_summary_nouns-578"><a href="#RunResult.parse_summary_nouns-578"><span class="linenos">578</span></a>            <span class="k">if</span> <span class="n">rex_session_duration</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span id="RunResult.parse_summary_nouns-579"><a href="#RunResult.parse_summary_nouns-579"><span class="linenos">579</span></a>                <span class="n">outcomes</span> <span class="o">=</span> <span class="n">rex_outcome</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="RunResult.parse_summary_nouns-580"><a href="#RunResult.parse_summary_nouns-580"><span class="linenos">580</span></a>                <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="n">noun</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">noun</span><span class="p">)</span> <span class="ow">in</span> <span class="n">outcomes</span><span class="p">}</span>
</span><span id="RunResult.parse_summary_nouns-581"><a href="#RunResult.parse_summary_nouns-581"><span class="linenos">581</span></a>                <span class="k">break</span>
</span><span id="RunResult.parse_summary_nouns-582"><a href="#RunResult.parse_summary_nouns-582"><span class="linenos">582</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RunResult.parse_summary_nouns-583"><a href="#RunResult.parse_summary_nouns-583"><span class="linenos">583</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pytest terminal summary report not found&quot;</span><span class="p">)</span>
</span><span id="RunResult.parse_summary_nouns-584"><a href="#RunResult.parse_summary_nouns-584"><span class="linenos">584</span></a>
</span><span id="RunResult.parse_summary_nouns-585"><a href="#RunResult.parse_summary_nouns-585"><span class="linenos">585</span></a>        <span class="n">to_plural</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="RunResult.parse_summary_nouns-586"><a href="#RunResult.parse_summary_nouns-586"><span class="linenos">586</span></a>            <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="s2">&quot;warnings&quot;</span><span class="p">,</span>
</span><span id="RunResult.parse_summary_nouns-587"><a href="#RunResult.parse_summary_nouns-587"><span class="linenos">587</span></a>            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;errors&quot;</span><span class="p">,</span>
</span><span id="RunResult.parse_summary_nouns-588"><a href="#RunResult.parse_summary_nouns-588"><span class="linenos">588</span></a>        <span class="p">}</span>
</span><span id="RunResult.parse_summary_nouns-589"><a href="#RunResult.parse_summary_nouns-589"><span class="linenos">589</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">to_plural</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ret</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span></pre></div>


            <div class="docstring"><p>Extract the nouns from a pytest terminal summary line.</p>

<p>It always returns the plural noun for consistency::</p>

<pre><code>======= 1 failed, 1 passed, 1 warning, 1 error in 0.13s ====
</code></pre>

<p>Will return <code>{"failed": 1, "passed": 1, "warnings": 1, "errors": 1}</code>.</p>
</div>


                            </div>
                            <div id="RunResult.assert_outcomes" class="classattr">
                                        <input id="RunResult.assert_outcomes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">assert_outcomes</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">passed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">failed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">errors</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">xpassed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">xfailed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">warnings</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">deselected</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="RunResult.assert_outcomes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunResult.assert_outcomes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunResult.assert_outcomes-591"><a href="#RunResult.assert_outcomes-591"><span class="linenos">591</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">assert_outcomes</span><span class="p">(</span>
</span><span id="RunResult.assert_outcomes-592"><a href="#RunResult.assert_outcomes-592"><span class="linenos">592</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-593"><a href="#RunResult.assert_outcomes-593"><span class="linenos">593</span></a>        <span class="n">passed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-594"><a href="#RunResult.assert_outcomes-594"><span class="linenos">594</span></a>        <span class="n">skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-595"><a href="#RunResult.assert_outcomes-595"><span class="linenos">595</span></a>        <span class="n">failed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-596"><a href="#RunResult.assert_outcomes-596"><span class="linenos">596</span></a>        <span class="n">errors</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-597"><a href="#RunResult.assert_outcomes-597"><span class="linenos">597</span></a>        <span class="n">xpassed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-598"><a href="#RunResult.assert_outcomes-598"><span class="linenos">598</span></a>        <span class="n">xfailed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-599"><a href="#RunResult.assert_outcomes-599"><span class="linenos">599</span></a>        <span class="n">warnings</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-600"><a href="#RunResult.assert_outcomes-600"><span class="linenos">600</span></a>        <span class="n">deselected</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-601"><a href="#RunResult.assert_outcomes-601"><span class="linenos">601</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RunResult.assert_outcomes-602"><a href="#RunResult.assert_outcomes-602"><span class="linenos">602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunResult.assert_outcomes-603"><a href="#RunResult.assert_outcomes-603"><span class="linenos">603</span></a><span class="sd">        Assert that the specified outcomes appear with the respective</span>
</span><span id="RunResult.assert_outcomes-604"><a href="#RunResult.assert_outcomes-604"><span class="linenos">604</span></a><span class="sd">        numbers (0 means it didn&#39;t occur) in the text output from a test run.</span>
</span><span id="RunResult.assert_outcomes-605"><a href="#RunResult.assert_outcomes-605"><span class="linenos">605</span></a>
</span><span id="RunResult.assert_outcomes-606"><a href="#RunResult.assert_outcomes-606"><span class="linenos">606</span></a><span class="sd">        ``warnings`` and ``deselected`` are only checked if not None.</span>
</span><span id="RunResult.assert_outcomes-607"><a href="#RunResult.assert_outcomes-607"><span class="linenos">607</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunResult.assert_outcomes-608"><a href="#RunResult.assert_outcomes-608"><span class="linenos">608</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunResult.assert_outcomes-609"><a href="#RunResult.assert_outcomes-609"><span class="linenos">609</span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">_pytest.pytester_assertions</span><span class="w"> </span><span class="kn">import</span> <span class="n">assert_outcomes</span>
</span><span id="RunResult.assert_outcomes-610"><a href="#RunResult.assert_outcomes-610"><span class="linenos">610</span></a>
</span><span id="RunResult.assert_outcomes-611"><a href="#RunResult.assert_outcomes-611"><span class="linenos">611</span></a>        <span class="n">outcomes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseoutcomes</span><span class="p">()</span>
</span><span id="RunResult.assert_outcomes-612"><a href="#RunResult.assert_outcomes-612"><span class="linenos">612</span></a>        <span class="n">assert_outcomes</span><span class="p">(</span>
</span><span id="RunResult.assert_outcomes-613"><a href="#RunResult.assert_outcomes-613"><span class="linenos">613</span></a>            <span class="n">outcomes</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-614"><a href="#RunResult.assert_outcomes-614"><span class="linenos">614</span></a>            <span class="n">passed</span><span class="o">=</span><span class="n">passed</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-615"><a href="#RunResult.assert_outcomes-615"><span class="linenos">615</span></a>            <span class="n">skipped</span><span class="o">=</span><span class="n">skipped</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-616"><a href="#RunResult.assert_outcomes-616"><span class="linenos">616</span></a>            <span class="n">failed</span><span class="o">=</span><span class="n">failed</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-617"><a href="#RunResult.assert_outcomes-617"><span class="linenos">617</span></a>            <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-618"><a href="#RunResult.assert_outcomes-618"><span class="linenos">618</span></a>            <span class="n">xpassed</span><span class="o">=</span><span class="n">xpassed</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-619"><a href="#RunResult.assert_outcomes-619"><span class="linenos">619</span></a>            <span class="n">xfailed</span><span class="o">=</span><span class="n">xfailed</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-620"><a href="#RunResult.assert_outcomes-620"><span class="linenos">620</span></a>            <span class="n">warnings</span><span class="o">=</span><span class="n">warnings</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-621"><a href="#RunResult.assert_outcomes-621"><span class="linenos">621</span></a>            <span class="n">deselected</span><span class="o">=</span><span class="n">deselected</span><span class="p">,</span>
</span><span id="RunResult.assert_outcomes-622"><a href="#RunResult.assert_outcomes-622"><span class="linenos">622</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Assert that the specified outcomes appear with the respective
numbers (0 means it didn't occur) in the text output from a test run.</p>

<p><code>warnings</code> and <code>deselected</code> are only checked if not None.</p>
</div>


                            </div>
                </section>
                <section id="Session">
                            <input id="Session-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Session</span><wbr>(<span class="base"><a href="#Collector">pytest.Collector</a></span>):

                <label class="view-source-button" for="Session-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session-543"><a href="#Session-543"><span class="linenos">543</span></a><span class="nd">@final</span>
</span><span id="Session-544"><a href="#Session-544"><span class="linenos">544</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Session</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">):</span>
</span><span id="Session-545"><a href="#Session-545"><span class="linenos">545</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The root of the collection tree.</span>
</span><span id="Session-546"><a href="#Session-546"><span class="linenos">546</span></a>
</span><span id="Session-547"><a href="#Session-547"><span class="linenos">547</span></a><span class="sd">    ``Session`` collects the initial paths given as arguments to pytest.</span>
</span><span id="Session-548"><a href="#Session-548"><span class="linenos">548</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Session-549"><a href="#Session-549"><span class="linenos">549</span></a>
</span><span id="Session-550"><a href="#Session-550"><span class="linenos">550</span></a>    <span class="n">Interrupted</span> <span class="o">=</span> <span class="n">Interrupted</span>
</span><span id="Session-551"><a href="#Session-551"><span class="linenos">551</span></a>    <span class="n">Failed</span> <span class="o">=</span> <span class="n">Failed</span>
</span><span id="Session-552"><a href="#Session-552"><span class="linenos">552</span></a>    <span class="c1"># Set on the session by runner.pytest_sessionstart.</span>
</span><span id="Session-553"><a href="#Session-553"><span class="linenos">553</span></a>    <span class="n">_setupstate</span><span class="p">:</span> <span class="n">SetupState</span>
</span><span id="Session-554"><a href="#Session-554"><span class="linenos">554</span></a>    <span class="c1"># Set on the session by fixtures.pytest_sessionstart.</span>
</span><span id="Session-555"><a href="#Session-555"><span class="linenos">555</span></a>    <span class="n">_fixturemanager</span><span class="p">:</span> <span class="n">FixtureManager</span>
</span><span id="Session-556"><a href="#Session-556"><span class="linenos">556</span></a>    <span class="n">exitstatus</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">ExitCode</span>
</span><span id="Session-557"><a href="#Session-557"><span class="linenos">557</span></a>
</span><span id="Session-558"><a href="#Session-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-559"><a href="#Session-559"><span class="linenos">559</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Session-560"><a href="#Session-560"><span class="linenos">560</span></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Session-561"><a href="#Session-561"><span class="linenos">561</span></a>            <span class="n">path</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Session-562"><a href="#Session-562"><span class="linenos">562</span></a>            <span class="n">fspath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Session-563"><a href="#Session-563"><span class="linenos">563</span></a>            <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Session-564"><a href="#Session-564"><span class="linenos">564</span></a>            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="Session-565"><a href="#Session-565"><span class="linenos">565</span></a>            <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Session-566"><a href="#Session-566"><span class="linenos">566</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Session-567"><a href="#Session-567"><span class="linenos">567</span></a>        <span class="p">)</span>
</span><span id="Session-568"><a href="#Session-568"><span class="linenos">568</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Session-569"><a href="#Session-569"><span class="linenos">569</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">testscollected</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Session-570"><a href="#Session-570"><span class="linenos">570</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_shouldstop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session-571"><a href="#Session-571"><span class="linenos">571</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_shouldfail</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session-572"><a href="#Session-572"><span class="linenos">572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;collection&quot;</span><span class="p">)</span>
</span><span id="Session-573"><a href="#Session-573"><span class="linenos">573</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths</span><span class="p">:</span> <span class="nb">frozenset</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
</span><span id="Session-574"><a href="#Session-574"><span class="linenos">574</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths_with_parents</span><span class="p">:</span> <span class="nb">frozenset</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
</span><span id="Session-575"><a href="#Session-575"><span class="linenos">575</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-576"><a href="#Session-576"><span class="linenos">576</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CollectionArgument</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-577"><a href="#Session-577"><span class="linenos">577</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span> <span class="n">CollectReport</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session-578"><a href="#Session-578"><span class="linenos">578</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-579"><a href="#Session-579"><span class="linenos">579</span></a>
</span><span id="Session-580"><a href="#Session-580"><span class="linenos">580</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bestrelpathcache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">_bestrelpath_cache</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span><span id="Session-581"><a href="#Session-581"><span class="linenos">581</span></a>
</span><span id="Session-582"><a href="#Session-582"><span class="linenos">582</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
</span><span id="Session-583"><a href="#Session-583"><span class="linenos">583</span></a>
</span><span id="Session-584"><a href="#Session-584"><span class="linenos">584</span></a>    <span class="nd">@classmethod</span>
</span><span id="Session-585"><a href="#Session-585"><span class="linenos">585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
</span><span id="Session-586"><a href="#Session-586"><span class="linenos">586</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="Session-587"><a href="#Session-587"><span class="linenos">587</span></a>        <span class="k">return</span> <span class="n">session</span>
</span><span id="Session-588"><a href="#Session-588"><span class="linenos">588</span></a>
</span><span id="Session-589"><a href="#Session-589"><span class="linenos">589</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Session-590"><a href="#Session-590"><span class="linenos">590</span></a>        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> exitstatus=</span><span class="si">%r</span><span class="s2"> testsfailed=</span><span class="si">%d</span><span class="s2"> testscollected=</span><span class="si">%d</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="Session-591"><a href="#Session-591"><span class="linenos">591</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
</span><span id="Session-592"><a href="#Session-592"><span class="linenos">592</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="Session-593"><a href="#Session-593"><span class="linenos">593</span></a>            <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;exitstatus&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;UNSET&gt;&quot;</span><span class="p">),</span>
</span><span id="Session-594"><a href="#Session-594"><span class="linenos">594</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span><span class="p">,</span>
</span><span id="Session-595"><a href="#Session-595"><span class="linenos">595</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testscollected</span><span class="p">,</span>
</span><span id="Session-596"><a href="#Session-596"><span class="linenos">596</span></a>        <span class="p">)</span>
</span><span id="Session-597"><a href="#Session-597"><span class="linenos">597</span></a>
</span><span id="Session-598"><a href="#Session-598"><span class="linenos">598</span></a>    <span class="nd">@property</span>
</span><span id="Session-599"><a href="#Session-599"><span class="linenos">599</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shouldstop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Session-600"><a href="#Session-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shouldstop</span>
</span><span id="Session-601"><a href="#Session-601"><span class="linenos">601</span></a>
</span><span id="Session-602"><a href="#Session-602"><span class="linenos">602</span></a>    <span class="nd">@shouldstop</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Session-603"><a href="#Session-603"><span class="linenos">603</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shouldstop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-604"><a href="#Session-604"><span class="linenos">604</span></a>        <span class="c1"># The runner checks shouldfail and assumes that if it is set we are</span>
</span><span id="Session-605"><a href="#Session-605"><span class="linenos">605</span></a>        <span class="c1"># definitely stopping, so prevent unsetting it.</span>
</span><span id="Session-606"><a href="#Session-606"><span class="linenos">606</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shouldstop</span><span class="p">:</span>
</span><span id="Session-607"><a href="#Session-607"><span class="linenos">607</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Session-608"><a href="#Session-608"><span class="linenos">608</span></a>                <span class="n">PytestWarning</span><span class="p">(</span>
</span><span id="Session-609"><a href="#Session-609"><span class="linenos">609</span></a>                    <span class="s2">&quot;session.shouldstop cannot be unset after it has been set; ignoring.&quot;</span>
</span><span id="Session-610"><a href="#Session-610"><span class="linenos">610</span></a>                <span class="p">),</span>
</span><span id="Session-611"><a href="#Session-611"><span class="linenos">611</span></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="Session-612"><a href="#Session-612"><span class="linenos">612</span></a>            <span class="p">)</span>
</span><span id="Session-613"><a href="#Session-613"><span class="linenos">613</span></a>            <span class="k">return</span>
</span><span id="Session-614"><a href="#Session-614"><span class="linenos">614</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_shouldstop</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Session-615"><a href="#Session-615"><span class="linenos">615</span></a>
</span><span id="Session-616"><a href="#Session-616"><span class="linenos">616</span></a>    <span class="nd">@property</span>
</span><span id="Session-617"><a href="#Session-617"><span class="linenos">617</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shouldfail</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Session-618"><a href="#Session-618"><span class="linenos">618</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shouldfail</span>
</span><span id="Session-619"><a href="#Session-619"><span class="linenos">619</span></a>
</span><span id="Session-620"><a href="#Session-620"><span class="linenos">620</span></a>    <span class="nd">@shouldfail</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Session-621"><a href="#Session-621"><span class="linenos">621</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shouldfail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-622"><a href="#Session-622"><span class="linenos">622</span></a>        <span class="c1"># The runner checks shouldfail and assumes that if it is set we are</span>
</span><span id="Session-623"><a href="#Session-623"><span class="linenos">623</span></a>        <span class="c1"># definitely stopping, so prevent unsetting it.</span>
</span><span id="Session-624"><a href="#Session-624"><span class="linenos">624</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shouldfail</span><span class="p">:</span>
</span><span id="Session-625"><a href="#Session-625"><span class="linenos">625</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Session-626"><a href="#Session-626"><span class="linenos">626</span></a>                <span class="n">PytestWarning</span><span class="p">(</span>
</span><span id="Session-627"><a href="#Session-627"><span class="linenos">627</span></a>                    <span class="s2">&quot;session.shouldfail cannot be unset after it has been set; ignoring.&quot;</span>
</span><span id="Session-628"><a href="#Session-628"><span class="linenos">628</span></a>                <span class="p">),</span>
</span><span id="Session-629"><a href="#Session-629"><span class="linenos">629</span></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="Session-630"><a href="#Session-630"><span class="linenos">630</span></a>            <span class="p">)</span>
</span><span id="Session-631"><a href="#Session-631"><span class="linenos">631</span></a>            <span class="k">return</span>
</span><span id="Session-632"><a href="#Session-632"><span class="linenos">632</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_shouldfail</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Session-633"><a href="#Session-633"><span class="linenos">633</span></a>
</span><span id="Session-634"><a href="#Session-634"><span class="linenos">634</span></a>    <span class="nd">@property</span>
</span><span id="Session-635"><a href="#Session-635"><span class="linenos">635</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">startpath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Session-636"><a href="#Session-636"><span class="linenos">636</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path from which pytest was invoked.</span>
</span><span id="Session-637"><a href="#Session-637"><span class="linenos">637</span></a>
</span><span id="Session-638"><a href="#Session-638"><span class="linenos">638</span></a><span class="sd">        .. versionadded:: 7.0.0</span>
</span><span id="Session-639"><a href="#Session-639"><span class="linenos">639</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session-640"><a href="#Session-640"><span class="linenos">640</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span>
</span><span id="Session-641"><a href="#Session-641"><span class="linenos">641</span></a>
</span><span id="Session-642"><a href="#Session-642"><span class="linenos">642</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_node_location_to_relpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Session-643"><a href="#Session-643"><span class="linenos">643</span></a>        <span class="c1"># bestrelpath is a quite slow function.</span>
</span><span id="Session-644"><a href="#Session-644"><span class="linenos">644</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bestrelpathcache</span><span class="p">[</span><span class="n">node_path</span><span class="p">]</span>
</span><span id="Session-645"><a href="#Session-645"><span class="linenos">645</span></a>
</span><span id="Session-646"><a href="#Session-646"><span class="linenos">646</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Session-647"><a href="#Session-647"><span class="linenos">647</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_collectstart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-648"><a href="#Session-648"><span class="linenos">648</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span><span class="p">:</span>
</span><span id="Session-649"><a href="#Session-649"><span class="linenos">649</span></a>            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">Failed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span><span class="p">)</span>
</span><span id="Session-650"><a href="#Session-650"><span class="linenos">650</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shouldstop</span><span class="p">:</span>
</span><span id="Session-651"><a href="#Session-651"><span class="linenos">651</span></a>            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">Interrupted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shouldstop</span><span class="p">)</span>
</span><span id="Session-652"><a href="#Session-652"><span class="linenos">652</span></a>
</span><span id="Session-653"><a href="#Session-653"><span class="linenos">653</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Session-654"><a href="#Session-654"><span class="linenos">654</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_runtest_logreport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report</span><span class="p">:</span> <span class="n">TestReport</span> <span class="o">|</span> <span class="n">CollectReport</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-655"><a href="#Session-655"><span class="linenos">655</span></a>        <span class="k">if</span> <span class="n">report</span><span class="o">.</span><span class="n">failed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">report</span><span class="p">,</span> <span class="s2">&quot;wasxfail&quot;</span><span class="p">):</span>
</span><span id="Session-656"><a href="#Session-656"><span class="linenos">656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session-657"><a href="#Session-657"><span class="linenos">657</span></a>            <span class="n">maxfail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;maxfail&quot;</span><span class="p">)</span>
</span><span id="Session-658"><a href="#Session-658"><span class="linenos">658</span></a>            <span class="k">if</span> <span class="n">maxfail</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">&gt;=</span> <span class="n">maxfail</span><span class="p">:</span>
</span><span id="Session-659"><a href="#Session-659"><span class="linenos">659</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span> <span class="o">=</span> <span class="s2">&quot;stopping after </span><span class="si">%d</span><span class="s2"> failures&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span><span class="p">)</span>
</span><span id="Session-660"><a href="#Session-660"><span class="linenos">660</span></a>
</span><span id="Session-661"><a href="#Session-661"><span class="linenos">661</span></a>    <span class="n">pytest_collectreport</span> <span class="o">=</span> <span class="n">pytest_runtest_logreport</span>
</span><span id="Session-662"><a href="#Session-662"><span class="linenos">662</span></a>
</span><span id="Session-663"><a href="#Session-663"><span class="linenos">663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">isinitpath</span><span class="p">(</span>
</span><span id="Session-664"><a href="#Session-664"><span class="linenos">664</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Session-665"><a href="#Session-665"><span class="linenos">665</span></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Session-666"><a href="#Session-666"><span class="linenos">666</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Session-667"><a href="#Session-667"><span class="linenos">667</span></a>        <span class="n">with_parents</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Session-668"><a href="#Session-668"><span class="linenos">668</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Session-669"><a href="#Session-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is path an initial path?</span>
</span><span id="Session-670"><a href="#Session-670"><span class="linenos">670</span></a>
</span><span id="Session-671"><a href="#Session-671"><span class="linenos">671</span></a><span class="sd">        An initial path is a path explicitly given to pytest on the command</span>
</span><span id="Session-672"><a href="#Session-672"><span class="linenos">672</span></a><span class="sd">        line.</span>
</span><span id="Session-673"><a href="#Session-673"><span class="linenos">673</span></a>
</span><span id="Session-674"><a href="#Session-674"><span class="linenos">674</span></a><span class="sd">        :param with_parents:</span>
</span><span id="Session-675"><a href="#Session-675"><span class="linenos">675</span></a><span class="sd">            If set, also return True if the path is a parent of an initial path.</span>
</span><span id="Session-676"><a href="#Session-676"><span class="linenos">676</span></a>
</span><span id="Session-677"><a href="#Session-677"><span class="linenos">677</span></a><span class="sd">        .. versionchanged:: 8.0</span>
</span><span id="Session-678"><a href="#Session-678"><span class="linenos">678</span></a><span class="sd">            Added the ``with_parents`` parameter.</span>
</span><span id="Session-679"><a href="#Session-679"><span class="linenos">679</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session-680"><a href="#Session-680"><span class="linenos">680</span></a>        <span class="c1"># Optimization: Path(Path(...)) is much slower than isinstance.</span>
</span><span id="Session-681"><a href="#Session-681"><span class="linenos">681</span></a>        <span class="n">path_</span> <span class="o">=</span> <span class="n">path</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="k">else</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session-682"><a href="#Session-682"><span class="linenos">682</span></a>        <span class="k">if</span> <span class="n">with_parents</span><span class="p">:</span>
</span><span id="Session-683"><a href="#Session-683"><span class="linenos">683</span></a>            <span class="k">return</span> <span class="n">path_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths_with_parents</span>
</span><span id="Session-684"><a href="#Session-684"><span class="linenos">684</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session-685"><a href="#Session-685"><span class="linenos">685</span></a>            <span class="k">return</span> <span class="n">path_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths</span>
</span><span id="Session-686"><a href="#Session-686"><span class="linenos">686</span></a>
</span><span id="Session-687"><a href="#Session-687"><span class="linenos">687</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">gethookproxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fspath</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookRelay</span><span class="p">:</span>
</span><span id="Session-688"><a href="#Session-688"><span class="linenos">688</span></a>        <span class="c1"># Optimization: Path(Path(...)) is much slower than isinstance.</span>
</span><span id="Session-689"><a href="#Session-689"><span class="linenos">689</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">fspath</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fspath</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="k">else</span> <span class="n">Path</span><span class="p">(</span><span class="n">fspath</span><span class="p">)</span>
</span><span id="Session-690"><a href="#Session-690"><span class="linenos">690</span></a>        <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span>
</span><span id="Session-691"><a href="#Session-691"><span class="linenos">691</span></a>        <span class="c1"># Check if we have the common case of running</span>
</span><span id="Session-692"><a href="#Session-692"><span class="linenos">692</span></a>        <span class="c1"># hooks with all conftest.py files.</span>
</span><span id="Session-693"><a href="#Session-693"><span class="linenos">693</span></a>        <span class="n">my_conftestmodules</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">_getconftestmodules</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session-694"><a href="#Session-694"><span class="linenos">694</span></a>        <span class="n">remove_mods</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">_conftest_plugins</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">my_conftestmodules</span><span class="p">)</span>
</span><span id="Session-695"><a href="#Session-695"><span class="linenos">695</span></a>        <span class="n">proxy</span><span class="p">:</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookRelay</span>
</span><span id="Session-696"><a href="#Session-696"><span class="linenos">696</span></a>        <span class="k">if</span> <span class="n">remove_mods</span><span class="p">:</span>
</span><span id="Session-697"><a href="#Session-697"><span class="linenos">697</span></a>            <span class="c1"># One or more conftests are not in use at this path.</span>
</span><span id="Session-698"><a href="#Session-698"><span class="linenos">698</span></a>            <span class="n">proxy</span> <span class="o">=</span> <span class="n">PathAwareHookProxy</span><span class="p">(</span><span class="n">FSHookProxy</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">remove_mods</span><span class="p">))</span>  <span class="c1"># type: ignore[arg-type,assignment]</span>
</span><span id="Session-699"><a href="#Session-699"><span class="linenos">699</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session-700"><a href="#Session-700"><span class="linenos">700</span></a>            <span class="c1"># All plugins are active for this fspath.</span>
</span><span id="Session-701"><a href="#Session-701"><span class="linenos">701</span></a>            <span class="n">proxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">hook</span>
</span><span id="Session-702"><a href="#Session-702"><span class="linenos">702</span></a>        <span class="k">return</span> <span class="n">proxy</span>
</span><span id="Session-703"><a href="#Session-703"><span class="linenos">703</span></a>
</span><span id="Session-704"><a href="#Session-704"><span class="linenos">704</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_collect_path</span><span class="p">(</span>
</span><span id="Session-705"><a href="#Session-705"><span class="linenos">705</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Session-706"><a href="#Session-706"><span class="linenos">706</span></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="Session-707"><a href="#Session-707"><span class="linenos">707</span></a>        <span class="n">path_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]],</span>
</span><span id="Session-708"><a href="#Session-708"><span class="linenos">708</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Session-709"><a href="#Session-709"><span class="linenos">709</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a Collector for the given path.</span>
</span><span id="Session-710"><a href="#Session-710"><span class="linenos">710</span></a>
</span><span id="Session-711"><a href="#Session-711"><span class="linenos">711</span></a><span class="sd">        `path_cache` makes it so the same Collectors are returned for the same</span>
</span><span id="Session-712"><a href="#Session-712"><span class="linenos">712</span></a><span class="sd">        path.</span>
</span><span id="Session-713"><a href="#Session-713"><span class="linenos">713</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session-714"><a href="#Session-714"><span class="linenos">714</span></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">path_cache</span><span class="p">:</span>
</span><span id="Session-715"><a href="#Session-715"><span class="linenos">715</span></a>            <span class="k">return</span> <span class="n">path_cache</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
</span><span id="Session-716"><a href="#Session-716"><span class="linenos">716</span></a>
</span><span id="Session-717"><a href="#Session-717"><span class="linenos">717</span></a>        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Session-718"><a href="#Session-718"><span class="linenos">718</span></a>            <span class="n">ihook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gethookproxy</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</span><span id="Session-719"><a href="#Session-719"><span class="linenos">719</span></a>            <span class="n">col</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_directory</span><span class="p">(</span>
</span><span id="Session-720"><a href="#Session-720"><span class="linenos">720</span></a>                <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span>
</span><span id="Session-721"><a href="#Session-721"><span class="linenos">721</span></a>            <span class="p">)</span>
</span><span id="Session-722"><a href="#Session-722"><span class="linenos">722</span></a>            <span class="n">cols</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">col</span><span class="p">,)</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">()</span>
</span><span id="Session-723"><a href="#Session-723"><span class="linenos">723</span></a>
</span><span id="Session-724"><a href="#Session-724"><span class="linenos">724</span></a>        <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Session-725"><a href="#Session-725"><span class="linenos">725</span></a>            <span class="n">ihook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gethookproxy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session-726"><a href="#Session-726"><span class="linenos">726</span></a>            <span class="n">cols</span> <span class="o">=</span> <span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collect_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Session-727"><a href="#Session-727"><span class="linenos">727</span></a>
</span><span id="Session-728"><a href="#Session-728"><span class="linenos">728</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session-729"><a href="#Session-729"><span class="linenos">729</span></a>            <span class="c1"># Broken symlink or invalid/missing file.</span>
</span><span id="Session-730"><a href="#Session-730"><span class="linenos">730</span></a>            <span class="n">cols</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="Session-731"><a href="#Session-731"><span class="linenos">731</span></a>
</span><span id="Session-732"><a href="#Session-732"><span class="linenos">732</span></a>        <span class="n">path_cache</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">cols</span>
</span><span id="Session-733"><a href="#Session-733"><span class="linenos">733</span></a>        <span class="k">return</span> <span class="n">cols</span>
</span><span id="Session-734"><a href="#Session-734"><span class="linenos">734</span></a>
</span><span id="Session-735"><a href="#Session-735"><span class="linenos">735</span></a>    <span class="nd">@overload</span>
</span><span id="Session-736"><a href="#Session-736"><span class="linenos">736</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">perform_collect</span><span class="p">(</span>
</span><span id="Session-737"><a href="#Session-737"><span class="linenos">737</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="n">genitems</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
</span><span id="Session-738"><a href="#Session-738"><span class="linenos">738</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="Session-739"><a href="#Session-739"><span class="linenos">739</span></a>
</span><span id="Session-740"><a href="#Session-740"><span class="linenos">740</span></a>    <span class="nd">@overload</span>
</span><span id="Session-741"><a href="#Session-741"><span class="linenos">741</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">perform_collect</span><span class="p">(</span>
</span><span id="Session-742"><a href="#Session-742"><span class="linenos">742</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="n">genitems</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="o">...</span>
</span><span id="Session-743"><a href="#Session-743"><span class="linenos">743</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span> <span class="o">...</span>
</span><span id="Session-744"><a href="#Session-744"><span class="linenos">744</span></a>
</span><span id="Session-745"><a href="#Session-745"><span class="linenos">745</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">perform_collect</span><span class="p">(</span>
</span><span id="Session-746"><a href="#Session-746"><span class="linenos">746</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">genitems</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Session-747"><a href="#Session-747"><span class="linenos">747</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Session-748"><a href="#Session-748"><span class="linenos">748</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform the collection phase for this session.</span>
</span><span id="Session-749"><a href="#Session-749"><span class="linenos">749</span></a>
</span><span id="Session-750"><a href="#Session-750"><span class="linenos">750</span></a><span class="sd">        This is called by the default :hook:`pytest_collection` hook</span>
</span><span id="Session-751"><a href="#Session-751"><span class="linenos">751</span></a><span class="sd">        implementation; see the documentation of this hook for more details.</span>
</span><span id="Session-752"><a href="#Session-752"><span class="linenos">752</span></a><span class="sd">        For testing purposes, it may also be called directly on a fresh</span>
</span><span id="Session-753"><a href="#Session-753"><span class="linenos">753</span></a><span class="sd">        ``Session``.</span>
</span><span id="Session-754"><a href="#Session-754"><span class="linenos">754</span></a>
</span><span id="Session-755"><a href="#Session-755"><span class="linenos">755</span></a><span class="sd">        This function normally recursively expands any collectors collected</span>
</span><span id="Session-756"><a href="#Session-756"><span class="linenos">756</span></a><span class="sd">        from the session to their items, and only items are returned. For</span>
</span><span id="Session-757"><a href="#Session-757"><span class="linenos">757</span></a><span class="sd">        testing purposes, this may be suppressed by passing ``genitems=False``,</span>
</span><span id="Session-758"><a href="#Session-758"><span class="linenos">758</span></a><span class="sd">        in which case the return value contains these collectors unexpanded,</span>
</span><span id="Session-759"><a href="#Session-759"><span class="linenos">759</span></a><span class="sd">        and ``session.items`` is empty.</span>
</span><span id="Session-760"><a href="#Session-760"><span class="linenos">760</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session-761"><a href="#Session-761"><span class="linenos">761</span></a>        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-762"><a href="#Session-762"><span class="linenos">762</span></a>            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">args</span>
</span><span id="Session-763"><a href="#Session-763"><span class="linenos">763</span></a>
</span><span id="Session-764"><a href="#Session-764"><span class="linenos">764</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;perform_collect&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</span><span id="Session-765"><a href="#Session-765"><span class="linenos">765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session-766"><a href="#Session-766"><span class="linenos">766</span></a>
</span><span id="Session-767"><a href="#Session-767"><span class="linenos">767</span></a>        <span class="n">hook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">hook</span>
</span><span id="Session-768"><a href="#Session-768"><span class="linenos">768</span></a>
</span><span id="Session-769"><a href="#Session-769"><span class="linenos">769</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-770"><a href="#Session-770"><span class="linenos">770</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-771"><a href="#Session-771"><span class="linenos">771</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session-772"><a href="#Session-772"><span class="linenos">772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-773"><a href="#Session-773"><span class="linenos">773</span></a>        <span class="n">items</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
</span><span id="Session-774"><a href="#Session-774"><span class="linenos">774</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Session-775"><a href="#Session-775"><span class="linenos">775</span></a>            <span class="n">initialpaths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-776"><a href="#Session-776"><span class="linenos">776</span></a>            <span class="n">initialpaths_with_parents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-777"><a href="#Session-777"><span class="linenos">777</span></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="Session-778"><a href="#Session-778"><span class="linenos">778</span></a>                <span class="n">collection_argument</span> <span class="o">=</span> <span class="n">resolve_collection_argument</span><span class="p">(</span>
</span><span id="Session-779"><a href="#Session-779"><span class="linenos">779</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Session-780"><a href="#Session-780"><span class="linenos">780</span></a>                    <span class="n">arg</span><span class="p">,</span>
</span><span id="Session-781"><a href="#Session-781"><span class="linenos">781</span></a>                    <span class="n">as_pypath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Session-782"><a href="#Session-782"><span class="linenos">782</span></a>                <span class="p">)</span>
</span><span id="Session-783"><a href="#Session-783"><span class="linenos">783</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection_argument</span><span class="p">)</span>
</span><span id="Session-784"><a href="#Session-784"><span class="linenos">784</span></a>                <span class="n">initialpaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session-785"><a href="#Session-785"><span class="linenos">785</span></a>                <span class="n">initialpaths_with_parents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session-786"><a href="#Session-786"><span class="linenos">786</span></a>                <span class="n">initialpaths_with_parents</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">parents</span><span class="p">)</span>
</span><span id="Session-787"><a href="#Session-787"><span class="linenos">787</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">initialpaths</span><span class="p">)</span>
</span><span id="Session-788"><a href="#Session-788"><span class="linenos">788</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths_with_parents</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">initialpaths_with_parents</span><span class="p">)</span>
</span><span id="Session-789"><a href="#Session-789"><span class="linenos">789</span></a>
</span><span id="Session-790"><a href="#Session-790"><span class="linenos">790</span></a>            <span class="n">rep</span> <span class="o">=</span> <span class="n">collect_one_node</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Session-791"><a href="#Session-791"><span class="linenos">791</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collectreport</span><span class="p">(</span><span class="n">report</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
</span><span id="Session-792"><a href="#Session-792"><span class="linenos">792</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="Session-793"><a href="#Session-793"><span class="linenos">793</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="p">:</span>
</span><span id="Session-794"><a href="#Session-794"><span class="linenos">794</span></a>                <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-795"><a href="#Session-795"><span class="linenos">795</span></a>                <span class="k">for</span> <span class="n">arg</span><span class="p">,</span> <span class="n">collectors</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="p">:</span>
</span><span id="Session-796"><a href="#Session-796"><span class="linenos">796</span></a>                    <span class="k">if</span> <span class="n">collectors</span><span class="p">:</span>
</span><span id="Session-797"><a href="#Session-797"><span class="linenos">797</span></a>                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Session-798"><a href="#Session-798"><span class="linenos">798</span></a>                            <span class="sa">f</span><span class="s2">&quot;not found: </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="se">\n</span><span class="s2">(no match in any of </span><span class="si">{</span><span class="n">collectors</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="Session-799"><a href="#Session-799"><span class="linenos">799</span></a>                        <span class="p">)</span>
</span><span id="Session-800"><a href="#Session-800"><span class="linenos">800</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Session-801"><a href="#Session-801"><span class="linenos">801</span></a>                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found no collectors for </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Session-802"><a href="#Session-802"><span class="linenos">802</span></a>
</span><span id="Session-803"><a href="#Session-803"><span class="linenos">803</span></a>                <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span><span class="o">*</span><span class="n">errors</span><span class="p">)</span>
</span><span id="Session-804"><a href="#Session-804"><span class="linenos">804</span></a>
</span><span id="Session-805"><a href="#Session-805"><span class="linenos">805</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">genitems</span><span class="p">:</span>
</span><span id="Session-806"><a href="#Session-806"><span class="linenos">806</span></a>                <span class="n">items</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span>
</span><span id="Session-807"><a href="#Session-807"><span class="linenos">807</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Session-808"><a href="#Session-808"><span class="linenos">808</span></a>                <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session-809"><a href="#Session-809"><span class="linenos">809</span></a>                    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span><span class="p">:</span>
</span><span id="Session-810"><a href="#Session-810"><span class="linenos">810</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
</span><span id="Session-811"><a href="#Session-811"><span class="linenos">811</span></a>
</span><span id="Session-812"><a href="#Session-812"><span class="linenos">812</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">check_pending</span><span class="p">()</span>
</span><span id="Session-813"><a href="#Session-813"><span class="linenos">813</span></a>            <span class="n">hook</span><span class="o">.</span><span class="n">pytest_collection_modifyitems</span><span class="p">(</span>
</span><span id="Session-814"><a href="#Session-814"><span class="linenos">814</span></a>                <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="n">items</span>
</span><span id="Session-815"><a href="#Session-815"><span class="linenos">815</span></a>            <span class="p">)</span>
</span><span id="Session-816"><a href="#Session-816"><span class="linenos">816</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Session-817"><a href="#Session-817"><span class="linenos">817</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-818"><a href="#Session-818"><span class="linenos">818</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-819"><a href="#Session-819"><span class="linenos">819</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session-820"><a href="#Session-820"><span class="linenos">820</span></a>            <span class="n">hook</span><span class="o">.</span><span class="n">pytest_collection_finish</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Session-821"><a href="#Session-821"><span class="linenos">821</span></a>
</span><span id="Session-822"><a href="#Session-822"><span class="linenos">822</span></a>        <span class="k">if</span> <span class="n">genitems</span><span class="p">:</span>
</span><span id="Session-823"><a href="#Session-823"><span class="linenos">823</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testscollected</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span><span id="Session-824"><a href="#Session-824"><span class="linenos">824</span></a>
</span><span id="Session-825"><a href="#Session-825"><span class="linenos">825</span></a>        <span class="k">return</span> <span class="n">items</span>
</span><span id="Session-826"><a href="#Session-826"><span class="linenos">826</span></a>
</span><span id="Session-827"><a href="#Session-827"><span class="linenos">827</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_collect_one_node</span><span class="p">(</span>
</span><span id="Session-828"><a href="#Session-828"><span class="linenos">828</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Session-829"><a href="#Session-829"><span class="linenos">829</span></a>        <span class="n">node</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span>
</span><span id="Session-830"><a href="#Session-830"><span class="linenos">830</span></a>        <span class="n">handle_dupes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Session-831"><a href="#Session-831"><span class="linenos">831</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">CollectReport</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="Session-832"><a href="#Session-832"><span class="linenos">832</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span> <span class="ow">and</span> <span class="n">handle_dupes</span><span class="p">:</span>
</span><span id="Session-833"><a href="#Session-833"><span class="linenos">833</span></a>            <span class="n">rep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
</span><span id="Session-834"><a href="#Session-834"><span class="linenos">834</span></a>            <span class="k">return</span> <span class="n">rep</span><span class="p">,</span> <span class="kc">True</span>
</span><span id="Session-835"><a href="#Session-835"><span class="linenos">835</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session-836"><a href="#Session-836"><span class="linenos">836</span></a>            <span class="n">rep</span> <span class="o">=</span> <span class="n">collect_one_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span id="Session-837"><a href="#Session-837"><span class="linenos">837</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">rep</span>
</span><span id="Session-838"><a href="#Session-838"><span class="linenos">838</span></a>            <span class="k">return</span> <span class="n">rep</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="Session-839"><a href="#Session-839"><span class="linenos">839</span></a>
</span><span id="Session-840"><a href="#Session-840"><span class="linenos">840</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Session-841"><a href="#Session-841"><span class="linenos">841</span></a>        <span class="c1"># This is a cache for the root directories of the initial paths.</span>
</span><span id="Session-842"><a href="#Session-842"><span class="linenos">842</span></a>        <span class="c1"># We can&#39;t use collection_cache for Session because of its special</span>
</span><span id="Session-843"><a href="#Session-843"><span class="linenos">843</span></a>        <span class="c1"># role as the bootstrapping collector.</span>
</span><span id="Session-844"><a href="#Session-844"><span class="linenos">844</span></a>        <span class="n">path_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session-845"><a href="#Session-845"><span class="linenos">845</span></a>
</span><span id="Session-846"><a href="#Session-846"><span class="linenos">846</span></a>        <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span>
</span><span id="Session-847"><a href="#Session-847"><span class="linenos">847</span></a>
</span><span id="Session-848"><a href="#Session-848"><span class="linenos">848</span></a>        <span class="k">for</span> <span class="n">collection_argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span><span class="p">:</span>
</span><span id="Session-849"><a href="#Session-849"><span class="linenos">849</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;processing argument&quot;</span><span class="p">,</span> <span class="n">collection_argument</span><span class="p">)</span>
</span><span id="Session-850"><a href="#Session-850"><span class="linenos">850</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session-851"><a href="#Session-851"><span class="linenos">851</span></a>
</span><span id="Session-852"><a href="#Session-852"><span class="linenos">852</span></a>            <span class="n">argpath</span> <span class="o">=</span> <span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span>
</span><span id="Session-853"><a href="#Session-853"><span class="linenos">853</span></a>            <span class="n">names</span> <span class="o">=</span> <span class="n">collection_argument</span><span class="o">.</span><span class="n">parts</span>
</span><span id="Session-854"><a href="#Session-854"><span class="linenos">854</span></a>            <span class="n">module_name</span> <span class="o">=</span> <span class="n">collection_argument</span><span class="o">.</span><span class="n">module_name</span>
</span><span id="Session-855"><a href="#Session-855"><span class="linenos">855</span></a>
</span><span id="Session-856"><a href="#Session-856"><span class="linenos">856</span></a>            <span class="c1"># resolve_collection_argument() ensures this.</span>
</span><span id="Session-857"><a href="#Session-857"><span class="linenos">857</span></a>            <span class="k">if</span> <span class="n">argpath</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Session-858"><a href="#Session-858"><span class="linenos">858</span></a>                <span class="k">assert</span> <span class="ow">not</span> <span class="n">names</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;invalid arg </span><span class="si">{</span><span class="p">(</span><span class="n">argpath</span><span class="p">,</span><span class="w"> </span><span class="n">names</span><span class="p">)</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Session-859"><a href="#Session-859"><span class="linenos">859</span></a>
</span><span id="Session-860"><a href="#Session-860"><span class="linenos">860</span></a>            <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">argpath</span><span class="p">]</span>
</span><span id="Session-861"><a href="#Session-861"><span class="linenos">861</span></a>            <span class="c1"># Add relevant parents of the path, from the root, e.g.</span>
</span><span id="Session-862"><a href="#Session-862"><span class="linenos">862</span></a>            <span class="c1">#   /a/b/c.py -&gt; [/, /a, /a/b, /a/b/c.py]</span>
</span><span id="Session-863"><a href="#Session-863"><span class="linenos">863</span></a>            <span class="k">if</span> <span class="n">module_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session-864"><a href="#Session-864"><span class="linenos">864</span></a>                <span class="c1"># Paths outside of the confcutdir should not be considered.</span>
</span><span id="Session-865"><a href="#Session-865"><span class="linenos">865</span></a>                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">argpath</span><span class="o">.</span><span class="n">parents</span><span class="p">:</span>
</span><span id="Session-866"><a href="#Session-866"><span class="linenos">866</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">pm</span><span class="o">.</span><span class="n">_is_in_confcutdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="Session-867"><a href="#Session-867"><span class="linenos">867</span></a>                        <span class="k">break</span>
</span><span id="Session-868"><a href="#Session-868"><span class="linenos">868</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Session-869"><a href="#Session-869"><span class="linenos">869</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Session-870"><a href="#Session-870"><span class="linenos">870</span></a>                <span class="c1"># For --pyargs arguments, only consider paths matching the module</span>
</span><span id="Session-871"><a href="#Session-871"><span class="linenos">871</span></a>                <span class="c1"># name. Paths beyond the package hierarchy are not included.</span>
</span><span id="Session-872"><a href="#Session-872"><span class="linenos">872</span></a>                <span class="n">module_name_parts</span> <span class="o">=</span> <span class="n">module_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="Session-873"><a href="#Session-873"><span class="linenos">873</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argpath</span><span class="o">.</span><span class="n">parents</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="Session-874"><a href="#Session-874"><span class="linenos">874</span></a>                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">module_name_parts</span><span class="p">)</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">stem</span> <span class="o">!=</span> <span class="n">module_name_parts</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]:</span>
</span><span id="Session-875"><a href="#Session-875"><span class="linenos">875</span></a>                        <span class="k">break</span>
</span><span id="Session-876"><a href="#Session-876"><span class="linenos">876</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Session-877"><a href="#Session-877"><span class="linenos">877</span></a>
</span><span id="Session-878"><a href="#Session-878"><span class="linenos">878</span></a>            <span class="c1"># Start going over the parts from the root, collecting each level</span>
</span><span id="Session-879"><a href="#Session-879"><span class="linenos">879</span></a>            <span class="c1"># and discarding all nodes which don&#39;t match the level&#39;s part.</span>
</span><span id="Session-880"><a href="#Session-880"><span class="linenos">880</span></a>            <span class="n">any_matched_in_initial_part</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session-881"><a href="#Session-881"><span class="linenos">881</span></a>            <span class="n">notfound_collectors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session-882"><a href="#Session-882"><span class="linenos">882</span></a>            <span class="n">work</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Session-883"><a href="#Session-883"><span class="linenos">883</span></a>                <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">paths</span><span class="p">,</span> <span class="o">*</span><span class="n">names</span><span class="p">])</span>
</span><span id="Session-884"><a href="#Session-884"><span class="linenos">884</span></a>            <span class="p">]</span>
</span><span id="Session-885"><a href="#Session-885"><span class="linenos">885</span></a>            <span class="k">while</span> <span class="n">work</span><span class="p">:</span>
</span><span id="Session-886"><a href="#Session-886"><span class="linenos">886</span></a>                <span class="n">matchnode</span><span class="p">,</span> <span class="n">matchparts</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Session-887"><a href="#Session-887"><span class="linenos">887</span></a>
</span><span id="Session-888"><a href="#Session-888"><span class="linenos">888</span></a>                <span class="c1"># Pop&#39;d all of the parts, this is a match.</span>
</span><span id="Session-889"><a href="#Session-889"><span class="linenos">889</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">matchparts</span><span class="p">:</span>
</span><span id="Session-890"><a href="#Session-890"><span class="linenos">890</span></a>                    <span class="k">yield</span> <span class="n">matchnode</span>
</span><span id="Session-891"><a href="#Session-891"><span class="linenos">891</span></a>                    <span class="n">any_matched_in_initial_part</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Session-892"><a href="#Session-892"><span class="linenos">892</span></a>                    <span class="k">continue</span>
</span><span id="Session-893"><a href="#Session-893"><span class="linenos">893</span></a>
</span><span id="Session-894"><a href="#Session-894"><span class="linenos">894</span></a>                <span class="c1"># Should have been matched by now, discard.</span>
</span><span id="Session-895"><a href="#Session-895"><span class="linenos">895</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchnode</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">):</span>
</span><span id="Session-896"><a href="#Session-896"><span class="linenos">896</span></a>                    <span class="k">continue</span>
</span><span id="Session-897"><a href="#Session-897"><span class="linenos">897</span></a>
</span><span id="Session-898"><a href="#Session-898"><span class="linenos">898</span></a>                <span class="c1"># Collect this level of matching.</span>
</span><span id="Session-899"><a href="#Session-899"><span class="linenos">899</span></a>                <span class="c1"># Collecting Session (self) is done directly to avoid endless</span>
</span><span id="Session-900"><a href="#Session-900"><span class="linenos">900</span></a>                <span class="c1"># recursion to this function.</span>
</span><span id="Session-901"><a href="#Session-901"><span class="linenos">901</span></a>                <span class="n">subnodes</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span>
</span><span id="Session-902"><a href="#Session-902"><span class="linenos">902</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchnode</span><span class="p">,</span> <span class="n">Session</span><span class="p">):</span>
</span><span id="Session-903"><a href="#Session-903"><span class="linenos">903</span></a>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Path</span><span class="p">)</span>
</span><span id="Session-904"><a href="#Session-904"><span class="linenos">904</span></a>                    <span class="n">subnodes</span> <span class="o">=</span> <span class="n">matchnode</span><span class="o">.</span><span class="n">_collect_path</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">path_cache</span><span class="p">)</span>
</span><span id="Session-905"><a href="#Session-905"><span class="linenos">905</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Session-906"><a href="#Session-906"><span class="linenos">906</span></a>                    <span class="c1"># For backward compat, files given directly multiple</span>
</span><span id="Session-907"><a href="#Session-907"><span class="linenos">907</span></a>                    <span class="c1"># times on the command line should not be deduplicated.</span>
</span><span id="Session-908"><a href="#Session-908"><span class="linenos">908</span></a>                    <span class="n">handle_dupes</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span>
</span><span id="Session-909"><a href="#Session-909"><span class="linenos">909</span></a>                        <span class="nb">len</span><span class="p">(</span><span class="n">matchparts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="Session-910"><a href="#Session-910"><span class="linenos">910</span></a>                        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Path</span><span class="p">)</span>
</span><span id="Session-911"><a href="#Session-911"><span class="linenos">911</span></a>                        <span class="ow">and</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
</span><span id="Session-912"><a href="#Session-912"><span class="linenos">912</span></a>                    <span class="p">)</span>
</span><span id="Session-913"><a href="#Session-913"><span class="linenos">913</span></a>                    <span class="n">rep</span><span class="p">,</span> <span class="n">duplicate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_one_node</span><span class="p">(</span><span class="n">matchnode</span><span class="p">,</span> <span class="n">handle_dupes</span><span class="p">)</span>
</span><span id="Session-914"><a href="#Session-914"><span class="linenos">914</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">duplicate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session-915"><a href="#Session-915"><span class="linenos">915</span></a>                        <span class="c1"># Report collection failures here to avoid failing to</span>
</span><span id="Session-916"><a href="#Session-916"><span class="linenos">916</span></a>                        <span class="c1"># run some test specified in the command line because</span>
</span><span id="Session-917"><a href="#Session-917"><span class="linenos">917</span></a>                        <span class="c1"># the module could not be imported (#134).</span>
</span><span id="Session-918"><a href="#Session-918"><span class="linenos">918</span></a>                        <span class="n">matchnode</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collectreport</span><span class="p">(</span><span class="n">report</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
</span><span id="Session-919"><a href="#Session-919"><span class="linenos">919</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session-920"><a href="#Session-920"><span class="linenos">920</span></a>                        <span class="k">continue</span>
</span><span id="Session-921"><a href="#Session-921"><span class="linenos">921</span></a>                    <span class="n">subnodes</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span>
</span><span id="Session-922"><a href="#Session-922"><span class="linenos">922</span></a>
</span><span id="Session-923"><a href="#Session-923"><span class="linenos">923</span></a>                <span class="c1"># Prune this level.</span>
</span><span id="Session-924"><a href="#Session-924"><span class="linenos">924</span></a>                <span class="n">any_matched_in_collector</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session-925"><a href="#Session-925"><span class="linenos">925</span></a>                <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">subnodes</span><span class="p">):</span>
</span><span id="Session-926"><a href="#Session-926"><span class="linenos">926</span></a>                    <span class="c1"># Path part e.g. `/a/b/` in `/a/b/test_file.py::TestIt::test_it`.</span>
</span><span id="Session-927"><a href="#Session-927"><span class="linenos">927</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="Session-928"><a href="#Session-928"><span class="linenos">928</span></a>                        <span class="n">is_match</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Session-929"><a href="#Session-929"><span class="linenos">929</span></a>                        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_match</span><span class="p">:</span>
</span><span id="Session-930"><a href="#Session-930"><span class="linenos">930</span></a>                            <span class="c1"># In case the file paths do not match, fallback to samefile() to</span>
</span><span id="Session-931"><a href="#Session-931"><span class="linenos">931</span></a>                            <span class="c1"># account for short-paths on Windows (#11895).</span>
</span><span id="Session-932"><a href="#Session-932"><span class="linenos">932</span></a>                            <span class="n">same_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">samefile</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Session-933"><a href="#Session-933"><span class="linenos">933</span></a>                            <span class="c1"># We don&#39;t want to match links to the current node,</span>
</span><span id="Session-934"><a href="#Session-934"><span class="linenos">934</span></a>                            <span class="c1"># otherwise we would match the same file more than once (#12039).</span>
</span><span id="Session-935"><a href="#Session-935"><span class="linenos">935</span></a>                            <span class="n">is_match</span> <span class="o">=</span> <span class="n">same_file</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="Session-936"><a href="#Session-936"><span class="linenos">936</span></a>                                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session-937"><a href="#Session-937"><span class="linenos">937</span></a>                                <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Session-938"><a href="#Session-938"><span class="linenos">938</span></a>                            <span class="p">)</span>
</span><span id="Session-939"><a href="#Session-939"><span class="linenos">939</span></a>
</span><span id="Session-940"><a href="#Session-940"><span class="linenos">940</span></a>                    <span class="c1"># Name part e.g. `TestIt` in `/a/b/test_file.py::TestIt::test_it`.</span>
</span><span id="Session-941"><a href="#Session-941"><span class="linenos">941</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Session-942"><a href="#Session-942"><span class="linenos">942</span></a>                        <span class="c1"># TODO: Remove parametrized workaround once collection structure contains</span>
</span><span id="Session-943"><a href="#Session-943"><span class="linenos">943</span></a>                        <span class="c1"># parametrization.</span>
</span><span id="Session-944"><a href="#Session-944"><span class="linenos">944</span></a>                        <span class="n">is_match</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Session-945"><a href="#Session-945"><span class="linenos">945</span></a>                            <span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Session-946"><a href="#Session-946"><span class="linenos">946</span></a>                            <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Session-947"><a href="#Session-947"><span class="linenos">947</span></a>                        <span class="p">)</span>
</span><span id="Session-948"><a href="#Session-948"><span class="linenos">948</span></a>                    <span class="k">if</span> <span class="n">is_match</span><span class="p">:</span>
</span><span id="Session-949"><a href="#Session-949"><span class="linenos">949</span></a>                        <span class="n">work</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">node</span><span class="p">,</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
</span><span id="Session-950"><a href="#Session-950"><span class="linenos">950</span></a>                        <span class="n">any_matched_in_collector</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Session-951"><a href="#Session-951"><span class="linenos">951</span></a>
</span><span id="Session-952"><a href="#Session-952"><span class="linenos">952</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_matched_in_collector</span><span class="p">:</span>
</span><span id="Session-953"><a href="#Session-953"><span class="linenos">953</span></a>                    <span class="n">notfound_collectors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matchnode</span><span class="p">)</span>
</span><span id="Session-954"><a href="#Session-954"><span class="linenos">954</span></a>
</span><span id="Session-955"><a href="#Session-955"><span class="linenos">955</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">any_matched_in_initial_part</span><span class="p">:</span>
</span><span id="Session-956"><a href="#Session-956"><span class="linenos">956</span></a>                <span class="n">report_arg</span> <span class="o">=</span> <span class="s2">&quot;::&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">argpath</span><span class="p">),</span> <span class="o">*</span><span class="n">names</span><span class="p">))</span>
</span><span id="Session-957"><a href="#Session-957"><span class="linenos">957</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">report_arg</span><span class="p">,</span> <span class="n">notfound_collectors</span><span class="p">))</span>
</span><span id="Session-958"><a href="#Session-958"><span class="linenos">958</span></a>
</span><span id="Session-959"><a href="#Session-959"><span class="linenos">959</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="Session-960"><a href="#Session-960"><span class="linenos">960</span></a>
</span><span id="Session-961"><a href="#Session-961"><span class="linenos">961</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Session-962"><a href="#Session-962"><span class="linenos">962</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;genitems&quot;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</span><span id="Session-963"><a href="#Session-963"><span class="linenos">963</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">):</span>
</span><span id="Session-964"><a href="#Session-964"><span class="linenos">964</span></a>            <span class="n">node</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_itemcollected</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">node</span><span class="p">)</span>
</span><span id="Session-965"><a href="#Session-965"><span class="linenos">965</span></a>            <span class="k">yield</span> <span class="n">node</span>
</span><span id="Session-966"><a href="#Session-966"><span class="linenos">966</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session-967"><a href="#Session-967"><span class="linenos">967</span></a>            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">)</span>
</span><span id="Session-968"><a href="#Session-968"><span class="linenos">968</span></a>            <span class="n">keepduplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;keepduplicates&quot;</span><span class="p">)</span>
</span><span id="Session-969"><a href="#Session-969"><span class="linenos">969</span></a>            <span class="c1"># For backward compat, dedup only applies to files.</span>
</span><span id="Session-970"><a href="#Session-970"><span class="linenos">970</span></a>            <span class="n">handle_dupes</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">keepduplicates</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">File</span><span class="p">))</span>
</span><span id="Session-971"><a href="#Session-971"><span class="linenos">971</span></a>            <span class="n">rep</span><span class="p">,</span> <span class="n">duplicate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_one_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">handle_dupes</span><span class="p">)</span>
</span><span id="Session-972"><a href="#Session-972"><span class="linenos">972</span></a>            <span class="k">if</span> <span class="n">duplicate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keepduplicates</span><span class="p">:</span>
</span><span id="Session-973"><a href="#Session-973"><span class="linenos">973</span></a>                <span class="k">return</span>
</span><span id="Session-974"><a href="#Session-974"><span class="linenos">974</span></a>            <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session-975"><a href="#Session-975"><span class="linenos">975</span></a>                <span class="k">for</span> <span class="n">subnode</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span><span class="p">:</span>
</span><span id="Session-976"><a href="#Session-976"><span class="linenos">976</span></a>                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">subnode</span><span class="p">)</span>
</span><span id="Session-977"><a href="#Session-977"><span class="linenos">977</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">duplicate</span><span class="p">:</span>
</span><span id="Session-978"><a href="#Session-978"><span class="linenos">978</span></a>                <span class="n">node</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collectreport</span><span class="p">(</span><span class="n">report</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The root of the collection tree.</p>

<p><code><a href="#Session">Session</a></code> collects the initial paths given as arguments to pytest.</p>
</div>


                            <div id="Session.__init__" class="classattr">
                                        <input id="Session.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Session</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span></span>)</span>

                <label class="view-source-button" for="Session.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.__init__-558"><a href="#Session.__init__-558"><span class="linenos">558</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session.__init__-559"><a href="#Session.__init__-559"><span class="linenos">559</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Session.__init__-560"><a href="#Session.__init__-560"><span class="linenos">560</span></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Session.__init__-561"><a href="#Session.__init__-561"><span class="linenos">561</span></a>            <span class="n">path</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">,</span>
</span><span id="Session.__init__-562"><a href="#Session.__init__-562"><span class="linenos">562</span></a>            <span class="n">fspath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Session.__init__-563"><a href="#Session.__init__-563"><span class="linenos">563</span></a>            <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Session.__init__-564"><a href="#Session.__init__-564"><span class="linenos">564</span></a>            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="Session.__init__-565"><a href="#Session.__init__-565"><span class="linenos">565</span></a>            <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Session.__init__-566"><a href="#Session.__init__-566"><span class="linenos">566</span></a>            <span class="n">nodeid</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Session.__init__-567"><a href="#Session.__init__-567"><span class="linenos">567</span></a>        <span class="p">)</span>
</span><span id="Session.__init__-568"><a href="#Session.__init__-568"><span class="linenos">568</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Session.__init__-569"><a href="#Session.__init__-569"><span class="linenos">569</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">testscollected</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Session.__init__-570"><a href="#Session.__init__-570"><span class="linenos">570</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_shouldstop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session.__init__-571"><a href="#Session.__init__-571"><span class="linenos">571</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_shouldfail</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session.__init__-572"><a href="#Session.__init__-572"><span class="linenos">572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;collection&quot;</span><span class="p">)</span>
</span><span id="Session.__init__-573"><a href="#Session.__init__-573"><span class="linenos">573</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths</span><span class="p">:</span> <span class="nb">frozenset</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
</span><span id="Session.__init__-574"><a href="#Session.__init__-574"><span class="linenos">574</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths_with_parents</span><span class="p">:</span> <span class="nb">frozenset</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
</span><span id="Session.__init__-575"><a href="#Session.__init__-575"><span class="linenos">575</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.__init__-576"><a href="#Session.__init__-576"><span class="linenos">576</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CollectionArgument</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.__init__-577"><a href="#Session.__init__-577"><span class="linenos">577</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">,</span> <span class="n">CollectReport</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session.__init__-578"><a href="#Session.__init__-578"><span class="linenos">578</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.__init__-579"><a href="#Session.__init__-579"><span class="linenos">579</span></a>
</span><span id="Session.__init__-580"><a href="#Session.__init__-580"><span class="linenos">580</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bestrelpathcache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">_bestrelpath_cache</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">rootpath</span><span class="p">)</span>
</span><span id="Session.__init__-581"><a href="#Session.__init__-581"><span class="linenos">581</span></a>
</span><span id="Session.__init__-582"><a href="#Session.__init__-582"><span class="linenos">582</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.exitstatus" class="classattr">
                                <div class="attr variable">
            <span class="name">exitstatus</span><span class="annotation">: int | _pytest.config.ExitCode</span>

        
    </div>
    <a class="headerlink" href="#Session.exitstatus"></a>
    
    

                            </div>
                            <div id="Session.testsfailed" class="classattr">
                                <div class="attr variable">
            <span class="name">testsfailed</span>

        
    </div>
    <a class="headerlink" href="#Session.testsfailed"></a>
    
    

                            </div>
                            <div id="Session.testscollected" class="classattr">
                                <div class="attr variable">
            <span class="name">testscollected</span>

        
    </div>
    <a class="headerlink" href="#Session.testscollected"></a>
    
    

                            </div>
                            <div id="Session.trace" class="classattr">
                                <div class="attr variable">
            <span class="name">trace</span>

        
    </div>
    <a class="headerlink" href="#Session.trace"></a>
    
    

                            </div>
                            <div id="Session.items" class="classattr">
                                <div class="attr variable">
            <span class="name">items</span><span class="annotation">: list[_pytest.nodes.Item]</span>

        
    </div>
    <a class="headerlink" href="#Session.items"></a>
    
    

                            </div>
                            <div id="Session.from_config" class="classattr">
                                        <input id="Session.from_config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_config</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">Session</span>:</span></span>

                <label class="view-source-button" for="Session.from_config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.from_config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.from_config-584"><a href="#Session.from_config-584"><span class="linenos">584</span></a>    <span class="nd">@classmethod</span>
</span><span id="Session.from_config-585"><a href="#Session.from_config-585"><span class="linenos">585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
</span><span id="Session.from_config-586"><a href="#Session.from_config-586"><span class="linenos">586</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="Session.from_config-587"><a href="#Session.from_config-587"><span class="linenos">587</span></a>        <span class="k">return</span> <span class="n">session</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.shouldstop" class="classattr">
                                        <input id="Session.shouldstop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">shouldstop</span><span class="annotation">: bool | str</span>

                <label class="view-source-button" for="Session.shouldstop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.shouldstop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.shouldstop-598"><a href="#Session.shouldstop-598"><span class="linenos">598</span></a>    <span class="nd">@property</span>
</span><span id="Session.shouldstop-599"><a href="#Session.shouldstop-599"><span class="linenos">599</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shouldstop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Session.shouldstop-600"><a href="#Session.shouldstop-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shouldstop</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.shouldfail" class="classattr">
                                        <input id="Session.shouldfail-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">shouldfail</span><span class="annotation">: bool | str</span>

                <label class="view-source-button" for="Session.shouldfail-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.shouldfail"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.shouldfail-616"><a href="#Session.shouldfail-616"><span class="linenos">616</span></a>    <span class="nd">@property</span>
</span><span id="Session.shouldfail-617"><a href="#Session.shouldfail-617"><span class="linenos">617</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shouldfail</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Session.shouldfail-618"><a href="#Session.shouldfail-618"><span class="linenos">618</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shouldfail</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.startpath" class="classattr">
                                        <input id="Session.startpath-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">startpath</span><span class="annotation">: pathlib._local.Path</span>

                <label class="view-source-button" for="Session.startpath-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.startpath"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.startpath-634"><a href="#Session.startpath-634"><span class="linenos">634</span></a>    <span class="nd">@property</span>
</span><span id="Session.startpath-635"><a href="#Session.startpath-635"><span class="linenos">635</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">startpath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="Session.startpath-636"><a href="#Session.startpath-636"><span class="linenos">636</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path from which pytest was invoked.</span>
</span><span id="Session.startpath-637"><a href="#Session.startpath-637"><span class="linenos">637</span></a>
</span><span id="Session.startpath-638"><a href="#Session.startpath-638"><span class="linenos">638</span></a><span class="sd">        .. versionadded:: 7.0.0</span>
</span><span id="Session.startpath-639"><a href="#Session.startpath-639"><span class="linenos">639</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session.startpath-640"><a href="#Session.startpath-640"><span class="linenos">640</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span>
</span></pre></div>


            <div class="docstring"><p>The path from which pytest was invoked.</p>

<p><em>New in version 7.0.0.</em></p>
</div>


                            </div>
                            <div id="Session.pytest_collectstart" class="classattr">
                                        <input id="Session.pytest_collectstart-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-hookimpl">@hookimpl(tryfirst=True)</div>

        <span class="def">def</span>
        <span class="name">pytest_collectstart</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Session.pytest_collectstart-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.pytest_collectstart"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.pytest_collectstart-646"><a href="#Session.pytest_collectstart-646"><span class="linenos">646</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Session.pytest_collectstart-647"><a href="#Session.pytest_collectstart-647"><span class="linenos">647</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_collectstart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session.pytest_collectstart-648"><a href="#Session.pytest_collectstart-648"><span class="linenos">648</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span><span class="p">:</span>
</span><span id="Session.pytest_collectstart-649"><a href="#Session.pytest_collectstart-649"><span class="linenos">649</span></a>            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">Failed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span><span class="p">)</span>
</span><span id="Session.pytest_collectstart-650"><a href="#Session.pytest_collectstart-650"><span class="linenos">650</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shouldstop</span><span class="p">:</span>
</span><span id="Session.pytest_collectstart-651"><a href="#Session.pytest_collectstart-651"><span class="linenos">651</span></a>            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">Interrupted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shouldstop</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.pytest_runtest_logreport" class="classattr">
                                        <input id="Session.pytest_runtest_logreport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-hookimpl">@hookimpl(tryfirst=True)</div>

        <span class="def">def</span>
        <span class="name">pytest_runtest_logreport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">report</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Session.pytest_runtest_logreport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.pytest_runtest_logreport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.pytest_runtest_logreport-653"><a href="#Session.pytest_runtest_logreport-653"><span class="linenos">653</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Session.pytest_runtest_logreport-654"><a href="#Session.pytest_runtest_logreport-654"><span class="linenos">654</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_runtest_logreport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report</span><span class="p">:</span> <span class="n">TestReport</span> <span class="o">|</span> <span class="n">CollectReport</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session.pytest_runtest_logreport-655"><a href="#Session.pytest_runtest_logreport-655"><span class="linenos">655</span></a>        <span class="k">if</span> <span class="n">report</span><span class="o">.</span><span class="n">failed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">report</span><span class="p">,</span> <span class="s2">&quot;wasxfail&quot;</span><span class="p">):</span>
</span><span id="Session.pytest_runtest_logreport-656"><a href="#Session.pytest_runtest_logreport-656"><span class="linenos">656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session.pytest_runtest_logreport-657"><a href="#Session.pytest_runtest_logreport-657"><span class="linenos">657</span></a>            <span class="n">maxfail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;maxfail&quot;</span><span class="p">)</span>
</span><span id="Session.pytest_runtest_logreport-658"><a href="#Session.pytest_runtest_logreport-658"><span class="linenos">658</span></a>            <span class="k">if</span> <span class="n">maxfail</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">&gt;=</span> <span class="n">maxfail</span><span class="p">:</span>
</span><span id="Session.pytest_runtest_logreport-659"><a href="#Session.pytest_runtest_logreport-659"><span class="linenos">659</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span> <span class="o">=</span> <span class="s2">&quot;stopping after </span><span class="si">%d</span><span class="s2"> failures&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.pytest_collectreport" class="classattr">
                                        <input id="Session.pytest_collectreport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-hookimpl">@hookimpl(tryfirst=True)</div>

        <span class="def">def</span>
        <span class="name">pytest_collectreport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">report</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">CollectReport</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Session.pytest_collectreport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.pytest_collectreport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.pytest_collectreport-653"><a href="#Session.pytest_collectreport-653"><span class="linenos">653</span></a>    <span class="nd">@hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Session.pytest_collectreport-654"><a href="#Session.pytest_collectreport-654"><span class="linenos">654</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pytest_runtest_logreport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report</span><span class="p">:</span> <span class="n">TestReport</span> <span class="o">|</span> <span class="n">CollectReport</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session.pytest_collectreport-655"><a href="#Session.pytest_collectreport-655"><span class="linenos">655</span></a>        <span class="k">if</span> <span class="n">report</span><span class="o">.</span><span class="n">failed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">report</span><span class="p">,</span> <span class="s2">&quot;wasxfail&quot;</span><span class="p">):</span>
</span><span id="Session.pytest_collectreport-656"><a href="#Session.pytest_collectreport-656"><span class="linenos">656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session.pytest_collectreport-657"><a href="#Session.pytest_collectreport-657"><span class="linenos">657</span></a>            <span class="n">maxfail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;maxfail&quot;</span><span class="p">)</span>
</span><span id="Session.pytest_collectreport-658"><a href="#Session.pytest_collectreport-658"><span class="linenos">658</span></a>            <span class="k">if</span> <span class="n">maxfail</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span> <span class="o">&gt;=</span> <span class="n">maxfail</span><span class="p">:</span>
</span><span id="Session.pytest_collectreport-659"><a href="#Session.pytest_collectreport-659"><span class="linenos">659</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">shouldfail</span> <span class="o">=</span> <span class="s2">&quot;stopping after </span><span class="si">%d</span><span class="s2"> failures&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">testsfailed</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.isinitpath" class="classattr">
                                        <input id="Session.isinitpath-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">isinitpath</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">with_parents</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Session.isinitpath-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.isinitpath"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.isinitpath-663"><a href="#Session.isinitpath-663"><span class="linenos">663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">isinitpath</span><span class="p">(</span>
</span><span id="Session.isinitpath-664"><a href="#Session.isinitpath-664"><span class="linenos">664</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Session.isinitpath-665"><a href="#Session.isinitpath-665"><span class="linenos">665</span></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Session.isinitpath-666"><a href="#Session.isinitpath-666"><span class="linenos">666</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Session.isinitpath-667"><a href="#Session.isinitpath-667"><span class="linenos">667</span></a>        <span class="n">with_parents</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Session.isinitpath-668"><a href="#Session.isinitpath-668"><span class="linenos">668</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Session.isinitpath-669"><a href="#Session.isinitpath-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is path an initial path?</span>
</span><span id="Session.isinitpath-670"><a href="#Session.isinitpath-670"><span class="linenos">670</span></a>
</span><span id="Session.isinitpath-671"><a href="#Session.isinitpath-671"><span class="linenos">671</span></a><span class="sd">        An initial path is a path explicitly given to pytest on the command</span>
</span><span id="Session.isinitpath-672"><a href="#Session.isinitpath-672"><span class="linenos">672</span></a><span class="sd">        line.</span>
</span><span id="Session.isinitpath-673"><a href="#Session.isinitpath-673"><span class="linenos">673</span></a>
</span><span id="Session.isinitpath-674"><a href="#Session.isinitpath-674"><span class="linenos">674</span></a><span class="sd">        :param with_parents:</span>
</span><span id="Session.isinitpath-675"><a href="#Session.isinitpath-675"><span class="linenos">675</span></a><span class="sd">            If set, also return True if the path is a parent of an initial path.</span>
</span><span id="Session.isinitpath-676"><a href="#Session.isinitpath-676"><span class="linenos">676</span></a>
</span><span id="Session.isinitpath-677"><a href="#Session.isinitpath-677"><span class="linenos">677</span></a><span class="sd">        .. versionchanged:: 8.0</span>
</span><span id="Session.isinitpath-678"><a href="#Session.isinitpath-678"><span class="linenos">678</span></a><span class="sd">            Added the ``with_parents`` parameter.</span>
</span><span id="Session.isinitpath-679"><a href="#Session.isinitpath-679"><span class="linenos">679</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session.isinitpath-680"><a href="#Session.isinitpath-680"><span class="linenos">680</span></a>        <span class="c1"># Optimization: Path(Path(...)) is much slower than isinstance.</span>
</span><span id="Session.isinitpath-681"><a href="#Session.isinitpath-681"><span class="linenos">681</span></a>        <span class="n">path_</span> <span class="o">=</span> <span class="n">path</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="k">else</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session.isinitpath-682"><a href="#Session.isinitpath-682"><span class="linenos">682</span></a>        <span class="k">if</span> <span class="n">with_parents</span><span class="p">:</span>
</span><span id="Session.isinitpath-683"><a href="#Session.isinitpath-683"><span class="linenos">683</span></a>            <span class="k">return</span> <span class="n">path_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths_with_parents</span>
</span><span id="Session.isinitpath-684"><a href="#Session.isinitpath-684"><span class="linenos">684</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session.isinitpath-685"><a href="#Session.isinitpath-685"><span class="linenos">685</span></a>            <span class="k">return</span> <span class="n">path_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths</span>
</span></pre></div>


            <div class="docstring"><p>Is path an initial path?</p>

<p>An initial path is a path explicitly given to pytest on the command
line.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>with_parents</strong>: 
If set, also return True if the path is a parent of an initial path.</li>
</ul>

<p><em>Changed in version 8.0:</em>
Added the <code>with_parents</code> parameter.</p>
</div>


                            </div>
                            <div id="Session.gethookproxy" class="classattr">
                                        <input id="Session.gethookproxy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gethookproxy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fspath</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">pluggy</span><span class="o">.</span><span class="n">_hooks</span><span class="o">.</span><span class="n">HookRelay</span>:</span></span>

                <label class="view-source-button" for="Session.gethookproxy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.gethookproxy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.gethookproxy-687"><a href="#Session.gethookproxy-687"><span class="linenos">687</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">gethookproxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fspath</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookRelay</span><span class="p">:</span>
</span><span id="Session.gethookproxy-688"><a href="#Session.gethookproxy-688"><span class="linenos">688</span></a>        <span class="c1"># Optimization: Path(Path(...)) is much slower than isinstance.</span>
</span><span id="Session.gethookproxy-689"><a href="#Session.gethookproxy-689"><span class="linenos">689</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">fspath</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fspath</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="k">else</span> <span class="n">Path</span><span class="p">(</span><span class="n">fspath</span><span class="p">)</span>
</span><span id="Session.gethookproxy-690"><a href="#Session.gethookproxy-690"><span class="linenos">690</span></a>        <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span>
</span><span id="Session.gethookproxy-691"><a href="#Session.gethookproxy-691"><span class="linenos">691</span></a>        <span class="c1"># Check if we have the common case of running</span>
</span><span id="Session.gethookproxy-692"><a href="#Session.gethookproxy-692"><span class="linenos">692</span></a>        <span class="c1"># hooks with all conftest.py files.</span>
</span><span id="Session.gethookproxy-693"><a href="#Session.gethookproxy-693"><span class="linenos">693</span></a>        <span class="n">my_conftestmodules</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">_getconftestmodules</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session.gethookproxy-694"><a href="#Session.gethookproxy-694"><span class="linenos">694</span></a>        <span class="n">remove_mods</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">_conftest_plugins</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">my_conftestmodules</span><span class="p">)</span>
</span><span id="Session.gethookproxy-695"><a href="#Session.gethookproxy-695"><span class="linenos">695</span></a>        <span class="n">proxy</span><span class="p">:</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookRelay</span>
</span><span id="Session.gethookproxy-696"><a href="#Session.gethookproxy-696"><span class="linenos">696</span></a>        <span class="k">if</span> <span class="n">remove_mods</span><span class="p">:</span>
</span><span id="Session.gethookproxy-697"><a href="#Session.gethookproxy-697"><span class="linenos">697</span></a>            <span class="c1"># One or more conftests are not in use at this path.</span>
</span><span id="Session.gethookproxy-698"><a href="#Session.gethookproxy-698"><span class="linenos">698</span></a>            <span class="n">proxy</span> <span class="o">=</span> <span class="n">PathAwareHookProxy</span><span class="p">(</span><span class="n">FSHookProxy</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">remove_mods</span><span class="p">))</span>  <span class="c1"># type: ignore[arg-type,assignment]</span>
</span><span id="Session.gethookproxy-699"><a href="#Session.gethookproxy-699"><span class="linenos">699</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session.gethookproxy-700"><a href="#Session.gethookproxy-700"><span class="linenos">700</span></a>            <span class="c1"># All plugins are active for this fspath.</span>
</span><span id="Session.gethookproxy-701"><a href="#Session.gethookproxy-701"><span class="linenos">701</span></a>            <span class="n">proxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">hook</span>
</span><span id="Session.gethookproxy-702"><a href="#Session.gethookproxy-702"><span class="linenos">702</span></a>        <span class="k">return</span> <span class="n">proxy</span>
</span></pre></div>


    

                            </div>
                            <div id="Session.perform_collect" class="classattr">
                                        <input id="Session.perform_collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">perform_collect</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">genitems</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">Sequence</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Session.perform_collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.perform_collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.perform_collect-745"><a href="#Session.perform_collect-745"><span class="linenos">745</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">perform_collect</span><span class="p">(</span>
</span><span id="Session.perform_collect-746"><a href="#Session.perform_collect-746"><span class="linenos">746</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">genitems</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Session.perform_collect-747"><a href="#Session.perform_collect-747"><span class="linenos">747</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Session.perform_collect-748"><a href="#Session.perform_collect-748"><span class="linenos">748</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform the collection phase for this session.</span>
</span><span id="Session.perform_collect-749"><a href="#Session.perform_collect-749"><span class="linenos">749</span></a>
</span><span id="Session.perform_collect-750"><a href="#Session.perform_collect-750"><span class="linenos">750</span></a><span class="sd">        This is called by the default :hook:`pytest_collection` hook</span>
</span><span id="Session.perform_collect-751"><a href="#Session.perform_collect-751"><span class="linenos">751</span></a><span class="sd">        implementation; see the documentation of this hook for more details.</span>
</span><span id="Session.perform_collect-752"><a href="#Session.perform_collect-752"><span class="linenos">752</span></a><span class="sd">        For testing purposes, it may also be called directly on a fresh</span>
</span><span id="Session.perform_collect-753"><a href="#Session.perform_collect-753"><span class="linenos">753</span></a><span class="sd">        ``Session``.</span>
</span><span id="Session.perform_collect-754"><a href="#Session.perform_collect-754"><span class="linenos">754</span></a>
</span><span id="Session.perform_collect-755"><a href="#Session.perform_collect-755"><span class="linenos">755</span></a><span class="sd">        This function normally recursively expands any collectors collected</span>
</span><span id="Session.perform_collect-756"><a href="#Session.perform_collect-756"><span class="linenos">756</span></a><span class="sd">        from the session to their items, and only items are returned. For</span>
</span><span id="Session.perform_collect-757"><a href="#Session.perform_collect-757"><span class="linenos">757</span></a><span class="sd">        testing purposes, this may be suppressed by passing ``genitems=False``,</span>
</span><span id="Session.perform_collect-758"><a href="#Session.perform_collect-758"><span class="linenos">758</span></a><span class="sd">        in which case the return value contains these collectors unexpanded,</span>
</span><span id="Session.perform_collect-759"><a href="#Session.perform_collect-759"><span class="linenos">759</span></a><span class="sd">        and ``session.items`` is empty.</span>
</span><span id="Session.perform_collect-760"><a href="#Session.perform_collect-760"><span class="linenos">760</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Session.perform_collect-761"><a href="#Session.perform_collect-761"><span class="linenos">761</span></a>        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session.perform_collect-762"><a href="#Session.perform_collect-762"><span class="linenos">762</span></a>            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">args</span>
</span><span id="Session.perform_collect-763"><a href="#Session.perform_collect-763"><span class="linenos">763</span></a>
</span><span id="Session.perform_collect-764"><a href="#Session.perform_collect-764"><span class="linenos">764</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;perform_collect&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</span><span id="Session.perform_collect-765"><a href="#Session.perform_collect-765"><span class="linenos">765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session.perform_collect-766"><a href="#Session.perform_collect-766"><span class="linenos">766</span></a>
</span><span id="Session.perform_collect-767"><a href="#Session.perform_collect-767"><span class="linenos">767</span></a>        <span class="n">hook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">hook</span>
</span><span id="Session.perform_collect-768"><a href="#Session.perform_collect-768"><span class="linenos">768</span></a>
</span><span id="Session.perform_collect-769"><a href="#Session.perform_collect-769"><span class="linenos">769</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-770"><a href="#Session.perform_collect-770"><span class="linenos">770</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-771"><a href="#Session.perform_collect-771"><span class="linenos">771</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session.perform_collect-772"><a href="#Session.perform_collect-772"><span class="linenos">772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-773"><a href="#Session.perform_collect-773"><span class="linenos">773</span></a>        <span class="n">items</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
</span><span id="Session.perform_collect-774"><a href="#Session.perform_collect-774"><span class="linenos">774</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Session.perform_collect-775"><a href="#Session.perform_collect-775"><span class="linenos">775</span></a>            <span class="n">initialpaths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-776"><a href="#Session.perform_collect-776"><span class="linenos">776</span></a>            <span class="n">initialpaths_with_parents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-777"><a href="#Session.perform_collect-777"><span class="linenos">777</span></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="Session.perform_collect-778"><a href="#Session.perform_collect-778"><span class="linenos">778</span></a>                <span class="n">collection_argument</span> <span class="o">=</span> <span class="n">resolve_collection_argument</span><span class="p">(</span>
</span><span id="Session.perform_collect-779"><a href="#Session.perform_collect-779"><span class="linenos">779</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">invocation_params</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span>
</span><span id="Session.perform_collect-780"><a href="#Session.perform_collect-780"><span class="linenos">780</span></a>                    <span class="n">arg</span><span class="p">,</span>
</span><span id="Session.perform_collect-781"><a href="#Session.perform_collect-781"><span class="linenos">781</span></a>                    <span class="n">as_pypath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">pyargs</span><span class="p">,</span>
</span><span id="Session.perform_collect-782"><a href="#Session.perform_collect-782"><span class="linenos">782</span></a>                <span class="p">)</span>
</span><span id="Session.perform_collect-783"><a href="#Session.perform_collect-783"><span class="linenos">783</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection_argument</span><span class="p">)</span>
</span><span id="Session.perform_collect-784"><a href="#Session.perform_collect-784"><span class="linenos">784</span></a>                <span class="n">initialpaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session.perform_collect-785"><a href="#Session.perform_collect-785"><span class="linenos">785</span></a>                <span class="n">initialpaths_with_parents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session.perform_collect-786"><a href="#Session.perform_collect-786"><span class="linenos">786</span></a>                <span class="n">initialpaths_with_parents</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">parents</span><span class="p">)</span>
</span><span id="Session.perform_collect-787"><a href="#Session.perform_collect-787"><span class="linenos">787</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">initialpaths</span><span class="p">)</span>
</span><span id="Session.perform_collect-788"><a href="#Session.perform_collect-788"><span class="linenos">788</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initialpaths_with_parents</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">initialpaths_with_parents</span><span class="p">)</span>
</span><span id="Session.perform_collect-789"><a href="#Session.perform_collect-789"><span class="linenos">789</span></a>
</span><span id="Session.perform_collect-790"><a href="#Session.perform_collect-790"><span class="linenos">790</span></a>            <span class="n">rep</span> <span class="o">=</span> <span class="n">collect_one_node</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Session.perform_collect-791"><a href="#Session.perform_collect-791"><span class="linenos">791</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collectreport</span><span class="p">(</span><span class="n">report</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
</span><span id="Session.perform_collect-792"><a href="#Session.perform_collect-792"><span class="linenos">792</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="Session.perform_collect-793"><a href="#Session.perform_collect-793"><span class="linenos">793</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="p">:</span>
</span><span id="Session.perform_collect-794"><a href="#Session.perform_collect-794"><span class="linenos">794</span></a>                <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-795"><a href="#Session.perform_collect-795"><span class="linenos">795</span></a>                <span class="k">for</span> <span class="n">arg</span><span class="p">,</span> <span class="n">collectors</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="p">:</span>
</span><span id="Session.perform_collect-796"><a href="#Session.perform_collect-796"><span class="linenos">796</span></a>                    <span class="k">if</span> <span class="n">collectors</span><span class="p">:</span>
</span><span id="Session.perform_collect-797"><a href="#Session.perform_collect-797"><span class="linenos">797</span></a>                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Session.perform_collect-798"><a href="#Session.perform_collect-798"><span class="linenos">798</span></a>                            <span class="sa">f</span><span class="s2">&quot;not found: </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="se">\n</span><span class="s2">(no match in any of </span><span class="si">{</span><span class="n">collectors</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="Session.perform_collect-799"><a href="#Session.perform_collect-799"><span class="linenos">799</span></a>                        <span class="p">)</span>
</span><span id="Session.perform_collect-800"><a href="#Session.perform_collect-800"><span class="linenos">800</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Session.perform_collect-801"><a href="#Session.perform_collect-801"><span class="linenos">801</span></a>                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found no collectors for </span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Session.perform_collect-802"><a href="#Session.perform_collect-802"><span class="linenos">802</span></a>
</span><span id="Session.perform_collect-803"><a href="#Session.perform_collect-803"><span class="linenos">803</span></a>                <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span><span class="o">*</span><span class="n">errors</span><span class="p">)</span>
</span><span id="Session.perform_collect-804"><a href="#Session.perform_collect-804"><span class="linenos">804</span></a>
</span><span id="Session.perform_collect-805"><a href="#Session.perform_collect-805"><span class="linenos">805</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">genitems</span><span class="p">:</span>
</span><span id="Session.perform_collect-806"><a href="#Session.perform_collect-806"><span class="linenos">806</span></a>                <span class="n">items</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span>
</span><span id="Session.perform_collect-807"><a href="#Session.perform_collect-807"><span class="linenos">807</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Session.perform_collect-808"><a href="#Session.perform_collect-808"><span class="linenos">808</span></a>                <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session.perform_collect-809"><a href="#Session.perform_collect-809"><span class="linenos">809</span></a>                    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span><span class="p">:</span>
</span><span id="Session.perform_collect-810"><a href="#Session.perform_collect-810"><span class="linenos">810</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
</span><span id="Session.perform_collect-811"><a href="#Session.perform_collect-811"><span class="linenos">811</span></a>
</span><span id="Session.perform_collect-812"><a href="#Session.perform_collect-812"><span class="linenos">812</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">check_pending</span><span class="p">()</span>
</span><span id="Session.perform_collect-813"><a href="#Session.perform_collect-813"><span class="linenos">813</span></a>            <span class="n">hook</span><span class="o">.</span><span class="n">pytest_collection_modifyitems</span><span class="p">(</span>
</span><span id="Session.perform_collect-814"><a href="#Session.perform_collect-814"><span class="linenos">814</span></a>                <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="n">items</span>
</span><span id="Session.perform_collect-815"><a href="#Session.perform_collect-815"><span class="linenos">815</span></a>            <span class="p">)</span>
</span><span id="Session.perform_collect-816"><a href="#Session.perform_collect-816"><span class="linenos">816</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Session.perform_collect-817"><a href="#Session.perform_collect-817"><span class="linenos">817</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-818"><a href="#Session.perform_collect-818"><span class="linenos">818</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.perform_collect-819"><a href="#Session.perform_collect-819"><span class="linenos">819</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_collection_cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session.perform_collect-820"><a href="#Session.perform_collect-820"><span class="linenos">820</span></a>            <span class="n">hook</span><span class="o">.</span><span class="n">pytest_collection_finish</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Session.perform_collect-821"><a href="#Session.perform_collect-821"><span class="linenos">821</span></a>
</span><span id="Session.perform_collect-822"><a href="#Session.perform_collect-822"><span class="linenos">822</span></a>        <span class="k">if</span> <span class="n">genitems</span><span class="p">:</span>
</span><span id="Session.perform_collect-823"><a href="#Session.perform_collect-823"><span class="linenos">823</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">testscollected</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span><span id="Session.perform_collect-824"><a href="#Session.perform_collect-824"><span class="linenos">824</span></a>
</span><span id="Session.perform_collect-825"><a href="#Session.perform_collect-825"><span class="linenos">825</span></a>        <span class="k">return</span> <span class="n">items</span>
</span></pre></div>


            <div class="docstring"><p>Perform the collection phase for this session.</p>

<p>This is called by the default :hook:<code>pytest_collection</code> hook
implementation; see the documentation of this hook for more details.
For testing purposes, it may also be called directly on a fresh
<code><a href="#Session">Session</a></code>.</p>

<p>This function normally recursively expands any collectors collected
from the session to their items, and only items are returned. For
testing purposes, this may be suppressed by passing <code>genitems=False</code>,
in which case the return value contains these collectors unexpanded,
and <code>session.items</code> is empty.</p>
</div>


                            </div>
                            <div id="Session.collect" class="classattr">
                                        <input id="Session.collect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Session.collect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.collect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.collect-840"><a href="#Session.collect-840"><span class="linenos">840</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]:</span>
</span><span id="Session.collect-841"><a href="#Session.collect-841"><span class="linenos">841</span></a>        <span class="c1"># This is a cache for the root directories of the initial paths.</span>
</span><span id="Session.collect-842"><a href="#Session.collect-842"><span class="linenos">842</span></a>        <span class="c1"># We can&#39;t use collection_cache for Session because of its special</span>
</span><span id="Session.collect-843"><a href="#Session.collect-843"><span class="linenos">843</span></a>        <span class="c1"># role as the bootstrapping collector.</span>
</span><span id="Session.collect-844"><a href="#Session.collect-844"><span class="linenos">844</span></a>        <span class="n">path_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Session.collect-845"><a href="#Session.collect-845"><span class="linenos">845</span></a>
</span><span id="Session.collect-846"><a href="#Session.collect-846"><span class="linenos">846</span></a>        <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span>
</span><span id="Session.collect-847"><a href="#Session.collect-847"><span class="linenos">847</span></a>
</span><span id="Session.collect-848"><a href="#Session.collect-848"><span class="linenos">848</span></a>        <span class="k">for</span> <span class="n">collection_argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_parts</span><span class="p">:</span>
</span><span id="Session.collect-849"><a href="#Session.collect-849"><span class="linenos">849</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;processing argument&quot;</span><span class="p">,</span> <span class="n">collection_argument</span><span class="p">)</span>
</span><span id="Session.collect-850"><a href="#Session.collect-850"><span class="linenos">850</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Session.collect-851"><a href="#Session.collect-851"><span class="linenos">851</span></a>
</span><span id="Session.collect-852"><a href="#Session.collect-852"><span class="linenos">852</span></a>            <span class="n">argpath</span> <span class="o">=</span> <span class="n">collection_argument</span><span class="o">.</span><span class="n">path</span>
</span><span id="Session.collect-853"><a href="#Session.collect-853"><span class="linenos">853</span></a>            <span class="n">names</span> <span class="o">=</span> <span class="n">collection_argument</span><span class="o">.</span><span class="n">parts</span>
</span><span id="Session.collect-854"><a href="#Session.collect-854"><span class="linenos">854</span></a>            <span class="n">module_name</span> <span class="o">=</span> <span class="n">collection_argument</span><span class="o">.</span><span class="n">module_name</span>
</span><span id="Session.collect-855"><a href="#Session.collect-855"><span class="linenos">855</span></a>
</span><span id="Session.collect-856"><a href="#Session.collect-856"><span class="linenos">856</span></a>            <span class="c1"># resolve_collection_argument() ensures this.</span>
</span><span id="Session.collect-857"><a href="#Session.collect-857"><span class="linenos">857</span></a>            <span class="k">if</span> <span class="n">argpath</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
</span><span id="Session.collect-858"><a href="#Session.collect-858"><span class="linenos">858</span></a>                <span class="k">assert</span> <span class="ow">not</span> <span class="n">names</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;invalid arg </span><span class="si">{</span><span class="p">(</span><span class="n">argpath</span><span class="p">,</span><span class="w"> </span><span class="n">names</span><span class="p">)</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Session.collect-859"><a href="#Session.collect-859"><span class="linenos">859</span></a>
</span><span id="Session.collect-860"><a href="#Session.collect-860"><span class="linenos">860</span></a>            <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">argpath</span><span class="p">]</span>
</span><span id="Session.collect-861"><a href="#Session.collect-861"><span class="linenos">861</span></a>            <span class="c1"># Add relevant parents of the path, from the root, e.g.</span>
</span><span id="Session.collect-862"><a href="#Session.collect-862"><span class="linenos">862</span></a>            <span class="c1">#   /a/b/c.py -&gt; [/, /a, /a/b, /a/b/c.py]</span>
</span><span id="Session.collect-863"><a href="#Session.collect-863"><span class="linenos">863</span></a>            <span class="k">if</span> <span class="n">module_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Session.collect-864"><a href="#Session.collect-864"><span class="linenos">864</span></a>                <span class="c1"># Paths outside of the confcutdir should not be considered.</span>
</span><span id="Session.collect-865"><a href="#Session.collect-865"><span class="linenos">865</span></a>                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">argpath</span><span class="o">.</span><span class="n">parents</span><span class="p">:</span>
</span><span id="Session.collect-866"><a href="#Session.collect-866"><span class="linenos">866</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">pm</span><span class="o">.</span><span class="n">_is_in_confcutdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="Session.collect-867"><a href="#Session.collect-867"><span class="linenos">867</span></a>                        <span class="k">break</span>
</span><span id="Session.collect-868"><a href="#Session.collect-868"><span class="linenos">868</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Session.collect-869"><a href="#Session.collect-869"><span class="linenos">869</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Session.collect-870"><a href="#Session.collect-870"><span class="linenos">870</span></a>                <span class="c1"># For --pyargs arguments, only consider paths matching the module</span>
</span><span id="Session.collect-871"><a href="#Session.collect-871"><span class="linenos">871</span></a>                <span class="c1"># name. Paths beyond the package hierarchy are not included.</span>
</span><span id="Session.collect-872"><a href="#Session.collect-872"><span class="linenos">872</span></a>                <span class="n">module_name_parts</span> <span class="o">=</span> <span class="n">module_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="Session.collect-873"><a href="#Session.collect-873"><span class="linenos">873</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argpath</span><span class="o">.</span><span class="n">parents</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="Session.collect-874"><a href="#Session.collect-874"><span class="linenos">874</span></a>                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">module_name_parts</span><span class="p">)</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">stem</span> <span class="o">!=</span> <span class="n">module_name_parts</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]:</span>
</span><span id="Session.collect-875"><a href="#Session.collect-875"><span class="linenos">875</span></a>                        <span class="k">break</span>
</span><span id="Session.collect-876"><a href="#Session.collect-876"><span class="linenos">876</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Session.collect-877"><a href="#Session.collect-877"><span class="linenos">877</span></a>
</span><span id="Session.collect-878"><a href="#Session.collect-878"><span class="linenos">878</span></a>            <span class="c1"># Start going over the parts from the root, collecting each level</span>
</span><span id="Session.collect-879"><a href="#Session.collect-879"><span class="linenos">879</span></a>            <span class="c1"># and discarding all nodes which don&#39;t match the level&#39;s part.</span>
</span><span id="Session.collect-880"><a href="#Session.collect-880"><span class="linenos">880</span></a>            <span class="n">any_matched_in_initial_part</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session.collect-881"><a href="#Session.collect-881"><span class="linenos">881</span></a>            <span class="n">notfound_collectors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Session.collect-882"><a href="#Session.collect-882"><span class="linenos">882</span></a>            <span class="n">work</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Session.collect-883"><a href="#Session.collect-883"><span class="linenos">883</span></a>                <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">paths</span><span class="p">,</span> <span class="o">*</span><span class="n">names</span><span class="p">])</span>
</span><span id="Session.collect-884"><a href="#Session.collect-884"><span class="linenos">884</span></a>            <span class="p">]</span>
</span><span id="Session.collect-885"><a href="#Session.collect-885"><span class="linenos">885</span></a>            <span class="k">while</span> <span class="n">work</span><span class="p">:</span>
</span><span id="Session.collect-886"><a href="#Session.collect-886"><span class="linenos">886</span></a>                <span class="n">matchnode</span><span class="p">,</span> <span class="n">matchparts</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Session.collect-887"><a href="#Session.collect-887"><span class="linenos">887</span></a>
</span><span id="Session.collect-888"><a href="#Session.collect-888"><span class="linenos">888</span></a>                <span class="c1"># Pop&#39;d all of the parts, this is a match.</span>
</span><span id="Session.collect-889"><a href="#Session.collect-889"><span class="linenos">889</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">matchparts</span><span class="p">:</span>
</span><span id="Session.collect-890"><a href="#Session.collect-890"><span class="linenos">890</span></a>                    <span class="k">yield</span> <span class="n">matchnode</span>
</span><span id="Session.collect-891"><a href="#Session.collect-891"><span class="linenos">891</span></a>                    <span class="n">any_matched_in_initial_part</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Session.collect-892"><a href="#Session.collect-892"><span class="linenos">892</span></a>                    <span class="k">continue</span>
</span><span id="Session.collect-893"><a href="#Session.collect-893"><span class="linenos">893</span></a>
</span><span id="Session.collect-894"><a href="#Session.collect-894"><span class="linenos">894</span></a>                <span class="c1"># Should have been matched by now, discard.</span>
</span><span id="Session.collect-895"><a href="#Session.collect-895"><span class="linenos">895</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchnode</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">):</span>
</span><span id="Session.collect-896"><a href="#Session.collect-896"><span class="linenos">896</span></a>                    <span class="k">continue</span>
</span><span id="Session.collect-897"><a href="#Session.collect-897"><span class="linenos">897</span></a>
</span><span id="Session.collect-898"><a href="#Session.collect-898"><span class="linenos">898</span></a>                <span class="c1"># Collect this level of matching.</span>
</span><span id="Session.collect-899"><a href="#Session.collect-899"><span class="linenos">899</span></a>                <span class="c1"># Collecting Session (self) is done directly to avoid endless</span>
</span><span id="Session.collect-900"><a href="#Session.collect-900"><span class="linenos">900</span></a>                <span class="c1"># recursion to this function.</span>
</span><span id="Session.collect-901"><a href="#Session.collect-901"><span class="linenos">901</span></a>                <span class="n">subnodes</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span>
</span><span id="Session.collect-902"><a href="#Session.collect-902"><span class="linenos">902</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchnode</span><span class="p">,</span> <span class="n">Session</span><span class="p">):</span>
</span><span id="Session.collect-903"><a href="#Session.collect-903"><span class="linenos">903</span></a>                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Path</span><span class="p">)</span>
</span><span id="Session.collect-904"><a href="#Session.collect-904"><span class="linenos">904</span></a>                    <span class="n">subnodes</span> <span class="o">=</span> <span class="n">matchnode</span><span class="o">.</span><span class="n">_collect_path</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">path_cache</span><span class="p">)</span>
</span><span id="Session.collect-905"><a href="#Session.collect-905"><span class="linenos">905</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Session.collect-906"><a href="#Session.collect-906"><span class="linenos">906</span></a>                    <span class="c1"># For backward compat, files given directly multiple</span>
</span><span id="Session.collect-907"><a href="#Session.collect-907"><span class="linenos">907</span></a>                    <span class="c1"># times on the command line should not be deduplicated.</span>
</span><span id="Session.collect-908"><a href="#Session.collect-908"><span class="linenos">908</span></a>                    <span class="n">handle_dupes</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span>
</span><span id="Session.collect-909"><a href="#Session.collect-909"><span class="linenos">909</span></a>                        <span class="nb">len</span><span class="p">(</span><span class="n">matchparts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="Session.collect-910"><a href="#Session.collect-910"><span class="linenos">910</span></a>                        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Path</span><span class="p">)</span>
</span><span id="Session.collect-911"><a href="#Session.collect-911"><span class="linenos">911</span></a>                        <span class="ow">and</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
</span><span id="Session.collect-912"><a href="#Session.collect-912"><span class="linenos">912</span></a>                    <span class="p">)</span>
</span><span id="Session.collect-913"><a href="#Session.collect-913"><span class="linenos">913</span></a>                    <span class="n">rep</span><span class="p">,</span> <span class="n">duplicate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_one_node</span><span class="p">(</span><span class="n">matchnode</span><span class="p">,</span> <span class="n">handle_dupes</span><span class="p">)</span>
</span><span id="Session.collect-914"><a href="#Session.collect-914"><span class="linenos">914</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">duplicate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session.collect-915"><a href="#Session.collect-915"><span class="linenos">915</span></a>                        <span class="c1"># Report collection failures here to avoid failing to</span>
</span><span id="Session.collect-916"><a href="#Session.collect-916"><span class="linenos">916</span></a>                        <span class="c1"># run some test specified in the command line because</span>
</span><span id="Session.collect-917"><a href="#Session.collect-917"><span class="linenos">917</span></a>                        <span class="c1"># the module could not be imported (#134).</span>
</span><span id="Session.collect-918"><a href="#Session.collect-918"><span class="linenos">918</span></a>                        <span class="n">matchnode</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collectreport</span><span class="p">(</span><span class="n">report</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
</span><span id="Session.collect-919"><a href="#Session.collect-919"><span class="linenos">919</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session.collect-920"><a href="#Session.collect-920"><span class="linenos">920</span></a>                        <span class="k">continue</span>
</span><span id="Session.collect-921"><a href="#Session.collect-921"><span class="linenos">921</span></a>                    <span class="n">subnodes</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span>
</span><span id="Session.collect-922"><a href="#Session.collect-922"><span class="linenos">922</span></a>
</span><span id="Session.collect-923"><a href="#Session.collect-923"><span class="linenos">923</span></a>                <span class="c1"># Prune this level.</span>
</span><span id="Session.collect-924"><a href="#Session.collect-924"><span class="linenos">924</span></a>                <span class="n">any_matched_in_collector</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Session.collect-925"><a href="#Session.collect-925"><span class="linenos">925</span></a>                <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">subnodes</span><span class="p">):</span>
</span><span id="Session.collect-926"><a href="#Session.collect-926"><span class="linenos">926</span></a>                    <span class="c1"># Path part e.g. `/a/b/` in `/a/b/test_file.py::TestIt::test_it`.</span>
</span><span id="Session.collect-927"><a href="#Session.collect-927"><span class="linenos">927</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="Session.collect-928"><a href="#Session.collect-928"><span class="linenos">928</span></a>                        <span class="n">is_match</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Session.collect-929"><a href="#Session.collect-929"><span class="linenos">929</span></a>                        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_match</span><span class="p">:</span>
</span><span id="Session.collect-930"><a href="#Session.collect-930"><span class="linenos">930</span></a>                            <span class="c1"># In case the file paths do not match, fallback to samefile() to</span>
</span><span id="Session.collect-931"><a href="#Session.collect-931"><span class="linenos">931</span></a>                            <span class="c1"># account for short-paths on Windows (#11895).</span>
</span><span id="Session.collect-932"><a href="#Session.collect-932"><span class="linenos">932</span></a>                            <span class="n">same_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">samefile</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Session.collect-933"><a href="#Session.collect-933"><span class="linenos">933</span></a>                            <span class="c1"># We don&#39;t want to match links to the current node,</span>
</span><span id="Session.collect-934"><a href="#Session.collect-934"><span class="linenos">934</span></a>                            <span class="c1"># otherwise we would match the same file more than once (#12039).</span>
</span><span id="Session.collect-935"><a href="#Session.collect-935"><span class="linenos">935</span></a>                            <span class="n">is_match</span> <span class="o">=</span> <span class="n">same_file</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="Session.collect-936"><a href="#Session.collect-936"><span class="linenos">936</span></a>                                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Session.collect-937"><a href="#Session.collect-937"><span class="linenos">937</span></a>                                <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Session.collect-938"><a href="#Session.collect-938"><span class="linenos">938</span></a>                            <span class="p">)</span>
</span><span id="Session.collect-939"><a href="#Session.collect-939"><span class="linenos">939</span></a>
</span><span id="Session.collect-940"><a href="#Session.collect-940"><span class="linenos">940</span></a>                    <span class="c1"># Name part e.g. `TestIt` in `/a/b/test_file.py::TestIt::test_it`.</span>
</span><span id="Session.collect-941"><a href="#Session.collect-941"><span class="linenos">941</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Session.collect-942"><a href="#Session.collect-942"><span class="linenos">942</span></a>                        <span class="c1"># TODO: Remove parametrized workaround once collection structure contains</span>
</span><span id="Session.collect-943"><a href="#Session.collect-943"><span class="linenos">943</span></a>                        <span class="c1"># parametrization.</span>
</span><span id="Session.collect-944"><a href="#Session.collect-944"><span class="linenos">944</span></a>                        <span class="n">is_match</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Session.collect-945"><a href="#Session.collect-945"><span class="linenos">945</span></a>                            <span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Session.collect-946"><a href="#Session.collect-946"><span class="linenos">946</span></a>                            <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Session.collect-947"><a href="#Session.collect-947"><span class="linenos">947</span></a>                        <span class="p">)</span>
</span><span id="Session.collect-948"><a href="#Session.collect-948"><span class="linenos">948</span></a>                    <span class="k">if</span> <span class="n">is_match</span><span class="p">:</span>
</span><span id="Session.collect-949"><a href="#Session.collect-949"><span class="linenos">949</span></a>                        <span class="n">work</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">node</span><span class="p">,</span> <span class="n">matchparts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
</span><span id="Session.collect-950"><a href="#Session.collect-950"><span class="linenos">950</span></a>                        <span class="n">any_matched_in_collector</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Session.collect-951"><a href="#Session.collect-951"><span class="linenos">951</span></a>
</span><span id="Session.collect-952"><a href="#Session.collect-952"><span class="linenos">952</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_matched_in_collector</span><span class="p">:</span>
</span><span id="Session.collect-953"><a href="#Session.collect-953"><span class="linenos">953</span></a>                    <span class="n">notfound_collectors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matchnode</span><span class="p">)</span>
</span><span id="Session.collect-954"><a href="#Session.collect-954"><span class="linenos">954</span></a>
</span><span id="Session.collect-955"><a href="#Session.collect-955"><span class="linenos">955</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">any_matched_in_initial_part</span><span class="p">:</span>
</span><span id="Session.collect-956"><a href="#Session.collect-956"><span class="linenos">956</span></a>                <span class="n">report_arg</span> <span class="o">=</span> <span class="s2">&quot;::&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">argpath</span><span class="p">),</span> <span class="o">*</span><span class="n">names</span><span class="p">))</span>
</span><span id="Session.collect-957"><a href="#Session.collect-957"><span class="linenos">957</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_notfound</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">report_arg</span><span class="p">,</span> <span class="n">notfound_collectors</span><span class="p">))</span>
</span><span id="Session.collect-958"><a href="#Session.collect-958"><span class="linenos">958</span></a>
</span><span id="Session.collect-959"><a href="#Session.collect-959"><span class="linenos">959</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">indent</span> <span class="o">-=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Collect children (items and collectors) for this collector.</p>
</div>


                            </div>
                            <div id="Session.genitems" class="classattr">
                                        <input id="Session.genitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genitems</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">node</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Session.genitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.genitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.genitems-961"><a href="#Session.genitems-961"><span class="linenos">961</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Session.genitems-962"><a href="#Session.genitems-962"><span class="linenos">962</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;genitems&quot;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</span><span id="Session.genitems-963"><a href="#Session.genitems-963"><span class="linenos">963</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">):</span>
</span><span id="Session.genitems-964"><a href="#Session.genitems-964"><span class="linenos">964</span></a>            <span class="n">node</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_itemcollected</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">node</span><span class="p">)</span>
</span><span id="Session.genitems-965"><a href="#Session.genitems-965"><span class="linenos">965</span></a>            <span class="k">yield</span> <span class="n">node</span>
</span><span id="Session.genitems-966"><a href="#Session.genitems-966"><span class="linenos">966</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Session.genitems-967"><a href="#Session.genitems-967"><span class="linenos">967</span></a>            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">)</span>
</span><span id="Session.genitems-968"><a href="#Session.genitems-968"><span class="linenos">968</span></a>            <span class="n">keepduplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;keepduplicates&quot;</span><span class="p">)</span>
</span><span id="Session.genitems-969"><a href="#Session.genitems-969"><span class="linenos">969</span></a>            <span class="c1"># For backward compat, dedup only applies to files.</span>
</span><span id="Session.genitems-970"><a href="#Session.genitems-970"><span class="linenos">970</span></a>            <span class="n">handle_dupes</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">keepduplicates</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">File</span><span class="p">))</span>
</span><span id="Session.genitems-971"><a href="#Session.genitems-971"><span class="linenos">971</span></a>            <span class="n">rep</span><span class="p">,</span> <span class="n">duplicate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_one_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">handle_dupes</span><span class="p">)</span>
</span><span id="Session.genitems-972"><a href="#Session.genitems-972"><span class="linenos">972</span></a>            <span class="k">if</span> <span class="n">duplicate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keepduplicates</span><span class="p">:</span>
</span><span id="Session.genitems-973"><a href="#Session.genitems-973"><span class="linenos">973</span></a>                <span class="k">return</span>
</span><span id="Session.genitems-974"><a href="#Session.genitems-974"><span class="linenos">974</span></a>            <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
</span><span id="Session.genitems-975"><a href="#Session.genitems-975"><span class="linenos">975</span></a>                <span class="k">for</span> <span class="n">subnode</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">result</span><span class="p">:</span>
</span><span id="Session.genitems-976"><a href="#Session.genitems-976"><span class="linenos">976</span></a>                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">subnode</span><span class="p">)</span>
</span><span id="Session.genitems-977"><a href="#Session.genitems-977"><span class="linenos">977</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">duplicate</span><span class="p">:</span>
</span><span id="Session.genitems-978"><a href="#Session.genitems-978"><span class="linenos">978</span></a>                <span class="n">node</span><span class="o">.</span><span class="n">ihook</span><span class="o">.</span><span class="n">pytest_collectreport</span><span class="p">(</span><span class="n">report</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="Session.Interrupted">
                    <div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Session.Interrupted</span><wbr>(<span class="base">builtins.KeyboardInterrupt</span>):

        
    </div>
    <a class="headerlink" href="#Session.Interrupted"></a>
    
            <div class="docstring"><p>Signals that the test run was interrupted.</p>
</div>


                </section>
                <section id="Session.Failed">
                            <input id="Session.Failed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Session.Failed</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="Session.Failed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Session.Failed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Session.Failed-475"><a href="#Session.Failed-475"><span class="linenos">475</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Failed</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="Session.Failed-476"><a href="#Session.Failed-476"><span class="linenos">476</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Signals a stop as failed test run.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Signals a stop as failed test run.</p>
</div>


                </section>
                <section id="set_trace">
                            <input id="set_trace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">set_trace</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="set_trace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#set_trace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="set_trace-272"><a href="#set_trace-272"><span class="linenos">272</span></a>    <span class="nd">@classmethod</span>
</span><span id="set_trace-273"><a href="#set_trace-273"><span class="linenos">273</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_trace</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="set_trace-274"><a href="#set_trace-274"><span class="linenos">274</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Invoke debugging via ``Pdb.set_trace``, dropping any IO capturing.&quot;&quot;&quot;</span>
</span><span id="set_trace-275"><a href="#set_trace-275"><span class="linenos">275</span></a>        <span class="n">frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span>
</span><span id="set_trace-276"><a href="#set_trace-276"><span class="linenos">276</span></a>        <span class="n">_pdb</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_init_pdb</span><span class="p">(</span><span class="s2">&quot;set_trace&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="set_trace-277"><a href="#set_trace-277"><span class="linenos">277</span></a>        <span class="n">_pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Invoke debugging via <code>Pdb.set_trace</code>, dropping any IO capturing.</p>
</div>


                </section>
                <section id="skip">
                            <input id="skip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">skip</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">allow_module_level</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">NoReturn</span>:</span></span>

                <label class="view-source-button" for="skip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#skip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="skip-127"><a href="#skip-127"><span class="linenos">127</span></a><span class="nd">@_with_exception</span><span class="p">(</span><span class="n">Skipped</span><span class="p">)</span>
</span><span id="skip-128"><a href="#skip-128"><span class="linenos">128</span></a><span class="k">def</span><span class="w"> </span><span class="nf">skip</span><span class="p">(</span>
</span><span id="skip-129"><a href="#skip-129"><span class="linenos">129</span></a>    <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="skip-130"><a href="#skip-130"><span class="linenos">130</span></a>    <span class="o">*</span><span class="p">,</span>
</span><span id="skip-131"><a href="#skip-131"><span class="linenos">131</span></a>    <span class="n">allow_module_level</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="skip-132"><a href="#skip-132"><span class="linenos">132</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="skip-133"><a href="#skip-133"><span class="linenos">133</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Skip an executing test with the given message.</span>
</span><span id="skip-134"><a href="#skip-134"><span class="linenos">134</span></a>
</span><span id="skip-135"><a href="#skip-135"><span class="linenos">135</span></a><span class="sd">    This function should be called only during testing (setup, call or teardown) or</span>
</span><span id="skip-136"><a href="#skip-136"><span class="linenos">136</span></a><span class="sd">    during collection by using the ``allow_module_level`` flag.  This function can</span>
</span><span id="skip-137"><a href="#skip-137"><span class="linenos">137</span></a><span class="sd">    be called in doctests as well.</span>
</span><span id="skip-138"><a href="#skip-138"><span class="linenos">138</span></a>
</span><span id="skip-139"><a href="#skip-139"><span class="linenos">139</span></a><span class="sd">    :param reason:</span>
</span><span id="skip-140"><a href="#skip-140"><span class="linenos">140</span></a><span class="sd">        The message to show the user as reason for the skip.</span>
</span><span id="skip-141"><a href="#skip-141"><span class="linenos">141</span></a>
</span><span id="skip-142"><a href="#skip-142"><span class="linenos">142</span></a><span class="sd">    :param allow_module_level:</span>
</span><span id="skip-143"><a href="#skip-143"><span class="linenos">143</span></a><span class="sd">        Allows this function to be called at module level.</span>
</span><span id="skip-144"><a href="#skip-144"><span class="linenos">144</span></a><span class="sd">        Raising the skip exception at module level will stop</span>
</span><span id="skip-145"><a href="#skip-145"><span class="linenos">145</span></a><span class="sd">        the execution of the module and prevent the collection of all tests in the module,</span>
</span><span id="skip-146"><a href="#skip-146"><span class="linenos">146</span></a><span class="sd">        even those defined before the `skip` call.</span>
</span><span id="skip-147"><a href="#skip-147"><span class="linenos">147</span></a>
</span><span id="skip-148"><a href="#skip-148"><span class="linenos">148</span></a><span class="sd">        Defaults to False.</span>
</span><span id="skip-149"><a href="#skip-149"><span class="linenos">149</span></a>
</span><span id="skip-150"><a href="#skip-150"><span class="linenos">150</span></a><span class="sd">    :raises pytest.skip.Exception:</span>
</span><span id="skip-151"><a href="#skip-151"><span class="linenos">151</span></a><span class="sd">        The exception that is raised.</span>
</span><span id="skip-152"><a href="#skip-152"><span class="linenos">152</span></a>
</span><span id="skip-153"><a href="#skip-153"><span class="linenos">153</span></a><span class="sd">    .. note::</span>
</span><span id="skip-154"><a href="#skip-154"><span class="linenos">154</span></a><span class="sd">        It is better to use the :ref:`pytest.mark.skipif ref` marker when</span>
</span><span id="skip-155"><a href="#skip-155"><span class="linenos">155</span></a><span class="sd">        possible to declare a test to be skipped under certain conditions</span>
</span><span id="skip-156"><a href="#skip-156"><span class="linenos">156</span></a><span class="sd">        like mismatching platforms or dependencies.</span>
</span><span id="skip-157"><a href="#skip-157"><span class="linenos">157</span></a><span class="sd">        Similarly, use the ``# doctest: +SKIP`` directive (see :py:data:`doctest.SKIP`)</span>
</span><span id="skip-158"><a href="#skip-158"><span class="linenos">158</span></a><span class="sd">        to skip a doctest statically.</span>
</span><span id="skip-159"><a href="#skip-159"><span class="linenos">159</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="skip-160"><a href="#skip-160"><span class="linenos">160</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="skip-161"><a href="#skip-161"><span class="linenos">161</span></a>    <span class="k">raise</span> <span class="n">Skipped</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">reason</span><span class="p">,</span> <span class="n">allow_module_level</span><span class="o">=</span><span class="n">allow_module_level</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Skip an executing test with the given message.</p>

<p>This function should be called only during testing (setup, call or teardown) or
during collection by using the <code>allow_module_level</code> flag.  This function can
be called in doctests as well.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>reason</strong>: 
The message to show the user as reason for the skip.</p></li>
<li><p><strong>allow_module_level</strong>: 
Allows this function to be called at module level.
Raising the skip exception at module level will stop
the execution of the module and prevent the collection of all tests in the module,
even those defined before the <code><a href="#skip">skip</a></code> call.</p>

<p>Defaults to False.</p></li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>pytest.skip.Exception</strong>: 
The exception that is raised.</li>
</ul>

<div class="alert note">

<p>It is better to use the :ref:<code>pytest.mark.skipif ref</code> marker when
possible to declare a test to be skipped under certain conditions
like mismatching platforms or dependencies.
Similarly, use the <code># doctest: +SKIP</code> directive (see <code>doctest.SKIP</code>)
to skip a doctest statically.</p>

</div>
</div>


                </section>
                <section id="Stash">
                            <input id="Stash-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Stash</span>:

                <label class="view-source-button" for="Stash-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Stash"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Stash-30"><a href="#Stash-30"><span class="linenos"> 30</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Stash</span><span class="p">:</span>
</span><span id="Stash-31"><a href="#Stash-31"><span class="linenos"> 31</span></a><span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;``Stash`` is a type-safe heterogeneous mutable mapping that</span>
</span><span id="Stash-32"><a href="#Stash-32"><span class="linenos"> 32</span></a><span class="sd">    allows keys and value types to be defined separately from</span>
</span><span id="Stash-33"><a href="#Stash-33"><span class="linenos"> 33</span></a><span class="sd">    where it (the ``Stash``) is created.</span>
</span><span id="Stash-34"><a href="#Stash-34"><span class="linenos"> 34</span></a>
</span><span id="Stash-35"><a href="#Stash-35"><span class="linenos"> 35</span></a><span class="sd">    Usually you will be given an object which has a ``Stash``, for example</span>
</span><span id="Stash-36"><a href="#Stash-36"><span class="linenos"> 36</span></a><span class="sd">    :class:`~pytest.Config` or a :class:`~_pytest.nodes.Node`:</span>
</span><span id="Stash-37"><a href="#Stash-37"><span class="linenos"> 37</span></a>
</span><span id="Stash-38"><a href="#Stash-38"><span class="linenos"> 38</span></a><span class="sd">    .. code-block:: python</span>
</span><span id="Stash-39"><a href="#Stash-39"><span class="linenos"> 39</span></a>
</span><span id="Stash-40"><a href="#Stash-40"><span class="linenos"> 40</span></a><span class="sd">        stash: Stash = some_object.stash</span>
</span><span id="Stash-41"><a href="#Stash-41"><span class="linenos"> 41</span></a>
</span><span id="Stash-42"><a href="#Stash-42"><span class="linenos"> 42</span></a><span class="sd">    If a module or plugin wants to store data in this ``Stash``, it creates</span>
</span><span id="Stash-43"><a href="#Stash-43"><span class="linenos"> 43</span></a><span class="sd">    :class:`StashKey`\s for its keys (at the module level):</span>
</span><span id="Stash-44"><a href="#Stash-44"><span class="linenos"> 44</span></a>
</span><span id="Stash-45"><a href="#Stash-45"><span class="linenos"> 45</span></a><span class="sd">    .. code-block:: python</span>
</span><span id="Stash-46"><a href="#Stash-46"><span class="linenos"> 46</span></a>
</span><span id="Stash-47"><a href="#Stash-47"><span class="linenos"> 47</span></a><span class="sd">        # At the top-level of the module</span>
</span><span id="Stash-48"><a href="#Stash-48"><span class="linenos"> 48</span></a><span class="sd">        some_str_key = StashKey[str]()</span>
</span><span id="Stash-49"><a href="#Stash-49"><span class="linenos"> 49</span></a><span class="sd">        some_bool_key = StashKey[bool]()</span>
</span><span id="Stash-50"><a href="#Stash-50"><span class="linenos"> 50</span></a>
</span><span id="Stash-51"><a href="#Stash-51"><span class="linenos"> 51</span></a><span class="sd">    To store information:</span>
</span><span id="Stash-52"><a href="#Stash-52"><span class="linenos"> 52</span></a>
</span><span id="Stash-53"><a href="#Stash-53"><span class="linenos"> 53</span></a><span class="sd">    .. code-block:: python</span>
</span><span id="Stash-54"><a href="#Stash-54"><span class="linenos"> 54</span></a>
</span><span id="Stash-55"><a href="#Stash-55"><span class="linenos"> 55</span></a><span class="sd">        # Value type must match the key.</span>
</span><span id="Stash-56"><a href="#Stash-56"><span class="linenos"> 56</span></a><span class="sd">        stash[some_str_key] = &quot;value&quot;</span>
</span><span id="Stash-57"><a href="#Stash-57"><span class="linenos"> 57</span></a><span class="sd">        stash[some_bool_key] = True</span>
</span><span id="Stash-58"><a href="#Stash-58"><span class="linenos"> 58</span></a>
</span><span id="Stash-59"><a href="#Stash-59"><span class="linenos"> 59</span></a><span class="sd">    To retrieve the information:</span>
</span><span id="Stash-60"><a href="#Stash-60"><span class="linenos"> 60</span></a>
</span><span id="Stash-61"><a href="#Stash-61"><span class="linenos"> 61</span></a><span class="sd">    .. code-block:: python</span>
</span><span id="Stash-62"><a href="#Stash-62"><span class="linenos"> 62</span></a>
</span><span id="Stash-63"><a href="#Stash-63"><span class="linenos"> 63</span></a><span class="sd">        # The static type of some_str is str.</span>
</span><span id="Stash-64"><a href="#Stash-64"><span class="linenos"> 64</span></a><span class="sd">        some_str = stash[some_str_key]</span>
</span><span id="Stash-65"><a href="#Stash-65"><span class="linenos"> 65</span></a><span class="sd">        # The static type of some_bool is bool.</span>
</span><span id="Stash-66"><a href="#Stash-66"><span class="linenos"> 66</span></a><span class="sd">        some_bool = stash[some_bool_key]</span>
</span><span id="Stash-67"><a href="#Stash-67"><span class="linenos"> 67</span></a>
</span><span id="Stash-68"><a href="#Stash-68"><span class="linenos"> 68</span></a><span class="sd">    .. versionadded:: 7.0</span>
</span><span id="Stash-69"><a href="#Stash-69"><span class="linenos"> 69</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Stash-70"><a href="#Stash-70"><span class="linenos"> 70</span></a>
</span><span id="Stash-71"><a href="#Stash-71"><span class="linenos"> 71</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_storage&quot;</span><span class="p">,)</span>
</span><span id="Stash-72"><a href="#Stash-72"><span class="linenos"> 72</span></a>
</span><span id="Stash-73"><a href="#Stash-73"><span class="linenos"> 73</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Stash-74"><a href="#Stash-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">StashKey</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Stash-75"><a href="#Stash-75"><span class="linenos"> 75</span></a>
</span><span id="Stash-76"><a href="#Stash-76"><span class="linenos"> 76</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">value</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Stash-77"><a href="#Stash-77"><span class="linenos"> 77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a value for key.&quot;&quot;&quot;</span>
</span><span id="Stash-78"><a href="#Stash-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Stash-79"><a href="#Stash-79"><span class="linenos"> 79</span></a>
</span><span id="Stash-80"><a href="#Stash-80"><span class="linenos"> 80</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Stash-81"><a href="#Stash-81"><span class="linenos"> 81</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value for key.</span>
</span><span id="Stash-82"><a href="#Stash-82"><span class="linenos"> 82</span></a>
</span><span id="Stash-83"><a href="#Stash-83"><span class="linenos"> 83</span></a><span class="sd">        Raises ``KeyError`` if the key wasn&#39;t set before.</span>
</span><span id="Stash-84"><a href="#Stash-84"><span class="linenos"> 84</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Stash-85"><a href="#Stash-85"><span class="linenos"> 85</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="Stash-86"><a href="#Stash-86"><span class="linenos"> 86</span></a>
</span><span id="Stash-87"><a href="#Stash-87"><span class="linenos"> 87</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="n">D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="n">D</span><span class="p">:</span>
</span><span id="Stash-88"><a href="#Stash-88"><span class="linenos"> 88</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value for key, or return default if the key wasn&#39;t set</span>
</span><span id="Stash-89"><a href="#Stash-89"><span class="linenos"> 89</span></a><span class="sd">        before.&quot;&quot;&quot;</span>
</span><span id="Stash-90"><a href="#Stash-90"><span class="linenos"> 90</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Stash-91"><a href="#Stash-91"><span class="linenos"> 91</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="Stash-92"><a href="#Stash-92"><span class="linenos"> 92</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Stash-93"><a href="#Stash-93"><span class="linenos"> 93</span></a>            <span class="k">return</span> <span class="n">default</span>
</span><span id="Stash-94"><a href="#Stash-94"><span class="linenos"> 94</span></a>
</span><span id="Stash-95"><a href="#Stash-95"><span class="linenos"> 95</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setdefault</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Stash-96"><a href="#Stash-96"><span class="linenos"> 96</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the value of key if already set, otherwise set the value</span>
</span><span id="Stash-97"><a href="#Stash-97"><span class="linenos"> 97</span></a><span class="sd">        of key to default and return default.&quot;&quot;&quot;</span>
</span><span id="Stash-98"><a href="#Stash-98"><span class="linenos"> 98</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Stash-99"><a href="#Stash-99"><span class="linenos"> 99</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="Stash-100"><a href="#Stash-100"><span class="linenos">100</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Stash-101"><a href="#Stash-101"><span class="linenos">101</span></a>            <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span>
</span><span id="Stash-102"><a href="#Stash-102"><span class="linenos">102</span></a>            <span class="k">return</span> <span class="n">default</span>
</span><span id="Stash-103"><a href="#Stash-103"><span class="linenos">103</span></a>
</span><span id="Stash-104"><a href="#Stash-104"><span class="linenos">104</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Stash-105"><a href="#Stash-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the value for key.</span>
</span><span id="Stash-106"><a href="#Stash-106"><span class="linenos">106</span></a>
</span><span id="Stash-107"><a href="#Stash-107"><span class="linenos">107</span></a><span class="sd">        Raises ``KeyError`` if the key wasn&#39;t set before.</span>
</span><span id="Stash-108"><a href="#Stash-108"><span class="linenos">108</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Stash-109"><a href="#Stash-109"><span class="linenos">109</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="Stash-110"><a href="#Stash-110"><span class="linenos">110</span></a>
</span><span id="Stash-111"><a href="#Stash-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Stash-112"><a href="#Stash-112"><span class="linenos">112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether key was set.&quot;&quot;&quot;</span>
</span><span id="Stash-113"><a href="#Stash-113"><span class="linenos">113</span></a>        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span>
</span><span id="Stash-114"><a href="#Stash-114"><span class="linenos">114</span></a>
</span><span id="Stash-115"><a href="#Stash-115"><span class="linenos">115</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Stash-116"><a href="#Stash-116"><span class="linenos">116</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return how many items exist in the stash.&quot;&quot;&quot;</span>
</span><span id="Stash-117"><a href="#Stash-117"><span class="linenos">117</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code><a href="#Stash">Stash</a></code> is a type-safe heterogeneous mutable mapping that
allows keys and value types to be defined separately from
where it (the <code><a href="#Stash">Stash</a></code>) is created.</p>

<p>Usually you will be given an object which has a <code><a href="#Stash">Stash</a></code>, for example
<code>~<a href="#Config">pytest.Config</a></code> or a <code>~_pytest.nodes.Node</code>:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">stash</span><span class="p">:</span> <span class="n">Stash</span> <span class="o">=</span> <span class="n">some_object</span><span class="o">.</span><span class="n">stash</span>
</code></pre>
</div>

<p>If a module or plugin wants to store data in this <code><a href="#Stash">Stash</a></code>, it creates
<code><a href="#StashKey">StashKey</a></code>\s for its keys (at the module level):</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="c1"># At the top-level of the module</span>
<span class="n">some_str_key</span> <span class="o">=</span> <span class="n">StashKey</span><span class="p">[</span><span class="nb">str</span><span class="p">]()</span>
<span class="n">some_bool_key</span> <span class="o">=</span> <span class="n">StashKey</span><span class="p">[</span><span class="nb">bool</span><span class="p">]()</span>
</code></pre>
</div>

<p>To store information:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="c1"># Value type must match the key.</span>
<span class="n">stash</span><span class="p">[</span><span class="n">some_str_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span>
<span class="n">stash</span><span class="p">[</span><span class="n">some_bool_key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre>
</div>

<p>To retrieve the information:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="c1"># The static type of some_str is str.</span>
<span class="n">some_str</span> <span class="o">=</span> <span class="n">stash</span><span class="p">[</span><span class="n">some_str_key</span><span class="p">]</span>
<span class="c1"># The static type of some_bool is bool.</span>
<span class="n">some_bool</span> <span class="o">=</span> <span class="n">stash</span><span class="p">[</span><span class="n">some_bool_key</span><span class="p">]</span>
</code></pre>
</div>

<p><em>New in version 7.0.</em></p>
</div>


                            <div id="Stash.get" class="classattr">
                                        <input id="Stash.get-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">stash</span><span class="o">.</span><span class="n">StashKey</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>, </span><span class="param"><span class="n">default</span><span class="p">:</span> <span class="o">~</span><span class="n">D</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">,</span> <span class="o">~</span><span class="n">D</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Stash.get-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Stash.get"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Stash.get-87"><a href="#Stash.get-87"><span class="linenos">87</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="n">D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="n">D</span><span class="p">:</span>
</span><span id="Stash.get-88"><a href="#Stash.get-88"><span class="linenos">88</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value for key, or return default if the key wasn&#39;t set</span>
</span><span id="Stash.get-89"><a href="#Stash.get-89"><span class="linenos">89</span></a><span class="sd">        before.&quot;&quot;&quot;</span>
</span><span id="Stash.get-90"><a href="#Stash.get-90"><span class="linenos">90</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Stash.get-91"><a href="#Stash.get-91"><span class="linenos">91</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="Stash.get-92"><a href="#Stash.get-92"><span class="linenos">92</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Stash.get-93"><a href="#Stash.get-93"><span class="linenos">93</span></a>            <span class="k">return</span> <span class="n">default</span>
</span></pre></div>


            <div class="docstring"><p>Get the value for key, or return default if the key wasn't set
before.</p>
</div>


                            </div>
                            <div id="Stash.setdefault" class="classattr">
                                        <input id="Stash.setdefault-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setdefault</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">stash</span><span class="o">.</span><span class="n">StashKey</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>, </span><span class="param"><span class="n">default</span><span class="p">:</span> <span class="o">~</span><span class="n">T</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="Stash.setdefault-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Stash.setdefault"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Stash.setdefault-95"><a href="#Stash.setdefault-95"><span class="linenos"> 95</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setdefault</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">StashKey</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Stash.setdefault-96"><a href="#Stash.setdefault-96"><span class="linenos"> 96</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the value of key if already set, otherwise set the value</span>
</span><span id="Stash.setdefault-97"><a href="#Stash.setdefault-97"><span class="linenos"> 97</span></a><span class="sd">        of key to default and return default.&quot;&quot;&quot;</span>
</span><span id="Stash.setdefault-98"><a href="#Stash.setdefault-98"><span class="linenos"> 98</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Stash.setdefault-99"><a href="#Stash.setdefault-99"><span class="linenos"> 99</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="Stash.setdefault-100"><a href="#Stash.setdefault-100"><span class="linenos">100</span></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="Stash.setdefault-101"><a href="#Stash.setdefault-101"><span class="linenos">101</span></a>            <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span>
</span><span id="Stash.setdefault-102"><a href="#Stash.setdefault-102"><span class="linenos">102</span></a>            <span class="k">return</span> <span class="n">default</span>
</span></pre></div>


            <div class="docstring"><p>Return the value of key if already set, otherwise set the value
of key to default and return default.</p>
</div>


                            </div>
                </section>
                <section id="StashKey">
                            <input id="StashKey-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">StashKey</span><wbr>(<span class="base">typing.Generic[~T]</span>):

                <label class="view-source-button" for="StashKey-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StashKey"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StashKey-17"><a href="#StashKey-17"><span class="linenos">17</span></a><span class="k">class</span><span class="w"> </span><span class="nc">StashKey</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
</span><span id="StashKey-18"><a href="#StashKey-18"><span class="linenos">18</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;``StashKey`` is an object used as a key to a :class:`Stash`.</span>
</span><span id="StashKey-19"><a href="#StashKey-19"><span class="linenos">19</span></a>
</span><span id="StashKey-20"><a href="#StashKey-20"><span class="linenos">20</span></a><span class="sd">    A ``StashKey`` is associated with the type ``T`` of the value of the key.</span>
</span><span id="StashKey-21"><a href="#StashKey-21"><span class="linenos">21</span></a>
</span><span id="StashKey-22"><a href="#StashKey-22"><span class="linenos">22</span></a><span class="sd">    A ``StashKey`` is unique and cannot conflict with another key.</span>
</span><span id="StashKey-23"><a href="#StashKey-23"><span class="linenos">23</span></a>
</span><span id="StashKey-24"><a href="#StashKey-24"><span class="linenos">24</span></a><span class="sd">    .. versionadded:: 7.0</span>
</span><span id="StashKey-25"><a href="#StashKey-25"><span class="linenos">25</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="StashKey-26"><a href="#StashKey-26"><span class="linenos">26</span></a>
</span><span id="StashKey-27"><a href="#StashKey-27"><span class="linenos">27</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p><code><a href="#StashKey">StashKey</a></code> is an object used as a key to a <code><a href="#Stash">Stash</a></code>.</p>

<p>A <code><a href="#StashKey">StashKey</a></code> is associated with the type <code>T</code> of the value of the key.</p>

<p>A <code><a href="#StashKey">StashKey</a></code> is unique and cannot conflict with another key.</p>

<p><em>New in version 7.0.</em></p>
</div>


                </section>
                <section id="version_tuple">
                    <div class="attr variable">
            <span class="name">version_tuple</span>        =
<span class="default_value">(8, 3, 5)</span>

        
    </div>
    <a class="headerlink" href="#version_tuple"></a>
    
    

                </section>
                <section id="TempdirFactory">
                            <input id="TempdirFactory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">TempdirFactory</span>:

                <label class="view-source-button" for="TempdirFactory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempdirFactory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempdirFactory-267"><a href="#TempdirFactory-267"><span class="linenos">267</span></a><span class="nd">@final</span>
</span><span id="TempdirFactory-268"><a href="#TempdirFactory-268"><span class="linenos">268</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="TempdirFactory-269"><a href="#TempdirFactory-269"><span class="linenos">269</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TempdirFactory</span><span class="p">:</span>
</span><span id="TempdirFactory-270"><a href="#TempdirFactory-270"><span class="linenos">270</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Backward compatibility wrapper that implements ``py.path.local``</span>
</span><span id="TempdirFactory-271"><a href="#TempdirFactory-271"><span class="linenos">271</span></a><span class="sd">    for :class:`TempPathFactory`.</span>
</span><span id="TempdirFactory-272"><a href="#TempdirFactory-272"><span class="linenos">272</span></a>
</span><span id="TempdirFactory-273"><a href="#TempdirFactory-273"><span class="linenos">273</span></a><span class="sd">    .. note::</span>
</span><span id="TempdirFactory-274"><a href="#TempdirFactory-274"><span class="linenos">274</span></a><span class="sd">        These days, it is preferred to use ``tmp_path_factory``.</span>
</span><span id="TempdirFactory-275"><a href="#TempdirFactory-275"><span class="linenos">275</span></a>
</span><span id="TempdirFactory-276"><a href="#TempdirFactory-276"><span class="linenos">276</span></a><span class="sd">        :ref:`About the tmpdir and tmpdir_factory fixtures&lt;tmpdir and tmpdir_factory&gt;`.</span>
</span><span id="TempdirFactory-277"><a href="#TempdirFactory-277"><span class="linenos">277</span></a>
</span><span id="TempdirFactory-278"><a href="#TempdirFactory-278"><span class="linenos">278</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TempdirFactory-279"><a href="#TempdirFactory-279"><span class="linenos">279</span></a>
</span><span id="TempdirFactory-280"><a href="#TempdirFactory-280"><span class="linenos">280</span></a>    <span class="n">_tmppath_factory</span><span class="p">:</span> <span class="n">TempPathFactory</span>
</span><span id="TempdirFactory-281"><a href="#TempdirFactory-281"><span class="linenos">281</span></a>
</span><span id="TempdirFactory-282"><a href="#TempdirFactory-282"><span class="linenos">282</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="TempdirFactory-283"><a href="#TempdirFactory-283"><span class="linenos">283</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">tmppath_factory</span><span class="p">:</span> <span class="n">TempPathFactory</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TempdirFactory-284"><a href="#TempdirFactory-284"><span class="linenos">284</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempdirFactory-285"><a href="#TempdirFactory-285"><span class="linenos">285</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="TempdirFactory-286"><a href="#TempdirFactory-286"><span class="linenos">286</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tmppath_factory</span> <span class="o">=</span> <span class="n">tmppath_factory</span>
</span><span id="TempdirFactory-287"><a href="#TempdirFactory-287"><span class="linenos">287</span></a>
</span><span id="TempdirFactory-288"><a href="#TempdirFactory-288"><span class="linenos">288</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="TempdirFactory-289"><a href="#TempdirFactory-289"><span class="linenos">289</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Same as :meth:`TempPathFactory.mktemp`, but returns a ``py.path.local`` object.&quot;&quot;&quot;</span>
</span><span id="TempdirFactory-290"><a href="#TempdirFactory-290"><span class="linenos">290</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tmppath_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">numbered</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
</span><span id="TempdirFactory-291"><a href="#TempdirFactory-291"><span class="linenos">291</span></a>
</span><span id="TempdirFactory-292"><a href="#TempdirFactory-292"><span class="linenos">292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getbasetemp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="TempdirFactory-293"><a href="#TempdirFactory-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Same as :meth:`TempPathFactory.getbasetemp`, but returns a ``py.path.local`` object.&quot;&quot;&quot;</span>
</span><span id="TempdirFactory-294"><a href="#TempdirFactory-294"><span class="linenos">294</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tmppath_factory</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">()</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Backward compatibility wrapper that implements <code>py.path.local</code>
for <code><a href="#TempPathFactory">TempPathFactory</a></code>.</p>

<div class="alert note">

<p>These days, it is preferred to use <code>tmp_path_factory</code>.</p>

<p>:ref:<code>About the tmpdir and tmpdir_factory fixtures&lt;tmpdir and tmpdir_factory&gt;</code>.</p>

</div>
</div>


                            <div id="TempdirFactory.__init__" class="classattr">
                                        <input id="TempdirFactory.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">TempdirFactory</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">tmppath_factory</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">tmpdir</span><span class="o">.</span><span class="n">TempPathFactory</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="TempdirFactory.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempdirFactory.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempdirFactory.__init__-282"><a href="#TempdirFactory.__init__-282"><span class="linenos">282</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="TempdirFactory.__init__-283"><a href="#TempdirFactory.__init__-283"><span class="linenos">283</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">tmppath_factory</span><span class="p">:</span> <span class="n">TempPathFactory</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TempdirFactory.__init__-284"><a href="#TempdirFactory.__init__-284"><span class="linenos">284</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempdirFactory.__init__-285"><a href="#TempdirFactory.__init__-285"><span class="linenos">285</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="TempdirFactory.__init__-286"><a href="#TempdirFactory.__init__-286"><span class="linenos">286</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tmppath_factory</span> <span class="o">=</span> <span class="n">tmppath_factory</span>
</span></pre></div>


    

                            </div>
                            <div id="TempdirFactory.mktemp" class="classattr">
                                        <input id="TempdirFactory.mktemp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mktemp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">basename</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="TempdirFactory.mktemp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempdirFactory.mktemp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempdirFactory.mktemp-288"><a href="#TempdirFactory.mktemp-288"><span class="linenos">288</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="TempdirFactory.mktemp-289"><a href="#TempdirFactory.mktemp-289"><span class="linenos">289</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Same as :meth:`TempPathFactory.mktemp`, but returns a ``py.path.local`` object.&quot;&quot;&quot;</span>
</span><span id="TempdirFactory.mktemp-290"><a href="#TempdirFactory.mktemp-290"><span class="linenos">290</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tmppath_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">numbered</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Same as <code><a href="#TempPathFactory.mktemp">TempPathFactory.mktemp()</a></code>, but returns a <code>py.path.local</code> object.</p>
</div>


                            </div>
                            <div id="TempdirFactory.getbasetemp" class="classattr">
                                        <input id="TempdirFactory.getbasetemp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getbasetemp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="TempdirFactory.getbasetemp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempdirFactory.getbasetemp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempdirFactory.getbasetemp-292"><a href="#TempdirFactory.getbasetemp-292"><span class="linenos">292</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getbasetemp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="TempdirFactory.getbasetemp-293"><a href="#TempdirFactory.getbasetemp-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Same as :meth:`TempPathFactory.getbasetemp`, but returns a ``py.path.local`` object.&quot;&quot;&quot;</span>
</span><span id="TempdirFactory.getbasetemp-294"><a href="#TempdirFactory.getbasetemp-294"><span class="linenos">294</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tmppath_factory</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">()</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Same as <code><a href="#TempPathFactory.getbasetemp">TempPathFactory.getbasetemp()</a></code>, but returns a <code>py.path.local</code> object.</p>
</div>


                            </div>
                </section>
                <section id="TempPathFactory">
                            <input id="TempPathFactory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>
        <div class="decorator decorator-dataclasses.dataclass">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">TempPathFactory</span>:

                <label class="view-source-button" for="TempPathFactory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempPathFactory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempPathFactory-42"><a href="#TempPathFactory-42"><span class="linenos"> 42</span></a><span class="nd">@final</span>
</span><span id="TempPathFactory-43"><a href="#TempPathFactory-43"><span class="linenos"> 43</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="TempPathFactory-44"><a href="#TempPathFactory-44"><span class="linenos"> 44</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TempPathFactory</span><span class="p">:</span>
</span><span id="TempPathFactory-45"><a href="#TempPathFactory-45"><span class="linenos"> 45</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for temporary directories under the common base temp directory,</span>
</span><span id="TempPathFactory-46"><a href="#TempPathFactory-46"><span class="linenos"> 46</span></a><span class="sd">    as discussed at :ref:`temporary directory location and retention`.</span>
</span><span id="TempPathFactory-47"><a href="#TempPathFactory-47"><span class="linenos"> 47</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TempPathFactory-48"><a href="#TempPathFactory-48"><span class="linenos"> 48</span></a>
</span><span id="TempPathFactory-49"><a href="#TempPathFactory-49"><span class="linenos"> 49</span></a>    <span class="n">_given_basetemp</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="TempPathFactory-50"><a href="#TempPathFactory-50"><span class="linenos"> 50</span></a>    <span class="c1"># pluggy TagTracerSub, not currently exposed, so Any.</span>
</span><span id="TempPathFactory-51"><a href="#TempPathFactory-51"><span class="linenos"> 51</span></a>    <span class="n">_trace</span><span class="p">:</span> <span class="n">Any</span>
</span><span id="TempPathFactory-52"><a href="#TempPathFactory-52"><span class="linenos"> 52</span></a>    <span class="n">_basetemp</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="TempPathFactory-53"><a href="#TempPathFactory-53"><span class="linenos"> 53</span></a>    <span class="n">_retention_count</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="TempPathFactory-54"><a href="#TempPathFactory-54"><span class="linenos"> 54</span></a>    <span class="n">_retention_policy</span><span class="p">:</span> <span class="n">RetentionType</span>
</span><span id="TempPathFactory-55"><a href="#TempPathFactory-55"><span class="linenos"> 55</span></a>
</span><span id="TempPathFactory-56"><a href="#TempPathFactory-56"><span class="linenos"> 56</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="TempPathFactory-57"><a href="#TempPathFactory-57"><span class="linenos"> 57</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="TempPathFactory-58"><a href="#TempPathFactory-58"><span class="linenos"> 58</span></a>        <span class="n">given_basetemp</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="TempPathFactory-59"><a href="#TempPathFactory-59"><span class="linenos"> 59</span></a>        <span class="n">retention_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="TempPathFactory-60"><a href="#TempPathFactory-60"><span class="linenos"> 60</span></a>        <span class="n">retention_policy</span><span class="p">:</span> <span class="n">RetentionType</span><span class="p">,</span>
</span><span id="TempPathFactory-61"><a href="#TempPathFactory-61"><span class="linenos"> 61</span></a>        <span class="n">trace</span><span class="p">,</span>
</span><span id="TempPathFactory-62"><a href="#TempPathFactory-62"><span class="linenos"> 62</span></a>        <span class="n">basetemp</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="TempPathFactory-63"><a href="#TempPathFactory-63"><span class="linenos"> 63</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="TempPathFactory-64"><a href="#TempPathFactory-64"><span class="linenos"> 64</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="TempPathFactory-65"><a href="#TempPathFactory-65"><span class="linenos"> 65</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory-66"><a href="#TempPathFactory-66"><span class="linenos"> 66</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="TempPathFactory-67"><a href="#TempPathFactory-67"><span class="linenos"> 67</span></a>        <span class="k">if</span> <span class="n">given_basetemp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory-68"><a href="#TempPathFactory-68"><span class="linenos"> 68</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="TempPathFactory-69"><a href="#TempPathFactory-69"><span class="linenos"> 69</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TempPathFactory-70"><a href="#TempPathFactory-70"><span class="linenos"> 70</span></a>            <span class="c1"># Use os.path.abspath() to get absolute path instead of resolve() as it</span>
</span><span id="TempPathFactory-71"><a href="#TempPathFactory-71"><span class="linenos"> 71</span></a>            <span class="c1"># does not work the same in all platforms (see #4427).</span>
</span><span id="TempPathFactory-72"><a href="#TempPathFactory-72"><span class="linenos"> 72</span></a>            <span class="c1"># Path.absolute() exists, but it is not public (see https://bugs.python.org/issue25012).</span>
</span><span id="TempPathFactory-73"><a href="#TempPathFactory-73"><span class="linenos"> 73</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">given_basetemp</span><span class="p">)))</span>
</span><span id="TempPathFactory-74"><a href="#TempPathFactory-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_trace</span> <span class="o">=</span> <span class="n">trace</span>
</span><span id="TempPathFactory-75"><a href="#TempPathFactory-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_retention_count</span> <span class="o">=</span> <span class="n">retention_count</span>
</span><span id="TempPathFactory-76"><a href="#TempPathFactory-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_retention_policy</span> <span class="o">=</span> <span class="n">retention_policy</span>
</span><span id="TempPathFactory-77"><a href="#TempPathFactory-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span> <span class="o">=</span> <span class="n">basetemp</span>
</span><span id="TempPathFactory-78"><a href="#TempPathFactory-78"><span class="linenos"> 78</span></a>
</span><span id="TempPathFactory-79"><a href="#TempPathFactory-79"><span class="linenos"> 79</span></a>    <span class="nd">@classmethod</span>
</span><span id="TempPathFactory-80"><a href="#TempPathFactory-80"><span class="linenos"> 80</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_config</span><span class="p">(</span>
</span><span id="TempPathFactory-81"><a href="#TempPathFactory-81"><span class="linenos"> 81</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="TempPathFactory-82"><a href="#TempPathFactory-82"><span class="linenos"> 82</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span>
</span><span id="TempPathFactory-83"><a href="#TempPathFactory-83"><span class="linenos"> 83</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="TempPathFactory-84"><a href="#TempPathFactory-84"><span class="linenos"> 84</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="TempPathFactory-85"><a href="#TempPathFactory-85"><span class="linenos"> 85</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TempPathFactory</span><span class="p">:</span>
</span><span id="TempPathFactory-86"><a href="#TempPathFactory-86"><span class="linenos"> 86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a factory according to pytest configuration.</span>
</span><span id="TempPathFactory-87"><a href="#TempPathFactory-87"><span class="linenos"> 87</span></a>
</span><span id="TempPathFactory-88"><a href="#TempPathFactory-88"><span class="linenos"> 88</span></a><span class="sd">        :meta private:</span>
</span><span id="TempPathFactory-89"><a href="#TempPathFactory-89"><span class="linenos"> 89</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TempPathFactory-90"><a href="#TempPathFactory-90"><span class="linenos"> 90</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="TempPathFactory-91"><a href="#TempPathFactory-91"><span class="linenos"> 91</span></a>        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;tmp_path_retention_count&quot;</span><span class="p">))</span>
</span><span id="TempPathFactory-92"><a href="#TempPathFactory-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="TempPathFactory-93"><a href="#TempPathFactory-93"><span class="linenos"> 93</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="TempPathFactory-94"><a href="#TempPathFactory-94"><span class="linenos"> 94</span></a>                <span class="sa">f</span><span class="s2">&quot;tmp_path_retention_count must be &gt;= 0. Current input: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="TempPathFactory-95"><a href="#TempPathFactory-95"><span class="linenos"> 95</span></a>            <span class="p">)</span>
</span><span id="TempPathFactory-96"><a href="#TempPathFactory-96"><span class="linenos"> 96</span></a>
</span><span id="TempPathFactory-97"><a href="#TempPathFactory-97"><span class="linenos"> 97</span></a>        <span class="n">policy</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;tmp_path_retention_policy&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory-98"><a href="#TempPathFactory-98"><span class="linenos"> 98</span></a>        <span class="k">if</span> <span class="n">policy</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">):</span>
</span><span id="TempPathFactory-99"><a href="#TempPathFactory-99"><span class="linenos"> 99</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="TempPathFactory-100"><a href="#TempPathFactory-100"><span class="linenos">100</span></a>                <span class="sa">f</span><span class="s2">&quot;tmp_path_retention_policy must be either all, failed, none. Current input: </span><span class="si">{</span><span class="n">policy</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="TempPathFactory-101"><a href="#TempPathFactory-101"><span class="linenos">101</span></a>            <span class="p">)</span>
</span><span id="TempPathFactory-102"><a href="#TempPathFactory-102"><span class="linenos">102</span></a>
</span><span id="TempPathFactory-103"><a href="#TempPathFactory-103"><span class="linenos">103</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
</span><span id="TempPathFactory-104"><a href="#TempPathFactory-104"><span class="linenos">104</span></a>            <span class="n">given_basetemp</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">basetemp</span><span class="p">,</span>
</span><span id="TempPathFactory-105"><a href="#TempPathFactory-105"><span class="linenos">105</span></a>            <span class="n">trace</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmpdir&quot;</span><span class="p">),</span>
</span><span id="TempPathFactory-106"><a href="#TempPathFactory-106"><span class="linenos">106</span></a>            <span class="n">retention_count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
</span><span id="TempPathFactory-107"><a href="#TempPathFactory-107"><span class="linenos">107</span></a>            <span class="n">retention_policy</span><span class="o">=</span><span class="n">policy</span><span class="p">,</span>
</span><span id="TempPathFactory-108"><a href="#TempPathFactory-108"><span class="linenos">108</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="TempPathFactory-109"><a href="#TempPathFactory-109"><span class="linenos">109</span></a>        <span class="p">)</span>
</span><span id="TempPathFactory-110"><a href="#TempPathFactory-110"><span class="linenos">110</span></a>
</span><span id="TempPathFactory-111"><a href="#TempPathFactory-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_relative_to_basetemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="TempPathFactory-112"><a href="#TempPathFactory-112"><span class="linenos">112</span></a>        <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span id="TempPathFactory-113"><a href="#TempPathFactory-113"><span class="linenos">113</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">()</span> <span class="o">/</span> <span class="n">basename</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">():</span>
</span><span id="TempPathFactory-114"><a href="#TempPathFactory-114"><span class="linenos">114</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">basename</span><span class="si">}</span><span class="s2"> is not a normalized and relative path&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory-115"><a href="#TempPathFactory-115"><span class="linenos">115</span></a>        <span class="k">return</span> <span class="n">basename</span>
</span><span id="TempPathFactory-116"><a href="#TempPathFactory-116"><span class="linenos">116</span></a>
</span><span id="TempPathFactory-117"><a href="#TempPathFactory-117"><span class="linenos">117</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="TempPathFactory-118"><a href="#TempPathFactory-118"><span class="linenos">118</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new temporary directory managed by the factory.</span>
</span><span id="TempPathFactory-119"><a href="#TempPathFactory-119"><span class="linenos">119</span></a>
</span><span id="TempPathFactory-120"><a href="#TempPathFactory-120"><span class="linenos">120</span></a><span class="sd">        :param basename:</span>
</span><span id="TempPathFactory-121"><a href="#TempPathFactory-121"><span class="linenos">121</span></a><span class="sd">            Directory base name, must be a relative path.</span>
</span><span id="TempPathFactory-122"><a href="#TempPathFactory-122"><span class="linenos">122</span></a>
</span><span id="TempPathFactory-123"><a href="#TempPathFactory-123"><span class="linenos">123</span></a><span class="sd">        :param numbered:</span>
</span><span id="TempPathFactory-124"><a href="#TempPathFactory-124"><span class="linenos">124</span></a><span class="sd">            If ``True``, ensure the directory is unique by adding a numbered</span>
</span><span id="TempPathFactory-125"><a href="#TempPathFactory-125"><span class="linenos">125</span></a><span class="sd">            suffix greater than any existing one: ``basename=&quot;foo-&quot;`` and ``numbered=True``</span>
</span><span id="TempPathFactory-126"><a href="#TempPathFactory-126"><span class="linenos">126</span></a><span class="sd">            means that this function will create directories named ``&quot;foo-0&quot;``,</span>
</span><span id="TempPathFactory-127"><a href="#TempPathFactory-127"><span class="linenos">127</span></a><span class="sd">            ``&quot;foo-1&quot;``, ``&quot;foo-2&quot;`` and so on.</span>
</span><span id="TempPathFactory-128"><a href="#TempPathFactory-128"><span class="linenos">128</span></a>
</span><span id="TempPathFactory-129"><a href="#TempPathFactory-129"><span class="linenos">129</span></a><span class="sd">        :returns:</span>
</span><span id="TempPathFactory-130"><a href="#TempPathFactory-130"><span class="linenos">130</span></a><span class="sd">            The path to the new directory.</span>
</span><span id="TempPathFactory-131"><a href="#TempPathFactory-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TempPathFactory-132"><a href="#TempPathFactory-132"><span class="linenos">132</span></a>        <span class="n">basename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_relative_to_basetemp</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span id="TempPathFactory-133"><a href="#TempPathFactory-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">numbered</span><span class="p">:</span>
</span><span id="TempPathFactory-134"><a href="#TempPathFactory-134"><span class="linenos">134</span></a>            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span id="TempPathFactory-135"><a href="#TempPathFactory-135"><span class="linenos">135</span></a>            <span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="TempPathFactory-136"><a href="#TempPathFactory-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TempPathFactory-137"><a href="#TempPathFactory-137"><span class="linenos">137</span></a>            <span class="n">p</span> <span class="o">=</span> <span class="n">make_numbered_dir</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">(),</span> <span class="n">prefix</span><span class="o">=</span><span class="n">basename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="TempPathFactory-138"><a href="#TempPathFactory-138"><span class="linenos">138</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_trace</span><span class="p">(</span><span class="s2">&quot;mktemp&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
</span><span id="TempPathFactory-139"><a href="#TempPathFactory-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="n">p</span>
</span><span id="TempPathFactory-140"><a href="#TempPathFactory-140"><span class="linenos">140</span></a>
</span><span id="TempPathFactory-141"><a href="#TempPathFactory-141"><span class="linenos">141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getbasetemp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="TempPathFactory-142"><a href="#TempPathFactory-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the base temporary directory, creating it if needed.</span>
</span><span id="TempPathFactory-143"><a href="#TempPathFactory-143"><span class="linenos">143</span></a>
</span><span id="TempPathFactory-144"><a href="#TempPathFactory-144"><span class="linenos">144</span></a><span class="sd">        :returns:</span>
</span><span id="TempPathFactory-145"><a href="#TempPathFactory-145"><span class="linenos">145</span></a><span class="sd">            The base temporary directory.</span>
</span><span id="TempPathFactory-146"><a href="#TempPathFactory-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TempPathFactory-147"><a href="#TempPathFactory-147"><span class="linenos">147</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory-148"><a href="#TempPathFactory-148"><span class="linenos">148</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span>
</span><span id="TempPathFactory-149"><a href="#TempPathFactory-149"><span class="linenos">149</span></a>
</span><span id="TempPathFactory-150"><a href="#TempPathFactory-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory-151"><a href="#TempPathFactory-151"><span class="linenos">151</span></a>            <span class="n">basetemp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span>
</span><span id="TempPathFactory-152"><a href="#TempPathFactory-152"><span class="linenos">152</span></a>            <span class="k">if</span> <span class="n">basetemp</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="TempPathFactory-153"><a href="#TempPathFactory-153"><span class="linenos">153</span></a>                <span class="n">rm_rf</span><span class="p">(</span><span class="n">basetemp</span><span class="p">)</span>
</span><span id="TempPathFactory-154"><a href="#TempPathFactory-154"><span class="linenos">154</span></a>            <span class="n">basetemp</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="TempPathFactory-155"><a href="#TempPathFactory-155"><span class="linenos">155</span></a>            <span class="n">basetemp</span> <span class="o">=</span> <span class="n">basetemp</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="TempPathFactory-156"><a href="#TempPathFactory-156"><span class="linenos">156</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TempPathFactory-157"><a href="#TempPathFactory-157"><span class="linenos">157</span></a>            <span class="n">from_env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_DEBUG_TEMPROOT&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory-158"><a href="#TempPathFactory-158"><span class="linenos">158</span></a>            <span class="n">temproot</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">from_env</span> <span class="ow">or</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">())</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="TempPathFactory-159"><a href="#TempPathFactory-159"><span class="linenos">159</span></a>            <span class="n">user</span> <span class="o">=</span> <span class="n">get_user</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="TempPathFactory-160"><a href="#TempPathFactory-160"><span class="linenos">160</span></a>            <span class="c1"># use a sub-directory in the temproot to speed-up</span>
</span><span id="TempPathFactory-161"><a href="#TempPathFactory-161"><span class="linenos">161</span></a>            <span class="c1"># make_numbered_dir() call</span>
</span><span id="TempPathFactory-162"><a href="#TempPathFactory-162"><span class="linenos">162</span></a>            <span class="n">rootdir</span> <span class="o">=</span> <span class="n">temproot</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pytest-of-</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory-163"><a href="#TempPathFactory-163"><span class="linenos">163</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TempPathFactory-164"><a href="#TempPathFactory-164"><span class="linenos">164</span></a>                <span class="n">rootdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TempPathFactory-165"><a href="#TempPathFactory-165"><span class="linenos">165</span></a>            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
</span><span id="TempPathFactory-166"><a href="#TempPathFactory-166"><span class="linenos">166</span></a>                <span class="c1"># getuser() likely returned illegal characters for the platform, use unknown back off mechanism</span>
</span><span id="TempPathFactory-167"><a href="#TempPathFactory-167"><span class="linenos">167</span></a>                <span class="n">rootdir</span> <span class="o">=</span> <span class="n">temproot</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;pytest-of-unknown&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory-168"><a href="#TempPathFactory-168"><span class="linenos">168</span></a>                <span class="n">rootdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TempPathFactory-169"><a href="#TempPathFactory-169"><span class="linenos">169</span></a>            <span class="c1"># Because we use exist_ok=True with a predictable name, make sure</span>
</span><span id="TempPathFactory-170"><a href="#TempPathFactory-170"><span class="linenos">170</span></a>            <span class="c1"># we are the owners, to prevent any funny business (on unix, where</span>
</span><span id="TempPathFactory-171"><a href="#TempPathFactory-171"><span class="linenos">171</span></a>            <span class="c1"># temproot is usually shared).</span>
</span><span id="TempPathFactory-172"><a href="#TempPathFactory-172"><span class="linenos">172</span></a>            <span class="c1"># Also, to keep things private, fixup any world-readable temp</span>
</span><span id="TempPathFactory-173"><a href="#TempPathFactory-173"><span class="linenos">173</span></a>            <span class="c1"># rootdir&#39;s permissions. Historically 0o755 was used, so we can&#39;t</span>
</span><span id="TempPathFactory-174"><a href="#TempPathFactory-174"><span class="linenos">174</span></a>            <span class="c1"># just error out on this, at least for a while.</span>
</span><span id="TempPathFactory-175"><a href="#TempPathFactory-175"><span class="linenos">175</span></a>            <span class="n">uid</span> <span class="o">=</span> <span class="n">get_user_id</span><span class="p">()</span>
</span><span id="TempPathFactory-176"><a href="#TempPathFactory-176"><span class="linenos">176</span></a>            <span class="k">if</span> <span class="n">uid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory-177"><a href="#TempPathFactory-177"><span class="linenos">177</span></a>                <span class="n">rootdir_stat</span> <span class="o">=</span> <span class="n">rootdir</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span>
</span><span id="TempPathFactory-178"><a href="#TempPathFactory-178"><span class="linenos">178</span></a>                <span class="k">if</span> <span class="n">rootdir_stat</span><span class="o">.</span><span class="n">st_uid</span> <span class="o">!=</span> <span class="n">uid</span><span class="p">:</span>
</span><span id="TempPathFactory-179"><a href="#TempPathFactory-179"><span class="linenos">179</span></a>                    <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span>
</span><span id="TempPathFactory-180"><a href="#TempPathFactory-180"><span class="linenos">180</span></a>                        <span class="sa">f</span><span class="s2">&quot;The temporary directory </span><span class="si">{</span><span class="n">rootdir</span><span class="si">}</span><span class="s2"> is not owned by the current user. &quot;</span>
</span><span id="TempPathFactory-181"><a href="#TempPathFactory-181"><span class="linenos">181</span></a>                        <span class="s2">&quot;Fix this and try again.&quot;</span>
</span><span id="TempPathFactory-182"><a href="#TempPathFactory-182"><span class="linenos">182</span></a>                    <span class="p">)</span>
</span><span id="TempPathFactory-183"><a href="#TempPathFactory-183"><span class="linenos">183</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rootdir_stat</span><span class="o">.</span><span class="n">st_mode</span> <span class="o">&amp;</span> <span class="mo">0o077</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="TempPathFactory-184"><a href="#TempPathFactory-184"><span class="linenos">184</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="n">rootdir_stat</span><span class="o">.</span><span class="n">st_mode</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mo">0o077</span><span class="p">)</span>
</span><span id="TempPathFactory-185"><a href="#TempPathFactory-185"><span class="linenos">185</span></a>            <span class="n">keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retention_count</span>
</span><span id="TempPathFactory-186"><a href="#TempPathFactory-186"><span class="linenos">186</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retention_policy</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
</span><span id="TempPathFactory-187"><a href="#TempPathFactory-187"><span class="linenos">187</span></a>                <span class="n">keep</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="TempPathFactory-188"><a href="#TempPathFactory-188"><span class="linenos">188</span></a>            <span class="n">basetemp</span> <span class="o">=</span> <span class="n">make_numbered_dir_with_cleanup</span><span class="p">(</span>
</span><span id="TempPathFactory-189"><a href="#TempPathFactory-189"><span class="linenos">189</span></a>                <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;pytest-&quot;</span><span class="p">,</span>
</span><span id="TempPathFactory-190"><a href="#TempPathFactory-190"><span class="linenos">190</span></a>                <span class="n">root</span><span class="o">=</span><span class="n">rootdir</span><span class="p">,</span>
</span><span id="TempPathFactory-191"><a href="#TempPathFactory-191"><span class="linenos">191</span></a>                <span class="n">keep</span><span class="o">=</span><span class="n">keep</span><span class="p">,</span>
</span><span id="TempPathFactory-192"><a href="#TempPathFactory-192"><span class="linenos">192</span></a>                <span class="n">lock_timeout</span><span class="o">=</span><span class="n">LOCK_TIMEOUT</span><span class="p">,</span>
</span><span id="TempPathFactory-193"><a href="#TempPathFactory-193"><span class="linenos">193</span></a>                <span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">,</span>
</span><span id="TempPathFactory-194"><a href="#TempPathFactory-194"><span class="linenos">194</span></a>            <span class="p">)</span>
</span><span id="TempPathFactory-195"><a href="#TempPathFactory-195"><span class="linenos">195</span></a>        <span class="k">assert</span> <span class="n">basetemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">basetemp</span>
</span><span id="TempPathFactory-196"><a href="#TempPathFactory-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span> <span class="o">=</span> <span class="n">basetemp</span>
</span><span id="TempPathFactory-197"><a href="#TempPathFactory-197"><span class="linenos">197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_trace</span><span class="p">(</span><span class="s2">&quot;new basetemp&quot;</span><span class="p">,</span> <span class="n">basetemp</span><span class="p">)</span>
</span><span id="TempPathFactory-198"><a href="#TempPathFactory-198"><span class="linenos">198</span></a>        <span class="k">return</span> <span class="n">basetemp</span>
</span></pre></div>


            <div class="docstring"><p>Factory for temporary directories under the common base temp directory,
as discussed at :ref:<code>temporary directory location and retention</code>.</p>
</div>


                            <div id="TempPathFactory.__init__" class="classattr">
                                        <input id="TempPathFactory.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">TempPathFactory</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">given_basetemp</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">retention_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">retention_policy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;failed&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">trace</span>,</span><span class="param">	<span class="n">basetemp</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="TempPathFactory.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempPathFactory.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempPathFactory.__init__-56"><a href="#TempPathFactory.__init__-56"><span class="linenos">56</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="TempPathFactory.__init__-57"><a href="#TempPathFactory.__init__-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-58"><a href="#TempPathFactory.__init__-58"><span class="linenos">58</span></a>        <span class="n">given_basetemp</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-59"><a href="#TempPathFactory.__init__-59"><span class="linenos">59</span></a>        <span class="n">retention_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-60"><a href="#TempPathFactory.__init__-60"><span class="linenos">60</span></a>        <span class="n">retention_policy</span><span class="p">:</span> <span class="n">RetentionType</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-61"><a href="#TempPathFactory.__init__-61"><span class="linenos">61</span></a>        <span class="n">trace</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-62"><a href="#TempPathFactory.__init__-62"><span class="linenos">62</span></a>        <span class="n">basetemp</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-63"><a href="#TempPathFactory.__init__-63"><span class="linenos">63</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-64"><a href="#TempPathFactory.__init__-64"><span class="linenos">64</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="TempPathFactory.__init__-65"><a href="#TempPathFactory.__init__-65"><span class="linenos">65</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory.__init__-66"><a href="#TempPathFactory.__init__-66"><span class="linenos">66</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="TempPathFactory.__init__-67"><a href="#TempPathFactory.__init__-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="n">given_basetemp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory.__init__-68"><a href="#TempPathFactory.__init__-68"><span class="linenos">68</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="TempPathFactory.__init__-69"><a href="#TempPathFactory.__init__-69"><span class="linenos">69</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TempPathFactory.__init__-70"><a href="#TempPathFactory.__init__-70"><span class="linenos">70</span></a>            <span class="c1"># Use os.path.abspath() to get absolute path instead of resolve() as it</span>
</span><span id="TempPathFactory.__init__-71"><a href="#TempPathFactory.__init__-71"><span class="linenos">71</span></a>            <span class="c1"># does not work the same in all platforms (see #4427).</span>
</span><span id="TempPathFactory.__init__-72"><a href="#TempPathFactory.__init__-72"><span class="linenos">72</span></a>            <span class="c1"># Path.absolute() exists, but it is not public (see https://bugs.python.org/issue25012).</span>
</span><span id="TempPathFactory.__init__-73"><a href="#TempPathFactory.__init__-73"><span class="linenos">73</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">given_basetemp</span><span class="p">)))</span>
</span><span id="TempPathFactory.__init__-74"><a href="#TempPathFactory.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_trace</span> <span class="o">=</span> <span class="n">trace</span>
</span><span id="TempPathFactory.__init__-75"><a href="#TempPathFactory.__init__-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_retention_count</span> <span class="o">=</span> <span class="n">retention_count</span>
</span><span id="TempPathFactory.__init__-76"><a href="#TempPathFactory.__init__-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_retention_policy</span> <span class="o">=</span> <span class="n">retention_policy</span>
</span><span id="TempPathFactory.__init__-77"><a href="#TempPathFactory.__init__-77"><span class="linenos">77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span> <span class="o">=</span> <span class="n">basetemp</span>
</span></pre></div>


    

                            </div>
                            <div id="TempPathFactory.from_config" class="classattr">
                                        <input id="TempPathFactory.from_config-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_config</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">tmpdir</span><span class="o">.</span><span class="n">TempPathFactory</span>:</span></span>

                <label class="view-source-button" for="TempPathFactory.from_config-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempPathFactory.from_config"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempPathFactory.from_config-79"><a href="#TempPathFactory.from_config-79"><span class="linenos"> 79</span></a>    <span class="nd">@classmethod</span>
</span><span id="TempPathFactory.from_config-80"><a href="#TempPathFactory.from_config-80"><span class="linenos"> 80</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_config</span><span class="p">(</span>
</span><span id="TempPathFactory.from_config-81"><a href="#TempPathFactory.from_config-81"><span class="linenos"> 81</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-82"><a href="#TempPathFactory.from_config-82"><span class="linenos"> 82</span></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-83"><a href="#TempPathFactory.from_config-83"><span class="linenos"> 83</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-84"><a href="#TempPathFactory.from_config-84"><span class="linenos"> 84</span></a>        <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-85"><a href="#TempPathFactory.from_config-85"><span class="linenos"> 85</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TempPathFactory</span><span class="p">:</span>
</span><span id="TempPathFactory.from_config-86"><a href="#TempPathFactory.from_config-86"><span class="linenos"> 86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a factory according to pytest configuration.</span>
</span><span id="TempPathFactory.from_config-87"><a href="#TempPathFactory.from_config-87"><span class="linenos"> 87</span></a>
</span><span id="TempPathFactory.from_config-88"><a href="#TempPathFactory.from_config-88"><span class="linenos"> 88</span></a><span class="sd">        :meta private:</span>
</span><span id="TempPathFactory.from_config-89"><a href="#TempPathFactory.from_config-89"><span class="linenos"> 89</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TempPathFactory.from_config-90"><a href="#TempPathFactory.from_config-90"><span class="linenos"> 90</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="TempPathFactory.from_config-91"><a href="#TempPathFactory.from_config-91"><span class="linenos"> 91</span></a>        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;tmp_path_retention_count&quot;</span><span class="p">))</span>
</span><span id="TempPathFactory.from_config-92"><a href="#TempPathFactory.from_config-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="TempPathFactory.from_config-93"><a href="#TempPathFactory.from_config-93"><span class="linenos"> 93</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="TempPathFactory.from_config-94"><a href="#TempPathFactory.from_config-94"><span class="linenos"> 94</span></a>                <span class="sa">f</span><span class="s2">&quot;tmp_path_retention_count must be &gt;= 0. Current input: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="TempPathFactory.from_config-95"><a href="#TempPathFactory.from_config-95"><span class="linenos"> 95</span></a>            <span class="p">)</span>
</span><span id="TempPathFactory.from_config-96"><a href="#TempPathFactory.from_config-96"><span class="linenos"> 96</span></a>
</span><span id="TempPathFactory.from_config-97"><a href="#TempPathFactory.from_config-97"><span class="linenos"> 97</span></a>        <span class="n">policy</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getini</span><span class="p">(</span><span class="s2">&quot;tmp_path_retention_policy&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory.from_config-98"><a href="#TempPathFactory.from_config-98"><span class="linenos"> 98</span></a>        <span class="k">if</span> <span class="n">policy</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">):</span>
</span><span id="TempPathFactory.from_config-99"><a href="#TempPathFactory.from_config-99"><span class="linenos"> 99</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="TempPathFactory.from_config-100"><a href="#TempPathFactory.from_config-100"><span class="linenos">100</span></a>                <span class="sa">f</span><span class="s2">&quot;tmp_path_retention_policy must be either all, failed, none. Current input: </span><span class="si">{</span><span class="n">policy</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="TempPathFactory.from_config-101"><a href="#TempPathFactory.from_config-101"><span class="linenos">101</span></a>            <span class="p">)</span>
</span><span id="TempPathFactory.from_config-102"><a href="#TempPathFactory.from_config-102"><span class="linenos">102</span></a>
</span><span id="TempPathFactory.from_config-103"><a href="#TempPathFactory.from_config-103"><span class="linenos">103</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
</span><span id="TempPathFactory.from_config-104"><a href="#TempPathFactory.from_config-104"><span class="linenos">104</span></a>            <span class="n">given_basetemp</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">basetemp</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-105"><a href="#TempPathFactory.from_config-105"><span class="linenos">105</span></a>            <span class="n">trace</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmpdir&quot;</span><span class="p">),</span>
</span><span id="TempPathFactory.from_config-106"><a href="#TempPathFactory.from_config-106"><span class="linenos">106</span></a>            <span class="n">retention_count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-107"><a href="#TempPathFactory.from_config-107"><span class="linenos">107</span></a>            <span class="n">retention_policy</span><span class="o">=</span><span class="n">policy</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-108"><a href="#TempPathFactory.from_config-108"><span class="linenos">108</span></a>            <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="TempPathFactory.from_config-109"><a href="#TempPathFactory.from_config-109"><span class="linenos">109</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create a factory according to pytest configuration.</p>

<p>:meta private:</p>
</div>


                            </div>
                            <div id="TempPathFactory.mktemp" class="classattr">
                                        <input id="TempPathFactory.mktemp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mktemp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">basename</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="TempPathFactory.mktemp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempPathFactory.mktemp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempPathFactory.mktemp-117"><a href="#TempPathFactory.mktemp-117"><span class="linenos">117</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="TempPathFactory.mktemp-118"><a href="#TempPathFactory.mktemp-118"><span class="linenos">118</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new temporary directory managed by the factory.</span>
</span><span id="TempPathFactory.mktemp-119"><a href="#TempPathFactory.mktemp-119"><span class="linenos">119</span></a>
</span><span id="TempPathFactory.mktemp-120"><a href="#TempPathFactory.mktemp-120"><span class="linenos">120</span></a><span class="sd">        :param basename:</span>
</span><span id="TempPathFactory.mktemp-121"><a href="#TempPathFactory.mktemp-121"><span class="linenos">121</span></a><span class="sd">            Directory base name, must be a relative path.</span>
</span><span id="TempPathFactory.mktemp-122"><a href="#TempPathFactory.mktemp-122"><span class="linenos">122</span></a>
</span><span id="TempPathFactory.mktemp-123"><a href="#TempPathFactory.mktemp-123"><span class="linenos">123</span></a><span class="sd">        :param numbered:</span>
</span><span id="TempPathFactory.mktemp-124"><a href="#TempPathFactory.mktemp-124"><span class="linenos">124</span></a><span class="sd">            If ``True``, ensure the directory is unique by adding a numbered</span>
</span><span id="TempPathFactory.mktemp-125"><a href="#TempPathFactory.mktemp-125"><span class="linenos">125</span></a><span class="sd">            suffix greater than any existing one: ``basename=&quot;foo-&quot;`` and ``numbered=True``</span>
</span><span id="TempPathFactory.mktemp-126"><a href="#TempPathFactory.mktemp-126"><span class="linenos">126</span></a><span class="sd">            means that this function will create directories named ``&quot;foo-0&quot;``,</span>
</span><span id="TempPathFactory.mktemp-127"><a href="#TempPathFactory.mktemp-127"><span class="linenos">127</span></a><span class="sd">            ``&quot;foo-1&quot;``, ``&quot;foo-2&quot;`` and so on.</span>
</span><span id="TempPathFactory.mktemp-128"><a href="#TempPathFactory.mktemp-128"><span class="linenos">128</span></a>
</span><span id="TempPathFactory.mktemp-129"><a href="#TempPathFactory.mktemp-129"><span class="linenos">129</span></a><span class="sd">        :returns:</span>
</span><span id="TempPathFactory.mktemp-130"><a href="#TempPathFactory.mktemp-130"><span class="linenos">130</span></a><span class="sd">            The path to the new directory.</span>
</span><span id="TempPathFactory.mktemp-131"><a href="#TempPathFactory.mktemp-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TempPathFactory.mktemp-132"><a href="#TempPathFactory.mktemp-132"><span class="linenos">132</span></a>        <span class="n">basename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_relative_to_basetemp</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span id="TempPathFactory.mktemp-133"><a href="#TempPathFactory.mktemp-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">numbered</span><span class="p">:</span>
</span><span id="TempPathFactory.mktemp-134"><a href="#TempPathFactory.mktemp-134"><span class="linenos">134</span></a>            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
</span><span id="TempPathFactory.mktemp-135"><a href="#TempPathFactory.mktemp-135"><span class="linenos">135</span></a>            <span class="n">p</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="TempPathFactory.mktemp-136"><a href="#TempPathFactory.mktemp-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TempPathFactory.mktemp-137"><a href="#TempPathFactory.mktemp-137"><span class="linenos">137</span></a>            <span class="n">p</span> <span class="o">=</span> <span class="n">make_numbered_dir</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getbasetemp</span><span class="p">(),</span> <span class="n">prefix</span><span class="o">=</span><span class="n">basename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="TempPathFactory.mktemp-138"><a href="#TempPathFactory.mktemp-138"><span class="linenos">138</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_trace</span><span class="p">(</span><span class="s2">&quot;mktemp&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
</span><span id="TempPathFactory.mktemp-139"><a href="#TempPathFactory.mktemp-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="n">p</span>
</span></pre></div>


            <div class="docstring"><p>Create a new temporary directory managed by the factory.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>basename</strong>: 
Directory base name, must be a relative path.</p></li>
<li><p><strong>numbered</strong>: 
If <code>True</code>, ensure the directory is unique by adding a numbered
suffix greater than any existing one: <code>basename="foo-"</code> and <code>numbered=True</code>
means that this function will create directories named <code>"foo-0"</code>,
<code>"foo-1"</code>, <code>"foo-2"</code> and so on.</p></li>
</ul>

<p>:returns:
    The path to the new directory.</p>
</div>


                            </div>
                            <div id="TempPathFactory.getbasetemp" class="classattr">
                                        <input id="TempPathFactory.getbasetemp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getbasetemp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span>:</span></span>

                <label class="view-source-button" for="TempPathFactory.getbasetemp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TempPathFactory.getbasetemp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TempPathFactory.getbasetemp-141"><a href="#TempPathFactory.getbasetemp-141"><span class="linenos">141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getbasetemp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-142"><a href="#TempPathFactory.getbasetemp-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the base temporary directory, creating it if needed.</span>
</span><span id="TempPathFactory.getbasetemp-143"><a href="#TempPathFactory.getbasetemp-143"><span class="linenos">143</span></a>
</span><span id="TempPathFactory.getbasetemp-144"><a href="#TempPathFactory.getbasetemp-144"><span class="linenos">144</span></a><span class="sd">        :returns:</span>
</span><span id="TempPathFactory.getbasetemp-145"><a href="#TempPathFactory.getbasetemp-145"><span class="linenos">145</span></a><span class="sd">            The base temporary directory.</span>
</span><span id="TempPathFactory.getbasetemp-146"><a href="#TempPathFactory.getbasetemp-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TempPathFactory.getbasetemp-147"><a href="#TempPathFactory.getbasetemp-147"><span class="linenos">147</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-148"><a href="#TempPathFactory.getbasetemp-148"><span class="linenos">148</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span>
</span><span id="TempPathFactory.getbasetemp-149"><a href="#TempPathFactory.getbasetemp-149"><span class="linenos">149</span></a>
</span><span id="TempPathFactory.getbasetemp-150"><a href="#TempPathFactory.getbasetemp-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-151"><a href="#TempPathFactory.getbasetemp-151"><span class="linenos">151</span></a>            <span class="n">basetemp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_given_basetemp</span>
</span><span id="TempPathFactory.getbasetemp-152"><a href="#TempPathFactory.getbasetemp-152"><span class="linenos">152</span></a>            <span class="k">if</span> <span class="n">basetemp</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="TempPathFactory.getbasetemp-153"><a href="#TempPathFactory.getbasetemp-153"><span class="linenos">153</span></a>                <span class="n">rm_rf</span><span class="p">(</span><span class="n">basetemp</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-154"><a href="#TempPathFactory.getbasetemp-154"><span class="linenos">154</span></a>            <span class="n">basetemp</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-155"><a href="#TempPathFactory.getbasetemp-155"><span class="linenos">155</span></a>            <span class="n">basetemp</span> <span class="o">=</span> <span class="n">basetemp</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="TempPathFactory.getbasetemp-156"><a href="#TempPathFactory.getbasetemp-156"><span class="linenos">156</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-157"><a href="#TempPathFactory.getbasetemp-157"><span class="linenos">157</span></a>            <span class="n">from_env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYTEST_DEBUG_TEMPROOT&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-158"><a href="#TempPathFactory.getbasetemp-158"><span class="linenos">158</span></a>            <span class="n">temproot</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">from_env</span> <span class="ow">or</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">())</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="TempPathFactory.getbasetemp-159"><a href="#TempPathFactory.getbasetemp-159"><span class="linenos">159</span></a>            <span class="n">user</span> <span class="o">=</span> <span class="n">get_user</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="TempPathFactory.getbasetemp-160"><a href="#TempPathFactory.getbasetemp-160"><span class="linenos">160</span></a>            <span class="c1"># use a sub-directory in the temproot to speed-up</span>
</span><span id="TempPathFactory.getbasetemp-161"><a href="#TempPathFactory.getbasetemp-161"><span class="linenos">161</span></a>            <span class="c1"># make_numbered_dir() call</span>
</span><span id="TempPathFactory.getbasetemp-162"><a href="#TempPathFactory.getbasetemp-162"><span class="linenos">162</span></a>            <span class="n">rootdir</span> <span class="o">=</span> <span class="n">temproot</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pytest-of-</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-163"><a href="#TempPathFactory.getbasetemp-163"><span class="linenos">163</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-164"><a href="#TempPathFactory.getbasetemp-164"><span class="linenos">164</span></a>                <span class="n">rootdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-165"><a href="#TempPathFactory.getbasetemp-165"><span class="linenos">165</span></a>            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-166"><a href="#TempPathFactory.getbasetemp-166"><span class="linenos">166</span></a>                <span class="c1"># getuser() likely returned illegal characters for the platform, use unknown back off mechanism</span>
</span><span id="TempPathFactory.getbasetemp-167"><a href="#TempPathFactory.getbasetemp-167"><span class="linenos">167</span></a>                <span class="n">rootdir</span> <span class="o">=</span> <span class="n">temproot</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;pytest-of-unknown&quot;</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-168"><a href="#TempPathFactory.getbasetemp-168"><span class="linenos">168</span></a>                <span class="n">rootdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-169"><a href="#TempPathFactory.getbasetemp-169"><span class="linenos">169</span></a>            <span class="c1"># Because we use exist_ok=True with a predictable name, make sure</span>
</span><span id="TempPathFactory.getbasetemp-170"><a href="#TempPathFactory.getbasetemp-170"><span class="linenos">170</span></a>            <span class="c1"># we are the owners, to prevent any funny business (on unix, where</span>
</span><span id="TempPathFactory.getbasetemp-171"><a href="#TempPathFactory.getbasetemp-171"><span class="linenos">171</span></a>            <span class="c1"># temproot is usually shared).</span>
</span><span id="TempPathFactory.getbasetemp-172"><a href="#TempPathFactory.getbasetemp-172"><span class="linenos">172</span></a>            <span class="c1"># Also, to keep things private, fixup any world-readable temp</span>
</span><span id="TempPathFactory.getbasetemp-173"><a href="#TempPathFactory.getbasetemp-173"><span class="linenos">173</span></a>            <span class="c1"># rootdir&#39;s permissions. Historically 0o755 was used, so we can&#39;t</span>
</span><span id="TempPathFactory.getbasetemp-174"><a href="#TempPathFactory.getbasetemp-174"><span class="linenos">174</span></a>            <span class="c1"># just error out on this, at least for a while.</span>
</span><span id="TempPathFactory.getbasetemp-175"><a href="#TempPathFactory.getbasetemp-175"><span class="linenos">175</span></a>            <span class="n">uid</span> <span class="o">=</span> <span class="n">get_user_id</span><span class="p">()</span>
</span><span id="TempPathFactory.getbasetemp-176"><a href="#TempPathFactory.getbasetemp-176"><span class="linenos">176</span></a>            <span class="k">if</span> <span class="n">uid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-177"><a href="#TempPathFactory.getbasetemp-177"><span class="linenos">177</span></a>                <span class="n">rootdir_stat</span> <span class="o">=</span> <span class="n">rootdir</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span>
</span><span id="TempPathFactory.getbasetemp-178"><a href="#TempPathFactory.getbasetemp-178"><span class="linenos">178</span></a>                <span class="k">if</span> <span class="n">rootdir_stat</span><span class="o">.</span><span class="n">st_uid</span> <span class="o">!=</span> <span class="n">uid</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-179"><a href="#TempPathFactory.getbasetemp-179"><span class="linenos">179</span></a>                    <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span>
</span><span id="TempPathFactory.getbasetemp-180"><a href="#TempPathFactory.getbasetemp-180"><span class="linenos">180</span></a>                        <span class="sa">f</span><span class="s2">&quot;The temporary directory </span><span class="si">{</span><span class="n">rootdir</span><span class="si">}</span><span class="s2"> is not owned by the current user. &quot;</span>
</span><span id="TempPathFactory.getbasetemp-181"><a href="#TempPathFactory.getbasetemp-181"><span class="linenos">181</span></a>                        <span class="s2">&quot;Fix this and try again.&quot;</span>
</span><span id="TempPathFactory.getbasetemp-182"><a href="#TempPathFactory.getbasetemp-182"><span class="linenos">182</span></a>                    <span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-183"><a href="#TempPathFactory.getbasetemp-183"><span class="linenos">183</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rootdir_stat</span><span class="o">.</span><span class="n">st_mode</span> <span class="o">&amp;</span> <span class="mo">0o077</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-184"><a href="#TempPathFactory.getbasetemp-184"><span class="linenos">184</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="n">rootdir_stat</span><span class="o">.</span><span class="n">st_mode</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mo">0o077</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-185"><a href="#TempPathFactory.getbasetemp-185"><span class="linenos">185</span></a>            <span class="n">keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retention_count</span>
</span><span id="TempPathFactory.getbasetemp-186"><a href="#TempPathFactory.getbasetemp-186"><span class="linenos">186</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retention_policy</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
</span><span id="TempPathFactory.getbasetemp-187"><a href="#TempPathFactory.getbasetemp-187"><span class="linenos">187</span></a>                <span class="n">keep</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="TempPathFactory.getbasetemp-188"><a href="#TempPathFactory.getbasetemp-188"><span class="linenos">188</span></a>            <span class="n">basetemp</span> <span class="o">=</span> <span class="n">make_numbered_dir_with_cleanup</span><span class="p">(</span>
</span><span id="TempPathFactory.getbasetemp-189"><a href="#TempPathFactory.getbasetemp-189"><span class="linenos">189</span></a>                <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;pytest-&quot;</span><span class="p">,</span>
</span><span id="TempPathFactory.getbasetemp-190"><a href="#TempPathFactory.getbasetemp-190"><span class="linenos">190</span></a>                <span class="n">root</span><span class="o">=</span><span class="n">rootdir</span><span class="p">,</span>
</span><span id="TempPathFactory.getbasetemp-191"><a href="#TempPathFactory.getbasetemp-191"><span class="linenos">191</span></a>                <span class="n">keep</span><span class="o">=</span><span class="n">keep</span><span class="p">,</span>
</span><span id="TempPathFactory.getbasetemp-192"><a href="#TempPathFactory.getbasetemp-192"><span class="linenos">192</span></a>                <span class="n">lock_timeout</span><span class="o">=</span><span class="n">LOCK_TIMEOUT</span><span class="p">,</span>
</span><span id="TempPathFactory.getbasetemp-193"><a href="#TempPathFactory.getbasetemp-193"><span class="linenos">193</span></a>                <span class="n">mode</span><span class="o">=</span><span class="mo">0o700</span><span class="p">,</span>
</span><span id="TempPathFactory.getbasetemp-194"><a href="#TempPathFactory.getbasetemp-194"><span class="linenos">194</span></a>            <span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-195"><a href="#TempPathFactory.getbasetemp-195"><span class="linenos">195</span></a>        <span class="k">assert</span> <span class="n">basetemp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">basetemp</span>
</span><span id="TempPathFactory.getbasetemp-196"><a href="#TempPathFactory.getbasetemp-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_basetemp</span> <span class="o">=</span> <span class="n">basetemp</span>
</span><span id="TempPathFactory.getbasetemp-197"><a href="#TempPathFactory.getbasetemp-197"><span class="linenos">197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_trace</span><span class="p">(</span><span class="s2">&quot;new basetemp&quot;</span><span class="p">,</span> <span class="n">basetemp</span><span class="p">)</span>
</span><span id="TempPathFactory.getbasetemp-198"><a href="#TempPathFactory.getbasetemp-198"><span class="linenos">198</span></a>        <span class="k">return</span> <span class="n">basetemp</span>
</span></pre></div>


            <div class="docstring"><p>Return the base temporary directory, creating it if needed.</p>

<p>:returns:
    The base temporary directory.</p>
</div>


                            </div>
                </section>
                <section id="Testdir">
                            <input id="Testdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">Testdir</span>:

                <label class="view-source-button" for="Testdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir-42"><a href="#Testdir-42"><span class="linenos"> 42</span></a><span class="nd">@final</span>
</span><span id="Testdir-43"><a href="#Testdir-43"><span class="linenos"> 43</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Testdir</span><span class="p">:</span>
</span><span id="Testdir-44"><a href="#Testdir-44"><span class="linenos"> 44</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Testdir-45"><a href="#Testdir-45"><span class="linenos"> 45</span></a><span class="sd">    Similar to :class:`Pytester`, but this class works with legacy legacy_path objects instead.</span>
</span><span id="Testdir-46"><a href="#Testdir-46"><span class="linenos"> 46</span></a>
</span><span id="Testdir-47"><a href="#Testdir-47"><span class="linenos"> 47</span></a><span class="sd">    All methods just forward to an internal :class:`Pytester` instance, converting results</span>
</span><span id="Testdir-48"><a href="#Testdir-48"><span class="linenos"> 48</span></a><span class="sd">    to `legacy_path` objects as necessary.</span>
</span><span id="Testdir-49"><a href="#Testdir-49"><span class="linenos"> 49</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Testdir-50"><a href="#Testdir-50"><span class="linenos"> 50</span></a>
</span><span id="Testdir-51"><a href="#Testdir-51"><span class="linenos"> 51</span></a>    <span class="n">__test__</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Testdir-52"><a href="#Testdir-52"><span class="linenos"> 52</span></a>
</span><span id="Testdir-53"><a href="#Testdir-53"><span class="linenos"> 53</span></a>    <span class="n">CLOSE_STDIN</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">Pytester</span><span class="o">.</span><span class="n">CLOSE_STDIN</span>
</span><span id="Testdir-54"><a href="#Testdir-54"><span class="linenos"> 54</span></a>    <span class="n">TimeoutExpired</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">Pytester</span><span class="o">.</span><span class="n">TimeoutExpired</span>
</span><span id="Testdir-55"><a href="#Testdir-55"><span class="linenos"> 55</span></a>
</span><span id="Testdir-56"><a href="#Testdir-56"><span class="linenos"> 56</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pytester</span><span class="p">:</span> <span class="n">Pytester</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir-57"><a href="#Testdir-57"><span class="linenos"> 57</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Testdir-58"><a href="#Testdir-58"><span class="linenos"> 58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span> <span class="o">=</span> <span class="n">pytester</span>
</span><span id="Testdir-59"><a href="#Testdir-59"><span class="linenos"> 59</span></a>
</span><span id="Testdir-60"><a href="#Testdir-60"><span class="linenos"> 60</span></a>    <span class="nd">@property</span>
</span><span id="Testdir-61"><a href="#Testdir-61"><span class="linenos"> 61</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tmpdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-62"><a href="#Testdir-62"><span class="linenos"> 62</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporary directory where tests are executed.&quot;&quot;&quot;</span>
</span><span id="Testdir-63"><a href="#Testdir-63"><span class="linenos"> 63</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="Testdir-64"><a href="#Testdir-64"><span class="linenos"> 64</span></a>
</span><span id="Testdir-65"><a href="#Testdir-65"><span class="linenos"> 65</span></a>    <span class="nd">@property</span>
</span><span id="Testdir-66"><a href="#Testdir-66"><span class="linenos"> 66</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test_tmproot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-67"><a href="#Testdir-67"><span class="linenos"> 67</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_test_tmproot</span><span class="p">)</span>
</span><span id="Testdir-68"><a href="#Testdir-68"><span class="linenos"> 68</span></a>
</span><span id="Testdir-69"><a href="#Testdir-69"><span class="linenos"> 69</span></a>    <span class="nd">@property</span>
</span><span id="Testdir-70"><a href="#Testdir-70"><span class="linenos"> 70</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Testdir-71"><a href="#Testdir-71"><span class="linenos"> 71</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_request</span>
</span><span id="Testdir-72"><a href="#Testdir-72"><span class="linenos"> 72</span></a>
</span><span id="Testdir-73"><a href="#Testdir-73"><span class="linenos"> 73</span></a>    <span class="nd">@property</span>
</span><span id="Testdir-74"><a href="#Testdir-74"><span class="linenos"> 74</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plugins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Testdir-75"><a href="#Testdir-75"><span class="linenos"> 75</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">plugins</span>
</span><span id="Testdir-76"><a href="#Testdir-76"><span class="linenos"> 76</span></a>
</span><span id="Testdir-77"><a href="#Testdir-77"><span class="linenos"> 77</span></a>    <span class="nd">@plugins</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Testdir-78"><a href="#Testdir-78"><span class="linenos"> 78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plugins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugins</span><span class="p">):</span>
</span><span id="Testdir-79"><a href="#Testdir-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">plugins</span> <span class="o">=</span> <span class="n">plugins</span>
</span><span id="Testdir-80"><a href="#Testdir-80"><span class="linenos"> 80</span></a>
</span><span id="Testdir-81"><a href="#Testdir-81"><span class="linenos"> 81</span></a>    <span class="nd">@property</span>
</span><span id="Testdir-82"><a href="#Testdir-82"><span class="linenos"> 82</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">monkeypatch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MonkeyPatch</span><span class="p">:</span>
</span><span id="Testdir-83"><a href="#Testdir-83"><span class="linenos"> 83</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_monkeypatch</span>
</span><span id="Testdir-84"><a href="#Testdir-84"><span class="linenos"> 84</span></a>
</span><span id="Testdir-85"><a href="#Testdir-85"><span class="linenos"> 85</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">make_hook_recorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Testdir-86"><a href="#Testdir-86"><span class="linenos"> 86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.make_hook_recorder`.&quot;&quot;&quot;</span>
</span><span id="Testdir-87"><a href="#Testdir-87"><span class="linenos"> 87</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">make_hook_recorder</span><span class="p">(</span><span class="n">pluginmanager</span><span class="p">)</span>
</span><span id="Testdir-88"><a href="#Testdir-88"><span class="linenos"> 88</span></a>
</span><span id="Testdir-89"><a href="#Testdir-89"><span class="linenos"> 89</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir-90"><a href="#Testdir-90"><span class="linenos"> 90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.chdir`.&quot;&quot;&quot;</span>
</span><span id="Testdir-91"><a href="#Testdir-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">chdir</span><span class="p">()</span>
</span><span id="Testdir-92"><a href="#Testdir-92"><span class="linenos"> 92</span></a>
</span><span id="Testdir-93"><a href="#Testdir-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir-94"><a href="#Testdir-94"><span class="linenos"> 94</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_finalize</span><span class="p">()</span>
</span><span id="Testdir-95"><a href="#Testdir-95"><span class="linenos"> 95</span></a>
</span><span id="Testdir-96"><a href="#Testdir-96"><span class="linenos"> 96</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ext</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-97"><a href="#Testdir-97"><span class="linenos"> 97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makefile`.&quot;&quot;&quot;</span>
</span><span id="Testdir-98"><a href="#Testdir-98"><span class="linenos"> 98</span></a>        <span class="k">if</span> <span class="n">ext</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ext</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
</span><span id="Testdir-99"><a href="#Testdir-99"><span class="linenos"> 99</span></a>            <span class="c1"># pytester.makefile is going to throw a ValueError in a way that</span>
</span><span id="Testdir-100"><a href="#Testdir-100"><span class="linenos">100</span></a>            <span class="c1"># testdir.makefile did not, because</span>
</span><span id="Testdir-101"><a href="#Testdir-101"><span class="linenos">101</span></a>            <span class="c1"># pathlib.Path is stricter suffixes than py.path</span>
</span><span id="Testdir-102"><a href="#Testdir-102"><span class="linenos">102</span></a>            <span class="c1"># This ext arguments is likely user error, but since testdir has</span>
</span><span id="Testdir-103"><a href="#Testdir-103"><span class="linenos">103</span></a>            <span class="c1"># allowed this, we will prepend &quot;.&quot; as a workaround to avoid breaking</span>
</span><span id="Testdir-104"><a href="#Testdir-104"><span class="linenos">104</span></a>            <span class="c1"># testdir usage that worked before</span>
</span><span id="Testdir-105"><a href="#Testdir-105"><span class="linenos">105</span></a>            <span class="n">ext</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">ext</span>
</span><span id="Testdir-106"><a href="#Testdir-106"><span class="linenos">106</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="Testdir-107"><a href="#Testdir-107"><span class="linenos">107</span></a>
</span><span id="Testdir-108"><a href="#Testdir-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeconftest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-109"><a href="#Testdir-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makeconftest`.&quot;&quot;&quot;</span>
</span><span id="Testdir-110"><a href="#Testdir-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makeconftest</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
</span><span id="Testdir-111"><a href="#Testdir-111"><span class="linenos">111</span></a>
</span><span id="Testdir-112"><a href="#Testdir-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-113"><a href="#Testdir-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makeini`.&quot;&quot;&quot;</span>
</span><span id="Testdir-114"><a href="#Testdir-114"><span class="linenos">114</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makeini</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
</span><span id="Testdir-115"><a href="#Testdir-115"><span class="linenos">115</span></a>
</span><span id="Testdir-116"><a href="#Testdir-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getinicfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SectionWrapper</span><span class="p">:</span>
</span><span id="Testdir-117"><a href="#Testdir-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getinicfg`.&quot;&quot;&quot;</span>
</span><span id="Testdir-118"><a href="#Testdir-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getinicfg</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Testdir-119"><a href="#Testdir-119"><span class="linenos">119</span></a>
</span><span id="Testdir-120"><a href="#Testdir-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyprojecttoml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-121"><a href="#Testdir-121"><span class="linenos">121</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makepyprojecttoml`.&quot;&quot;&quot;</span>
</span><span id="Testdir-122"><a href="#Testdir-122"><span class="linenos">122</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makepyprojecttoml</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
</span><span id="Testdir-123"><a href="#Testdir-123"><span class="linenos">123</span></a>
</span><span id="Testdir-124"><a href="#Testdir-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-125"><a href="#Testdir-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makepyfile`.&quot;&quot;&quot;</span>
</span><span id="Testdir-126"><a href="#Testdir-126"><span class="linenos">126</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="Testdir-127"><a href="#Testdir-127"><span class="linenos">127</span></a>
</span><span id="Testdir-128"><a href="#Testdir-128"><span class="linenos">128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maketxtfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-129"><a href="#Testdir-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.maketxtfile`.&quot;&quot;&quot;</span>
</span><span id="Testdir-130"><a href="#Testdir-130"><span class="linenos">130</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="Testdir-131"><a href="#Testdir-131"><span class="linenos">131</span></a>
</span><span id="Testdir-132"><a href="#Testdir-132"><span class="linenos">132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">syspathinsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir-133"><a href="#Testdir-133"><span class="linenos">133</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.syspathinsert`.&quot;&quot;&quot;</span>
</span><span id="Testdir-134"><a href="#Testdir-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">syspathinsert</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Testdir-135"><a href="#Testdir-135"><span class="linenos">135</span></a>
</span><span id="Testdir-136"><a href="#Testdir-136"><span class="linenos">136</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-137"><a href="#Testdir-137"><span class="linenos">137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.mkdir`.&quot;&quot;&quot;</span>
</span><span id="Testdir-138"><a href="#Testdir-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span><span id="Testdir-139"><a href="#Testdir-139"><span class="linenos">139</span></a>
</span><span id="Testdir-140"><a href="#Testdir-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkpydir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-141"><a href="#Testdir-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.mkpydir`.&quot;&quot;&quot;</span>
</span><span id="Testdir-142"><a href="#Testdir-142"><span class="linenos">142</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">mkpydir</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span><span id="Testdir-143"><a href="#Testdir-143"><span class="linenos">143</span></a>
</span><span id="Testdir-144"><a href="#Testdir-144"><span class="linenos">144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_example</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir-145"><a href="#Testdir-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.copy_example`.&quot;&quot;&quot;</span>
</span><span id="Testdir-146"><a href="#Testdir-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">copy_example</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span><span id="Testdir-147"><a href="#Testdir-147"><span class="linenos">147</span></a>
</span><span id="Testdir-148"><a href="#Testdir-148"><span class="linenos">148</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir-149"><a href="#Testdir-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getnode`.&quot;&quot;&quot;</span>
</span><span id="Testdir-150"><a href="#Testdir-150"><span class="linenos">150</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getnode</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="Testdir-151"><a href="#Testdir-151"><span class="linenos">151</span></a>
</span><span id="Testdir-152"><a href="#Testdir-152"><span class="linenos">152</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getpathnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</span><span id="Testdir-153"><a href="#Testdir-153"><span class="linenos">153</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getpathnode`.&quot;&quot;&quot;</span>
</span><span id="Testdir-154"><a href="#Testdir-154"><span class="linenos">154</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getpathnode</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Testdir-155"><a href="#Testdir-155"><span class="linenos">155</span></a>
</span><span id="Testdir-156"><a href="#Testdir-156"><span class="linenos">156</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colitems</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Testdir-157"><a href="#Testdir-157"><span class="linenos">157</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.genitems`.&quot;&quot;&quot;</span>
</span><span id="Testdir-158"><a href="#Testdir-158"><span class="linenos">158</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">colitems</span><span class="p">)</span>
</span><span id="Testdir-159"><a href="#Testdir-159"><span class="linenos">159</span></a>
</span><span id="Testdir-160"><a href="#Testdir-160"><span class="linenos">160</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
</span><span id="Testdir-161"><a href="#Testdir-161"><span class="linenos">161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runitem`.&quot;&quot;&quot;</span>
</span><span id="Testdir-162"><a href="#Testdir-162"><span class="linenos">162</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runitem</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Testdir-163"><a href="#Testdir-163"><span class="linenos">163</span></a>
</span><span id="Testdir-164"><a href="#Testdir-164"><span class="linenos">164</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_runsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdlineargs</span><span class="p">):</span>
</span><span id="Testdir-165"><a href="#Testdir-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.inline_runsource`.&quot;&quot;&quot;</span>
</span><span id="Testdir-166"><a href="#Testdir-166"><span class="linenos">166</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">inline_runsource</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdlineargs</span><span class="p">)</span>
</span><span id="Testdir-167"><a href="#Testdir-167"><span class="linenos">167</span></a>
</span><span id="Testdir-168"><a href="#Testdir-168"><span class="linenos">168</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span><span id="Testdir-169"><a href="#Testdir-169"><span class="linenos">169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.inline_genitems`.&quot;&quot;&quot;</span>
</span><span id="Testdir-170"><a href="#Testdir-170"><span class="linenos">170</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">inline_genitems</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Testdir-171"><a href="#Testdir-171"><span class="linenos">171</span></a>
</span><span id="Testdir-172"><a href="#Testdir-172"><span class="linenos">172</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="p">(),</span> <span class="n">no_reraise_ctrlc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Testdir-173"><a href="#Testdir-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.inline_run`.&quot;&quot;&quot;</span>
</span><span id="Testdir-174"><a href="#Testdir-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span>
</span><span id="Testdir-175"><a href="#Testdir-175"><span class="linenos">175</span></a>            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="n">plugins</span><span class="p">,</span> <span class="n">no_reraise_ctrlc</span><span class="o">=</span><span class="n">no_reraise_ctrlc</span>
</span><span id="Testdir-176"><a href="#Testdir-176"><span class="linenos">176</span></a>        <span class="p">)</span>
</span><span id="Testdir-177"><a href="#Testdir-177"><span class="linenos">177</span></a>
</span><span id="Testdir-178"><a href="#Testdir-178"><span class="linenos">178</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_inprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir-179"><a href="#Testdir-179"><span class="linenos">179</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpytest_inprocess`.&quot;&quot;&quot;</span>
</span><span id="Testdir-180"><a href="#Testdir-180"><span class="linenos">180</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpytest_inprocess</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Testdir-181"><a href="#Testdir-181"><span class="linenos">181</span></a>
</span><span id="Testdir-182"><a href="#Testdir-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir-183"><a href="#Testdir-183"><span class="linenos">183</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpytest`.&quot;&quot;&quot;</span>
</span><span id="Testdir-184"><a href="#Testdir-184"><span class="linenos">184</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpytest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Testdir-185"><a href="#Testdir-185"><span class="linenos">185</span></a>
</span><span id="Testdir-186"><a href="#Testdir-186"><span class="linenos">186</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Testdir-187"><a href="#Testdir-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.parseconfig`.&quot;&quot;&quot;</span>
</span><span id="Testdir-188"><a href="#Testdir-188"><span class="linenos">188</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">parseconfig</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Testdir-189"><a href="#Testdir-189"><span class="linenos">189</span></a>
</span><span id="Testdir-190"><a href="#Testdir-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Testdir-191"><a href="#Testdir-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.parseconfigure`.&quot;&quot;&quot;</span>
</span><span id="Testdir-192"><a href="#Testdir-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">parseconfigure</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Testdir-193"><a href="#Testdir-193"><span class="linenos">193</span></a>
</span><span id="Testdir-194"><a href="#Testdir-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">funcname</span><span class="o">=</span><span class="s2">&quot;test_func&quot;</span><span class="p">):</span>
</span><span id="Testdir-195"><a href="#Testdir-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getitem`.&quot;&quot;&quot;</span>
</span><span id="Testdir-196"><a href="#Testdir-196"><span class="linenos">196</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getitem</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">funcname</span><span class="p">)</span>
</span><span id="Testdir-197"><a href="#Testdir-197"><span class="linenos">197</span></a>
</span><span id="Testdir-198"><a href="#Testdir-198"><span class="linenos">198</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
</span><span id="Testdir-199"><a href="#Testdir-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getitems`.&quot;&quot;&quot;</span>
</span><span id="Testdir-200"><a href="#Testdir-200"><span class="linenos">200</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getitems</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span><span id="Testdir-201"><a href="#Testdir-201"><span class="linenos">201</span></a>
</span><span id="Testdir-202"><a href="#Testdir-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getmodulecol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">configargs</span><span class="o">=</span><span class="p">(),</span> <span class="n">withinit</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Testdir-203"><a href="#Testdir-203"><span class="linenos">203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getmodulecol`.&quot;&quot;&quot;</span>
</span><span id="Testdir-204"><a href="#Testdir-204"><span class="linenos">204</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getmodulecol</span><span class="p">(</span>
</span><span id="Testdir-205"><a href="#Testdir-205"><span class="linenos">205</span></a>            <span class="n">source</span><span class="p">,</span> <span class="n">configargs</span><span class="o">=</span><span class="n">configargs</span><span class="p">,</span> <span class="n">withinit</span><span class="o">=</span><span class="n">withinit</span>
</span><span id="Testdir-206"><a href="#Testdir-206"><span class="linenos">206</span></a>        <span class="p">)</span>
</span><span id="Testdir-207"><a href="#Testdir-207"><span class="linenos">207</span></a>
</span><span id="Testdir-208"><a href="#Testdir-208"><span class="linenos">208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modcol</span><span class="p">:</span> <span class="n">Collector</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir-209"><a href="#Testdir-209"><span class="linenos">209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.collect_by_name`.&quot;&quot;&quot;</span>
</span><span id="Testdir-210"><a href="#Testdir-210"><span class="linenos">210</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">collect_by_name</span><span class="p">(</span><span class="n">modcol</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Testdir-211"><a href="#Testdir-211"><span class="linenos">211</span></a>
</span><span id="Testdir-212"><a href="#Testdir-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">popen</span><span class="p">(</span>
</span><span id="Testdir-213"><a href="#Testdir-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Testdir-214"><a href="#Testdir-214"><span class="linenos">214</span></a>        <span class="n">cmdargs</span><span class="p">,</span>
</span><span id="Testdir-215"><a href="#Testdir-215"><span class="linenos">215</span></a>        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Testdir-216"><a href="#Testdir-216"><span class="linenos">216</span></a>        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Testdir-217"><a href="#Testdir-217"><span class="linenos">217</span></a>        <span class="n">stdin</span><span class="o">=</span><span class="n">CLOSE_STDIN</span><span class="p">,</span>
</span><span id="Testdir-218"><a href="#Testdir-218"><span class="linenos">218</span></a>        <span class="o">**</span><span class="n">kw</span><span class="p">,</span>
</span><span id="Testdir-219"><a href="#Testdir-219"><span class="linenos">219</span></a>    <span class="p">):</span>
</span><span id="Testdir-220"><a href="#Testdir-220"><span class="linenos">220</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.popen`.&quot;&quot;&quot;</span>
</span><span id="Testdir-221"><a href="#Testdir-221"><span class="linenos">221</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">,</span> <span class="n">stdin</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="Testdir-222"><a href="#Testdir-222"><span class="linenos">222</span></a>
</span><span id="Testdir-223"><a href="#Testdir-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">CLOSE_STDIN</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir-224"><a href="#Testdir-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.run`.&quot;&quot;&quot;</span>
</span><span id="Testdir-225"><a href="#Testdir-225"><span class="linenos">225</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">*</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">stdin</span><span class="p">)</span>
</span><span id="Testdir-226"><a href="#Testdir-226"><span class="linenos">226</span></a>
</span><span id="Testdir-227"><a href="#Testdir-227"><span class="linenos">227</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir-228"><a href="#Testdir-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpython`.&quot;&quot;&quot;</span>
</span><span id="Testdir-229"><a href="#Testdir-229"><span class="linenos">229</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpython</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
</span><span id="Testdir-230"><a href="#Testdir-230"><span class="linenos">230</span></a>
</span><span id="Testdir-231"><a href="#Testdir-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython_c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="Testdir-232"><a href="#Testdir-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpython_c`.&quot;&quot;&quot;</span>
</span><span id="Testdir-233"><a href="#Testdir-233"><span class="linenos">233</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpython_c</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span id="Testdir-234"><a href="#Testdir-234"><span class="linenos">234</span></a>
</span><span id="Testdir-235"><a href="#Testdir-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_subprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir-236"><a href="#Testdir-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpytest_subprocess`.&quot;&quot;&quot;</span>
</span><span id="Testdir-237"><a href="#Testdir-237"><span class="linenos">237</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpytest_subprocess</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="Testdir-238"><a href="#Testdir-238"><span class="linenos">238</span></a>
</span><span id="Testdir-239"><a href="#Testdir-239"><span class="linenos">239</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn_pytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Testdir-240"><a href="#Testdir-240"><span class="linenos">240</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.spawn_pytest`.&quot;&quot;&quot;</span>
</span><span id="Testdir-241"><a href="#Testdir-241"><span class="linenos">241</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">spawn_pytest</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span><span id="Testdir-242"><a href="#Testdir-242"><span class="linenos">242</span></a>
</span><span id="Testdir-243"><a href="#Testdir-243"><span class="linenos">243</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Testdir-244"><a href="#Testdir-244"><span class="linenos">244</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.spawn`.&quot;&quot;&quot;</span>
</span><span id="Testdir-245"><a href="#Testdir-245"><span class="linenos">245</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span><span id="Testdir-246"><a href="#Testdir-246"><span class="linenos">246</span></a>
</span><span id="Testdir-247"><a href="#Testdir-247"><span class="linenos">247</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Testdir-248"><a href="#Testdir-248"><span class="linenos">248</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Testdir </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="Testdir-249"><a href="#Testdir-249"><span class="linenos">249</span></a>
</span><span id="Testdir-250"><a href="#Testdir-250"><span class="linenos">250</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Testdir-251"><a href="#Testdir-251"><span class="linenos">251</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmpdir</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Similar to <code><a href="#Pytester">Pytester</a></code>, but this class works with legacy legacy_path objects instead.</p>

<p>All methods just forward to an internal <code><a href="#Pytester">Pytester</a></code> instance, converting results
to <code>legacy_path</code> objects as necessary.</p>
</div>


                            <div id="Testdir.__init__" class="classattr">
                                        <input id="Testdir.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Testdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">pytester</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">Pytester</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Testdir.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.__init__-56"><a href="#Testdir.__init__-56"><span class="linenos">56</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pytester</span><span class="p">:</span> <span class="n">Pytester</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir.__init__-57"><a href="#Testdir.__init__-57"><span class="linenos">57</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="Testdir.__init__-58"><a href="#Testdir.__init__-58"><span class="linenos">58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span> <span class="o">=</span> <span class="n">pytester</span>
</span></pre></div>


    

                            </div>
                            <div id="Testdir.CLOSE_STDIN" class="classattr">
                                <div class="attr variable">
            <span class="name">CLOSE_STDIN</span><span class="annotation">: Final</span>        =
<span class="default_value">&lt;NotSetType.token: 0&gt;</span>

        
    </div>
    <a class="headerlink" href="#Testdir.CLOSE_STDIN"></a>
    
    

                            </div>
                            <div id="Testdir.tmpdir" class="classattr">
                                        <input id="Testdir.tmpdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tmpdir</span><span class="annotation">: _pytest._py.path.LocalPath</span>

                <label class="view-source-button" for="Testdir.tmpdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.tmpdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.tmpdir-60"><a href="#Testdir.tmpdir-60"><span class="linenos">60</span></a>    <span class="nd">@property</span>
</span><span id="Testdir.tmpdir-61"><a href="#Testdir.tmpdir-61"><span class="linenos">61</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tmpdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.tmpdir-62"><a href="#Testdir.tmpdir-62"><span class="linenos">62</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporary directory where tests are executed.&quot;&quot;&quot;</span>
</span><span id="Testdir.tmpdir-63"><a href="#Testdir.tmpdir-63"><span class="linenos">63</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Temporary directory where tests are executed.</p>
</div>


                            </div>
                            <div id="Testdir.test_tmproot" class="classattr">
                                        <input id="Testdir.test_tmproot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">test_tmproot</span><span class="annotation">: _pytest._py.path.LocalPath</span>

                <label class="view-source-button" for="Testdir.test_tmproot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.test_tmproot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.test_tmproot-65"><a href="#Testdir.test_tmproot-65"><span class="linenos">65</span></a>    <span class="nd">@property</span>
</span><span id="Testdir.test_tmproot-66"><a href="#Testdir.test_tmproot-66"><span class="linenos">66</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test_tmproot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.test_tmproot-67"><a href="#Testdir.test_tmproot-67"><span class="linenos">67</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_test_tmproot</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Testdir.request" class="classattr">
                                        <input id="Testdir.request-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">request</span>

                <label class="view-source-button" for="Testdir.request-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.request"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.request-69"><a href="#Testdir.request-69"><span class="linenos">69</span></a>    <span class="nd">@property</span>
</span><span id="Testdir.request-70"><a href="#Testdir.request-70"><span class="linenos">70</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Testdir.request-71"><a href="#Testdir.request-71"><span class="linenos">71</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_request</span>
</span></pre></div>


    

                            </div>
                            <div id="Testdir.plugins" class="classattr">
                                        <input id="Testdir.plugins-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">plugins</span>

                <label class="view-source-button" for="Testdir.plugins-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.plugins"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.plugins-73"><a href="#Testdir.plugins-73"><span class="linenos">73</span></a>    <span class="nd">@property</span>
</span><span id="Testdir.plugins-74"><a href="#Testdir.plugins-74"><span class="linenos">74</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plugins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Testdir.plugins-75"><a href="#Testdir.plugins-75"><span class="linenos">75</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">plugins</span>
</span></pre></div>


    

                            </div>
                            <div id="Testdir.monkeypatch" class="classattr">
                                        <input id="Testdir.monkeypatch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">monkeypatch</span><span class="annotation">: _pytest.monkeypatch.MonkeyPatch</span>

                <label class="view-source-button" for="Testdir.monkeypatch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.monkeypatch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.monkeypatch-81"><a href="#Testdir.monkeypatch-81"><span class="linenos">81</span></a>    <span class="nd">@property</span>
</span><span id="Testdir.monkeypatch-82"><a href="#Testdir.monkeypatch-82"><span class="linenos">82</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">monkeypatch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MonkeyPatch</span><span class="p">:</span>
</span><span id="Testdir.monkeypatch-83"><a href="#Testdir.monkeypatch-83"><span class="linenos">83</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_monkeypatch</span>
</span></pre></div>


    

                            </div>
                            <div id="Testdir.make_hook_recorder" class="classattr">
                                        <input id="Testdir.make_hook_recorder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">make_hook_recorder</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pluginmanager</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">HookRecorder</span>:</span></span>

                <label class="view-source-button" for="Testdir.make_hook_recorder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.make_hook_recorder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.make_hook_recorder-85"><a href="#Testdir.make_hook_recorder-85"><span class="linenos">85</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">make_hook_recorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HookRecorder</span><span class="p">:</span>
</span><span id="Testdir.make_hook_recorder-86"><a href="#Testdir.make_hook_recorder-86"><span class="linenos">86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.make_hook_recorder`.&quot;&quot;&quot;</span>
</span><span id="Testdir.make_hook_recorder-87"><a href="#Testdir.make_hook_recorder-87"><span class="linenos">87</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">make_hook_recorder</span><span class="p">(</span><span class="n">pluginmanager</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.make_hook_recorder">Pytester.make_hook_recorder()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.chdir" class="classattr">
                                        <input id="Testdir.chdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Testdir.chdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.chdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.chdir-89"><a href="#Testdir.chdir-89"><span class="linenos">89</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir.chdir-90"><a href="#Testdir.chdir-90"><span class="linenos">90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.chdir`.&quot;&quot;&quot;</span>
</span><span id="Testdir.chdir-91"><a href="#Testdir.chdir-91"><span class="linenos">91</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">chdir</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.chdir">Pytester.chdir()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.finalize" class="classattr">
                                        <input id="Testdir.finalize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">finalize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Testdir.finalize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.finalize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.finalize-93"><a href="#Testdir.finalize-93"><span class="linenos">93</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir.finalize-94"><a href="#Testdir.finalize-94"><span class="linenos">94</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">_finalize</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Testdir.makefile" class="classattr">
                                        <input id="Testdir.makefile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makefile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">ext</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.makefile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.makefile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.makefile-96"><a href="#Testdir.makefile-96"><span class="linenos"> 96</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ext</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.makefile-97"><a href="#Testdir.makefile-97"><span class="linenos"> 97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makefile`.&quot;&quot;&quot;</span>
</span><span id="Testdir.makefile-98"><a href="#Testdir.makefile-98"><span class="linenos"> 98</span></a>        <span class="k">if</span> <span class="n">ext</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ext</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
</span><span id="Testdir.makefile-99"><a href="#Testdir.makefile-99"><span class="linenos"> 99</span></a>            <span class="c1"># pytester.makefile is going to throw a ValueError in a way that</span>
</span><span id="Testdir.makefile-100"><a href="#Testdir.makefile-100"><span class="linenos">100</span></a>            <span class="c1"># testdir.makefile did not, because</span>
</span><span id="Testdir.makefile-101"><a href="#Testdir.makefile-101"><span class="linenos">101</span></a>            <span class="c1"># pathlib.Path is stricter suffixes than py.path</span>
</span><span id="Testdir.makefile-102"><a href="#Testdir.makefile-102"><span class="linenos">102</span></a>            <span class="c1"># This ext arguments is likely user error, but since testdir has</span>
</span><span id="Testdir.makefile-103"><a href="#Testdir.makefile-103"><span class="linenos">103</span></a>            <span class="c1"># allowed this, we will prepend &quot;.&quot; as a workaround to avoid breaking</span>
</span><span id="Testdir.makefile-104"><a href="#Testdir.makefile-104"><span class="linenos">104</span></a>            <span class="c1"># testdir usage that worked before</span>
</span><span id="Testdir.makefile-105"><a href="#Testdir.makefile-105"><span class="linenos">105</span></a>            <span class="n">ext</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">ext</span>
</span><span id="Testdir.makefile-106"><a href="#Testdir.makefile-106"><span class="linenos">106</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.makefile">Pytester.makefile()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.makeconftest" class="classattr">
                                        <input id="Testdir.makeconftest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makeconftest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.makeconftest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.makeconftest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.makeconftest-108"><a href="#Testdir.makeconftest-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeconftest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.makeconftest-109"><a href="#Testdir.makeconftest-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makeconftest`.&quot;&quot;&quot;</span>
</span><span id="Testdir.makeconftest-110"><a href="#Testdir.makeconftest-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makeconftest</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.makeconftest">Pytester.makeconftest()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.makeini" class="classattr">
                                        <input id="Testdir.makeini-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makeini</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.makeini-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.makeini"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.makeini-112"><a href="#Testdir.makeini-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeini</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.makeini-113"><a href="#Testdir.makeini-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makeini`.&quot;&quot;&quot;</span>
</span><span id="Testdir.makeini-114"><a href="#Testdir.makeini-114"><span class="linenos">114</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makeini</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.makeini">Pytester.makeini()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.getinicfg" class="classattr">
                                        <input id="Testdir.getinicfg-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getinicfg</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">iniconfig</span><span class="o">.</span><span class="n">SectionWrapper</span>:</span></span>

                <label class="view-source-button" for="Testdir.getinicfg-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.getinicfg"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.getinicfg-116"><a href="#Testdir.getinicfg-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getinicfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SectionWrapper</span><span class="p">:</span>
</span><span id="Testdir.getinicfg-117"><a href="#Testdir.getinicfg-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getinicfg`.&quot;&quot;&quot;</span>
</span><span id="Testdir.getinicfg-118"><a href="#Testdir.getinicfg-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getinicfg</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.getinicfg">Pytester.getinicfg()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.makepyprojecttoml" class="classattr">
                                        <input id="Testdir.makepyprojecttoml-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makepyprojecttoml</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.makepyprojecttoml-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.makepyprojecttoml"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.makepyprojecttoml-120"><a href="#Testdir.makepyprojecttoml-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyprojecttoml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.makepyprojecttoml-121"><a href="#Testdir.makepyprojecttoml-121"><span class="linenos">121</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makepyprojecttoml`.&quot;&quot;&quot;</span>
</span><span id="Testdir.makepyprojecttoml-122"><a href="#Testdir.makepyprojecttoml-122"><span class="linenos">122</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makepyprojecttoml</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.makepyprojecttoml">Pytester.makepyprojecttoml()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.makepyfile" class="classattr">
                                        <input id="Testdir.makepyfile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">makepyfile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.makepyfile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.makepyfile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.makepyfile-124"><a href="#Testdir.makepyfile-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makepyfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.makepyfile-125"><a href="#Testdir.makepyfile-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.makepyfile`.&quot;&quot;&quot;</span>
</span><span id="Testdir.makepyfile-126"><a href="#Testdir.makepyfile-126"><span class="linenos">126</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.makepyfile">Pytester.makepyfile()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.maketxtfile" class="classattr">
                                        <input id="Testdir.maketxtfile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">maketxtfile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.maketxtfile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.maketxtfile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.maketxtfile-128"><a href="#Testdir.maketxtfile-128"><span class="linenos">128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maketxtfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.maketxtfile-129"><a href="#Testdir.maketxtfile-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.maketxtfile`.&quot;&quot;&quot;</span>
</span><span id="Testdir.maketxtfile-130"><a href="#Testdir.maketxtfile-130"><span class="linenos">130</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.maketxtfile">Pytester.maketxtfile()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.syspathinsert" class="classattr">
                                        <input id="Testdir.syspathinsert-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">syspathinsert</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Testdir.syspathinsert-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.syspathinsert"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.syspathinsert-132"><a href="#Testdir.syspathinsert-132"><span class="linenos">132</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">syspathinsert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir.syspathinsert-133"><a href="#Testdir.syspathinsert-133"><span class="linenos">133</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.syspathinsert`.&quot;&quot;&quot;</span>
</span><span id="Testdir.syspathinsert-134"><a href="#Testdir.syspathinsert-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">syspathinsert</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.syspathinsert">Pytester.syspathinsert()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.mkdir" class="classattr">
                                        <input id="Testdir.mkdir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mkdir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.mkdir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.mkdir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.mkdir-136"><a href="#Testdir.mkdir-136"><span class="linenos">136</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.mkdir-137"><a href="#Testdir.mkdir-137"><span class="linenos">137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.mkdir`.&quot;&quot;&quot;</span>
</span><span id="Testdir.mkdir-138"><a href="#Testdir.mkdir-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.mkdir">Pytester.mkdir()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.mkpydir" class="classattr">
                                        <input id="Testdir.mkpydir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mkpydir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.mkpydir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.mkpydir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.mkpydir-140"><a href="#Testdir.mkpydir-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mkpydir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.mkpydir-141"><a href="#Testdir.mkpydir-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.mkpydir`.&quot;&quot;&quot;</span>
</span><span id="Testdir.mkpydir-142"><a href="#Testdir.mkpydir-142"><span class="linenos">142</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">mkpydir</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.mkpydir">Pytester.mkpydir()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.copy_example" class="classattr">
                                        <input id="Testdir.copy_example-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_example</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">_py</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">LocalPath</span>:</span></span>

                <label class="view-source-button" for="Testdir.copy_example-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.copy_example"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.copy_example-144"><a href="#Testdir.copy_example-144"><span class="linenos">144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy_example</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LEGACY_PATH</span><span class="p">:</span>
</span><span id="Testdir.copy_example-145"><a href="#Testdir.copy_example-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.copy_example`.&quot;&quot;&quot;</span>
</span><span id="Testdir.copy_example-146"><a href="#Testdir.copy_example-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="n">legacy_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">copy_example</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.copy_example">Pytester.copy_example()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.getnode" class="classattr">
                                        <input id="Testdir.getnode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getnode</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>,</span><span class="param">	<span class="n">arg</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Testdir.getnode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.getnode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.getnode-148"><a href="#Testdir.getnode-148"><span class="linenos">148</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir.getnode-149"><a href="#Testdir.getnode-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getnode`.&quot;&quot;&quot;</span>
</span><span id="Testdir.getnode-150"><a href="#Testdir.getnode-150"><span class="linenos">150</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getnode</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.getnode">Pytester.getnode()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.getpathnode" class="classattr">
                                        <input id="Testdir.getpathnode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getpathnode</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.getpathnode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.getpathnode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.getpathnode-152"><a href="#Testdir.getpathnode-152"><span class="linenos">152</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getpathnode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</span><span id="Testdir.getpathnode-153"><a href="#Testdir.getpathnode-153"><span class="linenos">153</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getpathnode`.&quot;&quot;&quot;</span>
</span><span id="Testdir.getpathnode-154"><a href="#Testdir.getpathnode-154"><span class="linenos">154</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getpathnode</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.getpathnode">Pytester.getpathnode()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.genitems" class="classattr">
                                        <input id="Testdir.genitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genitems</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">colitems</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Testdir.genitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.genitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.genitems-156"><a href="#Testdir.genitems-156"><span class="linenos">156</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colitems</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Item</span><span class="p">]:</span>
</span><span id="Testdir.genitems-157"><a href="#Testdir.genitems-157"><span class="linenos">157</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.genitems`.&quot;&quot;&quot;</span>
</span><span id="Testdir.genitems-158"><a href="#Testdir.genitems-158"><span class="linenos">158</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">genitems</span><span class="p">(</span><span class="n">colitems</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.genitems">Pytester.genitems()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.runitem" class="classattr">
                                        <input id="Testdir.runitem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runitem</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.runitem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.runitem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.runitem-160"><a href="#Testdir.runitem-160"><span class="linenos">160</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
</span><span id="Testdir.runitem-161"><a href="#Testdir.runitem-161"><span class="linenos">161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runitem`.&quot;&quot;&quot;</span>
</span><span id="Testdir.runitem-162"><a href="#Testdir.runitem-162"><span class="linenos">162</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runitem</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.runitem">Pytester.runitem()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.inline_runsource" class="classattr">
                                        <input id="Testdir.inline_runsource-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inline_runsource</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span>, </span><span class="param"><span class="o">*</span><span class="n">cmdlineargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.inline_runsource-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.inline_runsource"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.inline_runsource-164"><a href="#Testdir.inline_runsource-164"><span class="linenos">164</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_runsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdlineargs</span><span class="p">):</span>
</span><span id="Testdir.inline_runsource-165"><a href="#Testdir.inline_runsource-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.inline_runsource`.&quot;&quot;&quot;</span>
</span><span id="Testdir.inline_runsource-166"><a href="#Testdir.inline_runsource-166"><span class="linenos">166</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">inline_runsource</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdlineargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.inline_runsource">Pytester.inline_runsource()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.inline_genitems" class="classattr">
                                        <input id="Testdir.inline_genitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inline_genitems</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.inline_genitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.inline_genitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.inline_genitems-168"><a href="#Testdir.inline_genitems-168"><span class="linenos">168</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_genitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span><span id="Testdir.inline_genitems-169"><a href="#Testdir.inline_genitems-169"><span class="linenos">169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.inline_genitems`.&quot;&quot;&quot;</span>
</span><span id="Testdir.inline_genitems-170"><a href="#Testdir.inline_genitems-170"><span class="linenos">170</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">inline_genitems</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.inline_genitems">Pytester.inline_genitems()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.inline_run" class="classattr">
                                        <input id="Testdir.inline_run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inline_run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="n">plugins</span><span class="o">=</span><span class="p">()</span>, </span><span class="param"><span class="n">no_reraise_ctrlc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.inline_run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.inline_run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.inline_run-172"><a href="#Testdir.inline_run-172"><span class="linenos">172</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inline_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="p">(),</span> <span class="n">no_reraise_ctrlc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Testdir.inline_run-173"><a href="#Testdir.inline_run-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.inline_run`.&quot;&quot;&quot;</span>
</span><span id="Testdir.inline_run-174"><a href="#Testdir.inline_run-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">inline_run</span><span class="p">(</span>
</span><span id="Testdir.inline_run-175"><a href="#Testdir.inline_run-175"><span class="linenos">175</span></a>            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="n">plugins</span><span class="p">,</span> <span class="n">no_reraise_ctrlc</span><span class="o">=</span><span class="n">no_reraise_ctrlc</span>
</span><span id="Testdir.inline_run-176"><a href="#Testdir.inline_run-176"><span class="linenos">176</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.inline_run">Pytester.inline_run()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.runpytest_inprocess" class="classattr">
                                        <input id="Testdir.runpytest_inprocess-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpytest_inprocess</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Testdir.runpytest_inprocess-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.runpytest_inprocess"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.runpytest_inprocess-178"><a href="#Testdir.runpytest_inprocess-178"><span class="linenos">178</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_inprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir.runpytest_inprocess-179"><a href="#Testdir.runpytest_inprocess-179"><span class="linenos">179</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpytest_inprocess`.&quot;&quot;&quot;</span>
</span><span id="Testdir.runpytest_inprocess-180"><a href="#Testdir.runpytest_inprocess-180"><span class="linenos">180</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpytest_inprocess</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.runpytest_inprocess">Pytester.runpytest_inprocess()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.runpytest" class="classattr">
                                        <input id="Testdir.runpytest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpytest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Testdir.runpytest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.runpytest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.runpytest-182"><a href="#Testdir.runpytest-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir.runpytest-183"><a href="#Testdir.runpytest-183"><span class="linenos">183</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpytest`.&quot;&quot;&quot;</span>
</span><span id="Testdir.runpytest-184"><a href="#Testdir.runpytest-184"><span class="linenos">184</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpytest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.runpytest">Pytester.runpytest()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.parseconfig" class="classattr">
                                        <input id="Testdir.parseconfig-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parseconfig</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>:</span></span>

                <label class="view-source-button" for="Testdir.parseconfig-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.parseconfig"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.parseconfig-186"><a href="#Testdir.parseconfig-186"><span class="linenos">186</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Testdir.parseconfig-187"><a href="#Testdir.parseconfig-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.parseconfig`.&quot;&quot;&quot;</span>
</span><span id="Testdir.parseconfig-188"><a href="#Testdir.parseconfig-188"><span class="linenos">188</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">parseconfig</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.parseconfig">Pytester.parseconfig()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.parseconfigure" class="classattr">
                                        <input id="Testdir.parseconfigure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parseconfigure</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Config</span>:</span></span>

                <label class="view-source-button" for="Testdir.parseconfigure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.parseconfigure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.parseconfigure-190"><a href="#Testdir.parseconfigure-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parseconfigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Config</span><span class="p">:</span>
</span><span id="Testdir.parseconfigure-191"><a href="#Testdir.parseconfigure-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.parseconfigure`.&quot;&quot;&quot;</span>
</span><span id="Testdir.parseconfigure-192"><a href="#Testdir.parseconfigure-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">parseconfigure</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.parseconfigure">Pytester.parseconfigure()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.getitem" class="classattr">
                                        <input id="Testdir.getitem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getitem</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span>, </span><span class="param"><span class="n">funcname</span><span class="o">=</span><span class="s1">&#39;test_func&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.getitem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.getitem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.getitem-194"><a href="#Testdir.getitem-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">funcname</span><span class="o">=</span><span class="s2">&quot;test_func&quot;</span><span class="p">):</span>
</span><span id="Testdir.getitem-195"><a href="#Testdir.getitem-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getitem`.&quot;&quot;&quot;</span>
</span><span id="Testdir.getitem-196"><a href="#Testdir.getitem-196"><span class="linenos">196</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getitem</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">funcname</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.getitem">Pytester.getitem()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.getitems" class="classattr">
                                        <input id="Testdir.getitems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getitems</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.getitems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.getitems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.getitems-198"><a href="#Testdir.getitems-198"><span class="linenos">198</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getitems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
</span><span id="Testdir.getitems-199"><a href="#Testdir.getitems-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getitems`.&quot;&quot;&quot;</span>
</span><span id="Testdir.getitems-200"><a href="#Testdir.getitems-200"><span class="linenos">200</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getitems</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.getitems">Pytester.getitems()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.getmodulecol" class="classattr">
                                        <input id="Testdir.getmodulecol-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getmodulecol</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">source</span>, </span><span class="param"><span class="n">configargs</span><span class="o">=</span><span class="p">()</span>, </span><span class="param"><span class="n">withinit</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.getmodulecol-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.getmodulecol"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.getmodulecol-202"><a href="#Testdir.getmodulecol-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getmodulecol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">configargs</span><span class="o">=</span><span class="p">(),</span> <span class="n">withinit</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Testdir.getmodulecol-203"><a href="#Testdir.getmodulecol-203"><span class="linenos">203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.getmodulecol`.&quot;&quot;&quot;</span>
</span><span id="Testdir.getmodulecol-204"><a href="#Testdir.getmodulecol-204"><span class="linenos">204</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">getmodulecol</span><span class="p">(</span>
</span><span id="Testdir.getmodulecol-205"><a href="#Testdir.getmodulecol-205"><span class="linenos">205</span></a>            <span class="n">source</span><span class="p">,</span> <span class="n">configargs</span><span class="o">=</span><span class="n">configargs</span><span class="p">,</span> <span class="n">withinit</span><span class="o">=</span><span class="n">withinit</span>
</span><span id="Testdir.getmodulecol-206"><a href="#Testdir.getmodulecol-206"><span class="linenos">206</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.getmodulecol">Pytester.getmodulecol()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.collect_by_name" class="classattr">
                                        <input id="Testdir.collect_by_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collect_by_name</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">modcol</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span> <span class="o">|</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Testdir.collect_by_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.collect_by_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.collect_by_name-208"><a href="#Testdir.collect_by_name-208"><span class="linenos">208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">collect_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modcol</span><span class="p">:</span> <span class="n">Collector</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Item</span> <span class="o">|</span> <span class="n">Collector</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Testdir.collect_by_name-209"><a href="#Testdir.collect_by_name-209"><span class="linenos">209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.collect_by_name`.&quot;&quot;&quot;</span>
</span><span id="Testdir.collect_by_name-210"><a href="#Testdir.collect_by_name-210"><span class="linenos">210</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">collect_by_name</span><span class="p">(</span><span class="n">modcol</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.collect_by_name">Pytester.collect_by_name()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.popen" class="classattr">
                                        <input id="Testdir.popen-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">popen</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">cmdargs</span>,</span><span class="param">	<span class="n">stdout</span><span class="o">=-</span><span class="mi">1</span>,</span><span class="param">	<span class="n">stderr</span><span class="o">=-</span><span class="mi">1</span>,</span><span class="param">	<span class="n">stdin</span><span class="o">=&lt;</span><span class="n">NotSetType</span><span class="o">.</span><span class="n">token</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span>,</span><span class="param">	<span class="o">**</span><span class="n">kw</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.popen-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.popen"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.popen-212"><a href="#Testdir.popen-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">popen</span><span class="p">(</span>
</span><span id="Testdir.popen-213"><a href="#Testdir.popen-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Testdir.popen-214"><a href="#Testdir.popen-214"><span class="linenos">214</span></a>        <span class="n">cmdargs</span><span class="p">,</span>
</span><span id="Testdir.popen-215"><a href="#Testdir.popen-215"><span class="linenos">215</span></a>        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Testdir.popen-216"><a href="#Testdir.popen-216"><span class="linenos">216</span></a>        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Testdir.popen-217"><a href="#Testdir.popen-217"><span class="linenos">217</span></a>        <span class="n">stdin</span><span class="o">=</span><span class="n">CLOSE_STDIN</span><span class="p">,</span>
</span><span id="Testdir.popen-218"><a href="#Testdir.popen-218"><span class="linenos">218</span></a>        <span class="o">**</span><span class="n">kw</span><span class="p">,</span>
</span><span id="Testdir.popen-219"><a href="#Testdir.popen-219"><span class="linenos">219</span></a>    <span class="p">):</span>
</span><span id="Testdir.popen-220"><a href="#Testdir.popen-220"><span class="linenos">220</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.popen`.&quot;&quot;&quot;</span>
</span><span id="Testdir.popen-221"><a href="#Testdir.popen-221"><span class="linenos">221</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">,</span> <span class="n">stdin</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.popen">Pytester.popen()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.run" class="classattr">
                                        <input id="Testdir.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">cmdargs</span>,</span><span class="param">	<span class="n">timeout</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">stdin</span><span class="o">=&lt;</span><span class="n">NotSetType</span><span class="o">.</span><span class="n">token</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Testdir.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.run-223"><a href="#Testdir.run-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">CLOSE_STDIN</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir.run-224"><a href="#Testdir.run-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.run`.&quot;&quot;&quot;</span>
</span><span id="Testdir.run-225"><a href="#Testdir.run-225"><span class="linenos">225</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">*</span><span class="n">cmdargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">stdin</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.run">Pytester.run()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.runpython" class="classattr">
                                        <input id="Testdir.runpython-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpython</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">script</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Testdir.runpython-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.runpython"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.runpython-227"><a href="#Testdir.runpython-227"><span class="linenos">227</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir.runpython-228"><a href="#Testdir.runpython-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpython`.&quot;&quot;&quot;</span>
</span><span id="Testdir.runpython-229"><a href="#Testdir.runpython-229"><span class="linenos">229</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpython</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.runpython">Pytester.runpython()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.runpython_c" class="classattr">
                                        <input id="Testdir.runpython_c-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpython_c</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">command</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Testdir.runpython_c-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.runpython_c"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.runpython_c-231"><a href="#Testdir.runpython_c-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpython_c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="Testdir.runpython_c-232"><a href="#Testdir.runpython_c-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpython_c`.&quot;&quot;&quot;</span>
</span><span id="Testdir.runpython_c-233"><a href="#Testdir.runpython_c-233"><span class="linenos">233</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpython_c</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.runpython_c">Pytester.runpython_c()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.runpytest_subprocess" class="classattr">
                                        <input id="Testdir.runpytest_subprocess-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">runpytest_subprocess</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">pytester</span><span class="o">.</span><span class="n">RunResult</span>:</span></span>

                <label class="view-source-button" for="Testdir.runpytest_subprocess-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.runpytest_subprocess"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.runpytest_subprocess-235"><a href="#Testdir.runpytest_subprocess-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">runpytest_subprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunResult</span><span class="p">:</span>
</span><span id="Testdir.runpytest_subprocess-236"><a href="#Testdir.runpytest_subprocess-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.runpytest_subprocess`.&quot;&quot;&quot;</span>
</span><span id="Testdir.runpytest_subprocess-237"><a href="#Testdir.runpytest_subprocess-237"><span class="linenos">237</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">runpytest_subprocess</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.runpytest_subprocess">Pytester.runpytest_subprocess()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.spawn_pytest" class="classattr">
                                        <input id="Testdir.spawn_pytest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">spawn_pytest</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">string</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span></span><span class="return-annotation">) -> <span class="n">pexpect</span><span class="o">.</span><span class="n">pty_spawn</span><span class="o">.</span><span class="n">spawn</span>:</span></span>

                <label class="view-source-button" for="Testdir.spawn_pytest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.spawn_pytest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.spawn_pytest-239"><a href="#Testdir.spawn_pytest-239"><span class="linenos">239</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn_pytest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Testdir.spawn_pytest-240"><a href="#Testdir.spawn_pytest-240"><span class="linenos">240</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.spawn_pytest`.&quot;&quot;&quot;</span>
</span><span id="Testdir.spawn_pytest-241"><a href="#Testdir.spawn_pytest-241"><span class="linenos">241</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">spawn_pytest</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.spawn_pytest">Pytester.spawn_pytest()</a></code>.</p>
</div>


                            </div>
                            <div id="Testdir.spawn" class="classattr">
                                        <input id="Testdir.spawn-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">spawn</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span></span><span class="return-annotation">) -> <span class="n">pexpect</span><span class="o">.</span><span class="n">pty_spawn</span><span class="o">.</span><span class="n">spawn</span>:</span></span>

                <label class="view-source-button" for="Testdir.spawn-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.spawn"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.spawn-243"><a href="#Testdir.spawn-243"><span class="linenos">243</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">:</span>
</span><span id="Testdir.spawn-244"><a href="#Testdir.spawn-244"><span class="linenos">244</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;See :meth:`Pytester.spawn`.&quot;&quot;&quot;</span>
</span><span id="Testdir.spawn-245"><a href="#Testdir.spawn-245"><span class="linenos">245</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pytester</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">expect_timeout</span><span class="o">=</span><span class="n">expect_timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>See <code><a href="#Pytester.spawn">Pytester.spawn()</a></code>.</p>
</div>


                            </div>
                </section>
                <section id="Testdir.TimeoutExpired">
                            <input id="Testdir.TimeoutExpired-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Testdir.TimeoutExpired</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="Testdir.TimeoutExpired-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Testdir.TimeoutExpired"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Testdir.TimeoutExpired-661"><a href="#Testdir.TimeoutExpired-661"><span class="linenos">661</span></a>    <span class="k">class</span><span class="w"> </span><span class="nc">TimeoutExpired</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="Testdir.TimeoutExpired-662"><a href="#Testdir.TimeoutExpired-662"><span class="linenos">662</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Common base class for all non-exit exceptions.</p>
</div>


                </section>
                <section id="TestReport">
                            <input id="TestReport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">TestReport</span><wbr>(<span class="base">_pytest.reports.BaseReport</span>):

                <label class="view-source-button" for="TestReport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TestReport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TestReport-255"><a href="#TestReport-255"><span class="linenos">255</span></a><span class="nd">@final</span>
</span><span id="TestReport-256"><a href="#TestReport-256"><span class="linenos">256</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TestReport</span><span class="p">(</span><span class="n">BaseReport</span><span class="p">):</span>
</span><span id="TestReport-257"><a href="#TestReport-257"><span class="linenos">257</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Basic test report object (also used for setup and teardown calls if</span>
</span><span id="TestReport-258"><a href="#TestReport-258"><span class="linenos">258</span></a><span class="sd">    they fail).</span>
</span><span id="TestReport-259"><a href="#TestReport-259"><span class="linenos">259</span></a>
</span><span id="TestReport-260"><a href="#TestReport-260"><span class="linenos">260</span></a><span class="sd">    Reports can contain arbitrary extra attributes.</span>
</span><span id="TestReport-261"><a href="#TestReport-261"><span class="linenos">261</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TestReport-262"><a href="#TestReport-262"><span class="linenos">262</span></a>
</span><span id="TestReport-263"><a href="#TestReport-263"><span class="linenos">263</span></a>    <span class="n">__test__</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="TestReport-264"><a href="#TestReport-264"><span class="linenos">264</span></a>    <span class="c1"># Defined by skipping plugin.</span>
</span><span id="TestReport-265"><a href="#TestReport-265"><span class="linenos">265</span></a>    <span class="c1"># xfail reason if xfailed, otherwise not defined. Use hasattr to distinguish.</span>
</span><span id="TestReport-266"><a href="#TestReport-266"><span class="linenos">266</span></a>    <span class="n">wasxfail</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="TestReport-267"><a href="#TestReport-267"><span class="linenos">267</span></a>
</span><span id="TestReport-268"><a href="#TestReport-268"><span class="linenos">268</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="TestReport-269"><a href="#TestReport-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="TestReport-270"><a href="#TestReport-270"><span class="linenos">270</span></a>        <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="TestReport-271"><a href="#TestReport-271"><span class="linenos">271</span></a>        <span class="n">location</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
</span><span id="TestReport-272"><a href="#TestReport-272"><span class="linenos">272</span></a>        <span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="TestReport-273"><a href="#TestReport-273"><span class="linenos">273</span></a>        <span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">],</span>
</span><span id="TestReport-274"><a href="#TestReport-274"><span class="linenos">274</span></a>        <span class="n">longrepr</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="TestReport-275"><a href="#TestReport-275"><span class="linenos">275</span></a>        <span class="o">|</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="TestReport-276"><a href="#TestReport-276"><span class="linenos">276</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</span><span id="TestReport-277"><a href="#TestReport-277"><span class="linenos">277</span></a>        <span class="o">|</span> <span class="nb">str</span>
</span><span id="TestReport-278"><a href="#TestReport-278"><span class="linenos">278</span></a>        <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">,</span>
</span><span id="TestReport-279"><a href="#TestReport-279"><span class="linenos">279</span></a>        <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">],</span>
</span><span id="TestReport-280"><a href="#TestReport-280"><span class="linenos">280</span></a>        <span class="n">sections</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(),</span>
</span><span id="TestReport-281"><a href="#TestReport-281"><span class="linenos">281</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="TestReport-282"><a href="#TestReport-282"><span class="linenos">282</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="TestReport-283"><a href="#TestReport-283"><span class="linenos">283</span></a>        <span class="n">stop</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="TestReport-284"><a href="#TestReport-284"><span class="linenos">284</span></a>        <span class="n">user_properties</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="TestReport-285"><a href="#TestReport-285"><span class="linenos">285</span></a>        <span class="o">**</span><span class="n">extra</span><span class="p">,</span>
</span><span id="TestReport-286"><a href="#TestReport-286"><span class="linenos">286</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TestReport-287"><a href="#TestReport-287"><span class="linenos">287</span></a>        <span class="c1">#: Normalized collection nodeid.</span>
</span><span id="TestReport-288"><a href="#TestReport-288"><span class="linenos">288</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span> <span class="o">=</span> <span class="n">nodeid</span>
</span><span id="TestReport-289"><a href="#TestReport-289"><span class="linenos">289</span></a>
</span><span id="TestReport-290"><a href="#TestReport-290"><span class="linenos">290</span></a>        <span class="c1">#: A (filesystempath, lineno, domaininfo) tuple indicating the</span>
</span><span id="TestReport-291"><a href="#TestReport-291"><span class="linenos">291</span></a>        <span class="c1">#: actual location of a test item - it might be different from the</span>
</span><span id="TestReport-292"><a href="#TestReport-292"><span class="linenos">292</span></a>        <span class="c1">#: collected one e.g. if a method is inherited from a different module.</span>
</span><span id="TestReport-293"><a href="#TestReport-293"><span class="linenos">293</span></a>        <span class="c1">#: The filesystempath may be relative to ``config.rootdir``.</span>
</span><span id="TestReport-294"><a href="#TestReport-294"><span class="linenos">294</span></a>        <span class="c1">#: The line number is 0-based.</span>
</span><span id="TestReport-295"><a href="#TestReport-295"><span class="linenos">295</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">location</span>
</span><span id="TestReport-296"><a href="#TestReport-296"><span class="linenos">296</span></a>
</span><span id="TestReport-297"><a href="#TestReport-297"><span class="linenos">297</span></a>        <span class="c1">#: A name -&gt; value dictionary containing all keywords and</span>
</span><span id="TestReport-298"><a href="#TestReport-298"><span class="linenos">298</span></a>        <span class="c1">#: markers associated with a test invocation.</span>
</span><span id="TestReport-299"><a href="#TestReport-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">keywords</span>
</span><span id="TestReport-300"><a href="#TestReport-300"><span class="linenos">300</span></a>
</span><span id="TestReport-301"><a href="#TestReport-301"><span class="linenos">301</span></a>        <span class="c1">#: Test outcome, always one of &quot;passed&quot;, &quot;failed&quot;, &quot;skipped&quot;.</span>
</span><span id="TestReport-302"><a href="#TestReport-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
</span><span id="TestReport-303"><a href="#TestReport-303"><span class="linenos">303</span></a>
</span><span id="TestReport-304"><a href="#TestReport-304"><span class="linenos">304</span></a>        <span class="c1">#: None or a failure representation.</span>
</span><span id="TestReport-305"><a href="#TestReport-305"><span class="linenos">305</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">longrepr</span> <span class="o">=</span> <span class="n">longrepr</span>
</span><span id="TestReport-306"><a href="#TestReport-306"><span class="linenos">306</span></a>
</span><span id="TestReport-307"><a href="#TestReport-307"><span class="linenos">307</span></a>        <span class="c1">#: One of &#39;setup&#39;, &#39;call&#39;, &#39;teardown&#39; to indicate runtest phase.</span>
</span><span id="TestReport-308"><a href="#TestReport-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">when</span> <span class="o">=</span> <span class="n">when</span>
</span><span id="TestReport-309"><a href="#TestReport-309"><span class="linenos">309</span></a>
</span><span id="TestReport-310"><a href="#TestReport-310"><span class="linenos">310</span></a>        <span class="c1">#: User properties is a list of tuples (name, value) that holds user</span>
</span><span id="TestReport-311"><a href="#TestReport-311"><span class="linenos">311</span></a>        <span class="c1">#: defined properties of the test.</span>
</span><span id="TestReport-312"><a href="#TestReport-312"><span class="linenos">312</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user_properties</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_properties</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="TestReport-313"><a href="#TestReport-313"><span class="linenos">313</span></a>
</span><span id="TestReport-314"><a href="#TestReport-314"><span class="linenos">314</span></a>        <span class="c1">#: Tuples of str ``(heading, content)`` with extra information</span>
</span><span id="TestReport-315"><a href="#TestReport-315"><span class="linenos">315</span></a>        <span class="c1">#: for the test report. Used by pytest to add text captured</span>
</span><span id="TestReport-316"><a href="#TestReport-316"><span class="linenos">316</span></a>        <span class="c1">#: from ``stdout``, ``stderr``, and intercepted logging events. May</span>
</span><span id="TestReport-317"><a href="#TestReport-317"><span class="linenos">317</span></a>        <span class="c1">#: be used by other plugins to add arbitrary information to reports.</span>
</span><span id="TestReport-318"><a href="#TestReport-318"><span class="linenos">318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sections</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span>
</span><span id="TestReport-319"><a href="#TestReport-319"><span class="linenos">319</span></a>
</span><span id="TestReport-320"><a href="#TestReport-320"><span class="linenos">320</span></a>        <span class="c1">#: Time it took to run just the test.</span>
</span><span id="TestReport-321"><a href="#TestReport-321"><span class="linenos">321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">duration</span>
</span><span id="TestReport-322"><a href="#TestReport-322"><span class="linenos">322</span></a>
</span><span id="TestReport-323"><a href="#TestReport-323"><span class="linenos">323</span></a>        <span class="c1">#: The system time when the call started, in seconds since the epoch.</span>
</span><span id="TestReport-324"><a href="#TestReport-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="TestReport-325"><a href="#TestReport-325"><span class="linenos">325</span></a>        <span class="c1">#: The system time when the call ended, in seconds since the epoch.</span>
</span><span id="TestReport-326"><a href="#TestReport-326"><span class="linenos">326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">stop</span>
</span><span id="TestReport-327"><a href="#TestReport-327"><span class="linenos">327</span></a>
</span><span id="TestReport-328"><a href="#TestReport-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span>
</span><span id="TestReport-329"><a href="#TestReport-329"><span class="linenos">329</span></a>
</span><span id="TestReport-330"><a href="#TestReport-330"><span class="linenos">330</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="TestReport-331"><a href="#TestReport-331"><span class="linenos">331</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span><span class="si">!r}</span><span class="s2"> when=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">when</span><span class="si">!r}</span><span class="s2"> outcome=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="TestReport-332"><a href="#TestReport-332"><span class="linenos">332</span></a>
</span><span id="TestReport-333"><a href="#TestReport-333"><span class="linenos">333</span></a>    <span class="nd">@classmethod</span>
</span><span id="TestReport-334"><a href="#TestReport-334"><span class="linenos">334</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_item_and_call</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">,</span> <span class="n">call</span><span class="p">:</span> <span class="n">CallInfo</span><span class="p">[</span><span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">TestReport</span><span class="p">:</span>
</span><span id="TestReport-335"><a href="#TestReport-335"><span class="linenos">335</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and fill a TestReport with standard item and call info.</span>
</span><span id="TestReport-336"><a href="#TestReport-336"><span class="linenos">336</span></a>
</span><span id="TestReport-337"><a href="#TestReport-337"><span class="linenos">337</span></a><span class="sd">        :param item: The item.</span>
</span><span id="TestReport-338"><a href="#TestReport-338"><span class="linenos">338</span></a><span class="sd">        :param call: The call info.</span>
</span><span id="TestReport-339"><a href="#TestReport-339"><span class="linenos">339</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TestReport-340"><a href="#TestReport-340"><span class="linenos">340</span></a>        <span class="n">when</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">when</span>
</span><span id="TestReport-341"><a href="#TestReport-341"><span class="linenos">341</span></a>        <span class="c1"># Remove &quot;collect&quot; from the Literal type -- only for collection calls.</span>
</span><span id="TestReport-342"><a href="#TestReport-342"><span class="linenos">342</span></a>        <span class="k">assert</span> <span class="n">when</span> <span class="o">!=</span> <span class="s2">&quot;collect&quot;</span>
</span><span id="TestReport-343"><a href="#TestReport-343"><span class="linenos">343</span></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">duration</span>
</span><span id="TestReport-344"><a href="#TestReport-344"><span class="linenos">344</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">start</span>
</span><span id="TestReport-345"><a href="#TestReport-345"><span class="linenos">345</span></a>        <span class="n">stop</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">stop</span>
</span><span id="TestReport-346"><a href="#TestReport-346"><span class="linenos">346</span></a>        <span class="n">keywords</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">keywords</span><span class="p">}</span>
</span><span id="TestReport-347"><a href="#TestReport-347"><span class="linenos">347</span></a>        <span class="n">excinfo</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">excinfo</span>
</span><span id="TestReport-348"><a href="#TestReport-348"><span class="linenos">348</span></a>        <span class="n">sections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="TestReport-349"><a href="#TestReport-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">call</span><span class="o">.</span><span class="n">excinfo</span><span class="p">:</span>
</span><span id="TestReport-350"><a href="#TestReport-350"><span class="linenos">350</span></a>            <span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;passed&quot;</span>
</span><span id="TestReport-351"><a href="#TestReport-351"><span class="linenos">351</span></a>            <span class="n">longrepr</span><span class="p">:</span> <span class="p">(</span>
</span><span id="TestReport-352"><a href="#TestReport-352"><span class="linenos">352</span></a>                <span class="kc">None</span>
</span><span id="TestReport-353"><a href="#TestReport-353"><span class="linenos">353</span></a>                <span class="o">|</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="TestReport-354"><a href="#TestReport-354"><span class="linenos">354</span></a>                <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</span><span id="TestReport-355"><a href="#TestReport-355"><span class="linenos">355</span></a>                <span class="o">|</span> <span class="nb">str</span>
</span><span id="TestReport-356"><a href="#TestReport-356"><span class="linenos">356</span></a>                <span class="o">|</span> <span class="n">TerminalRepr</span>
</span><span id="TestReport-357"><a href="#TestReport-357"><span class="linenos">357</span></a>            <span class="p">)</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="TestReport-358"><a href="#TestReport-358"><span class="linenos">358</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TestReport-359"><a href="#TestReport-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="p">,</span> <span class="n">ExceptionInfo</span><span class="p">):</span>
</span><span id="TestReport-360"><a href="#TestReport-360"><span class="linenos">360</span></a>                <span class="n">outcome</span> <span class="o">=</span> <span class="s2">&quot;failed&quot;</span>
</span><span id="TestReport-361"><a href="#TestReport-361"><span class="linenos">361</span></a>                <span class="n">longrepr</span> <span class="o">=</span> <span class="n">excinfo</span>
</span><span id="TestReport-362"><a href="#TestReport-362"><span class="linenos">362</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">skip</span><span class="o">.</span><span class="n">Exception</span><span class="p">):</span>
</span><span id="TestReport-363"><a href="#TestReport-363"><span class="linenos">363</span></a>                <span class="n">outcome</span> <span class="o">=</span> <span class="s2">&quot;skipped&quot;</span>
</span><span id="TestReport-364"><a href="#TestReport-364"><span class="linenos">364</span></a>                <span class="n">r</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">_getreprcrash</span><span class="p">()</span>
</span><span id="TestReport-365"><a href="#TestReport-365"><span class="linenos">365</span></a>                <span class="k">assert</span> <span class="p">(</span>
</span><span id="TestReport-366"><a href="#TestReport-366"><span class="linenos">366</span></a>                    <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="TestReport-367"><a href="#TestReport-367"><span class="linenos">367</span></a>                <span class="p">),</span> <span class="s2">&quot;There should always be a traceback entry for skipping a test.&quot;</span>
</span><span id="TestReport-368"><a href="#TestReport-368"><span class="linenos">368</span></a>                <span class="k">if</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">_use_item_location</span><span class="p">:</span>
</span><span id="TestReport-369"><a href="#TestReport-369"><span class="linenos">369</span></a>                    <span class="n">path</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">reportinfo</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="TestReport-370"><a href="#TestReport-370"><span class="linenos">370</span></a>                    <span class="k">assert</span> <span class="n">line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="TestReport-371"><a href="#TestReport-371"><span class="linenos">371</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="n">line</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">message</span>
</span><span id="TestReport-372"><a href="#TestReport-372"><span class="linenos">372</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="TestReport-373"><a href="#TestReport-373"><span class="linenos">373</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">r</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</span><span id="TestReport-374"><a href="#TestReport-374"><span class="linenos">374</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TestReport-375"><a href="#TestReport-375"><span class="linenos">375</span></a>                <span class="n">outcome</span> <span class="o">=</span> <span class="s2">&quot;failed&quot;</span>
</span><span id="TestReport-376"><a href="#TestReport-376"><span class="linenos">376</span></a>                <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">when</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span><span class="p">:</span>
</span><span id="TestReport-377"><a href="#TestReport-377"><span class="linenos">377</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">repr_failure</span><span class="p">(</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="TestReport-378"><a href="#TestReport-378"><span class="linenos">378</span></a>                <span class="k">else</span><span class="p">:</span>  <span class="c1"># exception in setup or teardown</span>
</span><span id="TestReport-379"><a href="#TestReport-379"><span class="linenos">379</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_repr_failure_py</span><span class="p">(</span>
</span><span id="TestReport-380"><a href="#TestReport-380"><span class="linenos">380</span></a>                        <span class="n">excinfo</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</span><span id="TestReport-381"><a href="#TestReport-381"><span class="linenos">381</span></a>                    <span class="p">)</span>
</span><span id="TestReport-382"><a href="#TestReport-382"><span class="linenos">382</span></a>        <span class="k">for</span> <span class="n">rwhen</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">_report_sections</span><span class="p">:</span>
</span><span id="TestReport-383"><a href="#TestReport-383"><span class="linenos">383</span></a>            <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;Captured </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">rwhen</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">))</span>
</span><span id="TestReport-384"><a href="#TestReport-384"><span class="linenos">384</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
</span><span id="TestReport-385"><a href="#TestReport-385"><span class="linenos">385</span></a>            <span class="n">item</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="TestReport-386"><a href="#TestReport-386"><span class="linenos">386</span></a>            <span class="n">item</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
</span><span id="TestReport-387"><a href="#TestReport-387"><span class="linenos">387</span></a>            <span class="n">keywords</span><span class="p">,</span>
</span><span id="TestReport-388"><a href="#TestReport-388"><span class="linenos">388</span></a>            <span class="n">outcome</span><span class="p">,</span>
</span><span id="TestReport-389"><a href="#TestReport-389"><span class="linenos">389</span></a>            <span class="n">longrepr</span><span class="p">,</span>
</span><span id="TestReport-390"><a href="#TestReport-390"><span class="linenos">390</span></a>            <span class="n">when</span><span class="p">,</span>
</span><span id="TestReport-391"><a href="#TestReport-391"><span class="linenos">391</span></a>            <span class="n">sections</span><span class="p">,</span>
</span><span id="TestReport-392"><a href="#TestReport-392"><span class="linenos">392</span></a>            <span class="n">duration</span><span class="p">,</span>
</span><span id="TestReport-393"><a href="#TestReport-393"><span class="linenos">393</span></a>            <span class="n">start</span><span class="p">,</span>
</span><span id="TestReport-394"><a href="#TestReport-394"><span class="linenos">394</span></a>            <span class="n">stop</span><span class="p">,</span>
</span><span id="TestReport-395"><a href="#TestReport-395"><span class="linenos">395</span></a>            <span class="n">user_properties</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">user_properties</span><span class="p">,</span>
</span><span id="TestReport-396"><a href="#TestReport-396"><span class="linenos">396</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Basic test report object (also used for setup and teardown calls if
they fail).</p>

<p>Reports can contain arbitrary extra attributes.</p>
</div>


                            <div id="TestReport.__init__" class="classattr">
                                        <input id="TestReport.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">TestReport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">location</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;passed&#39;</span><span class="p">,</span> <span class="s1">&#39;failed&#39;</span><span class="p">,</span> <span class="s1">&#39;skipped&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">longrepr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NoneType</span><span class="p">,</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">_code</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">TerminalRepr</span><span class="p">]</span>,</span><span class="param">	<span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;setup&#39;</span><span class="p">,</span> <span class="s1">&#39;call&#39;</span><span class="p">,</span> <span class="s1">&#39;teardown&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">sections</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">()</span>,</span><span class="param">	<span class="n">duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">start</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">stop</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">user_properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">extra</span></span>)</span>

                <label class="view-source-button" for="TestReport.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TestReport.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TestReport.__init__-268"><a href="#TestReport.__init__-268"><span class="linenos">268</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="TestReport.__init__-269"><a href="#TestReport.__init__-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="TestReport.__init__-270"><a href="#TestReport.__init__-270"><span class="linenos">270</span></a>        <span class="n">nodeid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="TestReport.__init__-271"><a href="#TestReport.__init__-271"><span class="linenos">271</span></a>        <span class="n">location</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
</span><span id="TestReport.__init__-272"><a href="#TestReport.__init__-272"><span class="linenos">272</span></a>        <span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="TestReport.__init__-273"><a href="#TestReport.__init__-273"><span class="linenos">273</span></a>        <span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">],</span>
</span><span id="TestReport.__init__-274"><a href="#TestReport.__init__-274"><span class="linenos">274</span></a>        <span class="n">longrepr</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="TestReport.__init__-275"><a href="#TestReport.__init__-275"><span class="linenos">275</span></a>        <span class="o">|</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="TestReport.__init__-276"><a href="#TestReport.__init__-276"><span class="linenos">276</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</span><span id="TestReport.__init__-277"><a href="#TestReport.__init__-277"><span class="linenos">277</span></a>        <span class="o">|</span> <span class="nb">str</span>
</span><span id="TestReport.__init__-278"><a href="#TestReport.__init__-278"><span class="linenos">278</span></a>        <span class="o">|</span> <span class="n">TerminalRepr</span><span class="p">,</span>
</span><span id="TestReport.__init__-279"><a href="#TestReport.__init__-279"><span class="linenos">279</span></a>        <span class="n">when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;teardown&quot;</span><span class="p">],</span>
</span><span id="TestReport.__init__-280"><a href="#TestReport.__init__-280"><span class="linenos">280</span></a>        <span class="n">sections</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(),</span>
</span><span id="TestReport.__init__-281"><a href="#TestReport.__init__-281"><span class="linenos">281</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="TestReport.__init__-282"><a href="#TestReport.__init__-282"><span class="linenos">282</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="TestReport.__init__-283"><a href="#TestReport.__init__-283"><span class="linenos">283</span></a>        <span class="n">stop</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="TestReport.__init__-284"><a href="#TestReport.__init__-284"><span class="linenos">284</span></a>        <span class="n">user_properties</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="TestReport.__init__-285"><a href="#TestReport.__init__-285"><span class="linenos">285</span></a>        <span class="o">**</span><span class="n">extra</span><span class="p">,</span>
</span><span id="TestReport.__init__-286"><a href="#TestReport.__init__-286"><span class="linenos">286</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TestReport.__init__-287"><a href="#TestReport.__init__-287"><span class="linenos">287</span></a>        <span class="c1">#: Normalized collection nodeid.</span>
</span><span id="TestReport.__init__-288"><a href="#TestReport.__init__-288"><span class="linenos">288</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodeid</span> <span class="o">=</span> <span class="n">nodeid</span>
</span><span id="TestReport.__init__-289"><a href="#TestReport.__init__-289"><span class="linenos">289</span></a>
</span><span id="TestReport.__init__-290"><a href="#TestReport.__init__-290"><span class="linenos">290</span></a>        <span class="c1">#: A (filesystempath, lineno, domaininfo) tuple indicating the</span>
</span><span id="TestReport.__init__-291"><a href="#TestReport.__init__-291"><span class="linenos">291</span></a>        <span class="c1">#: actual location of a test item - it might be different from the</span>
</span><span id="TestReport.__init__-292"><a href="#TestReport.__init__-292"><span class="linenos">292</span></a>        <span class="c1">#: collected one e.g. if a method is inherited from a different module.</span>
</span><span id="TestReport.__init__-293"><a href="#TestReport.__init__-293"><span class="linenos">293</span></a>        <span class="c1">#: The filesystempath may be relative to ``config.rootdir``.</span>
</span><span id="TestReport.__init__-294"><a href="#TestReport.__init__-294"><span class="linenos">294</span></a>        <span class="c1">#: The line number is 0-based.</span>
</span><span id="TestReport.__init__-295"><a href="#TestReport.__init__-295"><span class="linenos">295</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">location</span>
</span><span id="TestReport.__init__-296"><a href="#TestReport.__init__-296"><span class="linenos">296</span></a>
</span><span id="TestReport.__init__-297"><a href="#TestReport.__init__-297"><span class="linenos">297</span></a>        <span class="c1">#: A name -&gt; value dictionary containing all keywords and</span>
</span><span id="TestReport.__init__-298"><a href="#TestReport.__init__-298"><span class="linenos">298</span></a>        <span class="c1">#: markers associated with a test invocation.</span>
</span><span id="TestReport.__init__-299"><a href="#TestReport.__init__-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">keywords</span>
</span><span id="TestReport.__init__-300"><a href="#TestReport.__init__-300"><span class="linenos">300</span></a>
</span><span id="TestReport.__init__-301"><a href="#TestReport.__init__-301"><span class="linenos">301</span></a>        <span class="c1">#: Test outcome, always one of &quot;passed&quot;, &quot;failed&quot;, &quot;skipped&quot;.</span>
</span><span id="TestReport.__init__-302"><a href="#TestReport.__init__-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
</span><span id="TestReport.__init__-303"><a href="#TestReport.__init__-303"><span class="linenos">303</span></a>
</span><span id="TestReport.__init__-304"><a href="#TestReport.__init__-304"><span class="linenos">304</span></a>        <span class="c1">#: None or a failure representation.</span>
</span><span id="TestReport.__init__-305"><a href="#TestReport.__init__-305"><span class="linenos">305</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">longrepr</span> <span class="o">=</span> <span class="n">longrepr</span>
</span><span id="TestReport.__init__-306"><a href="#TestReport.__init__-306"><span class="linenos">306</span></a>
</span><span id="TestReport.__init__-307"><a href="#TestReport.__init__-307"><span class="linenos">307</span></a>        <span class="c1">#: One of &#39;setup&#39;, &#39;call&#39;, &#39;teardown&#39; to indicate runtest phase.</span>
</span><span id="TestReport.__init__-308"><a href="#TestReport.__init__-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">when</span> <span class="o">=</span> <span class="n">when</span>
</span><span id="TestReport.__init__-309"><a href="#TestReport.__init__-309"><span class="linenos">309</span></a>
</span><span id="TestReport.__init__-310"><a href="#TestReport.__init__-310"><span class="linenos">310</span></a>        <span class="c1">#: User properties is a list of tuples (name, value) that holds user</span>
</span><span id="TestReport.__init__-311"><a href="#TestReport.__init__-311"><span class="linenos">311</span></a>        <span class="c1">#: defined properties of the test.</span>
</span><span id="TestReport.__init__-312"><a href="#TestReport.__init__-312"><span class="linenos">312</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user_properties</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_properties</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="TestReport.__init__-313"><a href="#TestReport.__init__-313"><span class="linenos">313</span></a>
</span><span id="TestReport.__init__-314"><a href="#TestReport.__init__-314"><span class="linenos">314</span></a>        <span class="c1">#: Tuples of str ``(heading, content)`` with extra information</span>
</span><span id="TestReport.__init__-315"><a href="#TestReport.__init__-315"><span class="linenos">315</span></a>        <span class="c1">#: for the test report. Used by pytest to add text captured</span>
</span><span id="TestReport.__init__-316"><a href="#TestReport.__init__-316"><span class="linenos">316</span></a>        <span class="c1">#: from ``stdout``, ``stderr``, and intercepted logging events. May</span>
</span><span id="TestReport.__init__-317"><a href="#TestReport.__init__-317"><span class="linenos">317</span></a>        <span class="c1">#: be used by other plugins to add arbitrary information to reports.</span>
</span><span id="TestReport.__init__-318"><a href="#TestReport.__init__-318"><span class="linenos">318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sections</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span>
</span><span id="TestReport.__init__-319"><a href="#TestReport.__init__-319"><span class="linenos">319</span></a>
</span><span id="TestReport.__init__-320"><a href="#TestReport.__init__-320"><span class="linenos">320</span></a>        <span class="c1">#: Time it took to run just the test.</span>
</span><span id="TestReport.__init__-321"><a href="#TestReport.__init__-321"><span class="linenos">321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">duration</span>
</span><span id="TestReport.__init__-322"><a href="#TestReport.__init__-322"><span class="linenos">322</span></a>
</span><span id="TestReport.__init__-323"><a href="#TestReport.__init__-323"><span class="linenos">323</span></a>        <span class="c1">#: The system time when the call started, in seconds since the epoch.</span>
</span><span id="TestReport.__init__-324"><a href="#TestReport.__init__-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="TestReport.__init__-325"><a href="#TestReport.__init__-325"><span class="linenos">325</span></a>        <span class="c1">#: The system time when the call ended, in seconds since the epoch.</span>
</span><span id="TestReport.__init__-326"><a href="#TestReport.__init__-326"><span class="linenos">326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">stop</span>
</span><span id="TestReport.__init__-327"><a href="#TestReport.__init__-327"><span class="linenos">327</span></a>
</span><span id="TestReport.__init__-328"><a href="#TestReport.__init__-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="TestReport.wasxfail" class="classattr">
                                <div class="attr variable">
            <span class="name">wasxfail</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#TestReport.wasxfail"></a>
    
    

                            </div>
                            <div id="TestReport.nodeid" class="classattr">
                                <div class="attr variable">
            <span class="name">nodeid</span>

        
    </div>
    <a class="headerlink" href="#TestReport.nodeid"></a>
    
    

                            </div>
                            <div id="TestReport.location" class="classattr">
                                <div class="attr variable">
            <span class="name">location</span><span class="annotation">: tuple[str, int | None, str]</span>

        
    </div>
    <a class="headerlink" href="#TestReport.location"></a>
    
    

                            </div>
                            <div id="TestReport.keywords" class="classattr">
                                <div class="attr variable">
            <span class="name">keywords</span><span class="annotation">: Mapping[str, Any]</span>

        
    </div>
    <a class="headerlink" href="#TestReport.keywords"></a>
    
    

                            </div>
                            <div id="TestReport.outcome" class="classattr">
                                <div class="attr variable">
            <span class="name">outcome</span>

        
    </div>
    <a class="headerlink" href="#TestReport.outcome"></a>
    
    

                            </div>
                            <div id="TestReport.longrepr" class="classattr">
                                <div class="attr variable">
            <span class="name">longrepr</span>

        
    </div>
    <a class="headerlink" href="#TestReport.longrepr"></a>
    
    

                            </div>
                            <div id="TestReport.when" class="classattr">
                                <div class="attr variable">
            <span class="name">when</span>

        
    </div>
    <a class="headerlink" href="#TestReport.when"></a>
    
    

                            </div>
                            <div id="TestReport.user_properties" class="classattr">
                                <div class="attr variable">
            <span class="name">user_properties</span>

        
    </div>
    <a class="headerlink" href="#TestReport.user_properties"></a>
    
    

                            </div>
                            <div id="TestReport.sections" class="classattr">
                                <div class="attr variable">
            <span class="name">sections</span>

        
    </div>
    <a class="headerlink" href="#TestReport.sections"></a>
    
    

                            </div>
                            <div id="TestReport.duration" class="classattr">
                                <div class="attr variable">
            <span class="name">duration</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#TestReport.duration"></a>
    
    

                            </div>
                            <div id="TestReport.start" class="classattr">
                                <div class="attr variable">
            <span class="name">start</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#TestReport.start"></a>
    
    

                            </div>
                            <div id="TestReport.stop" class="classattr">
                                <div class="attr variable">
            <span class="name">stop</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#TestReport.stop"></a>
    
    

                            </div>
                            <div id="TestReport.from_item_and_call" class="classattr">
                                        <input id="TestReport.from_item_and_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_item_and_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">item</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Item</span>,</span><span class="param">	<span class="n">call</span><span class="p">:</span> <span class="n">_pytest</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">CallInfo</span><span class="p">[</span><span class="n">NoneType</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">reports</span><span class="o">.</span><span class="n">TestReport</span>:</span></span>

                <label class="view-source-button" for="TestReport.from_item_and_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TestReport.from_item_and_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TestReport.from_item_and_call-333"><a href="#TestReport.from_item_and_call-333"><span class="linenos">333</span></a>    <span class="nd">@classmethod</span>
</span><span id="TestReport.from_item_and_call-334"><a href="#TestReport.from_item_and_call-334"><span class="linenos">334</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_item_and_call</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">,</span> <span class="n">call</span><span class="p">:</span> <span class="n">CallInfo</span><span class="p">[</span><span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">TestReport</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-335"><a href="#TestReport.from_item_and_call-335"><span class="linenos">335</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and fill a TestReport with standard item and call info.</span>
</span><span id="TestReport.from_item_and_call-336"><a href="#TestReport.from_item_and_call-336"><span class="linenos">336</span></a>
</span><span id="TestReport.from_item_and_call-337"><a href="#TestReport.from_item_and_call-337"><span class="linenos">337</span></a><span class="sd">        :param item: The item.</span>
</span><span id="TestReport.from_item_and_call-338"><a href="#TestReport.from_item_and_call-338"><span class="linenos">338</span></a><span class="sd">        :param call: The call info.</span>
</span><span id="TestReport.from_item_and_call-339"><a href="#TestReport.from_item_and_call-339"><span class="linenos">339</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TestReport.from_item_and_call-340"><a href="#TestReport.from_item_and_call-340"><span class="linenos">340</span></a>        <span class="n">when</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">when</span>
</span><span id="TestReport.from_item_and_call-341"><a href="#TestReport.from_item_and_call-341"><span class="linenos">341</span></a>        <span class="c1"># Remove &quot;collect&quot; from the Literal type -- only for collection calls.</span>
</span><span id="TestReport.from_item_and_call-342"><a href="#TestReport.from_item_and_call-342"><span class="linenos">342</span></a>        <span class="k">assert</span> <span class="n">when</span> <span class="o">!=</span> <span class="s2">&quot;collect&quot;</span>
</span><span id="TestReport.from_item_and_call-343"><a href="#TestReport.from_item_and_call-343"><span class="linenos">343</span></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">duration</span>
</span><span id="TestReport.from_item_and_call-344"><a href="#TestReport.from_item_and_call-344"><span class="linenos">344</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">start</span>
</span><span id="TestReport.from_item_and_call-345"><a href="#TestReport.from_item_and_call-345"><span class="linenos">345</span></a>        <span class="n">stop</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">stop</span>
</span><span id="TestReport.from_item_and_call-346"><a href="#TestReport.from_item_and_call-346"><span class="linenos">346</span></a>        <span class="n">keywords</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">keywords</span><span class="p">}</span>
</span><span id="TestReport.from_item_and_call-347"><a href="#TestReport.from_item_and_call-347"><span class="linenos">347</span></a>        <span class="n">excinfo</span> <span class="o">=</span> <span class="n">call</span><span class="o">.</span><span class="n">excinfo</span>
</span><span id="TestReport.from_item_and_call-348"><a href="#TestReport.from_item_and_call-348"><span class="linenos">348</span></a>        <span class="n">sections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="TestReport.from_item_and_call-349"><a href="#TestReport.from_item_and_call-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">call</span><span class="o">.</span><span class="n">excinfo</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-350"><a href="#TestReport.from_item_and_call-350"><span class="linenos">350</span></a>            <span class="n">outcome</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;skipped&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;passed&quot;</span>
</span><span id="TestReport.from_item_and_call-351"><a href="#TestReport.from_item_and_call-351"><span class="linenos">351</span></a>            <span class="n">longrepr</span><span class="p">:</span> <span class="p">(</span>
</span><span id="TestReport.from_item_and_call-352"><a href="#TestReport.from_item_and_call-352"><span class="linenos">352</span></a>                <span class="kc">None</span>
</span><span id="TestReport.from_item_and_call-353"><a href="#TestReport.from_item_and_call-353"><span class="linenos">353</span></a>                <span class="o">|</span> <span class="n">ExceptionInfo</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span>
</span><span id="TestReport.from_item_and_call-354"><a href="#TestReport.from_item_and_call-354"><span class="linenos">354</span></a>                <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</span><span id="TestReport.from_item_and_call-355"><a href="#TestReport.from_item_and_call-355"><span class="linenos">355</span></a>                <span class="o">|</span> <span class="nb">str</span>
</span><span id="TestReport.from_item_and_call-356"><a href="#TestReport.from_item_and_call-356"><span class="linenos">356</span></a>                <span class="o">|</span> <span class="n">TerminalRepr</span>
</span><span id="TestReport.from_item_and_call-357"><a href="#TestReport.from_item_and_call-357"><span class="linenos">357</span></a>            <span class="p">)</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="TestReport.from_item_and_call-358"><a href="#TestReport.from_item_and_call-358"><span class="linenos">358</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-359"><a href="#TestReport.from_item_and_call-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="p">,</span> <span class="n">ExceptionInfo</span><span class="p">):</span>
</span><span id="TestReport.from_item_and_call-360"><a href="#TestReport.from_item_and_call-360"><span class="linenos">360</span></a>                <span class="n">outcome</span> <span class="o">=</span> <span class="s2">&quot;failed&quot;</span>
</span><span id="TestReport.from_item_and_call-361"><a href="#TestReport.from_item_and_call-361"><span class="linenos">361</span></a>                <span class="n">longrepr</span> <span class="o">=</span> <span class="n">excinfo</span>
</span><span id="TestReport.from_item_and_call-362"><a href="#TestReport.from_item_and_call-362"><span class="linenos">362</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">skip</span><span class="o">.</span><span class="n">Exception</span><span class="p">):</span>
</span><span id="TestReport.from_item_and_call-363"><a href="#TestReport.from_item_and_call-363"><span class="linenos">363</span></a>                <span class="n">outcome</span> <span class="o">=</span> <span class="s2">&quot;skipped&quot;</span>
</span><span id="TestReport.from_item_and_call-364"><a href="#TestReport.from_item_and_call-364"><span class="linenos">364</span></a>                <span class="n">r</span> <span class="o">=</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">_getreprcrash</span><span class="p">()</span>
</span><span id="TestReport.from_item_and_call-365"><a href="#TestReport.from_item_and_call-365"><span class="linenos">365</span></a>                <span class="k">assert</span> <span class="p">(</span>
</span><span id="TestReport.from_item_and_call-366"><a href="#TestReport.from_item_and_call-366"><span class="linenos">366</span></a>                    <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="TestReport.from_item_and_call-367"><a href="#TestReport.from_item_and_call-367"><span class="linenos">367</span></a>                <span class="p">),</span> <span class="s2">&quot;There should always be a traceback entry for skipping a test.&quot;</span>
</span><span id="TestReport.from_item_and_call-368"><a href="#TestReport.from_item_and_call-368"><span class="linenos">368</span></a>                <span class="k">if</span> <span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">_use_item_location</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-369"><a href="#TestReport.from_item_and_call-369"><span class="linenos">369</span></a>                    <span class="n">path</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">reportinfo</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="TestReport.from_item_and_call-370"><a href="#TestReport.from_item_and_call-370"><span class="linenos">370</span></a>                    <span class="k">assert</span> <span class="n">line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="TestReport.from_item_and_call-371"><a href="#TestReport.from_item_and_call-371"><span class="linenos">371</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="n">line</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">message</span>
</span><span id="TestReport.from_item_and_call-372"><a href="#TestReport.from_item_and_call-372"><span class="linenos">372</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-373"><a href="#TestReport.from_item_and_call-373"><span class="linenos">373</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">r</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</span><span id="TestReport.from_item_and_call-374"><a href="#TestReport.from_item_and_call-374"><span class="linenos">374</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-375"><a href="#TestReport.from_item_and_call-375"><span class="linenos">375</span></a>                <span class="n">outcome</span> <span class="o">=</span> <span class="s2">&quot;failed&quot;</span>
</span><span id="TestReport.from_item_and_call-376"><a href="#TestReport.from_item_and_call-376"><span class="linenos">376</span></a>                <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">when</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-377"><a href="#TestReport.from_item_and_call-377"><span class="linenos">377</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">repr_failure</span><span class="p">(</span><span class="n">excinfo</span><span class="p">)</span>
</span><span id="TestReport.from_item_and_call-378"><a href="#TestReport.from_item_and_call-378"><span class="linenos">378</span></a>                <span class="k">else</span><span class="p">:</span>  <span class="c1"># exception in setup or teardown</span>
</span><span id="TestReport.from_item_and_call-379"><a href="#TestReport.from_item_and_call-379"><span class="linenos">379</span></a>                    <span class="n">longrepr</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_repr_failure_py</span><span class="p">(</span>
</span><span id="TestReport.from_item_and_call-380"><a href="#TestReport.from_item_and_call-380"><span class="linenos">380</span></a>                        <span class="n">excinfo</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;tbstyle&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</span><span id="TestReport.from_item_and_call-381"><a href="#TestReport.from_item_and_call-381"><span class="linenos">381</span></a>                    <span class="p">)</span>
</span><span id="TestReport.from_item_and_call-382"><a href="#TestReport.from_item_and_call-382"><span class="linenos">382</span></a>        <span class="k">for</span> <span class="n">rwhen</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">_report_sections</span><span class="p">:</span>
</span><span id="TestReport.from_item_and_call-383"><a href="#TestReport.from_item_and_call-383"><span class="linenos">383</span></a>            <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;Captured </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">rwhen</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">))</span>
</span><span id="TestReport.from_item_and_call-384"><a href="#TestReport.from_item_and_call-384"><span class="linenos">384</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
</span><span id="TestReport.from_item_and_call-385"><a href="#TestReport.from_item_and_call-385"><span class="linenos">385</span></a>            <span class="n">item</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-386"><a href="#TestReport.from_item_and_call-386"><span class="linenos">386</span></a>            <span class="n">item</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-387"><a href="#TestReport.from_item_and_call-387"><span class="linenos">387</span></a>            <span class="n">keywords</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-388"><a href="#TestReport.from_item_and_call-388"><span class="linenos">388</span></a>            <span class="n">outcome</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-389"><a href="#TestReport.from_item_and_call-389"><span class="linenos">389</span></a>            <span class="n">longrepr</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-390"><a href="#TestReport.from_item_and_call-390"><span class="linenos">390</span></a>            <span class="n">when</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-391"><a href="#TestReport.from_item_and_call-391"><span class="linenos">391</span></a>            <span class="n">sections</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-392"><a href="#TestReport.from_item_and_call-392"><span class="linenos">392</span></a>            <span class="n">duration</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-393"><a href="#TestReport.from_item_and_call-393"><span class="linenos">393</span></a>            <span class="n">start</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-394"><a href="#TestReport.from_item_and_call-394"><span class="linenos">394</span></a>            <span class="n">stop</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-395"><a href="#TestReport.from_item_and_call-395"><span class="linenos">395</span></a>            <span class="n">user_properties</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">user_properties</span><span class="p">,</span>
</span><span id="TestReport.from_item_and_call-396"><a href="#TestReport.from_item_and_call-396"><span class="linenos">396</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create and fill a TestReport with standard item and call info.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>item</strong>:  The item.</li>
<li><strong>call</strong>:  The call info.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="TestShortLogReport">
                            <input id="TestShortLogReport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TestShortLogReport</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="TestShortLogReport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TestShortLogReport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TestShortLogReport-114"><a href="#TestShortLogReport-114"><span class="linenos">114</span></a><span class="k">class</span><span class="w"> </span><span class="nc">TestShortLogReport</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="TestShortLogReport-115"><a href="#TestShortLogReport-115"><span class="linenos">115</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Used to store the test status result category, shortletter and verbose word.</span>
</span><span id="TestShortLogReport-116"><a href="#TestShortLogReport-116"><span class="linenos">116</span></a><span class="sd">    For example ``&quot;rerun&quot;, &quot;R&quot;, (&quot;RERUN&quot;, {&quot;yellow&quot;: True})``.</span>
</span><span id="TestShortLogReport-117"><a href="#TestShortLogReport-117"><span class="linenos">117</span></a>
</span><span id="TestShortLogReport-118"><a href="#TestShortLogReport-118"><span class="linenos">118</span></a><span class="sd">    :ivar category:</span>
</span><span id="TestShortLogReport-119"><a href="#TestShortLogReport-119"><span class="linenos">119</span></a><span class="sd">        The class of result, for example ``passed``, ``skipped``, ``error``, or the empty string.</span>
</span><span id="TestShortLogReport-120"><a href="#TestShortLogReport-120"><span class="linenos">120</span></a>
</span><span id="TestShortLogReport-121"><a href="#TestShortLogReport-121"><span class="linenos">121</span></a><span class="sd">    :ivar letter:</span>
</span><span id="TestShortLogReport-122"><a href="#TestShortLogReport-122"><span class="linenos">122</span></a><span class="sd">        The short letter shown as testing progresses, for example ``&quot;.&quot;``, ``&quot;s&quot;``, ``&quot;E&quot;``, or the empty string.</span>
</span><span id="TestShortLogReport-123"><a href="#TestShortLogReport-123"><span class="linenos">123</span></a>
</span><span id="TestShortLogReport-124"><a href="#TestShortLogReport-124"><span class="linenos">124</span></a><span class="sd">    :ivar word:</span>
</span><span id="TestShortLogReport-125"><a href="#TestShortLogReport-125"><span class="linenos">125</span></a><span class="sd">        Verbose word is shown as testing progresses in verbose mode, for example ``&quot;PASSED&quot;``, ``&quot;SKIPPED&quot;``,</span>
</span><span id="TestShortLogReport-126"><a href="#TestShortLogReport-126"><span class="linenos">126</span></a><span class="sd">        ``&quot;ERROR&quot;``, or the empty string.</span>
</span><span id="TestShortLogReport-127"><a href="#TestShortLogReport-127"><span class="linenos">127</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TestShortLogReport-128"><a href="#TestShortLogReport-128"><span class="linenos">128</span></a>
</span><span id="TestShortLogReport-129"><a href="#TestShortLogReport-129"><span class="linenos">129</span></a>    <span class="n">category</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="TestShortLogReport-130"><a href="#TestShortLogReport-130"><span class="linenos">130</span></a>    <span class="n">letter</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="TestShortLogReport-131"><a href="#TestShortLogReport-131"><span class="linenos">131</span></a>    <span class="n">word</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Used to store the test status result category, shortletter and verbose word.
For example <code>"rerun", "R", ("RERUN", {"yellow": True})</code>.</p>

<p>:ivar category:
    The class of result, for example <code>passed</code>, <code>skipped</code>, <code>error</code>, or the empty string.</p>

<p>:ivar letter:
    The short letter shown as testing progresses, for example <code>"."</code>, <code>"s"</code>, <code>"E"</code>, or the empty string.</p>

<p>:ivar word:
    Verbose word is shown as testing progresses in verbose mode, for example <code>"PASSED"</code>, <code>"SKIPPED"</code>,
    <code>"ERROR"</code>, or the empty string.</p>
</div>


                            <div id="TestShortLogReport.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TestShortLogReport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">category</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">letter</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">word</span><span class="p">:</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="s1">&#39;str | tuple[str, Mapping[str, bool]]&#39;</span><span class="p">)</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TestShortLogReport.__init__"></a>
    
            <div class="docstring"><p>Create new instance of TestShortLogReport(category, letter, word)</p>
</div>


                            </div>
                            <div id="TestShortLogReport.category" class="classattr">
                                <div class="attr variable">
            <span class="name">category</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#TestShortLogReport.category"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="TestShortLogReport.letter" class="classattr">
                                <div class="attr variable">
            <span class="name">letter</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#TestShortLogReport.letter"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="TestShortLogReport.word" class="classattr">
                                <div class="attr variable">
            <span class="name">word</span><span class="annotation">: str | tuple[str, typing.Mapping[str, bool]]</span>

        
    </div>
    <a class="headerlink" href="#TestShortLogReport.word"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                </section>
                <section id="UsageError">
                            <input id="UsageError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-final">@final</div>

    <span class="def">class</span>
    <span class="name">UsageError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="UsageError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UsageError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UsageError-7"><a href="#UsageError-7"><span class="linenos">7</span></a><span class="nd">@final</span>
</span><span id="UsageError-8"><a href="#UsageError-8"><span class="linenos">8</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UsageError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="UsageError-9"><a href="#UsageError-9"><span class="linenos">9</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Error in pytest usage or invocation.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Error in pytest usage or invocation.</p>
</div>


                </section>
                <section id="WarningsRecorder">
                            <input id="WarningsRecorder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">WarningsRecorder</span><wbr>(<span class="base">warnings.catch_warnings</span>):

                <label class="view-source-button" for="WarningsRecorder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WarningsRecorder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WarningsRecorder-170"><a href="#WarningsRecorder-170"><span class="linenos">170</span></a><span class="k">class</span><span class="w"> </span><span class="nc">WarningsRecorder</span><span class="p">(</span><span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">):</span>  <span class="c1"># type:ignore[type-arg]</span>
</span><span id="WarningsRecorder-171"><a href="#WarningsRecorder-171"><span class="linenos">171</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A context manager to record raised warnings.</span>
</span><span id="WarningsRecorder-172"><a href="#WarningsRecorder-172"><span class="linenos">172</span></a>
</span><span id="WarningsRecorder-173"><a href="#WarningsRecorder-173"><span class="linenos">173</span></a><span class="sd">    Each recorded warning is an instance of :class:`warnings.WarningMessage`.</span>
</span><span id="WarningsRecorder-174"><a href="#WarningsRecorder-174"><span class="linenos">174</span></a>
</span><span id="WarningsRecorder-175"><a href="#WarningsRecorder-175"><span class="linenos">175</span></a><span class="sd">    Adapted from `warnings.catch_warnings`.</span>
</span><span id="WarningsRecorder-176"><a href="#WarningsRecorder-176"><span class="linenos">176</span></a>
</span><span id="WarningsRecorder-177"><a href="#WarningsRecorder-177"><span class="linenos">177</span></a><span class="sd">    .. note::</span>
</span><span id="WarningsRecorder-178"><a href="#WarningsRecorder-178"><span class="linenos">178</span></a><span class="sd">        ``DeprecationWarning`` and ``PendingDeprecationWarning`` are treated</span>
</span><span id="WarningsRecorder-179"><a href="#WarningsRecorder-179"><span class="linenos">179</span></a><span class="sd">        differently; see :ref:`ensuring_function_triggers`.</span>
</span><span id="WarningsRecorder-180"><a href="#WarningsRecorder-180"><span class="linenos">180</span></a>
</span><span id="WarningsRecorder-181"><a href="#WarningsRecorder-181"><span class="linenos">181</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-182"><a href="#WarningsRecorder-182"><span class="linenos">182</span></a>
</span><span id="WarningsRecorder-183"><a href="#WarningsRecorder-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder-184"><a href="#WarningsRecorder-184"><span class="linenos">184</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="WarningsRecorder-185"><a href="#WarningsRecorder-185"><span class="linenos">185</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="WarningsRecorder-186"><a href="#WarningsRecorder-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_entered</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="WarningsRecorder-187"><a href="#WarningsRecorder-187"><span class="linenos">187</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WarningsRecorder-188"><a href="#WarningsRecorder-188"><span class="linenos">188</span></a>
</span><span id="WarningsRecorder-189"><a href="#WarningsRecorder-189"><span class="linenos">189</span></a>    <span class="nd">@property</span>
</span><span id="WarningsRecorder-190"><a href="#WarningsRecorder-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">]:</span>
</span><span id="WarningsRecorder-191"><a href="#WarningsRecorder-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of recorded warnings.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-192"><a href="#WarningsRecorder-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span>
</span><span id="WarningsRecorder-193"><a href="#WarningsRecorder-193"><span class="linenos">193</span></a>
</span><span id="WarningsRecorder-194"><a href="#WarningsRecorder-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">:</span>
</span><span id="WarningsRecorder-195"><a href="#WarningsRecorder-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a recorded warning by index.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-196"><a href="#WarningsRecorder-196"><span class="linenos">196</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="WarningsRecorder-197"><a href="#WarningsRecorder-197"><span class="linenos">197</span></a>
</span><span id="WarningsRecorder-198"><a href="#WarningsRecorder-198"><span class="linenos">198</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">]:</span>
</span><span id="WarningsRecorder-199"><a href="#WarningsRecorder-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate through the recorded warnings.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-200"><a href="#WarningsRecorder-200"><span class="linenos">200</span></a>        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">)</span>
</span><span id="WarningsRecorder-201"><a href="#WarningsRecorder-201"><span class="linenos">201</span></a>
</span><span id="WarningsRecorder-202"><a href="#WarningsRecorder-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="WarningsRecorder-203"><a href="#WarningsRecorder-203"><span class="linenos">203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The number of recorded warnings.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-204"><a href="#WarningsRecorder-204"><span class="linenos">204</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">)</span>
</span><span id="WarningsRecorder-205"><a href="#WarningsRecorder-205"><span class="linenos">205</span></a>
</span><span id="WarningsRecorder-206"><a href="#WarningsRecorder-206"><span class="linenos">206</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">Warning</span><span class="p">]</span> <span class="o">=</span> <span class="ne">Warning</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">:</span>
</span><span id="WarningsRecorder-207"><a href="#WarningsRecorder-207"><span class="linenos">207</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pop the first recorded warning which is an instance of ``cls``,</span>
</span><span id="WarningsRecorder-208"><a href="#WarningsRecorder-208"><span class="linenos">208</span></a><span class="sd">        but not an instance of a child class of any other match.</span>
</span><span id="WarningsRecorder-209"><a href="#WarningsRecorder-209"><span class="linenos">209</span></a><span class="sd">        Raises ``AssertionError`` if there is no match.</span>
</span><span id="WarningsRecorder-210"><a href="#WarningsRecorder-210"><span class="linenos">210</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-211"><a href="#WarningsRecorder-211"><span class="linenos">211</span></a>        <span class="n">best_idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="WarningsRecorder-212"><a href="#WarningsRecorder-212"><span class="linenos">212</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">):</span>
</span><span id="WarningsRecorder-213"><a href="#WarningsRecorder-213"><span class="linenos">213</span></a>            <span class="k">if</span> <span class="n">w</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="bp">cls</span><span class="p">:</span>
</span><span id="WarningsRecorder-214"><a href="#WarningsRecorder-214"><span class="linenos">214</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># exact match, stop looking</span>
</span><span id="WarningsRecorder-215"><a href="#WarningsRecorder-215"><span class="linenos">215</span></a>            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="WarningsRecorder-216"><a href="#WarningsRecorder-216"><span class="linenos">216</span></a>                <span class="n">best_idx</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="WarningsRecorder-217"><a href="#WarningsRecorder-217"><span class="linenos">217</span></a>                <span class="ow">or</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">best_idx</span><span class="p">]</span><span class="o">.</span><span class="n">category</span><span class="p">)</span>
</span><span id="WarningsRecorder-218"><a href="#WarningsRecorder-218"><span class="linenos">218</span></a>            <span class="p">):</span>
</span><span id="WarningsRecorder-219"><a href="#WarningsRecorder-219"><span class="linenos">219</span></a>                <span class="n">best_idx</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="WarningsRecorder-220"><a href="#WarningsRecorder-220"><span class="linenos">220</span></a>        <span class="k">if</span> <span class="n">best_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder-221"><a href="#WarningsRecorder-221"><span class="linenos">221</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">best_idx</span><span class="p">)</span>
</span><span id="WarningsRecorder-222"><a href="#WarningsRecorder-222"><span class="linenos">222</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="WarningsRecorder-223"><a href="#WarningsRecorder-223"><span class="linenos">223</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="si">!r}</span><span class="s2"> not found in warning list&quot;</span><span class="p">)</span>
</span><span id="WarningsRecorder-224"><a href="#WarningsRecorder-224"><span class="linenos">224</span></a>
</span><span id="WarningsRecorder-225"><a href="#WarningsRecorder-225"><span class="linenos">225</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder-226"><a href="#WarningsRecorder-226"><span class="linenos">226</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the list of recorded warnings.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder-227"><a href="#WarningsRecorder-227"><span class="linenos">227</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WarningsRecorder-228"><a href="#WarningsRecorder-228"><span class="linenos">228</span></a>
</span><span id="WarningsRecorder-229"><a href="#WarningsRecorder-229"><span class="linenos">229</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="WarningsRecorder-230"><a href="#WarningsRecorder-230"><span class="linenos">230</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entered</span><span class="p">:</span>
</span><span id="WarningsRecorder-231"><a href="#WarningsRecorder-231"><span class="linenos">231</span></a>            <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="WarningsRecorder-232"><a href="#WarningsRecorder-232"><span class="linenos">232</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot enter </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s2"> twice&quot;</span><span class="p">)</span>
</span><span id="WarningsRecorder-233"><a href="#WarningsRecorder-233"><span class="linenos">233</span></a>        <span class="n">_list</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__enter__</span><span class="p">()</span>
</span><span id="WarningsRecorder-234"><a href="#WarningsRecorder-234"><span class="linenos">234</span></a>        <span class="c1"># record=True means it&#39;s None.</span>
</span><span id="WarningsRecorder-235"><a href="#WarningsRecorder-235"><span class="linenos">235</span></a>        <span class="k">assert</span> <span class="n">_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="WarningsRecorder-236"><a href="#WarningsRecorder-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_list</span> <span class="o">=</span> <span class="n">_list</span>
</span><span id="WarningsRecorder-237"><a href="#WarningsRecorder-237"><span class="linenos">237</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">)</span>
</span><span id="WarningsRecorder-238"><a href="#WarningsRecorder-238"><span class="linenos">238</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="WarningsRecorder-239"><a href="#WarningsRecorder-239"><span class="linenos">239</span></a>
</span><span id="WarningsRecorder-240"><a href="#WarningsRecorder-240"><span class="linenos">240</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span>
</span><span id="WarningsRecorder-241"><a href="#WarningsRecorder-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="WarningsRecorder-242"><a href="#WarningsRecorder-242"><span class="linenos">242</span></a>        <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="WarningsRecorder-243"><a href="#WarningsRecorder-243"><span class="linenos">243</span></a>        <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="WarningsRecorder-244"><a href="#WarningsRecorder-244"><span class="linenos">244</span></a>        <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="WarningsRecorder-245"><a href="#WarningsRecorder-245"><span class="linenos">245</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder-246"><a href="#WarningsRecorder-246"><span class="linenos">246</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entered</span><span class="p">:</span>
</span><span id="WarningsRecorder-247"><a href="#WarningsRecorder-247"><span class="linenos">247</span></a>            <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="WarningsRecorder-248"><a href="#WarningsRecorder-248"><span class="linenos">248</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot exit </span><span class="si">{</span><span class="bp">self</span><span class="si">!r}</span><span class="s2"> without entering first&quot;</span><span class="p">)</span>
</span><span id="WarningsRecorder-249"><a href="#WarningsRecorder-249"><span class="linenos">249</span></a>
</span><span id="WarningsRecorder-250"><a href="#WarningsRecorder-250"><span class="linenos">250</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__exit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">)</span>
</span><span id="WarningsRecorder-251"><a href="#WarningsRecorder-251"><span class="linenos">251</span></a>
</span><span id="WarningsRecorder-252"><a href="#WarningsRecorder-252"><span class="linenos">252</span></a>        <span class="c1"># Built-in catch_warnings does not reset entered state so we do it</span>
</span><span id="WarningsRecorder-253"><a href="#WarningsRecorder-253"><span class="linenos">253</span></a>        <span class="c1"># manually here for this context manager to become reusable.</span>
</span><span id="WarningsRecorder-254"><a href="#WarningsRecorder-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_entered</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>A context manager to record raised warnings.</p>

<p>Each recorded warning is an instance of <code>warnings.WarningMessage</code>.</p>

<p>Adapted from <code>warnings.catch_warnings</code>.</p>

<div class="alert note">

<p><code>DeprecationWarning</code> and <code>PendingDeprecationWarning</code> are treated
differently; see :ref:<code>ensuring_function_triggers</code>.</p>

</div>
</div>


                            <div id="WarningsRecorder.__init__" class="classattr">
                                        <input id="WarningsRecorder.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">WarningsRecorder</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="WarningsRecorder.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WarningsRecorder.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WarningsRecorder.__init__-183"><a href="#WarningsRecorder.__init__-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_ispytest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder.__init__-184"><a href="#WarningsRecorder.__init__-184"><span class="linenos">184</span></a>        <span class="n">check_ispytest</span><span class="p">(</span><span class="n">_ispytest</span><span class="p">)</span>
</span><span id="WarningsRecorder.__init__-185"><a href="#WarningsRecorder.__init__-185"><span class="linenos">185</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="WarningsRecorder.__init__-186"><a href="#WarningsRecorder.__init__-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_entered</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="WarningsRecorder.__init__-187"><a href="#WarningsRecorder.__init__-187"><span class="linenos">187</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Specify whether to record warnings and if an alternative module
should be used other than sys.modules['warnings'].</p>

<p>For compatibility with Python 3.0, please consider all arguments to be
keyword-only.</p>
</div>


                            </div>
                            <div id="WarningsRecorder.list" class="classattr">
                                        <input id="WarningsRecorder.list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">list</span><span class="annotation">: &#39;list[warnings.WarningMessage]&#39;</span>

                <label class="view-source-button" for="WarningsRecorder.list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WarningsRecorder.list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WarningsRecorder.list-189"><a href="#WarningsRecorder.list-189"><span class="linenos">189</span></a>    <span class="nd">@property</span>
</span><span id="WarningsRecorder.list-190"><a href="#WarningsRecorder.list-190"><span class="linenos">190</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">]:</span>
</span><span id="WarningsRecorder.list-191"><a href="#WarningsRecorder.list-191"><span class="linenos">191</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of recorded warnings.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder.list-192"><a href="#WarningsRecorder.list-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span>
</span></pre></div>


            <div class="docstring"><p>The list of recorded warnings.</p>
</div>


                            </div>
                            <div id="WarningsRecorder.pop" class="classattr">
                                        <input id="WarningsRecorder.pop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pop</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param">cls: type[Warning] = &lt;class &#x27;Warning&#x27;&gt;</span><span class="return-annotation">) -> <span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span>:</span></span>

                <label class="view-source-button" for="WarningsRecorder.pop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WarningsRecorder.pop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WarningsRecorder.pop-206"><a href="#WarningsRecorder.pop-206"><span class="linenos">206</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">Warning</span><span class="p">]</span> <span class="o">=</span> <span class="ne">Warning</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">warnings</span><span class="o">.</span><span class="n">WarningMessage</span><span class="p">:</span>
</span><span id="WarningsRecorder.pop-207"><a href="#WarningsRecorder.pop-207"><span class="linenos">207</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pop the first recorded warning which is an instance of ``cls``,</span>
</span><span id="WarningsRecorder.pop-208"><a href="#WarningsRecorder.pop-208"><span class="linenos">208</span></a><span class="sd">        but not an instance of a child class of any other match.</span>
</span><span id="WarningsRecorder.pop-209"><a href="#WarningsRecorder.pop-209"><span class="linenos">209</span></a><span class="sd">        Raises ``AssertionError`` if there is no match.</span>
</span><span id="WarningsRecorder.pop-210"><a href="#WarningsRecorder.pop-210"><span class="linenos">210</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="WarningsRecorder.pop-211"><a href="#WarningsRecorder.pop-211"><span class="linenos">211</span></a>        <span class="n">best_idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="WarningsRecorder.pop-212"><a href="#WarningsRecorder.pop-212"><span class="linenos">212</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">):</span>
</span><span id="WarningsRecorder.pop-213"><a href="#WarningsRecorder.pop-213"><span class="linenos">213</span></a>            <span class="k">if</span> <span class="n">w</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="bp">cls</span><span class="p">:</span>
</span><span id="WarningsRecorder.pop-214"><a href="#WarningsRecorder.pop-214"><span class="linenos">214</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># exact match, stop looking</span>
</span><span id="WarningsRecorder.pop-215"><a href="#WarningsRecorder.pop-215"><span class="linenos">215</span></a>            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="WarningsRecorder.pop-216"><a href="#WarningsRecorder.pop-216"><span class="linenos">216</span></a>                <span class="n">best_idx</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="WarningsRecorder.pop-217"><a href="#WarningsRecorder.pop-217"><span class="linenos">217</span></a>                <span class="ow">or</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">best_idx</span><span class="p">]</span><span class="o">.</span><span class="n">category</span><span class="p">)</span>
</span><span id="WarningsRecorder.pop-218"><a href="#WarningsRecorder.pop-218"><span class="linenos">218</span></a>            <span class="p">):</span>
</span><span id="WarningsRecorder.pop-219"><a href="#WarningsRecorder.pop-219"><span class="linenos">219</span></a>                <span class="n">best_idx</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="WarningsRecorder.pop-220"><a href="#WarningsRecorder.pop-220"><span class="linenos">220</span></a>        <span class="k">if</span> <span class="n">best_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder.pop-221"><a href="#WarningsRecorder.pop-221"><span class="linenos">221</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">best_idx</span><span class="p">)</span>
</span><span id="WarningsRecorder.pop-222"><a href="#WarningsRecorder.pop-222"><span class="linenos">222</span></a>        <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="WarningsRecorder.pop-223"><a href="#WarningsRecorder.pop-223"><span class="linenos">223</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="si">!r}</span><span class="s2"> not found in warning list&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pop the first recorded warning which is an instance of <code>cls</code>,
but not an instance of a child class of any other match.
Raises <code>AssertionError</code> if there is no match.</p>
</div>


                            </div>
                            <div id="WarningsRecorder.clear" class="classattr">
                                        <input id="WarningsRecorder.clear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="WarningsRecorder.clear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WarningsRecorder.clear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WarningsRecorder.clear-225"><a href="#WarningsRecorder.clear-225"><span class="linenos">225</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WarningsRecorder.clear-226"><a href="#WarningsRecorder.clear-226"><span class="linenos">226</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the list of recorded warnings.&quot;&quot;&quot;</span>
</span><span id="WarningsRecorder.clear-227"><a href="#WarningsRecorder.clear-227"><span class="linenos">227</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Clear the list of recorded warnings.</p>
</div>


                            </div>
                </section>
                <section id="warns">
                            <input id="warns-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">warns</span><span class="signature pdoc-code multiline">(<span class="param">	expected_warning: type[Warning] | tuple[type[Warning], ...] = &lt;class &#x27;Warning&#x27;&gt;,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span>,</span><span class="param">	<span class="n">match</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="n">_pytest</span><span class="o">.</span><span class="n">recwarn</span><span class="o">.</span><span class="n">WarningsChecker</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="warns-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#warns"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="warns-106"><a href="#warns-106"><span class="linenos">106</span></a><span class="k">def</span><span class="w"> </span><span class="nf">warns</span><span class="p">(</span>
</span><span id="warns-107"><a href="#warns-107"><span class="linenos">107</span></a>    <span class="n">expected_warning</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">Warning</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="ne">Warning</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="ne">Warning</span><span class="p">,</span>
</span><span id="warns-108"><a href="#warns-108"><span class="linenos">108</span></a>    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="warns-109"><a href="#warns-109"><span class="linenos">109</span></a>    <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="warns-110"><a href="#warns-110"><span class="linenos">110</span></a>    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="warns-111"><a href="#warns-111"><span class="linenos">111</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WarningsChecker</span> <span class="o">|</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="warns-112"><a href="#warns-112"><span class="linenos">112</span></a><span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Assert that code raises a particular class of warning.</span>
</span><span id="warns-113"><a href="#warns-113"><span class="linenos">113</span></a>
</span><span id="warns-114"><a href="#warns-114"><span class="linenos">114</span></a><span class="sd">    Specifically, the parameter ``expected_warning`` can be a warning class or tuple</span>
</span><span id="warns-115"><a href="#warns-115"><span class="linenos">115</span></a><span class="sd">    of warning classes, and the code inside the ``with`` block must issue at least one</span>
</span><span id="warns-116"><a href="#warns-116"><span class="linenos">116</span></a><span class="sd">    warning of that class or classes.</span>
</span><span id="warns-117"><a href="#warns-117"><span class="linenos">117</span></a>
</span><span id="warns-118"><a href="#warns-118"><span class="linenos">118</span></a><span class="sd">    This helper produces a list of :class:`warnings.WarningMessage` objects, one for</span>
</span><span id="warns-119"><a href="#warns-119"><span class="linenos">119</span></a><span class="sd">    each warning emitted (regardless of whether it is an ``expected_warning`` or not).</span>
</span><span id="warns-120"><a href="#warns-120"><span class="linenos">120</span></a><span class="sd">    Since pytest 8.0, unmatched warnings are also re-emitted when the context closes.</span>
</span><span id="warns-121"><a href="#warns-121"><span class="linenos">121</span></a>
</span><span id="warns-122"><a href="#warns-122"><span class="linenos">122</span></a><span class="sd">    This function can be used as a context manager::</span>
</span><span id="warns-123"><a href="#warns-123"><span class="linenos">123</span></a>
</span><span id="warns-124"><a href="#warns-124"><span class="linenos">124</span></a><span class="sd">        &gt;&gt;&gt; import pytest</span>
</span><span id="warns-125"><a href="#warns-125"><span class="linenos">125</span></a><span class="sd">        &gt;&gt;&gt; with pytest.warns(RuntimeWarning):</span>
</span><span id="warns-126"><a href="#warns-126"><span class="linenos">126</span></a><span class="sd">        ...    warnings.warn(&quot;my warning&quot;, RuntimeWarning)</span>
</span><span id="warns-127"><a href="#warns-127"><span class="linenos">127</span></a>
</span><span id="warns-128"><a href="#warns-128"><span class="linenos">128</span></a><span class="sd">    In the context manager form you may use the keyword argument ``match`` to assert</span>
</span><span id="warns-129"><a href="#warns-129"><span class="linenos">129</span></a><span class="sd">    that the warning matches a text or regex::</span>
</span><span id="warns-130"><a href="#warns-130"><span class="linenos">130</span></a>
</span><span id="warns-131"><a href="#warns-131"><span class="linenos">131</span></a><span class="sd">        &gt;&gt;&gt; with pytest.warns(UserWarning, match=&#39;must be 0 or None&#39;):</span>
</span><span id="warns-132"><a href="#warns-132"><span class="linenos">132</span></a><span class="sd">        ...     warnings.warn(&quot;value must be 0 or None&quot;, UserWarning)</span>
</span><span id="warns-133"><a href="#warns-133"><span class="linenos">133</span></a>
</span><span id="warns-134"><a href="#warns-134"><span class="linenos">134</span></a><span class="sd">        &gt;&gt;&gt; with pytest.warns(UserWarning, match=r&#39;must be \d+$&#39;):</span>
</span><span id="warns-135"><a href="#warns-135"><span class="linenos">135</span></a><span class="sd">        ...     warnings.warn(&quot;value must be 42&quot;, UserWarning)</span>
</span><span id="warns-136"><a href="#warns-136"><span class="linenos">136</span></a>
</span><span id="warns-137"><a href="#warns-137"><span class="linenos">137</span></a><span class="sd">        &gt;&gt;&gt; with pytest.warns(UserWarning):  # catch re-emitted warning</span>
</span><span id="warns-138"><a href="#warns-138"><span class="linenos">138</span></a><span class="sd">        ...     with pytest.warns(UserWarning, match=r&#39;must be \d+$&#39;):</span>
</span><span id="warns-139"><a href="#warns-139"><span class="linenos">139</span></a><span class="sd">        ...         warnings.warn(&quot;this is not here&quot;, UserWarning)</span>
</span><span id="warns-140"><a href="#warns-140"><span class="linenos">140</span></a><span class="sd">        Traceback (most recent call last):</span>
</span><span id="warns-141"><a href="#warns-141"><span class="linenos">141</span></a><span class="sd">          ...</span>
</span><span id="warns-142"><a href="#warns-142"><span class="linenos">142</span></a><span class="sd">        Failed: DID NOT WARN. No warnings of type ...UserWarning... were emitted...</span>
</span><span id="warns-143"><a href="#warns-143"><span class="linenos">143</span></a>
</span><span id="warns-144"><a href="#warns-144"><span class="linenos">144</span></a><span class="sd">    **Using with** ``pytest.mark.parametrize``</span>
</span><span id="warns-145"><a href="#warns-145"><span class="linenos">145</span></a>
</span><span id="warns-146"><a href="#warns-146"><span class="linenos">146</span></a><span class="sd">    When using :ref:`pytest.mark.parametrize ref` it is possible to parametrize tests</span>
</span><span id="warns-147"><a href="#warns-147"><span class="linenos">147</span></a><span class="sd">    such that some runs raise a warning and others do not.</span>
</span><span id="warns-148"><a href="#warns-148"><span class="linenos">148</span></a>
</span><span id="warns-149"><a href="#warns-149"><span class="linenos">149</span></a><span class="sd">    This could be achieved in the same way as with exceptions, see</span>
</span><span id="warns-150"><a href="#warns-150"><span class="linenos">150</span></a><span class="sd">    :ref:`parametrizing_conditional_raising` for an example.</span>
</span><span id="warns-151"><a href="#warns-151"><span class="linenos">151</span></a>
</span><span id="warns-152"><a href="#warns-152"><span class="linenos">152</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="warns-153"><a href="#warns-153"><span class="linenos">153</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="warns-154"><a href="#warns-154"><span class="linenos">154</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
</span><span id="warns-155"><a href="#warns-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
</span><span id="warns-156"><a href="#warns-156"><span class="linenos">156</span></a>            <span class="n">argnames</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="warns-157"><a href="#warns-157"><span class="linenos">157</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="warns-158"><a href="#warns-158"><span class="linenos">158</span></a>                <span class="sa">f</span><span class="s2">&quot;Unexpected keyword arguments passed to pytest.warns: </span><span class="si">{</span><span class="n">argnames</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="warns-159"><a href="#warns-159"><span class="linenos">159</span></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Use context-manager form instead?&quot;</span>
</span><span id="warns-160"><a href="#warns-160"><span class="linenos">160</span></a>            <span class="p">)</span>
</span><span id="warns-161"><a href="#warns-161"><span class="linenos">161</span></a>        <span class="k">return</span> <span class="n">WarningsChecker</span><span class="p">(</span><span class="n">expected_warning</span><span class="p">,</span> <span class="n">match_expr</span><span class="o">=</span><span class="n">match</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="warns-162"><a href="#warns-162"><span class="linenos">162</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="warns-163"><a href="#warns-163"><span class="linenos">163</span></a>        <span class="n">func</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="warns-164"><a href="#warns-164"><span class="linenos">164</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="warns-165"><a href="#warns-165"><span class="linenos">165</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="si">!r}</span><span class="s2"> object (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="si">}</span><span class="s2">) must be callable&quot;</span><span class="p">)</span>
</span><span id="warns-166"><a href="#warns-166"><span class="linenos">166</span></a>        <span class="k">with</span> <span class="n">WarningsChecker</span><span class="p">(</span><span class="n">expected_warning</span><span class="p">,</span> <span class="n">_ispytest</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="warns-167"><a href="#warns-167"><span class="linenos">167</span></a>            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Assert that code raises a particular class of warning.</p>

<p>Specifically, the parameter <code>expected_warning</code> can be a warning class or tuple
of warning classes, and the code inside the <code>with</code> block must issue at least one
warning of that class or classes.</p>

<p>This helper produces a list of <code>warnings.WarningMessage</code> objects, one for
each warning emitted (regardless of whether it is an <code>expected_warning</code> or not).
Since pytest 8.0, unmatched warnings are also re-emitted when the context closes.</p>

<p>This function can be used as a context manager::</p>

<pre><code>&gt;&gt;&gt; import pytest
&gt;&gt;&gt; with <a href="#warns">pytest.warns</a>(RuntimeWarning):
...    warnings.warn("my warning", RuntimeWarning)
</code></pre>

<p>In the context manager form you may use the keyword argument <code>match</code> to assert
that the warning matches a text or regex::</p>

<pre><code>&gt;&gt;&gt; with <a href="#warns">pytest.warns</a>(UserWarning, match='must be 0 or None'):
...     warnings.warn("value must be 0 or None", UserWarning)

&gt;&gt;&gt; with <a href="#warns">pytest.warns</a>(UserWarning, match=r'must be \d+$'):
...     warnings.warn("value must be 42", UserWarning)

&gt;&gt;&gt; with <a href="#warns">pytest.warns</a>(UserWarning):  # catch re-emitted warning
...     with <a href="#warns">pytest.warns</a>(UserWarning, match=r'must be \d+$'):
...         warnings.warn("this is not here", UserWarning)
Traceback (most recent call last):
  ...
Failed: DID NOT WARN. No warnings of type ...UserWarning... were emitted...
</code></pre>

<p><strong>Using with</strong> <code>pytest.mark.parametrize</code></p>

<p>When using :ref:<code>pytest.mark.parametrize ref</code> it is possible to parametrize tests
such that some runs raise a warning and others do not.</p>

<p>This could be achieved in the same way as with exceptions, see
:ref:<code>parametrizing_conditional_raising</code> for an example.</p>
</div>


                </section>
                <section id="xfail">
                            <input id="xfail-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">xfail</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="n">NoReturn</span>:</span></span>

                <label class="view-source-button" for="xfail-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#xfail"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="xfail-186"><a href="#xfail-186"><span class="linenos">186</span></a><span class="nd">@_with_exception</span><span class="p">(</span><span class="n">XFailed</span><span class="p">)</span>
</span><span id="xfail-187"><a href="#xfail-187"><span class="linenos">187</span></a><span class="k">def</span><span class="w"> </span><span class="nf">xfail</span><span class="p">(</span><span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="xfail-188"><a href="#xfail-188"><span class="linenos">188</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Imperatively xfail an executing test or setup function with the given reason.</span>
</span><span id="xfail-189"><a href="#xfail-189"><span class="linenos">189</span></a>
</span><span id="xfail-190"><a href="#xfail-190"><span class="linenos">190</span></a><span class="sd">    This function should be called only during testing (setup, call or teardown).</span>
</span><span id="xfail-191"><a href="#xfail-191"><span class="linenos">191</span></a>
</span><span id="xfail-192"><a href="#xfail-192"><span class="linenos">192</span></a><span class="sd">    No other code is executed after using ``xfail()`` (it is implemented</span>
</span><span id="xfail-193"><a href="#xfail-193"><span class="linenos">193</span></a><span class="sd">    internally by raising an exception).</span>
</span><span id="xfail-194"><a href="#xfail-194"><span class="linenos">194</span></a>
</span><span id="xfail-195"><a href="#xfail-195"><span class="linenos">195</span></a><span class="sd">    :param reason:</span>
</span><span id="xfail-196"><a href="#xfail-196"><span class="linenos">196</span></a><span class="sd">        The message to show the user as reason for the xfail.</span>
</span><span id="xfail-197"><a href="#xfail-197"><span class="linenos">197</span></a>
</span><span id="xfail-198"><a href="#xfail-198"><span class="linenos">198</span></a><span class="sd">    .. note::</span>
</span><span id="xfail-199"><a href="#xfail-199"><span class="linenos">199</span></a><span class="sd">        It is better to use the :ref:`pytest.mark.xfail ref` marker when</span>
</span><span id="xfail-200"><a href="#xfail-200"><span class="linenos">200</span></a><span class="sd">        possible to declare a test to be xfailed under certain conditions</span>
</span><span id="xfail-201"><a href="#xfail-201"><span class="linenos">201</span></a><span class="sd">        like known bugs or missing features.</span>
</span><span id="xfail-202"><a href="#xfail-202"><span class="linenos">202</span></a>
</span><span id="xfail-203"><a href="#xfail-203"><span class="linenos">203</span></a><span class="sd">    :raises pytest.xfail.Exception:</span>
</span><span id="xfail-204"><a href="#xfail-204"><span class="linenos">204</span></a><span class="sd">        The exception that is raised.</span>
</span><span id="xfail-205"><a href="#xfail-205"><span class="linenos">205</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="xfail-206"><a href="#xfail-206"><span class="linenos">206</span></a>    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="xfail-207"><a href="#xfail-207"><span class="linenos">207</span></a>    <span class="k">raise</span> <span class="n">XFailed</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Imperatively xfail an executing test or setup function with the given reason.</p>

<p>This function should be called only during testing (setup, call or teardown).</p>

<p>No other code is executed after using <code><a href="#xfail">xfail()</a></code> (it is implemented
internally by raising an exception).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>reason</strong>: 
The message to show the user as reason for the xfail.</li>
</ul>

<div class="alert note">

<p>It is better to use the :ref:<code><a href="#xfail">pytest.mark.xfail</a> ref</code> marker when
possible to declare a test to be xfailed under certain conditions
like known bugs or missing features.</p>

</div>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>pytest.xfail.Exception</strong>: 
The exception that is raised.</li>
</ul>
</div>


                </section>
                <section id="yield_fixture">
                            <input id="yield_fixture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">yield_fixture</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">fixture_function</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span>,</span><span class="param">	<span class="n">scope</span><span class="o">=</span><span class="s1">&#39;function&#39;</span>,</span><span class="param">	<span class="n">params</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">autouse</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">ids</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">name</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="yield_fixture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#yield_fixture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="yield_fixture-1319"><a href="#yield_fixture-1319"><span class="linenos">1319</span></a><span class="k">def</span><span class="w"> </span><span class="nf">yield_fixture</span><span class="p">(</span>
</span><span id="yield_fixture-1320"><a href="#yield_fixture-1320"><span class="linenos">1320</span></a>    <span class="n">fixture_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="yield_fixture-1321"><a href="#yield_fixture-1321"><span class="linenos">1321</span></a>    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="yield_fixture-1322"><a href="#yield_fixture-1322"><span class="linenos">1322</span></a>    <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="yield_fixture-1323"><a href="#yield_fixture-1323"><span class="linenos">1323</span></a>    <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="yield_fixture-1324"><a href="#yield_fixture-1324"><span class="linenos">1324</span></a>    <span class="n">autouse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="yield_fixture-1325"><a href="#yield_fixture-1325"><span class="linenos">1325</span></a>    <span class="n">ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="yield_fixture-1326"><a href="#yield_fixture-1326"><span class="linenos">1326</span></a>    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="yield_fixture-1327"><a href="#yield_fixture-1327"><span class="linenos">1327</span></a><span class="p">):</span>
</span><span id="yield_fixture-1328"><a href="#yield_fixture-1328"><span class="linenos">1328</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;(Return a) decorator to mark a yield-fixture factory function.</span>
</span><span id="yield_fixture-1329"><a href="#yield_fixture-1329"><span class="linenos">1329</span></a>
</span><span id="yield_fixture-1330"><a href="#yield_fixture-1330"><span class="linenos">1330</span></a><span class="sd">    .. deprecated:: 3.0</span>
</span><span id="yield_fixture-1331"><a href="#yield_fixture-1331"><span class="linenos">1331</span></a><span class="sd">        Use :py:func:`pytest.fixture` directly instead.</span>
</span><span id="yield_fixture-1332"><a href="#yield_fixture-1332"><span class="linenos">1332</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="yield_fixture-1333"><a href="#yield_fixture-1333"><span class="linenos">1333</span></a>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">YIELD_FIXTURE</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="yield_fixture-1334"><a href="#yield_fixture-1334"><span class="linenos">1334</span></a>    <span class="k">return</span> <span class="n">fixture</span><span class="p">(</span>
</span><span id="yield_fixture-1335"><a href="#yield_fixture-1335"><span class="linenos">1335</span></a>        <span class="n">fixture_function</span><span class="p">,</span>
</span><span id="yield_fixture-1336"><a href="#yield_fixture-1336"><span class="linenos">1336</span></a>        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="yield_fixture-1337"><a href="#yield_fixture-1337"><span class="linenos">1337</span></a>        <span class="n">scope</span><span class="o">=</span><span class="n">scope</span><span class="p">,</span>
</span><span id="yield_fixture-1338"><a href="#yield_fixture-1338"><span class="linenos">1338</span></a>        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
</span><span id="yield_fixture-1339"><a href="#yield_fixture-1339"><span class="linenos">1339</span></a>        <span class="n">autouse</span><span class="o">=</span><span class="n">autouse</span><span class="p">,</span>
</span><span id="yield_fixture-1340"><a href="#yield_fixture-1340"><span class="linenos">1340</span></a>        <span class="n">ids</span><span class="o">=</span><span class="n">ids</span><span class="p">,</span>
</span><span id="yield_fixture-1341"><a href="#yield_fixture-1341"><span class="linenos">1341</span></a>        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="yield_fixture-1342"><a href="#yield_fixture-1342"><span class="linenos">1342</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>(Return a) decorator to mark a yield-fixture factory function.</p>

<p><em>Deprecated since version 3.0:</em>
Use <code><a href="#fixture">pytest.fixture()</a></code> directly instead.</p>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>